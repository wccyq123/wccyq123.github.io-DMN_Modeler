var CH=Object.defineProperty,SH=Object.defineProperties;var AH=Object.getOwnPropertyDescriptors;var Jv=Object.getOwnPropertySymbols;var vF=Object.prototype.hasOwnProperty,xF=Object.prototype.propertyIsEnumerable;var bF=Math.pow,vw=(lo,bs,dn)=>bs in lo?CH(lo,bs,{enumerable:!0,configurable:!0,writable:!0,value:dn}):lo[bs]=dn,Jt=(lo,bs)=>{for(var dn in bs||(bs={}))vF.call(bs,dn)&&vw(lo,dn,bs[dn]);if(Jv)for(var dn of Jv(bs))xF.call(bs,dn)&&vw(lo,dn,bs[dn]);return lo},qi=(lo,bs)=>SH(lo,AH(bs));var Zu=(lo,bs)=>{var dn={};for(var xe in lo)vF.call(lo,xe)&&bs.indexOf(xe)<0&&(dn[xe]=lo[xe]);if(lo!=null&&Jv)for(var xe of Jv(lo))bs.indexOf(xe)<0&&xF.call(lo,xe)&&(dn[xe]=lo[xe]);return dn};var $n=(lo,bs,dn)=>(vw(lo,typeof bs!="symbol"?bs+"":bs,dn),dn);var gl=(lo,bs,dn)=>new Promise((xe,It)=>{var fn=yn=>{try{Qt(dn.next(yn))}catch(ii){It(ii)}},it=yn=>{try{Qt(dn.throw(yn))}catch(ii){It(ii)}},Qt=yn=>yn.done?xe(yn.value):Promise.resolve(yn.value).then(fn,it);Qt((dn=dn.apply(lo,bs)).next())});(self.webpackChunk=self.webpackChunk||[]).push([[635],{85716:function(lo,bs,dn){"use strict";dn.d(bs,{Z:function(){return Nn}});var xe=dn(80284),It=dn(93236),fn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},it=fn,Qt=dn(64006),yn=function(In,vn){return It.createElement(Qt.Z,(0,xe.Z)({},In,{ref:vn,icon:it}))},ii=It.forwardRef(yn),Nn=ii},13763:function(lo,bs,dn){"use strict";dn.d(bs,{ZP:function(){return tl}});var xe=dn(80284),It=dn(9785),fn=dn(93236),it=dn(80403),Qt=dn(90586),yn=dn(99517),ii=dn(99415);const Nn=k=>{let{state:D}=k,M=D.doc.lineAt(D.selection.main.from),L=qt(k.state,M.from);return L.line?In(k):L.block?$t(k):!1};function Kt(k,D){return({state:M,dispatch:L})=>{if(M.readOnly)return!1;let z=k(D,M);return z?(L(M.update(z)),!0):!1}}const In=Kt(pi,0),vn=null,gn=null,Si=Kt(zs,0),Ii=null,Un=null,$t=Kt((k,D)=>zs(k,D,Dr(D)),0);function qt(k,D){let M=k.languageDataAt("commentTokens",D);return M.length?M[0]:{}}const mr=50;function ss(k,{open:D,close:M},L,z){let K=k.sliceDoc(L-mr,L),me=k.sliceDoc(z,z+mr),Te=/\s*$/.exec(K)[0].length,nt=/^\s*/.exec(me)[0].length,Pt=K.length-Te;if(K.slice(Pt-D.length,Pt)==D&&me.slice(nt,nt+M.length)==M)return{open:{pos:L-Te,margin:Te&&1},close:{pos:z+nt,margin:nt&&1}};let Wt,Gn;z-L<=2*mr?Wt=Gn=k.sliceDoc(L,z):(Wt=k.sliceDoc(L,L+mr),Gn=k.sliceDoc(z-mr,z));let Gi=/^\s*/.exec(Wt)[0].length,ts=/\s*$/.exec(Gn)[0].length,io=Gn.length-ts-M.length;return Wt.slice(Gi,Gi+D.length)==D&&Gn.slice(io,io+M.length)==M?{open:{pos:L+Gi+D.length,margin:/\s/.test(Wt.charAt(Gi+D.length))?1:0},close:{pos:z-ts-M.length,margin:/\s/.test(Gn.charAt(io-1))?1:0}}:null}function Dr(k){let D=[];for(let M of k.selection.ranges){let L=k.doc.lineAt(M.from),z=M.to<=L.to?L:k.doc.lineAt(M.to),K=D.length-1;K>=0&&D[K].to>L.from?D[K].to=z.to:D.push({from:L.from+/^\s*/.exec(L.text)[0].length,to:z.to})}return D}function zs(k,D,M=D.selection.ranges){let L=M.map(K=>qt(D,K.from).block);if(!L.every(K=>K))return null;let z=M.map((K,me)=>ss(D,L[me],K.from,K.to));if(k!=2&&!z.every(K=>K))return{changes:D.changes(M.map((K,me)=>z[me]?[]:[{from:K.from,insert:L[me].open+" "},{from:K.to,insert:" "+L[me].close}]))};if(k!=1&&z.some(K=>K)){let K=[];for(let me=0,Te;me<z.length;me++)if(Te=z[me]){let nt=L[me],{open:Pt,close:Wt}=Te;K.push({from:Pt.pos-nt.open.length,to:Pt.pos+Pt.margin},{from:Wt.pos-Wt.margin,to:Wt.pos+nt.close.length})}return{changes:K}}return null}function pi(k,D,M=D.selection.ranges){let L=[],z=-1;for(let{from:K,to:me}of M){let Te=L.length,nt=1e9,Pt=qt(D,K).line;if(Pt){for(let Wt=K;Wt<=me;){let Gn=D.doc.lineAt(Wt);if(Gn.from>z&&(K==me||me>Gn.from)){z=Gn.from;let Gi=/^\s*/.exec(Gn.text)[0].length,ts=Gi==Gn.length,io=Gn.text.slice(Gi,Gi+Pt.length)==Pt?Gi:-1;Gi<Gn.text.length&&Gi<nt&&(nt=Gi),L.push({line:Gn,comment:io,token:Pt,indent:Gi,empty:ts,single:!1})}Wt=Gn.to+1}if(nt<1e9)for(let Wt=Te;Wt<L.length;Wt++)L[Wt].indent<L[Wt].line.text.length&&(L[Wt].indent=nt);L.length==Te+1&&(L[Te].single=!0)}}if(k!=2&&L.some(K=>K.comment<0&&(!K.empty||K.single))){let K=[];for(let{line:Te,token:nt,indent:Pt,empty:Wt,single:Gn}of L)(Gn||!Wt)&&K.push({from:Te.from+Pt,insert:nt+" "});let me=D.changes(K);return{changes:me,selection:D.selection.map(me,1)}}else if(k!=1&&L.some(K=>K.comment>=0)){let K=[];for(let{line:me,comment:Te,token:nt}of L)if(Te>=0){let Pt=me.from+Te,Wt=Pt+nt.length;me.text[Wt-me.from]==" "&&Wt++,K.push({from:Pt,to:Wt})}return{changes:K}}return null}const vs=it.q6.define(),uo=it.q6.define(),cs=it.r$.define(),wr=it.r$.define({combine(k){return(0,it.BO)(k,{minDepth:100,newGroupDelay:500,joinToEvent:(D,M)=>M},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(D,M)=>(L,z)=>D(L,z)||M(L,z)})}}),jr=it.QQ.define({create(){return en.empty},update(k,D){let M=D.state.facet(wr),L=D.annotation(vs);if(L){let nt=Xe.fromTransaction(D,L.selection),Pt=L.side,Wt=Pt==0?k.undone:k.done;return nt?Wt=St(Wt,Wt.length,M.minDepth,nt):Wt=Ki(Wt,D.startState.selection),new en(Pt==0?L.rest:Wt,Pt==0?Wt:L.rest)}let z=D.annotation(uo);if((z=="full"||z=="before")&&(k=k.isolate()),D.annotation(it.YW.addToHistory)===!1)return D.changes.empty?k:k.addMapping(D.changes.desc);let K=Xe.fromTransaction(D),me=D.annotation(it.YW.time),Te=D.annotation(it.YW.userEvent);return K?k=k.addChanges(K,me,Te,M,D):D.selection&&(k=k.addSelection(D.startState.selection,me,Te,M.newGroupDelay)),(z=="full"||z=="after")&&(k=k.isolate()),k},toJSON(k){return{done:k.done.map(D=>D.toJSON()),undone:k.undone.map(D=>D.toJSON())}},fromJSON(k){return new en(k.done.map(Xe.fromJSON),k.undone.map(Xe.fromJSON))}});function vr(k={}){return[jr,wr.of(k),Qt.tk.domEventHandlers({beforeinput(D,M){let L=D.inputType=="historyUndo"?ci:D.inputType=="historyRedo"?le:null;return L?(D.preventDefault(),L(M)):!1}})]}const qs=null;function Is(k,D){return function({state:M,dispatch:L}){if(!D&&M.readOnly)return!1;let z=M.field(jr,!1);if(!z)return!1;let K=z.pop(k,M,D);return K?(L(K),!0):!1}}const ci=Is(0,!1),le=Is(1,!1),$e=Is(0,!0),ze=Is(1,!0);function ee(k){return function(D){let M=D.field(jr,!1);if(!M)return 0;let L=k==0?M.done:M.undone;return L.length-(L.length&&!L[0].changes?1:0)}}const Ze=null,Ie=null;class Xe{constructor(D,M,L,z,K){this.changes=D,this.effects=M,this.mapped=L,this.startSelection=z,this.selectionsAfter=K}setSelAfter(D){return new Xe(this.changes,this.effects,this.mapped,this.startSelection,D)}toJSON(){var D,M,L;return{changes:(D=this.changes)===null||D===void 0?void 0:D.toJSON(),mapped:(M=this.mapped)===null||M===void 0?void 0:M.toJSON(),startSelection:(L=this.startSelection)===null||L===void 0?void 0:L.toJSON(),selectionsAfter:this.selectionsAfter.map(z=>z.toJSON())}}static fromJSON(D){return new Xe(D.changes&&it.as.fromJSON(D.changes),[],D.mapped&&it.n0.fromJSON(D.mapped),D.startSelection&&it.jT.fromJSON(D.startSelection),D.selectionsAfter.map(it.jT.fromJSON))}static fromTransaction(D,M){let L=Qn;for(let z of D.startState.facet(cs)){let K=z(D);K.length&&(L=L.concat(K))}return!L.length&&D.changes.empty?null:new Xe(D.changes.invert(D.startState.doc),L,void 0,M||D.startState.selection,Qn)}static selection(D){return new Xe(void 0,Qn,void 0,void 0,D)}}function St(k,D,M,L){let z=D+1>M+20?D-M-1:0,K=k.slice(z,D);return K.push(L),K}function Tt(k,D){let M=[],L=!1;return k.iterChangedRanges((z,K)=>M.push(z,K)),D.iterChangedRanges((z,K,me,Te)=>{for(let nt=0;nt<M.length;){let Pt=M[nt++],Wt=M[nt++];Te>=Pt&&me<=Wt&&(L=!0)}}),L}function Bn(k,D){return k.ranges.length==D.ranges.length&&k.ranges.filter((M,L)=>M.empty!=D.ranges[L].empty).length===0}function Fn(k,D){return k.length?D.length?k.concat(D):k:D}const Qn=[],hi=200;function Ki(k,D){if(k.length){let M=k[k.length-1],L=M.selectionsAfter.slice(Math.max(0,M.selectionsAfter.length-hi));return L.length&&L[L.length-1].eq(D)?k:(L.push(D),St(k,k.length-1,1e9,M.setSelAfter(L)))}else return[Xe.selection([D])]}function Vn(k){let D=k[k.length-1],M=k.slice();return M[k.length-1]=D.setSelAfter(D.selectionsAfter.slice(0,D.selectionsAfter.length-1)),M}function fs(k,D){if(!k.length)return k;let M=k.length,L=Qn;for(;M;){let z=wo(k[M-1],D,L);if(z.changes&&!z.changes.empty||z.effects.length){let K=k.slice(0,M);return K[M-1]=z,K}else D=z.mapped,M--,L=z.selectionsAfter}return L.length?[Xe.selection(L)]:Qn}function wo(k,D,M){let L=Fn(k.selectionsAfter.length?k.selectionsAfter.map(Te=>Te.map(D)):Qn,M);if(!k.changes)return Xe.selection(L);let z=k.changes.map(D),K=D.mapDesc(k.changes,!0),me=k.mapped?k.mapped.composeDesc(K):K;return new Xe(z,it.Py.mapEffects(k.effects,D),me,k.startSelection.map(K),L)}const Ao=/^(input\.type|delete)($|\.)/;class en{constructor(D,M,L=0,z=void 0){this.done=D,this.undone=M,this.prevTime=L,this.prevUserEvent=z}isolate(){return this.prevTime?new en(this.done,this.undone):this}addChanges(D,M,L,z,K){let me=this.done,Te=me[me.length-1];return Te&&Te.changes&&!Te.changes.empty&&D.changes&&(!L||Ao.test(L))&&(!Te.selectionsAfter.length&&M-this.prevTime<z.newGroupDelay&&z.joinToEvent(K,Tt(Te.changes,D.changes))||L=="input.type.compose")?me=St(me,me.length-1,z.minDepth,new Xe(D.changes.compose(Te.changes),Fn(D.effects,Te.effects),Te.mapped,Te.startSelection,Qn)):me=St(me,me.length,z.minDepth,D),new en(me,Qn,M,L)}addSelection(D,M,L,z){let K=this.done.length?this.done[this.done.length-1].selectionsAfter:Qn;return K.length>0&&M-this.prevTime<z&&L==this.prevUserEvent&&L&&/^select($|\.)/.test(L)&&Bn(K[K.length-1],D)?this:new en(Ki(this.done,D),this.undone,M,L)}addMapping(D){return new en(fs(this.done,D),fs(this.undone,D),this.prevTime,this.prevUserEvent)}pop(D,M,L){let z=D==0?this.done:this.undone;if(z.length==0)return null;let K=z[z.length-1],me=K.selectionsAfter[0]||M.selection;if(L&&K.selectionsAfter.length)return M.update({selection:K.selectionsAfter[K.selectionsAfter.length-1],annotations:vs.of({side:D,rest:Vn(z),selection:me}),userEvent:D==0?"select.undo":"select.redo",scrollIntoView:!0});if(K.changes){let Te=z.length==1?Qn:z.slice(0,z.length-1);return K.mapped&&(Te=fs(Te,K.mapped)),M.update({changes:K.changes,selection:K.startSelection,effects:K.effects,annotations:vs.of({side:D,rest:Te,selection:me}),filter:!1,userEvent:D==0?"undo":"redo",scrollIntoView:!0})}else return null}}en.empty=new en(Qn,Qn);const fe=[{key:"Mod-z",run:ci,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:le,preventDefault:!0},{linux:"Ctrl-Shift-z",run:le,preventDefault:!0},{key:"Mod-u",run:$e,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:ze,preventDefault:!0}];function Fe(k,D){return it.jT.create(k.ranges.map(D),k.mainIndex)}function Ye(k,D){return k.update({selection:D,scrollIntoView:!0,userEvent:"select"})}function Ve({state:k,dispatch:D},M){let L=Fe(k.selection,M);return L.eq(k.selection,!0)?!1:(D(Ye(k,L)),!0)}function Ge(k,D){return it.jT.cursor(D?k.to:k.from)}function Ut(k,D){return Ve(k,M=>M.empty?k.moveByChar(M,D):Ge(M,D))}function sn(k){return k.textDirectionAt(k.state.selection.main.head)==Qt.Nm.LTR}const _n=k=>Ut(k,!sn(k)),Hi=k=>Ut(k,sn(k)),Wn=k=>Ut(k,!0),xi=k=>Ut(k,!1);function ar(k,D){return Ve(k,M=>M.empty?k.moveByGroup(M,D):Ge(M,D))}const di=k=>ar(k,!sn(k)),Ui=k=>ar(k,sn(k)),hr=k=>ar(k,!0),bi=k=>ar(k,!1),Gr=typeof Intl!="undefined"&&Intl.Segmenter?new Intl.Segmenter(void 0,{granularity:"word"}):null;function Zi(k,D,M){let L=k.state.charCategorizer(D.from),z=CharCategory.Space,K=D.from,me=0,Te=!1,nt=!1,Pt=!1,Wt=Gi=>{if(Te)return!1;K+=M?Gi.length:-Gi.length;let ts=L(Gi),io;if(ts==CharCategory.Word&&Gi.charCodeAt(0)<128&&/[\W_]/.test(Gi)&&(ts=-1),z==CharCategory.Space&&(z=ts),z!=ts)return!1;if(z==CharCategory.Word)if(Gi.toLowerCase()==Gi){if(!M&&nt)return!1;Pt=!0}else if(Pt){if(M)return!1;Te=!0}else{if(nt&&M&&L(io=k.state.sliceDoc(K,K+1))==CharCategory.Word&&io.toLowerCase()==io)return!1;nt=!0}return me++,!0},Gn=k.moveByChar(D,M,Gi=>(Wt(Gi),Wt));if(Gr&&z==CharCategory.Word&&Gn.from==D.from+me*(M?1:-1)){let Gi=Math.min(D.head,Gn.head),ts=Math.max(D.head,Gn.head),io=k.state.sliceDoc(Gi,ts);if(io.length>1&&/[\u4E00-\uffff]/.test(io)){let ca=Array.from(Gr.segment(io));if(ca.length>1)return M?EditorSelection.cursor(D.head+ca[1].index,-1):EditorSelection.cursor(Gn.head+ca[ca.length-1].index,1)}}return Gn}function xr(k,D){return Ve(k,M=>M.empty?Zi(k,M,D):Ge(M,D))}const ms=k=>xr(k,!0),Ni=k=>xr(k,!1);function qr(k,D,M){if(D.type.prop(M))return!0;let L=D.to-D.from;return L&&(L>2||/[^\s,.;:]/.test(k.sliceDoc(D.from,D.to)))||D.firstChild}function Di(k,D,M){let L=(0,yn.qz)(k).resolveInner(D.head),z=M?ii.md.closedBy:ii.md.openedBy;for(let nt=D.head;;){let Pt=M?L.childAfter(nt):L.childBefore(nt);if(!Pt)break;qr(k,Pt,z)?L=Pt:nt=M?Pt.to:Pt.from}let K=L.type.prop(z),me,Te;return K&&(me=M?(0,yn.Um)(k,L.from,1):(0,yn.Um)(k,L.to,-1))&&me.matched?Te=M?me.end.to:me.end.from:Te=M?L.to:L.from,it.jT.cursor(Te,M?-1:1)}const Sr=k=>Ve(k,D=>Di(k.state,D,!sn(k))),Qi=k=>Ve(k,D=>Di(k.state,D,sn(k)));function _i(k,D){return Ve(k,M=>{if(!M.empty)return Ge(M,D);let L=k.moveVertically(M,D);return L.head!=M.head?L:k.moveToLineBoundary(M,D)})}const gr=k=>_i(k,!1),Zn=k=>_i(k,!0);function tr(k){let D=k.scrollDOM.clientHeight<k.scrollDOM.scrollHeight-2,M=0,L=0,z;if(D){for(let K of k.state.facet(Qt.tk.scrollMargins)){let me=K(k);me!=null&&me.top&&(M=Math.max(me==null?void 0:me.top,M)),me!=null&&me.bottom&&(L=Math.max(me==null?void 0:me.bottom,L))}z=k.scrollDOM.clientHeight-M-L}else z=(k.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:M,marginBottom:L,selfScroll:D,height:Math.max(k.defaultLineHeight,z-5)}}function bn(k,D){let M=tr(k),{state:L}=k,z=Fe(L.selection,me=>me.empty?k.moveVertically(me,D,M.height):Ge(me,D));if(z.eq(L.selection))return!1;let K;if(M.selfScroll){let me=k.coordsAtPos(L.selection.main.head),Te=k.scrollDOM.getBoundingClientRect(),nt=Te.top+M.marginTop,Pt=Te.bottom-M.marginBottom;me&&me.top>nt&&me.bottom<Pt&&(K=Qt.tk.scrollIntoView(z.main.head,{y:"start",yMargin:me.top-nt}))}return k.dispatch(Ye(L,z),{effects:K}),!0}const Wr=k=>bn(k,!1),Js=k=>bn(k,!0);function Hr(k,D,M){let L=k.lineBlockAt(D.head),z=k.moveToLineBoundary(D,M);if(z.head==D.head&&z.head!=(M?L.to:L.from)&&(z=k.moveToLineBoundary(D,M,!1)),!M&&z.head==L.from&&L.length){let K=/^\s*/.exec(k.state.sliceDoc(L.from,Math.min(L.from+100,L.to)))[0].length;K&&D.head!=L.from+K&&(z=it.jT.cursor(L.from+K))}return z}const Lr=k=>Ve(k,D=>Hr(k,D,!0)),Pi=k=>Ve(k,D=>Hr(k,D,!1)),Qs=k=>Ve(k,D=>Hr(k,D,!sn(k))),Pn=k=>Ve(k,D=>Hr(k,D,sn(k))),Xs=k=>Ve(k,D=>it.jT.cursor(k.lineBlockAt(D.head).from,1)),Ts=k=>Ve(k,D=>it.jT.cursor(k.lineBlockAt(D.head).to,-1));function Kr(k,D,M){let L=!1,z=Fe(k.selection,K=>{let me=(0,yn.Um)(k,K.head,-1)||(0,yn.Um)(k,K.head,1)||K.head>0&&(0,yn.Um)(k,K.head-1,1)||K.head<k.doc.length&&(0,yn.Um)(k,K.head+1,-1);if(!me||!me.end)return K;L=!0;let Te=me.start.from==K.head?me.end.to:me.end.from;return M?it.jT.range(K.anchor,Te):it.jT.cursor(Te)});return L?(D(Ye(k,z)),!0):!1}const hs=({state:k,dispatch:D})=>Kr(k,D,!1),os=({state:k,dispatch:D})=>Kr(k,D,!0);function js(k,D){let M=Fe(k.state.selection,L=>{let z=D(L);return it.jT.range(L.anchor,z.head,z.goalColumn,z.bidiLevel||void 0)});return M.eq(k.state.selection)?!1:(k.dispatch(Ye(k.state,M)),!0)}function dr(k,D){return js(k,M=>k.moveByChar(M,D))}const Qr=k=>dr(k,!sn(k)),gs=k=>dr(k,sn(k)),ei=k=>dr(k,!0),Rs=k=>dr(k,!1);function co(k,D){return js(k,M=>k.moveByGroup(M,D))}const oa=k=>co(k,!sn(k)),na=k=>co(k,sn(k)),re=k=>co(k,!0),P=k=>co(k,!1);function V(k,D){return js(k,M=>Zi(k,M,D))}const Y=k=>V(k,!0),te=k=>V(k,!1),we=k=>js(k,D=>Di(k.state,D,!sn(k))),Ce=k=>js(k,D=>Di(k.state,D,sn(k)));function We(k,D){return js(k,M=>k.moveVertically(M,D))}const Dt=k=>We(k,!1),jt=k=>We(k,!0);function xn(k,D){return js(k,M=>k.moveVertically(M,D,tr(k).height))}const Tn=k=>xn(k,!1),mi=k=>xn(k,!0),vi=k=>js(k,D=>Hr(k,D,!0)),ws=k=>js(k,D=>Hr(k,D,!1)),ho=k=>js(k,D=>Hr(k,D,!sn(k))),pr=k=>js(k,D=>Hr(k,D,sn(k))),Fi=k=>js(k,D=>it.jT.cursor(k.lineBlockAt(D.head).from)),rt=k=>js(k,D=>it.jT.cursor(k.lineBlockAt(D.head).to)),so=({state:k,dispatch:D})=>(D(Ye(k,{anchor:0})),!0),To=({state:k,dispatch:D})=>(D(Ye(k,{anchor:k.doc.length})),!0),Os=({state:k,dispatch:D})=>(D(Ye(k,{anchor:k.selection.main.anchor,head:0})),!0),ds=({state:k,dispatch:D})=>(D(Ye(k,{anchor:k.selection.main.anchor,head:k.doc.length})),!0),Oo=({state:k,dispatch:D})=>(D(k.update({selection:{anchor:0,head:k.doc.length},userEvent:"select"})),!0),nr=({state:k,dispatch:D})=>{let M=ut(k).map(({from:L,to:z})=>it.jT.range(L,Math.min(z+1,k.doc.length)));return D(k.update({selection:it.jT.create(M),userEvent:"select"})),!0},wi=({state:k,dispatch:D})=>{let M=Fe(k.selection,L=>{var z;let K=(0,yn.qz)(k).resolveStack(L.from,1);for(let me=K;me;me=me.next){let{node:Te}=me;if((Te.from<L.from&&Te.to>=L.to||Te.to>L.to&&Te.from<=L.from)&&(!((z=Te.parent)===null||z===void 0)&&z.parent))return it.jT.range(Te.to,Te.from)}return L});return D(Ye(k,M)),!0},Mn=({state:k,dispatch:D})=>{let M=k.selection,L=null;return M.ranges.length>1?L=it.jT.create([M.main]):M.main.empty||(L=it.jT.create([it.jT.cursor(M.main.head)])),L?(D(Ye(k,L)),!0):!1};function ks(k,D){if(k.state.readOnly)return!1;let M="delete.selection",{state:L}=k,z=L.changeByRange(K=>{let{from:me,to:Te}=K;if(me==Te){let nt=D(K);nt<me?(M="delete.backward",nt=jo(k,nt,!1)):nt>me&&(M="delete.forward",nt=jo(k,nt,!0)),me=Math.min(me,nt),Te=Math.max(Te,nt)}else me=jo(k,me,!1),Te=jo(k,Te,!0);return me==Te?{range:K}:{changes:{from:me,to:Te},range:it.jT.cursor(me,me<K.head?-1:1)}});return z.changes.empty?!1:(k.dispatch(L.update(z,{scrollIntoView:!0,userEvent:M,effects:M=="delete.selection"?Qt.tk.announce.of(L.phrase("Selection deleted")):void 0})),!0)}function jo(k,D,M){if(k instanceof Qt.tk)for(let L of k.state.facet(Qt.tk.atomicRanges).map(z=>z(k)))L.between(D,D,(z,K)=>{z<D&&K>D&&(D=M?K:z)});return D}const Zr=(k,D,M)=>ks(k,L=>{let z=L.from,{state:K}=k,me=K.doc.lineAt(z),Te,nt;if(M&&!D&&z>me.from&&z<me.from+200&&!/[^ \t]/.test(Te=me.text.slice(0,z-me.from))){if(Te[Te.length-1]=="	")return z-1;let Pt=(0,it.IS)(Te,K.tabSize),Wt=Pt%(0,yn.y1)(K)||(0,yn.y1)(K);for(let Gn=0;Gn<Wt&&Te[Te.length-1-Gn]==" ";Gn++)z--;nt=z}else nt=(0,it.cp)(me.text,z-me.from,D,D)+me.from,nt==z&&me.number!=(D?K.doc.lines:1)?nt+=D?1:-1:!D&&/[\ufe00-\ufe0f]/.test(me.text.slice(nt-me.from,z-me.from))&&(nt=(0,it.cp)(me.text,nt-me.from,!1,!1)+me.from);return nt}),aa=k=>Zr(k,!1,!0),ka=k=>Zr(k,!1,!1),fa=k=>Zr(k,!0,!1),ps=(k,D)=>ks(k,M=>{let L=M.head,{state:z}=k,K=z.doc.lineAt(L),me=z.charCategorizer(L);for(let Te=null;;){if(L==(D?K.to:K.from)){L==M.head&&K.number!=(D?z.doc.lines:1)&&(L+=D?1:-1);break}let nt=(0,it.cp)(K.text,L-K.from,D)+K.from,Pt=K.text.slice(Math.min(L,nt)-K.from,Math.max(L,nt)-K.from),Wt=me(Pt);if(Te!=null&&Wt!=Te)break;(Pt!=" "||L!=M.head)&&(Te=Wt),L=nt}return L}),no=k=>ps(k,!1),Eo=k=>ps(k,!0),go=k=>ks(k,D=>{let M=k.lineBlockAt(D.head).to;return D.head<M?M:Math.min(k.state.doc.length,D.head+1)}),Xo=k=>ks(k,D=>{let M=k.lineBlockAt(D.head).from;return D.head>M?M:Math.max(0,D.head-1)}),Ae=k=>ks(k,D=>{let M=k.moveToLineBoundary(D,!1).head;return D.head>M?M:Math.max(0,D.head-1)}),Z=k=>ks(k,D=>{let M=k.moveToLineBoundary(D,!0).head;return D.head<M?M:Math.min(k.state.doc.length,D.head+1)}),pe=({state:k,dispatch:D})=>{if(k.readOnly)return!1;let M=[];for(let L=0,z="",K=k.doc.iter();;){if(K.next(),K.lineBreak||K.done){let me=z.search(/\s+$/);if(me>-1&&M.push({from:L-(z.length-me),to:L}),K.done)break;z=""}else z=K.value;L+=K.value.length}return M.length?(D(k.update({changes:M,userEvent:"delete"})),!0):!1},Ne=({state:k,dispatch:D})=>{if(k.readOnly)return!1;let M=k.changeByRange(L=>({changes:{from:L.from,to:L.to,insert:it.xv.of(["",""])},range:it.jT.cursor(L.from)}));return D(k.update(M,{scrollIntoView:!0,userEvent:"input"})),!0},Be=({state:k,dispatch:D})=>{if(k.readOnly)return!1;let M=k.changeByRange(L=>{if(!L.empty||L.from==0||L.from==k.doc.length)return{range:L};let z=L.from,K=k.doc.lineAt(z),me=z==K.from?z-1:(0,it.cp)(K.text,z-K.from,!1)+K.from,Te=z==K.to?z+1:(0,it.cp)(K.text,z-K.from,!0)+K.from;return{changes:{from:me,to:Te,insert:k.doc.slice(z,Te).append(k.doc.slice(me,z))},range:it.jT.cursor(Te)}});return M.changes.empty?!1:(D(k.update(M,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function ut(k){let D=[],M=-1;for(let L of k.selection.ranges){let z=k.doc.lineAt(L.from),K=k.doc.lineAt(L.to);if(!L.empty&&L.to==K.from&&(K=k.doc.lineAt(L.to-1)),M>=z.number){let me=D[D.length-1];me.to=K.to,me.ranges.push(L)}else D.push({from:z.from,to:K.to,ranges:[L]});M=K.number+1}return D}function Ft(k,D,M){if(k.readOnly)return!1;let L=[],z=[];for(let K of ut(k)){if(M?K.to==k.doc.length:K.from==0)continue;let me=k.doc.lineAt(M?K.to+1:K.from-1),Te=me.length+1;if(M){L.push({from:K.to,to:me.to},{from:K.from,insert:me.text+k.lineBreak});for(let nt of K.ranges)z.push(it.jT.range(Math.min(k.doc.length,nt.anchor+Te),Math.min(k.doc.length,nt.head+Te)))}else{L.push({from:me.from,to:K.from},{from:K.to,insert:k.lineBreak+me.text});for(let nt of K.ranges)z.push(it.jT.range(nt.anchor-Te,nt.head-Te))}}return L.length?(D(k.update({changes:L,scrollIntoView:!0,selection:it.jT.create(z,k.selection.mainIndex),userEvent:"move.line"})),!0):!1}const Xt=({state:k,dispatch:D})=>Ft(k,D,!1),mn=({state:k,dispatch:D})=>Ft(k,D,!0);function ri(k,D,M){if(k.readOnly)return!1;let L=[];for(let z of ut(k))M?L.push({from:z.from,insert:k.doc.slice(z.from,z.to)+k.lineBreak}):L.push({from:z.to,insert:k.lineBreak+k.doc.slice(z.from,z.to)});return D(k.update({changes:L,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const rr=({state:k,dispatch:D})=>ri(k,D,!1),Xi=({state:k,dispatch:D})=>ri(k,D,!0),Vo=k=>{if(k.state.readOnly)return!1;let{state:D}=k,M=D.changes(ut(D).map(({from:z,to:K})=>(z>0?z--:K<D.doc.length&&K++,{from:z,to:K}))),L=Fe(D.selection,z=>{let K;if(k.lineWrapping){let me=k.lineBlockAt(z.head),Te=k.coordsAtPos(z.head,z.assoc||1);Te&&(K=me.bottom+k.documentTop-Te.bottom+k.defaultLineHeight/2)}return k.moveVertically(z,!0,K)}).map(M);return k.dispatch({changes:M,selection:L,scrollIntoView:!0,userEvent:"delete.line"}),!0},yo=({state:k,dispatch:D})=>(D(k.update(k.replaceSelection(k.lineBreak),{scrollIntoView:!0,userEvent:"input"})),!0),Vs=({state:k,dispatch:D})=>(D(k.update(k.changeByRange(M=>{let L=/^\s*/.exec(k.doc.lineAt(M.from).text)[0];return{changes:{from:M.from,to:M.to,insert:k.lineBreak+L},range:EditorSelection.cursor(M.from+L.length+1)}}),{scrollIntoView:!0,userEvent:"input"})),!0);function ko(k,D){if(/\(\)|\[\]|\{\}/.test(k.sliceDoc(D-1,D+1)))return{from:D,to:D};let M=(0,yn.qz)(k).resolveInner(D),L=M.childBefore(D),z=M.childAfter(D),K;return L&&z&&L.to<=D&&z.from>=D&&(K=L.type.prop(ii.md.closedBy))&&K.indexOf(z.name)>-1&&k.doc.lineAt(L.to).from==k.doc.lineAt(z.from).from&&!/\S/.test(k.sliceDoc(L.to,z.from))?{from:L.to,to:z.from}:null}const Uo=Ys(!1),la=Ys(!0);function Ys(k){return({state:D,dispatch:M})=>{if(D.readOnly)return!1;let L=D.changeByRange(z=>{let{from:K,to:me}=z,Te=D.doc.lineAt(K),nt=!k&&K==me&&ko(D,K);k&&(K=me=(me<=Te.to?Te:D.doc.lineAt(me)).to);let Pt=new yn.Gn(D,{simulateBreak:K,simulateDoubleBreak:!!nt}),Wt=(0,yn.K0)(Pt,K);for(Wt==null&&(Wt=(0,it.IS)(/^\s*/.exec(D.doc.lineAt(K).text)[0],D.tabSize));me<Te.to&&/\s/.test(Te.text[me-Te.from]);)me++;nt?{from:K,to:me}=nt:K>Te.from&&K<Te.from+100&&!/\S/.test(Te.text.slice(0,K))&&(K=Te.from);let Gn=["",(0,yn.SS)(D,Wt)];return nt&&Gn.push((0,yn.SS)(D,Pt.lineIndent(Te.from,-1))),{changes:{from:K,to:me,insert:it.xv.of(Gn)},range:it.jT.cursor(K+1+Gn[1].length)}});return M(D.update(L,{scrollIntoView:!0,userEvent:"input"})),!0}}function Ai(k,D){let M=-1;return k.changeByRange(L=>{let z=[];for(let me=L.from;me<=L.to;){let Te=k.doc.lineAt(me);Te.number>M&&(L.empty||L.to>Te.from)&&(D(Te,z,L),M=Te.number),me=Te.to+1}let K=k.changes(z);return{changes:z,range:it.jT.range(K.mapPos(L.anchor,1),K.mapPos(L.head,1))}})}const ll=({state:k,dispatch:D})=>{if(k.readOnly)return!1;let M=Object.create(null),L=new yn.Gn(k,{overrideIndentation:K=>{let me=M[K];return me==null?-1:me}}),z=Ai(k,(K,me,Te)=>{let nt=(0,yn.K0)(L,K.from);if(nt==null)return;/\S/.test(K.text)||(nt=0);let Pt=/^\s*/.exec(K.text)[0],Wt=(0,yn.SS)(k,nt);(Pt!=Wt||Te.from<K.from+Pt.length)&&(M[K.from]=nt,me.push({from:K.from,to:K.from+Pt.length,insert:Wt}))});return z.changes.empty||D(k.update(z,{userEvent:"indent"})),!0},si=({state:k,dispatch:D})=>k.readOnly?!1:(D(k.update(Ai(k,(M,L)=>{L.push({from:M.from,insert:k.facet(yn.c)})}),{userEvent:"input.indent"})),!0),Zo=({state:k,dispatch:D})=>k.readOnly?!1:(D(k.update(Ai(k,(M,L)=>{let z=/^\s*/.exec(M.text)[0];if(!z)return;let K=(0,it.IS)(z,k.tabSize),me=0,Te=(0,yn.SS)(k,Math.max(0,K-(0,yn.y1)(k)));for(;me<z.length&&me<Te.length&&z.charCodeAt(me)==Te.charCodeAt(me);)me++;L.push({from:M.from+me,to:M.from+z.length,insert:Te.slice(me)})}),{userEvent:"delete.dedent"})),!0),ma=({state:k,dispatch:D})=>k.selection.ranges.some(M=>!M.empty)?si({state:k,dispatch:D}):(D(k.update(k.replaceSelection("	"),{scrollIntoView:!0,userEvent:"input"})),!0),ul=[{key:"Ctrl-b",run:_n,shift:Qr,preventDefault:!0},{key:"Ctrl-f",run:Hi,shift:gs},{key:"Ctrl-p",run:gr,shift:Dt},{key:"Ctrl-n",run:Zn,shift:jt},{key:"Ctrl-a",run:Xs,shift:Fi},{key:"Ctrl-e",run:Ts,shift:rt},{key:"Ctrl-d",run:fa},{key:"Ctrl-h",run:aa},{key:"Ctrl-k",run:go},{key:"Ctrl-Alt-h",run:no},{key:"Ctrl-o",run:Ne},{key:"Ctrl-t",run:Be},{key:"Ctrl-v",run:Js}],ia=[{key:"ArrowLeft",run:_n,shift:Qr,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:di,shift:oa,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:Qs,shift:ho,preventDefault:!0},{key:"ArrowRight",run:Hi,shift:gs,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:Ui,shift:na,preventDefault:!0},{mac:"Cmd-ArrowRight",run:Pn,shift:pr,preventDefault:!0},{key:"ArrowUp",run:gr,shift:Dt,preventDefault:!0},{mac:"Cmd-ArrowUp",run:so,shift:Os},{mac:"Ctrl-ArrowUp",run:Wr,shift:Tn},{key:"ArrowDown",run:Zn,shift:jt,preventDefault:!0},{mac:"Cmd-ArrowDown",run:To,shift:ds},{mac:"Ctrl-ArrowDown",run:Js,shift:mi},{key:"PageUp",run:Wr,shift:Tn},{key:"PageDown",run:Js,shift:mi},{key:"Home",run:Pi,shift:ws,preventDefault:!0},{key:"Mod-Home",run:so,shift:Os},{key:"End",run:Lr,shift:vi,preventDefault:!0},{key:"Mod-End",run:To,shift:ds},{key:"Enter",run:Uo},{key:"Mod-a",run:Oo},{key:"Backspace",run:aa,shift:aa},{key:"Delete",run:fa},{key:"Mod-Backspace",mac:"Alt-Backspace",run:no},{key:"Mod-Delete",mac:"Alt-Delete",run:Eo},{mac:"Mod-Backspace",run:Ae},{mac:"Mod-Delete",run:Z}].concat(ul.map(k=>({mac:k.key,run:k.run,shift:k.shift}))),Ro=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:Sr,shift:we},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:Qi,shift:Ce},{key:"Alt-ArrowUp",run:Xt},{key:"Shift-Alt-ArrowUp",run:rr},{key:"Alt-ArrowDown",run:mn},{key:"Shift-Alt-ArrowDown",run:Xi},{key:"Escape",run:Mn},{key:"Mod-Enter",run:la},{key:"Alt-l",mac:"Ctrl-l",run:nr},{key:"Mod-i",run:wi,preventDefault:!0},{key:"Mod-[",run:Zo},{key:"Mod-]",run:si},{key:"Mod-Alt-\\",run:ll},{key:"Shift-Mod-k",run:Vo},{key:"Shift-Mod-\\",run:hs},{key:"Mod-/",run:Nn},{key:"Alt-A",run:Si}].concat(ia),La={key:"Tab",run:si,shift:Zo};function Ar(){var k=arguments[0];typeof k=="string"&&(k=document.createElement(k));var D=1,M=arguments[1];if(M&&typeof M=="object"&&M.nodeType==null&&!Array.isArray(M)){for(var L in M)if(Object.prototype.hasOwnProperty.call(M,L)){var z=M[L];typeof z=="string"?k.setAttribute(L,z):z!=null&&(k[L]=z)}D++}for(;D<arguments.length;D++)il(k,arguments[D]);return k}function il(k,D){if(typeof D=="string")k.appendChild(document.createTextNode(D));else if(D!=null)if(D.nodeType!=null)k.appendChild(D);else if(Array.isArray(D))for(var M=0;M<D.length;M++)il(k,D[M]);else throw new RangeError("Unsupported child node: "+D)}const Jo=typeof String.prototype.normalize=="function"?k=>k.normalize("NFKD"):k=>k;class J{constructor(D,M,L=0,z=D.length,K,me){this.test=me,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=D.iterRange(L,z),this.bufferStart=L,this.normalize=K?Te=>K(Jo(Te)):Jo,this.query=this.normalize(M)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return(0,it.gm)(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let D=this.peek();if(D<0)return this.done=!0,this;let M=(0,it.bg)(D),L=this.bufferStart+this.bufferPos;this.bufferPos+=(0,it.nZ)(D);let z=this.normalize(M);for(let K=0,me=L;;K++){let Te=z.charCodeAt(K),nt=this.match(Te,me,this.bufferPos+this.bufferStart);if(K==z.length-1){if(nt)return this.value=nt,this;break}me==L&&K<M.length&&M.charCodeAt(K)==Te&&me++}}}match(D,M,L){let z=null;for(let K=0;K<this.matches.length;K+=2){let me=this.matches[K],Te=!1;this.query.charCodeAt(me)==D&&(me==this.query.length-1?z={from:this.matches[K+1],to:L}:(this.matches[K]++,Te=!0)),Te||(this.matches.splice(K,2),K-=2)}return this.query.charCodeAt(0)==D&&(this.query.length==1?z={from:M,to:L}:this.matches.push(1,M)),z&&this.test&&!this.test(z.from,z.to,this.buffer,this.bufferStart)&&(z=null),z}}typeof Symbol!="undefined"&&(J.prototype[Symbol.iterator]=function(){return this});const Ee={from:-1,to:-1,match:/.*/.exec("")},je="gm"+(/x/.unicode==null?"":"u");class Je{constructor(D,M,L,z=0,K=D.length){if(this.text=D,this.to=K,this.curLine="",this.done=!1,this.value=Ee,/\\[sWDnr]|\n|\r|\[\^/.test(M))return new pn(D,M,L,z,K);this.re=new RegExp(M,je+(L!=null&&L.ignoreCase?"i":"")),this.test=L==null?void 0:L.test,this.iter=D.iter();let me=D.lineAt(z);this.curLineStart=me.from,this.matchPos=zi(D,z),this.getLine(this.curLineStart)}getLine(D){this.iter.next(D),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let D=this.matchPos-this.curLineStart;;){this.re.lastIndex=D;let M=this.matchPos<=this.to&&this.re.exec(this.curLine);if(M){let L=this.curLineStart+M.index,z=L+M[0].length;if(this.matchPos=zi(this.text,z+(L==z?1:0)),L==this.curLineStart+this.curLine.length&&this.nextLine(),(L<z||L>this.value.to)&&(!this.test||this.test(L,z,M)))return this.value={from:L,to:z,match:M},this;D=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),D=0;else return this.done=!0,this}}}const Ct=new WeakMap;class Nt{constructor(D,M){this.from=D,this.text=M}get to(){return this.from+this.text.length}static get(D,M,L){let z=Ct.get(D);if(!z||z.from>=L||z.to<=M){let Te=new Nt(M,D.sliceString(M,L));return Ct.set(D,Te),Te}if(z.from==M&&z.to==L)return z;let{text:K,from:me}=z;return me>M&&(K=D.sliceString(M,me)+K,me=M),z.to<L&&(K+=D.sliceString(z.to,L)),Ct.set(D,new Nt(me,K)),new Nt(M,K.slice(M-me,L-me))}}class pn{constructor(D,M,L,z,K){this.text=D,this.to=K,this.done=!1,this.value=Ee,this.matchPos=zi(D,z),this.re=new RegExp(M,je+(L!=null&&L.ignoreCase?"i":"")),this.test=L==null?void 0:L.test,this.flat=Nt.get(D,z,this.chunkEnd(z+5e3))}chunkEnd(D){return D>=this.to?this.to:this.text.lineAt(D).to}next(){for(;;){let D=this.re.lastIndex=this.matchPos-this.flat.from,M=this.re.exec(this.flat.text);if(M&&!M[0]&&M.index==D&&(this.re.lastIndex=D+1,M=this.re.exec(this.flat.text)),M){let L=this.flat.from+M.index,z=L+M[0].length;if((this.flat.to>=this.to||M.index+M[0].length<=this.flat.text.length-10)&&(!this.test||this.test(L,z,M)))return this.value={from:L,to:z,match:M},this.matchPos=zi(this.text,z+(L==z?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Nt.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol!="undefined"&&(Je.prototype[Symbol.iterator]=pn.prototype[Symbol.iterator]=function(){return this});function ai(k){try{return new RegExp(k,je),!0}catch(D){return!1}}function zi(k,D){if(D>=k.length)return D;let M=k.lineAt(D),L;for(;D<M.to&&(L=M.text.charCodeAt(D-M.from))>=56320&&L<57344;)D++;return D}function as(k){let D=String(k.state.doc.lineAt(k.state.selection.main.head).number),M=Ar("input",{class:"cm-textfield",name:"line",value:D}),L=Ar("form",{class:"cm-gotoLine",onkeydown:K=>{K.keyCode==27?(K.preventDefault(),k.dispatch({effects:Pr.of(!1)}),k.focus()):K.keyCode==13&&(K.preventDefault(),z())},onsubmit:K=>{K.preventDefault(),z()}},Ar("label",k.state.phrase("Go to line"),": ",M)," ",Ar("button",{class:"cm-button",type:"submit"},k.state.phrase("go")));function z(){let K=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(M.value);if(!K)return;let{state:me}=k,Te=me.doc.lineAt(me.selection.main.head),[,nt,Pt,Wt,Gn]=K,Gi=Wt?+Wt.slice(1):0,ts=Pt?+Pt:Te.number;if(Pt&&Gn){let au=ts/100;nt&&(au=au*(nt=="-"?-1:1)+Te.number/me.doc.lines),ts=Math.round(me.doc.lines*au)}else Pt&&nt&&(ts=ts*(nt=="-"?-1:1)+Te.number);let io=me.doc.line(Math.max(1,Math.min(me.doc.lines,ts))),ca=it.jT.cursor(io.from+Math.max(0,Math.min(Gi,io.length)));k.dispatch({effects:[Pr.of(!1),Qt.tk.scrollIntoView(ca.from,{y:"center"})],selection:ca}),k.focus()}return{dom:L}}const Pr=it.Py.define(),fr=it.QQ.define({create(){return!0},update(k,D){for(let M of D.effects)M.is(Pr)&&(k=M.value);return k},provide:k=>Qt.mH.from(k,D=>D?as:null)}),_o=k=>{let D=(0,Qt.Sd)(k,as);if(!D){let M=[Pr.of(!0)];k.state.field(fr,!1)==null&&M.push(it.Py.appendConfig.of([fr,Co])),k.dispatch({effects:M}),D=(0,Qt.Sd)(k,as)}return D&&D.dom.querySelector("input").select(),!0},Co=Qt.tk.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),De={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},He=it.r$.define({combine(k){return(0,it.BO)(k,De,{highlightWordAroundCursor:(D,M)=>D||M,minSelectionLength:Math.min,maxMatches:Math.min})}});function ht(k){let D=[on,mt];return k&&D.push(He.of(k)),D}const vt=Qt.p.mark({class:"cm-selectionMatch"}),Bt=Qt.p.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function zt(k,D,M,L){return(M==0||k(D.sliceDoc(M-1,M))!=it.D0.Word)&&(L==D.doc.length||k(D.sliceDoc(L,L+1))!=it.D0.Word)}function Ot(k,D,M,L){return k(D.sliceDoc(M,M+1))==it.D0.Word&&k(D.sliceDoc(L-1,L))==it.D0.Word}const mt=Qt.lg.fromClass(class{constructor(k){this.decorations=this.getDeco(k)}update(k){(k.selectionSet||k.docChanged||k.viewportChanged)&&(this.decorations=this.getDeco(k.view))}getDeco(k){let D=k.state.facet(He),{state:M}=k,L=M.selection;if(L.ranges.length>1)return Qt.p.none;let z=L.main,K,me=null;if(z.empty){if(!D.highlightWordAroundCursor)return Qt.p.none;let nt=M.wordAt(z.head);if(!nt)return Qt.p.none;me=M.charCategorizer(z.head),K=M.sliceDoc(nt.from,nt.to)}else{let nt=z.to-z.from;if(nt<D.minSelectionLength||nt>200)return Qt.p.none;if(D.wholeWords){if(K=M.sliceDoc(z.from,z.to),me=M.charCategorizer(z.head),!(zt(me,M,z.from,z.to)&&Ot(me,M,z.from,z.to)))return Qt.p.none}else if(K=M.sliceDoc(z.from,z.to),!K)return Qt.p.none}let Te=[];for(let nt of k.visibleRanges){let Pt=new J(M.doc,K,nt.from,nt.to);for(;!Pt.next().done;){let{from:Wt,to:Gn}=Pt.value;if((!me||zt(me,M,Wt,Gn))&&(z.empty&&Wt<=z.from&&Gn>=z.to?Te.push(Bt.range(Wt,Gn)):(Wt>=z.to||Gn<=z.from)&&Te.push(vt.range(Wt,Gn)),Te.length>D.maxMatches))return Qt.p.none}}return Qt.p.set(Te)}},{decorations:k=>k.decorations}),on=Qt.tk.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),En=({state:k,dispatch:D})=>{let{selection:M}=k,L=it.jT.create(M.ranges.map(z=>k.wordAt(z.head)||it.jT.cursor(z.head)),M.mainIndex);return L.eq(M)?!1:(D(k.update({selection:L})),!0)};function kn(k,D){let{main:M,ranges:L}=k.selection,z=k.wordAt(M.head),K=z&&z.from==M.from&&z.to==M.to;for(let me=!1,Te=new J(k.doc,D,L[L.length-1].to);;)if(Te.next(),Te.done){if(me)return null;Te=new J(k.doc,D,0,Math.max(0,L[L.length-1].from-1)),me=!0}else{if(me&&L.some(nt=>nt.from==Te.value.from))continue;if(K){let nt=k.wordAt(Te.value.from);if(!nt||nt.from!=Te.value.from||nt.to!=Te.value.to)continue}return Te.value}}const yi=({state:k,dispatch:D})=>{let{ranges:M}=k.selection;if(M.some(K=>K.from===K.to))return En({state:k,dispatch:D});let L=k.sliceDoc(M[0].from,M[0].to);if(k.selection.ranges.some(K=>k.sliceDoc(K.from,K.to)!=L))return!1;let z=kn(k,L);return z?(D(k.update({selection:k.selection.addRange(it.jT.range(z.from,z.to),!1),effects:Qt.tk.scrollIntoView(z.to)})),!0):!1},gi=it.r$.define({combine(k){return(0,it.BO)(k,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:D=>new Ti(D),scrollToMatch:D=>Qt.tk.scrollIntoView(D)})}});function Wi(k){return k?[gi.of(k),Io]:Io}class Xn{constructor(D){this.search=D.search,this.caseSensitive=!!D.caseSensitive,this.literal=!!D.literal,this.regexp=!!D.regexp,this.replace=D.replace||"",this.valid=!!this.search&&(!this.regexp||ai(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!D.wholeWord}unquote(D){return this.literal?D:D.replace(/\\([nrt\\])/g,(M,L)=>L=="n"?`
`:L=="r"?"\r":L=="t"?"	":"\\")}eq(D){return this.search==D.search&&this.replace==D.replace&&this.caseSensitive==D.caseSensitive&&this.regexp==D.regexp&&this.wholeWord==D.wholeWord}create(){return this.regexp?new Ei(this):new kt(this)}getCursor(D,M=0,L){let z=D.doc?D:it.yy.create({doc:D});return L==null&&(L=z.doc.length),this.regexp?Bi(this,z,M,L):Ht(this,z,M,L)}}class Yn{constructor(D){this.spec=D}}function Ht(k,D,M,L){return new J(D.doc,k.unquoted,M,L,k.caseSensitive?void 0:z=>z.toLowerCase(),k.wholeWord?$r(D.doc,D.charCategorizer(D.selection.main.head)):void 0)}function $r(k,D){return(M,L,z,K)=>((K>M||K+z.length<L)&&(K=Math.max(0,M-2),z=k.sliceString(K,Math.min(k.length,L+2))),(D(Tr(z,M-K))!=it.D0.Word||D(Mi(z,M-K))!=it.D0.Word)&&(D(Mi(z,L-K))!=it.D0.Word||D(Tr(z,L-K))!=it.D0.Word))}class kt extends Yn{constructor(D){super(D)}nextMatch(D,M,L){let z=Ht(this.spec,D,L,D.doc.length).nextOverlapping();return z.done&&(z=Ht(this.spec,D,0,M).nextOverlapping()),z.done?null:z.value}prevMatchInRange(D,M,L){for(let z=L;;){let K=Math.max(M,z-1e4-this.spec.unquoted.length),me=Ht(this.spec,D,K,z),Te=null;for(;!me.nextOverlapping().done;)Te=me.value;if(Te)return Te;if(K==M)return null;z-=1e4}}prevMatch(D,M,L){return this.prevMatchInRange(D,0,M)||this.prevMatchInRange(D,L,D.doc.length)}getReplacement(D){return this.spec.unquote(this.spec.replace)}matchAll(D,M){let L=Ht(this.spec,D,0,D.doc.length),z=[];for(;!L.next().done;){if(z.length>=M)return null;z.push(L.value)}return z}highlight(D,M,L,z){let K=Ht(this.spec,D,Math.max(0,M-this.spec.unquoted.length),Math.min(L+this.spec.unquoted.length,D.doc.length));for(;!K.next().done;)z(K.value.from,K.value.to)}}function Bi(k,D,M,L){return new Je(D.doc,k.search,{ignoreCase:!k.caseSensitive,test:k.wholeWord?Ur(D.charCategorizer(D.selection.main.head)):void 0},M,L)}function Tr(k,D){return k.slice((0,it.cp)(k,D,!1),D)}function Mi(k,D){return k.slice(D,(0,it.cp)(k,D))}function Ur(k){return(D,M,L)=>!L[0].length||(k(Tr(L.input,L.index))!=it.D0.Word||k(Mi(L.input,L.index))!=it.D0.Word)&&(k(Mi(L.input,L.index+L[0].length))!=it.D0.Word||k(Tr(L.input,L.index+L[0].length))!=it.D0.Word)}class Ei extends Yn{nextMatch(D,M,L){let z=Bi(this.spec,D,L,D.doc.length).next();return z.done&&(z=Bi(this.spec,D,0,M).next()),z.done?null:z.value}prevMatchInRange(D,M,L){for(let z=1;;z++){let K=Math.max(M,L-z*1e4),me=Bi(this.spec,D,K,L),Te=null;for(;!me.next().done;)Te=me.value;if(Te&&(K==M||Te.from>K+10))return Te;if(K==M)return null}}prevMatch(D,M,L){return this.prevMatchInRange(D,0,M)||this.prevMatchInRange(D,L,D.doc.length)}getReplacement(D){return this.spec.unquote(this.spec.replace).replace(/\$([$&\d+])/g,(M,L)=>L=="$"?"$":L=="&"?D.match[0]:L!="0"&&+L<D.match.length?D.match[L]:M)}matchAll(D,M){let L=Bi(this.spec,D,0,D.doc.length),z=[];for(;!L.next().done;){if(z.length>=M)return null;z.push(L.value)}return z}highlight(D,M,L,z){let K=Bi(this.spec,D,Math.max(0,M-250),Math.min(L+250,D.doc.length));for(;!K.next().done;)z(K.value.from,K.value.to)}}const Xr=it.Py.define(),lr=it.Py.define(),Ci=it.QQ.define({create(k){return new sr(zn(k).create(),null)},update(k,D){for(let M of D.effects)M.is(Xr)?k=new sr(M.value.create(),k.panel):M.is(lr)&&(k=new sr(k.query,M.value?kr:null));return k},provide:k=>Qt.mH.from(k,D=>D.panel)});function Or(k){let D=k.field(Ci,!1);return D?D.query.spec:zn(k)}function Gs(k){var D;return((D=k.field(Ci,!1))===null||D===void 0?void 0:D.panel)!=null}class sr{constructor(D,M){this.query=D,this.panel=M}}const Sn=Qt.p.mark({class:"cm-searchMatch"}),ln=Qt.p.mark({class:"cm-searchMatch cm-searchMatch-selected"}),Yt=Qt.lg.fromClass(class{constructor(k){this.view=k,this.decorations=this.highlight(k.state.field(Ci))}update(k){let D=k.state.field(Ci);(D!=k.startState.field(Ci)||k.docChanged||k.selectionSet||k.viewportChanged)&&(this.decorations=this.highlight(D))}highlight({query:k,panel:D}){if(!D||!k.spec.valid)return Qt.p.none;let{view:M}=this,L=new it.f_;for(let z=0,K=M.visibleRanges,me=K.length;z<me;z++){let{from:Te,to:nt}=K[z];for(;z<me-1&&nt>K[z+1].from-2*250;)nt=K[++z].to;k.highlight(M.state,Te,nt,(Pt,Wt)=>{let Gn=M.state.selection.ranges.some(Gi=>Gi.from==Pt&&Gi.to==Wt);L.add(Pt,Wt,Gn?ln:Sn)})}return L.finish()}},{decorations:k=>k.decorations});function ti(k){return D=>{let M=D.state.field(Ci,!1);return M&&M.query.spec.valid?k(D,M):zo(D)}}const oo=ti((k,{query:D})=>{let{to:M}=k.state.selection.main,L=D.nextMatch(k.state,M,M);if(!L)return!1;let z=it.jT.single(L.from,L.to),K=k.state.facet(gi);return k.dispatch({selection:z,effects:[Es(k,L),K.scrollToMatch(z.main,k)],userEvent:"select.search"}),vo(k),!0}),Oi=ti((k,{query:D})=>{let{state:M}=k,{from:L}=M.selection.main,z=D.prevMatch(M,L,L);if(!z)return!1;let K=it.jT.single(z.from,z.to),me=k.state.facet(gi);return k.dispatch({selection:K,effects:[Es(k,z),me.scrollToMatch(K.main,k)],userEvent:"select.search"}),vo(k),!0}),Fr=ti((k,{query:D})=>{let M=D.matchAll(k.state,1e3);return!M||!M.length?!1:(k.dispatch({selection:it.jT.create(M.map(L=>it.jT.range(L.from,L.to))),userEvent:"select.search.matches"}),!0)}),_s=({state:k,dispatch:D})=>{let M=k.selection;if(M.ranges.length>1||M.main.empty)return!1;let{from:L,to:z}=M.main,K=[],me=0;for(let Te=new J(k.doc,k.sliceDoc(L,z));!Te.next().done;){if(K.length>1e3)return!1;Te.value.from==L&&(me=K.length),K.push(it.jT.range(Te.value.from,Te.value.to))}return D(k.update({selection:it.jT.create(K,me),userEvent:"select.search.matches"})),!0},Lo=ti((k,{query:D})=>{let{state:M}=k,{from:L,to:z}=M.selection.main;if(M.readOnly)return!1;let K=D.nextMatch(M,L,L);if(!K)return!1;let me=[],Te,nt,Pt=[];if(K.from==L&&K.to==z&&(nt=M.toText(D.getReplacement(K)),me.push({from:K.from,to:K.to,insert:nt}),K=D.nextMatch(M,K.from,K.to),Pt.push(Qt.tk.announce.of(M.phrase("replaced match on line $",M.doc.lineAt(L).number)+"."))),K){let Wt=me.length==0||me[0].from>=K.to?0:K.to-K.from-nt.length;Te=it.jT.single(K.from-Wt,K.to-Wt),Pt.push(Es(k,K)),Pt.push(M.facet(gi).scrollToMatch(Te.main,k))}return k.dispatch({changes:me,selection:Te,effects:Pt,userEvent:"input.replace"}),!0}),or=ti((k,{query:D})=>{if(k.state.readOnly)return!1;let M=D.matchAll(k.state,1e9).map(z=>{let{from:K,to:me}=z;return{from:K,to:me,insert:D.getReplacement(z)}});if(!M.length)return!1;let L=k.state.phrase("replaced $ matches",M.length)+".";return k.dispatch({changes:M,effects:Qt.tk.announce.of(L),userEvent:"input.replace.all"}),!0});function kr(k){return k.state.facet(gi).createPanel(k)}function zn(k,D){var M,L,z,K,me;let Te=k.selection.main,nt=Te.empty||Te.to>Te.from+100?"":k.sliceDoc(Te.from,Te.to);if(D&&!nt)return D;let Pt=k.facet(gi);return new Xn({search:((M=D==null?void 0:D.literal)!==null&&M!==void 0?M:Pt.literal)?nt:nt.replace(/\n/g,"\\n"),caseSensitive:(L=D==null?void 0:D.caseSensitive)!==null&&L!==void 0?L:Pt.caseSensitive,literal:(z=D==null?void 0:D.literal)!==null&&z!==void 0?z:Pt.literal,regexp:(K=D==null?void 0:D.regexp)!==null&&K!==void 0?K:Pt.regexp,wholeWord:(me=D==null?void 0:D.wholeWord)!==null&&me!==void 0?me:Pt.wholeWord})}function Ri(k){let D=(0,Qt.Sd)(k,kr);return D&&D.dom.querySelector("[main-field]")}function vo(k){let D=Ri(k);D&&D==k.root.activeElement&&D.select()}const zo=k=>{let D=k.state.field(Ci,!1);if(D&&D.panel){let M=Ri(k);if(M&&M!=k.root.activeElement){let L=zn(k.state,D.query.spec);L.valid&&k.dispatch({effects:Xr.of(L)}),M.focus(),M.select()}}else k.dispatch({effects:[lr.of(!0),D?Xr.of(zn(k.state,D.query.spec)):it.Py.appendConfig.of(Io)]});return!0},Jr=k=>{let D=k.state.field(Ci,!1);if(!D||!D.panel)return!1;let M=(0,Qt.Sd)(k,kr);return M&&M.dom.contains(k.root.activeElement)&&k.focus(),k.dispatch({effects:lr.of(!1)}),!0},oi=[{key:"Mod-f",run:zo,scope:"editor search-panel"},{key:"F3",run:oo,shift:Oi,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:oo,shift:Oi,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:Jr,scope:"editor search-panel"},{key:"Mod-Shift-l",run:_s},{key:"Mod-Alt-g",run:_o},{key:"Mod-d",run:yi,preventDefault:!0}];class Ti{constructor(D){this.view=D;let M=this.query=D.state.field(Ci).query.spec;this.commit=this.commit.bind(this),this.searchField=Ar("input",{value:M.search,placeholder:Mo(D,"Find"),"aria-label":Mo(D,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Ar("input",{value:M.replace,placeholder:Mo(D,"Replace"),"aria-label":Mo(D,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Ar("input",{type:"checkbox",name:"case",form:"",checked:M.caseSensitive,onchange:this.commit}),this.reField=Ar("input",{type:"checkbox",name:"re",form:"",checked:M.regexp,onchange:this.commit}),this.wordField=Ar("input",{type:"checkbox",name:"word",form:"",checked:M.wholeWord,onchange:this.commit});function L(z,K,me){return Ar("button",{class:"cm-button",name:z,onclick:K,type:"button"},me)}this.dom=Ar("div",{onkeydown:z=>this.keydown(z),class:"cm-search"},[this.searchField,L("next",()=>oo(D),[Mo(D,"next")]),L("prev",()=>Oi(D),[Mo(D,"previous")]),L("select",()=>Fr(D),[Mo(D,"all")]),Ar("label",null,[this.caseField,Mo(D,"match case")]),Ar("label",null,[this.reField,Mo(D,"regexp")]),Ar("label",null,[this.wordField,Mo(D,"by word")]),...D.state.readOnly?[]:[Ar("br"),this.replaceField,L("replace",()=>Lo(D),[Mo(D,"replace")]),L("replaceAll",()=>or(D),[Mo(D,"replace all")])],Ar("button",{name:"close",onclick:()=>Jr(D),"aria-label":Mo(D,"close"),type:"button"},["\xD7"])])}commit(){let D=new Xn({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});D.eq(this.query)||(this.query=D,this.view.dispatch({effects:Xr.of(D)}))}keydown(D){(0,Qt.$1)(this.view,D,"search-panel")?D.preventDefault():D.keyCode==13&&D.target==this.searchField?(D.preventDefault(),(D.shiftKey?Oi:oo)(this.view)):D.keyCode==13&&D.target==this.replaceField&&(D.preventDefault(),Lo(this.view))}update(D){for(let M of D.transactions)for(let L of M.effects)L.is(Xr)&&!L.value.eq(this.query)&&this.setQuery(L.value)}setQuery(D){this.query=D,this.searchField.value=D.search,this.replaceField.value=D.replace,this.caseField.checked=D.caseSensitive,this.reField.checked=D.regexp,this.wordField.checked=D.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(gi).top}}function Mo(k,D){return k.state.phrase(D)}const Ws=30,eo=/[\s\.,:;?!]/;function Es(k,{from:D,to:M}){let L=k.state.doc.lineAt(D),z=k.state.doc.lineAt(M).to,K=Math.max(L.from,D-Ws),me=Math.min(z,M+Ws),Te=k.state.sliceDoc(K,me);if(K!=L.from){for(let nt=0;nt<Ws;nt++)if(!eo.test(Te[nt+1])&&eo.test(Te[nt])){Te=Te.slice(nt);break}}if(me!=z){for(let nt=Te.length-1;nt>Te.length-Ws;nt--)if(!eo.test(Te[nt-1])&&eo.test(Te[nt])){Te=Te.slice(0,nt);break}}return Qt.tk.announce.of(`${k.state.phrase("current match")}. ${Te} ${k.state.phrase("on line")} ${L.number}.`)}const xs=Qt.tk.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),Io=[Ci,it.Wl.low(Yt),xs];class Li{constructor(D,M,L){this.state=D,this.pos=M,this.explicit=L,this.abortListeners=[]}tokenBefore(D){let M=(0,yn.qz)(this.state).resolveInner(this.pos,-1);for(;M&&D.indexOf(M.name)<0;)M=M.parent;return M?{from:M.from,to:this.pos,text:this.state.sliceDoc(M.from,this.pos),type:M.type}:null}matchBefore(D){let M=this.state.doc.lineAt(this.pos),L=Math.max(M.from,this.pos-250),z=M.text.slice(L-M.from,this.pos-M.from),K=z.search(Ks(D,!1));return K<0?null:{from:L+K,to:this.pos,text:z.slice(K)}}get aborted(){return this.abortListeners==null}addEventListener(D,M){D=="abort"&&this.abortListeners&&this.abortListeners.push(M)}}function Qa(k){let D=Object.keys(k).join(""),M=/\w/.test(D);return M&&(D=D.replace(/\w/g,"")),`[${M?"\\w":""}${D.replace(/[^\w\s]/g,"\\$&")}]`}function pu(k){let D=Object.create(null),M=Object.create(null);for(let{label:z}of k){D[z[0]]=!0;for(let K=1;K<z.length;K++)M[z[K]]=!0}let L=Qa(D)+Qa(M)+"*$";return[new RegExp("^"+L),new RegExp(L)]}function Ll(k){let D=k.map(z=>typeof z=="string"?{label:z}:z),[M,L]=D.every(z=>/^\w+$/.test(z.label))?[/\w*$/,/\w+$/]:pu(D);return z=>{let K=z.matchBefore(L);return K||z.explicit?{from:K?K.from:z.pos,options:D,validFor:M}:null}}function $a(k,D){return M=>{for(let L=syntaxTree(M.state).resolveInner(M.pos,-1);L;L=L.parent){if(k.indexOf(L.name)>-1)return D(M);if(L.type.isTop)break}return null}}function wa(k,D){return M=>{for(let L=syntaxTree(M.state).resolveInner(M.pos,-1);L;L=L.parent){if(k.indexOf(L.name)>-1)return null;if(L.type.isTop)break}return D(M)}}class Ko{constructor(D,M,L,z){this.completion=D,this.source=M,this.match=L,this.score=z}}function So(k){return k.selection.main.from}function Ks(k,D){var M;let{source:L}=k,z=D&&L[0]!="^",K=L[L.length-1]!="$";return!z&&!K?k:new RegExp(`${z?"^":""}(?:${L})${K?"$":""}`,(M=k.flags)!==null&&M!==void 0?M:k.ignoreCase?"i":"")}const Ia=it.q6.define();function Xa(k,D,M,L){let{main:z}=k.selection,K=M-z.from,me=L-z.from;return Object.assign(Object.assign({},k.changeByRange(Te=>Te!=z&&M!=L&&k.sliceDoc(Te.from+K,Te.from+me)!=k.sliceDoc(M,L)?{range:Te}:{changes:{from:Te.from+K,to:L==z.from?Te.to:Te.from+me,insert:D},range:it.jT.cursor(Te.from+K+D.length)})),{scrollIntoView:!0,userEvent:"input.complete"})}const Jl=new WeakMap;function ua(k){if(!Array.isArray(k))return k;let D=Jl.get(k);return D||Jl.set(k,D=Ll(k)),D}const Ea=it.Py.define(),Mt=it.Py.define();class $i{constructor(D){this.pattern=D,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let M=0;M<D.length;){let L=(0,it.gm)(D,M),z=(0,it.nZ)(L);this.chars.push(L);let K=D.slice(M,M+z),me=K.toUpperCase();this.folded.push((0,it.gm)(me==K?K.toLowerCase():me,0)),M+=z}this.astral=D.length!=this.chars.length}ret(D,M){return this.score=D,this.matched=M,this}match(D){if(this.pattern.length==0)return this.ret(-100,[]);if(D.length<this.pattern.length)return null;let{chars:M,folded:L,any:z,precise:K,byWord:me}=this;if(M.length==1){let v=(0,it.gm)(D,0),_=(0,it.nZ)(v),N=_==D.length?0:-100;if(v!=M[0])if(v==L[0])N+=-200;else return null;return this.ret(N,[0,_])}let Te=D.indexOf(this.pattern);if(Te==0)return this.ret(D.length==this.pattern.length?0:-100,[0,this.pattern.length]);let nt=M.length,Pt=0;if(Te<0){for(let v=0,_=Math.min(D.length,200);v<_&&Pt<nt;){let N=(0,it.gm)(D,v);(N==M[Pt]||N==L[Pt])&&(z[Pt++]=v),v+=(0,it.nZ)(N)}if(Pt<nt)return null}let Wt=0,Gn=0,Gi=!1,ts=0,io=-1,ca=-1,au=/[a-z]/.test(D),A=!0;for(let v=0,_=Math.min(D.length,200),N=0;v<_&&Gn<nt;){let q=(0,it.gm)(D,v);Te<0&&(Wt<nt&&q==M[Wt]&&(K[Wt++]=v),ts<nt&&(q==M[ts]||q==L[ts]?(ts==0&&(io=v),ca=v+1,ts++):ts=0));let de,Pe=q<255?q>=48&&q<=57||q>=97&&q<=122?2:q>=65&&q<=90?1:0:(de=(0,it.bg)(q))!=de.toLowerCase()?1:de!=de.toUpperCase()?2:0;(!v||Pe==1&&au||N==0&&Pe!=0)&&(M[Gn]==q||L[Gn]==q&&(Gi=!0)?me[Gn++]=v:me.length&&(A=!1)),N=Pe,v+=(0,it.nZ)(q)}return Gn==nt&&me[0]==0&&A?this.result(-100+(Gi?-200:0),me,D):ts==nt&&io==0?this.ret(-200-D.length+(ca==D.length?0:-100),[0,ca]):Te>-1?this.ret(-700-D.length,[Te,Te+this.pattern.length]):ts==nt?this.ret(-200+-700-D.length,[io,ca]):Gn==nt?this.result(-100+(Gi?-200:0)+-700+(A?0:-1100),me,D):M.length==2?null:this.result((z[0]?-700:0)+-200+-1100,z,D)}result(D,M,L){let z=[],K=0;for(let me of M){let Te=me+(this.astral?(0,it.nZ)((0,it.gm)(L,me)):1);K&&z[K-1]==me?z[K-1]=Te:(z[K++]=me,z[K++]=Te)}return this.ret(D-L.length,z)}}class Ir{constructor(D){this.pattern=D,this.matched=[],this.score=0,this.folded=D.toLowerCase()}match(D){if(D.length<this.pattern.length)return null;let M=D.slice(0,this.pattern.length),L=M==this.pattern?0:M.toLowerCase()==this.folded?-200:null;return L==null?null:(this.matched=[0,M.length],this.score=L+(D.length==this.pattern.length?0:-100),this)}}const es=it.r$.define({combine(k){return(0,it.BO)(k,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:Rn,filterStrict:!1,compareCompletions:(D,M)=>D.label.localeCompare(M.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(D,M)=>D&&M,closeOnBlur:(D,M)=>D&&M,icons:(D,M)=>D&&M,tooltipClass:(D,M)=>L=>Ps(D(L),M(L)),optionClass:(D,M)=>L=>Ps(D(L),M(L)),addToOptions:(D,M)=>D.concat(M),filterStrict:(D,M)=>D||M})}});function Ps(k,D){return k?D?k+" "+D:k:D}function Rn(k,D,M,L,z,K){let me=k.textDirection==Qt.Nm.RTL,Te=me,nt=!1,Pt="top",Wt,Gn,Gi=D.left-z.left,ts=z.right-D.right,io=L.right-L.left,ca=L.bottom-L.top;if(Te&&Gi<Math.min(io,ts)?Te=!1:!Te&&ts<Math.min(io,Gi)&&(Te=!0),io<=(Te?Gi:ts))Wt=Math.max(z.top,Math.min(M.top,z.bottom-ca))-D.top,Gn=Math.min(400,Te?Gi:ts);else{nt=!0,Gn=Math.min(400,(me?D.right:z.right-D.left)-30);let v=z.bottom-D.bottom;v>=ca||v>D.top?Wt=M.bottom-D.top:(Pt="bottom",Wt=D.bottom-M.top)}let au=(D.bottom-D.top)/K.offsetHeight,A=(D.right-D.left)/K.offsetWidth;return{style:`${Pt}: ${Wt/au}px; max-width: ${Gn/A}px`,class:"cm-completionInfo-"+(nt?me?"left-narrow":"right-narrow":Te?"left":"right")}}function Po(k){let D=k.addToOptions.slice();return k.icons&&D.push({render(M){let L=document.createElement("div");return L.classList.add("cm-completionIcon"),M.type&&L.classList.add(...M.type.split(/\s+/g).map(z=>"cm-completionIcon-"+z)),L.setAttribute("aria-hidden","true"),L},position:20}),D.push({render(M,L,z,K){let me=document.createElement("span");me.className="cm-completionLabel";let Te=M.displayLabel||M.label,nt=0;for(let Pt=0;Pt<K.length;){let Wt=K[Pt++],Gn=K[Pt++];Wt>nt&&me.appendChild(document.createTextNode(Te.slice(nt,Wt)));let Gi=me.appendChild(document.createElement("span"));Gi.appendChild(document.createTextNode(Te.slice(Wt,Gn))),Gi.className="cm-completionMatchedText",nt=Gn}return nt<Te.length&&me.appendChild(document.createTextNode(Te.slice(nt))),me},position:50},{render(M){if(!M.detail)return null;let L=document.createElement("span");return L.className="cm-completionDetail",L.textContent=M.detail,L},position:80}),D.sort((M,L)=>M.position-L.position).map(M=>M.render)}function Nr(k,D,M){if(k<=M)return{from:0,to:k};if(D<0&&(D=0),D<=k>>1){let z=Math.floor(D/M);return{from:z*M,to:(z+1)*M}}let L=Math.floor((k-D)/M);return{from:k-(L+1)*M,to:k-L*M}}class cl{constructor(D,M,L){this.view=D,this.stateField=M,this.applyCompletion=L,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:nt=>this.placeInfo(nt),key:this},this.space=null,this.currentClass="";let z=D.state.field(M),{options:K,selected:me}=z.open,Te=D.state.facet(es);this.optionContent=Po(Te),this.optionClass=Te.optionClass,this.tooltipClass=Te.tooltipClass,this.range=Nr(K.length,me,Te.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(D.state),this.dom.addEventListener("mousedown",nt=>{let{options:Pt}=D.state.field(M).open;for(let Wt=nt.target,Gn;Wt&&Wt!=this.dom;Wt=Wt.parentNode)if(Wt.nodeName=="LI"&&(Gn=/-(\d+)$/.exec(Wt.id))&&+Gn[1]<Pt.length){this.applyCompletion(D,Pt[+Gn[1]]),nt.preventDefault();return}}),this.dom.addEventListener("focusout",nt=>{let Pt=D.state.field(this.stateField,!1);Pt&&Pt.tooltip&&D.state.facet(es).closeOnBlur&&nt.relatedTarget!=D.contentDOM&&D.dispatch({effects:Mt.of(null)})}),this.showOptions(K,z.id)}mount(){this.updateSel()}showOptions(D,M){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(D,M,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(D){var M;let L=D.state.field(this.stateField),z=D.startState.field(this.stateField);if(this.updateTooltipClass(D.state),L!=z){let{options:K,selected:me,disabled:Te}=L.open;(!z.open||z.open.options!=K)&&(this.range=Nr(K.length,me,D.state.facet(es).maxRenderedOptions),this.showOptions(K,L.id)),this.updateSel(),Te!=((M=z.open)===null||M===void 0?void 0:M.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!Te)}}updateTooltipClass(D){let M=this.tooltipClass(D);if(M!=this.currentClass){for(let L of this.currentClass.split(" "))L&&this.dom.classList.remove(L);for(let L of M.split(" "))L&&this.dom.classList.add(L);this.currentClass=M}}positioned(D){this.space=D,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let D=this.view.state.field(this.stateField),M=D.open;if((M.selected>-1&&M.selected<this.range.from||M.selected>=this.range.to)&&(this.range=Nr(M.options.length,M.selected,this.view.state.facet(es).maxRenderedOptions),this.showOptions(M.options,D.id)),this.updateSelectedOption(M.selected)){this.destroyInfo();let{completion:L}=M.options[M.selected],{info:z}=L;if(!z)return;let K=typeof z=="string"?document.createTextNode(z):z(L);if(!K)return;"then"in K?K.then(me=>{me&&this.view.state.field(this.stateField,!1)==D&&this.addInfoPane(me,L)}).catch(me=>(0,Qt.OO)(this.view.state,me,"completion info")):this.addInfoPane(K,L)}}addInfoPane(D,M){this.destroyInfo();let L=this.info=document.createElement("div");if(L.className="cm-tooltip cm-completionInfo",D.nodeType!=null)L.appendChild(D),this.infoDestroy=null;else{let{dom:z,destroy:K}=D;L.appendChild(z),this.infoDestroy=K||null}this.dom.appendChild(L),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(D){let M=null;for(let L=this.list.firstChild,z=this.range.from;L;L=L.nextSibling,z++)L.nodeName!="LI"||!L.id?z--:z==D?L.hasAttribute("aria-selected")||(L.setAttribute("aria-selected","true"),M=L):L.hasAttribute("aria-selected")&&L.removeAttribute("aria-selected");return M&&po(this.list,M),M}measureInfo(){let D=this.dom.querySelector("[aria-selected]");if(!D||!this.info)return null;let M=this.dom.getBoundingClientRect(),L=this.info.getBoundingClientRect(),z=D.getBoundingClientRect(),K=this.space;if(!K){let me=this.dom.ownerDocument.defaultView||window;K={left:0,top:0,right:me.innerWidth,bottom:me.innerHeight}}return z.top>Math.min(K.bottom,M.bottom)-10||z.bottom<Math.max(K.top,M.top)+10?null:this.view.state.facet(es).positionInfo(this.view,M,z,L,K,this.dom)}placeInfo(D){this.info&&(D?(D.style&&(this.info.style.cssText=D.style),this.info.className="cm-tooltip cm-completionInfo "+(D.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(D,M,L){const z=document.createElement("ul");z.id=M,z.setAttribute("role","listbox"),z.setAttribute("aria-expanded","true"),z.setAttribute("aria-label",this.view.state.phrase("Completions"));let K=null;for(let me=L.from;me<L.to;me++){let{completion:Te,match:nt}=D[me],{section:Pt}=Te;if(Pt){let Gi=typeof Pt=="string"?Pt:Pt.name;if(Gi!=K&&(me>L.from||L.from==0))if(K=Gi,typeof Pt!="string"&&Pt.header)z.appendChild(Pt.header(Pt));else{let ts=z.appendChild(document.createElement("completion-section"));ts.textContent=Gi}}const Wt=z.appendChild(document.createElement("li"));Wt.id=M+"-"+me,Wt.setAttribute("role","option");let Gn=this.optionClass(Te);Gn&&(Wt.className=Gn);for(let Gi of this.optionContent){let ts=Gi(Te,this.view.state,this.view,nt);ts&&Wt.appendChild(ts)}}return L.from&&z.classList.add("cm-completionListIncompleteTop"),L.to<D.length&&z.classList.add("cm-completionListIncompleteBottom"),z}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function Ca(k,D){return M=>new cl(M,k,D)}function po(k,D){let M=k.getBoundingClientRect(),L=D.getBoundingClientRect(),z=M.height/k.offsetHeight;L.top<M.top?k.scrollTop-=(M.top-L.top)/z:L.bottom>M.bottom&&(k.scrollTop+=(L.bottom-M.bottom)/z)}function fu(k){return(k.boost||0)*100+(k.apply?10:0)+(k.info?5:0)+(k.type?1:0)}function eu(k,D){let M=[],L=null,z=Pt=>{M.push(Pt);let{section:Wt}=Pt.completion;if(Wt){L||(L=[]);let Gn=typeof Wt=="string"?Wt:Wt.name;L.some(Gi=>Gi.name==Gn)||L.push(typeof Wt=="string"?{name:Gn}:Wt)}},K=D.facet(es);for(let Pt of k)if(Pt.hasResult()){let Wt=Pt.result.getMatch;if(Pt.result.filter===!1)for(let Gn of Pt.result.options)z(new Ko(Gn,Pt.source,Wt?Wt(Gn):[],1e9-M.length));else{let Gn=D.sliceDoc(Pt.from,Pt.to),Gi,ts=K.filterStrict?new Ir(Gn):new $i(Gn);for(let io of Pt.result.options)if(Gi=ts.match(io.label)){let ca=io.displayLabel?Wt?Wt(io,Gi.matched):[]:Gi.matched;z(new Ko(io,Pt.source,ca,Gi.score+(io.boost||0)))}}}if(L){let Pt=Object.create(null),Wt=0,Gn=(Gi,ts)=>{var io,ca;return((io=Gi.rank)!==null&&io!==void 0?io:1e9)-((ca=ts.rank)!==null&&ca!==void 0?ca:1e9)||(Gi.name<ts.name?-1:1)};for(let Gi of L.sort(Gn))Wt-=1e5,Pt[Gi.name]=Wt;for(let Gi of M){let{section:ts}=Gi.completion;ts&&(Gi.score+=Pt[typeof ts=="string"?ts:ts.name])}}let me=[],Te=null,nt=K.compareCompletions;for(let Pt of M.sort((Wt,Gn)=>Gn.score-Wt.score||nt(Wt.completion,Gn.completion))){let Wt=Pt.completion;!Te||Te.label!=Wt.label||Te.detail!=Wt.detail||Te.type!=null&&Wt.type!=null&&Te.type!=Wt.type||Te.apply!=Wt.apply||Te.boost!=Wt.boost?me.push(Pt):fu(Pt.completion)>fu(Te)&&(me[me.length-1]=Pt),Te=Pt.completion}return me}class Na{constructor(D,M,L,z,K,me){this.options=D,this.attrs=M,this.tooltip=L,this.timestamp=z,this.selected=K,this.disabled=me}setSelected(D,M){return D==this.selected||D>=this.options.length?this:new Na(this.options,wu(M,D),this.tooltip,this.timestamp,D,this.disabled)}static build(D,M,L,z,K){let me=eu(D,M);if(!me.length)return z&&D.some(nt=>nt.state==1)?new Na(z.options,z.attrs,z.tooltip,z.timestamp,z.selected,!0):null;let Te=M.facet(es).selectOnOpen?0:-1;if(z&&z.selected!=Te&&z.selected!=-1){let nt=z.options[z.selected].completion;for(let Pt=0;Pt<me.length;Pt++)if(me[Pt].completion==nt){Te=Pt;break}}return new Na(me,wu(L,Te),{pos:D.reduce((nt,Pt)=>Pt.hasResult()?Math.min(nt,Pt.from):nt,1e8),create:ls,above:K.aboveCursor},z?z.timestamp:Date.now(),Te,!1)}map(D){return new Na(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:D.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class ja{constructor(D,M,L){this.active=D,this.id=M,this.open=L}static start(){return new ja(qo,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(D){let{state:M}=D,L=M.facet(es),K=(L.override||M.languageDataAt("autocomplete",So(M)).map(ua)).map(Te=>(this.active.find(Pt=>Pt.source==Te)||new No(Te,this.active.some(Pt=>Pt.state!=0)?1:0)).update(D,L));K.length==this.active.length&&K.every((Te,nt)=>Te==this.active[nt])&&(K=this.active);let me=this.open;me&&D.docChanged&&(me=me.map(D.changes)),D.selection||K.some(Te=>Te.hasResult()&&D.changes.touchesRange(Te.from,Te.to))||!tu(K,this.active)?me=Na.build(K,M,this.id,me,L):me&&me.disabled&&!K.some(Te=>Te.state==1)&&(me=null),!me&&K.every(Te=>Te.state!=1)&&K.some(Te=>Te.hasResult())&&(K=K.map(Te=>Te.hasResult()?new No(Te.source,0):Te));for(let Te of D.effects)Te.is(Ga)&&(me=me&&me.setSelected(Te.value,this.id));return K==this.active&&me==this.open?this:new ja(K,this.id,me)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:Du}}function tu(k,D){if(k==D)return!0;for(let M=0,L=0;;){for(;M<k.length&&!k[M].hasResult;)M++;for(;L<D.length&&!D[L].hasResult;)L++;let z=M==k.length,K=L==D.length;if(z||K)return z==K;if(k[M++].result!=D[L++].result)return!1}}const Du={"aria-autocomplete":"list"};function wu(k,D){let M={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":k};return D>-1&&(M["aria-activedescendant"]=k+"-"+D),M}const qo=[];function Ya(k,D){if(k.isUserEvent("input.complete")){let M=k.annotation(Ia);if(M&&D.activateOnCompletion(M))return"input"}return k.isUserEvent("input.type")?"input":k.isUserEvent("delete.backward")?"delete":null}class No{constructor(D,M,L=-1){this.source=D,this.state=M,this.explicitPos=L}hasResult(){return!1}update(D,M){let L=Ya(D,M),z=this;L?z=z.handleUserEvent(D,L,M):D.docChanged?z=z.handleChange(D):D.selection&&z.state!=0&&(z=new No(z.source,0));for(let K of D.effects)if(K.is(Ea))z=new No(z.source,1,K.value?So(D.state):-1);else if(K.is(Mt))z=new No(z.source,0);else if(K.is(_a))for(let me of K.value)me.source==z.source&&(z=me);return z}handleUserEvent(D,M,L){return M=="delete"||!L.activateOnTyping?this.map(D.changes):new No(this.source,1)}handleChange(D){return D.changes.touchesRange(So(D.startState))?new No(this.source,0):this.map(D.changes)}map(D){return D.empty||this.explicitPos<0?this:new No(this.source,this.state,D.mapPos(this.explicitPos))}}class $l extends No{constructor(D,M,L,z,K){super(D,2,M),this.result=L,this.from=z,this.to=K}hasResult(){return!0}handleUserEvent(D,M,L){var z;let K=this.result;K.map&&!D.changes.empty&&(K=K.map(K,D.changes));let me=D.changes.mapPos(this.from),Te=D.changes.mapPos(this.to,1),nt=So(D.state);if((this.explicitPos<0?nt<=me:nt<this.from)||nt>Te||!K||M=="delete"&&So(D.startState)==this.from)return new No(this.source,M=="input"&&L.activateOnTyping?1:0);let Pt=this.explicitPos<0?-1:D.changes.mapPos(this.explicitPos);return Eu(K.validFor,D.state,me,Te)?new $l(this.source,Pt,K,me,Te):K.update&&(K=K.update(K,me,Te,new Li(D.state,nt,Pt>=0)))?new $l(this.source,Pt,K,K.from,(z=K.to)!==null&&z!==void 0?z:So(D.state)):new No(this.source,1,Pt)}handleChange(D){return D.changes.touchesRange(this.from,this.to)?new No(this.source,0):this.map(D.changes)}map(D){return D.empty?this:(this.result.map?this.result.map(this.result,D):this.result)?new $l(this.source,this.explicitPos<0?-1:D.mapPos(this.explicitPos),this.result,D.mapPos(this.from),D.mapPos(this.to,1)):new No(this.source,0)}}function Eu(k,D,M,L){if(!k)return!1;let z=D.sliceDoc(M,L);return typeof k=="function"?k(z,M,L,D):Ks(k,!0).test(z)}const _a=it.Py.define({map(k,D){return k.map(M=>M.map(D))}}),Ga=it.Py.define(),$o=it.QQ.define({create(){return ja.start()},update(k,D){return k.update(D)},provide:k=>[Qt.hJ.from(k,D=>D.tooltip),Qt.tk.contentAttributes.from(k,D=>D.attrs)]});function Br(k,D){const M=D.completion.apply||D.completion.label;let L=k.state.field($o).active.find(z=>z.source==D.source);return L instanceof $l?(typeof M=="string"?k.dispatch(Object.assign(Object.assign({},Xa(k.state,M,L.from,L.to)),{annotations:Ia.of(D.completion)})):M(k,D.completion,L.from,L.to),!0):!1}const ls=Ca($o,Br);function Ka(k,D="option"){return M=>{let L=M.state.field($o,!1);if(!L||!L.open||L.open.disabled||Date.now()-L.open.timestamp<M.state.facet(es).interactionDelay)return!1;let z=1,K;D=="page"&&(K=(0,Qt.gB)(M,L.open.tooltip))&&(z=Math.max(2,Math.floor(K.dom.offsetHeight/K.dom.querySelector("li").offsetHeight)-1));let{length:me}=L.open.options,Te=L.open.selected>-1?L.open.selected+z*(k?1:-1):k?0:me-1;return Te<0?Te=D=="page"?0:me-1:Te>=me&&(Te=D=="page"?me-1:0),M.dispatch({effects:Ga.of(Te)}),!0}}const Cl=k=>{let D=k.state.field($o,!1);return k.state.readOnly||!D||!D.open||D.open.selected<0||D.open.disabled||Date.now()-D.open.timestamp<k.state.facet(es).interactionDelay?!1:Br(k,D.open.options[D.open.selected])},Va=k=>k.state.field($o,!1)?(k.dispatch({effects:Ea.of(!0)}),!0):!1,Cs=k=>{let D=k.state.field($o,!1);return!D||!D.active.some(M=>M.state!=0)?!1:(k.dispatch({effects:Mt.of(null)}),!0)};class Ji{constructor(D,M){this.active=D,this.context=M,this.time=Date.now(),this.updates=[],this.done=void 0}}const nu=50,Hs=1e3,yl=Qt.lg.fromClass(class{constructor(k){this.view=k,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let D of k.state.field($o).active)D.state==1&&this.startQuery(D)}update(k){let D=k.state.field($o),M=k.state.facet(es);if(!k.selectionSet&&!k.docChanged&&k.startState.field($o)==D)return;let L=k.transactions.some(K=>(K.selection||K.docChanged)&&!Ya(K,M));for(let K=0;K<this.running.length;K++){let me=this.running[K];if(L||me.updates.length+k.transactions.length>nu&&Date.now()-me.time>Hs){for(let Te of me.context.abortListeners)try{Te()}catch(nt){(0,Qt.OO)(this.view.state,nt)}me.context.abortListeners=null,this.running.splice(K--,1)}else me.updates.push(...k.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),k.transactions.some(K=>K.effects.some(me=>me.is(Ea)))&&(this.pendingStart=!0);let z=this.pendingStart?50:M.activateOnTypingDelay;if(this.debounceUpdate=D.active.some(K=>K.state==1&&!this.running.some(me=>me.active.source==K.source))?setTimeout(()=>this.startUpdate(),z):-1,this.composing!=0)for(let K of k.transactions)Ya(K,M)=="input"?this.composing=2:this.composing==2&&K.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:k}=this.view,D=k.field($o);for(let M of D.active)M.state==1&&!this.running.some(L=>L.active.source==M.source)&&this.startQuery(M)}startQuery(k){let{state:D}=this.view,M=So(D),L=new Li(D,M,k.explicitPos==M),z=new Ji(k,L);this.running.push(z),Promise.resolve(k.source(L)).then(K=>{z.context.aborted||(z.done=K||null,this.scheduleAccept())},K=>{this.view.dispatch({effects:Mt.of(null)}),(0,Qt.OO)(this.view.state,K)})}scheduleAccept(){this.running.every(k=>k.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(es).updateSyncTime))}accept(){var k;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let D=[],M=this.view.state.facet(es);for(let L=0;L<this.running.length;L++){let z=this.running[L];if(z.done===void 0)continue;if(this.running.splice(L--,1),z.done){let me=new $l(z.active.source,z.active.explicitPos,z.done,z.done.from,(k=z.done.to)!==null&&k!==void 0?k:So(z.updates.length?z.updates[0].startState:this.view.state));for(let Te of z.updates)me=me.update(Te,M);if(me.hasResult()){D.push(me);continue}}let K=this.view.state.field($o).active.find(me=>me.source==z.active.source);if(K&&K.state==1)if(z.done==null){let me=new No(z.active.source,0);for(let Te of z.updates)me=me.update(Te,M);me.state!=1&&D.push(me)}else this.startQuery(K)}D.length&&this.view.dispatch({effects:_a.of(D)})}},{eventHandlers:{blur(k){let D=this.view.state.field($o,!1);if(D&&D.tooltip&&this.view.state.facet(es).closeOnBlur){let M=D.open&&(0,Qt.gB)(this.view,D.open.tooltip);(!M||!M.dom.contains(k.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:Mt.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:Ea.of(!1)}),20),this.composing=0}}}),ra=typeof navigator=="object"&&/Win/.test(navigator.platform),Cu=it.Wl.highest(Qt.tk.domEventHandlers({keydown(k,D){let M=D.state.field($o,!1);if(!M||!M.open||M.open.disabled||M.open.selected<0||k.key.length>1||k.ctrlKey&&!(ra&&k.altKey)||k.metaKey)return!1;let L=M.open.options[M.open.selected],z=M.active.find(me=>me.source==L.source),K=L.completion.commitCharacters||z.result.commitCharacters;return K&&K.indexOf(k.key)>-1&&Br(D,L),!1}})),iu=Qt.tk.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xB7\xB7\xB7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\u0192'"}},".cm-completionIcon-class":{"&:after":{content:"'\u25CB'"}},".cm-completionIcon-interface":{"&:after":{content:"'\u25CC'"}},".cm-completionIcon-variable":{"&:after":{content:"'\u{1D465}'"}},".cm-completionIcon-constant":{"&:after":{content:"'\u{1D436}'"}},".cm-completionIcon-type":{"&:after":{content:"'\u{1D461}'"}},".cm-completionIcon-enum":{"&:after":{content:"'\u222A'"}},".cm-completionIcon-property":{"&:after":{content:"'\u25A1'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\u{1F511}\uFE0E'"}},".cm-completionIcon-namespace":{"&:after":{content:"'\u25A2'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class Bu{constructor(D,M,L,z){this.field=D,this.line=M,this.from=L,this.to=z}}class ru{constructor(D,M,L){this.field=D,this.from=M,this.to=L}map(D){let M=D.mapPos(this.from,-1,MapMode.TrackDel),L=D.mapPos(this.to,1,MapMode.TrackDel);return M==null||L==null?null:new ru(this.field,M,L)}}class jl{constructor(D,M){this.lines=D,this.fieldPositions=M}instantiate(D,M){let L=[],z=[M],K=D.doc.lineAt(M),me=/^\s*/.exec(K.text)[0];for(let nt of this.lines){if(L.length){let Pt=me,Wt=/^\t*/.exec(nt)[0].length;for(let Gn=0;Gn<Wt;Gn++)Pt+=D.facet(indentUnit);z.push(M+Pt.length-Wt),nt=Pt+nt.slice(Wt)}L.push(nt),M+=nt.length+1}let Te=this.fieldPositions.map(nt=>new ru(nt.field,z[nt.line]+nt.from,z[nt.line]+nt.to));return{text:L,ranges:Te}}static parse(D){let M=[],L=[],z=[],K;for(let me of D.split(/\r\n?|\n/)){for(;K=/[#$]\{(?:(\d+)(?::([^}]*))?|([^}]*))\}/.exec(me);){let Te=K[1]?+K[1]:null,nt=K[2]||K[3]||"",Pt=-1;for(let Wt=0;Wt<M.length;Wt++)(Te!=null?M[Wt].seq==Te:nt&&M[Wt].name==nt)&&(Pt=Wt);if(Pt<0){let Wt=0;for(;Wt<M.length&&(Te==null||M[Wt].seq!=null&&M[Wt].seq<Te);)Wt++;M.splice(Wt,0,{seq:Te,name:nt}),Pt=Wt;for(let Gn of z)Gn.field>=Pt&&Gn.field++}z.push(new Bu(Pt,L.length,K.index,K.index+nt.length)),me=me.slice(0,K.index)+nt+me.slice(K.index+K[0].length)}for(let Te;Te=/\\([{}])/.exec(me);){me=me.slice(0,Te.index)+Te[1]+me.slice(Te.index+Te[0].length);for(let nt of z)nt.line==L.length&&nt.from>Te.index&&(nt.from--,nt.to--)}L.push(me)}return new jl(L,z)}}let Ru=Qt.p.widget({widget:new class extends Qt.l9{toDOM(){let k=document.createElement("span");return k.className="cm-snippetFieldPosition",k}ignoreEvent(){return!1}}}),Yr=Qt.p.mark({class:"cm-snippetField"});class d{constructor(D,M){this.ranges=D,this.active=M,this.deco=Qt.p.set(D.map(L=>(L.from==L.to?Ru:Yr).range(L.from,L.to)))}map(D){let M=[];for(let L of this.ranges){let z=L.map(D);if(!z)return null;M.push(z)}return new d(M,this.active)}selectionInsideField(D){return D.ranges.every(M=>this.ranges.some(L=>L.field==this.active&&L.from<=M.from&&L.to>=M.to))}}const a=it.Py.define({map(k,D){return k&&k.map(D)}}),m=it.Py.define(),S=it.QQ.define({create(){return null},update(k,D){for(let M of D.effects){if(M.is(a))return M.value;if(M.is(m)&&k)return new d(k.ranges,M.value)}return k&&D.docChanged&&(k=k.map(D.changes)),k&&D.selection&&!k.selectionInsideField(D.selection)&&(k=null),k},provide:k=>Qt.tk.decorations.from(k,D=>D?D.deco:Qt.p.none)});function $(k,D){return it.jT.create(k.filter(M=>M.field==D).map(M=>it.jT.range(M.from,M.to)))}function ne(k){let D=jl.parse(k);return(M,L,z,K)=>{let{text:me,ranges:Te}=D.instantiate(M.state,z),nt={changes:{from:z,to:K,insert:Text.of(me)},scrollIntoView:!0,annotations:L?[Ia.of(L),Transaction.userEvent.of("input.complete")]:void 0};if(Te.length&&(nt.selection=$(Te,0)),Te.some(Pt=>Pt.field>0)){let Pt=new d(Te,0),Wt=nt.effects=[a.of(Pt)];M.state.field(S,!1)===void 0&&Wt.push(StateEffect.appendConfig.of([S,Ls,ea,iu]))}M.dispatch(M.state.update(nt))}}function ve(k){return({state:D,dispatch:M})=>{let L=D.field(S,!1);if(!L||k<0&&L.active==0)return!1;let z=L.active+k,K=k>0&&!L.ranges.some(me=>me.field==z+k);return M(D.update({selection:$(L.ranges,z),effects:a.of(K?null:new d(L.ranges,z)),scrollIntoView:!0})),!0}}const qe=({state:k,dispatch:D})=>k.field(S,!1)?(D(k.update({effects:a.of(null)})),!0):!1,ct=ve(1),at=ve(-1);function On(k){let D=k.field(S,!1);return!!(D&&D.ranges.some(M=>M.field==D.active+1))}function ui(k){let D=k.field(S,!1);return!!(D&&D.active>0)}const Yi=[{key:"Tab",run:ct,shift:at},{key:"Escape",run:qe}],ji=it.r$.define({combine(k){return k.length?k[0]:Yi}}),Ls=it.Wl.highest(Qt.$f.compute([ji],k=>k.facet(ji)));function Zs(k,D){return Object.assign(Object.assign({},D),{apply:ne(k)})}const ea=Qt.tk.domEventHandlers({mousedown(k,D){let M=D.state.field(S,!1),L;if(!M||(L=D.posAtCoords({x:k.clientX,y:k.clientY}))==null)return!1;let z=M.ranges.find(K=>K.from<=L&&K.to>=L);return!z||z.field==M.active?!1:(D.dispatch({selection:$(M.ranges,z.field),effects:a.of(M.ranges.some(K=>K.field>z.field)?new d(M.ranges,z.field):null),scrollIntoView:!0}),!0)}});function sa(k){let D=k.replace(/[\]\-\\]/g,"\\$&");try{return new RegExp(`[\\p{Alphabetic}\\p{Number}_${D}]+`,"ug")}catch(M){return new RegExp(`[w${D}]`,"g")}}function Pa(k,D){return new RegExp(D(k.source),k.unicode?"u":"")}const Lu=null;function Vl(k){return Lu[k]||(Lu[k]=new WeakMap)}function Ju(k,D,M,L,z){for(let K=k.iterLines(),me=0;!K.next().done;){let{value:Te}=K,nt;for(D.lastIndex=0;nt=D.exec(Te);)if(!L[nt[0]]&&me+nt.index!=z&&(M.push({type:"text",label:nt[0]}),L[nt[0]]=!0,M.length>=2e3))return;me+=Te.length+1}}function Su(k,D,M,L,z){let K=k.length>=1e3,me=K&&D.get(k);if(me)return me;let Te=[],nt=Object.create(null);if(k.children){let Pt=0;for(let Wt of k.children){if(Wt.length>=1e3)for(let Gn of Su(Wt,D,M,L-Pt,z-Pt))nt[Gn.label]||(nt[Gn.label]=!0,Te.push(Gn));else Ju(Wt,M,Te,nt,z-Pt);Pt+=Wt.length+1}}else Ju(k,M,Te,nt,z);return K&&Te.length<2e3&&D.set(k,Te),Te}const Sc=k=>{let D=k.state.languageDataAt("wordChars",k.pos).join(""),M=sa(D),L=k.matchBefore(Pa(M,me=>me+"$"));if(!L&&!k.explicit)return null;let z=L?L.from:k.pos,K=Su(k.state.doc,Vl(D),M,5e4,z);return{from:z,options:K,validFor:Pa(M,me=>"^"+me)}},mu={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},rl=it.Py.define({map(k,D){let M=D.mapPos(k,-1,it.gc.TrackAfter);return M==null?void 0:M}}),$u=new class extends it.uU{};$u.startSide=1,$u.endSide=-1;const Sl=it.QQ.define({create(){return it.Xs.empty},update(k,D){if(k=k.map(D.changes),D.selection){let M=D.state.doc.lineAt(D.selection.main.head);k=k.update({filter:L=>L>=M.from&&L<=M.to})}for(let M of D.effects)M.is(rl)&&(k=k.update({add:[$u.range(M.value,M.value+1)]}));return k}});function ju(){return[uc,Sl]}const hl="()[]{}<>";function lc(k){for(let D=0;D<hl.length;D+=2)if(hl.charCodeAt(D)==k)return hl.charAt(D+1);return(0,it.bg)(k<128?k:k+1)}function Za(k,D){return k.languageDataAt("closeBrackets",D)[0]||mu}const gc=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),uc=Qt.tk.inputHandler.of((k,D,M,L)=>{if((gc?k.composing:k.compositionStarted)||k.state.readOnly)return!1;let z=k.state.selection.main;if(L.length>2||L.length==2&&(0,it.nZ)((0,it.gm)(L,0))==1||D!=z.from||M!=z.to)return!1;let K=se(k.state,L);return K?(k.dispatch(K),!0):!1}),H=[{key:"Backspace",run:({state:k,dispatch:D})=>{if(k.readOnly)return!1;let L=Za(k,k.selection.main.head).brackets||mu.brackets,z=null,K=k.changeByRange(me=>{if(me.empty){let Te=be(k.doc,me.head);for(let nt of L)if(nt==Te&&ue(k.doc,me.head)==lc((0,it.gm)(nt,0)))return{changes:{from:me.head-nt.length,to:me.head+nt.length},range:it.jT.cursor(me.head-nt.length)}}return{range:z=me}});return z||D(k.update(K,{scrollIntoView:!0,userEvent:"delete.backward"})),!z}}];function se(k,D){let M=Za(k,k.selection.main.head),L=M.brackets||mu.brackets;for(let z of L){let K=lc((0,it.gm)(z,0));if(D==z)return K==z?Rt(k,z,L.indexOf(z+z+z)>-1,M):ot(k,z,K,M.before||mu.before);if(D==K&&ge(k,k.selection.main.from))return _t(k,z,K)}return null}function ge(k,D){let M=!1;return k.field(Sl).between(0,k.doc.length,L=>{L==D&&(M=!0)}),M}function ue(k,D){let M=k.sliceString(D,D+2);return M.slice(0,(0,it.nZ)((0,it.gm)(M,0)))}function be(k,D){let M=k.sliceString(D-2,D);return(0,it.nZ)((0,it.gm)(M,0))==M.length?M:M.slice(1)}function ot(k,D,M,L){let z=null,K=k.changeByRange(me=>{if(!me.empty)return{changes:[{insert:D,from:me.from},{insert:M,from:me.to}],effects:rl.of(me.to+D.length),range:it.jT.range(me.anchor+D.length,me.head+D.length)};let Te=ue(k.doc,me.head);return!Te||/\s/.test(Te)||L.indexOf(Te)>-1?{changes:{insert:D+M,from:me.head},effects:rl.of(me.head+D.length),range:it.jT.cursor(me.head+D.length)}:{range:z=me}});return z?null:k.update(K,{scrollIntoView:!0,userEvent:"input.type"})}function _t(k,D,M){let L=null,z=k.changeByRange(K=>K.empty&&ue(k.doc,K.head)==M?{changes:{from:K.head,to:K.head+M.length,insert:M},range:it.jT.cursor(K.head+M.length)}:L={range:K});return L?null:k.update(z,{scrollIntoView:!0,userEvent:"input.type"})}function Rt(k,D,M,L){let z=L.stringPrefixes||mu.stringPrefixes,K=null,me=k.changeByRange(Te=>{if(!Te.empty)return{changes:[{insert:D,from:Te.from},{insert:D,from:Te.to}],effects:rl.of(Te.to+D.length),range:it.jT.range(Te.anchor+D.length,Te.head+D.length)};let nt=Te.head,Pt=ue(k.doc,nt),Wt;if(Pt==D){if(an(k,nt))return{changes:{insert:D+D,from:nt},effects:rl.of(nt+D.length),range:it.jT.cursor(nt+D.length)};if(ge(k,nt)){let Gi=M&&k.sliceDoc(nt,nt+D.length*3)==D+D+D?D+D+D:D;return{changes:{from:nt,to:nt+Gi.length,insert:Gi},range:it.jT.cursor(nt+Gi.length)}}}else{if(M&&k.sliceDoc(nt-2*D.length,nt)==D+D&&(Wt=Ln(k,nt-2*D.length,z))>-1&&an(k,Wt))return{changes:{insert:D+D+D+D,from:nt},effects:rl.of(nt+D.length),range:it.jT.cursor(nt+D.length)};if(k.charCategorizer(nt)(Pt)!=it.D0.Word&&Ln(k,nt,z)>-1&&!Gt(k,nt,D,z))return{changes:{insert:D+D,from:nt},effects:rl.of(nt+D.length),range:it.jT.cursor(nt+D.length)}}return{range:K=Te}});return K?null:k.update(me,{scrollIntoView:!0,userEvent:"input.type"})}function an(k,D){let M=(0,yn.qz)(k).resolveInner(D+1);return M.parent&&M.from==D}function Gt(k,D,M,L){let z=(0,yn.qz)(k).resolveInner(D,-1),K=L.reduce((me,Te)=>Math.max(me,Te.length),0);for(let me=0;me<5;me++){let Te=k.sliceDoc(z.from,Math.min(z.to,z.from+M.length+K)),nt=Te.indexOf(M);if(!nt||nt>-1&&L.indexOf(Te.slice(0,nt))>-1){let Wt=z.firstChild;for(;Wt&&Wt.from==z.from&&Wt.to-Wt.from>M.length+nt;){if(k.sliceDoc(Wt.to-M.length,Wt.to)==M)return!1;Wt=Wt.firstChild}return!0}let Pt=z.to==D&&z.parent;if(!Pt)break;z=Pt}return!1}function Ln(k,D,M){let L=k.charCategorizer(D);if(L(k.sliceDoc(D-1,D))!=it.D0.Word)return D;for(let z of M){let K=D-z.length;if(k.sliceDoc(K,D)==z&&L(k.sliceDoc(K-1,K))!=it.D0.Word)return K}return-1}function Dn(k={}){return[Cu,$o,es.of(k),yl,An,iu]}const nn=[{key:"Ctrl-Space",run:Va},{key:"Escape",run:Cs},{key:"ArrowDown",run:Ka(!0)},{key:"ArrowUp",run:Ka(!1)},{key:"PageDown",run:Ka(!0,"page")},{key:"PageUp",run:Ka(!1,"page")},{key:"Enter",run:Cl}],An=it.Wl.highest(Qt.$f.computeN([es],k=>k.facet(es).defaultKeymap?[nn]:[]));function ni(k){let D=k.field($o,!1);return D&&D.active.some(M=>M.state==1)?"pending":D&&D.active.some(M=>M.state!=0)?"active":null}const er=new WeakMap;function yr(k){var D;let M=(D=k.field($o,!1))===null||D===void 0?void 0:D.open;if(!M||M.disabled)return[];let L=er.get(M.options);return L||er.set(M.options,L=M.options.map(z=>z.completion)),L}function Er(k){var D;let M=(D=k.field($o,!1))===null||D===void 0?void 0:D.open;return M&&!M.disabled&&M.selected>=0?M.options[M.selected].completion:null}function ys(k){var D;let M=(D=k.field($o,!1))===null||D===void 0?void 0:D.open;return M&&!M.disabled&&M.selected>=0?M.selected:null}function Ns(k){return Ga.of(k)}class ao{constructor(D,M,L){this.from=D,this.to=M,this.diagnostic=L}}class Bo{constructor(D,M,L){this.diagnostics=D,this.panel=M,this.selected=L}static init(D,M,L){let z=D,K=L.facet(Sa).markerFilter;K&&(z=K(z,L));let me=Qt.p.set(z.map(Te=>Te.from==Te.to||Te.from==Te.to-1&&L.doc.lineAt(Te.from).to==Te.from?Qt.p.widget({widget:new ya(Te),diagnostic:Te}).range(Te.from):Qt.p.mark({attributes:{class:"cm-lintRange cm-lintRange-"+Te.severity+(Te.markClass?" "+Te.markClass:"")},diagnostic:Te,inclusive:!0}).range(Te.from,Te.to)),!0);return new Bo(me,M,to(me))}}function to(k,D=null,M=0){let L=null;return k.between(M,1e9,(z,K,{spec:me})=>{if(!(D&&me.diagnostic!=D))return L=new ao(z,K,me.diagnostic),!1}),L}function Ja(k,D){let M=D.pos,L=D.end||M,z=k.state.facet(Sa).hideOn(k,M,L);if(z!=null)return z;let K=k.startState.doc.lineAt(D.pos);return!!(k.effects.some(me=>me.is(Fo))||k.changes.touchesRange(K.from,Math.max(K.to,L)))}function dl(k,D){return k.field(xo,!1)?D:D.concat(it.Py.appendConfig.of(E))}function Al(k,D){return{effects:dl(k,[Fo.of(D)])}}const Fo=it.Py.define(),ga=it.Py.define(),Fa=it.Py.define(),xo=it.QQ.define({create(){return new Bo(Qt.p.none,null,null)},update(k,D){if(D.docChanged){let M=k.diagnostics.map(D.changes),L=null;if(k.selected){let z=D.changes.mapPos(k.selected.from,1);L=to(M,k.selected.diagnostic,z)||to(M,null,z)}k=new Bo(M,k.panel,L)}for(let M of D.effects)M.is(Fo)?k=Bo.init(M.value,k.panel,D.state):M.is(ga)?k=new Bo(k.diagnostics,M.value?xl.open:null,k.selected):M.is(Fa)&&(k=new Bo(k.diagnostics,k.panel,M.value));return k},provide:k=>[Qt.mH.from(k,D=>D.panel),Qt.tk.decorations.from(k,D=>D.diagnostics)]});function vl(k){let D=k.field(xo,!1);return D?D.diagnostics.size:0}const cc=Qt.p.mark({class:"cm-lintRange cm-lintRange-active",inclusive:!0});function su(k,D,M){let{diagnostics:L}=k.state.field(xo),z=[],K=2e8,me=0;L.between(D-(M<0?1:0),D+(M>0?1:0),(nt,Pt,{spec:Wt})=>{D>=nt&&D<=Pt&&(nt==Pt||(D>nt||M>0)&&(D<Pt||M<0))&&(z.push(Wt.diagnostic),K=Math.min(nt,K),me=Math.max(Pt,me))});let Te=k.state.facet(Sa).tooltipFilter;return Te&&(z=Te(z,k.state)),z.length?{pos:K,end:me,above:k.state.doc.lineAt(K).to<me,create(){return{dom:Tl(k,z)}}}:null}function Tl(k,D){return Ar("ul",{class:"cm-tooltip-lint"},D.map(M=>sl(k,M,!1)))}const ec=k=>{let D=k.state.field(xo,!1);(!D||!D.panel)&&k.dispatch({effects:dl(k.state,[ga.of(!0)])});let M=(0,Qt.Sd)(k,xl.open);return M&&M.dom.querySelector(".cm-panel-lint ul").focus(),!0},Ol=k=>{let D=k.state.field(xo,!1);return!D||!D.panel?!1:(k.dispatch({effects:ga.of(!1)}),!0)},gu=k=>{let D=k.state.field(xo,!1);if(!D)return!1;let M=k.state.selection.main,L=D.diagnostics.iter(M.to+1);return!L.value&&(L=D.diagnostics.iter(0),!L.value||L.from==M.from&&L.to==M.to)?!1:(k.dispatch({selection:{anchor:L.from,head:L.to},scrollIntoView:!0}),!0)},Yc=k=>{let{state:D}=k,M=D.field(xo,!1);if(!M)return!1;let L=D.selection.main,z,K,me,Te;return M.diagnostics.between(0,D.doc.length,(nt,Pt)=>{Pt<L.to&&(z==null||z<nt)&&(z=nt,K=Pt),(me==null||nt>me)&&(me=nt,Te=Pt)}),me==null||z==null&&me==L.from?!1:(k.dispatch({selection:{anchor:z!=null?z:me,head:K!=null?K:Te},scrollIntoView:!0}),!0)},el=[{key:"Mod-Shift-m",run:ec,preventDefault:!0},{key:"F8",run:gu}],Wl=null,Sa=it.r$.define({combine(k){return Object.assign({sources:k.map(D=>D.source).filter(D=>D!=null)},(0,it.BO)(k.map(D=>D.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(D,M)=>D?M?L=>D(L)||M(L):D:M}))}});function hc(k,D={}){return[Sa.of({source:k,config:D}),Wl,E]}function Ma(k){let D=k.plugin(Wl);D&&D.force()}function Hl(k){let D=[];if(k)e:for(let{name:M}of k){for(let L=0;L<M.length;L++){let z=M[L];if(/[a-zA-Z]/.test(z)&&!D.some(K=>K.toLowerCase()==z.toLowerCase())){D.push(z);continue e}}D.push("")}return D}function sl(k,D,M){var L;let z=M?Hl(D.actions):[];return Ar("li",{class:"cm-diagnostic cm-diagnostic-"+D.severity},Ar("span",{class:"cm-diagnosticText"},D.renderMessage?D.renderMessage(k):D.message),(L=D.actions)===null||L===void 0?void 0:L.map((K,me)=>{let Te=!1,nt=Gi=>{if(Gi.preventDefault(),Te)return;Te=!0;let ts=to(k.state.field(xo).diagnostics,D);ts&&K.apply(k,ts.from,ts.to)},{name:Pt}=K,Wt=z[me]?Pt.indexOf(z[me]):-1,Gn=Wt<0?Pt:[Pt.slice(0,Wt),Ar("u",Pt.slice(Wt,Wt+1)),Pt.slice(Wt+1)];return Ar("button",{type:"button",class:"cm-diagnosticAction",onclick:nt,onmousedown:nt,"aria-label":` Action: ${Pt}${Wt<0?"":` (access key "${z[me]})"`}.`},Gn)}),D.source&&Ar("div",{class:"cm-diagnosticSource"},D.source))}class ya extends Qt.l9{constructor(D){super(),this.diagnostic=D}eq(D){return D.diagnostic==this.diagnostic}toDOM(){return Ar("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class Ul{constructor(D,M){this.diagnostic=M,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=sl(D,M,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class xl{constructor(D){this.view=D,this.items=[];let M=z=>{if(z.keyCode==27)Ol(this.view),this.view.focus();else if(z.keyCode==38||z.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(z.keyCode==40||z.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(z.keyCode==36)this.moveSelection(0);else if(z.keyCode==35)this.moveSelection(this.items.length-1);else if(z.keyCode==13)this.view.focus();else if(z.keyCode>=65&&z.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:K}=this.items[this.selectedIndex],me=Hl(K.actions);for(let Te=0;Te<me.length;Te++)if(me[Te].toUpperCase().charCodeAt(0)==z.keyCode){let nt=to(this.view.state.field(xo).diagnostics,K);nt&&K.actions[Te].apply(D,nt.from,nt.to)}}else return;z.preventDefault()},L=z=>{for(let K=0;K<this.items.length;K++)this.items[K].dom.contains(z.target)&&this.moveSelection(K)};this.list=Ar("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:M,onclick:L}),this.dom=Ar("div",{class:"cm-panel-lint"},this.list,Ar("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>Ol(this.view)},"\xD7")),this.update()}get selectedIndex(){let D=this.view.state.field(xo).selected;if(!D)return-1;for(let M=0;M<this.items.length;M++)if(this.items[M].diagnostic==D.diagnostic)return M;return-1}update(){let{diagnostics:D,selected:M}=this.view.state.field(xo),L=0,z=!1,K=null;for(D.between(0,this.view.state.doc.length,(me,Te,{spec:nt})=>{let Pt=-1,Wt;for(let Gn=L;Gn<this.items.length;Gn++)if(this.items[Gn].diagnostic==nt.diagnostic){Pt=Gn;break}Pt<0?(Wt=new Ul(this.view,nt.diagnostic),this.items.splice(L,0,Wt),z=!0):(Wt=this.items[Pt],Pt>L&&(this.items.splice(L,Pt-L),z=!0)),M&&Wt.diagnostic==M.diagnostic?Wt.dom.hasAttribute("aria-selected")||(Wt.dom.setAttribute("aria-selected","true"),K=Wt):Wt.dom.hasAttribute("aria-selected")&&Wt.dom.removeAttribute("aria-selected"),L++});L<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)z=!0,this.items.pop();this.items.length==0&&(this.items.push(new Ul(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),z=!0),K?(this.list.setAttribute("aria-activedescendant",K.id),this.view.requestMeasure({key:this,read:()=>({sel:K.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:me,panel:Te})=>{let nt=Te.height/this.list.offsetHeight;me.top<Te.top?this.list.scrollTop-=(Te.top-me.top)/nt:me.bottom>Te.bottom&&(this.list.scrollTop+=(me.bottom-Te.bottom)/nt)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),z&&this.sync()}sync(){let D=this.list.firstChild;function M(){let L=D;D=L.nextSibling,L.remove()}for(let L of this.items)if(L.dom.parentNode==this.list){for(;D!=L.dom;)M();D=L.dom.nextSibling}else this.list.insertBefore(L.dom,D);for(;D;)M()}moveSelection(D){if(this.selectedIndex<0)return;let M=this.view.state.field(xo),L=to(M.diagnostics,this.items[D].diagnostic);L&&this.view.dispatch({selection:{anchor:L.from,head:L.to},scrollIntoView:!0,effects:Fa.of(L)})}static open(D){return new xl(D)}}function kl(k,D='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${D}>${encodeURIComponent(k)}</svg>')`}function Au(k){return kl(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${k}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const Yo=Qt.tk.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Au("#d11")},".cm-lintRange-warning":{backgroundImage:Au("orange")},".cm-lintRange-info":{backgroundImage:Au("#999")},".cm-lintRange-hint":{backgroundImage:Au("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function fo(k){return k=="error"?4:k=="warning"?3:k=="info"?2:1}class ta extends Qt.SJ{constructor(D){super(),this.diagnostics=D,this.severity=D.reduce((M,L)=>fo(M)<fo(L.severity)?L.severity:M,"hint")}toDOM(D){let M=document.createElement("div");M.className="cm-lint-marker cm-lint-marker-"+this.severity;let L=this.diagnostics,z=D.state.facet(u).tooltipFilter;return z&&(L=z(L,D.state)),L.length&&(M.onmouseover=()=>is(D,M,L)),M}}function tc(k,D){let M=L=>{let z=D.getBoundingClientRect();if(!(L.clientX>z.left-10&&L.clientX<z.right+10&&L.clientY>z.top-10&&L.clientY<z.bottom+10)){for(let K=L.target;K;K=K.parentNode)if(K.nodeType==1&&K.classList.contains("cm-tooltip-lint"))return;window.removeEventListener("mousemove",M),k.state.field(Se)&&k.dispatch({effects:oe.of(null)})}};window.addEventListener("mousemove",M)}function is(k,D,M){function L(){let me=k.elementAtHeight(D.getBoundingClientRect().top+5-k.documentTop);k.coordsAtPos(me.from)&&k.dispatch({effects:oe.of({pos:me.from,above:!1,create(){return{dom:Tl(k,M),getCoords:()=>D.getBoundingClientRect()}}})}),D.onmouseout=D.onmousemove=null,tc(k,D)}let{hoverTime:z}=k.state.facet(u),K=setTimeout(L,z);D.onmouseout=()=>{clearTimeout(K),D.onmouseout=D.onmousemove=null},D.onmousemove=()=>{clearTimeout(K),K=setTimeout(L,z)}}function C(k,D){let M=Object.create(null);for(let z of D){let K=k.lineAt(z.from);(M[K.from]||(M[K.from]=[])).push(z)}let L=[];for(let z in M)L.push(new ta(M[z]).range(+z));return it.Xs.of(L,!0)}const R=(0,Qt.v5)({class:"cm-gutter-lint",markers:k=>k.state.field(G)}),G=it.QQ.define({create(){return it.Xs.empty},update(k,D){k=k.map(D.changes);let M=D.state.facet(u).markerFilter;for(let L of D.effects)if(L.is(Fo)){let z=L.value;M&&(z=M(z||[],D.state)),k=C(D.state.doc,z.slice(0))}return k}}),oe=it.Py.define(),Se=it.QQ.define({create(){return null},update(k,D){return k&&D.docChanged&&(k=Ja(D,k)?null:Object.assign(Object.assign({},k),{pos:D.changes.mapPos(k.pos)})),D.effects.reduce((M,L)=>L.is(oe)?L.value:M,k)},provide:k=>Qt.hJ.from(k)}),xt=Qt.tk.baseTheme({".cm-gutter-lint":{width:"1.4em","& .cm-gutterElement":{padding:".2em"}},".cm-lint-marker":{width:"1em",height:"1em"},".cm-lint-marker-info":{content:kl('<path fill="#aaf" stroke="#77e" stroke-width="6" stroke-linejoin="round" d="M5 5L35 5L35 35L5 35Z"/>')},".cm-lint-marker-warning":{content:kl('<path fill="#fe8" stroke="#fd7" stroke-width="6" stroke-linejoin="round" d="M20 6L37 35L3 35Z"/>')},".cm-lint-marker-error":{content:kl('<circle cx="20" cy="20" r="15" fill="#f87" stroke="#f43" stroke-width="6"/>')}}),E=[xo,Qt.tk.decorations.compute([xo],k=>{let{selected:D,panel:M}=k.field(xo);return!D||!M||D.from==D.to?Qt.p.none:Qt.p.set([cc.range(D.from,D.to)])}),(0,Qt.bF)(su,{hideOn:Ja}),Yo],u=it.r$.define({combine(k){return(0,it.BO)(k,{hoverTime:300,markerFilter:null,tooltipFilter:null})}});function f(k={}){return[u.of(k),G,R,xt,Se]}function b(k,D){let M=k.field(xo,!1);if(M&&M.diagnostics.size)for(let L=RangeSet.iter([M.diagnostics]);L.value;L.next())D(L.value.spec.diagnostic,L.from,L.to)}var T=function(D){D===void 0&&(D={});var{crosshairCursor:M=!1}=D,L=[];D.closeBracketsKeymap!==!1&&(L=L.concat(H)),D.defaultKeymap!==!1&&(L=L.concat(Ro)),D.searchKeymap!==!1&&(L=L.concat(oi)),D.historyKeymap!==!1&&(L=L.concat(fe)),D.foldKeymap!==!1&&(L=L.concat(yn.e7)),D.completionKeymap!==!1&&(L=L.concat(nn)),D.lintKeymap!==!1&&(L=L.concat(el));var z=[];return D.lineNumbers!==!1&&z.push((0,Qt.Eu)()),D.highlightActiveLineGutter!==!1&&z.push((0,Qt.HQ)()),D.highlightSpecialChars!==!1&&z.push((0,Qt.AE)()),D.history!==!1&&z.push(vr()),D.foldGutter!==!1&&z.push((0,yn.mi)()),D.drawSelection!==!1&&z.push((0,Qt.Uw)()),D.dropCursor!==!1&&z.push((0,Qt.qr)()),D.allowMultipleSelections!==!1&&z.push(it.yy.allowMultipleSelections.of(!0)),D.indentOnInput!==!1&&z.push((0,yn.nY)()),D.syntaxHighlighting!==!1&&z.push((0,yn.nF)(yn.R_,{fallback:!0})),D.bracketMatching!==!1&&z.push((0,yn.n$)()),D.closeBrackets!==!1&&z.push(ju()),D.autocompletion!==!1&&z.push(Dn()),D.rectangularSelection!==!1&&z.push((0,Qt.Zs)()),M!==!1&&z.push((0,Qt.S2)()),D.highlightActiveLine!==!1&&z.push((0,Qt.ZO)()),D.highlightSelectionMatches!==!1&&z.push(ht()),D.tabSize&&typeof D.tabSize=="number"&&z.push(yn.c.of(" ".repeat(D.tabSize))),z.concat([Qt.$f.of(L.flat())]).filter(Boolean)},B=function(D){D===void 0&&(D={});var M=[];D.defaultKeymap!==!1&&(M=M.concat(defaultKeymap)),D.historyKeymap!==!1&&(M=M.concat(historyKeymap));var L=[];return D.highlightSpecialChars!==!1&&L.push(highlightSpecialChars()),D.history!==!1&&L.push(history()),D.drawSelection!==!1&&L.push(drawSelection()),D.syntaxHighlighting!==!1&&L.push(syntaxHighlighting(defaultHighlightStyle,{fallback:!0})),L.concat([keymap.of(M.flat())]).filter(Boolean)},U=dn(41691);const ie="#e5c07b",ce="#e06c75",_e="#56b6c2",Oe="#ffffff",lt="#abb2bf",gt="#7d8799",wt="#61afef",rn="#98c379",Cn="#d19a66",un="#c678dd",Hn="#21252b",Rr="#2c313a",Fs="#282c34",Vr="#353a42",Ds="#3E4451",us="#528bff",Aa={chalky:ie,coral:ce,cyan:_e,invalid:Oe,ivory:lt,stone:gt,malibu:wt,sage:rn,whiskey:Cn,violet:un,darkBackground:Hn,highlightBackground:Rr,background:Fs,tooltipBackground:Vr,selection:Ds,cursor:us},Wa=Qt.tk.theme({"&":{color:lt,backgroundColor:Fs},".cm-content":{caretColor:us},".cm-cursor, .cm-dropCursor":{borderLeftColor:us},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:Ds},".cm-panels":{backgroundColor:Hn,color:lt},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:Fs,color:gt,border:"none"},".cm-activeLineGutter":{backgroundColor:Rr},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:Vr},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:Vr,borderBottomColor:Vr},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:Rr,color:lt}}},{dark:!0}),_l=yn.Qf.define([{tag:U.pJ.keyword,color:un},{tag:[U.pJ.name,U.pJ.deleted,U.pJ.character,U.pJ.propertyName,U.pJ.macroName],color:ce},{tag:[U.pJ.function(U.pJ.variableName),U.pJ.labelName],color:wt},{tag:[U.pJ.color,U.pJ.constant(U.pJ.name),U.pJ.standard(U.pJ.name)],color:Cn},{tag:[U.pJ.definition(U.pJ.name),U.pJ.separator],color:lt},{tag:[U.pJ.typeName,U.pJ.className,U.pJ.number,U.pJ.changed,U.pJ.annotation,U.pJ.modifier,U.pJ.self,U.pJ.namespace],color:ie},{tag:[U.pJ.operator,U.pJ.operatorKeyword,U.pJ.url,U.pJ.escape,U.pJ.regexp,U.pJ.link,U.pJ.special(U.pJ.string)],color:_e},{tag:[U.pJ.meta,U.pJ.comment],color:gt},{tag:U.pJ.strong,fontWeight:"bold"},{tag:U.pJ.emphasis,fontStyle:"italic"},{tag:U.pJ.strikethrough,textDecoration:"line-through"},{tag:U.pJ.link,color:gt,textDecoration:"underline"},{tag:U.pJ.heading,fontWeight:"bold",color:ce},{tag:[U.pJ.atom,U.pJ.bool,U.pJ.special(U.pJ.variableName)],color:Cn},{tag:[U.pJ.processingInstruction,U.pJ.string,U.pJ.inserted],color:rn},{tag:U.pJ.invalid,color:Oe}]),Vu=[Wa,(0,yn.nF)(_l)];var Bc=Qt.tk.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),yu=function(D){D===void 0&&(D={});var{indentWithTab:M=!0,editable:L=!0,readOnly:z=!1,theme:K="light",placeholder:me="",basicSetup:Te=!0}=D,nt=[];switch(M&&nt.unshift(Qt.$f.of([La])),Te&&(typeof Te=="boolean"?nt.unshift(T()):nt.unshift(T(Te))),me&&nt.unshift((0,Qt.W$)(me)),K){case"light":nt.push(Bc);break;case"dark":nt.push(Vu);break;case"none":break;default:nt.push(K);break}return L===!1&&nt.push(Qt.tk.editable.of(!1)),z&&nt.push(it.yy.readOnly.of(!0)),[...nt]},ou=k=>({line:k.state.doc.lineAt(k.state.selection.main.from),lineCount:k.state.doc.lines,lineBreak:k.state.lineBreak,length:k.state.doc.length,readOnly:k.state.readOnly,tabSize:k.state.tabSize,selection:k.state.selection,selectionAsSingle:k.state.selection.asSingle().main,ranges:k.state.selection.ranges,selectionCode:k.state.sliceDoc(k.state.selection.main.from,k.state.selection.main.to),selections:k.state.selection.ranges.map(D=>k.state.sliceDoc(D.from,D.to)),selectedText:k.state.selection.ranges.some(D=>!D.empty)}),bl=it.q6.define(),Wu=[];function zl(k){var{value:D,selection:M,onChange:L,onStatistics:z,onCreateEditor:K,onUpdate:me,extensions:Te=Wu,autoFocus:nt,theme:Pt="light",height:Wt=null,minHeight:Gn=null,maxHeight:Gi=null,width:ts=null,minWidth:io=null,maxWidth:ca=null,placeholder:au="",editable:A=!0,readOnly:v=!1,indentWithTab:_=!0,basicSetup:N=!0,root:q,initialState:de}=k,[Pe,tt]=(0,fn.useState)(),[At,tn]=(0,fn.useState)(),[Cr,Jn]=(0,fn.useState)(),rs=Qt.tk.theme({"&":{height:Wt,minHeight:Gn,maxHeight:Gi,width:ts,minWidth:io,maxWidth:ca},"& .cm-scroller":{height:"100% !important"}}),ir=Qt.tk.updateListener.of(Ba=>{if(Ba.docChanged&&typeof L=="function"&&!Ba.transactions.some(dh=>dh.annotation(bl))){var Ou=Ba.state.doc,ku=Ou.toString();L(ku,Ba)}z&&z(ou(Ba))}),mo=yu({theme:Pt,editable:A,readOnly:v,placeholder:au,indentWithTab:_,basicSetup:N}),Pl=[ir,rs,...mo];return me&&typeof me=="function"&&Pl.push(Qt.tk.updateListener.of(me)),Pl=Pl.concat(Te),(0,fn.useEffect)(()=>{if(Pe&&!Cr){var Ba={doc:D,selection:M,extensions:Pl},Ou=de?it.yy.fromJSON(de.json,Ba,de.fields):it.yy.create(Ba);if(Jn(Ou),!At){var ku=new Qt.tk({state:Ou,parent:Pe,root:q});tn(ku),K&&K(ku,Ou)}}return()=>{At&&(Jn(void 0),tn(void 0))}},[Pe,Cr]),(0,fn.useEffect)(()=>tt(k.container),[k.container]),(0,fn.useEffect)(()=>()=>{At&&(At.destroy(),tn(void 0))},[At]),(0,fn.useEffect)(()=>{nt&&At&&At.focus()},[nt,At]),(0,fn.useEffect)(()=>{At&&At.dispatch({effects:it.Py.reconfigure.of(Pl)})},[Pt,Te,Wt,Gn,Gi,ts,io,ca,au,A,v,_,N,L,me]),(0,fn.useEffect)(()=>{if(D!==void 0){var Ba=At?At.state.doc.toString():"";At&&D!==Ba&&At.dispatch({changes:{from:0,to:Ba.length,insert:D||""},annotations:[bl.of(!0)]})}},[D,At]),{state:Cr,setState:Jn,view:At,setView:tn,container:Pe,setContainer:tt}}var vu=dn(62086),Ac=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],Tu=(0,fn.forwardRef)((k,D)=>{var{className:M,value:L="",selection:z,extensions:K=[],onChange:me,onStatistics:Te,onCreateEditor:nt,onUpdate:Pt,autoFocus:Wt,theme:Gn="light",height:Gi,minHeight:ts,maxHeight:io,width:ca,minWidth:au,maxWidth:A,basicSetup:v,placeholder:_,indentWithTab:N,editable:q,readOnly:de,root:Pe,initialState:tt}=k,At=(0,It.Z)(k,Ac),tn=(0,fn.useRef)(null),{state:Cr,view:Jn,container:rs}=zl({container:tn.current,root:Pe,value:L,autoFocus:Wt,theme:Gn,height:Gi,minHeight:ts,maxHeight:io,width:ca,minWidth:au,maxWidth:A,basicSetup:v,placeholder:_,indentWithTab:N,editable:q,readOnly:de,selection:z,onChange:me,onStatistics:Te,onCreateEditor:nt,onUpdate:Pt,extensions:K,initialState:tt});if((0,fn.useImperativeHandle)(D,()=>({editor:tn.current,state:Cr,view:Jn}),[tn,rs,Cr,Jn]),typeof L!="string")throw new Error("value must be typeof string but got "+typeof L);var ir=typeof Gn=="string"?"cm-theme-"+Gn:"cm-theme";return(0,vu.jsx)("div",(0,xe.Z)({ref:tn,className:""+ir+(M?" "+M:"")},At))});Tu.displayName="CodeMirror";var tl=Tu},26574:function(lo,bs,dn){"use strict";dn.d(bs,{Z:function(){return ze}});var xe=dn(93236),It=dn(82187),fn=dn.n(It),it=dn(76941),Qt=dn(76130),yn=dn(54414),ii=dn(56081),Nn=dn(9557),Kt=function(ee,Ze){var Ie={};for(var Xe in ee)Object.prototype.hasOwnProperty.call(ee,Xe)&&Ze.indexOf(Xe)<0&&(Ie[Xe]=ee[Xe]);if(ee!=null&&typeof Object.getOwnPropertySymbols=="function")for(var St=0,Xe=Object.getOwnPropertySymbols(ee);St<Xe.length;St++)Ze.indexOf(Xe[St])<0&&Object.prototype.propertyIsEnumerable.call(ee,Xe[St])&&(Ie[Xe[St]]=ee[Xe[St]]);return Ie},vn=ee=>{var{prefixCls:Ze,className:Ie,hoverable:Xe=!0}=ee,St=Kt(ee,["prefixCls","className","hoverable"]);const{getPrefixCls:Tt}=xe.useContext(Qt.E_),Bn=Tt("card",Ze),Fn=fn()(`${Bn}-grid`,Ie,{[`${Bn}-grid-hoverable`]:Xe});return xe.createElement("div",Object.assign({},St,{className:Fn}))},gn=dn(98062),Si=dn(68714),Ii=dn(82852),Un=dn(1689);const $t=ee=>{const{antCls:Ze,componentCls:Ie,headerHeight:Xe,cardPaddingBase:St,tabsMarginBottom:Tt}=ee;return Object.assign(Object.assign({display:"flex",justifyContent:"center",flexDirection:"column",minHeight:Xe,marginBottom:-1,padding:`0 ${(0,gn.bf)(St)}`,color:ee.colorTextHeading,fontWeight:ee.fontWeightStrong,fontSize:ee.headerFontSize,background:ee.headerBg,borderBottom:`${(0,gn.bf)(ee.lineWidth)} ${ee.lineType} ${ee.colorBorderSecondary}`,borderRadius:`${(0,gn.bf)(ee.borderRadiusLG)} ${(0,gn.bf)(ee.borderRadiusLG)} 0 0`},(0,Si.dF)()),{"&-wrapper":{width:"100%",display:"flex",alignItems:"center"},"&-title":Object.assign(Object.assign({display:"inline-block",flex:1},Si.vS),{[`
          > ${Ie}-typography,
          > ${Ie}-typography-edit-content
        `]:{insetInlineStart:0,marginTop:0,marginBottom:0}}),[`${Ze}-tabs-top`]:{clear:"both",marginBottom:Tt,color:ee.colorText,fontWeight:"normal",fontSize:ee.fontSize,"&-bar":{borderBottom:`${(0,gn.bf)(ee.lineWidth)} ${ee.lineType} ${ee.colorBorderSecondary}`}}})},qt=ee=>{const{cardPaddingBase:Ze,colorBorderSecondary:Ie,cardShadow:Xe,lineWidth:St}=ee;return{width:"33.33%",padding:Ze,border:0,borderRadius:0,boxShadow:`
      ${(0,gn.bf)(St)} 0 0 0 ${Ie},
      0 ${(0,gn.bf)(St)} 0 0 ${Ie},
      ${(0,gn.bf)(St)} ${(0,gn.bf)(St)} 0 0 ${Ie},
      ${(0,gn.bf)(St)} 0 0 0 ${Ie} inset,
      0 ${(0,gn.bf)(St)} 0 0 ${Ie} inset;
    `,transition:`all ${ee.motionDurationMid}`,"&-hoverable:hover":{position:"relative",zIndex:1,boxShadow:Xe}}},mr=ee=>{const{componentCls:Ze,iconCls:Ie,actionsLiMargin:Xe,cardActionsIconSize:St,colorBorderSecondary:Tt,actionsBg:Bn}=ee;return Object.assign(Object.assign({margin:0,padding:0,listStyle:"none",background:Bn,borderTop:`${(0,gn.bf)(ee.lineWidth)} ${ee.lineType} ${Tt}`,display:"flex",borderRadius:`0 0 ${(0,gn.bf)(ee.borderRadiusLG)} ${(0,gn.bf)(ee.borderRadiusLG)}`},(0,Si.dF)()),{"& > li":{margin:Xe,color:ee.colorTextDescription,textAlign:"center","> span":{position:"relative",display:"block",minWidth:ee.calc(ee.cardActionsIconSize).mul(2).equal(),fontSize:ee.fontSize,lineHeight:ee.lineHeight,cursor:"pointer","&:hover":{color:ee.colorPrimary,transition:`color ${ee.motionDurationMid}`},[`a:not(${Ze}-btn), > ${Ie}`]:{display:"inline-block",width:"100%",color:ee.colorTextDescription,lineHeight:(0,gn.bf)(ee.fontHeight),transition:`color ${ee.motionDurationMid}`,"&:hover":{color:ee.colorPrimary}},[`> ${Ie}`]:{fontSize:St,lineHeight:(0,gn.bf)(ee.calc(St).mul(ee.lineHeight).equal())}},"&:not(:last-child)":{borderInlineEnd:`${(0,gn.bf)(ee.lineWidth)} ${ee.lineType} ${Tt}`}}})},ss=ee=>Object.assign(Object.assign({margin:`${(0,gn.bf)(ee.calc(ee.marginXXS).mul(-1).equal())} 0`,display:"flex"},(0,Si.dF)()),{"&-avatar":{paddingInlineEnd:ee.padding},"&-detail":{overflow:"hidden",flex:1,"> div:not(:last-child)":{marginBottom:ee.marginXS}},"&-title":Object.assign({color:ee.colorTextHeading,fontWeight:ee.fontWeightStrong,fontSize:ee.fontSizeLG},Si.vS),"&-description":{color:ee.colorTextDescription}}),Dr=ee=>{const{componentCls:Ze,cardPaddingBase:Ie,colorFillAlter:Xe}=ee;return{[`${Ze}-head`]:{padding:`0 ${(0,gn.bf)(Ie)}`,background:Xe,"&-title":{fontSize:ee.fontSize}},[`${Ze}-body`]:{padding:`${(0,gn.bf)(ee.padding)} ${(0,gn.bf)(Ie)}`}}},zs=ee=>{const{componentCls:Ze}=ee;return{overflow:"hidden",[`${Ze}-body`]:{userSelect:"none"}}},pi=ee=>{const{antCls:Ze,componentCls:Ie,cardShadow:Xe,cardHeadPadding:St,colorBorderSecondary:Tt,boxShadowTertiary:Bn,cardPaddingBase:Fn,extraColor:Qn}=ee;return{[Ie]:Object.assign(Object.assign({},(0,Si.Wf)(ee)),{position:"relative",background:ee.colorBgContainer,borderRadius:ee.borderRadiusLG,[`&:not(${Ie}-bordered)`]:{boxShadow:Bn},[`${Ie}-head`]:$t(ee),[`${Ie}-extra`]:{marginInlineStart:"auto",color:Qn,fontWeight:"normal",fontSize:ee.fontSize},[`${Ie}-body`]:Object.assign({padding:Fn,borderRadius:`0 0 ${(0,gn.bf)(ee.borderRadiusLG)} ${(0,gn.bf)(ee.borderRadiusLG)}`},(0,Si.dF)()),[`${Ie}-grid`]:qt(ee),[`${Ie}-cover`]:{"> *":{display:"block",width:"100%"},[`img, img + ${Ze}-image-mask`]:{borderRadius:`${(0,gn.bf)(ee.borderRadiusLG)} ${(0,gn.bf)(ee.borderRadiusLG)} 0 0`}},[`${Ie}-actions`]:mr(ee),[`${Ie}-meta`]:ss(ee)}),[`${Ie}-bordered`]:{border:`${(0,gn.bf)(ee.lineWidth)} ${ee.lineType} ${Tt}`,[`${Ie}-cover`]:{marginTop:-1,marginInlineStart:-1,marginInlineEnd:-1}},[`${Ie}-hoverable`]:{cursor:"pointer",transition:`box-shadow ${ee.motionDurationMid}, border-color ${ee.motionDurationMid}`,"&:hover":{borderColor:"transparent",boxShadow:Xe}},[`${Ie}-contain-grid`]:{borderRadius:`${(0,gn.bf)(ee.borderRadiusLG)} ${(0,gn.bf)(ee.borderRadiusLG)} 0 0 `,[`${Ie}-body`]:{display:"flex",flexWrap:"wrap"},[`&:not(${Ie}-loading) ${Ie}-body`]:{marginBlockStart:ee.calc(ee.lineWidth).mul(-1).equal(),marginInlineStart:ee.calc(ee.lineWidth).mul(-1).equal(),padding:0}},[`${Ie}-contain-tabs`]:{[`> ${Ie}-head`]:{minHeight:0,[`${Ie}-head-title, ${Ie}-extra`]:{paddingTop:St}}},[`${Ie}-type-inner`]:Dr(ee),[`${Ie}-loading`]:zs(ee),[`${Ie}-rtl`]:{direction:"rtl"}}},vs=ee=>{const{componentCls:Ze,cardPaddingSM:Ie,headerHeightSM:Xe,headerFontSizeSM:St}=ee;return{[`${Ze}-small`]:{[`> ${Ze}-head`]:{minHeight:Xe,padding:`0 ${(0,gn.bf)(Ie)}`,fontSize:St,[`> ${Ze}-head-wrapper`]:{[`> ${Ze}-extra`]:{fontSize:ee.fontSize}}},[`> ${Ze}-body`]:{padding:Ie}},[`${Ze}-small${Ze}-contain-tabs`]:{[`> ${Ze}-head`]:{[`${Ze}-head-title, ${Ze}-extra`]:{paddingTop:0,display:"flex",alignItems:"center"}}}}},uo=ee=>({headerBg:"transparent",headerFontSize:ee.fontSizeLG,headerFontSizeSM:ee.fontSize,headerHeight:ee.fontSizeLG*ee.lineHeightLG+ee.padding*2,headerHeightSM:ee.fontSize*ee.lineHeight+ee.paddingXS*2,actionsBg:ee.colorBgContainer,actionsLiMargin:`${ee.paddingSM}px 0`,tabsMarginBottom:-ee.padding-ee.lineWidth,extraColor:ee.colorText});var cs=(0,Ii.I$)("Card",ee=>{const Ze=(0,Un.TS)(ee,{cardShadow:ee.boxShadowCard,cardHeadPadding:ee.padding,cardPaddingBase:ee.paddingLG,cardActionsIconSize:ee.fontSize,cardPaddingSM:12});return[pi(Ze),vs(Ze)]},uo),wr=function(ee,Ze){var Ie={};for(var Xe in ee)Object.prototype.hasOwnProperty.call(ee,Xe)&&Ze.indexOf(Xe)<0&&(Ie[Xe]=ee[Xe]);if(ee!=null&&typeof Object.getOwnPropertySymbols=="function")for(var St=0,Xe=Object.getOwnPropertySymbols(ee);St<Xe.length;St++)Ze.indexOf(Xe[St])<0&&Object.prototype.propertyIsEnumerable.call(ee,Xe[St])&&(Ie[Xe[St]]=ee[Xe[St]]);return Ie};const jr=ee=>{const{actionClasses:Ze,actions:Ie=[],actionStyle:Xe}=ee;return xe.createElement("ul",{className:Ze,style:Xe},Ie.map((St,Tt)=>{const Bn=`action-${Tt}`;return xe.createElement("li",{style:{width:`${100/Ie.length}%`},key:Bn},xe.createElement("span",null,St))}))};var qs=xe.forwardRef((ee,Ze)=>{const{prefixCls:Ie,className:Xe,rootClassName:St,style:Tt,extra:Bn,headStyle:Fn={},bodyStyle:Qn={},title:hi,loading:Ki,bordered:Vn=!0,size:fs,type:wo,cover:Ao,actions:en,tabList:fe,children:Fe,activeTabKey:Ye,defaultActiveTabKey:Ve,tabBarExtraContent:Ge,hoverable:Ut,tabProps:sn={},classNames:_n,styles:Hi}=ee,Wn=wr(ee,["prefixCls","className","rootClassName","style","extra","headStyle","bodyStyle","title","loading","bordered","size","type","cover","actions","tabList","children","activeTabKey","defaultActiveTabKey","tabBarExtraContent","hoverable","tabProps","classNames","styles"]),{getPrefixCls:xi,direction:ar,card:di}=xe.useContext(Qt.E_),Ui=Ts=>{var Kr;(Kr=ee.onTabChange)===null||Kr===void 0||Kr.call(ee,Ts)},hr=Ts=>{var Kr;return fn()((Kr=di==null?void 0:di.classNames)===null||Kr===void 0?void 0:Kr[Ts],_n==null?void 0:_n[Ts])},bi=Ts=>{var Kr;return Object.assign(Object.assign({},(Kr=di==null?void 0:di.styles)===null||Kr===void 0?void 0:Kr[Ts]),Hi==null?void 0:Hi[Ts])},Gr=xe.useMemo(()=>{let Ts=!1;return xe.Children.forEach(Fe,Kr=>{Kr&&Kr.type&&Kr.type===vn&&(Ts=!0)}),Ts},[Fe]),Zi=xi("card",Ie),[xr,ms,Ni]=cs(Zi),qr=xe.createElement(ii.Z,{loading:!0,active:!0,paragraph:{rows:4},title:!1},Fe),Di=Ye!==void 0,Sr=Object.assign(Object.assign({},sn),{[Di?"activeKey":"defaultActiveKey"]:Di?Ye:Ve,tabBarExtraContent:Ge});let Qi;const _i=(0,yn.Z)(fs),gr=!_i||_i==="default"?"large":_i,Zn=fe?xe.createElement(Nn.Z,Object.assign({size:gr},Sr,{className:`${Zi}-head-tabs`,onChange:Ui,items:fe.map(Ts=>{var{tab:Kr}=Ts,hs=wr(Ts,["tab"]);return Object.assign({label:Kr},hs)})})):null;if(hi||Bn||Zn){const Ts=fn()(`${Zi}-head`,hr("header")),Kr=fn()(`${Zi}-head-title`,hr("title")),hs=fn()(`${Zi}-extra`,hr("extra")),os=Object.assign(Object.assign({},Fn),bi("header"));Qi=xe.createElement("div",{className:Ts,style:os},xe.createElement("div",{className:`${Zi}-head-wrapper`},hi&&xe.createElement("div",{className:Kr,style:bi("title")},hi),Bn&&xe.createElement("div",{className:hs,style:bi("extra")},Bn)),Zn)}const tr=fn()(`${Zi}-cover`,hr("cover")),bn=Ao?xe.createElement("div",{className:tr,style:bi("cover")},Ao):null,Wr=fn()(`${Zi}-body`,hr("body")),Js=Object.assign(Object.assign({},Qn),bi("body")),Hr=xe.createElement("div",{className:Wr,style:Js},Ki?qr:Fe),Lr=fn()(`${Zi}-actions`,hr("actions")),Pi=en&&en.length?xe.createElement(jr,{actionClasses:Lr,actionStyle:bi("actions"),actions:en}):null,Qs=(0,it.Z)(Wn,["onTabChange"]),Pn=fn()(Zi,di==null?void 0:di.className,{[`${Zi}-loading`]:Ki,[`${Zi}-bordered`]:Vn,[`${Zi}-hoverable`]:Ut,[`${Zi}-contain-grid`]:Gr,[`${Zi}-contain-tabs`]:fe&&fe.length,[`${Zi}-${_i}`]:_i,[`${Zi}-type-${wo}`]:!!wo,[`${Zi}-rtl`]:ar==="rtl"},Xe,St,ms,Ni),Xs=Object.assign(Object.assign({},di==null?void 0:di.style),Tt);return xr(xe.createElement("div",Object.assign({ref:Ze},Qs,{className:Pn,style:Xs}),Qi,bn,Hr,Pi))}),Is=function(ee,Ze){var Ie={};for(var Xe in ee)Object.prototype.hasOwnProperty.call(ee,Xe)&&Ze.indexOf(Xe)<0&&(Ie[Xe]=ee[Xe]);if(ee!=null&&typeof Object.getOwnPropertySymbols=="function")for(var St=0,Xe=Object.getOwnPropertySymbols(ee);St<Xe.length;St++)Ze.indexOf(Xe[St])<0&&Object.prototype.propertyIsEnumerable.call(ee,Xe[St])&&(Ie[Xe[St]]=ee[Xe[St]]);return Ie},le=ee=>{const{prefixCls:Ze,className:Ie,avatar:Xe,title:St,description:Tt}=ee,Bn=Is(ee,["prefixCls","className","avatar","title","description"]),{getPrefixCls:Fn}=xe.useContext(Qt.E_),Qn=Fn("card",Ze),hi=fn()(`${Qn}-meta`,Ie),Ki=Xe?xe.createElement("div",{className:`${Qn}-meta-avatar`},Xe):null,Vn=St?xe.createElement("div",{className:`${Qn}-meta-title`},St):null,fs=Tt?xe.createElement("div",{className:`${Qn}-meta-description`},Tt):null,wo=Vn||fs?xe.createElement("div",{className:`${Qn}-meta-detail`},Vn,fs):null;return xe.createElement("div",Object.assign({},Bn,{className:hi}),Ki,wo)};const $e=qs;$e.Grid=vn,$e.Meta=le;var ze=$e},13310:function(lo,bs,dn){"use strict";dn.d(bs,{Z:function(){return Co}});var xe=dn(93236),It=dn(6399),fn=dn(19103),it=dn(82187),Qt=dn.n(it),yn=dn(80284),ii=dn(68190),Nn=dn(90396),Kt=dn(3116),In=dn(63089),vn=dn(98081),gn=dn(55250),Si=dn(28484),Ii=dn(59566),Un=dn(12003),$t=dn(63509),qt=dn(41047),mr=dn(27530),ss=dn(59567),Dr=function(De,He){if(De&&He){var ht=Array.isArray(He)?He:He.split(","),vt=De.name||"",Bt=De.type||"",zt=Bt.replace(/\/.*$/,"");return ht.some(function(Ot){var mt=Ot.trim();if(/^\*(\/\*)?$/.test(Ot))return!0;if(mt.charAt(0)==="."){var on=vt.toLowerCase(),En=mt.toLowerCase(),kn=[En];return(En===".jpg"||En===".jpeg")&&(kn=[".jpg",".jpeg"]),kn.some(function(yi){return on.endsWith(yi)})}return/\/\*$/.test(mt)?zt===mt.replace(/\/.*$/,""):Bt===mt?!0:/^\w+$/.test(mt)?((0,ss.ZP)(!1,"Upload takes an invalidate 'accept' type '".concat(mt,"'.Skip for check.")),!0):!1})}return!0};function zs(De,He){var ht="cannot ".concat(De.method," ").concat(De.action," ").concat(He.status,"'"),vt=new Error(ht);return vt.status=He.status,vt.method=De.method,vt.url=De.action,vt}function pi(De){var He=De.responseText||De.response;if(!He)return He;try{return JSON.parse(He)}catch(ht){return He}}function vs(De){var He=new XMLHttpRequest;De.onProgress&&He.upload&&(He.upload.onprogress=function(zt){zt.total>0&&(zt.percent=zt.loaded/zt.total*100),De.onProgress(zt)});var ht=new FormData;De.data&&Object.keys(De.data).forEach(function(Bt){var zt=De.data[Bt];if(Array.isArray(zt)){zt.forEach(function(Ot){ht.append("".concat(Bt,"[]"),Ot)});return}ht.append(Bt,zt)}),De.file instanceof Blob?ht.append(De.filename,De.file,De.file.name):ht.append(De.filename,De.file),He.onerror=function(zt){De.onError(zt)},He.onload=function(){return He.status<200||He.status>=300?De.onError(zs(De,He),pi(He)):De.onSuccess(pi(He),He)},He.open(De.method,De.action,!0),De.withCredentials&&"withCredentials"in He&&(He.withCredentials=!0);var vt=De.headers||{};return vt["X-Requested-With"]!==null&&He.setRequestHeader("X-Requested-With","XMLHttpRequest"),Object.keys(vt).forEach(function(Bt){vt[Bt]!==null&&He.setRequestHeader(Bt,vt[Bt])}),He.send(ht),{abort:function(){He.abort()}}}function uo(De,He){var ht=De.createReader(),vt=[];function Bt(){ht.readEntries(function(zt){var Ot=Array.prototype.slice.apply(zt);vt=vt.concat(Ot);var mt=!Ot.length;mt?He(vt):Bt()})}Bt()}var cs=function(He,ht,vt){var Bt=function zt(Ot,mt){Ot&&(Ot.path=mt||"",Ot.isFile?Ot.file(function(on){vt(on)&&(Ot.fullPath&&!on.webkitRelativePath&&(Object.defineProperties(on,{webkitRelativePath:{writable:!0}}),on.webkitRelativePath=Ot.fullPath.replace(/^\//,""),Object.defineProperties(on,{webkitRelativePath:{writable:!1}})),ht([on]))}):Ot.isDirectory&&uo(Ot,function(on){on.forEach(function(En){zt(En,"".concat(mt).concat(Ot.name,"/"))})}))};He.forEach(function(zt){Bt(zt.webkitGetAsEntry())})},wr=cs,jr=+new Date,vr=0;function qs(){return"rc-upload-".concat(jr,"-").concat(++vr)}var Is=["component","prefixCls","className","classNames","disabled","id","style","styles","multiple","accept","capture","children","directory","openFileDialogOnClick","onMouseEnter","onMouseLeave","hasControlInside"],ci=function(De){(0,In.Z)(ht,De);var He=(0,vn.Z)(ht);function ht(){var vt;(0,ii.Z)(this,ht);for(var Bt=arguments.length,zt=new Array(Bt),Ot=0;Ot<Bt;Ot++)zt[Ot]=arguments[Ot];return vt=He.call.apply(He,[this].concat(zt)),(0,gn.Z)((0,Kt.Z)(vt),"state",{uid:qs()}),(0,gn.Z)((0,Kt.Z)(vt),"reqs",{}),(0,gn.Z)((0,Kt.Z)(vt),"fileInput",void 0),(0,gn.Z)((0,Kt.Z)(vt),"_isMounted",void 0),(0,gn.Z)((0,Kt.Z)(vt),"onChange",function(mt){var on=vt.props,En=on.accept,kn=on.directory,yi=mt.target.files,gi=(0,It.Z)(yi).filter(function(Wi){return!kn||Dr(Wi,En)});vt.uploadFiles(gi),vt.reset()}),(0,gn.Z)((0,Kt.Z)(vt),"onClick",function(mt){var on=vt.fileInput;if(on){var En=mt.target,kn=vt.props.onClick;if(En&&En.tagName==="BUTTON"){var yi=on.parentNode;yi.focus(),En.blur()}on.click(),kn&&kn(mt)}}),(0,gn.Z)((0,Kt.Z)(vt),"onKeyDown",function(mt){mt.key==="Enter"&&vt.onClick(mt)}),(0,gn.Z)((0,Kt.Z)(vt),"onFileDrop",function(mt){var on=vt.props.multiple;if(mt.preventDefault(),mt.type!=="dragover")if(vt.props.directory)wr(Array.prototype.slice.call(mt.dataTransfer.items),vt.uploadFiles,function(kn){return Dr(kn,vt.props.accept)});else{var En=(0,It.Z)(mt.dataTransfer.files).filter(function(kn){return Dr(kn,vt.props.accept)});on===!1&&(En=En.slice(0,1)),vt.uploadFiles(En)}}),(0,gn.Z)((0,Kt.Z)(vt),"uploadFiles",function(mt){var on=(0,It.Z)(mt),En=on.map(function(kn){return kn.uid=qs(),vt.processFile(kn,on)});Promise.all(En).then(function(kn){var yi=vt.props.onBatchStart;yi==null||yi(kn.map(function(gi){var Wi=gi.origin,Xn=gi.parsedFile;return{file:Wi,parsedFile:Xn}})),kn.filter(function(gi){return gi.parsedFile!==null}).forEach(function(gi){vt.post(gi)})})}),(0,gn.Z)((0,Kt.Z)(vt),"processFile",function(){var mt=(0,qt.Z)((0,Un.Z)().mark(function on(En,kn){var yi,gi,Wi,Xn,Yn,Ht,$r,kt,Bi;return(0,Un.Z)().wrap(function(Mi){for(;;)switch(Mi.prev=Mi.next){case 0:if(yi=vt.props.beforeUpload,gi=En,!yi){Mi.next=14;break}return Mi.prev=3,Mi.next=6,yi(En,kn);case 6:gi=Mi.sent,Mi.next=12;break;case 9:Mi.prev=9,Mi.t0=Mi.catch(3),gi=!1;case 12:if(gi!==!1){Mi.next=14;break}return Mi.abrupt("return",{origin:En,parsedFile:null,action:null,data:null});case 14:if(Wi=vt.props.action,typeof Wi!="function"){Mi.next=21;break}return Mi.next=18,Wi(En);case 18:Xn=Mi.sent,Mi.next=22;break;case 21:Xn=Wi;case 22:if(Yn=vt.props.data,typeof Yn!="function"){Mi.next=29;break}return Mi.next=26,Yn(En);case 26:Ht=Mi.sent,Mi.next=30;break;case 29:Ht=Yn;case 30:return $r=((0,$t.Z)(gi)==="object"||typeof gi=="string")&&gi?gi:En,$r instanceof File?kt=$r:kt=new File([$r],En.name,{type:En.type}),Bi=kt,Bi.uid=En.uid,Mi.abrupt("return",{origin:En,data:Ht,parsedFile:Bi,action:Xn});case 35:case"end":return Mi.stop()}},on,null,[[3,9]])}));return function(on,En){return mt.apply(this,arguments)}}()),(0,gn.Z)((0,Kt.Z)(vt),"saveFileInput",function(mt){vt.fileInput=mt}),vt}return(0,Nn.Z)(ht,[{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this.abort()}},{key:"post",value:function(Bt){var zt=this,Ot=Bt.data,mt=Bt.origin,on=Bt.action,En=Bt.parsedFile;if(this._isMounted){var kn=this.props,yi=kn.onStart,gi=kn.customRequest,Wi=kn.name,Xn=kn.headers,Yn=kn.withCredentials,Ht=kn.method,$r=mt.uid,kt=gi||vs,Bi={action:on,filename:Wi,data:Ot,file:En,headers:Xn,withCredentials:Yn,method:Ht||"post",onProgress:function(Mi){var Ur=zt.props.onProgress;Ur==null||Ur(Mi,En)},onSuccess:function(Mi,Ur){var Ei=zt.props.onSuccess;Ei==null||Ei(Mi,En,Ur),delete zt.reqs[$r]},onError:function(Mi,Ur){var Ei=zt.props.onError;Ei==null||Ei(Mi,Ur,En),delete zt.reqs[$r]}};yi(mt),this.reqs[$r]=kt(Bi)}}},{key:"reset",value:function(){this.setState({uid:qs()})}},{key:"abort",value:function(Bt){var zt=this.reqs;if(Bt){var Ot=Bt.uid?Bt.uid:Bt;zt[Ot]&&zt[Ot].abort&&zt[Ot].abort(),delete zt[Ot]}else Object.keys(zt).forEach(function(mt){zt[mt]&&zt[mt].abort&&zt[mt].abort(),delete zt[mt]})}},{key:"render",value:function(){var Bt,zt=this.props,Ot=zt.component,mt=zt.prefixCls,on=zt.className,En=zt.classNames,kn=En===void 0?{}:En,yi=zt.disabled,gi=zt.id,Wi=zt.style,Xn=zt.styles,Yn=Xn===void 0?{}:Xn,Ht=zt.multiple,$r=zt.accept,kt=zt.capture,Bi=zt.children,Tr=zt.directory,Mi=zt.openFileDialogOnClick,Ur=zt.onMouseEnter,Ei=zt.onMouseLeave,Xr=zt.hasControlInside,lr=(0,Ii.Z)(zt,Is),Ci=Qt()((Bt={},(0,gn.Z)(Bt,mt,!0),(0,gn.Z)(Bt,"".concat(mt,"-disabled"),yi),(0,gn.Z)(Bt,on,on),Bt)),Or=Tr?{directory:"directory",webkitdirectory:"webkitdirectory"}:{},Gs=yi?{}:{onClick:Mi?this.onClick:function(){},onKeyDown:Mi?this.onKeyDown:function(){},onMouseEnter:Ur,onMouseLeave:Ei,onDrop:this.onFileDrop,onDragOver:this.onFileDrop,tabIndex:Xr?void 0:"0"};return xe.createElement(Ot,(0,yn.Z)({},Gs,{className:Ci,role:Xr?void 0:"button",style:Wi}),xe.createElement("input",(0,yn.Z)({},(0,mr.Z)(lr,{aria:!0,data:!0}),{id:gi,disabled:yi,type:"file",ref:this.saveFileInput,onClick:function(Sn){return Sn.stopPropagation()},key:this.state.uid,style:(0,Si.Z)({display:"none"},Yn.input),className:kn.input,accept:$r},Or,{multiple:Ht,onChange:this.onChange},kt!=null?{capture:kt}:{})),Bi)}}]),ht}(xe.Component),le=ci;function $e(){}var ze=function(De){(0,In.Z)(ht,De);var He=(0,vn.Z)(ht);function ht(){var vt;(0,ii.Z)(this,ht);for(var Bt=arguments.length,zt=new Array(Bt),Ot=0;Ot<Bt;Ot++)zt[Ot]=arguments[Ot];return vt=He.call.apply(He,[this].concat(zt)),(0,gn.Z)((0,Kt.Z)(vt),"uploader",void 0),(0,gn.Z)((0,Kt.Z)(vt),"saveUploader",function(mt){vt.uploader=mt}),vt}return(0,Nn.Z)(ht,[{key:"abort",value:function(Bt){this.uploader.abort(Bt)}},{key:"render",value:function(){return xe.createElement(le,(0,yn.Z)({},this.props,{ref:this.saveUploader}))}}]),ht}(xe.Component);(0,gn.Z)(ze,"defaultProps",{component:"span",prefixCls:"rc-upload",data:{},headers:{},name:"file",multipart:!1,onStart:$e,onError:$e,onSuccess:$e,multiple:!1,beforeUpload:null,customRequest:null,withCredentials:!1,openFileDialogOnClick:!0,hasControlInside:!1});var ee=ze,Ze=ee,Ie=dn(57012),Xe=dn(76130),St=dn(66181),Tt=dn(17386),Bn=dn(80934),Fn=dn(68714),Qn=dn(87025),hi=dn(82852),Ki=dn(1689),Vn=dn(98062),wo=De=>{const{componentCls:He,iconCls:ht}=De;return{[`${He}-wrapper`]:{[`${He}-drag`]:{position:"relative",width:"100%",height:"100%",textAlign:"center",background:De.colorFillAlter,border:`${(0,Vn.bf)(De.lineWidth)} dashed ${De.colorBorder}`,borderRadius:De.borderRadiusLG,cursor:"pointer",transition:`border-color ${De.motionDurationSlow}`,[He]:{padding:De.padding},[`${He}-btn`]:{display:"table",width:"100%",height:"100%",outline:"none",borderRadius:De.borderRadiusLG,"&:focus-visible":{outline:`${(0,Vn.bf)(De.lineWidthFocus)} solid ${De.colorPrimaryBorder}`}},[`${He}-drag-container`]:{display:"table-cell",verticalAlign:"middle"},[`
          &:not(${He}-disabled):hover,
          &-hover:not(${He}-disabled)
        `]:{borderColor:De.colorPrimaryHover},[`p${He}-drag-icon`]:{marginBottom:De.margin,[ht]:{color:De.colorPrimary,fontSize:De.uploadThumbnailSize}},[`p${He}-text`]:{margin:`0 0 ${(0,Vn.bf)(De.marginXXS)}`,color:De.colorTextHeading,fontSize:De.fontSizeLG},[`p${He}-hint`]:{color:De.colorTextDescription,fontSize:De.fontSize},[`&${He}-disabled`]:{[`p${He}-drag-icon ${ht},
            p${He}-text,
            p${He}-hint
          `]:{color:De.colorTextDisabled}}}}}},en=De=>{const{componentCls:He,antCls:ht,iconCls:vt,fontSize:Bt,lineHeight:zt,calc:Ot}=De,mt=`${He}-list-item`,on=`${mt}-actions`,En=`${mt}-action`,kn=De.fontHeightSM;return{[`${He}-wrapper`]:{[`${He}-list`]:Object.assign(Object.assign({},(0,Fn.dF)()),{lineHeight:De.lineHeight,[mt]:{position:"relative",height:Ot(De.lineHeight).mul(Bt).equal(),marginTop:De.marginXS,fontSize:Bt,display:"flex",alignItems:"center",transition:`background-color ${De.motionDurationSlow}`,"&:hover":{backgroundColor:De.controlItemBgHover},[`${mt}-name`]:Object.assign(Object.assign({},Fn.vS),{padding:`0 ${(0,Vn.bf)(De.paddingXS)}`,lineHeight:zt,flex:"auto",transition:`all ${De.motionDurationSlow}`}),[on]:{whiteSpace:"nowrap",[En]:{opacity:0},[vt]:{color:De.actionsColor,transition:`all ${De.motionDurationSlow}`},[`
              ${En}:focus-visible,
              &.picture ${En}
            `]:{opacity:1},[`${En}${ht}-btn`]:{height:kn,border:0,lineHeight:1}},[`${He}-icon ${vt}`]:{color:De.colorTextDescription,fontSize:Bt},[`${mt}-progress`]:{position:"absolute",bottom:De.calc(De.uploadProgressOffset).mul(-1).equal(),width:"100%",paddingInlineStart:Ot(Bt).add(De.paddingXS).equal(),fontSize:Bt,lineHeight:0,pointerEvents:"none","> div":{margin:0}}},[`${mt}:hover ${En}`]:{opacity:1},[`${mt}-error`]:{color:De.colorError,[`${mt}-name, ${He}-icon ${vt}`]:{color:De.colorError},[on]:{[`${vt}, ${vt}:hover`]:{color:De.colorError},[En]:{opacity:1}}},[`${He}-list-item-container`]:{transition:`opacity ${De.motionDurationSlow}, height ${De.motionDurationSlow}`,"&::before":{display:"table",width:0,height:0,content:'""'}}})}}},fe=dn(5545);const Fe=new Vn.E4("antFadeIn",{"0%":{opacity:0},"100%":{opacity:1}}),Ye=new Vn.E4("antFadeOut",{"0%":{opacity:1},"100%":{opacity:0}}),Ve=function(De){let He=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const{antCls:ht}=De,vt=`${ht}-fade`,Bt=He?"&":"";return[(0,fe.R)(vt,Fe,Ye,De.motionDurationMid,He),{[`
        ${Bt}${vt}-enter,
        ${Bt}${vt}-appear
      `]:{opacity:0,animationTimingFunction:"linear"},[`${Bt}${vt}-leave`]:{animationTimingFunction:"linear"}}]};var Ut=De=>{const{componentCls:He}=De,ht=new Vn.E4("uploadAnimateInlineIn",{from:{width:0,height:0,padding:0,opacity:0,margin:De.calc(De.marginXS).div(-2).equal()}}),vt=new Vn.E4("uploadAnimateInlineOut",{to:{width:0,height:0,padding:0,opacity:0,margin:De.calc(De.marginXS).div(-2).equal()}}),Bt=`${He}-animate-inline`;return[{[`${He}-wrapper`]:{[`${Bt}-appear, ${Bt}-enter, ${Bt}-leave`]:{animationDuration:De.motionDurationSlow,animationTimingFunction:De.motionEaseInOutCirc,animationFillMode:"forwards"},[`${Bt}-appear, ${Bt}-enter`]:{animationName:ht},[`${Bt}-leave`]:{animationName:vt}}},{[`${He}-wrapper`]:Ve(De)},ht,vt]},sn=dn(22601);const _n=De=>{const{componentCls:He,iconCls:ht,uploadThumbnailSize:vt,uploadProgressOffset:Bt,calc:zt}=De,Ot=`${He}-list`,mt=`${Ot}-item`;return{[`${He}-wrapper`]:{[`
        ${Ot}${Ot}-picture,
        ${Ot}${Ot}-picture-card,
        ${Ot}${Ot}-picture-circle
      `]:{[mt]:{position:"relative",height:zt(vt).add(zt(De.lineWidth).mul(2)).add(zt(De.paddingXS).mul(2)).equal(),padding:De.paddingXS,border:`${(0,Vn.bf)(De.lineWidth)} ${De.lineType} ${De.colorBorder}`,borderRadius:De.borderRadiusLG,"&:hover":{background:"transparent"},[`${mt}-thumbnail`]:Object.assign(Object.assign({},Fn.vS),{width:vt,height:vt,lineHeight:(0,Vn.bf)(zt(vt).add(De.paddingSM).equal()),textAlign:"center",flex:"none",[ht]:{fontSize:De.fontSizeHeading2,color:De.colorPrimary},img:{display:"block",width:"100%",height:"100%",overflow:"hidden"}}),[`${mt}-progress`]:{bottom:Bt,width:`calc(100% - ${(0,Vn.bf)(zt(De.paddingSM).mul(2).equal())})`,marginTop:0,paddingInlineStart:zt(vt).add(De.paddingXS).equal()}},[`${mt}-error`]:{borderColor:De.colorError,[`${mt}-thumbnail ${ht}`]:{[`svg path[fill='${sn.blue[0]}']`]:{fill:De.colorErrorBg},[`svg path[fill='${sn.blue.primary}']`]:{fill:De.colorError}}},[`${mt}-uploading`]:{borderStyle:"dashed",[`${mt}-name`]:{marginBottom:Bt}}},[`${Ot}${Ot}-picture-circle ${mt}`]:{[`&, &::before, ${mt}-thumbnail`]:{borderRadius:"50%"}}}}},Hi=De=>{const{componentCls:He,iconCls:ht,fontSizeLG:vt,colorTextLightSolid:Bt,calc:zt}=De,Ot=`${He}-list`,mt=`${Ot}-item`,on=De.uploadPicCardSize;return{[`
      ${He}-wrapper${He}-picture-card-wrapper,
      ${He}-wrapper${He}-picture-circle-wrapper
    `]:Object.assign(Object.assign({},(0,Fn.dF)()),{display:"block",[`${He}${He}-select`]:{width:on,height:on,textAlign:"center",verticalAlign:"top",backgroundColor:De.colorFillAlter,border:`${(0,Vn.bf)(De.lineWidth)} dashed ${De.colorBorder}`,borderRadius:De.borderRadiusLG,cursor:"pointer",transition:`border-color ${De.motionDurationSlow}`,[`> ${He}`]:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",textAlign:"center"},[`&:not(${He}-disabled):hover`]:{borderColor:De.colorPrimary}},[`${Ot}${Ot}-picture-card, ${Ot}${Ot}-picture-circle`]:{display:"flex",flexWrap:"wrap","@supports not (gap: 1px)":{"& > *":{marginBlockEnd:De.marginXS,marginInlineEnd:De.marginXS}},"@supports (gap: 1px)":{gap:De.marginXS},[`${Ot}-item-container`]:{display:"inline-block",width:on,height:on,verticalAlign:"top"},"&::after":{display:"none"},"&::before":{display:"none"},[mt]:{height:"100%",margin:0,"&::before":{position:"absolute",zIndex:1,width:`calc(100% - ${(0,Vn.bf)(zt(De.paddingXS).mul(2).equal())})`,height:`calc(100% - ${(0,Vn.bf)(zt(De.paddingXS).mul(2).equal())})`,backgroundColor:De.colorBgMask,opacity:0,transition:`all ${De.motionDurationSlow}`,content:'" "'}},[`${mt}:hover`]:{[`&::before, ${mt}-actions`]:{opacity:1}},[`${mt}-actions`]:{position:"absolute",insetInlineStart:0,zIndex:10,width:"100%",whiteSpace:"nowrap",textAlign:"center",opacity:0,transition:`all ${De.motionDurationSlow}`,[`
            ${ht}-eye,
            ${ht}-download,
            ${ht}-delete
          `]:{zIndex:10,width:vt,margin:`0 ${(0,Vn.bf)(De.marginXXS)}`,fontSize:vt,cursor:"pointer",transition:`all ${De.motionDurationSlow}`,color:Bt,"&:hover":{color:Bt},svg:{verticalAlign:"baseline"}}},[`${mt}-thumbnail, ${mt}-thumbnail img`]:{position:"static",display:"block",width:"100%",height:"100%",objectFit:"contain"},[`${mt}-name`]:{display:"none",textAlign:"center"},[`${mt}-file + ${mt}-name`]:{position:"absolute",bottom:De.margin,display:"block",width:`calc(100% - ${(0,Vn.bf)(zt(De.paddingXS).mul(2).equal())})`},[`${mt}-uploading`]:{[`&${mt}`]:{backgroundColor:De.colorFillAlter},[`&::before, ${ht}-eye, ${ht}-download, ${ht}-delete`]:{display:"none"}},[`${mt}-progress`]:{bottom:De.marginXL,width:`calc(100% - ${(0,Vn.bf)(zt(De.paddingXS).mul(2).equal())})`,paddingInlineStart:0}}}),[`${He}-wrapper${He}-picture-circle-wrapper`]:{[`${He}${He}-select`]:{borderRadius:"50%"}}}};var xi=De=>{const{componentCls:He}=De;return{[`${He}-rtl`]:{direction:"rtl"}}};const ar=De=>{const{componentCls:He,colorTextDisabled:ht}=De;return{[`${He}-wrapper`]:Object.assign(Object.assign({},(0,Fn.Wf)(De)),{[He]:{outline:0,"input[type='file']":{cursor:"pointer"}},[`${He}-select`]:{display:"inline-block"},[`${He}-disabled`]:{color:ht,cursor:"not-allowed"}})}},di=De=>({actionsColor:De.colorTextDescription});var Ui=(0,hi.I$)("Upload",De=>{const{fontSizeHeading3:He,fontHeight:ht,lineWidth:vt,controlHeightLG:Bt,calc:zt}=De,Ot=(0,Ki.TS)(De,{uploadThumbnailSize:zt(He).mul(2).equal(),uploadProgressOffset:zt(zt(ht).div(2)).add(vt).equal(),uploadPicCardSize:zt(Bt).mul(2.55).equal()});return[ar(Ot),wo(Ot),_n(Ot),Hi(Ot),en(Ot),Ut(Ot),xi(Ot),(0,Qn.Z)(Ot)]},di),hr={icon:function(He,ht){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M534 352V136H232v752h560V394H576a42 42 0 01-42-42z",fill:ht}},{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM602 137.8L790.2 326H602V137.8zM792 888H232V136h302v216a42 42 0 0042 42h216v494z",fill:He}}]}},name:"file",theme:"twotone"},bi=hr,Gr=dn(64006),Zi=function(He,ht){return xe.createElement(Gr.Z,(0,yn.Z)({},He,{ref:ht,icon:bi}))},xr=xe.forwardRef(Zi),ms=xr,Ni=dn(33923),qr={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M779.3 196.6c-94.2-94.2-247.6-94.2-341.7 0l-261 260.8c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l261-260.8c32.4-32.4 75.5-50.2 121.3-50.2s88.9 17.8 121.2 50.2c32.4 32.4 50.2 75.5 50.2 121.2 0 45.8-17.8 88.8-50.2 121.2l-266 265.9-43.1 43.1c-40.3 40.3-105.8 40.3-146.1 0-19.5-19.5-30.2-45.4-30.2-73s10.7-53.5 30.2-73l263.9-263.8c6.7-6.6 15.5-10.3 24.9-10.3h.1c9.4 0 18.1 3.7 24.7 10.3 6.7 6.7 10.3 15.5 10.3 24.9 0 9.3-3.7 18.1-10.3 24.7L372.4 653c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l215.6-215.6c19.9-19.9 30.8-46.3 30.8-74.4s-11-54.6-30.8-74.4c-41.1-41.1-107.9-41-149 0L463 364 224.8 602.1A172.22 172.22 0 00174 724.8c0 46.3 18.1 89.8 50.8 122.5 33.9 33.8 78.3 50.7 122.7 50.7 44.4 0 88.8-16.9 122.6-50.7l309.2-309C824.8 492.7 850 432 850 367.5c.1-64.6-25.1-125.3-70.7-170.9z"}}]},name:"paper-clip",theme:"outlined"},Di=qr,Sr=function(He,ht){return xe.createElement(Gr.Z,(0,yn.Z)({},He,{ref:ht,icon:Di}))},Qi=xe.forwardRef(Sr),_i=Qi,gr={icon:function(He,ht){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 632H136v-39.9l138.5-164.3 150.1 178L658.1 489 888 761.6V792zm0-129.8L664.2 396.8c-3.2-3.8-9-3.8-12.2 0L424.6 666.4l-144-170.7c-3.2-3.8-9-3.8-12.2 0L136 652.7V232h752v430.2z",fill:He}},{tag:"path",attrs:{d:"M424.6 765.8l-150.1-178L136 752.1V792h752v-30.4L658.1 489z",fill:ht}},{tag:"path",attrs:{d:"M136 652.7l132.4-157c3.2-3.8 9-3.8 12.2 0l144 170.7L652 396.8c3.2-3.8 9-3.8 12.2 0L888 662.2V232H136v420.7zM304 280a88 88 0 110 176 88 88 0 010-176z",fill:ht}},{tag:"path",attrs:{d:"M276 368a28 28 0 1056 0 28 28 0 10-56 0z",fill:ht}},{tag:"path",attrs:{d:"M304 456a88 88 0 100-176 88 88 0 000 176zm0-116c15.5 0 28 12.5 28 28s-12.5 28-28 28-28-12.5-28-28 12.5-28 28-28z",fill:He}}]}},name:"picture",theme:"twotone"},Zn=gr,tr=function(He,ht){return xe.createElement(Gr.Z,(0,yn.Z)({},He,{ref:ht,icon:Zn}))},bn=xe.forwardRef(tr),Wr=bn,Js=dn(67865),Hr=dn(82654),Lr=dn(11143),Pi=dn(22071),Qs=dn(54397);function Pn(De){return Object.assign(Object.assign({},De),{lastModified:De.lastModified,lastModifiedDate:De.lastModifiedDate,name:De.name,size:De.size,type:De.type,uid:De.uid,percent:0,originFileObj:De})}function Xs(De,He){const ht=(0,It.Z)(He),vt=ht.findIndex(Bt=>{let{uid:zt}=Bt;return zt===De.uid});return vt===-1?ht.push(De):ht[vt]=De,ht}function Ts(De,He){const ht=De.uid!==void 0?"uid":"name";return He.filter(vt=>vt[ht]===De[ht])[0]}function Kr(De,He){const ht=De.uid!==void 0?"uid":"name",vt=He.filter(Bt=>Bt[ht]!==De[ht]);return vt.length===He.length?null:vt}const hs=function(){const He=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:"").split("/"),vt=He[He.length-1].split(/#|\?/)[0];return(/\.[^./\\]*$/.exec(vt)||[""])[0]},os=De=>De.indexOf("image/")===0,js=De=>{if(De.type&&!De.thumbUrl)return os(De.type);const He=De.thumbUrl||De.url||"",ht=hs(He);return/^data:image\//.test(He)||/(webp|svg|png|gif|jpg|jpeg|jfif|bmp|dpg|ico|heic|heif)$/i.test(ht)?!0:!(/^data:/.test(He)||ht)},dr=200;function Qr(De){return new Promise(He=>{if(!De.type||!os(De.type)){He("");return}const ht=document.createElement("canvas");ht.width=dr,ht.height=dr,ht.style.cssText=`position: fixed; left: 0; top: 0; width: ${dr}px; height: ${dr}px; z-index: 9999; display: none;`,document.body.appendChild(ht);const vt=ht.getContext("2d"),Bt=new Image;if(Bt.onload=()=>{const{width:zt,height:Ot}=Bt;let mt=dr,on=dr,En=0,kn=0;zt>Ot?(on=Ot*(dr/zt),kn=-(on-mt)/2):(mt=zt*(dr/Ot),En=-(mt-on)/2),vt.drawImage(Bt,En,kn,mt,on);const yi=ht.toDataURL();document.body.removeChild(ht),window.URL.revokeObjectURL(Bt.src),He(yi)},Bt.crossOrigin="anonymous",De.type.startsWith("image/svg+xml")){const zt=new FileReader;zt.onload=()=>{zt.result&&typeof zt.result=="string"&&(Bt.src=zt.result)},zt.readAsDataURL(De)}else if(De.type.startsWith("image/gif")){const zt=new FileReader;zt.onload=()=>{zt.result&&He(zt.result)},zt.readAsDataURL(De)}else Bt.src=window.URL.createObjectURL(De)})}var gs={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},ei=gs,Rs=function(He,ht){return xe.createElement(Gr.Z,(0,yn.Z)({},He,{ref:ht,icon:ei}))},co=xe.forwardRef(Rs),oa=co,na={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"},re=na,P=function(He,ht){return xe.createElement(Gr.Z,(0,yn.Z)({},He,{ref:ht,icon:re}))},V=xe.forwardRef(P),Y=V,te={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"},we=te,Ce=function(He,ht){return xe.createElement(Gr.Z,(0,yn.Z)({},He,{ref:ht,icon:we}))},We=xe.forwardRef(Ce),Dt=We,jt=dn(73534),xn=dn(36014),Tn=dn(58615),mi=dn(95149),vi=dn(76941),ws={percent:0,prefixCls:"rc-progress",strokeColor:"#2db7f5",strokeLinecap:"round",strokeWidth:1,trailColor:"#D9D9D9",trailWidth:1,gapPosition:"bottom"},ho=function(){var He=(0,xe.useRef)([]),ht=(0,xe.useRef)(null);return(0,xe.useEffect)(function(){var vt=Date.now(),Bt=!1;He.current.forEach(function(zt){if(zt){Bt=!0;var Ot=zt.style;Ot.transitionDuration=".3s, .3s, .3s, .06s",ht.current&&vt-ht.current<100&&(Ot.transitionDuration="0s, 0s")}}),Bt&&(ht.current=Date.now())}),He.current},pr=["className","percent","prefixCls","strokeColor","strokeLinecap","strokeWidth","style","trailColor","trailWidth","transition"],Fi=function(He){var ht=(0,Si.Z)((0,Si.Z)({},ws),He),vt=ht.className,Bt=ht.percent,zt=ht.prefixCls,Ot=ht.strokeColor,mt=ht.strokeLinecap,on=ht.strokeWidth,En=ht.style,kn=ht.trailColor,yi=ht.trailWidth,gi=ht.transition,Wi=(0,Ii.Z)(ht,pr);delete Wi.gapPosition;var Xn=Array.isArray(Bt)?Bt:[Bt],Yn=Array.isArray(Ot)?Ot:[Ot],Ht=ho(),$r=on/2,kt=100-on/2,Bi="M ".concat(mt==="round"?$r:0,",").concat($r,`
         L `).concat(mt==="round"?kt:100,",").concat($r),Tr="0 0 100 ".concat(on),Mi=0;return xe.createElement("svg",(0,yn.Z)({className:Qt()("".concat(zt,"-line"),vt),viewBox:Tr,preserveAspectRatio:"none",style:En},Wi),xe.createElement("path",{className:"".concat(zt,"-line-trail"),d:Bi,strokeLinecap:mt,stroke:kn,strokeWidth:yi||on,fillOpacity:"0"}),Xn.map(function(Ur,Ei){var Xr=1;switch(mt){case"round":Xr=1-on/100;break;case"square":Xr=1-on/2/100;break;default:Xr=1;break}var lr={strokeDasharray:"".concat(Ur*Xr,"px, 100px"),strokeDashoffset:"-".concat(Mi,"px"),transition:gi||"stroke-dashoffset 0.3s ease 0s, stroke-dasharray .3s ease 0s, stroke 0.3s linear"},Ci=Yn[Ei]||Yn[Yn.length-1];return Mi+=Ur,xe.createElement("path",{key:Ei,className:"".concat(zt,"-line-path"),d:Bi,strokeLinecap:mt,stroke:Ci,strokeWidth:on,fillOpacity:"0",ref:function(Gs){Ht[Ei]=Gs},style:lr})}))},rt=Fi,so=dn(3392),To=dn(29075),Os=0,ds=(0,To.Z)();function Oo(){var De;return ds?(De=Os,Os+=1):De="TEST_OR_SSR",De}var nr=function(De){var He=xe.useState(),ht=(0,so.Z)(He,2),vt=ht[0],Bt=ht[1];return xe.useEffect(function(){Bt("rc_progress_".concat(Oo()))},[]),De||vt},wi=function(He){var ht=He.bg,vt=He.children;return xe.createElement("div",{style:{width:"100%",height:"100%",background:ht}},vt)};function Mn(De,He){return Object.keys(De).map(function(ht){var vt=parseFloat(ht),Bt="".concat(Math.floor(vt*He),"%");return"".concat(De[ht]," ").concat(Bt)})}var ks=xe.forwardRef(function(De,He){var ht=De.prefixCls,vt=De.color,Bt=De.gradientId,zt=De.radius,Ot=De.style,mt=De.ptg,on=De.strokeLinecap,En=De.strokeWidth,kn=De.size,yi=De.gapDegree,gi=vt&&(0,$t.Z)(vt)==="object",Wi=gi?"#FFF":void 0,Xn=kn/2,Yn=xe.createElement("circle",{className:"".concat(ht,"-circle-path"),r:zt,cx:Xn,cy:Xn,stroke:Wi,strokeLinecap:on,strokeWidth:En,opacity:mt===0?0:1,style:Ot,ref:He});if(!gi)return Yn;var Ht="".concat(Bt,"-conic"),$r=yi?"".concat(180+yi/2,"deg"):"0deg",kt=Mn(vt,(360-yi)/360),Bi=Mn(vt,1),Tr="conic-gradient(from ".concat($r,", ").concat(kt.join(", "),")"),Mi="linear-gradient(to ".concat(yi?"bottom":"top",", ").concat(Bi.join(", "),")");return xe.createElement(xe.Fragment,null,xe.createElement("mask",{id:Ht},Yn),xe.createElement("foreignObject",{x:0,y:0,width:kn,height:kn,mask:"url(#".concat(Ht,")")},xe.createElement(wi,{bg:Mi},xe.createElement(wi,{bg:Tr}))))}),jo=ks,Zr=100,aa=function(He,ht,vt,Bt,zt,Ot,mt,on,En,kn){var yi=arguments.length>10&&arguments[10]!==void 0?arguments[10]:0,gi=vt/100*360*((360-Ot)/360),Wi=Ot===0?0:{bottom:0,top:180,left:90,right:-90}[mt],Xn=(100-Bt)/100*ht;En==="round"&&Bt!==100&&(Xn+=kn/2,Xn>=ht&&(Xn=ht-.01));var Yn=Zr/2;return{stroke:typeof on=="string"?on:void 0,strokeDasharray:"".concat(ht,"px ").concat(He),strokeDashoffset:Xn+yi,transform:"rotate(".concat(zt+gi+Wi,"deg)"),transformOrigin:"".concat(Yn,"px ").concat(Yn,"px"),transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s, stroke-width .06s ease .3s, opacity .3s ease 0s",fillOpacity:0}},ka=["id","prefixCls","steps","strokeWidth","trailWidth","gapDegree","gapPosition","trailColor","strokeLinecap","style","className","strokeColor","percent"];function fa(De){var He=De!=null?De:[];return Array.isArray(He)?He:[He]}var ps=function(He){var ht=(0,Si.Z)((0,Si.Z)({},ws),He),vt=ht.id,Bt=ht.prefixCls,zt=ht.steps,Ot=ht.strokeWidth,mt=ht.trailWidth,on=ht.gapDegree,En=on===void 0?0:on,kn=ht.gapPosition,yi=ht.trailColor,gi=ht.strokeLinecap,Wi=ht.style,Xn=ht.className,Yn=ht.strokeColor,Ht=ht.percent,$r=(0,Ii.Z)(ht,ka),kt=Zr/2,Bi=nr(vt),Tr="".concat(Bi,"-gradient"),Mi=kt-Ot/2,Ur=Math.PI*2*Mi,Ei=En>0?90+En/2:-90,Xr=Ur*((360-En)/360),lr=(0,$t.Z)(zt)==="object"?zt:{count:zt,gap:2},Ci=lr.count,Or=lr.gap,Gs=fa(Ht),sr=fa(Yn),Sn=sr.find(function(_s){return _s&&(0,$t.Z)(_s)==="object"}),ln=Sn&&(0,$t.Z)(Sn)==="object",Yt=ln?"butt":gi,ti=aa(Ur,Xr,0,100,Ei,En,kn,yi,Yt,Ot),oo=ho(),Oi=function(){var Lo=0;return Gs.map(function(or,kr){var zn=sr[kr]||sr[sr.length-1],Ri=aa(Ur,Xr,Lo,or,Ei,En,kn,zn,Yt,Ot);return Lo+=or,xe.createElement(jo,{key:kr,color:zn,ptg:or,radius:Mi,prefixCls:Bt,gradientId:Tr,style:Ri,strokeLinecap:Yt,strokeWidth:Ot,gapDegree:En,ref:function(zo){oo[kr]=zo},size:Zr})}).reverse()},Fr=function(){var Lo=Math.round(Ci*(Gs[0]/100)),or=100/Ci,kr=0;return new Array(Ci).fill(null).map(function(zn,Ri){var vo=Ri<=Lo-1?sr[0]:yi,zo=vo&&(0,$t.Z)(vo)==="object"?"url(#".concat(Tr,")"):void 0,Jr=aa(Ur,Xr,kr,or,Ei,En,kn,vo,"butt",Ot,Or);return kr+=(Xr-Jr.strokeDashoffset+Or)*100/Xr,xe.createElement("circle",{key:Ri,className:"".concat(Bt,"-circle-path"),r:Mi,cx:kt,cy:kt,stroke:zo,strokeWidth:Ot,opacity:1,style:Jr,ref:function(Ti){oo[Ri]=Ti}})})};return xe.createElement("svg",(0,yn.Z)({className:Qt()("".concat(Bt,"-circle"),Xn),viewBox:"0 0 ".concat(Zr," ").concat(Zr),style:Wi,id:vt,role:"presentation"},$r),!Ci&&xe.createElement("circle",{className:"".concat(Bt,"-circle-trail"),r:Mi,cx:kt,cy:kt,stroke:yi,strokeLinecap:Yt,strokeWidth:mt||Ot,style:ti}),Ci?Fr():Oi())},no=ps,Eo={Line:rt,Circle:no},go=dn(63782);function Xo(De){return!De||De<0?0:De>100?100:De}function Ae(De){let{success:He,successPercent:ht}=De,vt=ht;return He&&"progress"in He&&(vt=He.progress),He&&"percent"in He&&(vt=He.percent),vt}const Z=De=>{let{percent:He,success:ht,successPercent:vt}=De;const Bt=Xo(Ae({success:ht,successPercent:vt}));return[Bt,Xo(Xo(He)-Bt)]},pe=De=>{let{success:He={},strokeColor:ht}=De;const{strokeColor:vt}=He;return[vt||sn.presetPrimaryColors.green,ht||null]},Ne=(De,He,ht)=>{var vt,Bt,zt,Ot;let mt=-1,on=-1;if(He==="step"){const En=ht.steps,kn=ht.strokeWidth;typeof De=="string"||typeof De=="undefined"?(mt=De==="small"?2:14,on=kn!=null?kn:8):typeof De=="number"?[mt,on]=[De,De]:[mt=14,on=8]=De,mt*=En}else if(He==="line"){const En=ht==null?void 0:ht.strokeWidth;typeof De=="string"||typeof De=="undefined"?on=En||(De==="small"?6:8):typeof De=="number"?[mt,on]=[De,De]:[mt=-1,on=8]=De}else(He==="circle"||He==="dashboard")&&(typeof De=="string"||typeof De=="undefined"?[mt,on]=De==="small"?[60,60]:[120,120]:typeof De=="number"?[mt,on]=[De,De]:(mt=(Bt=(vt=De[0])!==null&&vt!==void 0?vt:De[1])!==null&&Bt!==void 0?Bt:120,on=(Ot=(zt=De[0])!==null&&zt!==void 0?zt:De[1])!==null&&Ot!==void 0?Ot:120));return[mt,on]},Be=3,ut=De=>Be/De*100;var Xt=De=>{const{prefixCls:He,trailColor:ht=null,strokeLinecap:vt="round",gapPosition:Bt,gapDegree:zt,width:Ot=120,type:mt,children:on,success:En,size:kn=Ot,steps:yi}=De,[gi,Wi]=Ne(kn,"circle");let{strokeWidth:Xn}=De;Xn===void 0&&(Xn=Math.max(ut(gi),6));const Yn={width:gi,height:Wi,fontSize:gi*.15+6},Ht=xe.useMemo(()=>{if(zt||zt===0)return zt;if(mt==="dashboard")return 75},[zt,mt]),$r=Z(De),kt=Bt||mt==="dashboard"&&"bottom"||void 0,Bi=Object.prototype.toString.call(De.strokeColor)==="[object Object]",Tr=pe({success:En,strokeColor:De.strokeColor}),Mi=Qt()(`${He}-inner`,{[`${He}-circle-gradient`]:Bi}),Ur=xe.createElement(no,{steps:yi,percent:yi?$r[1]:$r,strokeWidth:Xn,trailWidth:Xn,strokeColor:yi?Tr[1]:Tr,strokeLinecap:vt,trailColor:ht,prefixCls:He,gapDegree:Ht,gapPosition:kt});return xe.createElement("div",{className:Mi,style:Yn},gi<=20?xe.createElement(go.Z,{title:on},Ur):xe.createElement(xe.Fragment,null,Ur,on))};const mn="--progress-line-stroke-color",ri="--progress-percent",rr=De=>{const He=De?"100%":"-100%";return new Vn.E4(`antProgress${De?"RTL":"LTR"}Active`,{"0%":{transform:`translateX(${He}) scaleX(0)`,opacity:.1},"20%":{transform:`translateX(${He}) scaleX(0)`,opacity:.5},to:{transform:"translateX(0) scaleX(1)",opacity:0}})},Xi=De=>{const{componentCls:He,iconCls:ht}=De;return{[He]:Object.assign(Object.assign({},(0,Fn.Wf)(De)),{display:"inline-block","&-rtl":{direction:"rtl"},"&-line":{position:"relative",width:"100%",fontSize:De.fontSize},[`${He}-outer`]:{display:"inline-block",width:"100%"},[`&${He}-show-info`]:{[`${He}-outer`]:{marginInlineEnd:`calc(-2em - ${(0,Vn.bf)(De.marginXS)})`,paddingInlineEnd:`calc(2em + ${(0,Vn.bf)(De.paddingXS)})`}},[`${He}-inner`]:{position:"relative",display:"inline-block",width:"100%",overflow:"hidden",verticalAlign:"middle",backgroundColor:De.remainingColor,borderRadius:De.lineBorderRadius},[`${He}-inner:not(${He}-circle-gradient)`]:{[`${He}-circle-path`]:{stroke:De.defaultColor}},[`${He}-success-bg, ${He}-bg`]:{position:"relative",background:De.defaultColor,borderRadius:De.lineBorderRadius,transition:`all ${De.motionDurationSlow} ${De.motionEaseInOutCirc}`},[`${He}-bg`]:{overflow:"hidden","&::after":{content:'""',background:{_multi_value_:!0,value:["inherit",`var(${mn})`]},height:"100%",width:`calc(1 / var(${ri}) * 100%)`,display:"block"}},[`${He}-success-bg`]:{position:"absolute",insetBlockStart:0,insetInlineStart:0,backgroundColor:De.colorSuccess},[`${He}-text`]:{display:"inline-block",width:"2em",marginInlineStart:De.marginXS,color:De.colorText,lineHeight:1,whiteSpace:"nowrap",textAlign:"start",verticalAlign:"middle",wordBreak:"normal",[ht]:{fontSize:De.fontSize}},[`&${He}-status-active`]:{[`${He}-bg::before`]:{position:"absolute",inset:0,backgroundColor:De.colorBgContainer,borderRadius:De.lineBorderRadius,opacity:0,animationName:rr(),animationDuration:De.progressActiveMotionDuration,animationTimingFunction:De.motionEaseOutQuint,animationIterationCount:"infinite",content:'""'}},[`&${He}-rtl${He}-status-active`]:{[`${He}-bg::before`]:{animationName:rr(!0)}},[`&${He}-status-exception`]:{[`${He}-bg`]:{backgroundColor:De.colorError},[`${He}-text`]:{color:De.colorError}},[`&${He}-status-exception ${He}-inner:not(${He}-circle-gradient)`]:{[`${He}-circle-path`]:{stroke:De.colorError}},[`&${He}-status-success`]:{[`${He}-bg`]:{backgroundColor:De.colorSuccess},[`${He}-text`]:{color:De.colorSuccess}},[`&${He}-status-success ${He}-inner:not(${He}-circle-gradient)`]:{[`${He}-circle-path`]:{stroke:De.colorSuccess}}})}},Vo=De=>{const{componentCls:He,iconCls:ht}=De;return{[He]:{[`${He}-circle-trail`]:{stroke:De.remainingColor},[`&${He}-circle ${He}-inner`]:{position:"relative",lineHeight:1,backgroundColor:"transparent"},[`&${He}-circle ${He}-text`]:{position:"absolute",insetBlockStart:"50%",insetInlineStart:0,width:"100%",margin:0,padding:0,color:De.circleTextColor,fontSize:De.circleTextFontSize,lineHeight:1,whiteSpace:"normal",textAlign:"center",transform:"translateY(-50%)",[ht]:{fontSize:De.circleIconFontSize}},[`${He}-circle&-status-exception`]:{[`${He}-text`]:{color:De.colorError}},[`${He}-circle&-status-success`]:{[`${He}-text`]:{color:De.colorSuccess}}},[`${He}-inline-circle`]:{lineHeight:1,[`${He}-inner`]:{verticalAlign:"bottom"}}}},yo=De=>{const{componentCls:He}=De;return{[He]:{[`${He}-steps`]:{display:"inline-block","&-outer":{display:"flex",flexDirection:"row",alignItems:"center"},"&-item":{flexShrink:0,minWidth:De.progressStepMinWidth,marginInlineEnd:De.progressStepMarginInlineEnd,backgroundColor:De.remainingColor,transition:`all ${De.motionDurationSlow}`,"&-active":{backgroundColor:De.defaultColor}}}}}},Vs=De=>{const{componentCls:He,iconCls:ht}=De;return{[He]:{[`${He}-small&-line, ${He}-small&-line ${He}-text ${ht}`]:{fontSize:De.fontSizeSM}}}},ko=De=>({circleTextColor:De.colorText,defaultColor:De.colorInfo,remainingColor:De.colorFillSecondary,lineBorderRadius:100,circleTextFontSize:"1em",circleIconFontSize:`${De.fontSize/De.fontSizeSM}em`});var Uo=(0,hi.I$)("Progress",De=>{const He=De.calc(De.marginXXS).div(2).equal(),ht=(0,Ki.TS)(De,{progressStepMarginInlineEnd:He,progressStepMinWidth:He,progressActiveMotionDuration:"2.4s"});return[Xi(ht),Vo(ht),yo(ht),Vs(ht)]},ko),la=function(De,He){var ht={};for(var vt in De)Object.prototype.hasOwnProperty.call(De,vt)&&He.indexOf(vt)<0&&(ht[vt]=De[vt]);if(De!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Bt=0,vt=Object.getOwnPropertySymbols(De);Bt<vt.length;Bt++)He.indexOf(vt[Bt])<0&&Object.prototype.propertyIsEnumerable.call(De,vt[Bt])&&(ht[vt[Bt]]=De[vt[Bt]]);return ht};const Ys=De=>{let He=[];return Object.keys(De).forEach(ht=>{const vt=parseFloat(ht.replace(/%/g,""));isNaN(vt)||He.push({key:vt,value:De[ht]})}),He=He.sort((ht,vt)=>ht.key-vt.key),He.map(ht=>{let{key:vt,value:Bt}=ht;return`${Bt} ${vt}%`}).join(", ")},Ai=(De,He)=>{const{from:ht=sn.presetPrimaryColors.blue,to:vt=sn.presetPrimaryColors.blue,direction:Bt=He==="rtl"?"to left":"to right"}=De,zt=la(De,["from","to","direction"]);if(Object.keys(zt).length!==0){const mt=Ys(zt),on=`linear-gradient(${Bt}, ${mt})`;return{background:on,[mn]:on}}const Ot=`linear-gradient(${Bt}, ${ht}, ${vt})`;return{background:Ot,[mn]:Ot}};var si=De=>{const{prefixCls:He,direction:ht,percent:vt,size:Bt,strokeWidth:zt,strokeColor:Ot,strokeLinecap:mt="round",children:on,trailColor:En=null,success:kn}=De,yi=Ot&&typeof Ot!="string"?Ai(Ot,ht):{[mn]:Ot,background:Ot},gi=mt==="square"||mt==="butt"?0:void 0,Wi=Bt!=null?Bt:[-1,zt||(Bt==="small"?6:8)],[Xn,Yn]=Ne(Wi,"line",{strokeWidth:zt}),Ht={backgroundColor:En||void 0,borderRadius:gi},$r=Object.assign(Object.assign({width:`${Xo(vt)}%`,height:Yn,borderRadius:gi},yi),{[ri]:Xo(vt)/100}),kt=Ae(De),Bi={width:`${Xo(kt)}%`,height:Yn,borderRadius:gi,backgroundColor:kn==null?void 0:kn.strokeColor},Tr={width:Xn<0?"100%":Xn,height:Yn};return xe.createElement(xe.Fragment,null,xe.createElement("div",{className:`${He}-outer`,style:Tr},xe.createElement("div",{className:`${He}-inner`,style:Ht},xe.createElement("div",{className:`${He}-bg`,style:$r}),kt!==void 0?xe.createElement("div",{className:`${He}-success-bg`,style:Bi}):null)),on)},ma=De=>{const{size:He,steps:ht,percent:vt=0,strokeWidth:Bt=8,strokeColor:zt,trailColor:Ot=null,prefixCls:mt,children:on}=De,En=Math.round(ht*(vt/100)),kn=He==="small"?2:14,yi=He!=null?He:[kn,Bt],[gi,Wi]=Ne(yi,"step",{steps:ht,strokeWidth:Bt}),Xn=gi/ht,Yn=new Array(ht);for(let Ht=0;Ht<ht;Ht++){const $r=Array.isArray(zt)?zt[Ht]:zt;Yn[Ht]=xe.createElement("div",{key:Ht,className:Qt()(`${mt}-steps-item`,{[`${mt}-steps-item-active`]:Ht<=En-1}),style:{backgroundColor:Ht<=En-1?$r:Ot,width:Xn,height:Wi}})}return xe.createElement("div",{className:`${mt}-steps-outer`},Yn,on)},ul=function(De,He){var ht={};for(var vt in De)Object.prototype.hasOwnProperty.call(De,vt)&&He.indexOf(vt)<0&&(ht[vt]=De[vt]);if(De!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Bt=0,vt=Object.getOwnPropertySymbols(De);Bt<vt.length;Bt++)He.indexOf(vt[Bt])<0&&Object.prototype.propertyIsEnumerable.call(De,vt[Bt])&&(ht[vt[Bt]]=De[vt[Bt]]);return ht};const ia=null,Ro=["normal","exception","active","success"];var Ar=xe.forwardRef((De,He)=>{const{prefixCls:ht,className:vt,rootClassName:Bt,steps:zt,strokeColor:Ot,percent:mt=0,size:on="default",showInfo:En=!0,type:kn="line",status:yi,format:gi,style:Wi}=De,Xn=ul(De,["prefixCls","className","rootClassName","steps","strokeColor","percent","size","showInfo","type","status","format","style"]),Yn=xe.useMemo(()=>{var sr,Sn;const ln=Ae(De);return parseInt(ln!==void 0?(sr=ln!=null?ln:0)===null||sr===void 0?void 0:sr.toString():(Sn=mt!=null?mt:0)===null||Sn===void 0?void 0:Sn.toString(),10)},[mt,De.success,De.successPercent]),Ht=xe.useMemo(()=>!Ro.includes(yi)&&Yn>=100?"success":yi||"normal",[yi,Yn]),{getPrefixCls:$r,direction:kt,progress:Bi}=xe.useContext(Xe.E_),Tr=$r("progress",ht),[Mi,Ur,Ei]=Uo(Tr),Xr=xe.useMemo(()=>{if(!En)return null;const sr=Ae(De);let Sn;const ln=gi||(ti=>`${ti}%`),Yt=kn==="line";return gi||Ht!=="exception"&&Ht!=="success"?Sn=ln(Xo(mt),Xo(sr)):Ht==="exception"?Sn=Yt?xe.createElement(Tn.Z,null):xe.createElement(mi.Z,null):Ht==="success"&&(Sn=Yt?xe.createElement(jt.Z,null):xe.createElement(xn.Z,null)),xe.createElement("span",{className:`${Tr}-text`,title:typeof Sn=="string"?Sn:void 0},Sn)},[En,mt,Yn,Ht,kn,Tr,gi]),lr=Array.isArray(Ot)?Ot[0]:Ot,Ci=typeof Ot=="string"||Array.isArray(Ot)?Ot:void 0;let Or;kn==="line"?Or=zt?xe.createElement(ma,Object.assign({},De,{strokeColor:Ci,prefixCls:Tr,steps:typeof zt=="object"?zt.count:zt}),Xr):xe.createElement(si,Object.assign({},De,{strokeColor:lr,prefixCls:Tr,direction:kt}),Xr):(kn==="circle"||kn==="dashboard")&&(Or=xe.createElement(Xt,Object.assign({},De,{strokeColor:lr,prefixCls:Tr,progressStatus:Ht}),Xr));const Gs=Qt()(Tr,`${Tr}-status-${Ht}`,{[`${Tr}-${kn==="dashboard"&&"circle"||kn}`]:kn!=="line",[`${Tr}-inline-circle`]:kn==="circle"&&Ne(on,"circle")[0]<=20,[`${Tr}-line`]:!zt&&kn==="line",[`${Tr}-steps`]:zt,[`${Tr}-show-info`]:En,[`${Tr}-${on}`]:typeof on=="string",[`${Tr}-rtl`]:kt==="rtl"},Bi==null?void 0:Bi.className,vt,Bt,Ur,Ei);return Mi(xe.createElement("div",Object.assign({ref:He,style:Object.assign(Object.assign({},Bi==null?void 0:Bi.style),Wi),className:Gs,role:"progressbar","aria-valuenow":Yn},(0,vi.Z)(Xn,["trailColor","strokeWidth","width","gapDegree","gapPosition","strokeLinecap","success","successPercent"])),Or))}),il=Ar,J=xe.forwardRef((De,He)=>{let{prefixCls:ht,className:vt,style:Bt,locale:zt,listType:Ot,file:mt,items:on,progress:En,iconRender:kn,actionIconRender:yi,itemRender:gi,isImgUrl:Wi,showPreviewIcon:Xn,showRemoveIcon:Yn,showDownloadIcon:Ht,previewIcon:$r,removeIcon:kt,downloadIcon:Bi,onPreview:Tr,onDownload:Mi,onClose:Ur}=De;var Ei,Xr;const{status:lr}=mt,[Ci,Or]=xe.useState(lr);xe.useEffect(()=>{lr!=="removed"&&Or(lr)},[lr]);const[Gs,sr]=xe.useState(!1);xe.useEffect(()=>{const oi=setTimeout(()=>{sr(!0)},300);return()=>{clearTimeout(oi)}},[]);const Sn=kn(mt);let ln=xe.createElement("div",{className:`${ht}-icon`},Sn);if(Ot==="picture"||Ot==="picture-card"||Ot==="picture-circle")if(Ci==="uploading"||!mt.thumbUrl&&!mt.url){const oi=Qt()(`${ht}-list-item-thumbnail`,{[`${ht}-list-item-file`]:Ci!=="uploading"});ln=xe.createElement("div",{className:oi},Sn)}else{const oi=Wi!=null&&Wi(mt)?xe.createElement("img",{src:mt.thumbUrl||mt.url,alt:mt.name,className:`${ht}-list-item-image`,crossOrigin:mt.crossOrigin}):Sn,Ti=Qt()(`${ht}-list-item-thumbnail`,{[`${ht}-list-item-file`]:Wi&&!Wi(mt)});ln=xe.createElement("a",{className:Ti,onClick:Mo=>Tr(mt,Mo),href:mt.url||mt.thumbUrl,target:"_blank",rel:"noopener noreferrer"},oi)}const Yt=Qt()(`${ht}-list-item`,`${ht}-list-item-${Ci}`),ti=typeof mt.linkProps=="string"?JSON.parse(mt.linkProps):mt.linkProps,oo=Yn?yi((typeof kt=="function"?kt(mt):kt)||xe.createElement(oa,null),()=>Ur(mt),ht,zt.removeFile,!0):null,Oi=Ht&&Ci==="done"?yi((typeof Bi=="function"?Bi(mt):Bi)||xe.createElement(Y,null),()=>Mi(mt),ht,zt.downloadFile):null,Fr=Ot!=="picture-card"&&Ot!=="picture-circle"&&xe.createElement("span",{key:"download-delete",className:Qt()(`${ht}-list-item-actions`,{picture:Ot==="picture"})},Oi,oo),_s=Qt()(`${ht}-list-item-name`),Lo=mt.url?[xe.createElement("a",Object.assign({key:"view",target:"_blank",rel:"noopener noreferrer",className:_s,title:mt.name},ti,{href:mt.url,onClick:oi=>Tr(mt,oi)}),mt.name),Fr]:[xe.createElement("span",{key:"view",className:_s,onClick:oi=>Tr(mt,oi),title:mt.name},mt.name),Fr],or=Xn&&(mt.url||mt.thumbUrl)?xe.createElement("a",{href:mt.url||mt.thumbUrl,target:"_blank",rel:"noopener noreferrer",onClick:oi=>Tr(mt,oi),title:zt.previewFile},typeof $r=="function"?$r(mt):$r||xe.createElement(Dt,null)):null,kr=(Ot==="picture-card"||Ot==="picture-circle")&&Ci!=="uploading"&&xe.createElement("span",{className:`${ht}-list-item-actions`},or,Ci==="done"&&Oi,oo),{getPrefixCls:zn}=xe.useContext(Xe.E_),Ri=zn(),vo=xe.createElement("div",{className:Yt},ln,Lo,kr,Gs&&xe.createElement(Js.ZP,{motionName:`${Ri}-fade`,visible:Ci==="uploading",motionDeadline:2e3},oi=>{let{className:Ti}=oi;const Mo="percent"in mt?xe.createElement(il,Object.assign({},En,{type:"line",percent:mt.percent,"aria-label":mt["aria-label"],"aria-labelledby":mt["aria-labelledby"]})):null;return xe.createElement("div",{className:Qt()(`${ht}-list-item-progress`,Ti)},Mo)})),zo=mt.response&&typeof mt.response=="string"?mt.response:((Ei=mt.error)===null||Ei===void 0?void 0:Ei.statusText)||((Xr=mt.error)===null||Xr===void 0?void 0:Xr.message)||zt.uploadError,Jr=Ci==="error"?xe.createElement(go.Z,{title:zo,getPopupContainer:oi=>oi.parentNode},vo):vo;return xe.createElement("div",{className:Qt()(`${ht}-list-item-container`,vt),style:Bt,ref:He},gi?gi(Jr,mt,on,{download:Mi.bind(null,mt),preview:Tr.bind(null,mt),remove:Ur.bind(null,mt)}):Jr)});const Ee=(De,He)=>{const{listType:ht="text",previewFile:vt=Qr,onPreview:Bt,onDownload:zt,onRemove:Ot,locale:mt,iconRender:on,isImageUrl:En=js,prefixCls:kn,items:yi=[],showPreviewIcon:gi=!0,showRemoveIcon:Wi=!0,showDownloadIcon:Xn=!1,removeIcon:Yn,previewIcon:Ht,downloadIcon:$r,progress:kt={size:[-1,2],showInfo:!1},appendAction:Bi,appendActionVisible:Tr=!0,itemRender:Mi,disabled:Ur}=De,Ei=(0,Hr.Z)(),[Xr,lr]=xe.useState(!1);xe.useEffect(()=>{ht!=="picture"&&ht!=="picture-card"&&ht!=="picture-circle"||(yi||[]).forEach(or=>{typeof document=="undefined"||typeof window=="undefined"||!window.FileReader||!window.File||!(or.originFileObj instanceof File||or.originFileObj)||or.thumbUrl!==void 0||vt&&vt(or.originFileObj).then(kr=>{or.thumbUrl=kr||"",Ei()})})},[ht,yi,vt]),xe.useEffect(()=>{lr(!0)},[]);const Ci=(or,kr)=>{if(Bt)return kr==null||kr.preventDefault(),Bt(or)},Or=or=>{typeof zt=="function"?zt(or):or.url&&window.open(or.url)},Gs=or=>{Ot==null||Ot(or)},sr=or=>{if(on)return on(or,ht);const kr=or.status==="uploading",zn=En&&En(or)?xe.createElement(Wr,null):xe.createElement(ms,null);let Ri=kr?xe.createElement(Ni.Z,null):xe.createElement(_i,null);return ht==="picture"?Ri=kr?xe.createElement(Ni.Z,null):zn:(ht==="picture-card"||ht==="picture-circle")&&(Ri=kr?mt.uploading:zn),Ri},Sn=(or,kr,zn,Ri,vo)=>{const zo={type:"text",size:"small",title:Ri,onClick:Jr=>{var oi,Ti;kr(),xe.isValidElement(or)&&((Ti=(oi=or.props).onClick)===null||Ti===void 0||Ti.call(oi,Jr))},className:`${zn}-list-item-action`};if(vo&&(zo.disabled=Ur),xe.isValidElement(or)){const Jr=(0,Pi.Tm)(or,Object.assign(Object.assign({},or.props),{onClick:()=>{}}));return xe.createElement(Qs.ZP,Object.assign({},zo,{icon:Jr}))}return xe.createElement(Qs.ZP,Object.assign({},zo),xe.createElement("span",null,or))};xe.useImperativeHandle(He,()=>({handlePreview:Ci,handleDownload:Or}));const{getPrefixCls:ln}=xe.useContext(Xe.E_),Yt=ln("upload",kn),ti=ln(),oo=Qt()(`${Yt}-list`,`${Yt}-list-${ht}`),Oi=(0,It.Z)(yi.map(or=>({key:or.uid,file:or})));let _s={motionDeadline:2e3,motionName:`${Yt}-${ht==="picture-card"||ht==="picture-circle"?"animate-inline":"animate"}`,keys:Oi,motionAppear:Xr};const Lo=xe.useMemo(()=>{const or=Object.assign({},(0,Lr.Z)(ti));return delete or.onAppearEnd,delete or.onEnterEnd,delete or.onLeaveEnd,or},[ti]);return ht!=="picture-card"&&ht!=="picture-circle"&&(_s=Object.assign(Object.assign({},Lo),_s)),xe.createElement("div",{className:oo},xe.createElement(Js.V4,Object.assign({},_s,{component:!1}),or=>{let{key:kr,file:zn,className:Ri,style:vo}=or;return xe.createElement(J,{key:kr,locale:mt,prefixCls:Yt,className:Ri,style:vo,file:zn,items:yi,progress:kt,listType:ht,isImgUrl:En,showPreviewIcon:gi,showRemoveIcon:Wi,showDownloadIcon:Xn,removeIcon:Yn,previewIcon:Ht,downloadIcon:$r,iconRender:sr,actionIconRender:Sn,itemRender:Mi,onPreview:Ci,onDownload:Or,onClose:Gs})}),Bi&&xe.createElement(Js.ZP,Object.assign({},_s,{visible:Tr,forceRender:!0}),or=>{let{className:kr,style:zn}=or;return(0,Pi.Tm)(Bi,Ri=>({className:Qt()(Ri.className,kr),style:Object.assign(Object.assign(Object.assign({},zn),{pointerEvents:kr?"none":void 0}),Ri.style)}))}))};var Je=xe.forwardRef(Ee),Ct=function(De,He,ht,vt){function Bt(zt){return zt instanceof ht?zt:new ht(function(Ot){Ot(zt)})}return new(ht||(ht=Promise))(function(zt,Ot){function mt(kn){try{En(vt.next(kn))}catch(yi){Ot(yi)}}function on(kn){try{En(vt.throw(kn))}catch(yi){Ot(yi)}}function En(kn){kn.done?zt(kn.value):Bt(kn.value).then(mt,on)}En((vt=vt.apply(De,He||[])).next())})};const Nt=`__LIST_IGNORE_${Date.now()}__`,pn=(De,He)=>{const{fileList:ht,defaultFileList:vt,onRemove:Bt,showUploadList:zt=!0,listType:Ot="text",onPreview:mt,onDownload:on,onChange:En,onDrop:kn,previewFile:yi,disabled:gi,locale:Wi,iconRender:Xn,isImageUrl:Yn,progress:Ht,prefixCls:$r,className:kt,type:Bi="select",children:Tr,style:Mi,itemRender:Ur,maxCount:Ei,data:Xr={},multiple:lr=!1,hasControlInside:Ci=!0,action:Or="",accept:Gs="",supportServerRender:sr=!0,rootClassName:Sn}=De,ln=xe.useContext(St.Z),Yt=gi!=null?gi:ln,[ti,oo]=(0,Ie.Z)(vt||[],{value:ht,postState:$i=>$i!=null?$i:[]}),[Oi,Fr]=xe.useState("drop"),_s=xe.useRef(null),Lo=xe.useRef(null);xe.useMemo(()=>{const $i=Date.now();(ht||[]).forEach((Ir,es)=>{!Ir.uid&&!Object.isFrozen(Ir)&&(Ir.uid=`__AUTO__${$i}_${es}__`)})},[ht]);const or=($i,Ir,es)=>{let Ps=(0,It.Z)(Ir),Rn=!1;Ei===1?Ps=Ps.slice(-1):Ei&&(Rn=Ps.length>Ei,Ps=Ps.slice(0,Ei)),(0,fn.flushSync)(()=>{oo(Ps)});const Po={file:$i,fileList:Ps};es&&(Po.event=es),(!Rn||$i.status==="removed"||Ps.some(Nr=>Nr.uid===$i.uid))&&(0,fn.flushSync)(()=>{En==null||En(Po)})},kr=($i,Ir)=>Ct(void 0,void 0,void 0,function*(){const{beforeUpload:es,transformFile:Ps}=De;let Rn=$i;if(es){const Po=yield es($i,Ir);if(Po===!1)return!1;if(delete $i[Nt],Po===Nt)return Object.defineProperty($i,Nt,{value:!0,configurable:!0}),!1;typeof Po=="object"&&Po&&(Rn=Po)}return Ps&&(Rn=yield Ps(Rn)),Rn}),zn=$i=>{const Ir=$i.filter(Rn=>!Rn.file[Nt]);if(!Ir.length)return;const es=Ir.map(Rn=>Pn(Rn.file));let Ps=(0,It.Z)(ti);es.forEach(Rn=>{Ps=Xs(Rn,Ps)}),es.forEach((Rn,Po)=>{let Nr=Rn;if(Ir[Po].parsedFile)Rn.status="uploading";else{const{originFileObj:cl}=Rn;let Ca;try{Ca=new File([cl],cl.name,{type:cl.type})}catch(po){Ca=new Blob([cl],{type:cl.type}),Ca.name=cl.name,Ca.lastModifiedDate=new Date,Ca.lastModified=new Date().getTime()}Ca.uid=Rn.uid,Nr=Ca}or(Nr,Ps)})},Ri=($i,Ir,es)=>{try{typeof $i=="string"&&($i=JSON.parse($i))}catch(Po){}if(!Ts(Ir,ti))return;const Ps=Pn(Ir);Ps.status="done",Ps.percent=100,Ps.response=$i,Ps.xhr=es;const Rn=Xs(Ps,ti);or(Ps,Rn)},vo=($i,Ir)=>{if(!Ts(Ir,ti))return;const es=Pn(Ir);es.status="uploading",es.percent=$i.percent;const Ps=Xs(es,ti);or(es,Ps,$i)},zo=($i,Ir,es)=>{if(!Ts(es,ti))return;const Ps=Pn(es);Ps.error=$i,Ps.response=Ir,Ps.status="error";const Rn=Xs(Ps,ti);or(Ps,Rn)},Jr=$i=>{let Ir;Promise.resolve(typeof Bt=="function"?Bt($i):Bt).then(es=>{var Ps;if(es===!1)return;const Rn=Kr($i,ti);Rn&&(Ir=Object.assign(Object.assign({},$i),{status:"removed"}),ti==null||ti.forEach(Po=>{const Nr=Ir.uid!==void 0?"uid":"name";Po[Nr]===Ir[Nr]&&!Object.isFrozen(Po)&&(Po.status="removed")}),(Ps=_s.current)===null||Ps===void 0||Ps.abort(Ir),or(Ir,Rn))})},oi=$i=>{Fr($i.type),$i.type==="drop"&&(kn==null||kn($i))};xe.useImperativeHandle(He,()=>({onBatchStart:zn,onSuccess:Ri,onProgress:vo,onError:zo,fileList:ti,upload:_s.current,nativeElement:Lo.current}));const{getPrefixCls:Ti,direction:Mo,upload:Ws}=xe.useContext(Xe.E_),eo=Ti("upload",$r),Es=Object.assign(Object.assign({onBatchStart:zn,onError:zo,onProgress:vo,onSuccess:Ri},De),{data:Xr,multiple:lr,action:Or,accept:Gs,supportServerRender:sr,prefixCls:eo,disabled:Yt,beforeUpload:kr,onChange:void 0,hasControlInside:Ci});delete Es.className,delete Es.style,(!Tr||Yt)&&delete Es.id;const xs=`${eo}-wrapper`,[Io,Li,Qa]=Ui(eo,xs),[pu]=(0,Tt.Z)("Upload",Bn.Z.Upload),{showRemoveIcon:Ll,showPreviewIcon:$a,showDownloadIcon:wa,removeIcon:Ko,previewIcon:So,downloadIcon:Ks}=typeof zt=="boolean"?{}:zt,Ia=typeof Ll=="undefined"?!Yt:!!Ll,Xa=($i,Ir)=>zt?xe.createElement(Je,{prefixCls:eo,listType:Ot,items:ti,previewFile:yi,onPreview:mt,onDownload:on,onRemove:Jr,showRemoveIcon:Ia,showPreviewIcon:$a,showDownloadIcon:wa,removeIcon:Ko,previewIcon:So,downloadIcon:Ks,iconRender:Xn,locale:Object.assign(Object.assign({},pu),Wi),isImageUrl:Yn,progress:Ht,appendAction:$i,appendActionVisible:Ir,itemRender:Ur,disabled:Yt}):$i,Jl=Qt()(xs,kt,Sn,Li,Qa,Ws==null?void 0:Ws.className,{[`${eo}-rtl`]:Mo==="rtl",[`${eo}-picture-card-wrapper`]:Ot==="picture-card",[`${eo}-picture-circle-wrapper`]:Ot==="picture-circle"}),ua=Object.assign(Object.assign({},Ws==null?void 0:Ws.style),Mi);if(Bi==="drag"){const $i=Qt()(Li,eo,`${eo}-drag`,{[`${eo}-drag-uploading`]:ti.some(Ir=>Ir.status==="uploading"),[`${eo}-drag-hover`]:Oi==="dragover",[`${eo}-disabled`]:Yt,[`${eo}-rtl`]:Mo==="rtl"});return Io(xe.createElement("span",{className:Jl,ref:Lo},xe.createElement("div",{className:$i,style:ua,onDrop:oi,onDragOver:oi,onDragLeave:oi},xe.createElement(Ze,Object.assign({},Es,{ref:_s,className:`${eo}-btn`}),xe.createElement("div",{className:`${eo}-drag-container`},Tr))),Xa()))}const Ea=Qt()(eo,`${eo}-select`,{[`${eo}-disabled`]:Yt}),Mt=xe.createElement("div",{className:Ea,style:Tr?void 0:{display:"none"}},xe.createElement(Ze,Object.assign({},Es,{ref:_s})));return Io(Ot==="picture-card"||Ot==="picture-circle"?xe.createElement("span",{className:Jl,ref:Lo},Xa(Mt,!!Tr)):xe.createElement("span",{className:Jl,ref:Lo},Mt,Xa()))};var zi=xe.forwardRef(pn),as=function(De,He){var ht={};for(var vt in De)Object.prototype.hasOwnProperty.call(De,vt)&&He.indexOf(vt)<0&&(ht[vt]=De[vt]);if(De!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Bt=0,vt=Object.getOwnPropertySymbols(De);Bt<vt.length;Bt++)He.indexOf(vt[Bt])<0&&Object.prototype.propertyIsEnumerable.call(De,vt[Bt])&&(ht[vt[Bt]]=De[vt[Bt]]);return ht},fr=xe.forwardRef((De,He)=>{var{style:ht,height:vt,hasControlInside:Bt=!1}=De,zt=as(De,["style","height","hasControlInside"]);return xe.createElement(zi,Object.assign({ref:He,hasControlInside:Bt},zt,{type:"drag",style:Object.assign(Object.assign({},ht),{height:vt})}))});const _o=zi;_o.Dragger=fr,_o.LIST_IGNORE=Nt;var Co=_o},74623:function(lo,bs,dn){var xe=dn(14224);(function(It,fn){lo.exports=fn()})(this,function(){var gw,yw;"use strict";function It(n){return Array.prototype.concat.apply([],n)}const fn=Object.prototype.toString,it=Object.prototype.hasOwnProperty;function Qt(n){return n===void 0}function yn(n){return n!==void 0}function ii(n){return n==null}function Nn(n){return fn.call(n)==="[object Array]"}function Kt(n){return fn.call(n)==="[object Object]"}function In(n){return fn.call(n)==="[object Number]"}function vn(n){const e=fn.call(n);return e==="[object Function]"||e==="[object AsyncFunction]"||e==="[object GeneratorFunction]"||e==="[object AsyncGeneratorFunction]"||e==="[object Proxy]"}function gn(n){return fn.call(n)==="[object String]"}function Si(n,e){return it.call(n,e)}function Ii(n,e){const t=qs(e);let i;return $t(n,function(r,s){if(t(r,s))return i=r,!1}),i}function Un(n,e){const t=qs(e);let i=[];return $t(n,function(r,s){t(r,s)&&i.push(r)}),i}function $t(n,e){let t,i;if(Qt(n))return;const r=Nn(n)?ci:Is;for(let s in n)if(Si(n,s)&&(t=n[s],i=e(t,r(s)),i===!1))return t}function qt(n,e,t){return $t(n,function(i,r){t=e(t,i,r)}),t}function mr(n,e){return!!qt(n,function(t,i,r){return t&&e(i,r)},!0)}function ss(n,e){return!!Ii(n,e)}function Dr(n,e){let t=[];return $t(n,function(i,r){t.push(e(i,r))}),t}function zs(n){return n&&Object.keys(n)||[]}function pi(n){return zs(n).length}function vs(n){return Dr(n,e=>e)}function uo(n,e,t={}){return e=vr(e),$t(n,function(i){let r=e(i)||"_",s=t[r];s||(s=t[r]=[]),s.push(i)}),t}function cs(n,...e){n=vr(n);let t={};return $t(e,r=>uo(r,n,t)),Dr(t,function(r,s){return r[0]})}function wr(n,e){e=vr(e);let t=[];return $t(n,function(i,r){let s=e(i,r),o={d:s,v:i};for(var l=0;l<t.length;l++){let{d:h}=t[l];if(s<h){t.splice(l,0,o);return}}t.push(o)}),Dr(t,i=>i.v)}function jr(n){return function(e){return mr(n,function(t,i){return e[i]===t})}}function vr(n){return vn(n)?n:e=>e[n]}function qs(n){return vn(n)?n:e=>e===n}function Is(n){return n}function ci(n){return Number(n)}function le(n,e){let t,i,r,s;function o(w){let F=Date.now(),j=w?0:s+e-F;if(j>0)return l(j);n.apply(r,i),h()}function l(w){t=setTimeout(o,w)}function h(){t&&clearTimeout(t),t=s=i=r=void 0}function p(){t&&o(!0),h()}function y(...w){s=Date.now(),i=w,r=this,t||l(e)}return y.flush=p,y.cancel=h,y}function $e(n,e){let t=!1;return function(...i){t||(n(...i),t=!0,setTimeout(()=>{t=!1},e))}}function ze(n,e){return n.bind(e)}function ee(n,...e){return Object.assign(n,...e)}function Ze(n,e){let t={},i=Object(n);return $t(e,function(r){r in i&&(t[r]=n[r])}),t}function Ie(n,e){let t={},i=Object(n);return $t(i,function(r,s){e.indexOf(s)===-1&&(t[s]=r)}),t}var Xe="__fn",St=1e3,Tt=Array.prototype.slice;function Bn(){this._listeners={},this.on("diagram.destroy",1,this._destroy,this)}Bn.prototype.on=function(n,e,t,i){if(n=Nn(n)?n:[n],vn(e)&&(i=t,t=e,e=St),!In(e))throw new Error("priority must be a number");var r=t;i&&(r=ze(t,i),r[Xe]=t[Xe]||t);var s=this;n.forEach(function(o){s._addListener(o,{priority:e,callback:r,next:null})})},Bn.prototype.once=function(n,e,t,i){var r=this;if(vn(e)&&(i=t,t=e,e=St),!In(e))throw new Error("priority must be a number");function s(){s.__isTomb=!0;var o=t.apply(i,arguments);return r.off(n,s),o}s[Xe]=t,this.on(n,e,s)},Bn.prototype.off=function(n,e){n=Nn(n)?n:[n];var t=this;n.forEach(function(i){t._removeListener(i,e)})},Bn.prototype.createEvent=function(n){var e=new Fn;return e.init(n),e},Bn.prototype.fire=function(n,e){var t,i,r,s;if(s=Tt.call(arguments),typeof n=="object"&&(e=n,n=e.type),!n)throw new Error("no event type specified");if(i=this._listeners[n],!!i){e instanceof Fn?t=e:t=this.createEvent(e),s[0]=t;var o=t.type;n!==o&&(t.type=n);try{r=this._invokeListeners(t,s,i)}finally{n!==o&&(t.type=o)}return r===void 0&&t.defaultPrevented&&(r=!1),r}},Bn.prototype.handleError=function(n){return this.fire("error",{error:n})===!1},Bn.prototype._destroy=function(){this._listeners={}},Bn.prototype._invokeListeners=function(n,e,t){for(var i;t&&!n.cancelBubble;)i=this._invokeListener(n,e,t),t=t.next;return i},Bn.prototype._invokeListener=function(n,e,t){var i;if(t.callback.__isTomb)return i;try{i=Qn(t.callback,e),i!==void 0&&(n.returnValue=i,n.stopPropagation()),i===!1&&n.preventDefault()}catch(r){if(!this.handleError(r))throw console.error("unhandled error in event listener",r),r}return i},Bn.prototype._addListener=function(n,e){var t=this._getListeners(n),i;if(!t){this._setListeners(n,e);return}for(;t;){if(t.priority<e.priority){e.next=t,i?i.next=e:this._setListeners(n,e);return}i=t,t=t.next}i.next=e},Bn.prototype._getListeners=function(n){return this._listeners[n]},Bn.prototype._setListeners=function(n,e){this._listeners[n]=e},Bn.prototype._removeListener=function(n,e){var t=this._getListeners(n),i,r,s;if(!e){this._setListeners(n,null);return}for(;t;)i=t.next,s=t.callback,(s===e||s[Xe]===e)&&(r?r.next=i:this._setListeners(n,i)),r=t,t=i};function Fn(){}Fn.prototype.stopPropagation=function(){this.cancelBubble=!0},Fn.prototype.preventDefault=function(){this.defaultPrevented=!0},Fn.prototype.init=function(n){ee(this,n||{})};function Qn(n,e){return n.apply(null,e)}var hi=Object.prototype.toString;function Ki(n){return hi.call(n)==="[object String]"}function Vn(){return Vn=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Vn.apply(this,arguments)}function fs(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];return Vn.apply(void 0,[n].concat(t))}var wo=Object.prototype.toString,Ao=Object.prototype.hasOwnProperty;function en(n){return n===void 0}function fe(n){return wo.call(n)==="[object Array]"}function Fe(n){return wo.call(n)==="[object Object]"}function Ye(n){return wo.call(n)==="[object String]"}function Ve(n,e){return Ao.call(n,e)}function Ge(n,e){var t,i;if(!en(n)){var r=fe(n)?sn:Ut;for(var s in n)if(Ve(n,s)&&(t=n[s],i=e(t,r(s)),i===!1))return t}}function Ut(n){return n}function sn(n){return Number(n)}function _n(n,e){return n.bind(e)}function Hi(){return Hi=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Hi.apply(this,arguments)}function Wn(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];return Hi.apply(void 0,[n].concat(t))}function xi(n,e){var t={},i=Object(n);return Ge(e,function(r){r in i&&(t[r]=n[r])}),t}function ar(){}ar.prototype.get=function(n){return this.$model.properties.get(this,n)},ar.prototype.set=function(n,e){this.$model.properties.set(this,n,e)};function di(n,e){this.model=n,this.properties=e}di.prototype.createType=function(n){var e=this.model,t=this.properties,i=Object.create(ar.prototype);Ge(n.properties,function(o){!o.isMany&&o.default!==void 0&&(i[o.name]=o.default)}),t.defineModel(i,e),t.defineDescriptor(i,n);var r=n.ns.name;function s(o){t.define(this,"$type",{value:r,enumerable:!0}),t.define(this,"$attrs",{value:{}}),t.define(this,"$parent",{writable:!0}),Ge(o,_n(function(l,h){this.set(h,l)},this))}return s.prototype=i,s.hasType=i.$instanceOf=this.model.hasType,t.defineModel(s,e),t.defineDescriptor(s,n),s};var Ui={String:!0,Boolean:!0,Integer:!0,Real:!0,Element:!0},hr={String:function(n){return n},Boolean:function(n){return n==="true"},Integer:function(n){return parseInt(n,10)},Real:function(n){return parseFloat(n)}};function bi(n,e){var t=hr[n];return t?t(e):e}function Gr(n){return!!Ui[n]}function Zi(n){return!!hr[n]}function xr(n,e){var t=n.split(/:/),i,r;if(t.length===1)i=n,r=e;else if(t.length===2)i=t[1],r=t[0];else throw new Error("expected <prefix:localName> or <localName>, got "+n);return n=(r?r+":":"")+i,{name:n,prefix:r,localName:i}}function ms(n){this.ns=n,this.name=n.name,this.allTypes=[],this.allTypesByName={},this.properties=[],this.propertiesByName={}}ms.prototype.build=function(){return xi(this,["ns","name","allTypes","allTypesByName","properties","propertiesByName","bodyProperty","idProperty"])},ms.prototype.addProperty=function(n,e,t){typeof e=="boolean"&&(t=e,e=void 0),this.addNamedProperty(n,t!==!1);var i=this.properties;e!==void 0?i.splice(e,0,n):i.push(n)},ms.prototype.replaceProperty=function(n,e,t){var i=n.ns,r=this.properties,s=this.propertiesByName,o=n.name!==e.name;if(n.isId){if(!e.isId)throw new Error("property <"+e.ns.name+"> must be id property to refine <"+n.ns.name+">");this.setIdProperty(e,!1)}if(n.isBody){if(!e.isBody)throw new Error("property <"+e.ns.name+"> must be body property to refine <"+n.ns.name+">");this.setBodyProperty(e,!1)}var l=r.indexOf(n);if(l===-1)throw new Error("property <"+i.name+"> not found in property list");r.splice(l,1),this.addProperty(e,t?void 0:l,o),s[i.name]=s[i.localName]=e},ms.prototype.redefineProperty=function(n,e,t){var i=n.ns.prefix,r=e.split("#"),s=xr(r[0],i),o=xr(r[1],s.prefix).name,l=this.propertiesByName[o];if(l)this.replaceProperty(l,n,t);else throw new Error("refined property <"+o+"> not found");delete n.redefines},ms.prototype.addNamedProperty=function(n,e){var t=n.ns,i=this.propertiesByName;e&&(this.assertNotDefined(n,t.name),this.assertNotDefined(n,t.localName)),i[t.name]=i[t.localName]=n},ms.prototype.removeNamedProperty=function(n){var e=n.ns,t=this.propertiesByName;delete t[e.name],delete t[e.localName]},ms.prototype.setBodyProperty=function(n,e){if(e&&this.bodyProperty)throw new Error("body property defined multiple times (<"+this.bodyProperty.ns.name+">, <"+n.ns.name+">)");this.bodyProperty=n},ms.prototype.setIdProperty=function(n,e){if(e&&this.idProperty)throw new Error("id property defined multiple times (<"+this.idProperty.ns.name+">, <"+n.ns.name+">)");this.idProperty=n},ms.prototype.assertNotDefined=function(n,e){var t=n.name,i=this.propertiesByName[t];if(i)throw new Error("property <"+t+"> already defined; override of <"+i.definedBy.ns.name+"#"+i.ns.name+"> by <"+n.definedBy.ns.name+"#"+n.ns.name+"> not allowed without redefines")},ms.prototype.hasProperty=function(n){return this.propertiesByName[n]},ms.prototype.addTrait=function(n,e){var t=this.allTypesByName,i=this.allTypes,r=n.name;r in t||(Ge(n.properties,_n(function(s){s=Wn({},s,{name:s.ns.localName,inherited:e}),Object.defineProperty(s,"definedBy",{value:n});var o=s.replaces,l=s.redefines;o||l?this.redefineProperty(s,o||l,o):(s.isBody&&this.setBodyProperty(s),s.isId&&this.setIdProperty(s),this.addProperty(s))},this)),i.push(n),t[r]=n)};function Ni(n,e){this.packageMap={},this.typeMap={},this.packages=[],this.properties=e,Ge(n,_n(this.registerPackage,this))}Ni.prototype.getPackage=function(n){return this.packageMap[n]},Ni.prototype.getPackages=function(){return this.packages},Ni.prototype.registerPackage=function(n){n=Wn({},n);var e=this.packageMap;qr(e,n,"prefix"),qr(e,n,"uri"),Ge(n.types,_n(function(t){this.registerType(t,n)},this)),e[n.uri]=e[n.prefix]=n,this.packages.push(n)},Ni.prototype.registerType=function(n,e){n=Wn({},n,{superClass:(n.superClass||[]).slice(),extends:(n.extends||[]).slice(),properties:(n.properties||[]).slice(),meta:Wn(n.meta||{})});var t=xr(n.name,e.prefix),i=t.name,r={};Ge(n.properties,_n(function(s){var o=xr(s.name,t.prefix),l=o.name;Gr(s.type)||(s.type=xr(s.type,o.prefix).name),Wn(s,{ns:o,name:l}),r[l]=s},this)),Wn(n,{ns:t,name:i,propertiesByName:r}),Ge(n.extends,_n(function(s){var o=this.typeMap[s];o.traits=o.traits||[],o.traits.push(i)},this)),this.definePackage(n,e),this.typeMap[i]=n},Ni.prototype.mapTypes=function(n,e,t){var i=Gr(n.name)?{name:n.name}:this.typeMap[n.name],r=this;function s(l){return o(l,!0)}function o(l,h){var p=xr(l,Gr(l)?"":n.prefix);r.mapTypes(p,e,h)}if(!i)throw new Error("unknown type <"+n.name+">");Ge(i.superClass,t?s:o),e(i,!t),Ge(i.traits,s)},Ni.prototype.getEffectiveDescriptor=function(n){var e=xr(n),t=new ms(e);this.mapTypes(e,function(r,s){t.addTrait(r,s)});var i=t.build();return this.definePackage(i,i.allTypes[i.allTypes.length-1].$pkg),i},Ni.prototype.definePackage=function(n,e){this.properties.define(n,"$pkg",{value:e})};function qr(n,e,t){var i=e[t];if(i in n)throw new Error("package with "+t+" <"+i+"> already defined")}function Di(n){this.model=n}Di.prototype.set=function(n,e,t){if(!Ye(e)||!e.length)throw new TypeError("property name must be a non-empty string");var i=this.model.getPropertyDescriptor(n,e),r=i&&i.name;Sr(t)?i?delete n[r]:delete n.$attrs[e]:i?r in n?n[r]=t:Qi(n,i,t):n.$attrs[e]=t},Di.prototype.get=function(n,e){var t=this.model.getPropertyDescriptor(n,e);if(!t)return n.$attrs[e];var i=t.name;return!n[i]&&t.isMany&&Qi(n,t,[]),n[i]},Di.prototype.define=function(n,e,t){if(!t.writable){var i=t.value;t=Wn({},t,{get:function(){return i}}),delete t.value}Object.defineProperty(n,e,t)},Di.prototype.defineDescriptor=function(n,e){this.define(n,"$descriptor",{value:e})},Di.prototype.defineModel=function(n,e){this.define(n,"$model",{value:e})};function Sr(n){return typeof n=="undefined"}function Qi(n,e,t){Object.defineProperty(n,e.name,{enumerable:!e.isReference,writable:!0,value:t,configurable:!0})}function _i(n){this.properties=new Di(this),this.factory=new di(this,this.properties),this.registry=new Ni(n,this.properties),this.typeCache={}}_i.prototype.create=function(n,e){var t=this.getType(n);if(!t)throw new Error("unknown type <"+n+">");return new t(e)},_i.prototype.getType=function(n){var e=this.typeCache,t=Ye(n)?n:n.ns.name,i=e[t];return i||(n=this.registry.getEffectiveDescriptor(t),i=e[t]=this.factory.createType(n)),i},_i.prototype.createAny=function(n,e,t){var i=xr(n),r={$type:n,$instanceOf:function(o){return o===this.$type}},s={name:n,isGeneric:!0,ns:{prefix:i.prefix,localName:i.localName,uri:e}};return this.properties.defineDescriptor(r,s),this.properties.defineModel(r,this),this.properties.define(r,"$parent",{enumerable:!1,writable:!0}),this.properties.define(r,"$instanceOf",{enumerable:!1,writable:!0}),Ge(t,function(o,l){Fe(o)&&o.value!==void 0?r[o.name]=o.value:r[l]=o}),r},_i.prototype.getPackage=function(n){return this.registry.getPackage(n)},_i.prototype.getPackages=function(){return this.registry.getPackages()},_i.prototype.getElementDescriptor=function(n){return n.$descriptor},_i.prototype.hasType=function(n,e){e===void 0&&(e=n,n=this);var t=n.$model.getElementDescriptor(n);return e in t.allTypesByName},_i.prototype.getPropertyDescriptor=function(n,e){return this.getElementDescriptor(n).propertiesByName[e]},_i.prototype.getTypeDescriptor=function(n){return this.registry.typeMap[n]};var gr=Object.prototype.toString,Zn=Object.prototype.hasOwnProperty;function tr(n){return n===void 0}function bn(n){return gr.call(n)==="[object Array]"}function Wr(n){var e=gr.call(n);return e==="[object Function]"||e==="[object AsyncFunction]"||e==="[object GeneratorFunction]"||e==="[object AsyncGeneratorFunction]"||e==="[object Proxy]"}function Js(n){return gr.call(n)==="[object String]"}function Hr(n,e){return Zn.call(n,e)}function Lr(n,e){e=Xs(e);var t;return Pn(n,function(i,r){if(e(i,r))return t=i,!1}),t}function Pi(n,e){e=Xs(e);var t=bn(n)?-1:void 0;return Pn(n,function(i,r){if(e(i,r))return t=r,!1}),t}function Qs(n,e){var t=[];return Pn(n,function(i,r){e(i,r)&&t.push(i)}),t}function Pn(n,e){var t,i;if(!tr(n)){var r=bn(n)?Kr:Ts;for(var s in n)if(Hr(n,s)&&(t=n[s],i=e(t,r(s)),i===!1))return t}}function Xs(n){return Wr(n)?n:function(e){return e===n}}function Ts(n){return n}function Kr(n){return Number(n)}function hs(){return hs=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},hs.apply(this,arguments)}function os(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];return hs.apply(void 0,[n].concat(t))}var js=String.fromCharCode,dr=Object.prototype.hasOwnProperty,Qr=/&#(\d+);|&#x([0-9a-f]+);|&(\w+);/ig,gs={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'};Object.keys(gs).forEach(function(n){gs[n.toUpperCase()]=gs[n]});function ei(n,e,t,i){return i?dr.call(gs,i)?gs[i]:"&"+i+";":js(e||parseInt(t,16))}function Rs(n){return n.length>3&&n.indexOf("&")!==-1?n.replace(Qr,ei):n}var co="http://www.w3.org/2001/XMLSchema-instance",oa="xsi",na="xsi:type",re="non-whitespace outside of root node";function P(n){return new Error(n)}function V(n){return"missing namespace for prefix <"+n+">"}function Y(n){return{get:n,enumerable:!0}}function te(n){var e={},t;for(t in n)e[t]=n[t];return e}function we(n){return n+"$uri"}function Ce(n){var e={},t,i;for(t in n)i=n[t],e[i]=i,e[we(i)]=t;return e}function We(){return{line:0,column:0}}function Dt(n){throw n}function jt(n){if(!this)return new jt(n);var e=n&&n.proxy,t,i,r,s,o=Dt,l,h,p,y,w=We,F=!1,j=!1,Q=null,he=!1,ye;function Le(ke){ke instanceof Error||(ke=P(ke)),Q=ke,o(ke,w)}function et(ke){l&&(ke instanceof Error||(ke=P(ke)),l(ke,w))}this.on=function(ke,Qe){if(typeof Qe!="function")throw P("required args <name, cb>");switch(ke){case"openTag":i=Qe;break;case"text":t=Qe;break;case"closeTag":r=Qe;break;case"error":o=Qe;break;case"warn":l=Qe;break;case"cdata":s=Qe;break;case"attention":y=Qe;break;case"question":p=Qe;break;case"comment":h=Qe;break;default:throw P("unsupported event: "+ke)}return this},this.ns=function(ke){if(typeof ke=="undefined"&&(ke={}),typeof ke!="object")throw P("required args <nsMap={}>");var Qe={},ft;for(ft in ke)Qe[ft]=ke[ft];return Qe[co]=oa,j=!0,ye=Qe,this},this.parse=function(ke){if(typeof ke!="string")throw P("required args <xml=string>");return Q=null,Me(ke),w=We,he=!1,Q},this.stop=function(){he=!0};function Me(ke){var Qe=j?[]:null,ft=j?Ce(ye):null,bt,st=[],Lt=0,Vt=!1,Zt=!1,wn=0,Kn=0,Mr,qa,Go,Do,ac,lh,Ra,El,Gu,Cc="",Nc=0,du;function Bd(){if(du!==null)return du;var uh,Xc,Rl,ch=j&&ft.xmlns,Zh=j&&F?[]:null,ml=Nc,Ku=Cc,_p=Ku.length,gF,Rd,Zl,Oh,Oa,Qf={},yF={},hh,Ms,Da;e:for(;ml<_p;ml++)if(hh=!1,Ms=Ku.charCodeAt(ml),!(Ms===32||Ms<14&&Ms>8)){for((Ms<65||Ms>122||Ms>90&&Ms<97)&&Ms!==95&&Ms!==58&&(et("illegal first char attribute name"),hh=!0),Da=ml+1;Da<_p;Da++)if(Ms=Ku.charCodeAt(Da),!(Ms>96&&Ms<123||Ms>64&&Ms<91||Ms>47&&Ms<59||Ms===46||Ms===45||Ms===95)){if(Ms===32||Ms<14&&Ms>8){et("missing attribute value"),ml=Da;continue e}if(Ms===61)break;et("illegal attribute name char"),hh=!0}if(Oa=Ku.substring(ml,Da),Oa==="xmlns:xmlns"&&(et("illegal declaration of xmlns"),hh=!0),Ms=Ku.charCodeAt(Da+1),Ms===34)Da=Ku.indexOf('"',ml=Da+2),Da===-1&&(Da=Ku.indexOf("'",ml),Da!==-1&&(et("attribute value quote missmatch"),hh=!0));else if(Ms===39)Da=Ku.indexOf("'",ml=Da+2),Da===-1&&(Da=Ku.indexOf('"',ml),Da!==-1&&(et("attribute value quote missmatch"),hh=!0));else for(et("missing attribute value quotes"),hh=!0,Da=Da+1;Da<_p&&(Ms=Ku.charCodeAt(Da+1),!(Ms===32||Ms<14&&Ms>8));Da++);for(Da===-1&&(et("missing closing quotes"),Da=_p,hh=!0),hh||(Zl=Ku.substring(ml,Da)),ml=Da;Da+1<_p&&(Ms=Ku.charCodeAt(Da+1),!(Ms===32||Ms<14&&Ms>8));Da++)ml===Da&&(et("illegal character after attribute end"),hh=!0);if(ml=Da+1,hh)continue e;if(Oa in yF){et("attribute <"+Oa+"> already defined");continue}if(yF[Oa]=!0,!j){Qf[Oa]=Zl;continue}if(F){if(Rd=Oa==="xmlns"?"xmlns":Oa.charCodeAt(0)===120&&Oa.substr(0,6)==="xmlns:"?Oa.substr(6):null,Rd!==null){if(uh=Rs(Zl),Xc=we(Rd),Oh=ye[uh],!Oh){if(Rd==="xmlns"||Xc in ft&&ft[Xc]!==uh)do Oh="ns"+Lt++;while(typeof ft[Oh]!="undefined");else Oh=Rd;ye[uh]=Oh}ft[Rd]!==Oh&&(gF||(ft=te(ft),gF=!0),ft[Rd]=Oh,Rd==="xmlns"&&(ft[we(Oh)]=uh,ch=Oh),ft[Xc]=uh),Qf[Oa]=Zl;continue}Zh.push(Oa,Zl);continue}if(Ms=Oa.indexOf(":"),Ms===-1){Qf[Oa]=Zl;continue}if(!(Rl=ft[Oa.substring(0,Ms)])){et(V(Oa.substring(0,Ms)));continue}Oa=ch===Rl?Oa.substr(Ms+1):Rl+Oa.substr(Ms),Oa===na&&(Ms=Zl.indexOf(":"),Ms!==-1?(Rl=Zl.substring(0,Ms),Rl=ft[Rl]||Rl,Zl=Rl+Zl.substring(Ms)):Zl=ch+":"+Zl),Qf[Oa]=Zl}if(F)for(ml=0,_p=Zh.length;ml<_p;ml++){if(Oa=Zh[ml++],Zl=Zh[ml],Ms=Oa.indexOf(":"),Ms!==-1){if(!(Rl=ft[Oa.substring(0,Ms)])){et(V(Oa.substring(0,Ms)));continue}Oa=ch===Rl?Oa.substr(Ms+1):Rl+Oa.substr(Ms),Oa===na&&(Ms=Zl.indexOf(":"),Ms!==-1?(Rl=Zl.substring(0,Ms),Rl=ft[Rl]||Rl,Zl=Rl+Zl.substring(Ms)):Zl=ch+":"+Zl)}Qf[Oa]=Zl}return du=Qf}function Zv(){for(var uh=/(\r\n|\r|\n)/g,Xc=0,Rl=0,ch=0,Zh=Kn,ml,Ku;wn>=ch&&(ml=uh.exec(ke),!(!ml||(Zh=ml[0].length+ml.index,Zh>wn)));)Xc+=1,ch=Zh;return wn==-1?(Rl=Zh,Ku=ke.substring(Kn)):Kn===0?Ku=ke.substring(Kn,wn):(Rl=wn-ch,Ku=Kn==-1?ke.substring(wn):ke.substring(wn,Kn+1)),{data:Ku,line:Xc,column:Rl}}for(w=Zv,e&&(Gu=Object.create({},{name:Y(function(){return Ra}),originalName:Y(function(){return El}),attrs:Y(Bd),ns:Y(function(){return ft})}));Kn!==-1;){if(ke.charCodeAt(Kn)===60?wn=Kn:wn=ke.indexOf("<",Kn),wn===-1){if(st.length)return Le("unexpected end of file");if(Kn===0)return Le("missing start tag");Kn<ke.length&&ke.substring(Kn).trim()&&et(re);return}if(Kn!==wn){if(st.length){if(t&&(t(ke.substring(Kn,wn),Rs,w),he))return}else if(ke.substring(Kn,wn).trim()&&(et(re),he))return}if(Do=ke.charCodeAt(wn+1),Do===33){if(Go=ke.charCodeAt(wn+2),Go===91&&ke.substr(wn+3,6)==="CDATA["){if(Kn=ke.indexOf("]]>",wn),Kn===-1)return Le("unclosed cdata");if(s&&(s(ke.substring(wn+9,Kn),w),he))return;Kn+=3;continue}if(Go===45&&ke.charCodeAt(wn+3)===45){if(Kn=ke.indexOf("-->",wn),Kn===-1)return Le("unclosed comment");if(h&&(h(ke.substring(wn+4,Kn),Rs,w),he))return;Kn+=3;continue}}if(Do===63){if(Kn=ke.indexOf("?>",wn),Kn===-1)return Le("unclosed question");if(p&&(p(ke.substring(wn,Kn+2),w),he))return;Kn+=2;continue}for(Mr=wn+1;;Mr++){if(ac=ke.charCodeAt(Mr),isNaN(ac))return Kn=-1,Le("unclosed tag");if(ac===34)Go=ke.indexOf('"',Mr+1),Mr=Go!==-1?Go:Mr;else if(ac===39)Go=ke.indexOf("'",Mr+1),Mr=Go!==-1?Go:Mr;else if(ac===62){Kn=Mr;break}}if(Do===33){if(y&&(y(ke.substring(wn,Kn+1),Rs,w),he))return;Kn+=1;continue}if(du={},Do===47){if(Vt=!1,Zt=!0,!st.length)return Le("missing open tag");if(Mr=Ra=st.pop(),Go=wn+2+Mr.length,ke.substring(wn+2,Go)!==Mr)return Le("closing tag mismatch");for(;Go<Kn;Go++)if(Do=ke.charCodeAt(Go),!(Do===32||Do>8&&Do<14))return Le("close tag")}else{if(ke.charCodeAt(Kn-1)===47?(Mr=Ra=ke.substring(wn+1,Kn-1),Vt=!0,Zt=!0):(Mr=Ra=ke.substring(wn+1,Kn),Vt=!0,Zt=!1),!(Do>96&&Do<123||Do>64&&Do<91||Do===95||Do===58))return Le("illegal first char nodeName");for(Go=1,qa=Mr.length;Go<qa;Go++)if(Do=Mr.charCodeAt(Go),!(Do>96&&Do<123||Do>64&&Do<91||Do>47&&Do<59||Do===45||Do===95||Do==46)){if(Do===32||Do<14&&Do>8){Ra=Mr.substring(0,Go),du=null;break}return Le("invalid nodeName")}Zt||st.push(Ra)}if(j){if(bt=ft,Vt&&(Zt||Qe.push(bt),du===null&&(F=Mr.indexOf("xmlns",Go)!==-1)&&(Nc=Go,Cc=Mr,Bd(),F=!1)),El=Ra,Do=Ra.indexOf(":"),Do!==-1){if(lh=ft[Ra.substring(0,Do)],!lh)return Le("missing namespace on <"+El+">");Ra=Ra.substr(Do+1)}else lh=ft.xmlns;lh&&(Ra=lh+":"+Ra)}if(Vt&&(Nc=Go,Cc=Mr,i&&(e?i(Gu,Rs,Zt,w):i(Ra,Bd,Rs,Zt,w),he)))return;if(Zt){if(r&&(r(e?Gu:Ra,Rs,Vt,w),he))return;j&&(Vt?ft=bt:ft=Qe.pop())}Kn+=1}}}function xn(n){return n.xml&&n.xml.tagAlias==="lowerCase"}var Tn={xsi:"http://www.w3.org/2001/XMLSchema-instance",xml:"http://www.w3.org/XML/1998/namespace"},mi="xsi:type";function vi(n){return n.xml&&n.xml.serialize}function ws(n){return vi(n)===mi}function ho(n){return vi(n)==="property"}function pr(n){return n.charAt(0).toUpperCase()+n.slice(1)}function Fi(n,e){return xn(e)?n.prefix+":"+pr(n.localName):n.name}function rt(n,e){var t=n.name,i=n.localName,r=e.xml&&e.xml.typePrefix;return r&&i.indexOf(r)===0?n.prefix+":"+i.slice(r.length):t}function so(n,e){var t=xr(n),i=e.getPackage(t.prefix);return rt(t,i)}function To(n){return new Error(n)}function Os(n){return n.$descriptor}function ds(n){os(this,n),this.elementsById={},this.references=[],this.warnings=[],this.addReference=function(e){this.references.push(e)},this.addElement=function(e){if(!e)throw To("expected element");var t=this.elementsById,i=Os(e),r=i.idProperty,s;if(r&&(s=e.get(r.name),s)){if(!/^([a-z][\w-.]*:)?[a-z_][\w-.]*$/i.test(s))throw new Error("illegal ID <"+s+">");if(t[s])throw To("duplicate ID <"+s+">");t[s]=e}},this.addWarning=function(e){this.warnings.push(e)}}function Oo(){}Oo.prototype.handleEnd=function(){},Oo.prototype.handleText=function(){},Oo.prototype.handleNode=function(){};function nr(){}nr.prototype=Object.create(Oo.prototype),nr.prototype.handleNode=function(){return this};function wi(){}wi.prototype=Object.create(Oo.prototype),wi.prototype.handleText=function(n){this.body=(this.body||"")+n};function Mn(n,e){this.property=n,this.context=e}Mn.prototype=Object.create(wi.prototype),Mn.prototype.handleNode=function(n){if(this.element)throw To("expected no sub nodes");return this.element=this.createReference(n),this},Mn.prototype.handleEnd=function(){this.element.id=this.body},Mn.prototype.createReference=function(n){return{property:this.property.ns.name,id:""}};function ks(n,e){this.element=e,this.propertyDesc=n}ks.prototype=Object.create(wi.prototype),ks.prototype.handleEnd=function(){var n=this.body||"",e=this.element,t=this.propertyDesc;n=bi(t.type,n),t.isMany?e.get(t.name).push(n):e.set(t.name,n)};function jo(){}jo.prototype=Object.create(wi.prototype),jo.prototype.handleNode=function(n){var e=this,t=this.element;return t?e=this.handleChild(n):(t=this.element=this.createElement(n),this.context.addElement(t)),e};function Zr(n,e,t){this.model=n,this.type=n.getType(e),this.context=t}Zr.prototype=Object.create(jo.prototype),Zr.prototype.addReference=function(n){this.context.addReference(n)},Zr.prototype.handleText=function(n){var e=this.element,t=Os(e),i=t.bodyProperty;if(!i)throw To("unexpected body text <"+n+">");wi.prototype.handleText.call(this,n)},Zr.prototype.handleEnd=function(){var n=this.body,e=this.element,t=Os(e),i=t.bodyProperty;i&&n!==void 0&&(n=bi(i.type,n),e.set(i.name,n))},Zr.prototype.createElement=function(n){var e=n.attributes,t=this.type,i=Os(t),r=this.context,s=new t({}),o=this.model,l;return Pn(e,function(h,p){var y=i.propertiesByName[p],w;y&&y.isReference?y.isMany?(w=h.split(" "),Pn(w,function(F){r.addReference({element:s,property:y.ns.name,id:F})})):r.addReference({element:s,property:y.ns.name,id:h}):(y?h=bi(y.type,h):p!=="xmlns"&&(l=xr(p,i.ns.prefix),o.getPackage(l.prefix)&&r.addWarning({message:"unknown attribute <"+p+">",element:s,property:p,value:h})),s.set(p,h))}),s},Zr.prototype.getPropertyForNode=function(n){var e=n.name,t=xr(e),i=this.type,r=this.model,s=Os(i),o=t.name,l=s.propertiesByName[o],h,p;if(l&&!l.isAttr)return ws(l)&&(h=n.attributes[mi],h)?(h=so(h,r),p=r.getType(h),os({},l,{effectiveType:Os(p).name})):l;var y=r.getPackage(t.prefix);if(y){if(h=Fi(t,y),p=r.getType(h),l=Lr(s.properties,function(w){return!w.isVirtual&&!w.isReference&&!w.isAttribute&&p.hasType(w.type)}),l)return os({},l,{effectiveType:Os(p).name})}else if(l=Lr(s.properties,function(w){return!w.isReference&&!w.isAttribute&&w.type==="Element"}),l)return l;throw To("unrecognized element <"+t.name+">")},Zr.prototype.toString=function(){return"ElementDescriptor["+Os(this.type).name+"]"},Zr.prototype.valueHandler=function(n,e){return new ks(n,e)},Zr.prototype.referenceHandler=function(n){return new Mn(n,this.context)},Zr.prototype.handler=function(n){return n==="Element"?new ka(this.model,n,this.context):new Zr(this.model,n,this.context)},Zr.prototype.handleChild=function(n){var e,t,i,r;if(e=this.getPropertyForNode(n),i=this.element,t=e.effectiveType||e.type,Zi(t))return this.valueHandler(e,i);e.isReference?r=this.referenceHandler(e).handleNode(n):r=this.handler(t).handleNode(n);var s=r.element;return s!==void 0&&(e.isMany?i.get(e.name).push(s):i.set(e.name,s),e.isReference?(os(s,{element:i}),this.context.addReference(s)):s.$parent=i),r};function aa(n,e,t){Zr.call(this,n,e,t)}aa.prototype=Object.create(Zr.prototype),aa.prototype.createElement=function(n){var e=n.name,t=xr(e),i=this.model,r=this.type,s=i.getPackage(t.prefix),o=s&&Fi(t,s)||e;if(!r.hasType(o))throw To("unexpected element <"+n.originalName+">");return Zr.prototype.createElement.call(this,n)};function ka(n,e,t){this.model=n,this.context=t}ka.prototype=Object.create(jo.prototype),ka.prototype.createElement=function(n){var e=n.name,t=xr(e),i=t.prefix,r=n.ns[i+"$uri"],s=n.attributes;return this.model.createAny(e,r,s)},ka.prototype.handleChild=function(n){var e=new ka(this.model,"Element",this.context).handleNode(n),t=this.element,i=e.element,r;return i!==void 0&&(r=t.$children=t.$children||[],r.push(i),i.$parent=t),e},ka.prototype.handleEnd=function(){this.body&&(this.element.$body=this.body)};function fa(n){n instanceof _i&&(n={model:n}),os(this,{lax:!1},n)}fa.prototype.fromXML=function(n,e,t){var i=e.rootHandler;e instanceof Zr?(i=e,e={}):typeof e=="string"?(i=this.handler(e),e={}):typeof i=="string"&&(i=this.handler(i));var r=this.model,s=this.lax,o=new ds(os({},e,{rootHandler:i})),l=new jt({proxy:!0}),h=ps();i.context=o,h.push(i);function p(Qe,ft,bt){var st=ft(),Lt=st.line,Vt=st.column,Zt=st.data;Zt.charAt(0)==="<"&&Zt.indexOf(" ")!==-1&&(Zt=Zt.slice(0,Zt.indexOf(" "))+">");var wn="unparsable content "+(Zt?Zt+" ":"")+`detected
	line: `+Lt+`
	column: `+Vt+`
	nested error: `+Qe.message;if(bt)return o.addWarning({message:wn,error:Qe}),!0;throw To(wn)}function y(Qe,ft){return p(Qe,ft,!0)}function w(){var Qe=o.elementsById,ft=o.references,bt,st;for(bt=0;st=ft[bt];bt++){var Lt=st.element,Vt=Qe[st.id],Zt=Os(Lt).propertiesByName[st.property];if(Vt||o.addWarning({message:"unresolved reference <"+st.id+">",element:st.element,property:st.property,value:st.id}),Zt.isMany){var wn=Lt.get(Zt.name),Kn=wn.indexOf(st);Kn===-1&&(Kn=wn.length),Vt?wn[Kn]=Vt:wn.splice(Kn,1)}else Lt.set(Zt.name,Vt)}}function F(){h.pop().handleEnd()}var j=/^<\?xml /i,Q=/ encoding="([^"]+)"/i,he=/^utf-8$/i;function ye(Qe){if(j.test(Qe)){var ft=Q.exec(Qe),bt=ft&&ft[1];!bt||he.test(bt)||o.addWarning({message:"unsupported document encoding <"+bt+">, falling back to UTF-8"})}}function Le(Qe,ft){var bt=h.peek();try{h.push(bt.handleNode(Qe))}catch(st){p(st,ft,s)&&h.push(new nr)}}function et(Qe,ft){try{h.peek().handleText(Qe)}catch(bt){y(bt,ft)}}function Me(Qe,ft){Qe.trim()&&et(Qe,ft)}var ke=r.getPackages().reduce(function(Qe,ft){return Qe[ft.uri]=ft.prefix,Qe},{"http://www.w3.org/XML/1998/namespace":"xml"});return l.ns(ke).on("openTag",function(Qe,ft,bt,st){var Lt=Qe.attrs||{},Vt=Object.keys(Lt).reduce(function(wn,Kn){var Mr=ft(Lt[Kn]);return wn[Kn]=Mr,wn},{}),Zt={name:Qe.name,originalName:Qe.originalName,attributes:Vt,ns:Qe.ns};Le(Zt,st)}).on("question",ye).on("closeTag",F).on("cdata",et).on("text",function(Qe,ft,bt){Me(ft(Qe),bt)}).on("error",p).on("warn",y),new Promise(function(Qe,ft){var bt;try{l.parse(n),w()}catch(wn){bt=wn}var st=i.element;!bt&&!st&&(bt=To("failed to parse document as <"+i.type.$descriptor.name+">"));var Lt=o.warnings,Vt=o.references,Zt=o.elementsById;return bt?(bt.warnings=Lt,ft(bt)):Qe({rootElement:st,elementsById:Zt,references:Vt,warnings:Lt})})},fa.prototype.handler=function(n){return new aa(this.model,n)};function ps(){var n=[];return Object.defineProperty(n,"peek",{value:function(){return this[this.length-1]}}),n}var no=`<?xml version="1.0" encoding="UTF-8"?>
`,Eo=/<|>|'|"|&|\n\r|\n/g,go=/<|>|&/g;function Xo(n){var e={},t={},i={},r=[],s=[];this.byUri=function(o){return t[o]||n&&n.byUri(o)},this.add=function(o,l){t[o.uri]=o,l?r.push(o):s.push(o),this.mapPrefix(o.prefix,o.uri)},this.uriByPrefix=function(o){return e[o||"xmlns"]},this.mapPrefix=function(o,l){e[o||"xmlns"]=l},this.getNSKey=function(o){return o.prefix!==void 0?o.uri+"|"+o.prefix:o.uri},this.logUsed=function(o){var l=o.uri,h=this.getNSKey(o);i[h]=this.byUri(l),n&&n.logUsed(o)},this.getUsed=function(o){function l(y){var w=h.getNSKey(y);return i[w]}var h=this,p=[].concat(r,s);return p.filter(l)}}function Ae(n){return n.charAt(0).toLowerCase()+n.slice(1)}function Z(n,e){return xn(e)?Ae(n):n}function pe(n,e){n.super_=e,n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}})}function Ne(n){return Js(n)?n:(n.prefix?n.prefix+":":"")+n.localName}function Be(n){return n.getUsed().filter(function(e){return e.prefix!=="xml"}).map(function(e){var t="xmlns"+(e.prefix?":"+e.prefix:"");return{name:t,value:e.uri}})}function ut(n,e){return e.isGeneric?os({localName:e.ns.localName},n):os({localName:Z(e.ns.localName,e.$pkg)},n)}function Ft(n,e){return os({localName:e.ns.localName},n)}function Xt(n){var e=n.$descriptor;return Qs(e.properties,function(t){var i=t.name;if(t.isVirtual||!Hr(n,i))return!1;var r=n[i];return r===t.default||r===null?!1:t.isMany?r.length:!0})}var mn={"\n":"#10","\n\r":"#10",'"':"#34","'":"#39","<":"#60",">":"#62","&":"#38"},ri={"<":"lt",">":"gt","&":"amp"};function rr(n,e,t){return n=Js(n)?n:""+n,n.replace(e,function(i){return"&"+t[i]+";"})}function Xi(n){return rr(n,Eo,mn)}function Vo(n){return rr(n,go,ri)}function yo(n){return Qs(n,function(e){return e.isAttr})}function Vs(n){return Qs(n,function(e){return!e.isAttr})}function ko(n){this.tagName=n}ko.prototype.build=function(n){return this.element=n,this},ko.prototype.serializeTo=function(n){n.appendIndent().append("<"+this.tagName+">"+this.element.id+"</"+this.tagName+">").appendNewLine()};function Uo(){}Uo.prototype.serializeValue=Uo.prototype.serializeTo=function(n){n.append(this.escape?Vo(this.value):this.value)},Uo.prototype.build=function(n,e){return this.value=e,n.type==="String"&&e.search(go)!==-1&&(this.escape=!0),this};function la(n){this.tagName=n}pe(la,Uo),la.prototype.serializeTo=function(n){n.appendIndent().append("<"+this.tagName+">"),this.serializeValue(n),n.append("</"+this.tagName+">").appendNewLine()};function Ys(n,e){this.body=[],this.attrs=[],this.parent=n,this.propertyDescriptor=e}Ys.prototype.build=function(n){this.element=n;var e=n.$descriptor,t=this.propertyDescriptor,i,r,s=e.isGeneric;return s?i=this.parseGeneric(n):i=this.parseNsAttributes(n),t?this.ns=this.nsPropertyTagName(t):this.ns=this.nsTagName(e),this.tagName=this.addTagName(this.ns),s||(r=Xt(n),this.parseAttributes(yo(r)),this.parseContainments(Vs(r))),this.parseGenericAttributes(n,i),this},Ys.prototype.nsTagName=function(n){var e=this.logNamespaceUsed(n.ns);return ut(e,n)},Ys.prototype.nsPropertyTagName=function(n){var e=this.logNamespaceUsed(n.ns);return Ft(e,n)},Ys.prototype.isLocalNs=function(n){return n.uri===this.ns.uri},Ys.prototype.nsAttributeName=function(n){var e;if(Js(n)?e=xr(n):e=n.ns,n.inherited)return{localName:e.localName};var t=this.logNamespaceUsed(e);return this.getNamespaces().logUsed(t),this.isLocalNs(t)?{localName:e.localName}:os({localName:e.localName},t)},Ys.prototype.parseGeneric=function(n){var e=this,t=this.body,i=[];return Pn(n,function(r,s){var o;s==="$body"?t.push(new Uo().build({type:"String"},r)):s==="$children"?Pn(r,function(l){t.push(new Ys(e).build(l))}):s.indexOf("$")!==0&&(o=e.parseNsAttribute(n,s,r),o&&i.push({name:s,value:r}))}),i},Ys.prototype.parseNsAttribute=function(n,e,t){var i=n.$model,r=xr(e),s;if(r.prefix==="xmlns"&&(s={prefix:r.localName,uri:t}),!r.prefix&&r.localName==="xmlns"&&(s={uri:t}),!s)return{name:e,value:t};if(i&&i.getPackage(t))this.logNamespace(s,!0,!0);else{var o=this.logNamespaceUsed(s,!0);this.getNamespaces().logUsed(o)}},Ys.prototype.parseNsAttributes=function(n,e){var t=this,i=n.$attrs,r=[];return Pn(i,function(s,o){var l=t.parseNsAttribute(n,o,s);l&&r.push(l)}),r},Ys.prototype.parseGenericAttributes=function(n,e){var t=this;Pn(e,function(i){if(i.name!==mi)try{t.addAttribute(t.nsAttributeName(i.name),i.value)}catch(r){console.warn("missing namespace information for ",i.name,"=",i.value,"on",n,r)}})},Ys.prototype.parseContainments=function(n){var e=this,t=this.body,i=this.element;Pn(n,function(r){var s=i.get(r.name),o=r.isReference,l=r.isMany;if(l||(s=[s]),r.isBody)t.push(new Uo().build(r,s[0]));else if(Zi(r.type))Pn(s,function(y){t.push(new la(e.addTagName(e.nsPropertyTagName(r))).build(r,y))});else if(o)Pn(s,function(y){t.push(new ko(e.addTagName(e.nsPropertyTagName(r))).build(y))});else{var h=ws(r),p=ho(r);Pn(s,function(y){var w;h?w=new Ai(e,r):p?w=new Ys(e,r):w=new Ys(e),t.push(w.build(y))})}})},Ys.prototype.getNamespaces=function(n){var e=this.namespaces,t=this.parent,i;return e||(i=t&&t.getNamespaces(),n||!i?this.namespaces=e=new Xo(i):e=i),e},Ys.prototype.logNamespace=function(n,e,t){var i=this.getNamespaces(t),r=n.uri,s=n.prefix,o=i.byUri(r);return(!o||t)&&i.add(n,e),i.mapPrefix(s,r),n},Ys.prototype.logNamespaceUsed=function(n,e){var t=this.element,i=t.$model,r=this.getNamespaces(e),s=n.prefix,o=n.uri,l,h,p;if(!s&&!o)return{localName:n.localName};if(p=Tn[s]||i&&(i.getPackage(s)||{}).uri,o=o||p||r.uriByPrefix(s),!o)throw new Error("no namespace uri given for prefix <"+s+">");if(n=r.byUri(o),!n){for(l=s,h=1;r.uriByPrefix(l);)l=s+"_"+h++;n=this.logNamespace({prefix:l,uri:o},p===o)}return s&&r.mapPrefix(s,o),n},Ys.prototype.parseAttributes=function(n){var e=this,t=this.element;Pn(n,function(i){var r=t.get(i.name);if(i.isReference)if(!i.isMany)r=r.id;else{var s=[];Pn(r,function(o){s.push(o.id)}),r=s.join(" ")}e.addAttribute(e.nsAttributeName(i),r)})},Ys.prototype.addTagName=function(n){var e=this.logNamespaceUsed(n);return this.getNamespaces().logUsed(e),Ne(n)},Ys.prototype.addAttribute=function(n,e){var t=this.attrs;Js(e)&&(e=Xi(e));var i=Pi(t,function(s){return s.name.localName===n.localName&&s.name.uri===n.uri&&s.name.prefix===n.prefix}),r={name:n,value:e};i!==-1?t.splice(i,1,r):t.push(r)},Ys.prototype.serializeAttributes=function(n){var e=this.attrs,t=this.namespaces;t&&(e=Be(t).concat(e)),Pn(e,function(i){n.append(" ").append(Ne(i.name)).append('="').append(i.value).append('"')})},Ys.prototype.serializeTo=function(n){var e=this.body[0],t=e&&e.constructor!==Uo;n.appendIndent().append("<"+this.tagName),this.serializeAttributes(n),n.append(e?">":" />"),e&&(t&&n.appendNewLine().indent(),Pn(this.body,function(i){i.serializeTo(n)}),t&&n.unindent().appendIndent(),n.append("</"+this.tagName+">")),n.appendNewLine()};function Ai(n,e){Ys.call(this,n,e)}pe(Ai,Ys),Ai.prototype.parseNsAttributes=function(n){var e=Ys.prototype.parseNsAttributes.call(this,n),t=n.$descriptor;if(t.name===this.propertyDescriptor.type)return e;var i=this.typeNs=this.nsTagName(t);this.getNamespaces().logUsed(this.typeNs);var r=n.$model.getPackage(i.uri),s=r.xml&&r.xml.typePrefix||"";return this.addAttribute(this.nsAttributeName(mi),(i.prefix?i.prefix+":":"")+s+t.ns.localName),e},Ai.prototype.isLocalNs=function(n){return n.uri===(this.typeNs||this.ns).uri};function ll(){this.value="",this.write=function(n){this.value+=n}}function si(n,e){var t=[""];this.append=function(i){return n.write(i),this},this.appendNewLine=function(){return e&&n.write(`
`),this},this.appendIndent=function(){return e&&n.write(t.join("  ")),this},this.indent=function(){return t.push(""),this},this.unindent=function(){return t.pop(),this}}function Zo(n){n=os({format:!1,preamble:!0},n||{});function e(t,i){var r=i||new ll,s=new si(r,n.format);if(n.preamble&&s.append(no),new Ys().build(t).serializeTo(s),!i)return r.value}return{toXML:e}}function ma(n,e){_i.call(this,n,e)}ma.prototype=Object.create(_i.prototype),ma.prototype.fromXML=function(n,e,t){Ki(e)||(t=e,e="dmn:Definitions");var i=new fa(fs({model:this,lax:!0},t)),r=i.handler(e);return i.fromXML(n,r)},ma.prototype.toXML=function(n,e){var t=new Zo(e);return new Promise(function(i,r){try{var s=t.toXML(n);return i({xml:s})}catch(o){return r(o)}})};var ul="DC",ia="dc",Ro="http://www.omg.org/spec/DMN/20180521/DC/",La=[{name:"Dimension",properties:[{name:"width",isAttr:!0,type:"Real"},{name:"height",isAttr:!0,type:"Real"}]},{name:"Bounds",properties:[{name:"height",isAttr:!0,type:"Real"},{name:"width",isAttr:!0,type:"Real"},{name:"x",isAttr:!0,type:"Real"},{name:"y",isAttr:!0,type:"Real"}]},{name:"Point",properties:[{name:"x",isAttr:!0,type:"Real"},{name:"y",isAttr:!0,type:"Real"}]},{name:"Color",properties:[{name:"red",type:"UML_Standard_Profile.mdzip:eee_1045467100323_917313_65"},{name:"green",type:"UML_Standard_Profile.mdzip:eee_1045467100323_917313_65"},{name:"blue",type:"UML_Standard_Profile.mdzip:eee_1045467100323_917313_65"}]}],Ar=[],il=[{name:"AlignmentKind",literalValues:[{name:"start"},{name:"center"},{name:"end"}]}],Jo={name:ul,prefix:ia,uri:Ro,types:La,associations:Ar,enumerations:il},J="DI",Ee="di",je="http://www.omg.org/spec/DMN/20180521/DI/",Je=[{name:"DiagramElement",isAbstract:!0,properties:[{name:"extension",type:"Extension"},{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"style",isReference:!0,type:"Style",xml:{serialize:"property"}},{name:"sharedStyle",isReference:!0,isVirtual:!0,type:"Style"}]},{name:"Diagram",superClass:["DiagramElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"documentation",isAttr:!0,type:"String"},{name:"resolution",isAttr:!0,type:"Real"}]},{name:"Shape",isAbstract:!0,properties:[{name:"bounds",type:"dc:Bounds"}],superClass:["DiagramElement"]},{name:"Edge",isAbstract:!0,properties:[{name:"waypoint",type:"dc:Point",isMany:!0,xml:{serialize:"property"}}],superClass:["DiagramElement"]},{name:"Style",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"}]},{name:"Extension",properties:[{name:"values",isMany:!0,type:"Element"}]}],Ct=[],Nt=[],pn={tagAlias:"lowerCase"},ai={name:J,prefix:Ee,uri:je,types:Je,associations:Ct,enumerations:Nt,xml:pn},zi="DMN",as="dmn",Pr="https://www.omg.org/spec/DMN/20191111/MODEL/",fr=[{name:"AuthorityRequirement",superClass:["DMNElement"],properties:[{name:"requiredAuthority",type:"DMNElementReference",xml:{serialize:"property"}},{name:"requiredDecision",type:"DMNElementReference",xml:{serialize:"property"}},{name:"requiredInput",type:"DMNElementReference",xml:{serialize:"property"}}]},{name:"ItemDefinition",superClass:["NamedElement"],properties:[{name:"typeRef",type:"String"},{name:"allowedValues",type:"UnaryTests",xml:{serialize:"property"}},{name:"typeLanguage",type:"String",isAttr:!0},{name:"itemComponent",type:"ItemDefinition",isMany:!0,xml:{serialize:"property"}},{name:"functionItem",type:"FunctionItem"},{name:"isCollection",isAttr:!0,type:"Boolean"}]},{name:"Definitions",superClass:["NamedElement"],properties:[{name:"import",type:"Import",isMany:!0},{name:"itemDefinition",type:"ItemDefinition",isMany:!0},{name:"drgElement",type:"DRGElement",isMany:!0},{name:"artifact",type:"Artifact",isMany:!0},{name:"elementCollection",type:"ElementCollection",isMany:!0},{name:"businessContextElement",type:"BusinessContextElement",isMany:!0},{name:"namespace",type:"String",isAttr:!0},{name:"expressionLanguage",type:"String",isAttr:!0},{name:"typeLanguage",type:"String",isAttr:!0},{name:"exporter",isAttr:!0,type:"String"},{name:"exporterVersion",isAttr:!0,type:"String"},{name:"dmnDI",type:"dmndi:DMNDI"}]},{name:"KnowledgeSource",superClass:["DRGElement"],properties:[{name:"authorityRequirement",type:"AuthorityRequirement",isMany:!0},{name:"type",type:"String"},{name:"owner",type:"DMNElementReference",xml:{serialize:"property"}},{name:"locationURI",type:"String",isAttr:!0}]},{name:"DecisionRule",superClass:["DMNElement"],properties:[{name:"inputEntry",type:"UnaryTests",isMany:!0,xml:{serialize:"property"}},{name:"outputEntry",type:"LiteralExpression",isMany:!0,xml:{serialize:"property"}},{name:"annotationEntry",type:"RuleAnnotation",isMany:!0,xml:{serialize:"property"}}]},{name:"Expression",isAbstract:!0,superClass:["DMNElement"],properties:[{name:"typeRef",isAttr:!0,type:"String"}]},{name:"InformationItem",superClass:["NamedElement"],properties:[{name:"typeRef",isAttr:!0,type:"String"}]},{name:"Decision",superClass:["DRGElement"],properties:[{name:"question",type:"String",xml:{serialize:"property"}},{name:"allowedAnswers",type:"String",xml:{serialize:"property"}},{name:"variable",type:"InformationItem",xml:{serialize:"property"}},{name:"informationRequirement",type:"InformationRequirement",isMany:!0},{name:"knowledgeRequirement",type:"KnowledgeRequirement",isMany:!0},{name:"authorityRequirement",type:"AuthorityRequirement",isMany:!0},{name:"supportedObjective",isMany:!0,type:"DMNElementReference",xml:{serialize:"property"}},{name:"impactedPerformanceIndicator",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}},{name:"decisionMaker",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}},{name:"decisionOwner",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}},{name:"usingProcess",isMany:!0,type:"DMNElementReference",xml:{serialize:"property"}},{name:"usingTask",isMany:!0,type:"DMNElementReference",xml:{serialize:"property"}},{name:"decisionLogic",type:"Expression"}]},{name:"Invocation",superClass:["Expression"],properties:[{name:"calledFunction",type:"Expression"},{name:"binding",type:"Binding",isMany:!0}]},{name:"OrganisationalUnit",superClass:["BusinessContextElement"],properties:[{name:"decisionMade",type:"Decision",isReference:!0,isMany:!0},{name:"decisionOwned",type:"Decision",isReference:!0,isMany:!0}]},{name:"Import",superClass:["NamedElement"],properties:[{name:"importType",type:"String",isAttr:!0},{name:"locationURI",type:"String",isAttr:!0},{name:"namespace",type:"String",isAttr:!0}]},{name:"InformationRequirement",superClass:["DMNElement"],properties:[{name:"requiredDecision",type:"DMNElementReference",xml:{serialize:"property"}},{name:"requiredInput",type:"DMNElementReference",xml:{serialize:"property"}}]},{name:"ElementCollection",superClass:["NamedElement"],properties:[{name:"drgElement",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}}]},{name:"DRGElement",isAbstract:!0,superClass:["NamedElement"],properties:[]},{name:"InputData",superClass:["DRGElement"],properties:[{name:"variable",type:"InformationItem",xml:{serialize:"property"}}]},{name:"DMNElement",isAbstract:!0,properties:[{name:"description",type:"String"},{name:"extensionElements",type:"ExtensionElements"},{name:"id",type:"String",isAttr:!0,isId:!0},{name:"extensionAttribute",type:"ExtensionAttribute",isMany:!0},{name:"label",isAttr:!0,type:"String"}]},{name:"InputClause",superClass:["DMNElement"],properties:[{name:"inputExpression",type:"LiteralExpression",xml:{serialize:"property"}},{name:"inputValues",type:"UnaryTests",xml:{serialize:"property"}}]},{name:"DecisionTable",superClass:["Expression"],properties:[{name:"input",type:"InputClause",isMany:!0,xml:{serialize:"property"}},{name:"output",type:"OutputClause",isMany:!0,xml:{serialize:"property"}},{name:"annotation",type:"RuleAnnotationClause",isMany:!0,xml:{serialize:"property"}},{name:"rule",type:"DecisionRule",isMany:!0,xml:{serialize:"property"}},{name:"hitPolicy",type:"HitPolicy",isAttr:!0,default:"UNIQUE"},{name:"aggregation",type:"BuiltinAggregator",isAttr:!0},{name:"preferredOrientation",type:"DecisionTableOrientation",isAttr:!0},{name:"outputLabel",isAttr:!0,type:"String"}]},{name:"LiteralExpression",superClass:["Expression"],properties:[{name:"expressionLanguage",type:"String",isAttr:!0},{name:"text",type:"String"},{name:"importedValues",type:"ImportedValues"}]},{name:"Binding",properties:[{name:"parameter",type:"InformationItem",xml:{serialize:"property"}},{name:"bindingFormula",type:"Expression"}]},{name:"KnowledgeRequirement",superClass:["DMNElement"],properties:[{name:"requiredKnowledge",type:"DMNElementReference",xml:{serialize:"property"}}]},{name:"BusinessKnowledgeModel",superClass:["Invocable"],properties:[{name:"encapsulatedLogic",type:"FunctionDefinition",xml:{serialize:"property"}},{name:"knowledgeRequirement",type:"KnowledgeRequirement",isMany:!0},{name:"authorityRequirement",type:"AuthorityRequirement",isMany:!0}]},{name:"BusinessContextElement",isAbstract:!0,superClass:["NamedElement"],properties:[{name:"URI",type:"String",isAttr:!0}]},{name:"PerformanceIndicator",superClass:["BusinessContextElement"],properties:[{name:"impactingDecision",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}}]},{name:"FunctionDefinition",superClass:["Expression"],properties:[{name:"formalParameter",type:"InformationItem",isMany:!0,xml:{serialize:"property"}},{name:"body",type:"Expression"},{name:"kind",type:"FunctionKind",isAttr:!0}]},{name:"Context",superClass:["Expression"],properties:[{name:"contextEntry",type:"ContextEntry",isMany:!0}]},{name:"ContextEntry",superClass:["DMNElement"],properties:[{name:"variable",type:"InformationItem",xml:{serialize:"property"}},{name:"value",type:"Expression"}]},{name:"List",superClass:["Expression"],properties:[{name:"elements",isMany:!0,type:"Expression"}]},{name:"Relation",superClass:["Expression"],properties:[{name:"column",type:"InformationItem",isMany:!0,xml:{serialize:"property"}},{name:"row",type:"List",isMany:!0,xml:{serialize:"property"}}]},{name:"OutputClause",superClass:["DMNElement"],properties:[{name:"outputValues",type:"UnaryTests",xml:{serialize:"property"}},{name:"defaultOutputEntry",type:"LiteralExpression",xml:{serialize:"property"}},{name:"name",isAttr:!0,type:"String"},{name:"typeRef",isAttr:!0,type:"String"}]},{name:"UnaryTests",superClass:["Expression"],properties:[{name:"text",type:"String"},{name:"expressionLanguage",type:"String",isAttr:!0}]},{name:"NamedElement",isAbstract:!0,superClass:["DMNElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"ImportedValues",superClass:["Import"],properties:[{name:"importedElement",type:"String"},{name:"expressionLanguage",type:"String",isAttr:!0}]},{name:"DecisionService",superClass:["Invocable"],properties:[{name:"outputDecision",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}},{name:"encapsulatedDecision",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}},{name:"inputDecision",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}},{name:"inputData",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}}]},{name:"ExtensionElements",properties:[{name:"values",type:"Element",isMany:!0}]},{name:"ExtensionAttribute",properties:[{name:"value",type:"Element"},{name:"valueRef",type:"Element",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Element",isAbstract:!0,properties:[{name:"extensionAttribute",type:"ExtensionAttribute",isAttr:!0,isReference:!0},{name:"elements",type:"ExtensionElements",isAttr:!0,isReference:!0}]},{name:"Artifact",isAbstract:!0,superClass:["DMNElement"],properties:[]},{name:"Association",superClass:["Artifact"],properties:[{name:"sourceRef",type:"DMNElementReference",xml:{serialize:"property"}},{name:"targetRef",type:"DMNElementReference",xml:{serialize:"property"}},{name:"associationDirection",type:"AssociationDirection",isAttr:!0}]},{name:"TextAnnotation",superClass:["Artifact"],properties:[{name:"text",type:"String"},{name:"textFormat",isAttr:!0,type:"String",default:"text/plain"}]},{name:"RuleAnnotationClause",properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"RuleAnnotation",properties:[{name:"text",type:"String"}]},{name:"Invocable",isAbstract:!0,superClass:["DRGElement"],properties:[{name:"variable",type:"InformationItem",xml:{serialize:"property"}}]},{name:"Group",superClass:["Artifact"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"FunctionItem",superClass:["DMNElement"],properties:[{name:"parameters",isMany:!0,type:"InformationItem",xml:{serialize:"property"}},{name:"outputTypeRef",isAttr:!0,type:"String"}]},{name:"DMNElementReference",properties:[{isAttr:!0,name:"href",type:"String"}]}],_o=[{name:"HitPolicy",literalValues:[{name:"UNIQUE"},{name:"FIRST"},{name:"PRIORITY"},{name:"ANY"},{name:"COLLECT"},{name:"RULE ORDER"},{name:"OUTPUT ORDER"}]},{name:"BuiltinAggregator",literalValues:[{name:"SUM"},{name:"COUNT"},{name:"MIN"},{name:"MAX"}]},{name:"DecisionTableOrientation",literalValues:[{name:"Rule-as-Row"},{name:"Rule-as-Column"},{name:"CrossTable"}]},{name:"AssociationDirection",literalValues:[{name:"None"},{name:"One"},{name:"Both"}]},{name:"FunctionKind",literalValues:[{name:"FEEL"},{name:"Java"},{name:"PMML"}]}],Co=[],De={tagAlias:"lowerCase"},He={name:zi,prefix:as,uri:Pr,types:fr,enumerations:_o,associations:Co,xml:De},ht="DMNDI",vt="dmndi",Bt="https://www.omg.org/spec/DMN/20191111/DMNDI/",zt=[{name:"DMNDI",properties:[{name:"diagrams",type:"DMNDiagram",isMany:!0},{name:"styles",type:"DMNStyle",isMany:!0}]},{name:"DMNStyle",superClass:["di:Style"],properties:[{name:"fillColor",type:"dc:Color",isAttr:!0},{name:"strokeColor",type:"dc:Color",isAttr:!0},{name:"fontColor",type:"dc:Color",isAttr:!0},{name:"fontSize",isAttr:!0,type:"Real"},{name:"fontFamily",isAttr:!0,type:"String"},{name:"fontItalic",isAttr:!0,type:"Boolean"},{name:"fontBold",isAttr:!0,type:"Boolean"},{name:"fontUnderline",isAttr:!0,type:"Boolean"},{name:"fontStrikeThrough",isAttr:!0,type:"Boolean"},{name:"labelHorizontalAlignment",type:"dc:AlignmentKind",isAttr:!0},{name:"labelVerticalAlignment",type:"dc:AlignmentKind",isAttr:!0}]},{name:"DMNDiagram",superClass:["di:Diagram"],properties:[{name:"dmnElementRef",type:"dmn:DMNElement",isAttr:!0,isReference:!0},{name:"size",type:"Size"},{name:"localStyle",type:"DMNStyle",isVirtual:!0},{name:"sharedStyle",type:"DMNStyle",isVirtual:!0,isReference:!0,redefines:"di:DiagramElement#sharedStyle"},{name:"diagramElements",type:"DMNDiagramElement",isMany:!0}]},{name:"DMNDiagramElement",isAbstract:!0,superClass:["di:DiagramElement"],properties:[{name:"dmnElementRef",type:"dmn:DMNElement",isAttr:!0,isReference:!0},{name:"sharedStyle",type:"DMNStyle",isVirtual:!0,isReference:!0,redefines:"di:DiagramElement#sharedStyle"},{name:"localStyle",type:"DMNStyle",isVirtual:!0},{name:"label",type:"DMNLabel"}]},{name:"DMNLabel",superClass:["di:Shape"],properties:[{name:"text",type:"Text"}]},{name:"DMNShape",superClass:["di:Shape","DMNDiagramElement"],properties:[{name:"isListedInputData",isAttr:!0,type:"Boolean"},{name:"decisionServiceDividerLine",type:"DMNDecisionServiceDividerLine"},{name:"isCollapsed",isAttr:!0,type:"Boolean"}]},{name:"DMNEdge",superClass:["di:Edge","DMNDiagramElement"],properties:[{name:"sourceElement",type:"DMNDiagramElement",isAttr:!0,isReference:!0},{name:"targetElement",type:"DMNDiagramElement",isAttr:!0,isReference:!0}]},{name:"DMNDecisionServiceDividerLine",superClass:["di:Edge"]},{name:"Text",properties:[{name:"text",isBody:!0,type:"String"}]},{name:"Size",superClass:["dc:Dimension"]}],Ot=[],mt=[],on={name:ht,prefix:vt,uri:Bt,types:zt,associations:Ot,enumerations:mt},En="bpmn.io DI for DMN",kn="http://bpmn.io/schema/dmn/biodi/2.0",yi="biodi",gi={tagAlias:"lowerCase"},Wi=[{name:"DecisionTable",isAbstract:!0,extends:["dmn:DecisionTable"],properties:[{name:"annotationsWidth",isAttr:!0,type:"Integer"}]},{name:"OutputClause",isAbstract:!0,extends:["dmn:OutputClause"],properties:[{name:"width",isAttr:!0,type:"Integer"}]},{name:"InputClause",isAbstract:!0,extends:["dmn:InputClause"],properties:[{name:"width",isAttr:!0,type:"Integer"}]}],Xn={name:En,uri:kn,prefix:yi,xml:gi,types:Wi},Yn={dc:Jo,di:ai,dmn:He,dmndi:on,biodi:Xn};function Ht(n,e){var t=fs({},Yn,n);return new ma(t,e)}function $r(n,e){return e.forEach(function(t){t&&typeof t!="string"&&!Array.isArray(t)&&Object.keys(t).forEach(function(i){if(i!=="default"&&!(i in n)){var r=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,r.get?r:{enumerable:!0,get:function(){return t[i]}})}})}),Object.freeze(n)}const kt=Object.prototype.toString,Bi=Object.prototype.hasOwnProperty;function Tr(n){return n===void 0}function Mi(n){return kt.call(n)==="[object Array]"}function Ur(n,e){return Bi.call(n,e)}function Ei(n,e){let t,i;if(Tr(n))return;const r=Mi(n)?lr:Xr;for(let s in n)if(Ur(n,s)&&(t=n[s],i=e(t,r(s)),i===!1))return t}function Xr(n){return n}function lr(n){return Number(n)}function Ci(n,...e){const t=n.style;return Ei(e,function(i){i&&Ei(i,function(r,s){t[s]=r})}),n}function Or(n,e,t){return arguments.length==2?n.getAttribute(e):t===null?n.removeAttribute(e):(n.setAttribute(e,t),n)}const Gs=Object.prototype.toString;function sr(n){return new Sn(n)}function Sn(n){if(!n||!n.nodeType)throw new Error("A DOM element reference is required");this.el=n,this.list=n.classList}Sn.prototype.add=function(n){return this.list.add(n),this},Sn.prototype.remove=function(n){return Gs.call(n)=="[object RegExp]"?this.removeMatching(n):(this.list.remove(n),this)},Sn.prototype.removeMatching=function(n){const e=this.array();for(let t=0;t<e.length;t++)n.test(e[t])&&this.remove(e[t]);return this},Sn.prototype.toggle=function(n,e){return typeof e!="undefined"?e!==this.list.toggle(n,e)&&this.list.toggle(n):this.list.toggle(n),this},Sn.prototype.array=function(){return Array.from(this.list)},Sn.prototype.has=Sn.prototype.contains=function(n){return this.list.contains(n)};function ln(n){for(var e;n.childNodes.length;)e=n.childNodes[0],n.removeChild(e);return n}function Yt(n,e){return n&&typeof n.matches=="function"&&n.matches(e)}function ti(n,e,t){for(var i=t?n:n.parentNode;i&&i.nodeType!==document.DOCUMENT_NODE&&i.nodeType!==document.DOCUMENT_FRAGMENT_NODE;){if(Yt(i,e))return i;i=i.parentNode}return Yt(i,e)?i:null}var oo={},Oi,Fr,_s;function Lo(){Oi=window.addEventListener?"addEventListener":"attachEvent",Fr=window.removeEventListener?"removeEventListener":"detachEvent",_s=Oi!=="addEventListener"?"on":""}var or=oo.bind=function(n,e,t,i){return Oi||Lo(),n[Oi](_s+e,t,i||!1),t},kr=oo.unbind=function(n,e,t,i){return Fr||Lo(),n[Fr](_s+e,t,i||!1),t},zn=$r({__proto__:null,bind:or,unbind:kr,default:oo},[oo]),Ri=["focus","blur"];function vo(n,e,t,i,r){return Ri.indexOf(t)!==-1&&(r=!0),zn.bind(n,t,function(s){var o=s.target||s.srcElement;s.delegateTarget=ti(o,e,!0),s.delegateTarget&&i.call(n,s)},r)}function zo(n,e,t,i){return Ri.indexOf(e)!==-1&&(i=!0),zn.unbind(n,e,t,i)}var Jr={bind:vo,unbind:zo},oi=eo,Ti=!1,Mo;typeof document!="undefined"&&(Mo=document.createElement("div"),Mo.innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',Ti=!Mo.getElementsByTagName("link").length,Mo=void 0);var Ws={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:Ti?[1,"X<div>","</div>"]:[0,"",""]};Ws.td=Ws.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],Ws.option=Ws.optgroup=[1,'<select multiple="multiple">',"</select>"],Ws.thead=Ws.tbody=Ws.colgroup=Ws.caption=Ws.tfoot=[1,"<table>","</table>"],Ws.polyline=Ws.ellipse=Ws.polygon=Ws.circle=Ws.text=Ws.line=Ws.path=Ws.rect=Ws.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];function eo(n,e){if(typeof n!="string")throw new TypeError("String expected");e||(e=document);var t=/<([\w:]+)/.exec(n);if(!t)return e.createTextNode(n);n=n.replace(/^\s+|\s+$/g,"");var i=t[1];if(i=="body"){var h=e.createElement("html");return h.innerHTML=n,h.removeChild(h.lastChild)}var r=Object.prototype.hasOwnProperty.call(Ws,i)?Ws[i]:Ws._default,s=r[0],o=r[1],l=r[2],h=e.createElement("div");for(h.innerHTML=o+n+l;s--;)h=h.lastChild;if(h.firstChild==h.lastChild)return h.removeChild(h.firstChild);for(var p=e.createDocumentFragment();h.firstChild;)p.appendChild(h.removeChild(h.firstChild));return p}var Es=oi;function xs(n,e){return e=e||document,e.querySelector(n)}function Io(n,e){return e=e||document,e.querySelectorAll(n)}function Li(n){n.parentNode&&n.parentNode.removeChild(n)}function Qa(n){return function(){if(!window.Promise)throw new Error("Promises is not supported in this environment. Please polyfill Promise.");var e=arguments.length;if(e>=1&&vn(arguments[e-1])){var t=arguments[e-1];console.warn(new Error("Passing callbacks to "+pu(n.name)+" is deprecated and will be removed in a future major release. Please switch to promises: https://bpmn.io/l/moving-to-promises.html"));var i=Array.prototype.slice.call(arguments,0,-1);n.apply(this,i).then(function(r){var s=Object.keys(r)[0];return t(null,r[s])},function(r){return t(r,r.warnings)})}else return n.apply(this,arguments)}}function pu(n){return n.replace("bound ","")}const Ll={width:"100%",height:"100%",position:"relative"};class $a{constructor(e={}){$n(this,"_viewsChanged",()=>{this._emit("views.changed",{views:this._views,activeView:this._activeView})});this._eventBus=new Bn,this._viewsChanged=le(this._viewsChanged,0),this._views=[],this._viewers={},this.open=Qa(this.open.bind(this)),this.importXML=Qa(this.importXML.bind(this)),this.saveXML=Qa(this.saveXML.bind(this)),this._init(e)}importXML(e,t){var i=this;return t=t||{open:!0},new Promise(function(s,o){var l=i._activeView;i._clear().then(()=>{e=i._emit("import.parse.start",{xml:e})||e;var h;i._moddle.fromXML(e,"dmn:Definitions").then(p=>{var y=p.rootElement,w=p.references,F=p.elementsById;if(h=p.warnings,y=i._emit("import.parse.complete",r({error:null,definitions:y,elementsById:F,references:w,warnings:h}))||y,i._setDefinitions(y),!t.open){i._emit("import.done",{error:null,warnings:h}),s({warnings:h});return}var j=i._getInitialView(i._views,l);if(!j){var Q=new Error("no displayable contents");return i._emit("import.done",{error:Q,warnings:h}),Q.warnings=h,o(Q)}i.open(j).then(he=>({warnings:he.warnings})).catch(he=>({error:he,warnings:he.warnings})).then(he=>{var ye=[].concat(h,he.warnings);i._emit("import.done",{error:he.error,warnings:ye}),he.error?(he.error.warnings=ye,o(he.error)):s({warnings:ye})})}).catch(p=>(h=p.warnings,p=Ko(p,e)||So(p)||p,i._emit("import.parse.complete",r({error:p,warnings:h})),i._emit("import.done",{error:p,warnings:h}),p.warnings=h,o(p)))}).catch(h=>(i._emit("import.done",{error:h,warnings:[]}),h.warnings=[],o(h)))});function r(s){var o=i._eventBus.createEvent(s);return Object.defineProperty(o,"context",{enumerable:!0,get:function(){return console.warn(new Error("import.parse.complete <context> is deprecated and will be removed in future library versions")),{warnings:s.warnings,references:s.references,elementsById:s.elementsById}}}),o}}getDefinitions(){return this._definitions}getActiveView(){return this._activeView}getActiveViewer(){var e=this.getActiveView();return e&&this._getViewer(e)}getView(e){return this._views.filter(function(t){return t.element===e})[0]}getViews(){return this._views}saveXML(e){var t=this;e=e||{};var i=this._definitions;return new Promise(function(r,s){if(!i){s(new Error("no definitions loaded"));return}i=t._emit("saveXML.start",{definitions:i})||i,t._moddle.toXML(i,e).then(function(o){var l=o.xml;return l=t._emit("saveXML.serialized",{xml:l})||l,{xml:l}}).catch(o=>({error:o})).then(o=>{t._emit("saveXML.done",o),o.error?s(o.error):r({xml:o.xml})})})}on(...e){this._eventBus.on(...e)}off(...e){this._eventBus.off(...e)}once(...e){this._eventBus.once(...e)}attachTo(e){e.get&&e.constructor.prototype.jquery&&(e=e.get(0)),typeof e=="string"&&(e=xs(e)),e.appendChild(this._container),this._emit("attach",{})}detach(){this._emit("detach",{}),Li(this._container)}destroy(){Object.keys(this._viewers).forEach(e=>{var t=this._viewers[e];Xa(t,"destroy")}),Li(this._container)}_init(e){this._options=e,this._moddle=this._createModdle(e),this._viewers={},this._views=[];const t=Es('<div class="dmn-js-parent"></div>'),i=ee({},Ll,e);ee(t.style,{width:wa(i.width),height:wa(i.height),position:i.position}),this._container=t,e.container&&this.attachTo(e.container)}_clear(){return this._switchView(null)}open(e){return this._switchView(e)}_setDefinitions(e){this._definitions=e,this._updateViews()}_updateViews(){var e=this._definitions;if(!e){this._views=[],this._switchView(null);return}var t=this._getViewProviders(),i=[e,...e.drgElement||[]],r=this._views,s=[];for(var o of i){var l=Ii(t,function(j){return typeof j.opens=="string"?j.opens===o.$type:j.opens(o)});if(l){var h={element:o,id:o.id,name:o.name,type:l.id};s.push(h)}}var p=this._activeView,y;if(p&&(y=Ii(s,function(j){return Ks(p,j)})||this._getInitialView(s),!y)){this._switchView(null);return}var w=!Ks(p,y)||Ia(p,y),F=r.length!==s.length||!mr(s,function(j){return Ii(r,function(Q){return Ks(Q,j)&&!Ia(Q,j)})});this._activeView=y,this._views=s,(w||F)&&this._viewsChanged()}_getInitialView(e,t){var i;return t&&(i=Ii(e,function(r){return Ks(r,t)})||Ii(e,function(r){return r.type===t})),i||e[0]}_switchView(e){var t=this;return new Promise(function(i,r){var s=(y,w)=>{t._viewsChanged(),y?r(y):i(w)},o=t.getActiveView(),l,h=e&&t._getViewer(e),p=e&&e.element;if(o&&(l=t._getViewer(o),l!==h&&(Xa(l,"clear"),l.detach())),t._activeView=e,h){l!==h&&h.attachTo(t._container),t._emit("import.render.start",{view:e,element:p}),h.open(p).then(y=>{t._emit("import.render.complete",{view:e,error:null,warnings:y.warnings}),s(null,y)}).catch(y=>{t._emit("import.render.complete",{view:e,error:y,warnings:y.warnings}),s(y,null)});return}s()})}_getViewer(e){var t=e.type,i=this._viewers[t];return i||(i=this._viewers[t]=this._createViewer(e.type),this._emit("viewer.created",{type:t,viewer:i})),i}_createViewer(e){var t=Ii(this._getViewProviders(),function(o){return o.id===e});if(!t)throw new Error("no provider for view type <"+e+">");var i=t.constructor,r=this._options[e]||{},s=this._options.common||{};return new i(qi(Jt(Jt({},s),r),{additionalModules:[...r.additionalModules||[],{_parent:["value",this],moddle:["value",this._moddle]}]}))}_emit(...e){return this._eventBus.fire(...e)}_createModdle(e){return new Ht(e.moddleExtensions)}_getViewProviders(){return[]}}function wa(n){return n+(In(n)?"px":"")}function Ko(n,e){if(n.message!=="failed to parse document as <dmn:Definitions>")return null;var t=e.indexOf('"http://www.omg.org/spec/DMN/20151101/dmn.xsd"')!==-1&&"1.1"||e.indexOf('"http://www.omg.org/spec/DMN/20180521/MODEL/"')!==-1&&"1.2";return t?(n=new Error("unsupported DMN "+t+" file detected; only DMN 1.3 files can be opened"),console.error("Cannot open what looks like a DMN "+t+" diagram. Please refer to https://bpmn.io/l/dmn-compatibility.html to learn how to make the toolkit compatible with older DMN files",n),n):null}function So(n){var e=/unparsable content <([^>]+)> detected([\s\S]*)$/,t=e.exec(n.message);return t?(n.message="unparsable content <"+t[1]+"> detected; this may indicate an invalid DMN 1.3 diagram file"+t[2],n):null}function Ks(n,e){return yn(n)?yn(e)?n.element===e.element||n.id===e.id:!1:!yn(e)}function Ia(n,e){return!n||!e||n.name!==e.name}function Xa(n,e){vn(n[e])&&n[e]()}function Jl(n,e){return e={exports:{}},n(e,e.exports),e.exports}var ua=Jl(function(n){var e=n.exports=function(t,i){if(i||(i=16),t===void 0&&(t=128),t<=0)return"0";for(var r=Math.log(Math.pow(2,t))/Math.log(i),s=2;r===1/0;s*=2)r=Math.log(Math.pow(2,t/s))/Math.log(i)*s;for(var o=r-Math.floor(r),l="",s=0;s<Math.floor(r);s++){var h=Math.floor(Math.random()*i).toString(i);l=h+l}if(o){var p=Math.pow(i,o),h=Math.floor(Math.random()*p).toString(i);l=h+l}var y=parseInt(l,i);return y!==1/0&&y>=Math.pow(2,t)?e(t,i):l};e.rack=function(t,i,r){var s=function(l){var h=0;do{if(h++>10)if(r)t+=r;else throw new Error("too many ID collisions, use more bits");var p=e(t,i)}while(Object.hasOwnProperty.call(o,p));return o[p]=l,p},o=s.hats={};return s.get=function(l){return s.hats[l]},s.set=function(l,h){return s.hats[l]=h,s},s.bits=t||128,s.base=i||16,s}});function Ea(n){if(!(this instanceof Ea))return new Ea(n);n=n||[128,36,1],this._seed=n.length?ua.rack(n[0],n[1],n[2]):n}Ea.prototype.next=function(n){return this._seed(n||!0)},Ea.prototype.nextPrefixed=function(n,e){var t;do t=n+this.next(!0);while(this.assigned(t));return this.claim(t,e),t},Ea.prototype.claim=function(n,e){this._seed.set(n,e||!0)},Ea.prototype.assigned=function(n){return this._seed.get(n)||!1},Ea.prototype.unclaim=function(n){delete this._seed.hats[n]},Ea.prototype.clear=function(){var n=this._seed.hats,e;for(e in n)this.unclaim(e)};function Mt(n,e){var t=es(n);return t&&typeof t.$instanceOf=="function"&&t.$instanceOf(e)}function $i(n){return Mt(n,"dmn:InputClause")}function Ir(n){return Mt(n,"dmn:OutputClause")}function es(n){return n&&n.businessObject||n}function Ps(n){return es(n).name}function Rn(n,e){return ss(e,function(t){return Mt(n,t)})}function Po(n){var e=es(n);if(Mt(e,"dmn:Decision"))return e.get("decisionLogic");if(Mt(e,"dmn:BusinessKnowledgeModel")){var t=e.get("encapsulatedLogic");return t&&t.get("body")}}const Nr="https://www.omg.org/spec/DMN/20191111/FEEL/";function cl(n){for(let e=n;e;e=e.$parent){const t=e.get("expressionLanguage");if(t)return!!(t===Nr||/feel/i.test(t));if(Mt(e,"dmn:FunctionDefinition"))return(e.get("kind")||"FEEL")==="FEEL"}return!0}class Ca extends $a{_init(e){super._init(e),this.on("import.parse.complete",t=>{t.error||this._collectIds(t.definitions,t.elementsById)}),this.on("destroy",()=>{this._moddle.ids.clear()}),this.on("viewer.created",({viewer:t})=>{t.on("elements.changed",({elements:i})=>{var r=i.some(function(s){return Rn(s,["dmn:Decision","dmn:Definitions","dmn:BusinessKnowledgeModel"])});r&&this._updateViews()})})}_collectIds(e,t){var i=e.$model,r=i.ids,s;r.clear();for(s in t)r.claim(s,t[s])}_createModdle(e){var t=super._createModdle(e);return t.ids=new Ea([32,36,1]),t}}function po(n,e){e&&(n.super_=e,n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}))}const fu=/^class[ {]/;function eu(n){return fu.test(n.toString())}function Na(n){return Array.isArray(n)}function ja(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function tu(...n){n.length===1&&Na(n[0])&&(n=n[0]),n=[...n];const e=n.pop();return e.$inject=n,e}const Du=/constructor\s*[^(]*\(\s*([^)]*)\)/m,wu=/^(?:async\s+)?(?:function\s*[^(]*)?(?:\(\s*([^)]*)\)|(\w+))/m,qo=/\/\*([^*]*)\*\//m;function Ya(n){if(typeof n!="function")throw new Error(`Cannot annotate "${n}". Expected a function!`);const e=n.toString().match(eu(n)?Du:wu);if(!e)return[];const t=e[1]||e[2];return t&&t.split(",").map(i=>{const r=i.match(qo);return(r&&r[1]||i).trim()})||[]}function No(n,e){const t=e||{get:function(Me,ke){if(i.push(Me),ke===!1)return null;throw l(`No provider for "${Me}"!`)}},i=[],r=this._providers=Object.create(t._providers||null),s=this._instances=Object.create(null),o=s.injector=this,l=function(Me){const ke=i.join(" -> ");return i.length=0,new Error(ke?`${Me} (Resolving: ${ke})`:Me)};function h(Me,ke){if(!r[Me]&&Me.includes(".")){const Qe=Me.split(".");let ft=h(Qe.shift());for(;Qe.length;)ft=ft[Qe.shift()];return ft}if(ja(s,Me))return s[Me];if(ja(r,Me)){if(i.indexOf(Me)!==-1)throw i.push(Me),l("Cannot resolve circular dependency!");return i.push(Me),s[Me]=r[Me][0](r[Me][1]),i.pop(),s[Me]}return t.get(Me,ke)}function p(Me,ke){if(typeof ke=="undefined"&&(ke={}),typeof Me!="function")if(Na(Me))Me=tu(Me.slice());else throw l(`Cannot invoke "${Me}". Expected a function!`);const ft=(Me.$inject||Ya(Me)).map(bt=>ja(ke,bt)?ke[bt]:h(bt));return{fn:Me,dependencies:ft}}function y(Me){const{fn:ke,dependencies:Qe}=p(Me),ft=Function.prototype.bind.call(ke,null,...Qe);return new ft}function w(Me,ke,Qe){const{fn:ft,dependencies:bt}=p(Me,Qe);return ft.apply(ke,bt)}function F(Me){return tu(ke=>Me.get(ke))}function j(Me,ke){if(ke&&ke.length){const Qe=Object.create(null),ft=Object.create(null),bt=[],st=[],Lt=[];let Vt,Zt,wn,Kn;for(let Mr in r)Vt=r[Mr],ke.indexOf(Mr)!==-1&&(Vt[2]==="private"?(Zt=bt.indexOf(Vt[3]),Zt===-1?(wn=Vt[3].createChild([],ke),Kn=F(wn),bt.push(Vt[3]),st.push(wn),Lt.push(Kn),Qe[Mr]=[Kn,Mr,"private",wn]):Qe[Mr]=[Lt[Zt],Mr,"private",st[Zt]]):Qe[Mr]=[Vt[2],Vt[1]],ft[Mr]=!0),(Vt[2]==="factory"||Vt[2]==="type")&&Vt[1].$scope&&ke.forEach(qa=>{Vt[1].$scope.indexOf(qa)!==-1&&(Qe[Mr]=[Vt[2],Vt[1]],ft[qa]=!0)});ke.forEach(Mr=>{if(!ft[Mr])throw new Error('No provider for "'+Mr+'". Cannot use provider from the parent!')}),Me.unshift(Qe)}return new No(Me,o)}const Q={factory:w,type:y,value:function(Me){return Me}};function he(Me,ke){const Qe=Me.__init__||[];return function(){Qe.forEach(ft=>{typeof ft=="string"?ke.get(ft):ke.invoke(ft)})}}function ye(Me){const ke=Me.__exports__;if(ke){const Qe=Me.__modules__,ft=Object.keys(Me).reduce((Zt,wn)=>(wn!=="__exports__"&&wn!=="__modules__"&&wn!=="__init__"&&wn!=="__depends__"&&(Zt[wn]=Me[wn]),Zt),Object.create(null)),bt=(Qe||[]).concat(ft),st=j(bt),Lt=tu(function(Zt){return st.get(Zt)});ke.forEach(function(Zt){r[Zt]=[Lt,Zt,"private",st]});const Vt=(Me.__init__||[]).slice();return Vt.unshift(function(){st.init()}),Me=Object.assign({},Me,{__init__:Vt}),he(Me,st)}return Object.keys(Me).forEach(function(Qe){if(Qe==="__init__"||Qe==="__depends__")return;const ft=Me[Qe];if(ft[2]==="private"){r[Qe]=ft;return}const bt=ft[0],st=ft[1];r[Qe]=[Q[bt],$l(bt,st),bt]}),he(Me,o)}function Le(Me,ke){return Me.indexOf(ke)!==-1||(Me=(ke.__depends__||[]).reduce(Le,Me),Me.indexOf(ke)!==-1)?Me:Me.concat(ke)}function et(Me){const ke=Me.reduce(Le,[]).map(ye);let Qe=!1;return function(){Qe||(Qe=!0,ke.forEach(ft=>ft()))}}this.get=h,this.invoke=w,this.instantiate=y,this.createChild=j,this.init=et(n)}function $l(n,e){return n!=="value"&&Na(e)&&(e=tu(e.slice())),e}var Eu=1e3;function _a(n,e){var t=this;e=e||Eu,n.on(["render.shape","render.connection"],e,function(i,r){var s=i.type,o=r.element,l=r.gfx,h=r.attrs;if(t.canRender(o))return s==="render.shape"?t.drawShape(l,o,h):t.drawConnection(l,o,h)}),n.on(["render.getShapePath","render.getConnectionPath"],e,function(i,r){if(t.canRender(r))return i.type==="render.getShapePath"?t.getShapePath(r):t.getConnectionPath(r)})}_a.prototype.canRender=function(n){},_a.prototype.drawShape=function(n,e){},_a.prototype.drawConnection=function(n,e){},_a.prototype.getShapePath=function(n){},_a.prototype.getConnectionPath=function(n){};function Ga(n,e){if(n.ownerDocument!==e.ownerDocument)try{return e.ownerDocument.importNode(n,!0)}catch(t){}return n}function $o(n,e){return e.appendChild(Ga(n,e))}function Br(n,e){return $o(e,n),n}var ls=2,Ka={"alignment-baseline":1,"baseline-shift":1,clip:1,"clip-path":1,"clip-rule":1,color:1,"color-interpolation":1,"color-interpolation-filters":1,"color-profile":1,"color-rendering":1,cursor:1,direction:1,display:1,"dominant-baseline":1,"enable-background":1,fill:1,"fill-opacity":1,"fill-rule":1,filter:1,"flood-color":1,"flood-opacity":1,font:1,"font-family":1,"font-size":ls,"font-size-adjust":1,"font-stretch":1,"font-style":1,"font-variant":1,"font-weight":1,"glyph-orientation-horizontal":1,"glyph-orientation-vertical":1,"image-rendering":1,kerning:1,"letter-spacing":1,"lighting-color":1,marker:1,"marker-end":1,"marker-mid":1,"marker-start":1,mask:1,opacity:1,overflow:1,"pointer-events":1,"shape-rendering":1,"stop-color":1,"stop-opacity":1,stroke:1,"stroke-dasharray":1,"stroke-dashoffset":1,"stroke-linecap":1,"stroke-linejoin":1,"stroke-miterlimit":1,"stroke-opacity":1,"stroke-width":ls,"text-anchor":1,"text-decoration":1,"text-rendering":1,"unicode-bidi":1,visibility:1,"word-spacing":1,"writing-mode":1};function Cl(n,e){return Ka[e]?n.style[e]:n.getAttributeNS(null,e)}function Va(n,e,t){var i=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r=Ka[i];r?(r===ls&&typeof t=="number"&&(t=String(t)+"px"),n.style[i]=t):n.setAttributeNS(null,e,t)}function Cs(n,e){var t=Object.keys(e),i,r;for(i=0,r;r=t[i];i++)Va(n,r,e[r])}function Ji(n,e,t){if(typeof e=="string")if(t!==void 0)Va(n,e,t);else return Cl(n,e);else Cs(n,e);return n}const nu=Object.prototype.toString;function Hs(n){return new yl(n)}function yl(n){if(!n||!n.nodeType)throw new Error("A DOM element reference is required");this.el=n,this.list=n.classList}yl.prototype.add=function(n){return this.list.add(n),this},yl.prototype.remove=function(n){return nu.call(n)=="[object RegExp]"?this.removeMatching(n):(this.list.remove(n),this)},yl.prototype.removeMatching=function(n){const e=this.array();for(let t=0;t<e.length;t++)n.test(e[t])&&this.remove(e[t]);return this},yl.prototype.toggle=function(n,e){return typeof e!="undefined"?e!==this.list.toggle(n,e)&&this.list.toggle(n):this.list.toggle(n),this},yl.prototype.array=function(){return Array.from(this.list)},yl.prototype.has=yl.prototype.contains=function(n){return this.list.contains(n)};function ra(n){var e=n.parentNode;return e&&e.removeChild(n),n}function Cu(n){for(var e;e=n.firstChild;)ra(e);return n}function iu(n){return n.cloneNode(!0)}var Bu={svg:"http://www.w3.org/2000/svg"},ru='<svg xmlns="'+Bu.svg+'"';function jl(n){var e=!1;n.substring(0,4)==="<svg"?n.indexOf(Bu.svg)===-1&&(n=ru+n.substring(4)):(n=ru+">"+n+"</svg>",e=!0);var t=Ru(n);if(!e)return t;for(var i=document.createDocumentFragment(),r=t.firstChild;r.firstChild;)i.appendChild(r.firstChild);return i}function Ru(n){var e;return e=new DOMParser,e.async=!1,e.parseFromString(n,"text/xml")}function Yr(n,e){var t;return n.charAt(0)==="<"?(t=jl(n).firstChild,t=document.importNode(t,!0)):t=document.createElementNS(Bu.svg,n),e&&Ji(t,e),t}var d=null;function a(){return d===null&&(d=Yr("svg")),d}function m(n,e){var t,i,r=Object.keys(e);for(t=0;i=r[t];t++)n[i]=e[i];return n}function S(n,e,t,i,r,s){var o=a().createSVGMatrix();switch(arguments.length){case 0:return o;case 1:return m(o,n);case 6:return m(o,{a:n,b:e,c:t,d:i,e:r,f:s})}}function $(n){return a().createSVGTransform()}var ne=/([&<>]{1})/g,ve=/([\n\r"]{1})/g,qe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"'"};function ct(n,e){function t(i,r){return qe[r]||r}return n.replace(e,t)}function at(n,e){var t,i,r,s,o;switch(n.nodeType){case 3:e.push(ct(n.textContent,ne));break;case 1:if(e.push("<",n.tagName),n.hasAttributes())for(r=n.attributes,t=0,i=r.length;t<i;++t)s=r.item(t),e.push(" ",s.name,'="',ct(s.value,ve),'"');if(n.hasChildNodes()){for(e.push(">"),o=n.childNodes,t=0,i=o.length;t<i;++t)at(o.item(t),e);e.push("</",n.tagName,">")}else e.push("/>");break;case 8:e.push("<!--",ct(n.nodeValue,ne),"-->");break;case 4:e.push("<![CDATA[",n.nodeValue,"]]>");break;default:throw new Error("unable to handle node "+n.nodeType)}return e}function On(n){for(var e=n.firstChild,t=[];e;)at(e,t),e=e.nextSibling;return t.join("")}function ui(n,e){return On(n)}function Yi(n,e){return e instanceof SVGMatrix?n.createSVGTransformFromMatrix(e):e}function ji(n,e){var t,i;for(n.clear(),t=0;i=e[t];t++)n.appendItem(Yi(n,i))}function Ls(n,e){var t=n.transform.baseVal;return e&&(Array.isArray(e)||(e=[e]),ji(t,e)),t.consolidate()}function Zs(n){return n.flat().join(",").replace(/,?([A-z]),?/g,"$1")}function ea(n){return["M",n.x,n.y]}function sa(n){return["L",n.x,n.y]}function Pa(n,e,t){return["C",n.x,n.y,e.x,e.y,t.x,t.y]}function Lu(n,e){const t=n.length,i=[ea(n[0])];for(let r=1;r<t;r++){const s=n[r-1],o=n[r],l=n[r+1];if(!l||!e){i.push(sa(o));continue}const h=Math.min(e,Ju(o.x-s.x,o.y-s.y),Ju(l.x-o.x,l.y-o.y));if(!h){i.push(sa(o));continue}const p=Vl(o,s,h),y=Vl(o,s,h*.5),w=Vl(o,l,h),F=Vl(o,l,h*.5);i.push(sa(p)),i.push(Pa(y,F,w))}return i}function Vl(n,e,t){const i=e.x-n.x,r=e.y-n.y,s=Ju(i,r),o=t/s;return{x:n.x+i*o,y:n.y+r*o}}function Ju(n,e){return Math.sqrt(Math.pow(n,2)+Math.pow(e,2))}function Su(n,e,t){In(e)&&(t=e,e=null),e||(e={});const i=Yr("path",e);return In(t)&&(i.dataset.cornerRadius=String(t)),Sc(i,n)}function Sc(n,e){const t=parseInt(n.dataset.cornerRadius,10)||0;return Ji(n,{d:Zs(Lu(e,t))}),n}function mu(n){return Un(n,function(e){return!Ii(n,function(t){return t!==e&&rl(e,t)})})}function rl(n,e){if(e){if(n===e)return e;if(n.parent)return rl(n.parent,e)}}function $u(n,e,t){var i=!t;return n.push(e),i}function Sl(n,e,t){t=t||0,Nn(n)||(n=[n]),$t(n,function(i,r){var s=e(i,r,t);Nn(s)&&s.length&&Sl(s,e,t+1)})}function ju(n,e,t){var i=[],r=[];return Sl(n,function(s,o,l){$u(i,s,e);var h=s.children;if(h&&$u(r,h,e))return h}),i}function hl(n,e){return ju(n,!e)}function lc(n,e,t){Qt(e)&&(e=!0),Kt(e)&&(t=e,e=!0),t=t||{};var i=H(t.allShapes),r=H(t.allConnections),s=H(t.enclosedElements),o=H(t.enclosedConnections),l=H(t.topLevel,e&&uo(n,function(y){return y.id}));function h(y){l[y.source.id]&&l[y.target.id]&&(l[y.id]=[y]),i[y.source.id]&&i[y.target.id]&&(o[y.id]=s[y.id]=y),r[y.id]=y}function p(y){if(s[y.id]=y,y.waypoints)o[y.id]=r[y.id]=y;else return i[y.id]=y,$t(y.incoming,h),$t(y.outgoing,h),y.children}return Sl(n,p),{allShapes:i,allConnections:r,topLevel:l,enclosedConnections:o,enclosedElements:s}}function Za(n,e){e=!!e,Nn(n)||(n=[n]);var t,i,r,s;return $t(n,function(o){var l=o;o.waypoints&&!e&&(l=Za(o.waypoints,!0));var h=l.x,p=l.y,y=l.height||0,w=l.width||0;(h<t||t===void 0)&&(t=h),(p<i||i===void 0)&&(i=p),(h+w>r||r===void 0)&&(r=h+w),(p+y>s||s===void 0)&&(s=p+y)}),{x:t,y:i,height:s-i,width:r-t}}function gc(n,e){var t={};return $t(n,function(i){var r=i;r.waypoints&&(r=Za(r)),!In(e.y)&&r.x>e.x&&(t[i.id]=i),!In(e.x)&&r.y>e.y&&(t[i.id]=i),r.x>e.x&&r.y>e.y&&(In(e.width)&&In(e.height)&&r.width+r.x<e.width+e.x&&r.height+r.y<e.height+e.y||!In(e.width)||!In(e.height))&&(t[i.id]=i)}),t}function uc(n){return"waypoints"in n?"connection":"x"in n?"shape":"root"}function O(n){return!!(n&&n.isFrame)}function H(n,e){return ee({},n||{},e||{})}var se=1;function ge(n,e){_a.call(this,n,se),this.CONNECTION_STYLE=e.style(["no-fill"],{strokeWidth:5,stroke:"fuchsia"}),this.SHAPE_STYLE=e.style({fill:"white",stroke:"fuchsia",strokeWidth:2}),this.FRAME_STYLE=e.style(["no-fill"],{stroke:"fuchsia",strokeDasharray:4,strokeWidth:2})}po(ge,_a),ge.prototype.canRender=function(){return!0},ge.prototype.drawShape=function(e,t,i){var r=Yr("rect");return Ji(r,{x:0,y:0,width:t.width||0,height:t.height||0}),O(t)?Ji(r,ee({},this.FRAME_STYLE,i||{})):Ji(r,ee({},this.SHAPE_STYLE,i||{})),Br(e,r),r},ge.prototype.drawConnection=function(e,t,i){var r=Su(t.waypoints,ee({},this.CONNECTION_STYLE,i||{}));return Br(e,r),r},ge.prototype.getShapePath=function(e){var t=e.x,i=e.y,r=e.width,s=e.height,o=[["M",t,i],["l",r,0],["l",0,s],["l",-r,0],["z"]];return Zs(o)},ge.prototype.getConnectionPath=function(e){var t=e.waypoints,i,r,s=[];for(i=0;r=t[i];i++)r=r.original||r,s.push([i===0?"M":"L",r.x,r.y]);return Zs(s)},ge.$inject=["eventBus","styles"];function ue(){var n={"no-fill":{fill:"none"},"no-border":{strokeOpacity:0},"no-events":{pointerEvents:"none"}},e=this;this.cls=function(t,i,r){var s=this.style(i,r);return ee(s,{class:t})},this.style=function(t,i){!Nn(t)&&!i&&(i=t,t=[]);var r=qt(t,function(s,o){return ee(s,n[o]||{})},{});return i?ee(r,i):r},this.computeStyle=function(t,i,r){return Nn(i)||(r=i,i=[]),e.style(i||[],ee({},r,t||{}))}}var be={__init__:["defaultRenderer"],defaultRenderer:["type",ge],styles:["type",ue]};function ot(n,e){if(!n||!e)return-1;var t=n.indexOf(e);return t!==-1&&n.splice(t,1),t}function _t(n,e,t){if(!(!n||!e)){typeof t!="number"&&(t=-1);var i=n.indexOf(e);if(i!==-1){if(i===t)return;if(t!==-1)n.splice(i,1);else return}t!==-1?n.splice(t,0,e):n.push(e)}}function Rt(n,e){return!n||!e?-1:n.indexOf(e)}function an(n,e){return!n||!e?-1:Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))}function Gt(n,e,t,i){if(typeof i=="undefined"&&(i=5),!n||!e||!t)return!1;var r=(e.x-n.x)*(t.y-n.y)-(e.y-n.y)*(t.x-n.x),s=an(n,e);return Math.abs(r/s)<=i}var Ln=2;function Dn(n,e){var t=Array.from(arguments).flat();const i={x:"v",y:"h"};for(const[r,s]of Object.entries(i))if(nn(r,t))return s;return!1}function nn(n,e){const t=e[0];return mr(e,function(i){return Math.abs(t[n]-i[n])<=Ln})}function An(n,e){return{x:Math.round(n.x+(e.x-n.x)/2),y:Math.round(n.y+(e.y-n.y)/2)}}var ni=/,?([a-z]),?/gi,er=parseFloat,yr=Math,Er=yr.PI,ys=yr.min,Ns=yr.max,ao=yr.pow,Bo=yr.abs,to=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?[\s]*,?[\s]*)+)/ig,Ja=/(-?\d*\.?\d*(?:e[-+]?\d+)?)[\s]*,?[\s]*/ig,dl=Array.isArray||function(n){return n instanceof Array};function Al(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Fo(n){if(typeof n=="function"||Object(n)!==n)return n;var e=new n.constructor;for(var t in n)Al(n,t)&&(e[t]=Fo(n[t]));return e}function ga(n,e){for(var t=0,i=n.length;t<i;t++)if(n[t]===e)return n.push(n.splice(t,1)[0])}function Fa(n){function e(){var t=Array.prototype.slice.call(arguments,0),i=t.join("\u2400"),r=e.cache=e.cache||{},s=e.count=e.count||[];return Al(r,i)?(ga(s,i),r[i]):(s.length>=1e3&&delete r[s.shift()],s.push(i),r[i]=n(...arguments),r[i])}return e}function xo(n){if(!n)return null;var e=vl(n);if(e.arr)return Fo(e.arr);var t={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},i=[];return dl(n)&&dl(n[0])&&(i=Fo(n)),i.length||String(n).replace(to,function(r,s,o){var l=[],h=s.toLowerCase();for(o.replace(Ja,function(p,y){y&&l.push(+y)}),h=="m"&&l.length>2&&(i.push([s,...l.splice(0,2)]),h="l",s=s=="m"?"l":"L");l.length>=t[h]&&(i.push([s,...l.splice(0,t[h])]),!!t[h]););}),i.toString=vl.toString,e.arr=Fo(i),i}function vl(n){var e=vl.ps=vl.ps||{};return e[n]?e[n].sleep=100:e[n]={sleep:100},setTimeout(function(){for(var t in e)Al(e,t)&&t!=n&&(e[t].sleep--,!e[t].sleep&&delete e[t])}),e[n]}function cc(n,e,t,i){return arguments.length===1&&(e=n.y,t=n.width,i=n.height,n=n.x),{x:n,y:e,width:t,height:i,x2:n+t,y2:e+i}}function su(){return this.join(",").replace(ni,"$1")}function Tl(n){var e=Fo(n);return e.toString=su,e}function ec(n,e,t,i,r,s,o,l,h){var p=1-h,y=ao(p,3),w=ao(p,2),F=h*h,j=F*h,Q=y*n+w*3*h*t+p*3*h*h*r+j*o,he=y*e+w*3*h*i+p*3*h*h*s+j*l;return{x:hc(Q),y:hc(he)}}function Ol(n){var e=Au(...n);return cc(e.x0,e.y0,e.x1-e.x0,e.y1-e.y0)}function gu(n,e,t){return e>=n.x&&e<=n.x+n.width&&t>=n.y&&t<=n.y+n.height}function Yc(n,e){return n=cc(n),e=cc(e),gu(e,n.x,n.y)||gu(e,n.x2,n.y)||gu(e,n.x,n.y2)||gu(e,n.x2,n.y2)||gu(n,e.x,e.y)||gu(n,e.x2,e.y)||gu(n,e.x,e.y2)||gu(n,e.x2,e.y2)||(n.x<e.x2&&n.x>e.x||e.x<n.x2&&e.x>n.x)&&(n.y<e.y2&&n.y>e.y||e.y<n.y2&&e.y>n.y)}function el(n,e,t,i,r){var s=-3*e+9*t-9*i+3*r,o=n*s+6*e-12*t+6*i;return n*o-3*e+3*t}function Wl(n,e,t,i,r,s,o,l,h){h==null&&(h=1),h=h>1?1:h<0?0:h;for(var p=h/2,y=12,w=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],F=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],j=0,Q=0;Q<y;Q++){var he=p*w[Q]+p,ye=el(he,n,t,r,o),Le=el(he,e,i,s,l),et=ye*ye+Le*Le;j+=F[Q]*yr.sqrt(et)}return p*j}function Sa(n,e,t,i,r,s,o,l){if(!(Ns(n,t)<ys(r,o)||ys(n,t)>Ns(r,o)||Ns(e,i)<ys(s,l)||ys(e,i)>Ns(s,l))){var h=(n*i-e*t)*(r-o)-(n-t)*(r*l-s*o),p=(n*i-e*t)*(s-l)-(e-i)*(r*l-s*o),y=(n-t)*(s-l)-(e-i)*(r-o);if(y){var w=hc(h/y),F=hc(p/y),j=+w.toFixed(2),Q=+F.toFixed(2);if(!(j<+ys(n,t).toFixed(2)||j>+Ns(n,t).toFixed(2)||j<+ys(r,o).toFixed(2)||j>+Ns(r,o).toFixed(2)||Q<+ys(e,i).toFixed(2)||Q>+Ns(e,i).toFixed(2)||Q<+ys(s,l).toFixed(2)||Q>+Ns(s,l).toFixed(2)))return{x:w,y:F}}}}function hc(n){return Math.round(n*1e11)/1e11}function Ma(n,e,t){var i=Ol(n),r=Ol(e);if(!Yc(i,r))return t?0:[];for(var s=Wl(...n),o=Wl(...e),l=ya(n)?1:~~(s/5)||1,h=ya(e)?1:~~(o/5)||1,p=[],y=[],w={},F=t?0:[],j=0;j<l+1;j++){var Q=ec(...n,j/l);p.push({x:Q.x,y:Q.y,t:j/l})}for(j=0;j<h+1;j++)Q=ec(...e,j/h),y.push({x:Q.x,y:Q.y,t:j/h});for(j=0;j<l;j++)for(var he=0;he<h;he++){var ye=p[j],Le=p[j+1],et=y[he],Me=y[he+1],ke=Bo(Le.x-ye.x)<.01?"y":"x",Qe=Bo(Me.x-et.x)<.01?"y":"x",ft=Sa(ye.x,ye.y,Le.x,Le.y,et.x,et.y,Me.x,Me.y),bt;if(ft){if(bt=ft.x.toFixed(9)+"#"+ft.y.toFixed(9),w[bt])continue;w[bt]=!0;var st=ye.t+Bo((ft[ke]-ye[ke])/(Le[ke]-ye[ke]))*(Le.t-ye.t),Lt=et.t+Bo((ft[Qe]-et[Qe])/(Me[Qe]-et[Qe]))*(Me.t-et.t);st>=0&&st<=1&&Lt>=0&&Lt<=1&&(t?F++:F.push({x:ft.x,y:ft.y,t1:st,t2:Lt}))}}return F}function Hl(n,e,t){n=Yo(n),e=Yo(e);for(var i,r,s,o,l,h,p,y,w,F,j=t?0:[],Q=0,he=n.length;Q<he;Q++){var ye=n[Q];if(ye[0]=="M")i=l=ye[1],r=h=ye[2];else{ye[0]=="C"?(w=[i,r,...ye.slice(1)],i=w[6],r=w[7]):(w=[i,r,i,r,l,h,l,h],i=l,r=h);for(var Le=0,et=e.length;Le<et;Le++){var Me=e[Le];if(Me[0]=="M")s=p=Me[1],o=y=Me[2];else{Me[0]=="C"?(F=[s,o,...Me.slice(1)],s=F[6],o=F[7]):(F=[s,o,s,o,p,y,p,y],s=p,o=y);var ke=Ma(w,F,t);if(t)j+=ke;else{for(var Qe=0,ft=ke.length;Qe<ft;Qe++)ke[Qe].segment1=Q,ke[Qe].segment2=Le,ke[Qe].bez1=w,ke[Qe].bez2=F;j=j.concat(ke)}}}}}return j}function sl(n){var e=vl(n);if(e.abs)return Tl(e.abs);if((!dl(n)||!dl(n&&n[0]))&&(n=xo(n)),!n||!n.length)return[["M",0,0]];var t=[],i=0,r=0,s=0,o=0,l=0,h;n[0][0]=="M"&&(i=+n[0][1],r=+n[0][2],s=i,o=r,l++,t[0]=["M",i,r]);for(var p,y,w=l,F=n.length;w<F;w++){if(t.push(p=[]),y=n[w],h=y[0],h!=h.toUpperCase())switch(p[0]=h.toUpperCase(),p[0]){case"A":p[1]=y[1],p[2]=y[2],p[3]=y[3],p[4]=y[4],p[5]=y[5],p[6]=+y[6]+i,p[7]=+y[7]+r;break;case"V":p[1]=+y[1]+r;break;case"H":p[1]=+y[1]+i;break;case"M":s=+y[1]+i,o=+y[2]+r;default:for(var j=1,Q=y.length;j<Q;j++)p[j]=+y[j]+(j%2?i:r)}else for(var he=0,ye=y.length;he<ye;he++)p[he]=y[he];switch(h=h.toUpperCase(),p[0]){case"Z":i=+s,r=+o;break;case"H":i=p[1];break;case"V":r=p[1];break;case"M":s=p[p.length-2],o=p[p.length-1];default:i=p[p.length-2],r=p[p.length-1]}}return t.toString=su,e.abs=Tl(t),t}function ya(n){return n[0]===n[2]&&n[1]===n[3]&&n[4]===n[6]&&n[5]===n[7]}function Ul(n,e,t,i){return[n,e,t,i,t,i]}function xl(n,e,t,i,r,s){var o=.3333333333333333,l=2/3;return[o*n+l*t,o*e+l*i,o*r+l*t,o*s+l*i,r,s]}function kl(n,e,t,i,r,s,o,l,h,p){var y=Er*120/180,w=Er/180*0,F=[],j,Q=Fa(function(Zv,uh,Xc){var Rl=Zv*yr.cos(Xc)-uh*yr.sin(Xc),ch=Zv*yr.sin(Xc)+uh*yr.cos(Xc);return{x:Rl,y:ch}});if(p)bt=p[0],st=p[1],Qe=p[2],ft=p[3];else{j=Q(n,e,-w),n=j.x,e=j.y,j=Q(l,h,-w),l=j.x,h=j.y;var he=(n-l)/2,ye=(e-h)/2,Le=he*he/(t*t)+ye*ye/(i*i);Le>1&&(Le=yr.sqrt(Le),t=Le*t,i=Le*i);var et=t*t,Me=i*i,ke=(s==o?-1:1)*yr.sqrt(Bo((et*Me-et*ye*ye-Me*he*he)/(et*ye*ye+Me*he*he))),Qe=ke*t*ye/i+(n+l)/2,ft=ke*-i*he/t+(e+h)/2,bt=yr.asin(((e-ft)/i).toFixed(9)),st=yr.asin(((h-ft)/i).toFixed(9));bt=n<Qe?Er-bt:bt,st=l<Qe?Er-st:st,bt<0&&(bt=Er*2+bt),st<0&&(st=Er*2+st),st>bt&&(st=st-Er*2)}var Lt=st-bt;if(Bo(Lt)>y){var Vt=st,Zt=l,wn=h;st=bt+y*-1,l=Qe+t*yr.cos(st),h=ft+i*yr.sin(st),F=kl(l,h,t,i,r,0,o,Zt,wn,[st,Vt,Qe,ft])}Lt=st-bt;var Kn=yr.cos(bt),Mr=yr.sin(bt),qa=yr.cos(st),Go=yr.sin(st),Do=yr.tan(Lt/4),ac=4/3*t*Do,lh=4/3*i*Do,Ra=[n,e],El=[n+ac*Mr,e-lh*Kn],Gu=[l+ac*Go,h-lh*qa],Cc=[l,h];if(El[0]=2*Ra[0]-El[0],El[1]=2*Ra[1]-El[1],p)return[El,Gu,Cc].concat(F);F=[El,Gu,Cc].concat(F).join().split(",");for(var Nc=[],du=0,Bd=F.length;du<Bd;du++)Nc[du]=du%2?Q(F[du-1],F[du],w).y:Q(F[du],F[du+1],w).x;return Nc}function Au(n,e,t,i,r,s,o,l){for(var h=[],p=[[],[]],y,w,F,j,Q,he,ye,Le,et=0;et<2;++et){if(et==0?(w=6*n-12*t+6*r,y=-3*n+9*t-9*r+3*o,F=3*t-3*n):(w=6*e-12*i+6*s,y=-3*e+9*i-9*s+3*l,F=3*i-3*e),Bo(y)<1e-12){if(Bo(w)<1e-12)continue;j=-F/w,0<j&&j<1&&h.push(j);continue}ye=w*w-4*F*y,Le=yr.sqrt(ye),!(ye<0)&&(Q=(-w+Le)/(2*y),0<Q&&Q<1&&h.push(Q),he=(-w-Le)/(2*y),0<he&&he<1&&h.push(he))}for(var Me=h.length,ke=Me,Qe;Me--;)j=h[Me],Qe=1-j,p[0][Me]=Qe*Qe*Qe*n+3*Qe*Qe*j*t+3*Qe*j*j*r+j*j*j*o,p[1][Me]=Qe*Qe*Qe*e+3*Qe*Qe*j*i+3*Qe*j*j*s+j*j*j*l;return p[0][ke]=n,p[1][ke]=e,p[0][ke+1]=o,p[1][ke+1]=l,p[0].length=p[1].length=ke+2,{x0:ys(...p[0]),y0:ys(...p[1]),x1:Ns(...p[0]),y1:Ns(...p[1])}}function Yo(n){var e=vl(n);if(e.curve)return Tl(e.curve);for(var t=sl(n),i={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},r=function(j,Q,he){var ye,Le;if(!j)return["C",Q.x,Q.y,Q.x,Q.y,Q.x,Q.y];switch(!(j[0]in{T:1,Q:1})&&(Q.qx=Q.qy=null),j[0]){case"M":Q.X=j[1],Q.Y=j[2];break;case"A":j=["C",...kl(Q.x,Q.y,...j.slice(1))];break;case"S":he=="C"||he=="S"?(ye=Q.x*2-Q.bx,Le=Q.y*2-Q.by):(ye=Q.x,Le=Q.y),j=["C",ye,Le,...j.slice(1)];break;case"T":he=="Q"||he=="T"?(Q.qx=Q.x*2-Q.qx,Q.qy=Q.y*2-Q.qy):(Q.qx=Q.x,Q.qy=Q.y),j=["C",...xl(Q.x,Q.y,Q.qx,Q.qy,j[1],j[2])];break;case"Q":Q.qx=j[1],Q.qy=j[2],j=["C",...xl(Q.x,Q.y,j[1],j[2],j[3],j[4])];break;case"L":j=["C",...Ul(Q.x,Q.y,j[1],j[2])];break;case"H":j=["C",...Ul(Q.x,Q.y,j[1],Q.y)];break;case"V":j=["C",...Ul(Q.x,Q.y,Q.x,j[1])];break;case"Z":j=["C",...Ul(Q.x,Q.y,Q.X,Q.Y)];break}return j},s=function(j,Q){if(j[Q].length>7){j[Q].shift();for(var he=j[Q];he.length;)o[Q]="A",j.splice(Q++,0,["C",...he.splice(0,6)]);j.splice(Q,1),y=t.length}},o=[],l="",h="",p=0,y=t.length;p<y;p++){t[p]&&(l=t[p][0]),l!="C"&&(o[p]=l,p&&(h=o[p-1])),t[p]=r(t[p],i,h),o[p]!="A"&&l=="C"&&(o[p]="C"),s(t,p);var w=t[p],F=w.length;i.x=w[F-2],i.y=w[F-1],i.bx=er(w[F-4])||i.x,i.by=er(w[F-3])||i.y}return e.curve=Tl(t),t}function fo(n){return Kt(n)&&Si(n,"waypoints")}function ta(n){return Kt(n)&&Si(n,"labelTarget")}function tc(n){return{x:Math.round(n.x),y:Math.round(n.y),width:Math.round(n.width),height:Math.round(n.height)}}function is(n){return{x:Math.round(n.x),y:Math.round(n.y)}}function C(n){return{top:n.y,right:n.x+(n.width||0),bottom:n.y+(n.height||0),left:n.x}}function R(n){return{x:n.left,y:n.top,width:n.right-n.left,height:n.bottom-n.top}}function G(n){return is({x:n.x+(n.width||0)/2,y:n.y+(n.height||0)/2})}function oe(n){for(var e=n.waypoints,t=e.reduce(function(p,y,w){var F=e[w-1];if(F){var j=p[p.length-1],Q=j&&j.endLength||0,he=b(F,y);p.push({start:F,end:y,startLength:Q,endLength:Q+he,length:he})}return p},[]),i=t.reduce(function(p,y){return p+y.length},0),r=i/2,s=0,o=t[s];o.endLength<r;)o=t[++s];var l=(r-o.startLength)/o.length,h={x:o.start.x+(o.end.x-o.start.x)*l,y:o.start.y+(o.end.y-o.start.y)*l};return h}function Se(n){return fo(n)?oe(n):G(n)}function xt(n,e,t){t=t||0,Kt(t)||(t={x:t,y:t});var i=C(n),r=C(e),s=i.bottom+t.y<=r.top,o=i.left-t.x>=r.right,l=i.top-t.y>=r.bottom,h=i.right+t.x<=r.left,p=s?"top":l?"bottom":null,y=h?"left":o?"right":null;return y&&p?p+"-"+y:y||p||"intersect"}function E(n,e,t){var i=u(n,e);return i.length===1||i.length===2&&an(i[0],i[1])<1?is(i[0]):i.length>1?(i=wr(i,function(r){var s=Math.floor(r.t2*100)||1;return s=100-s,s=(s<10?"0":"")+s,r.segment2+"#"+s}),is(i[t?0:i.length-1])):null}function u(n,e){return Hl(n,e)}function f(n){n=n.slice();for(var e=0,t,i,r;n[e];)t=n[e],i=n[e-1],r=n[e+1],an(t,r)===0||Gt(i,r,t)?n.splice(e,1):e++;return n}function b(n,e){return Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))}function T(n,e){return Math.round(n*e)/e}function B(n){return In(n)?n+"px":n}function U(n){for(;n.parent;)n=n.parent;return n}function ie(n){n=ee({},{width:"100%",height:"100%"},n);const e=n.container||document.body,t=document.createElement("div");return t.setAttribute("class","djs-container djs-parent"),Ci(t,{position:"relative",overflow:"hidden",width:B(n.width),height:B(n.height)}),e.appendChild(t),t}function ce(n,e,t){const i=Yr("g");Hs(i).add(e);const r=t!==void 0?t:n.childNodes.length-1;return n.insertBefore(i,n.childNodes[r]||null),i}const _e="base",Oe=0,lt=1,gt={shape:["x","y","width","height"],connection:["waypoints"]};function wt(n,e,t,i){this._eventBus=e,this._elementRegistry=i,this._graphicsFactory=t,this._rootsIdx=0,this._layers={},this._planes=[],this._rootElement=null,this._init(n||{})}wt.$inject=["config.canvas","eventBus","graphicsFactory","elementRegistry"],wt.prototype._init=function(n){const e=this._eventBus,t=this._container=ie(n),i=this._svg=Yr("svg");Ji(i,{width:"100%",height:"100%"}),Br(t,i);const r=this._viewport=ce(i,"viewport");n.deferUpdate&&(this._viewboxChanged=le(ze(this._viewboxChanged,this),300)),e.on("diagram.init",()=>{e.fire("canvas.init",{svg:i,viewport:r})}),e.on(["shape.added","connection.added","shape.removed","connection.removed","elements.changed","root.set"],()=>{delete this._cachedViewbox}),e.on("diagram.destroy",500,this._destroy,this),e.on("diagram.clear",500,this._clear,this)},wt.prototype._destroy=function(){this._eventBus.fire("canvas.destroy",{svg:this._svg,viewport:this._viewport});const n=this._container.parentNode;n&&n.removeChild(this._container),delete this._svg,delete this._container,delete this._layers,delete this._planes,delete this._rootElement,delete this._viewport},wt.prototype._clear=function(){this._elementRegistry.getAll().forEach(e=>{const t=uc(e);t==="root"?this.removeRootElement(e):this._removeElement(e,t)}),this._planes=[],this._rootElement=null,delete this._cachedViewbox},wt.prototype.getDefaultLayer=function(){return this.getLayer(_e,Oe)},wt.prototype.getLayer=function(n,e){if(!n)throw new Error("must specify a name");let t=this._layers[n];if(t||(t=this._layers[n]=this._createLayer(n,e)),typeof e!="undefined"&&t.index!==e)throw new Error("layer <"+n+"> already created at index <"+e+">");return t.group},wt.prototype._getChildIndex=function(n){return qt(this._layers,function(e,t){return t.visible&&n>=t.index&&e++,e},0)},wt.prototype._createLayer=function(n,e){typeof e=="undefined"&&(e=lt);const t=this._getChildIndex(e);return{group:ce(this._viewport,"layer-"+n,t),index:e,visible:!0}},wt.prototype.showLayer=function(n){if(!n)throw new Error("must specify a name");const e=this._layers[n];if(!e)throw new Error("layer <"+n+"> does not exist");const t=this._viewport,i=e.group,r=e.index;if(e.visible)return i;const s=this._getChildIndex(r);return t.insertBefore(i,t.childNodes[s]||null),e.visible=!0,i},wt.prototype.hideLayer=function(n){if(!n)throw new Error("must specify a name");const e=this._layers[n];if(!e)throw new Error("layer <"+n+"> does not exist");const t=e.group;return e.visible&&(ra(t),e.visible=!1),t},wt.prototype._removeLayer=function(n){const e=this._layers[n];e&&(delete this._layers[n],ra(e.group))},wt.prototype.getActiveLayer=function(){const n=this._findPlaneForRoot(this.getRootElement());return n?n.layer:null},wt.prototype.findRoot=function(n){return typeof n=="string"&&(n=this._elementRegistry.get(n)),n?(this._findPlaneForRoot(U(n))||{}).rootElement:void 0},wt.prototype.getRootElements=function(){return this._planes.map(function(n){return n.rootElement})},wt.prototype._findPlaneForRoot=function(n){return Ii(this._planes,function(e){return e.rootElement===n})},wt.prototype.getContainer=function(){return this._container},wt.prototype._updateMarker=function(n,e,t){let i;n.id||(n=this._elementRegistry.get(n)),i=this._elementRegistry._elements[n.id],i&&($t([i.gfx,i.secondaryGfx],function(r){r&&(t?Hs(r).add(e):Hs(r).remove(e))}),this._eventBus.fire("element.marker.update",{element:n,gfx:i.gfx,marker:e,add:!!t}))},wt.prototype.addMarker=function(n,e){this._updateMarker(n,e,!0)},wt.prototype.removeMarker=function(n,e){this._updateMarker(n,e,!1)},wt.prototype.hasMarker=function(n,e){n.id||(n=this._elementRegistry.get(n));const t=this.getGraphics(n);return Hs(t).has(e)},wt.prototype.toggleMarker=function(n,e){this.hasMarker(n,e)?this.removeMarker(n,e):this.addMarker(n,e)},wt.prototype.getRootElement=function(){const n=this._rootElement;return n||this._planes.length?n:this.setRootElement(this.addRootElement(null))},wt.prototype.addRootElement=function(n){const e=this._rootsIdx++;n||(n={id:"__implicitroot_"+e,children:[],isImplicit:!0});const t=n.layer="root-"+e;this._ensureValid("root",n);const i=this.getLayer(t,Oe);return this.hideLayer(t),this._addRoot(n,i),this._planes.push({rootElement:n,layer:i}),n},wt.prototype.removeRootElement=function(n){if(typeof n=="string"&&(n=this._elementRegistry.get(n)),!!this._findPlaneForRoot(n))return this._removeRoot(n),this._removeLayer(n.layer),this._planes=this._planes.filter(function(t){return t.rootElement!==n}),this._rootElement===n&&(this._rootElement=null),n},wt.prototype.setRootElement=function(n){if(n===this._rootElement)return n;let e;if(!n)throw new Error("rootElement required");return e=this._findPlaneForRoot(n),e||(n=this.addRootElement(n)),this._setRoot(n),n},wt.prototype._removeRoot=function(n){const e=this._elementRegistry,t=this._eventBus;t.fire("root.remove",{element:n}),t.fire("root.removed",{element:n}),e.remove(n)},wt.prototype._addRoot=function(n,e){const t=this._elementRegistry,i=this._eventBus;i.fire("root.add",{element:n}),t.add(n,e),i.fire("root.added",{element:n,gfx:e})},wt.prototype._setRoot=function(n,e){const t=this._rootElement;t&&(this._elementRegistry.updateGraphics(t,null,!0),this.hideLayer(t.layer)),n&&(e||(e=this._findPlaneForRoot(n).layer),this._elementRegistry.updateGraphics(n,this._svg,!0),this.showLayer(n.layer)),this._rootElement=n,this._eventBus.fire("root.set",{element:n})},wt.prototype._ensureValid=function(n,e){if(!e.id)throw new Error("element must have an id");if(this._elementRegistry.get(e.id))throw new Error("element <"+e.id+"> already exists");const t=gt[n];if(!mr(t,function(r){return typeof e[r]!="undefined"}))throw new Error("must supply { "+t.join(", ")+" } with "+n)},wt.prototype._setParent=function(n,e,t){_t(e.children,n,t),n.parent=e},wt.prototype._addElement=function(n,e,t,i){t=t||this.getRootElement();const r=this._eventBus,s=this._graphicsFactory;this._ensureValid(n,e),r.fire(n+".add",{element:e,parent:t}),this._setParent(e,t,i);const o=s.create(n,e,i);return this._elementRegistry.add(e,o),s.update(n,e,o),r.fire(n+".added",{element:e,gfx:o}),e},wt.prototype.addShape=function(n,e,t){return this._addElement("shape",n,e,t)},wt.prototype.addConnection=function(n,e,t){return this._addElement("connection",n,e,t)},wt.prototype._removeElement=function(n,e){const t=this._elementRegistry,i=this._graphicsFactory,r=this._eventBus;if(n=t.get(n.id||n),!!n)return r.fire(e+".remove",{element:n}),i.remove(n),ot(n.parent&&n.parent.children,n),n.parent=null,r.fire(e+".removed",{element:n}),t.remove(n),n},wt.prototype.removeShape=function(n){return this._removeElement(n,"shape")},wt.prototype.removeConnection=function(n){return this._removeElement(n,"connection")},wt.prototype.getGraphics=function(n,e){return this._elementRegistry.getGraphics(n,e)},wt.prototype._changeViewbox=function(n){this._eventBus.fire("canvas.viewbox.changing"),n.apply(this),this._cachedViewbox=null,this._viewboxChanged()},wt.prototype._viewboxChanged=function(){this._eventBus.fire("canvas.viewbox.changed",{viewbox:this.viewbox()})},wt.prototype.viewbox=function(n){if(n===void 0&&this._cachedViewbox)return this._cachedViewbox;const e=this._viewport,t=this.getSize();let i,r,s,o,l,h,p;if(n)this._changeViewbox(function(){l=Math.min(t.width/n.width,t.height/n.height);const y=this._svg.createSVGMatrix().scale(l).translate(-n.x,-n.y);Ls(e,y)});else return s=this._rootElement?this.getActiveLayer():null,i=s&&s.getBBox()||{},o=Ls(e),r=o?o.matrix:S(),l=T(r.a,1e3),h=T(-r.e||0,1e3),p=T(-r.f||0,1e3),n=this._cachedViewbox={x:h?h/l:0,y:p?p/l:0,width:t.width/l,height:t.height/l,scale:l,inner:{width:i.width||0,height:i.height||0,x:i.x||0,y:i.y||0},outer:t},n;return n},wt.prototype.scroll=function(n){const e=this._viewport;let t=e.getCTM();return n&&this._changeViewbox(function(){n=ee({dx:0,dy:0},n||{}),t=this._svg.createSVGMatrix().translate(n.dx,n.dy).multiply(t),rn(e,t)}),{x:t.e,y:t.f}},wt.prototype.scrollToElement=function(n,e){let t=100;typeof n=="string"&&(n=this._elementRegistry.get(n));const i=this.findRoot(n);if(i!==this.getRootElement()&&this.setRootElement(i),i===n)return;e||(e={}),typeof e=="number"&&(t=e),e={top:e.top||t,right:e.right||t,bottom:e.bottom||t,left:e.left||t};const r=Za(n),s=C(r),o=this.viewbox(),l=this.zoom();let h,p;o.y+=e.top/l,o.x+=e.left/l,o.width-=(e.right+e.left)/l,o.height-=(e.bottom+e.top)/l;const y=C(o);if(!(r.width<o.width&&r.height<o.height))h=r.x-o.x,p=r.y-o.y;else{const F=Math.max(0,s.right-y.right),j=Math.min(0,s.left-y.left),Q=Math.max(0,s.bottom-y.bottom),he=Math.min(0,s.top-y.top);h=F||j,p=Q||he}this.scroll({dx:-h*l,dy:-p*l})},wt.prototype.zoom=function(n,e){if(!n)return this.viewbox(n).scale;if(n==="fit-viewport")return this._fitViewport(e);let t,i;return this._changeViewbox(function(){typeof e!="object"&&(t=this.viewbox().outer,e={x:t.width/2,y:t.height/2}),i=this._setZoom(n,e)}),T(i.a,1e3)};function rn(n,e){const t="matrix("+e.a+","+e.b+","+e.c+","+e.d+","+e.e+","+e.f+")";n.setAttribute("transform",t)}wt.prototype._fitViewport=function(n){const e=this.viewbox(),t=e.outer,i=e.inner;let r,s;return i.x>=0&&i.y>=0&&i.x+i.width<=t.width&&i.y+i.height<=t.height&&!n?s={x:0,y:0,width:Math.max(i.width+i.x,t.width),height:Math.max(i.height+i.y,t.height)}:(r=Math.min(1,t.width/i.width,t.height/i.height),s={x:i.x+(n?i.width/2-t.width/r/2:0),y:i.y+(n?i.height/2-t.height/r/2:0),width:t.width/r,height:t.height/r}),this.viewbox(s),this.viewbox(!1).scale},wt.prototype._setZoom=function(n,e){const t=this._svg,i=this._viewport,r=t.createSVGMatrix(),s=t.createSVGPoint();let o,l,h,p,y;h=i.getCTM();const w=h.a;return e?(o=ee(s,e),l=o.matrixTransform(h.inverse()),p=r.translate(l.x,l.y).scale(1/w*n).translate(-l.x,-l.y),y=h.multiply(p)):y=r.scale(n),rn(this._viewport,y),y},wt.prototype.getSize=function(){return{width:this._container.clientWidth,height:this._container.clientHeight}},wt.prototype.getAbsoluteBBox=function(n){const e=this.viewbox();let t;n.waypoints?t=this.getGraphics(n).getBBox():t=n;const i=t.x*e.scale-e.x*e.scale,r=t.y*e.scale-e.y*e.scale,s=t.width*e.scale,o=t.height*e.scale;return{x:i,y:r,width:s,height:o}},wt.prototype.resized=function(){delete this._cachedViewbox,this._eventBus.fire("canvas.resized")};var Cn="data-element-id";function un(n){this._elements={},this._eventBus=n}un.$inject=["eventBus"],un.prototype.add=function(n,e,t){var i=n.id;this._validateId(i),Ji(e,Cn,i),t&&Ji(t,Cn,i),this._elements[i]={element:n,gfx:e,secondaryGfx:t}},un.prototype.remove=function(n){var e=this._elements,t=n.id||n,i=t&&e[t];i&&(Ji(i.gfx,Cn,""),i.secondaryGfx&&Ji(i.secondaryGfx,Cn,""),delete e[t])},un.prototype.updateId=function(n,e){this._validateId(e),typeof n=="string"&&(n=this.get(n)),this._eventBus.fire("element.updateId",{element:n,newId:e});var t=this.getGraphics(n),i=this.getGraphics(n,!0);this.remove(n),n.id=e,this.add(n,t,i)},un.prototype.updateGraphics=function(n,e,t){var i=n.id||n,r=this._elements[i];return t?r.secondaryGfx=e:r.gfx=e,e&&Ji(e,Cn,i),e},un.prototype.get=function(n){var e;typeof n=="string"?e=n:e=n&&Ji(n,Cn);var t=this._elements[e];return t&&t.element},un.prototype.filter=function(n){var e=[];return this.forEach(function(t,i){n(t,i)&&e.push(t)}),e},un.prototype.find=function(n){for(var e=this._elements,t=Object.keys(e),i=0;i<t.length;i++){var r=t[i],s=e[r],o=s.element,l=s.gfx;if(n(o,l))return o}},un.prototype.getAll=function(){return this.filter(function(n){return n})},un.prototype.forEach=function(n){var e=this._elements;Object.keys(e).forEach(function(t){var i=e[t],r=i.element,s=i.gfx;return n(r,s)})},un.prototype.getGraphics=function(n,e){var t=n.id||n,i=this._elements[t];return i&&(e?i.secondaryGfx:i.gfx)},un.prototype._validateId=function(n){if(!n)throw new Error("element must have an id");if(this._elements[n])throw new Error("element with id "+n+" already added")};function Hn(n,e,t,i){var r=t.inverse;return Object.defineProperty(n,"remove",{value:function(s){var o=this.indexOf(s);return o!==-1&&(this.splice(o,1),e.unset(s,r,i)),s}}),Object.defineProperty(n,"contains",{value:function(s){return this.indexOf(s)!==-1}}),Object.defineProperty(n,"add",{value:function(s,o){var l=this.indexOf(s);if(typeof o=="undefined"){if(l!==-1)return;o=this.length}l!==-1&&this.splice(l,1),this.splice(o,0,s),l===-1&&e.set(s,r,i)}}),Object.defineProperty(n,"__refs_collection",{value:!0}),n}function Rr(n){return n.__refs_collection===!0}function Fs(n,e){return Object.prototype.hasOwnProperty.call(n,e.name||e)}function Vr(n,e,t){var i=Hn(t[e.name]||[],n,e,t);Object.defineProperty(t,e.name,{enumerable:e.enumerable,value:i}),i.length&&i.forEach(function(r){n.set(r,e.inverse,t)})}function Ds(n,e,t){var i=e.inverse,r=t[e.name];Object.defineProperty(t,e.name,{configurable:e.configurable,enumerable:e.enumerable,get:function(){return r},set:function(s){if(s!==r){var o=r;r=null,o&&n.unset(o,i,t),r=s,n.set(r,i,t)}}})}function us(n,e){if(!(this instanceof us))return new us(n,e);n.inverse=e,e.inverse=n,this.props={},this.props[n.name]=n,this.props[e.name]=e}us.prototype.bind=function(n,e){if(typeof e=="string"){if(!this.props[e])throw new Error("no property <"+e+"> in ref");e=this.props[e]}e.collection?Vr(this,e,n):Ds(this,e,n)},us.prototype.ensureRefsCollection=function(n,e){var t=n[e.name];return Rr(t)||Vr(this,e,n),t},us.prototype.ensureBound=function(n,e){Fs(n,e)||this.bind(n,e)},us.prototype.unset=function(n,e,t){n&&(this.ensureBound(n,e),e.collection?this.ensureRefsCollection(n,e).remove(t):n[e.name]=void 0)},us.prototype.set=function(n,e,t){n&&(this.ensureBound(n,e),e.collection?this.ensureRefsCollection(n,e).add(t):n[e.name]=t)};var Aa=new us({name:"children",enumerable:!0,collection:!0},{name:"parent"}),Wa=new us({name:"labels",enumerable:!0,collection:!0},{name:"labelTarget"}),_l=new us({name:"attachers",collection:!0},{name:"host"}),Vu=new us({name:"outgoing",collection:!0},{name:"source"}),Bc=new us({name:"incoming",collection:!0},{name:"target"});function yu(){Object.defineProperty(this,"businessObject",{writable:!0}),Object.defineProperty(this,"label",{get:function(){return this.labels[0]},set:function(n){var e=this.label,t=this.labels;!n&&e?t.remove(e):t.add(n,0)}}),Aa.bind(this,"parent"),Wa.bind(this,"labels"),Vu.bind(this,"outgoing"),Bc.bind(this,"incoming")}function ou(){yu.call(this),Aa.bind(this,"children"),_l.bind(this,"host"),_l.bind(this,"attachers")}po(ou,yu);function bl(){yu.call(this),Aa.bind(this,"children")}po(bl,ou);function Wu(){ou.call(this),Wa.bind(this,"labelTarget")}po(Wu,ou);function zl(){yu.call(this),Vu.bind(this,"source"),Bc.bind(this,"target")}po(zl,yu);var vu={connection:zl,shape:ou,label:Wu,root:bl};function Ac(n,e){var t=vu[n];if(!t)throw new Error("unknown type: <"+n+">");return ee(new t,e)}function Tu(n){return n instanceof yu}function tl(){this._uid=12}tl.prototype.createRoot=function(n){return this.create("root",n)},tl.prototype.createLabel=function(n){return this.create("label",n)},tl.prototype.createShape=function(n){return this.create("shape",n)},tl.prototype.createConnection=function(n){return this.create("connection",n)},tl.prototype.create=function(n,e){return e=ee({},e||{}),e.id||(e.id=n+"_"+this._uid++),Ac(n,e)};function k(n){return n.childNodes[0]}function D(n){return n.parentNode.childNodes[1]}function M(n,e,t,i,r){var s=$();s.setTranslate(e,t);var o=$();o.setRotate(0,0,0);var l=$();l.setScale(1,1),Ls(n,[s,o,l])}function L(n,e,t){var i=$();i.setTranslate(e,t),Ls(n,i)}function z(n,e){var t=$();t.setRotate(e,0,0),Ls(n,t)}function K(n,e){this._eventBus=n,this._elementRegistry=e}K.$inject=["eventBus","elementRegistry"],K.prototype._getChildrenContainer=function(n){var e=this._elementRegistry.getGraphics(n),t;return n.parent?(t=D(e),t||(t=Yr("g"),Hs(t).add("djs-children"),Br(e.parentNode,t))):t=e,t},K.prototype._clear=function(n){var e=k(n);return ln(e),e},K.prototype._createContainer=function(n,e,t,i){var r=Yr("g");Hs(r).add("djs-group"),typeof t!="undefined"?me(r,e,e.childNodes[t]):Br(e,r);var s=Yr("g");Hs(s).add("djs-element"),Hs(s).add("djs-"+n),i&&Hs(s).add("djs-frame"),Br(r,s);var o=Yr("g");return Hs(o).add("djs-visual"),Br(s,o),s},K.prototype.create=function(n,e,t){var i=this._getChildrenContainer(e.parent);return this._createContainer(n,i,t,O(e))},K.prototype.updateContainments=function(n){var e=this,t=this._elementRegistry,i;i=qt(n,function(r,s){return s.parent&&(r[s.parent.id]=s.parent),r},{}),$t(i,function(r){var s=r.children;if(s){var o=e._getChildrenContainer(r);$t(s.slice().reverse(),function(l){var h=t.getGraphics(l);me(h.parentNode,o)})}})},K.prototype.drawShape=function(n,e,t={}){var i=this._eventBus;return i.fire("render.shape",{gfx:n,element:e,attrs:t})},K.prototype.getShapePath=function(n){var e=this._eventBus;return e.fire("render.getShapePath",n)},K.prototype.drawConnection=function(n,e,t={}){var i=this._eventBus;return i.fire("render.connection",{gfx:n,element:e,attrs:t})},K.prototype.getConnectionPath=function(n){var e=this._eventBus;return e.fire("render.getConnectionPath",n)},K.prototype.update=function(n,e,t){if(e.parent){var i=this._clear(t);if(n==="shape")this.drawShape(i,e),L(t,e.x,e.y);else if(n==="connection")this.drawConnection(i,e);else throw new Error("unknown type: "+n);e.hidden?Ji(t,"display","none"):Ji(t,"display","block")}},K.prototype.remove=function(n){var e=this._elementRegistry.getGraphics(n);ra(e.parentNode)};function me(n,e,t){var i=t||e.firstChild;n!==i&&e.insertBefore(n,i)}var Te={__depends__:[be],__init__:["canvas"],canvas:["type",wt],elementRegistry:["type",un],elementFactory:["type",tl],eventBus:["type",Bn],graphicsFactory:["type",K]};function nt(n){var e=new No(n);return e.init(),e}function Pt(n){n=n||{};var e={config:["value",n]},t=[e,Te].concat(n.modules||[]);return nt(t)}function Wt(n,e){this._injector=e||Pt(n),this.get("eventBus").fire("diagram.init")}Wt.prototype.get=function(n,e){return this._injector.get(n,e)},Wt.prototype.invoke=function(n,e,t){return this._injector.invoke(n,e,t)},Wt.prototype.destroy=function(){this.get("eventBus").fire("diagram.destroy")},Wt.prototype.clear=function(){this.get("eventBus").fire("diagram.clear")};var Gn=new us({name:"dmnElementRef",enumerable:!0},{name:"di",configurable:!0});function Gi(n,e){var t=[];function i(Le){var et=Le.gfx;if(et)throw new Error("already rendered "+Le.id);return n.element(Le)}function r(Le){return n.root(Le)}function s(Le){try{var et=Le.di&&i(Le);return et}catch(Me){ye(Me.message,{element:Le,error:Me})}}function o(Le,et){var Me=Le.dmnDI;if(!Me)throw new Error("no dmndi:DMNDI");var ke=Me.diagrams||[];if(et&&ke.indexOf(et)===-1)throw new Error("diagram not part of dmndi:DMNDI");if(!et&&ke&&ke.length&&(et=ke[0]),!et)throw new Error("no diagram to display");Le.di=et,w(et),r(Le),l(Le.get("drgElement")),h(Le.get("artifact")),he()}function l(Le){$t(Le,function(et){s(et),y(et)})}function h(Le){$t(Le,function(et){Mt(et,"dmn:Association")?p(et):s(et)})}function p(Le){Q(function(){s(Le)})}function y(Le){$t(["informationRequirement","knowledgeRequirement","authorityRequirement"],function(et){$t(Le[et],function(Me){Q(function(){s(Me)})})})}function w(Le){$t(Le.diagramElements,F)}function F(Le){j(Le)}function j(Le){var et=Le.dmnElementRef;et?et.di?ye("multiple DI elements defined for element",{element:et}):(Gn.bind(et,"di"),et.di=Le):ye("no DMN element referenced in element",{element:Le})}function Q(Le){t.push(Le)}function he(){$t(t,function(Le){Le()})}function ye(Le,et){n.error(Le,et)}return{handleDefinitions:o}}function ts(n,e,t){var i=n.get("drdImporter"),r=n.get("eventBus"),s,o=[];function l(h){var p={root:function(w){return i.root(w)},element:function(w,F){return i.add(w,F)},error:function(w,F){o.push({message:w,context:F})}},y=new Gi(p);y.handleDefinitions(h)}r.fire("import.start",{definitions:e});try{l(e)}catch(h){s=h}r.fire("import.done",{error:s,warnings:o}),t(s,o)}var io="$NO_OP",ca="a runtime error occured! Use Inferno in development environment to find the error.",au=!!(typeof window!="undefined"&&window.document),A=Array.isArray;function v(n){var e=typeof n;return e==="string"||e==="number"}function _(n){return tn(n)||tt(n)}function N(n){return tt(n)||n===!1||At(n)||tn(n)}function q(n){return typeof n=="function"}function de(n){return typeof n=="string"}function Pe(n){return typeof n=="number"}function tt(n){return n===null}function At(n){return n===!0}function tn(n){return n===void 0}function Cr(n){return typeof n=="object"}function Jn(n){throw n||(n=ca),new Error("Inferno Error: "+n)}function rs(n){console.error(n)}function ir(n,e){var t={};if(n)for(var i in n)t[i]=n[i];if(e)for(var r in e)t[r]=e[r];return t}function mo(n){var e;if(A(n)){var t=n.length>3?n.slice(0,3).toString()+",...":n.toString();e="Array("+t+")"}else if(v(n))e="Text("+n+")";else if(N(n))e="InvalidVNode("+n+")";else{var i=n.flags;if(i&481)e="<"+n.type+(n.className?' class="'+n.className+'"':"")+">";else if(i&16)e="Text("+n.children+")";else if(i&1024)e="Portal*";else{var r=n.type,s=r.name||r.displayName||r.constructor.name||(r.toString().match(/^function\s*([^\s(]+)/)||[])[1];e="<"+s+" />"}}return">> "+e+`
`}function Pl(n,e){for(var t={},i=0,r=n.length;i<r;i++){var s=n[i];if(A(s))return`Encountered ARRAY in mount, array must be flattened, or normalize used. Location: 
`+mo(s);if(N(s)){if(e)return`Encountered invalid node when preparing to keyed algorithm. Location: 
`+mo(s);if(Object.keys(t).length!==0)return`Encountered invalid node with mixed keys. Location: 
`+mo(s);continue}typeof s=="object"&&(s.isValidated=!0);var o=s.key;if(!_(o)&&!v(o))return`Encountered child vNode where key property is not string or number. Location: 
`+mo(s);var l=s.children,h=s.childFlags;if(!N(l)){var p=void 0;if(h&12?p=Pl(l,s.childFlags&8):h===2&&(p=Pl([l],s.childFlags&8)),p)return p+=mo(s),p}if(e&&_(o))return`Encountered child without key during keyed algorithm. If this error points to Array make sure children is flat list. Location: 
`+mo(s);if(!e&&_(o)){if(Object.keys(t).length!==0)return`Encountered children with key missing. Location: 
`+mo(s);continue}if(t[o])return"Encountered two children with same key: {"+o+`}. Location: 
`+mo(s);t[o]=!0}}function Ba(n){{if(n.childFlags&1)return;if(n.flags&64&&Jn("input elements can't have children."),n.flags&128&&Jn("textarea elements can't have children."),n.flags&481){var e=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],t=n.type.toLowerCase();t==="media"&&Jn("media elements can't have children.");var i=e.indexOf(t);i!==-1&&Jn(e[i]+" elements can't have children.")}}}function Ou(n){{if(n.isValidated===!1&&n.children&&n.flags&481){var e=Pl(Array.isArray(n.children)?n.children:[n.children],(n.childFlags&8)>0);e&&Jn(e+mo(n))}n.isValidated=!0}}var ku="$";function dh(n,e,t,i,r,s,o,l){return{childFlags:n,children:e,className:t,dom:null,flags:i,isValidated:!1,key:r===void 0?null:r,parentVNode:null,props:s===void 0?null:s,ref:o===void 0?null:o,type:l}}function Re(n,e,t,i,r,s,o,l){n&14&&Jn("Creating Component vNodes using createVNode is not allowed. Use Inferno.createComponentVNode method.");var h=r===void 0?1:r,p=dh(h,i,t,n,o,s,l,e);return h===0&&Pp(p,p.children),Ba(p),p}function jn(n,e,t,i,r){n&1&&Jn("Creating element vNodes using createComponentVNode is not allowed. Use Inferno.createVNode method."),(n&2)>0&&(n=e.prototype&&q(e.prototype.render)?4:8);var s=e.defaultProps;if(!_(s)){t||(t={});for(var o in s)tn(t[o])&&(t[o]=s[o])}if((n&8)>0){var l=e.defaultHooks;if(!_(l))if(!r)r=l;else for(var h in l)tn(r[h])&&(r[h]=l[h])}var p=dh(1,null,null,n,i,t,r,e),y=Oc.createVNode;return q(y)&&y(p),p}function bo(n,e){return dh(1,_(n)?"":n,null,16,e,null,null,null)}function Tc(n){var e=n.props;if(e){var t=n.flags;t&481&&(e.children!==void 0&&_(n.children)&&Pp(n,e.children),e.className!==void 0&&(n.className=e.className||null,e.className=void 0)),e.key!==void 0&&(n.key=e.key,e.key=void 0),e.ref!==void 0&&(t&8?n.ref=ir(n.ref,e.ref):n.ref=e.ref,e.ref=void 0)}return n}function lu(n){var e,t=n.flags;if(t&14){var i,r=n.props;if(!tt(r)){i={};for(var s in r)i[s]=r[s]}e=jn(t,n.type,i,n.key,n.ref)}else t&481?e=Re(t,n.type,n.className,n.children,n.childFlags,n.props,n.key,n.ref):t&16?e=bo(n.children,n.key):t&1024&&(e=n);return e}function Gc(){return bo("",null)}function ph(n,e,t,i){for(var r=n.length;t<r;t++){var s=n[t];if(!N(s)){var o=i+ku+t;if(A(s))ph(s,e,0,o);else{if(v(s))s=bo(s,o);else{var l=s.key,h=de(l)&&l[0]===ku;(!tt(s.dom)||h)&&(s=lu(s)),tt(l)||h?s.key=o:s.key=i+l}e.push(s)}}}}function Pp(n,e){var t,i=1;if(N(e))t=e;else if(de(e))i=2,t=bo(e);else if(Pe(e))i=2,t=bo(e+"");else if(A(e)){var r=e.length;if(r===0)t=null,i=1;else{(Object.isFrozen(e)||e.$===!0)&&(e=e.slice()),i=8;for(var s=0;s<r;s++){var o=e[s];if(N(o)||A(o)){t=t||e.slice(0,s),ph(e,t,s,"");break}else if(v(o))t=t||e.slice(0,s),t.push(bo(o,ku+s));else{var l=o.key,h=tt(o.dom),p=tt(l),y=!p&&de(l)&&l[0]===ku;!h||p||y?(t=t||e.slice(0,s),(!h||y)&&(o=lu(o)),(p||y)&&(o.key=ku+s),t.push(o)):t&&t.push(o)}}t=t||e,t.$=!0}}else t=e,tt(e.dom)||(t=lu(e)),i=2;return n.children=t,n.childFlags=i,Ba(n),n}var Oc={afterRender:null,beforeRender:null,createVNode:null,renderComplete:null},kh="http://www.w3.org/1999/xlink",Xf="http://www.w3.org/XML/1998/namespace",Lg="http://www.w3.org/2000/svg",$g={"xlink:actuate":kh,"xlink:arcrole":kh,"xlink:href":kh,"xlink:role":kh,"xlink:show":kh,"xlink:title":kh,"xlink:type":kh,"xml:base":Xf,"xml:lang":Xf,"xml:space":Xf},Fl={},kc=[];Object.freeze(Fl);function Ld(n,e){n.appendChild(e)}function Fp(n,e,t){_(t)?Ld(n,e):n.insertBefore(e,t)}function jg(n,e){return e?document.createElementNS(Lg,n):document.createElement(n)}function Mp(n,e,t){n.replaceChild(e,t)}function Vg(n,e){n.removeChild(e)}function Ip(n){for(var e;(e=n.shift())!==void 0;)e()}var $d={},Np={};function Wg(n,e,t){var i=$d[n],r=t.$EV;e?(i||(Np[n]=Ug(n),$d[n]=0),r||(r=t.$EV={}),r[n]||$d[n]++,r[n]=e):r&&r[n]&&($d[n]--,i===1&&(document.removeEventListener(Yf(n),Np[n]),Np[n]=null),r[n]=e)}function xu(n,e,t,i,r){for(var s=e;!tt(s);){if(t&&s.disabled)return;var o=s.$EV;if(o){var l=o[i];if(l&&(r.dom=s,l.event?l.event(l.data,n):l(n),n.cancelBubble))return}s=s.parentNode}}function Yf(n){return n.substr(2).toLowerCase()}function Hg(){this.cancelBubble=!0,this.immediatePropagationStopped||this.stopImmediatePropagation()}function Ug(n){var e=function(t){var i=t.type,r=i==="click"||i==="dblclick";if(r&&t.button!==0)return t.stopPropagation(),!1;t.stopPropagation=Hg;var s={dom:document};Object.defineProperty(t,"currentTarget",{configurable:!0,get:function(){return s.dom}}),xu(t,t.target,r,n,s)};return document.addEventListener(Yf(n),e),e}function Gf(n,e){var t=document.createElement("i");return t.innerHTML=e,t.innerHTML===n.innerHTML}function zg(n,e){return!!(e&&e.dangerouslySetInnerHTML&&e.dangerouslySetInnerHTML.__html&&Gf(n,e.dangerouslySetInnerHTML.__html))}function _u(n,e,t){if(n[e]){var i=n[e];i.event?i.event(i.data,t):i(t)}else{var r=e.toLowerCase();n[r]&&n[r](t)}}function Jh(n,e){var t=function(i){i.stopPropagation();var r=this.$V;if(r){var s=r.props||Fl,o=r.dom;if(de(n))_u(s,n,i);else for(var l=0;l<n.length;l++)_u(s,n[l],i);if(q(e)){var h=this.$V,p=h.props||Fl;e(p,o,!1,h)}}};return Object.defineProperty(t,"wrapped",{configurable:!1,enumerable:!1,value:!0,writable:!1}),t}function Kf(n){return n==="checkbox"||n==="radio"}var yc=Jh("onInput",Bp),e1=Jh(["onClick","onChange"],Bp);function jd(n){n.stopPropagation()}jd.wrapped=!0;function _h(n,e){Kf(e.type)?(n.onchange=e1,n.onclick=jd):n.oninput=yc}function Bp(n,e){var t=n.type,i=n.value,r=n.checked,s=n.multiple,o=n.defaultValue,l=!_(i);t&&t!==e.type&&e.setAttribute("type",t),!_(s)&&s!==e.multiple&&(e.multiple=s),!_(o)&&!l&&(e.defaultValue=o+""),Kf(t)?(l&&(e.value=i),_(r)||(e.checked=r)):l&&e.value!==i?(e.defaultValue=i,e.value=i):_(r)||(e.checked=r)}function Kc(n,e){var t=n.type;if(t==="optgroup"){var i=n.children,r=n.childFlags;if(r&12)for(var s=0,o=i.length;s<o;s++)Rp(i[s],e);else r===2&&Rp(i,e)}else Rp(n,e)}function Rp(n,e){var t=n.props||Fl,i=n.dom;i.value=t.value,A(e)&&e.indexOf(t.value)!==-1||t.value===e?i.selected=!0:(!_(e)||!_(t.selected))&&(i.selected=t.selected||!1)}var Lp=Jh("onChange",$p);function t1(n){n.onchange=Lp}function $p(n,e,t,i){var r=!!n.multiple;!_(n.multiple)&&r!==e.multiple&&(e.multiple=r);var s=i.childFlags;if(!(s&1)){var o=i.children,l=n.value;if(t&&_(l)&&(l=n.defaultValue),s&12)for(var h=0,p=o.length;h<p;h++)Kc(o[h],l);else s===2&&Kc(o,l)}}var qg=Jh("onInput",Xg),Qg=Jh("onChange");function n1(n,e){n.oninput=qg,e.onChange&&(n.onchange=Qg)}function Xg(n,e,t){var i=n.value,r=e.value;if(_(i)){if(t){var s=n.defaultValue;!_(s)&&s!==r&&(e.defaultValue=s,e.value=s)}}else r!==i&&(e.defaultValue=i,e.value=i)}function Zf(n,e,t,i,r,s){n&64?Bp(i,t):n&256?$p(i,t,r,e):n&128&&Xg(i,t,r),s&&(t.$V=e)}function Yg(n,e,t){n&64?_h(e,t):n&256?t1(e):n&128&&n1(e,t)}function Gg(n){return n.type&&Kf(n.type)?!_(n.checked):!_(n.value)}function ql(n,e){Rc(n),e&&n.dom&&(Vg(e,n.dom),n.dom=null)}function Rc(n){var e=n.flags;if(e&481){var t=n.ref,i=n.props;q(t)&&t(null);var r=n.children,s=n.childFlags;if(s&12?Ph(r):s===2&&Rc(r),!tt(i))for(var o in i)switch(o){case"onClick":case"onDblClick":case"onFocusIn":case"onFocusOut":case"onKeyDown":case"onKeyPress":case"onKeyUp":case"onMouseDown":case"onMouseMove":case"onMouseUp":case"onSubmit":case"onTouchEnd":case"onTouchMove":case"onTouchStart":Wg(o,null,n.dom);break}}else{var l=n.children;if(l)if(e&14){var h=n.ref;e&4?(q(l.componentWillUnmount)&&l.componentWillUnmount(),q(h)&&h(null),l.$UN=!0,l.$LI&&Rc(l.$LI)):(!_(h)&&q(h.onComponentWillUnmount)&&h.onComponentWillUnmount(n.dom,n.props||Fl),Rc(l))}else e&1024&&ql(l,n.type)}}function Ph(n){for(var e=0,t=n.length;e<t;e++)Rc(n[e])}function Vd(n,e){Ph(e),n.textContent=""}function i1(n,e){return function(t){n(e.data,t)}}function Kg(n,e,t){var i=n.toLowerCase();if(!q(e)&&!_(e)){var r=e.event;r&&q(r)?t[i]=i1(r,e):Jn('an event on a VNode "'+n+'". was not a function or a valid linkEvent.')}else{var s=t[i];(!s||!s.wrapped)&&(t[i]=e)}}function jp(n,e){switch(n){case"animationIterationCount":case"borderImageOutset":case"borderImageSlice":case"borderImageWidth":case"boxFlex":case"boxFlexGroup":case"boxOrdinalGroup":case"columnCount":case"fillOpacity":case"flex":case"flexGrow":case"flexNegative":case"flexOrder":case"flexPositive":case"flexShrink":case"floodOpacity":case"fontWeight":case"gridColumn":case"gridRow":case"lineClamp":case"lineHeight":case"opacity":case"order":case"orphans":case"stopOpacity":case"strokeDasharray":case"strokeDashoffset":case"strokeMiterlimit":case"strokeOpacity":case"strokeWidth":case"tabSize":case"widows":case"zIndex":case"zoom":return e;default:return e+"px"}}function Jf(n,e,t){var i=t.style,r,s;if(de(e)){i.cssText=e;return}if(!_(n)&&!de(n)){for(r in e)s=e[r],s!==n[r]&&(i[r]=Pe(s)?jp(r,s):s);for(r in n)_(e[r])&&(i[r]="")}else for(r in e)s=e[r],i[r]=Pe(s)?jp(r,s):s}function em(n,e,t,i,r,s,o){switch(n){case"onClick":case"onDblClick":case"onFocusIn":case"onFocusOut":case"onKeyDown":case"onKeyPress":case"onKeyUp":case"onMouseDown":case"onMouseMove":case"onMouseUp":case"onSubmit":case"onTouchEnd":case"onTouchMove":case"onTouchStart":Wg(n,t,i);break;case"children":case"childrenType":case"className":case"defaultValue":case"key":case"multiple":case"ref":break;case"autoFocus":i.autofocus=!!t;break;case"allowfullscreen":case"autoplay":case"capture":case"checked":case"controls":case"default":case"disabled":case"hidden":case"indeterminate":case"loop":case"muted":case"novalidate":case"open":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"selected":i[n]=!!t;break;case"defaultChecked":case"value":case"volume":if(s&&n==="value")return;var l=_(t)?"":t;i[n]!==l&&(i[n]=l);break;case"dangerouslySetInnerHTML":var h=e&&e.__html||"",p=t&&t.__html||"";h!==p&&!_(p)&&!Gf(i,p)&&(tt(o)||(o.childFlags&12?Ph(o.children):o.childFlags===2&&Rc(o.children),o.children=null,o.childFlags=1),i.innerHTML=p);break;default:n[0]==="o"&&n[1]==="n"?Kg(n,t,i):_(t)?i.removeAttribute(n):n==="style"?Jf(e,t,i):r&&$g[n]?i.setAttributeNS($g[n],n,t):i.setAttribute(n,t);break}}function tm(n,e,t,i,r){var s=!1,o=(e&448)>0;o&&(s=Gg(t),s&&Yg(e,i,t));for(var l in t)em(l,null,t[l],i,r,s,null);o&&Zf(e,n,i,t,!0,s)}function Vp(n,e,t,i){var r=new e(t,i);if(n.children=r,r.$V=n,r.$BS=!1,r.context=i,r.props===Fl&&(r.props=t),r.$UN=!1,q(r.componentWillMount)){if(r.$BR=!0,r.componentWillMount(),r.$PSS){var s=r.state,o=r.$PS;if(tt(s))r.state=o;else for(var l in o)s[l]=o[l];r.$PSS=!1,r.$PS=null}r.$BR=!1}q(Oc.beforeRender)&&Oc.beforeRender(r);var h=ed(r.render(t,r.state,i),n),p;return q(r.getChildContext)&&(p=r.getChildContext()),_(p)?r.$CX=i:r.$CX=ir(i,p),q(Oc.afterRender)&&Oc.afterRender(r),r.$LI=h,r}function ed(n,e){return A(n)&&Jn("a valid Inferno VNode (or null) must be returned from a component render. You may have returned an array or an invalid object."),N(n)?n=Gc():v(n)?n=bo(n,null):(n.dom&&(n=lu(n)),n.flags&14&&(n.parentVNode=e)),n}function Hu(n,e,t,i){var r=n.flags;if(r&481)return Zg(n,e,t,i);if(r&14)return Jg(n,e,t,i,(r&4)>0);if(r&512||r&16)return nm(n,e);if(r&1024)return Hu(n.children,n.type,t,!1),n.dom=nm(Gc(),e);Jn(typeof n=="object"?`mount() received an object that's not a valid VNode, you should stringify it first, fix createVNode flags or call normalizeChildren. Object: "`+JSON.stringify(n)+'".':'mount() expects a valid VNode, instead it received an object with the type "'+typeof n+'".')}function nm(n,e){var t=n.dom=document.createTextNode(n.children);return tt(e)||Ld(e,t),t}function Zg(n,e,t,i){var r=n.flags,s=n.children,o=n.props,l=n.className,h=n.ref,p=n.childFlags;i=i||(r&32)>0;var y=jg(n.type,i);if(n.dom=y,!_(l)&&l!==""&&(i?y.setAttribute("class",l):y.className=l),Ou(n),tt(e)||Ld(e,y),!(p&1)){var w=i===!0&&n.type!=="foreignObject";p===2?Hu(s,y,t,w):p&12&&Fh(s,y,t,w)}return tt(o)||tm(n,r,o,y,i),de(h)&&Jn('string "refs" are not supported in Inferno 1.0. Use callback "refs" instead.'),q(h)&&im(y,h),y}function Fh(n,e,t,i){for(var r=0,s=n.length;r<s;r++){var o=n[r];tt(o.dom)||(n[r]=o=lu(o)),Hu(o,e,t,i)}}function Jg(n,e,t,i,r){var s,o=n.type,l=n.props||Fl,h=n.ref;if(r){var p=Vp(n,o,l,t);n.dom=s=Hu(p.$LI,null,p.$CX,i),ty(n,h,p),p.$UPD=!1}else{var y=ed(o(l,t),n);n.children=y,n.dom=s=Hu(y,null,t,i),ny(l,h,s)}return tt(e)||Ld(e,s),s}function ey(n){return function(){n.$UPD=!0,n.componentDidMount(),n.$UPD=!1}}function ty(n,e,t){q(e)?e(t):v(e)?Jn('string "refs" are not supported in Inferno 1.0. Use callback "refs" instead.'):!_(e)&&Cr(e)&&n.flags&4&&Jn("functional component lifecycle events are not supported on ES2015 class components."),q(t.componentDidMount)&&kc.push(ey(t))}function r1(n,e,t){return function(){return n.onComponentDidMount(e,t)}}function ny(n,e,t){_(e)||(q(e.onComponentWillMount)&&e.onComponentWillMount(n),q(e.onComponentDidMount)&&kc.push(r1(e,t,n)))}function im(n,e){kc.push(function(){return e(n)})}function s1(n,e,t,i,r){var s=n.type,o=n.ref,l=n.props||Fl;if(r){var h=Vp(n,s,l,t),p=h.$LI;Mh(p,e,h.$CX,i),n.dom=p.dom,ty(n,o,h),h.$UPD=!1}else{var y=ed(s(l,t),n);Mh(y,e,t,i),n.children=y,n.dom=y.dom,ny(l,o,e)}}function o1(n,e,t,i){var r=n.children,s=n.props,o=n.className,l=n.flags,h=n.ref;if(i=i||(l&32)>0,e.nodeType!==1||e.tagName.toLowerCase()!==n.type){rs("Inferno hydration: Server-side markup doesn't match client-side markup or Initial render target is not empty");var p=Zg(n,null,t,i);n.dom=p,Mp(e.parentNode,p,e)}else{n.dom=e;var y=e.firstChild,w=n.childFlags;if(w&1)!tt(e.firstChild)&&!zg(e,s)&&(e.textContent="",l&448&&(e.defaultValue=""));else{for(var F=null;y;)F=y.nextSibling,y.nodeType===8&&(y.data==="!"?e.replaceChild(document.createTextNode(""),y):e.removeChild(y)),y=F;if(y=e.firstChild,w===2)tt(y)?Hu(r,e,t,i):(F=y.nextSibling,Mh(r,y,t,i),y=F);else if(w&12)for(var j=0,Q=r.length;j<Q;j++){var he=r[j];tt(y)?Hu(he,e,t,i):(F=y.nextSibling,Mh(he,y,t,i),y=F)}for(;y;)F=y.nextSibling,e.removeChild(y),y=F}tt(s)||tm(n,l,s,e,i),_(o)?e.className!==""&&e.removeAttribute("class"):i?e.setAttribute("class",o):e.className=o,q(h)?im(e,h):de(h)&&Jn('string "refs" are not supported in Inferno 1.0. Use callback "refs" instead.')}}function a1(n,e){if(e.nodeType!==3){var t=nm(n,null);n.dom=t,Mp(e.parentNode,t,e)}else{var i=n.children;e.nodeValue!==i&&(e.nodeValue=i),n.dom=e}}function Mh(n,e,t,i){var r=n.flags;r&14?s1(n,e,t,i,(r&4)>0):r&481?o1(n,e,t,i):r&16?a1(n,e):r&512?n.dom=e:(Jn('hydrate() expects a valid VNode, instead it received an object with the type "'+typeof n+'".'),Jn())}function iy(n,e,t){var i=e.firstChild;if(!tt(i))for(N(n)||Mh(n,i,Fl,!1),i=e.firstChild;i=i.nextSibling;)e.removeChild(i);kc.length>0&&Ip(kc),e.$V=n,q(t)&&t()}function Wp(n,e,t,i,r){Rc(n),Mp(t,Hu(e,null,i,r),n.dom)}function Zc(n,e,t,i,r){var s=e.flags|0;n.flags!==s||s&2048?Wp(n,e,t,i,r):s&481?u1(n,e,t,i,r,s):s&14?sm(n,e,t,i,r,(s&4)>0):s&16?c1(n,e):s&512?e.dom=n.dom:l1(n,e,i)}function ry(n,e){n.textContent!==e.children&&(n.textContent=e.children)}function l1(n,e,t){var i=n.type,r=e.type,s=e.children;if(rm(n.childFlags,e.childFlags,n.children,s,i,t,!1),e.dom=n.dom,i!==r&&!N(s)){var o=s.dom;i.removeChild(o),r.appendChild(o)}}function u1(n,e,t,i,r,s){var o=e.type;if(n.type!==o)Wp(n,e,t,i,r);else{var l=n.dom,h=n.props,p=e.props,y=!1,w=!1,F;if(e.dom=l,r=r||(s&32)>0,h!==p){var j=h||Fl;if(F=p||Fl,F!==Fl){y=(s&448)>0,y&&(w=Gg(F));for(var Q in F){var he=j[Q],ye=F[Q];he!==ye&&em(Q,he,ye,l,r,w,n)}}if(j!==Fl)for(var Le in j)!F.hasOwnProperty(Le)&&!_(j[Le])&&em(Le,j[Le],null,l,r,w,n)}var et=n.children,Me=e.children,ke=e.ref,Qe=n.className,ft=e.className;Ou(e),s&4096?ry(l,Me):rm(n.childFlags,e.childFlags,et,Me,l,i,r&&o!=="foreignObject"),y&&Zf(s,e,l,F,!1,w),Qe!==ft&&(_(ft)?l.removeAttribute("class"):r?l.setAttribute("class",ft):l.className=ft),q(ke)&&n.ref!==ke?im(l,ke):de(ke)&&Jn('string "refs" are not supported in Inferno 1.0. Use callback "refs" instead.')}}function rm(n,e,t,i,r,s,o){switch(n){case 2:switch(e){case 2:Zc(t,i,r,s,o);break;case 1:ql(t,r);break;default:ql(t,r),Fh(i,r,s,o);break}break;case 1:switch(e){case 2:Hu(i,r,s,o);break;case 1:break;default:Fh(i,r,s,o);break}break;default:if(e&12){var l=t.length,h=i.length;l===0?h>0&&Fh(i,r,s,o):h===0?Vd(r,t):e===8&&n===8?h1(t,i,r,s,o,l,h):Wd(t,i,r,s,o,l,h)}else e===1?Vd(r,t):e===2&&(Vd(r,t),Hu(i,r,s,o));break}}function sy(n,e,t,i,r,s,o,l,h){var p=n.state,y=n.props;t.children=n;var w;if(n.$UN){rs("Inferno Error: Can only update a mounted or mounting component. This usually means you called setState() or forceUpdate() on an unmounted component. This is a no-op.");return}if(y!==i||i===Fl){if(!h&&q(n.componentWillReceiveProps)){if(n.$BR=!0,n.componentWillReceiveProps(i,s),n.$UN)return;n.$BR=!1}n.$PSS&&(e=ir(e,n.$PS),n.$PSS=!1,n.$PS=null)}var F=!!n.shouldComponentUpdate;if(l||!F||F&&n.shouldComponentUpdate(i,e,s)){q(n.componentWillUpdate)&&(n.$BS=!0,n.componentWillUpdate(i,e,s),n.$BS=!1),n.props=i,n.state=e,n.context=s,q(Oc.beforeRender)&&Oc.beforeRender(n),w=n.render(i,e,s),q(Oc.afterRender)&&Oc.afterRender(n);var j=w!==io,Q;if(q(n.getChildContext)&&(Q=n.getChildContext()),_(Q)?Q=s:Q=ir(s,Q),n.$CX=Q,j){var he=n.$LI,ye=ed(w,t);Zc(he,ye,r,Q,o),n.$LI=ye,q(n.componentDidUpdate)&&n.componentDidUpdate(y,p)}}else n.props=i,n.state=e,n.context=s;t.dom=n.$LI.dom}function sm(n,e,t,i,r,s){var o=e.type,l=n.key,h=e.key;if(n.type!==o||l!==h)Wp(n,e,t,i,r);else{var p=e.props||Fl;if(s){var y=n.children;y.$UPD=!0,y.$V=e,sy(y,y.state,e,p,t,i,r,!1,!1),y.$UPD=!1}else{var w=!0,F=n.props,j=e.ref,Q=!_(j),he=n.children;if(e.dom=n.dom,e.children=he,Q&&q(j.onComponentShouldUpdate)&&(w=j.onComponentShouldUpdate(F,p)),w!==!1){Q&&q(j.onComponentWillUpdate)&&j.onComponentWillUpdate(F,p);var ye=o(p,i);ye!==io&&(ye=ed(ye,e),Zc(he,ye,t,i,r),e.children=ye,e.dom=ye.dom,Q&&q(j.onComponentDidUpdate)&&j.onComponentDidUpdate(F,p))}else he.flags&14&&(he.parentVNode=e)}}}function c1(n,e){var t=e.children,i=n.dom;t!==n.children&&(i.nodeValue=t),e.dom=i}function Wd(n,e,t,i,r,s,o){for(var l=s>o?o:s,h=0,p,y;h<l;h++)p=e[h],y=n[h],p.dom&&(p=e[h]=lu(p)),Zc(y,p,t,i,r),n[h]=p;if(s<o)for(h=l;h<o;h++)p=e[h],p.dom&&(p=e[h]=lu(p)),Hu(p,t,i,r);else if(s>o)for(h=l;h<s;h++)ql(n[h],t)}function h1(n,e,t,i,r,s,o){var l=s-1,h=o-1,p,y=0,w=n[y],F=e[y],j;e:{for(;w.key===F.key;){if(F.dom&&(e[y]=F=lu(F)),Zc(w,F,t,i,r),n[y]=F,y++,y>l||y>h)break e;w=n[y],F=e[y]}for(w=n[l],F=e[h];w.key===F.key;){if(F.dom&&(e[h]=F=lu(F)),Zc(w,F,t,i,r),n[l]=F,l--,h--,y>l||y>h)break e;w=n[l],F=e[h]}}if(y>l){if(y<=h){j=h+1;for(var Q=j<o?e[j].dom:null;y<=h;)F=e[y],F.dom&&(e[y]=F=lu(F)),y++,Fp(t,Hu(F,null,i,r),Q)}}else if(y>h)for(;y<=l;)ql(n[y++],t);else{var he=y,ye=y,Le=l-y+1,et=h-y+1,Me=[];for(p=0;p<et;p++)Me.push(0);var ke=Le===s,Qe=!1,ft=0,bt=0;if(o<4||(Le|et)<32)for(p=he;p<=l;p++)if(w=n[p],bt<et){for(y=ye;y<=h;y++)if(F=e[y],w.key===F.key){if(Me[y-ye]=p+1,ke)for(ke=!1;p>he;)ql(n[he++],t);ft>y?Qe=!0:ft=y,F.dom&&(e[y]=F=lu(F)),Zc(w,F,t,i,r),bt++;break}!ke&&y>h&&ql(w,t)}else ke||ql(w,t);else{var st={};for(p=ye;p<=h;p++)st[e[p].key]=p;for(p=he;p<=l;p++)if(w=n[p],bt<et)if(y=st[w.key],y!==void 0){if(ke)for(ke=!1;p>he;)ql(n[he++],t);F=e[y],Me[y-ye]=p+1,ft>y?Qe=!0:ft=y,F.dom&&(e[y]=F=lu(F)),Zc(w,F,t,i,r),bt++}else ke||ql(w,t);else ke||ql(w,t)}if(ke)Vd(t,n),Fh(e,t,i,r);else if(Qe){var Lt=oy(Me);for(y=Lt.length-1,p=et-1;p>=0;p--)Me[p]===0?(ft=p+ye,F=e[ft],F.dom&&(e[ft]=F=lu(F)),j=ft+1,Fp(t,Hu(F,null,i,r),j<o?e[j].dom:null)):y<0||p!==Lt[y]?(ft=p+ye,F=e[ft],j=ft+1,Fp(t,F.dom,j<o?e[j].dom:null)):y--}else if(bt!==et)for(p=et-1;p>=0;p--)Me[p]===0&&(ft=p+ye,F=e[ft],F.dom&&(e[ft]=F=lu(F)),j=ft+1,Fp(t,Hu(F,null,i,r),j<o?e[j].dom:null))}}function oy(n){var e=n.slice(),t=[0],i,r,s,o,l,h=n.length;for(i=0;i<h;i++){var p=n[i];if(p!==0){if(r=t[t.length-1],n[r]<p){e[i]=r,t.push(i);continue}for(s=0,o=t.length-1;s<o;)l=(s+o)/2|0,n[t[l]]<p?s=l+1:o=l;p<n[t[s]]&&(s>0&&(e[i]=t[s-1]),t[s]=i)}}for(s=t.length,o=t[s-1];s-- >0;)t[s]=o,o=e[o];return t}au&&document.body===null&&rs('Inferno warning: you cannot initialize inferno without "document.body". Wait on "DOMContentLoaded" event, add script to bottom of body, or use async/defer attributes on script tag.');var ay=au?document.body:null;function Hd(n,e,t){if(ay===e&&Jn('you cannot render() to the "document.body". Use an empty element as a container instead.'),n!==io){var i=e.$V;if(_(i)?N(n)||(n.dom&&(n=lu(n)),tt(e.firstChild)?(Hu(n,e,Fl,!1),e.$V=n):iy(n,e),i=n):_(n)?(ql(i,e),e.$V=null):(n.dom&&(n=lu(n)),Zc(i,n,e,Fl,!1),i=e.$V=n),kc.length>0&&Ip(kc),q(t)&&t(),q(Oc.renderComplete)&&Oc.renderComplete(i),i&&i.flags&14)return i.children}}function ly(n,e){return Re(1024,e,null,n,0,null,N(n)?null:n.key,null)}var om=typeof Promise=="undefined"?null:Promise.resolve(),d1=typeof requestAnimationFrame=="undefined"?setTimeout:requestAnimationFrame.bind(window);function uy(n){return om?om.then(n):d1(n)}function Hp(n,e,t,i){q(e)&&(e=e(n.state,n.props,n.context));var r=n.$PS;if(_(r))n.$PS=e;else for(var s in e)r[s]=e[s];if(!n.$PSS&&!n.$BR)if(!n.$UPD)n.$PSS=!0,n.$UPD=!0,am(n,i,t),n.$UPD=!1;else{var o=n.$QU;tt(o)&&(o=n.$QU=[],uy(p1(n,o))),q(t)&&o.push(t)}else n.$PSS=!0,n.$BR&&q(t)&&kc.push(t.bind(n))}function p1(n,e){return function(){n.$QU=null,n.$UPD=!0,am(n,!1,function(){for(var t=0,i=e.length;t<i;t++)e[t].call(n)}),n.$UPD=!1}}function am(n,e,t){if(!n.$UN){if(e||!n.$BR){n.$PSS=!1;var i=n.$PS,r=n.state,s=ir(r,i),o=n.props,l=n.context;n.$PS=null;var h=n.$V,p=n.$LI,y=p.dom&&p.dom.parentNode;if(sy(n,s,h,o,y,l,(h.flags&32)>0,e,!0),n.$UN)return;if(!(n.$LI.flags&1024))for(var w=n.$LI.dom;!tt(h=h.parentVNode);)(h.flags&14)>0&&(h.dom=w);kc.length>0&&Ip(kc)}else n.state=n.$PS,n.$PS=null;q(t)&&t.call(n)}}var br=function(e,t){this.state=null,this.$BR=!1,this.$BS=!0,this.$PSS=!1,this.$PS=null,this.$LI=null,this.$V=null,this.$UN=!1,this.$CX=null,this.$UPD=!0,this.$QU=null,this.props=e||Fl,this.context=t||Fl};br.prototype.forceUpdate=function(e){this.$UN||Hp(this,{},e,!0)},br.prototype.setState=function(e,t){if(!this.$UN)if(!this.$BS)Hp(this,e,t,!1);else{Jn("cannot update state via setState() in componentWillUpdate() or constructor.");return}},br.prototype.render=function(e,t,i){};{var cy=function(){};console.info("Inferno is in development mode."),(cy.name||cy.toString()).indexOf("testFn")===-1&&rs("It looks like you're using a minified copy of the development build of Inferno. When deploying Inferno apps to production, make sure to use the production build which skips development warnings and is faster. See http://infernojs.org for more details.")}var hy='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14.02 5.57" width="53" height="21" style="vertical-align:middle"><path fill="#000000" d="M1.88.92v.14c0 .41-.13.68-.4.8.33.14.46.44.46.86v.33c0 .61-.33.95-.95.95H0V0h.95c.65 0 .93.3.93.92zM.63.57v1.06h.24c.24 0 .38-.1.38-.43V.98c0-.28-.1-.4-.32-.4zm0 1.63v1.22h.36c.2 0 .32-.1.32-.39v-.35c0-.37-.12-.48-.4-.48H.63zM4.18.99v.52c0 .64-.31.98-.94.98h-.3V4h-.62V0h.92c.63 0 .94.35.94.99zM2.94.57v1.35h.3c.2 0 .3-.09.3-.37v-.6c0-.29-.1-.38-.3-.38h-.3zm2.89 2.27L6.25 0h.88v4h-.6V1.12L6.1 3.99h-.6l-.46-2.82v2.82h-.55V0h.87zM8.14 1.1V4h-.56V0h.79L9 2.4V0h.56v4h-.64zm2.49 2.29v.6h-.6v-.6zM12.12 1c0-.63.33-1 .95-1 .61 0 .95.37.95 1v2.04c0 .64-.34 1-.95 1-.62 0-.95-.37-.95-1zm.62 2.08c0 .28.13.39.33.39s.32-.1.32-.4V.98c0-.29-.12-.4-.32-.4s-.33.11-.33.4z"/><path fill="#000000" d="M0 4.53h14.02v1.04H0zM11.08 0h.63v.62h-.63zm.63 4V1h-.63v2.98z"/></svg>';function dy(n){var e='<a href="http://bpmn.io" target="_blank" class="bjs-powered-by" title="Powered by bpmn.io" style="position: absolute; bottom: 15px; right: 15px; z-index: 100;">'+hy+"</a>",t=Es(e);n.appendChild(t),zn.bind(t,"click",function(i){g1(),i.preventDefault()})}class Up extends br{constructor(e,t){super(e,t),this.node=null}componentDidMount(){dy(this.node)}render(){return Re(1,"div",null,null,1,null,null,e=>this.node=e)}}function zp(n){return n.join(";")}var py=zp(["z-index: 1001","position: fixed","top: 0","left: 0","right: 0","bottom: 0"]),fy=zp(["width: 100%","height: 100%","background: rgba(40,40,40,0.2)"]),f1=zp(["position: absolute","left: 50%","top: 40%","transform: translate(-50%)","width: 260px","padding: 10px","background: white","box-shadow: 0 1px 4px rgba(0,0,0,0.3)","font-family: Helvetica, Arial, sans-serif","font-size: 14px","display: flex","line-height: 1.3"]),m1='<div class="bjs-powered-by-lightbox" style="'+py+'"><div class="backdrop" style="'+fy+'"></div><div class="notice" style="'+f1+'"><a href="https://bpmn.io" target="_blank" rel="noopener" style="margin: 15px 20px 15px 10px; align-self: center;">'+hy+'</a><span>Web-based tooling for BPMN, DMN and CMMN diagrams powered by <a href="https://bpmn.io" target="_blank" rel="noopener">bpmn.io</a>.</span></div></div>',Ud;function g1(){Ud||(Ud=Es(m1),Jr.bind(Ud,".backdrop","click",function(n){document.body.removeChild(Ud)})),document.body.appendChild(Ud)}var lm=new Ea,zd="hsl(225, 10%, 15%)";function qp(n,e,t,i,r,s){_a.call(this,e);var o=lm.next(),l=i.computeStyle,h={},p=n&&n.defaultFillColor||"white",y=n&&n.defaultStrokeColor||zd,w=n&&n.defaultLabelColor;function F(bt,st,Lt){var Vt=bt+"-"+Qp(st)+"-"+Qp(Lt)+"-"+o;return h[Vt]||Q(Vt,bt,st,Lt),"url(#"+Vt+")"}function j(bt,st){var Lt=ee({strokeWidth:1,strokeLinecap:"round",strokeDasharray:"none"},st.attrs),Vt=st.ref||{x:0,y:0},Zt=st.scale||1;Lt.strokeDasharray==="none"&&(Lt.strokeDasharray=[1e4,1]);var wn=Yr("marker");Ji(st.element,Lt),Br(wn,st.element),Ji(wn,{id:bt,viewBox:"0 0 20 20",refX:Vt.x,refY:Vt.y,markerWidth:20*Zt,markerHeight:20*Zt,orient:"auto"});var Kn=xs("defs",s._svg);Kn||(Kn=Yr("defs"),Br(s._svg,Kn)),Br(Kn,wn),h[bt]=wn}function Q(bt,st,Lt,Vt){if(st==="association-start"){var Zt=Yr("path");Ji(Zt,{d:"M 11 5 L 1 10 L 11 15"}),j(bt,{element:Zt,attrs:{fill:"none",stroke:Vt,strokeWidth:1.5},ref:{x:1,y:10},scale:.5})}else if(st==="association-end"){var wn=Yr("path");Ji(wn,{d:"M 1 5 L 11 10 L 1 15"}),j(bt,{element:wn,attrs:{fill:"none",stroke:Vt,strokeWidth:1.5},ref:{x:12,y:10},scale:.5})}else if(st==="information-requirement-end"){var Kn=Yr("path");Ji(Kn,{d:"M 1 5 L 11 10 L 1 15 Z"}),j(bt,{element:Kn,attrs:{fill:Vt,stroke:"none"},ref:{x:11,y:10},scale:1})}else if(st==="knowledge-requirement-end"){var Mr=Yr("path");Ji(Mr,{d:"M 1 3 L 11 10 L 1 17"}),j(bt,{element:Mr,attrs:{fill:"none",stroke:Vt,strokeWidth:2},ref:{x:11,y:10},scale:.8})}else if(st==="authority-requirement-end"){var qa=Yr("circle");Ji(qa,{cx:3,cy:3,r:3}),j(bt,{element:qa,attrs:{fill:Vt,stroke:"none"},ref:{x:3,y:3},scale:.9})}}function he(bt,st,Lt,Vt,Zt,wn){Kt(Zt)&&(wn=Zt,Zt=0),Zt=Zt||0,wn=l(wn,{stroke:zd,strokeWidth:2,fill:"white"});var Kn=Yr("rect");return Ji(Kn,{x:Zt,y:Zt,width:st-Zt*2,height:Lt-Zt*2,rx:Vt,ry:Vt}),Ji(Kn,wn),Br(bt,Kn),Kn}function ye(bt,st,Lt){var Vt=r.createText(st||"",Lt);return Or(Vt,"class","djs-label"),Br(bt,Vt),Vt}function Le(bt,st,Lt,Vt){var Zt=Ps(st);return Vt=ee({box:st,align:Lt,padding:5,style:{fill:um(st,w,y)}},Vt),ye(bt,Zt,Vt)}function et(bt,st,Lt){Lt=l(Lt,["no-fill"],{strokeWidth:2,stroke:zd});var Vt=Yr("path");return Ji(Vt,{d:st}),Ji(Vt,Lt),Br(bt,Vt),Vt}var Me={"dmn:Decision":function(bt,st){var Lt=he(bt,st.width,st.height,0,{stroke:Lc(st,y),fill:Jc(st,p)});return Le(bt,st,"center-middle"),Lt},"dmn:KnowledgeSource":function(bt,st){var Lt=t.getScaledPath("KNOWLEDGE_SOURCE",{xScaleFactor:1.021,yScaleFactor:1,containerWidth:st.width,containerHeight:st.height,position:{mx:0,my:.075}}),Vt=et(bt,Lt,{strokeWidth:2,fill:Jc(st,p),stroke:Lc(st,y)});return Le(bt,st,"center-middle"),Vt},"dmn:BusinessKnowledgeModel":function(bt,st){var Lt=t.getScaledPath("BUSINESS_KNOWLEDGE_MODEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:st.width,containerHeight:st.height,position:{mx:0,my:.3}}),Vt=et(bt,Lt,{strokeWidth:2,fill:Jc(st,p),stroke:Lc(st,y)});return Le(bt,st,"center-middle"),Vt},"dmn:InputData":function(bt,st){var Lt=he(bt,st.width,st.height,22,{stroke:Lc(st,y),fill:Jc(st,p)});return Le(bt,st,"center-middle"),Lt},"dmn:TextAnnotation":function(bt,st){var Lt={fill:"none",stroke:"none"},Vt=he(bt,st.width,st.height,0,0,Lt),Zt=t.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:st.width,containerHeight:st.height,position:{mx:0,my:0}});et(bt,Zt,{stroke:Lc(st,y)});var wn=my(st).text||"";return ye(bt,wn,{style:{fill:um(st,w,y)},box:st,align:"left-top",padding:5}),Vt},"dmn:Association":function(bt,st){var Lt=my(st),Vt=Jc(st,p),Zt=Lc(st,y),wn={stroke:Zt,strokeDasharray:"0.5, 5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"};return(Lt.associationDirection==="One"||Lt.associationDirection==="Both")&&(wn.markerEnd=F("association-end",Vt,Zt)),Lt.associationDirection==="Both"&&(wn.markerStart=F("association-start",Vt,Zt)),ft(bt,st.waypoints,wn)},"dmn:InformationRequirement":function(bt,st){var Lt=Jc(st,p),Vt=Lc(st,y),Zt={stroke:Vt,strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",markerEnd:F("information-requirement-end",Lt,Vt)};return ft(bt,st.waypoints,Zt)},"dmn:KnowledgeRequirement":function(bt,st){var Lt=Jc(st,p),Vt=Lc(st,y),Zt={stroke:Vt,strokeWidth:1,strokeDasharray:5,strokeLinecap:"round",strokeLinejoin:"round",markerEnd:F("knowledge-requirement-end",Lt,Vt)};return ft(bt,st.waypoints,Zt)},"dmn:AuthorityRequirement":function(bt,st){var Lt=Jc(st,p),Vt=Lc(st,y),Zt={stroke:Vt,strokeWidth:1.5,strokeDasharray:5,strokeLinecap:"round",strokeLinejoin:"round",markerEnd:F("authority-requirement-end",Lt,Vt)};return ft(bt,st.waypoints,Zt)}};function ke(bt,st){var Lt=Me[st.type];return Lt?Lt(bt,st):_a.prototype.drawShape.apply(this,[bt,st])}function Qe(bt,st){var Lt=st.type,Vt=Me[Lt];return Vt?Vt(bt,st):_a.prototype.drawConnection.apply(this,[bt,st])}function ft(bt,st,Lt){Lt=l(Lt,["no-fill"],{stroke:zd,strokeWidth:2,fill:"none"});var Vt=Su(st,Lt);return Br(bt,Vt),Vt}this.canRender=function(bt){return Mt(bt,"dmn:DMNElement")||Mt(bt,"dmn:InformationRequirement")||Mt(bt,"dmn:KnowledgeRequirement")||Mt(bt,"dmn:AuthorityRequirement")},this.drawShape=ke,this.drawConnection=Qe}po(qp,_a),qp.$inject=["config.drdRenderer","eventBus","pathMap","styles","textRenderer","canvas"];function my(n){return n.businessObject}function Qp(n){return n.replace(/[^0-9a-zA-z]+/g,"_")}function Lc(n,e){return e}function Jc(n,e){return e}function um(n,e,t){return e||Lc(n,t)}var y1=0,v1={width:150,height:50};function cm(n){var e=n.split("-");return{horizontal:e[0]||"center",vertical:e[1]||"top"}}function gy(n){return Kt(n)?ee({top:0,left:0,right:0,bottom:0},n):{top:n,left:n,right:n,bottom:n}}function x1(n,e){e.textContent=n;var t;try{var i,r=n==="";return e.textContent=r?"dummy":n,t=e.getBBox(),i={width:t.width+t.x*2,height:t.height},r&&(i.width=0),i}catch(s){return{width:0,height:0}}}function yy(n,e,t){for(var i=n.shift(),r=i,s;;){if(s=x1(r,t),s.width=r?s.width:0,r===" "||r===""||s.width<Math.round(e)||r.length<2)return vy(n,r,i,s);r=xy(r,s.width,e)}}function vy(n,e,t,i){if(e.length<t.length){var r=t.slice(e.length).trim();n.unshift(r)}return{width:i.width,height:i.height,text:e}}var hm="\xAD";function b1(n,e){var t=n.split(/(\s|-|\u00AD)/g),i,r=[],s=0;if(t.length>1)for(;i=t.shift();)if(i.length+s<e)r.push(i),s+=i.length;else{(i==="-"||i===hm)&&r.pop();break}var o=r[r.length-1];return o&&o===hm&&(r[r.length-1]="-"),r.join("")}function xy(n,e,t){var i=Math.max(n.length*(t/e),1),r=b1(n,i);return r||(r=n.slice(0,Math.max(Math.round(i-1),1))),r}function D1(){var n=document.getElementById("helper-svg");return n||(n=Yr("svg"),Ji(n,{id:"helper-svg"}),Ci(n,{visibility:"hidden",position:"fixed",width:0,height:0}),document.body.appendChild(n)),n}function Xp(n){this._config=ee({},{size:v1,padding:y1,style:{},align:"center-top"},n||{})}Xp.prototype.createText=function(n,e){return this.layoutText(n,e).element},Xp.prototype.getDimensions=function(n,e){return this.layoutText(n,e).dimensions},Xp.prototype.layoutText=function(n,e){var t=ee({},this._config.size,e.box),i=ee({},this._config.style,e.style),r=cm(e.align||this._config.align),s=gy(e.padding!==void 0?e.padding:this._config.padding),o=e.fitBox||!1,l=Yp(i),h=n.split(/\u00AD?\r?\n/),p=[],y=t.width-s.left-s.right,w=Yr("text");Ji(w,{x:0,y:0}),Ji(w,i);var F=D1();for(Br(F,w);h.length;)p.push(yy(h,y,w));r.vertical==="middle"&&(s.top=s.bottom=0);var j=qt(p,function(et,Me,ke){return et+(l||Me.height)},0)+s.top+s.bottom,Q=qt(p,function(et,Me,ke){return Me.width>et?Me.width:et},0),he=s.top;r.vertical==="middle"&&(he+=(t.height-j)/2),he-=(l||p[0].height)/4;var ye=Yr("text");Ji(ye,i),$t(p,function(et){var Me;switch(he+=l||et.height,r.horizontal){case"left":Me=s.left;break;case"right":Me=(o?Q:y)-s.right-et.width;break;default:Me=Math.max(((o?Q:y)-et.width)/2+s.left,0)}var ke=Yr("tspan");Ji(ke,{x:Me,y:he}),ke.textContent=et.text,Br(ye,ke)}),ra(w);var Le={width:Q,height:j};return{dimensions:Le,element:ye}};function Yp(n){if("fontSize"in n&&"lineHeight"in n)return n.lineHeight*parseInt(n.fontSize,10)}var dm=12,w1=1.2,E1=30;function by(n){var e=ee({fontFamily:"Arial, sans-serif",fontSize:dm,fontWeight:"normal",lineHeight:w1},n&&n.defaultStyle||{}),t=parseInt(e.fontSize,10)-1,i=ee({},e,{fontSize:t},n&&n.externalStyle||{}),r=new Xp({style:e});this.getExternalLabelBounds=function(s,o){var l=r.getDimensions(o,{box:{width:90,height:30,x:s.width/2+s.x,y:s.height/2+s.y},style:i});return{x:Math.round(s.x+s.width/2-l.width/2),y:Math.round(s.y),width:Math.ceil(l.width),height:Math.ceil(l.height)}},this.getTextAnnotationBounds=function(s,o){var l=r.getDimensions(o,{box:s,style:e,align:"left-top",padding:5});return{x:s.x,y:s.y,width:s.width,height:Math.max(E1,Math.round(l.height))}},this.createText=function(s,o){return r.createText(s,o||{})},this.getDefaultStyle=function(){return e},this.getExternalStyle=function(){return i}}by.$inject=["config.textRenderer"];function C1(){this.pathMap={KNOWLEDGE_SOURCE:{d:"m {mx},{my} l 0,{e.y0} c {e.x0},{e.y1} {e.x1},-{e.y2} {e.x2},-{e.y3} c {e.x3},-{e.y4} {e.x4},{e.y5} {e.x5},{e.y6} l 0,-{e.y7}z",width:100,height:65,widthElements:[29.8,48.4,67.2,12.2,19.8,30.8],heightElements:[55.3,19.7,4.2,6.7,2.3,1.6,6.2,54.6]},BUSINESS_KNOWLEDGE_MODEL:{d:"m {mx},{my} l {e.x0},-{e.y0} l {e.x1},0 l 0,{e.y1} l -{e.x2},{e.y2} l -{e.x3},0z",width:125,height:45,widthElements:[13.8,109.2,13.8,109.1],heightElements:[13.2,29.8,13.2]},TEXT_ANNOTATION:{d:"m {mx}, {my} m 10,0 l -10,0 l 0,{e.y0} l 10,0",width:10,height:30,widthElements:[10],heightElements:[30]}},this.getRawPath=function(e){return this.pathMap[e].d},this.getScaledPath=function(e,t){var i=this.pathMap[e],r,s;t.abspos?(r=t.abspos.x,s=t.abspos.y):(r=t.containerWidth*t.position.mx,s=t.containerHeight*t.position.my);var o={};if(t.position){for(var l=t.containerHeight/i.height*t.yScaleFactor,h=t.containerWidth/i.width*t.xScaleFactor,p=0;p<i.heightElements.length;p++)o["y"+p]=i.heightElements[p]*l;for(var y=0;y<i.widthElements.length;y++)o["x"+y]=i.widthElements[y]*h}var w=O1(i.d,{mx:r,my:s,e:o});return w}}var S1=/\{([^{}]+)\}/g,A1=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g;function T1(n,e,t){var i=t;return e.replace(A1,function(r,s,o,l,h){s=s||l,i&&(s in i&&(i=i[s]),typeof i=="function"&&h&&(i=i()))}),i=(i==null||i==t?n:i)+"",i}function O1(n,e){return String(n).replace(S1,function(t,i){return T1(t,i,e)})}var k1={__init__:["drdRenderer"],drdRenderer:["type",qp],textRenderer:["type",by],pathMap:["type",C1]};function eh(n,e,t,i){this._eventBus=n,this._canvas=e,this._elementRegistry=i,this._elementFactory=t}eh.$inject=["eventBus","canvas","elementFactory","elementRegistry"],eh.prototype.root=function(n){var e=this._elementFactory.createRoot(qd(n));return this._canvas.setRootElement(e),e},eh.prototype.add=function(n){var e=this._elementFactory,t=this._canvas,i=this._eventBus,r=n.di,s,o,l,h,p,y;if(r.$instanceOf("dmndi:DMNShape"))y=r.bounds,p=qd(n,{x:Math.round(y.x),y:Math.round(y.y),width:Math.round(y.width),height:Math.round(y.height)}),s=e.createShape(p),t.addShape(s),i.fire("drdElement.added",{element:s,di:r});else if(r.$instanceOf("dmndi:DMNEdge"))o=_1(r),l=this._getSource(n),h=this._getTarget(n),l&&h&&(p=qd(n,{hidden:!1,source:l,target:h,waypoints:o}),s=e.createConnection(p),t.addConnection(s),i.fire("drdElement.added",{element:s,di:r}));else throw new Error("unknown di for element "+n.id);return s},eh.prototype._getSource=function(n){var e,t;if(Mt(n,"dmn:Association")?t=n.sourceRef:Mt(n,"dmn:InformationRequirement")?t=n.requiredDecision||n.requiredInput:Mt(n,"dmn:KnowledgeRequirement")?t=n.requiredKnowledge:Mt(n,"dmn:AuthorityRequirement")&&(t=n.requiredDecision||n.requiredInput||n.requiredAuthority),t&&(e=t.href),e)return this._getShape(pm(e))},eh.prototype._getTarget=function(n){return Mt(n,"dmn:Association")?n.targetRef&&this._getShape(pm(n.targetRef.href)):this._getShape(n.$parent.id)},eh.prototype._getShape=function(n){return this._elementRegistry.get(n)};function qd(n,e){return ee({id:n.id,type:n.$type,businessObject:n},e)}function _1(n){var e=n.waypoint;if(e)return Dr(e,function(t){var i={x:t.x,y:t.y};return ee({original:i},i)})}function pm(n){return n.split("#").pop()}var Dy={drdImporter:["type",eh]},wy={__depends__:[k1,Dy]};function P1(n,e){return e=e||{},n.replace(/{([^}]+)}/g,function(t,i){return e[i]||"{"+i+"}"})}var nc={translate:["value",P1]};function fm(n){!n||typeof n.stopPropagation!="function"||n.stopPropagation()}function td(n){return n.originalEvent||n.srcEvent}function mm(n){fm(n),fm(td(n))}function Ih(n){return n.pointers&&n.pointers.length&&(n=n.pointers[0]),n.touches&&n.touches.length&&(n=n.touches[0]),n?{x:n.clientX,y:n.clientY}:null}function Ey(){return/mac/i.test(navigator.platform)}function Cy(n,e){return(td(n)||n).button===e}function fh(n){return Cy(n,0)}function F1(n){return Cy(n,1)}function gm(n){var e=td(n)||n;return fh(n)?Ey()?e.metaKey:e.ctrlKey:!1}function Gp(n){var e=td(n)||n;return fh(n)&&e.shiftKey}function M1(n){return!0}function Kp(n){return fh(n)||F1(n)}var Sy=500;function Ay(n,e,t){var i=this;function r(st,Lt,Vt){if(!l(st,Lt)){var Zt,wn,Kn;Vt?wn=e.getGraphics(Vt):(Zt=Lt.delegateTarget||Lt.target,Zt&&(wn=Zt,Vt=e.get(wn))),!(!wn||!Vt)&&(Kn=n.fire(st,{element:Vt,gfx:wn,originalEvent:Lt}),Kn===!1&&(Lt.stopPropagation(),Lt.preventDefault()))}}var s={};function o(st){return s[st]}function l(st,Lt){var Vt=p[st]||fh;return!Vt(Lt)}var h={click:"element.click",contextmenu:"element.contextmenu",dblclick:"element.dblclick",mousedown:"element.mousedown",mousemove:"element.mousemove",mouseover:"element.hover",mouseout:"element.out",mouseup:"element.mouseup"},p={"element.contextmenu":M1,"element.mousedown":Kp,"element.mouseup":Kp,"element.click":Kp,"element.dblclick":Kp};function y(st,Lt,Vt){var Zt=h[st];if(!Zt)throw new Error("unmapped DOM event name <"+st+">");return r(Zt,Lt,Vt)}var w="svg, .djs-element";function F(st,Lt,Vt,Zt){var wn=s[Vt]=function(Kn){r(Vt,Kn)};Zt&&(p[Vt]=Zt),wn.$delegate=Jr.bind(st,w,Lt,wn)}function j(st,Lt,Vt){var Zt=o(Vt);Zt&&Jr.unbind(st,Lt,Zt.$delegate)}function Q(st){$t(h,function(Lt,Vt){F(st,Vt,Lt)})}function he(st){$t(h,function(Lt,Vt){j(st,Vt,Lt)})}n.on("canvas.destroy",function(st){he(st.svg)}),n.on("canvas.init",function(st){Q(st.svg)}),n.on(["shape.added","connection.added"],function(st){var Lt=st.element,Vt=st.gfx;n.fire("interactionEvents.createHit",{element:Lt,gfx:Vt})}),n.on(["shape.changed","connection.changed"],Sy,function(st){var Lt=st.element,Vt=st.gfx;n.fire("interactionEvents.updateHit",{element:Lt,gfx:Vt})}),n.on("interactionEvents.createHit",Sy,function(st){var Lt=st.element,Vt=st.gfx;i.createDefaultHit(Lt,Vt)}),n.on("interactionEvents.updateHit",function(st){var Lt=st.element,Vt=st.gfx;i.updateDefaultHit(Lt,Vt)});var ye=Qe("djs-hit djs-hit-stroke"),Le=Qe("djs-hit djs-hit-click-stroke"),et=Qe("djs-hit djs-hit-all"),Me=Qe("djs-hit djs-hit-no-move"),ke={all:et,"click-stroke":Le,stroke:ye,"no-move":Me};function Qe(st,Lt){return Lt=ee({stroke:"white",strokeWidth:15},Lt||{}),t.cls(st,["no-fill","no-border"],Lt)}function ft(st,Lt){var Vt=ke[Lt];if(!Vt)throw new Error("invalid hit type <"+Lt+">");return Ji(st,Vt),st}function bt(st,Lt){Br(st,Lt)}this.removeHits=function(st){var Lt=Io(".djs-hit",st);$t(Lt,ra)},this.createDefaultHit=function(st,Lt){var Vt=st.waypoints,Zt=st.isFrame,wn;return Vt?this.createWaypointsHit(Lt,Vt):(wn=Zt?"stroke":"all",this.createBoxHit(Lt,wn,{width:st.width,height:st.height}))},this.createWaypointsHit=function(st,Lt){var Vt=Su(Lt);return ft(Vt,"stroke"),bt(st,Vt),Vt},this.createBoxHit=function(st,Lt,Vt){Vt=ee({x:0,y:0},Vt);var Zt=Yr("rect");return ft(Zt,Lt),Ji(Zt,Vt),bt(st,Zt),Zt},this.updateDefaultHit=function(st,Lt){var Vt=xs(".djs-hit",Lt);if(Vt)return st.waypoints?Sc(Vt,st.waypoints):Ji(Vt,{width:st.width,height:st.height}),Vt},this.fire=r,this.triggerMouseEvent=y,this.mouseHandler=o,this.registerEvent=F,this.unregisterEvent=j}Ay.$inject=["eventBus","elementRegistry","styles"];var Zp={__init__:["interactionEvents"],interactionEvents:["type",Ay]},Ty=500,I1=1e3;function mh(n,e){this._eventBus=n,this.offset=5;var t=e.cls("djs-outline",["no-fill"]),i=this;function r(s){var o=Yr("rect");return Ji(o,ee({x:0,y:0,rx:4,width:100,height:100},t)),o}n.on(["shape.added","shape.changed"],Ty,function(s){var o=s.element,l=s.gfx,h=xs(".djs-outline",l);h||(h=i.getOutline(o)||r(),Br(l,h)),i.updateShapeOutline(h,o)}),n.on(["connection.added","connection.changed"],function(s){var o=s.element,l=s.gfx,h=xs(".djs-outline",l);h||(h=r(),Br(l,h)),i.updateConnectionOutline(h,o)})}mh.prototype.updateShapeOutline=function(n,e){var t=!1,i=this._getProviders();i.length&&$t(i,function(r){t=t||r.updateOutline(e,n)}),t||Ji(n,{x:-this.offset,y:-this.offset,width:e.width+this.offset*2,height:e.height+this.offset*2})},mh.prototype.updateConnectionOutline=function(n,e){var t=Za(e);Ji(n,{x:t.x-this.offset,y:t.y-this.offset,width:t.width+this.offset*2,height:t.height+this.offset*2})},mh.prototype.registerProvider=function(n,e){e||(e=n,n=I1),this._eventBus.on("outline.getProviders",n,function(t){t.providers.push(e)})},mh.prototype._getProviders=function(){var n=this._eventBus.createEvent({type:"outline.getProviders",providers:[]});return this._eventBus.fire(n),n.providers},mh.prototype.getOutline=function(n){var e,t=this._getProviders();return $t(t,function(i){vn(i.getOutline)&&(e=e||i.getOutline(n))}),e},mh.$inject=["eventBus","styles","elementRegistry"];var nd={__init__:["outline"],outline:["type",mh]};function vc(n,e){this._eventBus=n,this._canvas=e,this._selectedElements=[];var t=this;n.on(["shape.remove","connection.remove"],function(i){var r=i.element;t.deselect(r)}),n.on(["diagram.clear","root.set"],function(i){t.select(null)})}vc.$inject=["eventBus","canvas"],vc.prototype.deselect=function(n){var e=this._selectedElements,t=e.indexOf(n);if(t!==-1){var i=e.slice();e.splice(t,1),this._eventBus.fire("selection.changed",{oldSelection:i,newSelection:e})}},vc.prototype.get=function(){return this._selectedElements},vc.prototype.isSelected=function(n){return this._selectedElements.indexOf(n)!==-1},vc.prototype.select=function(n,e){var t=this._selectedElements,i=t.slice();Nn(n)||(n=n?[n]:[]);var r=this._canvas,s=r.getRootElement();n=n.filter(function(o){var l=r.findRoot(o);return s===l}),e?$t(n,function(o){t.indexOf(o)===-1&&t.push(o)}):this._selectedElements=t=n.slice(),this._eventBus.fire("selection.changed",{oldSelection:i,newSelection:t})};var Oy="hover",ky="selected",Jp=6;function ym(n,e,t){this._canvas=n;var i=this;this._multiSelectionBox=null;function r(o,l){n.addMarker(o,l)}function s(o,l){n.removeMarker(o,l)}e.on("element.hover",function(o){r(o.element,Oy)}),e.on("element.out",function(o){s(o.element,Oy)}),e.on("selection.changed",function(o){function l(w){s(w,ky)}function h(w){r(w,ky)}var p=o.oldSelection,y=o.newSelection;$t(p,function(w){y.indexOf(w)===-1&&l(w)}),$t(y,function(w){p.indexOf(w)===-1&&h(w)}),i._updateSelectionOutline(y)}),e.on("element.changed",function(o){t.isSelected(o.element)&&i._updateSelectionOutline(t.get())})}ym.$inject=["canvas","eventBus","selection"],ym.prototype._updateSelectionOutline=function(n){var e=this._canvas.getLayer("selectionOutline");Cu(e);var t=n.length>1,i=this._canvas.getContainer();if(Hs(i)[t?"add":"remove"]("djs-multi-select"),!!t){var r=N1(Za(n)),s=Yr("rect");Ji(s,ee({rx:3},r)),Hs(s).add("djs-selection-outline"),Br(e,s)}};function N1(n){return{x:n.x-Jp,y:n.y-Jp,width:n.width+Jp*2,height:n.height+Jp*2}}function c(n,e,t,i){n.on("create.end",500,function(r){var s=r.context,o=s.canExecute,l=s.elements,h=s.hints||{},p=h.autoSelect;if(o){if(p===!1)return;Nn(p)?e.select(p):e.select(l.filter(g))}}),n.on("connect.end",500,function(r){var s=r.context,o=s.connection;o&&e.select(o)}),n.on("shape.move.end",500,function(r){var s=r.previousSelection||[],o=i.get(r.context.shape.id),l=Ii(s,function(h){return o.id===h.id});l||e.select(o)}),n.on("element.click",function(r){if(fh(r)){var s=r.element;s===t.getRootElement()&&(s=null);var o=e.isSelected(s),l=e.get().length>1,h=Gp(r);if(o&&l)return h?e.deselect(s):e.select(s);o?e.deselect(s):e.select(s,h)}})}c.$inject=["eventBus","selection","canvas","elementRegistry"];function g(n){return!n.hidden}var x={__init__:["selectionVisuals","selectionBehavior"],__depends__:[Zp,nd],selection:["type",vc],selectionVisuals:["type",ym],selectionBehavior:["type",c]};function I(n){this._counter=0,this._prefix=(n?n+"-":"")+Math.floor(Math.random()*1e9)+"-"}I.prototype.next=function(){return this._prefix+ ++this._counter};var W=new I("ov"),X=500;function ae(n,e,t,i){this._eventBus=e,this._canvas=t,this._elementRegistry=i,this._ids=W,this._overlayDefaults=ee({show:null,scale:!0},n&&n.defaults),this._overlays={},this._overlayContainers=[],this._overlayRoot=Ke(t.getContainer()),this._init()}ae.$inject=["config.overlays","eventBus","canvas","elementRegistry"],ae.prototype.get=function(n){if(gn(n)&&(n={id:n}),gn(n.element)&&(n.element=this._elementRegistry.get(n.element)),n.element){var e=this._getOverlayContainer(n.element,!0);return e?n.type?Un(e.overlays,jr({type:n.type})):e.overlays.slice():[]}else return n.type?Un(this._overlays,jr({type:n.type})):n.id?this._overlays[n.id]:null},ae.prototype.add=function(n,e,t){if(Kt(e)&&(t=e,e=null),n.id||(n=this._elementRegistry.get(n)),!t.position)throw new Error("must specifiy overlay position");if(!t.html)throw new Error("must specifiy overlay html");if(!n)throw new Error("invalid element specified");var i=this._ids.next();return t=ee({},this._overlayDefaults,t,{id:i,type:e,element:n,html:t.html}),this._addOverlay(t),i},ae.prototype.remove=function(n){var e=this.get(n)||[];Nn(e)||(e=[e]);var t=this;$t(e,function(i){var r=t._getOverlayContainer(i.element,!0);if(i&&(Li(i.html),Li(i.htmlContainer),delete i.htmlContainer,delete i.element,delete t._overlays[i.id]),r){var s=r.overlays.indexOf(i);s!==-1&&r.overlays.splice(s,1)}})},ae.prototype.isShown=function(){return this._overlayRoot.style.display!=="none"},ae.prototype.show=function(){Ue(this._overlayRoot)},ae.prototype.hide=function(){Ue(this._overlayRoot,!1)},ae.prototype.clear=function(){this._overlays={},this._overlayContainers=[],ln(this._overlayRoot)},ae.prototype._updateOverlayContainer=function(n){var e=n.element,t=n.html,i=e.x,r=e.y;if(e.waypoints){var s=Za(e);i=s.x,r=s.y}yt(t,i,r),Or(n.html,"data-container-id",e.id)},ae.prototype._updateOverlay=function(n){var e=n.position,t=n.htmlContainer,i=n.element,r=e.left,s=e.top;if(e.right!==void 0){var o;i.waypoints?o=Za(i).width:o=i.width,r=e.right*-1+o}if(e.bottom!==void 0){var l;i.waypoints?l=Za(i).height:l=i.height,s=e.bottom*-1+l}yt(t,r||0,s||0),this._updateOverlayVisibilty(n,this._canvas.viewbox())},ae.prototype._createOverlayContainer=function(n){var e=Es('<div class="djs-overlays" />');Ci(e,{position:"absolute"}),this._overlayRoot.appendChild(e);var t={html:e,element:n,overlays:[]};return this._updateOverlayContainer(t),this._overlayContainers.push(t),t},ae.prototype._updateRoot=function(n){var e=n.scale||1,t="matrix("+[e,0,0,e,-1*n.x*e,-1*n.y*e].join(",")+")";pt(this._overlayRoot,t)},ae.prototype._getOverlayContainer=function(n,e){var t=Ii(this._overlayContainers,function(i){return i.element===n});return!t&&!e?this._createOverlayContainer(n):t},ae.prototype._addOverlay=function(n){var e=n.id,t=n.element,i=n.html,r,s;i.get&&i.constructor.prototype.jquery&&(i=i.get(0)),gn(i)&&(i=Es(i)),s=this._getOverlayContainer(t),r=Es('<div class="djs-overlay" data-overlay-id="'+e+'">'),Ci(r,{position:"absolute"}),r.appendChild(i),n.type&&sr(r).add("djs-overlay-"+n.type);var o=this._canvas.findRoot(t),l=this._canvas.getRootElement();Ue(r,o===l),n.htmlContainer=r,s.overlays.push(n),s.html.appendChild(r),this._overlays[e]=n,this._updateOverlay(n),this._updateOverlayVisibilty(n,this._canvas.viewbox())},ae.prototype._updateOverlayVisibilty=function(n,e){var t=n.show,i=this._canvas.findRoot(n.element),r=t&&t.minZoom,s=t&&t.maxZoom,o=n.htmlContainer,l=this._canvas.getRootElement(),h=!0;(i!==l||t&&(yn(r)&&r>e.scale||yn(s)&&s<e.scale))&&(h=!1),Ue(o,h),this._updateOverlayScale(n,e)},ae.prototype._updateOverlayScale=function(n,e){var t=n.scale,i,r,s=n.htmlContainer,o,l="";t!==!0&&(t===!1?(i=1,r=1):(i=t.min,r=t.max),yn(i)&&e.scale<i&&(o=(1/e.scale||1)*i),yn(r)&&e.scale>r&&(o=(1/e.scale||1)*r)),yn(o)&&(l="scale("+o+","+o+")"),pt(s,l)},ae.prototype._updateOverlaysVisibilty=function(n){var e=this;$t(this._overlays,function(t){e._updateOverlayVisibilty(t,n)})},ae.prototype._init=function(){var n=this._eventBus,e=this;function t(i){e._updateRoot(i),e._updateOverlaysVisibilty(i),e.show()}n.on("canvas.viewbox.changing",function(i){e.hide()}),n.on("canvas.viewbox.changed",function(i){t(i.viewbox)}),n.on(["shape.remove","connection.remove"],function(i){var r=i.element,s=e.get({element:r});$t(s,function(h){e.remove(h.id)});var o=e._getOverlayContainer(r);if(o){Li(o.html);var l=e._overlayContainers.indexOf(o);l!==-1&&e._overlayContainers.splice(l,1)}}),n.on("element.changed",X,function(i){var r=i.element,s=e._getOverlayContainer(r,!0);s&&($t(s.overlays,function(o){e._updateOverlay(o)}),e._updateOverlayContainer(s))}),n.on("element.marker.update",function(i){var r=e._getOverlayContainer(i.element,!0);r&&sr(r.html)[i.add?"add":"remove"](i.marker)}),n.on("root.set",function(){e._updateOverlaysVisibilty(e._canvas.viewbox())}),n.on("diagram.clear",this.clear,this)};function Ke(n){var e=Es('<div class="djs-overlay-container" />');return Ci(e,{position:"absolute",width:0,height:0}),n.insertBefore(e,n.firstChild),e}function yt(n,e,t){Ci(n,{left:e+"px",top:t+"px"})}function Ue(n,e){n.style.display=e===!1?"none":""}function pt(n,e){n.style["transform-origin"]="top left",["","-ms-","-webkit-"].forEach(function(t){n.style[t+"transform"]=e})}var dt={__init__:["overlays"],overlays:["type",ae]};function Et(n,e,t){this._eventBus=n,this._canvas=e,this._translate=t,n.on("diagram.init",function(){this._init()},this),n.on("import.done",function(i){i.error||this.update()},this),this.HTML_MARKUP='<div class="dmn-definitions"><div class="dmn-definitions-name" title="'+this._translate("Definition name")+'" spellcheck="false"></div><div class="dmn-definitions-id" title="'+this._translate("Definition ID")+'" spellcheck="false"></div></div>'}Et.$inject=["eventBus","canvas","translate"],Et.prototype._init=function(){var n=this._canvas,e=this._eventBus,t=n.getContainer(),i=this._container=Es(this.HTML_MARKUP);t.appendChild(i),this.nameElement=xs(".dmn-definitions-name",this._container),this.idElement=xs(".dmn-definitions-id",this._container),Jr.bind(i,".dmn-definitions-name, .dmn-definitions-id","mousedown",function(r){r.stopPropagation()}),e.fire("definitionIdView.create",{html:i})},Et.prototype.update=function(){var n=this._canvas.getRootElement().businessObject;this.nameElement.textContent=n.name,this.idElement.textContent=n.id};function cn(n,e){function t(i,r){var s=e.getContainer();sr(s).toggle(i,r)}n.on("palette.create",function(){t("with-palette",!0)}),n.on("palette.changed",function(i){t("with-palette-two-column",i.twoColumn)})}cn.$inject=["eventBus","canvas"];var hn={__depends__:[nc],__init__:["definitionPropertiesView","definitionPropertiesPaletteAdapter"],definitionPropertiesView:["type",Et],definitionPropertiesPaletteAdapter:["type",cn]},_r=[{className:"dmn-icon-decision-table",matches:function(n){var e=es(n);return Mt(e,"dmn:Decision")&&Mt(e.decisionLogic,"dmn:DecisionTable")},title:"Open decision table"},{className:"dmn-icon-literal-expression",matches:function(n){var e=Po(n);return Mt(e,"dmn:LiteralExpression")},title:"Open literal expression"}];class li{constructor(e,t,i,r,s){this._injector=e,this._eventBus=t,this._overlays=i,this._translate=s,this._config=r||{enabled:!0},t.on(["shape.added"],({element:o})=>{for(let h=0;h<_r.length;h++){const{matches:p,className:y,title:w}=_r[h];var l=p&&p(o);l&&this.addOverlay(o,y,w)}})}addOverlay(e,t,i){const r=this._config.enabled!==!1,s=this._getOverlayNode(t,i,r),o=this._overlays.add(e,{position:{top:2,left:2},html:s});r&&(sr(s).add("interactive"),this.bindEventListener(e,s,o))}_getOverlayNode(e,t,i){const r=document.createElement("div");if(r.className="drill-down-overlay",!i){const o=document.createElement("span");return o.className=e,r.appendChild(o),r}const s=document.createElement("button");return s.type="button",s.className=e,s.title=this._translate(t),r.appendChild(s),r}bindEventListener(e,t,i){const r=this._overlays,s=this._eventBus,o=r._overlayRoot;Jr.bind(o,'[data-overlay-id="'+i+'"]',"click",()=>{s.fire("drillDown.click",{element:e})!==!1&&this.drillDown(e)})}drillDown(e){const t=this._injector.get("_parent",!1);if(!t)return!1;const i=t.getView(e.businessObject);return i?(t.open(i),!0):!1}}li.$inject=["injector","eventBus","overlays","config.drillDown","translate"];var qn={__depends__:[dt,nc],__init__:["drillDown"],drillDown:["type",li]};function ur(n){this._container=this._createContainer(),dy(this._container),this._init(this._container,n)}po(ur,Wt),ur.prototype.saveSVG=Qa(function(n){var e=this;return new Promise(function(t){var i=e.get("canvas"),r=i.getActiveLayer(),s=xs("defs",i._svg),o=ui(r),l=s&&s.outerHTML||"",h=r.getBBox(),p=`<?xml version="1.0" encoding="utf-8"?>
<!-- created with dmn-js / http://bpmn.io -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="`+h.width+'" height="'+h.height+'" viewBox="'+h.x+" "+h.y+" "+h.width+" "+h.height+'" version="1.1">'+l+o+"</svg>";t({svg:p})})}),ur.prototype.getModules=function(){return this._modules},ur.prototype.destroy=function(){Wt.prototype.destroy.call(this),Li(this._container)},ur.prototype.on=function(n,e,t,i){return this.get("eventBus").on(n,e,t,i)},ur.prototype.off=function(n,e){this.get("eventBus").off(n,e)},ur.prototype._init=function(n,e){var p=e,{additionalModules:t,canvas:i}=p,r=Zu(p,["additionalModules","canvas"]),s=e.modules||this.getModules(),o=[{drd:["value",this]}],l=[...o,...s,...t||[]],h=qi(Jt({},r),{canvas:qi(Jt({},i),{container:n}),modules:l});Wt.call(this,h),e&&e.container&&this.attachTo(e.container)},ur.prototype._emit=function(n,e){return this.get("eventBus").fire(n,e)},ur.prototype._createContainer=function(){return Es('<div class="dmn-drd-container"></div>')},ur.prototype.open=function(n){var e=this;return new Promise((t,i)=>{var r;try{return e._definitions&&e.clear(),e._definitions=n,ts(e,n,function(s,o){s?(s.warnings=o||[],i(s)):t({warnings:o||[]})})}catch(s){r=s}r?(r.warnings=r.warnings||[],i(r)):t({warnings:[]})})},ur.prototype.attachTo=function(n){if(!n)throw new Error("parentNode required");this.detach();var e=this._container;n.appendChild(e),this._emit("attach",{}),this.get("canvas").resized()},ur.prototype.detach=function(){var n=this._container,e=n.parentNode;e&&(this._emit("detach",{}),e.removeChild(n))},ur.prototype._modules=[wy,nc,x,dt,hn,qn];function zr(n){return{x:n.x+n.width/2,y:n.y+n.height/2}}function ro(n,e){return{x:n.x-e.x,y:n.y-e.y}}function Ss(n){return Math.log(n)/Math.log(10)}function fi(n,e){var t=Ss(n.min),i=Ss(n.max),r=Math.abs(t)+Math.abs(i);return r/e}function Qo(n,e){return Math.max(n.min,Math.min(n.max,e))}var Pu=Math.sign||function(n){return n>=0?1:-1},Wo={min:.2,max:4},uu=10,Ml=.1,id=.75;function ic(n,e,t){n=n||{},this._enabled=!1,this._canvas=t,this._container=t._container,this._handleWheel=ze(this._handleWheel,this),this._totalDelta=0,this._scale=n.scale||id;var i=this;e.on("canvas.init",function(r){i._init(n.enabled!==!1)})}ic.$inject=["config.zoomScroll","eventBus","canvas"],ic.prototype.scroll=function(e){this._canvas.scroll(e)},ic.prototype.reset=function(){this._canvas.zoom("fit-viewport")},ic.prototype.zoom=function(e,t){var i=fi(Wo,uu*2);this._totalDelta+=e,Math.abs(this._totalDelta)>Ml&&(this._zoom(e,t,i),this._totalDelta=0)},ic.prototype._handleWheel=function(e){if(!ti(e.target,".djs-scrollable",!0)){var t=this._container;e.preventDefault();var i=e.ctrlKey||Ey()&&e.metaKey,r=e.shiftKey,s=-1*this._scale,o;if(i?s*=e.deltaMode===0?.02:.32:s*=e.deltaMode===0?1:16,i){var l=t.getBoundingClientRect(),h={x:e.clientX-l.left,y:e.clientY-l.top};o=Math.sqrt(Math.pow(e.deltaY,2)+Math.pow(e.deltaX,2))*Pu(e.deltaY)*s,this.zoom(o,h)}else r?o={dx:s*e.deltaY,dy:0}:o={dx:s*e.deltaX,dy:s*e.deltaY},this.scroll(o)}},ic.prototype.stepZoom=function(e,t){var i=fi(Wo,uu);this._zoom(e,t,i)},ic.prototype._zoom=function(n,e,t){var i=this._canvas,r=n>0?1:-1,s=Ss(i.zoom()),o=Math.round(s/t)*t;o+=t*r;var l=Math.pow(10,o);i.zoom(Qo(Wo,l),e)},ic.prototype.toggle=function(e){var t=this._container,i=this._handleWheel,r=this._enabled;return typeof e=="undefined"&&(e=!r),r!==e&&zn[e?"bind":"unbind"](t,"wheel",i,!1),this._enabled=e,e},ic.prototype._init=function(n){this.toggle(n)};var Us={__init__:["zoomScroll"],zoomScroll:["type",ic]},ha=/^djs-cursor-.*$/;function pl(n){var e=sr(document.body);e.removeMatching(ha),n&&e.add("djs-cursor-"+n)}function xc(){pl(null)}var Nh=5e3;function vm(n,e){e=e||"element.click";function t(){return!1}return n.once(e,Nh,t),function(){n.off(e,t)}}var Qd=15;function xm(n,e){var t;n.on("element.mousedown",500,function(o){return s(o.originalEvent)});function i(o){var l=t.start,h=t.button,p=Ih(o),y=ro(p,l);if(!t.dragging&&B1(y)>Qd&&(t.dragging=!0,h===0&&vm(n),pl("grab")),t.dragging){var w=t.last||t.start;y=ro(p,w),e.scroll({dx:y.x,dy:y.y}),t.last=p}o.preventDefault()}function r(o){zn.unbind(document,"mousemove",i),zn.unbind(document,"mouseup",r),t=null,xc()}function s(o){if(!ti(o.target,".djs-draggable")){var l=o.button;if(!(l>=2||o.ctrlKey||o.shiftKey||o.altKey))return t={button:l,start:Ih(o)},zn.bind(document,"mousemove",i),zn.bind(document,"mouseup",r),!0}}this.isActive=function(){return!!t}}xm.$inject=["eventBus","canvas"];function B1(n){return Math.sqrt(Math.pow(n.x,2)+Math.pow(n.y,2))}var ef={__init__:["moveCanvas"],moveCanvas:["type",xm]};function bm(n){return CSS.escape(n)}var _y={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Py(n){return n=""+n,n&&n.replace(/[&<>"']/g,function(e){return _y[e]})}var tf=["c","C"],R1=["v","V"],Dm=["y","Y"],wm=["z","Z"];function Xd(n){return n.ctrlKey||n.metaKey||n.shiftKey||n.altKey}function fl(n){return n.altKey?!1:n.ctrlKey||n.metaKey}function cu(n,e){return n=Nn(n)?n:[n],n.indexOf(e.key)!==-1||n.indexOf(e.code)!==-1}function L1(n){return n.shiftKey}function OF(n){return fl(n)&&cu(tf,n)}function kF(n){return fl(n)&&cu(R1,n)}function _F(n){return fl(n)&&!L1(n)&&cu(wm,n)}function PF(n){return fl(n)&&(cu(Dm,n)||cu(wm,n)&&L1(n))}function Bs(n,e,t,i,r){this._open=!1,this._results=[],this._eventMaps=[],this._canvas=n,this._eventBus=e,this._overlays=t,this._selection=i,this._translate=r,this._container=this._getBoxHtml(),this._searchInput=xs(Bs.INPUT_SELECTOR,this._container),this._resultsContainer=xs(Bs.RESULTS_CONTAINER_SELECTOR,this._container),this._canvas.getContainer().appendChild(this._container),e.on(["canvas.destroy","diagram.destroy"],this.close,this)}Bs.$inject=["canvas","eventBus","overlays","selection","translate"],Bs.prototype._bindEvents=function(){var n=this;function e(t,i,r,s){n._eventMaps.push({el:t,type:r,listener:Jr.bind(t,i,r,s)})}e(document,"html","click",function(t){n.close()}),e(this._container,Bs.INPUT_SELECTOR,"click",function(t){t.stopPropagation(),t.delegateTarget.focus()}),e(this._container,Bs.RESULT_SELECTOR,"mouseover",function(t){t.stopPropagation(),n._scrollToNode(t.delegateTarget),n._preselect(t.delegateTarget)}),e(this._container,Bs.RESULT_SELECTOR,"click",function(t){t.stopPropagation(),n._select(t.delegateTarget)}),e(this._container,Bs.INPUT_SELECTOR,"keydown",function(t){cu("ArrowUp",t)&&t.preventDefault(),cu("ArrowDown",t)&&t.preventDefault()}),e(this._container,Bs.INPUT_SELECTOR,"keyup",function(t){if(cu("Escape",t))return n.close();if(cu("Enter",t)){var i=n._getCurrentResult();return i?n._select(i):n.close()}if(cu("ArrowUp",t))return n._scrollToDirection(!0);if(cu("ArrowDown",t))return n._scrollToDirection();cu(["ArrowLeft","ArrowRight"],t)||n._search(t.delegateTarget.value)})},Bs.prototype._unbindEvents=function(){this._eventMaps.forEach(function(n){Jr.unbind(n.el,n.type,n.listener)})},Bs.prototype._search=function(n){var e=this;if(this._clearResults(),!(!n||n==="")){var t=this._searchProvider.find(n);if(t.length){t.forEach(function(r){var s=r.element.id,o=e._createResultNode(r,s);e._results[s]={element:r.element,node:o}});var i=xs(Bs.RESULT_SELECTOR,this._resultsContainer);this._scrollToNode(i),this._preselect(i)}}},Bs.prototype._scrollToDirection=function(n){var e=this._getCurrentResult();if(e){var t=n?e.previousElementSibling:e.nextElementSibling;t&&(this._scrollToNode(t),this._preselect(t))}},Bs.prototype._scrollToNode=function(n){if(!(!n||n===this._getCurrentResult())){var e=n.offsetTop,t=this._resultsContainer.scrollTop,i=e-this._resultsContainer.clientHeight+n.clientHeight;e<t?this._resultsContainer.scrollTop=e:t<i&&(this._resultsContainer.scrollTop=i)}},Bs.prototype._clearResults=function(){ln(this._resultsContainer),this._results=[],this._resetOverlay(),this._eventBus.fire("searchPad.cleared")},Bs.prototype._getCurrentResult=function(){return xs(Bs.RESULT_SELECTED_SELECTOR,this._resultsContainer)},Bs.prototype._createResultNode=function(n,e){var t=Es(Bs.RESULT_HTML);return n.primaryTokens.length>0&&Dw(t,n.primaryTokens,Bs.RESULT_PRIMARY_HTML),Dw(t,n.secondaryTokens,Bs.RESULT_SECONDARY_HTML),Or(t,Bs.RESULT_ID_ATTRIBUTE,e),this._resultsContainer.appendChild(t),t},Bs.prototype.registerProvider=function(n){this._searchProvider=n},Bs.prototype.open=function(){if(!this._searchProvider)throw new Error("no search provider registered");this.isOpen()||(this._bindEvents(),this._open=!0,sr(this._container).add("open"),this._searchInput.focus(),this._eventBus.fire("searchPad.opened"))},Bs.prototype.close=function(){this.isOpen()&&(this._unbindEvents(),this._open=!1,sr(this._container).remove("open"),this._clearResults(),this._searchInput.value="",this._searchInput.blur(),this._resetOverlay(),this._eventBus.fire("searchPad.closed"))},Bs.prototype.toggle=function(){this.isOpen()?this.close():this.open()},Bs.prototype.isOpen=function(){return this._open},Bs.prototype._preselect=function(n){var e=this._getCurrentResult();if(n!==e){e&&sr(e).remove(Bs.RESULT_SELECTED_CLASS);var t=Or(n,Bs.RESULT_ID_ATTRIBUTE),i=this._results[t].element;sr(n).add(Bs.RESULT_SELECTED_CLASS),this._resetOverlay(i),this._canvas.scrollToElement(i,{top:400}),this._selection.select(i),this._eventBus.fire("searchPad.preselected",i)}},Bs.prototype._select=function(n){var e=Or(n,Bs.RESULT_ID_ATTRIBUTE),t=this._results[e].element;this.close(),this._resetOverlay(),this._canvas.scrollToElement(t,{top:400}),this._selection.select(t),this._eventBus.fire("searchPad.selected",t)},Bs.prototype._resetOverlay=function(n){if(this._overlayId&&this._overlays.remove(this._overlayId),n){var e=Za(n),t=FF(e);this._overlayId=this._overlays.add(n,t)}},Bs.prototype._getBoxHtml=function(){const n=Es(Bs.BOX_HTML),e=xs(Bs.INPUT_SELECTOR,n);return e&&e.setAttribute("aria-label",this._translate("Search in diagram")),n};function FF(n){var e=6,t=n.width+e*2,i=n.height+e*2,r={width:t+"px",height:i+"px"},s=Es('<div class="'+Bs.OVERLAY_CLASS+'"></div>');return Ci(s,r),{position:{bottom:i-e,right:t-e},show:!0,html:s}}function Dw(n,e,t){var i=MF(e),r=Es(t);r.innerHTML=i,n.appendChild(r)}function MF(n){var e="";return n.forEach(function(t){t.matched?e+='<strong class="'+Bs.RESULT_HIGHLIGHT_CLASS+'">'+Py(t.matched)+"</strong>":e+=Py(t.normal)}),e!==""?e:null}Bs.CONTAINER_SELECTOR=".djs-search-container",Bs.INPUT_SELECTOR=".djs-search-input input",Bs.RESULTS_CONTAINER_SELECTOR=".djs-search-results",Bs.RESULT_SELECTOR=".djs-search-result",Bs.RESULT_SELECTED_CLASS="djs-search-result-selected",Bs.RESULT_SELECTED_SELECTOR="."+Bs.RESULT_SELECTED_CLASS,Bs.RESULT_ID_ATTRIBUTE="data-result-id",Bs.RESULT_HIGHLIGHT_CLASS="djs-search-highlight",Bs.OVERLAY_CLASS="djs-search-overlay",Bs.BOX_HTML='<div class="djs-search-container djs-draggable djs-scrollable"><div class="djs-search-input"><input type="text"/></div><div class="djs-search-results"></div></div>',Bs.RESULT_HTML='<div class="djs-search-result"></div>',Bs.RESULT_PRIMARY_HTML='<div class="djs-search-result-primary"></div>',Bs.RESULT_SECONDARY_HTML='<p class="djs-search-result-secondary"></p>';var IF={__depends__:[nc,dt,x],searchPad:["type",Bs]};function ww(n){if(Mt(n,"dmn:Decision")||Mt(n,"dmn:BusinessKnowledgeModel")||Mt(n,"dmn:InputData")||Mt(n,"dmn:KnowledgeSource"))return"name";if(Mt(n,"dmn:TextAnnotation"))return"text"}function Fy(n){var e=n.businessObject,t=ww(e);if(t)return e[t]||""}function NF(n,e,t){var i=n.businessObject,r=ww(i);return r&&(i[r]=e),t&&(n.hidden=!e),n}function $1(n,e,t){this._elementRegistry=n,this._canvas=t,e.registerProvider(this)}$1.$inject=["elementRegistry","searchPad","canvas"],$1.prototype.find=function(n){const e=this._canvas.getRootElement();let t=this._elementRegistry.filter(function(i){return!i.labelTarget});return t=Un(t,function(i){return i!==e}),t=Dr(t,function(i){return{primaryTokens:Cw(Fy(i),n),secondaryTokens:Cw(i.id,n),element:i}}),t=Un(t,function(i){return Ew(i.primaryTokens)||Ew(i.secondaryTokens)}),t=wr(t,function(i){return Fy(i.element)+i.element.id}),t};function Ew(n){return Un(n,function(t){return!!t.matched}).length>0}function Cw(n,e){const t=[],i=n;if(!n)return t;n=n.toLowerCase(),e=e.toLowerCase();const r=n.indexOf(e);return r>-1?(r!==0&&t.push({normal:i.substr(0,r)}),t.push({matched:i.substr(r,e.length)}),e.length+r<n.length&&t.push({normal:i.substr(e.length+r,n.length)})):t.push({normal:i}),t}var BF={__depends__:[IF],__init__:["dmnSearch"],dmnSearch:["type",$1]};function Yd(n){ur.call(this,n)}po(Yd,ur),Yd.prototype._navigationModules=[Us,ef,BF],Yd.prototype._modules=[].concat(Yd.prototype._modules,Yd.prototype._navigationModules);function j1(n){return n&&n[n.length-1]}function Sw(n){return n.y}function Aw(n){return n.x}var RF={left:Aw,center:Aw,right:function(n){return n.x+n.width},top:Sw,middle:Sw,bottom:function(n){return n.y+n.height}};function nf(n,e){this._modeling=n,this._rules=e}nf.$inject=["modeling","rules"],nf.prototype._getOrientationDetails=function(n){var e=["top","bottom","middle"],t="x",i="width";return e.indexOf(n)!==-1&&(t="y",i="height"),{axis:t,dimension:i}},nf.prototype._isType=function(n,e){return e.indexOf(n)!==-1},nf.prototype._alignmentPosition=function(n,e){var t=this._getOrientationDetails(n),i=t.axis,r=t.dimension,s={},o={},l=!1,h,p,y;function w(F,j){return Math.round((F[i]+j[i]+j[r])/2)}if(this._isType(n,["left","top"]))s[n]=e[0][i];else if(this._isType(n,["right","bottom"]))y=j1(e),s[n]=y[i]+y[r];else if(this._isType(n,["center","middle"])){if($t(e,function(F){var j=F[i]+Math.round(F[r]/2);o[j]?o[j].elements.push(F):o[j]={elements:[F],center:j}}),h=wr(o,function(F){return F.elements.length>1&&(l=!0),F.elements.length}),l)return s[n]=j1(h).center,s;p=e[0],e=wr(e,function(F){return F[i]+F[r]}),y=j1(e),s[n]=w(p,y)}return s},nf.prototype.trigger=function(n,e){var t=this._modeling,i,r=Un(n,function(h){return!(h.waypoints||h.host||h.labelTarget)});if(i=this._rules.allowed("elements.align",{elements:r}),Nn(i)&&(r=i),!(r.length<2||!i)){var s=RF[e],o=wr(r,s),l=this._alignmentPosition(e,o);t.alignElements(o,l)}};var LF={__init__:["alignElements"],alignElements:["type",nf]},$F=10,Tw=50,jF=250;function Ow(n,e,t,i){for(var r;r=WF(n,t,e);)t=i(e,t,r);return t}function VF(n){return function(e,t,i){var r={x:t.x,y:t.y};return["x","y"].forEach(function(s){var o=n[s];if(o){var l=s==="x"?"width":"height",h=o.margin,p=o.minDistance;h<0?r[s]=Math.min(i[s]+h-e[l]/2,t[s]-p+h):r[s]=Math.max(i[s]+i[l]+h+e[l]/2,t[s]+p+h)}}),r}}function WF(n,e,t){var i={x:e.x-t.width/2,y:e.y-t.height/2,width:t.width,height:t.height},r=UF(n);return Ii(r,function(s){if(s===t)return!1;var o=xt(s,i,$F);return o==="intersect"})}function HF(n,e){e||(e={});function t(Q){return Q.source===n?1:-1}var i=e.defaultDistance||Tw,r=e.direction||"e",s=e.filter,o=e.getWeight||t,l=e.maxDistance||jF,h=e.reference||"start";s||(s=QF);function p(Q,he){return r==="n"?h==="start"?C(Q).top-C(he).bottom:h==="center"?C(Q).top-Se(he).y:C(Q).top-C(he).top:r==="w"?h==="start"?C(Q).left-C(he).right:h==="center"?C(Q).left-Se(he).x:C(Q).left-C(he).left:r==="s"?h==="start"?C(he).top-C(Q).bottom:h==="center"?Se(he).y-C(Q).bottom:C(he).bottom-C(Q).bottom:h==="start"?C(he).left-C(Q).right:h==="center"?Se(he).x-C(Q).right:C(he).right-C(Q).right}var y=n.incoming.filter(s).map(function(Q){var he=o(Q),ye=he<0?p(Q.source,n):p(n,Q.source);return{id:Q.source.id,distance:ye,weight:he}}),w=n.outgoing.filter(s).map(function(Q){var he=o(Q),ye=he>0?p(n,Q.target):p(Q.target,n);return{id:Q.target.id,distance:ye,weight:he}}),F=y.concat(w).reduce(function(Q,he){return Q[he.id+"__weight_"+he.weight]=he,Q},{}),j=qt(F,function(Q,he){var ye=he.distance,Le=he.weight;return ye<0||ye>l||(Q[String(ye)]||(Q[String(ye)]=0),Q[String(ye)]+=1*Le,(!Q.distance||Q[Q.distance]<Q[String(ye)])&&(Q.distance=ye)),Q},{});return j.distance||i}function UF(n){var e=V1(n);return n.host&&(e=e.concat(V1(n.host))),n.attachers&&(e=e.concat(n.attachers.reduce(function(t,i){return t.concat(V1(i))},[]))),e}function V1(n){return qF(n).concat(zF(n))}function zF(n){return n.incoming.map(function(e){return e.source})}function qF(n){return n.outgoing.map(function(e){return e.target})}function QF(){return!0}var XF=100;function kw(n,e,t){n.on("autoPlace",XF,function(i){var r=i.shape,s=i.source;return YF(s,r)}),n.on("autoPlace.end",function(i){t.scrollToElement(i.shape)}),this.append=function(i,r,s){n.fire("autoPlace.start",{source:i,shape:r});var o=n.fire("autoPlace",{source:i,shape:r}),l=e.appendShape(i,r,o,i.parent,s);return n.fire("autoPlace.end",{source:i,shape:l}),l}}kw.$inject=["eventBus","modeling","canvas"];function YF(n,e,t){t||(t={});var i=t.defaultDistance||Tw,r=Se(n),s=C(n);return{x:s.right+i+e.width/2,y:r.y}}function _w(n,e){n.on("autoPlace.end",500,function(t){e.select(t.shape)})}_w.$inject=["eventBus","selection"];var GF={__init__:["autoPlaceSelectionBehavior"],autoPlace:["type",kw],autoPlaceSelectionBehavior:["type",_w]},KF={width:135,height:46},Pw={width:180,height:80},ZF={width:125,height:45},JF={width:100,height:63};function Gd(n){tl.call(this),this._drdFactory=n}po(Gd,tl),Gd.$inject=["drdFactory"],Gd.prototype.baseCreate=tl.prototype.create,Gd.prototype.create=function(n,e){return this.createDrdElement(n,e)},Gd.prototype.createDrdElement=function(n,e){var t=this._drdFactory,i;e=e||{};var r=e.businessObject;if(!r){if(!e.type)throw new Error("no shape type specified");r=t.create(e.type)}return r.di||(n==="connection"?r.di=t.createDiEdge(r,[]):n==="shape"&&(r.di=t.createDiShape(r,{}))),i=this._getDefaultSize(r),e=ee({businessObject:r,id:r.id},i,e),this.baseCreate(n,e)},Gd.prototype._getDefaultSize=function(n){return Mt(n,"dmn:BusinessKnowledgeModel")?KF:Mt(n,"dmn:Decision")?Pw:Mt(n,"dmn:InputData")?ZF:Mt(n,"dmn:KnowledgeSource")?JF:{width:100,height:80}};var W1="left",Fw="right",My=60,Mw=Pw.width;function eM(n,e){if(Mt(e,"dmn:TextAnnotation"))return tM(n,e);if(Mt(e,"dmn:DRGElement"))return nM(n,e)}function tM(n,e){var t=C(n),i={x:t.right+e.width/2,y:t.top-50-e.height/2},r={y:{margin:-30,minDistance:20}};return Ow(n,e,i,VF(r))}function nM(n,e){var t=C(n),i=Se(n);function r(l){return l.target===n?1:-1}var s=HF(n,{defaultDistance:180,direction:"s",getWeight:r,filter:iM,reference:"center"}),o={x:i.x,y:t.bottom+s};return Ow(n,e,o,rM(n))}function iM(n){return!Mt(n,"dmn:Association")}function Iw(n,e){return Math.abs(e.x-n.x)}function rM(n){var e=Se(n),t,i;return function(r,s,o){var l;return t?(s.x<e.x?t=o:i=o,Iw(e,Se(t))<Iw(e,Se(i))?l=W1:l=Fw):(t=o,i=o,Se(o).x-e.x>0?l=W1:l=Fw),l===W1?{x:Math.min(Se(t).x-Mw-My,C(t).left-My-r.width/2),y:s.y}:{x:Math.max(Se(i).x+Mw+My,C(i).right+My+r.width/2),y:s.y}}}function Nw(n){n.on("autoPlace",function(e){var t=e.shape,i=e.source;return eM(i,t)})}Nw.$inject=["eventBus"];var sM={__depends__:[GF],__init__:["dmnAutoPlace"],dmnAutoPlace:["type",Nw]},Bw=1500;function Rw(n,e,t){var i=this,r=t.get("dragging",!1);function s(o){if(!o.hover){var l=o.originalEvent,h=i._findTargetGfx(l),p=h&&n.get(h);h&&p&&(o.stopPropagation(),r.hover({element:p,gfx:h}),r.move(l))}}r&&e.on("drag.start",function(o){e.once("drag.move",Bw,function(l){s(l)})}),function(){var o,l;e.on("element.hover",function(h){o=h.gfx,l=h.element}),e.on("element.hover",Bw,function(h){l&&e.fire("element.out",{element:l,gfx:o})}),e.on("element.out",function(){o=null,l=null})}(),this._findTargetGfx=function(o){var l,h;if(o instanceof MouseEvent)return l=Ih(o),h=document.elementFromPoint(l.x,l.y),oM(h)}}Rw.$inject=["elementRegistry","eventBus","injector"];function oM(n){return ti(n,"svg, .djs-element",!0)}var aM={__init__:["hoverFix"],hoverFix:["type",Rw]},rf=Math.round,Lw="djs-drag-active";function Kd(n){n.preventDefault()}function lM(n){return typeof TouchEvent!="undefined"&&n instanceof TouchEvent}function uM(n){return Math.sqrt(Math.pow(n.x,2)+Math.pow(n.y,2))}function $w(n,e,t,i){var r={threshold:5,trapClick:!0},s;function o(Me){var ke=e.viewbox(),Qe=e._container.getBoundingClientRect();return{x:ke.x+(Me.x-Qe.left)/ke.scale,y:ke.y+(Me.y-Qe.top)/ke.scale}}function l(Me,ke){ke=ke||s;var Qe=n.createEvent(ee({},ke.payload,ke.data,{isTouch:ke.isTouch}));return n.fire("drag."+Me,Qe)===!1?!1:n.fire(ke.prefix+"."+Me,Qe)}function h(Me){var ke=Me.filter(function(Qe){return i.get(Qe.id)});ke.length&&t.select(ke)}function p(Me,ke){var Qe=s.payload,ft=s.displacement,bt=s.globalStart,st=Ih(Me),Lt=ro(st,bt),Vt=s.localStart,Zt=o(st),wn=ro(Zt,Vt);if(!s.active&&(ke||uM(Lt)>s.threshold)){if(ee(Qe,{x:rf(Vt.x+ft.x),y:rf(Vt.y+ft.y),dx:0,dy:0},{originalEvent:Me}),l("start")===!1)return ye();s.active=!0,s.keepSelection||(Qe.previousSelection=t.get(),t.select(null)),s.cursor&&pl(s.cursor),e.addMarker(e.getRootElement(),Lw)}mm(Me),s.active&&(ee(Qe,{x:rf(Zt.x+ft.x),y:rf(Zt.y+ft.y),dx:rf(wn.x),dy:rf(wn.y)},{originalEvent:Me}),l("move"))}function y(Me){var ke,Qe=!0;s.active&&(Me&&(s.payload.originalEvent=Me,mm(Me)),Qe=l("end")),Qe===!1&&l("rejected"),ke=Le(Qe!==!0),l("ended",ke)}function w(Me){cu("Escape",Me)&&(Kd(Me),ye())}function F(Me){var ke;s.active&&(ke=vm(n),setTimeout(ke,400),Kd(Me)),y(Me)}function j(Me){p(Me)}function Q(Me){var ke=s.payload;ke.hoverGfx=Me.gfx,ke.hover=Me.element,l("hover")}function he(Me){l("out");var ke=s.payload;ke.hoverGfx=null,ke.hover=null}function ye(Me){var ke;if(s){var Qe=s.active;Qe&&l("cancel"),ke=Le(Me),Qe&&l("canceled",ke)}}function Le(Me){var ke,Qe;l("cleanup"),xc(),s.trapClick?Qe=F:Qe=y,zn.unbind(document,"mousemove",p),zn.unbind(document,"dragstart",Kd),zn.unbind(document,"selectstart",Kd),zn.unbind(document,"mousedown",Qe,!0),zn.unbind(document,"mouseup",Qe,!0),zn.unbind(document,"keyup",w),zn.unbind(document,"touchstart",j,!0),zn.unbind(document,"touchcancel",ye,!0),zn.unbind(document,"touchmove",p,!0),zn.unbind(document,"touchend",y,!0),n.off("element.hover",Q),n.off("element.out",he),e.removeMarker(e.getRootElement(),Lw);var ft=s.payload.previousSelection;return Me!==!1&&ft&&!t.get().length&&h(ft),ke=s,s=null,ke}function et(Me,ke,Qe,ft){s&&ye(!1),typeof ke=="string"&&(ft=Qe,Qe=ke,ke=null),ft=ee({},r,ft||{});var bt=ft.data||{},st,Lt,Vt,Zt,wn;ft.trapClick?Zt=F:Zt=y,Me?(st=td(Me)||Me,Lt=Ih(Me),mm(Me),st.type==="dragstart"&&Kd(st)):(st=null,Lt={x:0,y:0}),Vt=o(Lt),ke||(ke=Vt),wn=lM(st),s=ee({prefix:Qe,data:bt,payload:{},globalStart:Lt,displacement:ro(ke,Vt),localStart:Vt,isTouch:wn},ft),ft.manual||(wn?(zn.bind(document,"touchstart",j,!0),zn.bind(document,"touchcancel",ye,!0),zn.bind(document,"touchmove",p,!0),zn.bind(document,"touchend",y,!0)):(zn.bind(document,"mousemove",p),zn.bind(document,"dragstart",Kd),zn.bind(document,"selectstart",Kd),zn.bind(document,"mousedown",Zt,!0),zn.bind(document,"mouseup",Zt,!0)),zn.bind(document,"keyup",w),n.on("element.hover",Q),n.on("element.out",he)),l("init"),ft.autoActivate&&p(Me,!0)}n.on("diagram.destroy",ye),this.init=et,this.move=p,this.hover=Q,this.out=he,this.end=y,this.cancel=ye,this.context=function(){return s},this.setOptions=function(Me){ee(r,Me)}}$w.$inject=["eventBus","canvas","selection","elementRegistry"];var Zd={__depends__:[aM,x],dragging:["type",$w]};function sf(n,e,t){this._canvas=t,this._opts=ee({scrollThresholdIn:[20,20,20,20],scrollThresholdOut:[0,0,0,0],scrollRepeatTimeout:15,scrollStep:10},n);var i=this;e.on("drag.move",function(r){var s=i._toBorderPoint(r);i.startScroll(s)}),e.on(["drag.cleanup"],function(){i.stopScroll()})}sf.$inject=["config.autoScroll","eventBus","canvas"],sf.prototype.startScroll=function(n){var e=this._canvas,t=this._opts,i=this,r=e.getContainer().getBoundingClientRect(),s=[n.x,n.y,r.width-n.x,r.height-n.y];this.stopScroll();for(var o=0,l=0,h=0;h<4;h++)cM(s[h],t.scrollThresholdOut[h],t.scrollThresholdIn[h])&&(h===0?o=t.scrollStep:h==1?l=t.scrollStep:h==2?o=-t.scrollStep:h==3&&(l=-t.scrollStep));(o!==0||l!==0)&&(e.scroll({dx:o,dy:l}),this._scrolling=setTimeout(function(){i.startScroll(n)},t.scrollRepeatTimeout))};function cM(n,e,t){return e<n&&n<t}sf.prototype.stopScroll=function(){clearTimeout(this._scrolling)},sf.prototype.setOptions=function(n){this._opts=ee({},this._opts,n)},sf.prototype._toBorderPoint=function(n){var e=this._canvas._container.getBoundingClientRect(),t=Ih(n.originalEvent);return{x:t.x-e.left,y:t.y-e.top}};var hM={__depends__:[Zd],__init__:["autoScroll"],autoScroll:["type",sf]};function H1(n){this._commandStack=n.get("commandStack",!1)}H1.$inject=["injector"],H1.prototype.allowed=function(n,e){var t=!0,i=this._commandStack;return i&&(t=i.canExecute(n,e)),t===void 0?!0:t};var Jd={__init__:["rules"],rules:["type",H1]},Iy=Math.round,dM=Math.max;function pM(n,e){var t=n.x,i=n.y;return[["M",t,i],["m",0,-e],["a",e,e,0,1,1,0,2*e],["a",e,e,0,1,1,0,-2*e],["z"]]}function fM(n){var e=[];return n.forEach(function(t,i){e.push([i===0?"M":"L",t.x,t.y])}),e}var jw=10;function mM(n,e){var t,i;for(t=0;i=n[t];t++)if(an(i,e)<=jw)return{point:n[t],bendpoint:!0,index:t};return null}function gM(n,e){var t=Hl(pM(e,jw),fM(n)),i=t[0],r=t[t.length-1],s;return i?i!==r?i.segment2!==r.segment2?(s=dM(i.segment2,r.segment2)-1,{point:n[s],bendpoint:!0,index:s}):{point:{x:Iy(i.x+r.x)/2,y:Iy(i.y+r.y)/2},index:i.segment2}:{point:{x:Iy(i.x),y:Iy(i.y)},index:i.segment2}:null}function yM(n,e){return mM(n,e)||gM(n,e)}function vM(n){return Math.sqrt(Math.pow(n.x,2)+Math.pow(n.y,2))}function xM(n,e,t){var i=[{n:n[0]-t[0],lambda:e[0]},{n:n[1]-t[1],lambda:e[1]}],r=i[0].n*e[0]+i[1].n*e[1],s=i[0].lambda*e[0]+i[1].lambda*e[1];return-r/s}function Vw(n,e){var t=e[0],i=e[1],r={x:i.x-t.x,y:i.y-t.y},s=xM([t.x,t.y],[r.x,r.y],[n.x,n.y]);return{x:t.x+s*r.x,y:t.y+s*r.y}}function bM(n,e){var t=Vw(n,e),i={x:t.x-n.x,y:t.y-n.y};return vM(i)}var Ww="djs-bendpoint",Hw="djs-segment-dragger";function DM(n,e){var t=Ih(e),i=n._container.getBoundingClientRect(),r;r={x:i.left,y:i.top};var s=n.viewbox();return{x:s.x+(t.x-r.x)/s.scale,y:s.y+(t.y-r.y)/s.scale}}function U1(n,e,t){var i=DM(n,t),r=yM(e,i);return r}function z1(n,e){var t=Yr("g");Hs(t).add(Ww),Br(n,t);var i=Yr("circle");Ji(i,{cx:0,cy:0,r:4}),Hs(i).add("djs-visual"),Br(t,i);var r=Yr("circle");return Ji(r,{cx:0,cy:0,r:10}),Hs(r).add("djs-hit"),Br(t,r),e&&Hs(t).add(e),t}function wM(n,e,t,i){var r=Yr("g");Br(n,r);var s=18,o=6,l=11,h=CM(e,t,i),p=o+l,y=Yr("rect");Ji(y,{x:-s/2,y:-o/2,width:s,height:o}),Hs(y).add("djs-visual"),Br(r,y);var w=Yr("rect");return Ji(w,{x:-h/2,y:-p/2,width:h,height:p}),Hs(w).add("djs-hit"),Br(r,w),z(r,i==="v"?90:0),r}function Uw(n,e,t){var i=Yr("g"),r=An(e,t),s=Dn(e,t);return Br(n,i),wM(i,e,t,s),Hs(i).add(Hw),Hs(i).add(s==="h"?"horizontal":"vertical"),L(i,r.x,r.y),i}function q1(n){return Math.abs(Math.round(n*2/3))}function EM(n,e){var t=SM(n,e);return Vw(n,t)}function CM(n,e,t){var i=e.x-n.x,r=e.y-n.y;return q1(t==="h"?i:r)}function SM(n,e){for(var t=e.waypoints,i=1/0,r,s=0;s<t.length-1;s++){var o=t[s],l=t[s+1],h=bM(n,[o,l]);h<i&&(i=h,r=s)}return[t[r],t[r+1]]}function zw(n,e,t,i,r){function s(Me,ke,Qe){var ft=Me.index,bt=Me.point,st,Lt,Vt,Zt,wn,Kn;return ft<=0||Me.bendpoint?!1:(st=ke[ft-1],Lt=ke[ft],Vt=An(st,Lt),Zt=Dn(st,Lt),wn=Math.abs(bt.x-Vt.x),Kn=Math.abs(bt.y-Vt.y),Zt&&wn<=Qe&&Kn<=Qe)}function o(Me,ke){var Qe=Me.waypoints,ft,bt,st,Lt;return ke.index<=0||ke.bendpoint||(ft={start:Qe[ke.index-1],end:Qe[ke.index]},bt=Dn(ft.start,ft.end),!bt)?null:(bt==="h"?st=ft.end.x-ft.start.x:st=ft.end.y-ft.start.y,Lt=q1(st)/2,Lt)}function l(Me,ke){var Qe=ke.waypoints,ft=U1(e,Qe,Me),bt;if(ft)return bt=o(ke,ft),s(ft,Qe,bt)?r.start(Me,ke,ft.index):i.start(Me,ke,ft.index,!ft.bendpoint),!0}function h(Me,ke,Qe){zn.bind(Me,ke,function(ft){t.triggerMouseEvent(ke,ft,Qe),ft.stopPropagation()})}function p(Me,ke){var Qe=e.getLayer("overlays"),ft=xs('.djs-bendpoints[data-element-id="'+bm(Me.id)+'"]',Qe);return!ft&&ke&&(ft=Yr("g"),Ji(ft,{"data-element-id":Me.id}),Hs(ft).add("djs-bendpoints"),Br(Qe,ft),h(ft,"mousedown",Me),h(ft,"click",Me),h(ft,"dblclick",Me)),ft}function y(Me,ke){return xs('.djs-segment-dragger[data-segment-idx="'+Me+'"]',ke)}function w(Me,ke){ke.waypoints.forEach(function(Qe,ft){var bt=z1(Me);Br(Me,bt),L(bt,Qe.x,Qe.y)}),z1(Me,"floating")}function F(Me,ke){for(var Qe=ke.waypoints,ft,bt,st,Lt=1;Lt<Qe.length;Lt++)ft=Qe[Lt-1],bt=Qe[Lt],Dn(ft,bt)&&(st=Uw(Me,ft,bt),Ji(st,{"data-segment-idx":Lt}),h(st,"mousemove",ke))}function j(Me){$t(Io("."+Ww,Me),function(ke){ra(ke)})}function Q(Me){$t(Io("."+Hw,Me),function(ke){ra(ke)})}function he(Me){var ke=p(Me);return ke||(ke=p(Me,!0),w(ke,Me),F(ke,Me)),ke}function ye(Me){var ke=p(Me);ke&&(Q(ke),j(ke),F(ke,Me),w(ke,Me))}function Le(Me,ke){var Qe=xs(".floating",Me),ft=ke.point;Qe&&L(Qe,ft.x,ft.y)}function et(Me,ke,Qe){var ft=y(ke.index,Me),bt=Qe[ke.index-1],st=Qe[ke.index],Lt=ke.point,Vt=An(bt,st),Zt=Dn(bt,st),wn,Kn;ft&&(wn=AM(ft),Kn={x:Lt.x-Vt.x,y:Lt.y-Vt.y},Zt==="v"&&(Kn={x:Kn.y,y:Kn.x}),L(wn,Kn.x,Kn.y))}n.on("connection.changed",function(Me){ye(Me.element)}),n.on("connection.remove",function(Me){var ke=p(Me.element);ke&&ra(ke)}),n.on("element.marker.update",function(Me){var ke=Me.element,Qe;ke.waypoints&&(Qe=he(ke),Me.add?Hs(Qe).add(Me.marker):Hs(Qe).remove(Me.marker))}),n.on("element.mousemove",function(Me){var ke=Me.element,Qe=ke.waypoints,ft,bt;if(Qe){if(ft=p(ke,!0),bt=U1(e,Qe,Me.originalEvent),!bt)return;Le(ft,bt),bt.bendpoint||et(ft,bt,Qe)}}),n.on("element.mousedown",function(Me){if(fh(Me)){var ke=Me.originalEvent,Qe=Me.element;if(Qe.waypoints)return l(ke,Qe)}}),n.on("selection.changed",function(Me){var ke=Me.newSelection,Qe=ke[0];Qe&&Qe.waypoints&&he(Qe)}),n.on("element.hover",function(Me){var ke=Me.element;ke.waypoints&&(he(ke),t.registerEvent(Me.gfx,"mousemove","element.mousemove"))}),n.on("element.out",function(Me){t.unregisterEvent(Me.gfx,"mousemove","element.mousemove")}),n.on("element.updateId",function(Me){var ke=Me.element,Qe=Me.newId;if(ke.waypoints){var ft=p(ke);ft&&Ji(ft,{"data-element-id":Qe})}}),this.addHandles=he,this.updateHandles=ye,this.getBendpointsContainer=p,this.getSegmentDragger=y}zw.$inject=["eventBus","canvas","interactionEvents","bendpointMove","connectionSegmentMove"];function AM(n){return xs(".djs-visual",n)}var qw=Math.round,ep="reconnectStart",tp="reconnectEnd",Em="updateWaypoints";function Q1(n,e,t,i,r,s){this._injector=n,this.start=function(o,l,h,p){var y=t.getGraphics(l),w=l.source,F=l.target,j=l.waypoints,Q;!p&&h===0?Q=ep:!p&&h===j.length-1?Q=tp:Q=Em;var he=Q===Em?"connection.updateWaypoints":"connection.reconnect",ye=r.allowed(he,{connection:l,source:w,target:F});ye===!1&&(ye=r.allowed(he,{connection:l,source:F,target:w})),ye!==!1&&i.init(o,"bendpoint.move",{data:{connection:l,connectionGfx:y,context:{allowed:ye,bendpointIndex:h,connection:l,source:w,target:F,insert:p,type:Q}}})},e.on("bendpoint.move.hover",function(o){var l=o.context,h=l.connection,p=h.source,y=h.target,w=o.hover,F=l.type;l.hover=w;var j;if(w){var Q=F===Em?"connection.updateWaypoints":"connection.reconnect";if(j=l.allowed=r.allowed(Q,{connection:h,source:F===ep?w:p,target:F===tp?w:y}),j){l.source=F===ep?w:p,l.target=F===tp?w:y;return}j===!1&&(j=l.allowed=r.allowed(Q,{connection:h,source:F===tp?w:y,target:F===ep?w:p})),j&&(l.source=F===tp?w:y,l.target=F===ep?w:p)}}),e.on(["bendpoint.move.out","bendpoint.move.cleanup"],function(o){var l=o.context,h=l.type;l.hover=null,l.source=null,l.target=null,h!==Em&&(l.allowed=!1)}),e.on("bendpoint.move.end",function(o){var l=o.context,h=l.allowed,p=l.bendpointIndex,y=l.connection,w=l.insert,F=y.waypoints.slice(),j=l.source,Q=l.target,he=l.type,ye=l.hints||{},Le={x:qw(o.x),y:qw(o.y)};if(!h)return!1;he===Em?(w?F.splice(p,0,Le):F[p]=Le,ye.bendpointMove={insert:w,bendpointIndex:p},F=this.cropWaypoints(y,F),s.updateWaypoints(y,f(F),ye)):(he===ep?(ye.docking="source",Ny(l)&&(ye.docking="target",ye.newWaypoints=F.reverse())):he===tp&&(ye.docking="target",Ny(l)&&(ye.docking="source",ye.newWaypoints=F.reverse())),s.reconnect(y,j,Q,Le,ye))},this)}Q1.$inject=["injector","eventBus","canvas","dragging","rules","modeling"],Q1.prototype.cropWaypoints=function(n,e){var t=this._injector.get("connectionDocking",!1);if(!t)return e;var i=n.waypoints;return n.waypoints=e,n.waypoints=t.getCroppedWaypoints(n),e=n.waypoints,n.waypoints=i,e};function Ny(n){var e=n.hover,t=n.source,i=n.target,r=n.type;if(r===ep)return e&&i&&e===i&&t!==i;if(r===tp)return e&&t&&e===t&&t!==i}var TM="reconnectStart",OM="reconnectEnd",Qw="updateWaypoints",Cm="connect-ok",By="connect-not-ok",Xw="connect-hover",Yw="djs-updating",Gw="djs-dragging",Kw=1100;function Zw(n,e,t,i){this._injector=e;var r=e.get("connectionPreview",!1);t.on("bendpoint.move.start",function(s){var o=s.context,l=o.bendpointIndex,h=o.connection,p=o.insert,y=h.waypoints,w=y.slice();o.waypoints=y,p&&w.splice(l,0,{x:s.x,y:s.y}),h.waypoints=w;var F=o.draggerGfx=z1(i.getLayer("overlays"));Hs(F).add("djs-dragging"),i.addMarker(h,Gw),i.addMarker(h,Yw)}),t.on("bendpoint.move.hover",function(s){var o=s.context,l=o.allowed,h=o.hover,p=o.type;if(h){if(i.addMarker(h,Xw),p===Qw)return;l?(i.removeMarker(h,By),i.addMarker(h,Cm)):l===!1&&(i.removeMarker(h,Cm),i.addMarker(h,By))}}),t.on(["bendpoint.move.out","bendpoint.move.cleanup"],Kw,function(s){var o=s.context,l=o.hover,h=o.target;l&&(i.removeMarker(l,Xw),i.removeMarker(l,h?Cm:By))}),t.on("bendpoint.move.move",function(s){var o=s.context,l=o.allowed,h=o.bendpointIndex,p=o.draggerGfx,y=o.hover,w=o.type,F=o.connection,j=F.source,Q=F.target,he=F.waypoints.slice(),ye={x:s.x,y:s.y},Le=o.hints||{},et={};r&&(Le.connectionStart&&(et.connectionStart=Le.connectionStart),Le.connectionEnd&&(et.connectionEnd=Le.connectionEnd),w===TM?Ny(o)?(et.connectionEnd=et.connectionEnd||ye,et.source=Q,et.target=y||j,he=he.reverse()):(et.connectionStart=et.connectionStart||ye,et.source=y||j,et.target=Q):w===OM?Ny(o)?(et.connectionStart=et.connectionStart||ye,et.source=y||Q,et.target=j,he=he.reverse()):(et.connectionEnd=et.connectionEnd||ye,et.source=j,et.target=y||Q):(et.noCropping=!0,et.noLayout=!0,he[h]=ye),w===Qw&&(he=n.cropWaypoints(F,he)),et.waypoints=he,r.drawPreview(o,l,et)),L(p,s.x,s.y)},this),t.on(["bendpoint.move.end","bendpoint.move.cancel"],Kw,function(s){var o=s.context,l=o.connection,h=o.draggerGfx,p=o.hover,y=o.target,w=o.waypoints;l.waypoints=w,ra(h),i.removeMarker(l,Yw),i.removeMarker(l,Gw),p&&(i.removeMarker(p,Cm),i.removeMarker(p,y?Cm:By)),r&&r.cleanUp(o)})}Zw.$inject=["bendpointMove","injector","eventBus","canvas"];var Jw="connect-hover",eE="djs-updating";function tE(n,e,t){return X1(n,e,n[e]+t)}function X1(n,e,t){return{x:e==="x"?t:n.x,y:e==="y"?t:n.y}}function kM(n,e,t,i){var r=Math.max(e[i],t[i]),s=Math.min(e[i],t[i]),o=20,l=Math.min(Math.max(s+o,n[i]),r-o);return X1(e,i,l)}function nE(n){return n==="x"?"y":"x"}function iE(n,e,t){var i,r;return n.original?n.original:(i=Se(e),r=nE(t),X1(n,r,i[r]))}function rE(n,e,t,i,r,s){var o=n.get("connectionDocking",!1);this.start=function(w,F,j){var Q,he=t.getGraphics(F),ye=j-1,Le=j,et=F.waypoints,Me=et[ye],ke=et[Le],Qe=U1(t,et,w),ft,bt,st;ft=Dn(Me,ke),ft&&(bt=ft==="v"?"x":"y",ye===0&&(Me=iE(Me,F.source,bt)),Le===et.length-1&&(ke=iE(ke,F.target,bt)),Qe?st=Qe.point:st={x:(Me.x+ke.x)/2,y:(Me.y+ke.y)/2},Q={connection:F,segmentStartIndex:ye,segmentEndIndex:Le,segmentStart:Me,segmentEnd:ke,axis:bt,dragPosition:st},i.init(w,st,"connectionSegment.move",{cursor:bt==="x"?"resize-ew":"resize-ns",data:{connection:F,connectionGfx:he,context:Q}}))};function l(w,F){if(!o)return F;var j=w.waypoints,Q;return w.waypoints=F,Q=o.getCroppedWaypoints(w),w.waypoints=j,Q}function h(w){r.update("connection",w.connection,w.connectionGfx)}function p(w,F,j){var Q=w.newWaypoints,he=w.segmentStartIndex+F,ye=Q[he],Le=w.segmentEndIndex+F,et=Q[Le],Me=nE(w.axis),ke=kM(j,ye,et,Me);L(w.draggerGfx,ke.x,ke.y)}function y(w,F){var j=0,Q=w.filter(function(he,ye){return Gt(w[ye-1],w[ye+1],he)?(j=ye<=F?j-1:j,!1):!0});return{waypoints:Q,segmentOffset:j}}e.on("connectionSegment.move.start",function(w){var F=w.context,j=w.connection,Q=t.getLayer("overlays");F.originalWaypoints=j.waypoints.slice(),F.draggerGfx=Uw(Q,F.segmentStart,F.segmentEnd),Hs(F.draggerGfx).add("djs-dragging"),t.addMarker(j,eE)}),e.on("connectionSegment.move.move",function(w){var F=w.context,j=F.connection,Q=F.segmentStartIndex,he=F.segmentEndIndex,ye=F.segmentStart,Le=F.segmentEnd,et=F.axis,Me=F.originalWaypoints.slice(),ke=tE(ye,et,w["d"+et]),Qe=tE(Le,et,w["d"+et]),ft=Me.length,bt=0;Me[Q]=ke,Me[he]=Qe;var st,Lt;Q<2&&(st=xt(j.source,ke),Q===1?st==="intersect"&&(Me.shift(),Me[0]=ke,bt--):st!=="intersect"&&(Me.unshift(ye),bt++)),he>ft-3&&(Lt=xt(j.target,Qe),he===ft-2?Lt==="intersect"&&(Me.pop(),Me[Me.length-1]=Qe):Lt!=="intersect"&&Me.push(Le)),F.newWaypoints=j.waypoints=l(j,Me),p(F,bt,w),F.newSegmentStartIndex=Q+bt,h(w)}),e.on("connectionSegment.move.hover",function(w){w.context.hover=w.hover,t.addMarker(w.hover,Jw)}),e.on(["connectionSegment.move.out","connectionSegment.move.cleanup"],function(w){var F=w.context.hover;F&&t.removeMarker(F,Jw)}),e.on("connectionSegment.move.cleanup",function(w){var F=w.context,j=F.connection;F.draggerGfx&&ra(F.draggerGfx),t.removeMarker(j,eE)}),e.on(["connectionSegment.move.cancel","connectionSegment.move.end"],function(w){var F=w.context,j=F.connection;j.waypoints=F.originalWaypoints,h(w)}),e.on("connectionSegment.move.end",function(w){var F=w.context,j=F.connection,Q=F.newWaypoints,he=F.newSegmentStartIndex;Q=Q.map(function(Qe){return{original:Qe.original,x:Math.round(Qe.x),y:Math.round(Qe.y)}});var ye=y(Q,he),Le=ye.waypoints,et=l(j,Le),Me=ye.segmentOffset,ke={segmentMove:{segmentStartIndex:F.segmentStartIndex,newSegmentStartIndex:he+Me}};s.updateWaypoints(j,et,ke)})}rE.$inject=["injector","eventBus","canvas","dragging","graphicsFactory","modeling"];var _M=Math.abs,sE=Math.round;function PM(n,e,t){t=t===void 0?10:t;var i,r;for(i=0;i<e.length;i++)if(r=e[i],_M(r-n)<=t)return r}function FM(n){return{x:n.x,y:n.y}}function MM(n){return{x:n.x+n.width,y:n.y+n.height}}function of(n,e){return!n||isNaN(n.x)||isNaN(n.y)?e:{x:sE(n.x+n.width/2),y:sE(n.y+n.height/2)}}function Sm(n,e){var t=n.snapped;return t?typeof e=="string"?t[e]:t.x&&t.y:!1}function gh(n,e,t){if(typeof e!="string")throw new Error("axis must be in [x, y]");if(typeof t!="number"&&t!==!1)throw new Error("value must be Number or false");var i,r=n[e],s=n.snapped=n.snapped||{};return t===!1?s[e]=!1:(s[e]=!0,i=t-r,n[e]+=i,n["d"+e]+=i),r}function oE(n){return n.children||[]}var IM=Math.abs,aE=Math.round,Y1=10;function lE(n){function e(s,o){if(Nn(s)){for(var l=s.length;l--;)if(IM(s[l]-o)<=Y1)return s[l]}else{s=+s;var h=o%s;if(h<Y1)return o-h;if(h>s-Y1)return o-h+s}return o}function t(s,o){if(s.waypoints)return EM(o,s);if(s.width)return{x:aE(s.width/2+s.x),y:aE(s.height/2+s.y)}}function i(s){var o=s.context,l=o.snapPoints,h=o.connection,p=h.waypoints,y=o.segmentStart,w=o.segmentStartIndex,F=o.segmentEnd,j=o.segmentEndIndex,Q=o.axis;if(l)return l;var he=[p[w-1],y,F,p[j+1]];return w<2&&he.unshift(t(h.source,s)),j>p.length-3&&he.unshift(t(h.target,s)),o.snapPoints=l={horizontal:[],vertical:[]},$t(he,function(ye){ye&&(ye=ye.original||ye,Q==="y"&&l.horizontal.push(ye.y),Q==="x"&&l.vertical.push(ye.x))}),l}n.on("connectionSegment.move.move",1500,function(s){var o=i(s),l=s.x,h=s.y,p,y;if(o){p=e(o.vertical,l),y=e(o.horizontal,h);var w=l-p,F=h-y;ee(s,{dx:s.dx-w,dy:s.dy-F,x:p,y}),(w||o.vertical.indexOf(l)!==-1)&&gh(s,"x",p),(F||o.horizontal.indexOf(h)!==-1)&&gh(s,"y",y)}});function r(s){var o=s.snapPoints,l=s.connection.waypoints,h=s.bendpointIndex;if(o)return o;var p=[l[h-1],l[h+1]];return s.snapPoints=o={horizontal:[],vertical:[]},$t(p,function(y){y&&(y=y.original||y,o.horizontal.push(y.y),o.vertical.push(y.x))}),o}n.on(["connect.hover","connect.move","connect.end"],1500,function(s){var o=s.context,l=o.hover,h=l&&t(l,s);!fo(l)||!h||!h.x||!h.y||(gh(s,"x",h.x),gh(s,"y",h.y))}),n.on(["bendpoint.move.move","bendpoint.move.end"],1500,function(s){var o=s.context,l=r(o),h=o.hover,p=h&&t(h,s),y=s.x,w=s.y,F,j;if(l){F=e(p?l.vertical.concat([p.x]):l.vertical,y),j=e(p?l.horizontal.concat([p.y]):l.horizontal,w);var Q=y-F,he=w-j;ee(s,{dx:s.dx-Q,dy:s.dy-he,x:s.x-Q,y:s.y-he}),(Q||l.vertical.indexOf(y)!==-1)&&gh(s,"x",F),(he||l.horizontal.indexOf(w)!==-1)&&gh(s,"y",j)}})}lE.$inject=["eventBus"];var NM={__depends__:[Zd,Jd],__init__:["bendpoints","bendpointSnapping","bendpointMovePreview"],bendpoints:["type",zw],bendpointMove:["type",Q1],bendpointMovePreview:["type",Zw],connectionSegmentMove:["type",rE],bendpointSnapping:["type",lE]},BM="djs-element-hidden",Ry=".entry",RM=1e3,uE=8,LM=300;function Il(n,e,t){this._canvas=n,this._elementRegistry=e,this._eventBus=t,this._current=null,this._init()}Il.$inject=["canvas","elementRegistry","eventBus"],Il.prototype._init=function(){var n=this;this._eventBus.on("selection.changed",function(e){var t=e.newSelection,i=t.length?t.length===1?t[0]:t:null;i?n.open(i,!0):n.close()}),this._eventBus.on("elements.changed",function(e){var t=e.elements,i=n._current;if(i){var{target:r}=i,s=Nn(r)?r:[r],o=s.filter(function(h){return cE(t,h)});if(o.length){n.close();var l=s.filter(function(h){return n._elementRegistry.get(h.id)});l.length&&n._updateAndOpen(l.length>1?l:l[0])}}}),this._eventBus.on("canvas.viewbox.changed",()=>{this._updatePosition()}),this._eventBus.on("element.marker.update",function(e){n._updateVisibility()}),this._container=this._createContainer()},Il.prototype._createContainer=function(){const n=Es('<div class="djs-context-pad-parent"></div>');return this._canvas.getContainer().appendChild(n),n},Il.prototype.registerProvider=function(n,e){e||(e=n,n=RM),this._eventBus.on("contextPad.getProviders",n,function(t){t.providers.push(e)})},Il.prototype.getEntries=function(n){var e=this._getProviders(),t=Nn(n)?"getMultiElementContextPadEntries":"getContextPadEntries",i={};return $t(e,function(r){if(vn(r[t])){var s=r[t](n);vn(s)?i=s(i):$t(s,function(o,l){i[l]=o})}}),i},Il.prototype.trigger=function(n,e,t){var i,r,s=e.delegateTarget||e.target;if(!s)return e.preventDefault();if(i=Or(s,"data-action"),r=e.originalEvent||e,n==="mouseover"){this._timeout=setTimeout(()=>{this._mouseout=this.triggerEntry(i,"hover",r,t)},LM);return}else if(n==="mouseout"){clearTimeout(this._timeout),this._mouseout&&(this._mouseout(),this._mouseout=null);return}return this.triggerEntry(i,n,r,t)},Il.prototype.triggerEntry=function(n,e,t,i){if(this.isShown()){var r=this._current.target,s=this._current.entries,o=s[n];if(o){var l=o.action;if(this._eventBus.fire("contextPad.trigger",{entry:o,event:t})!==!1){if(vn(l)){if(e==="click")return l(t,r,i)}else if(l[e])return l[e](t,r,i);t.preventDefault()}}}},Il.prototype.open=function(n,e){!e&&this.isOpen(n)||(this.close(),this._updateAndOpen(n))},Il.prototype._getProviders=function(){var n=this._eventBus.createEvent({type:"contextPad.getProviders",providers:[]});return this._eventBus.fire(n),n.providers},Il.prototype._updateAndOpen=function(n){var e=this.getEntries(n),t=this._createHtml(n),i;$t(e,function(r,s){var o=r.group||"default",l=Es(r.html||'<div class="entry" draggable="true"></div>'),h;Or(l,"data-action",s),h=xs("[data-group="+bm(o)+"]",t),h||(h=Es('<div class="group"></div>'),Or(h,"data-group",o),t.appendChild(h)),h.appendChild(l),r.className&&$M(l,r.className),r.title&&Or(l,"title",r.title),r.imageUrl&&(i=Es("<img>"),Or(i,"src",r.imageUrl),i.style.width="100%",i.style.height="100%",l.appendChild(i))}),sr(t).add("open"),this._current={entries:e,html:t,target:n},this._updatePosition(),this._updateVisibility(),this._eventBus.fire("contextPad.open",{current:this._current})},Il.prototype._createHtml=function(n){var e=this,t=Es('<div class="djs-context-pad"></div>');return Jr.bind(t,Ry,"click",function(i){e.trigger("click",i)}),Jr.bind(t,Ry,"dragstart",function(i){e.trigger("dragstart",i)}),Jr.bind(t,Ry,"mouseover",function(i){e.trigger("mouseover",i)}),Jr.bind(t,Ry,"mouseout",function(i){e.trigger("mouseout",i)}),zn.bind(t,"mousedown",function(i){i.stopPropagation()}),this._container.appendChild(t),this._eventBus.fire("contextPad.create",{target:n,pad:t}),t},Il.prototype.getPad=function(n){console.warn(new Error("ContextPad#getPad is deprecated and will be removed in future library versions, cf. https://github.com/bpmn-io/diagram-js/pull/888"));let e;return this.isOpen()&&VM(this._current.target,n)?e=this._current.html:e=this._createHtml(n),{html:e}},Il.prototype.close=function(){this.isOpen()&&(clearTimeout(this._timeout),this._container.innerHTML="",this._eventBus.fire("contextPad.close",{current:this._current}),this._current=null)},Il.prototype.isOpen=function(n){var e=this._current;if(!e)return!1;if(!n)return!0;var t=e.target;return Nn(n)!==Nn(t)?!1:Nn(n)?n.length===t.length&&mr(n,function(i){return cE(t,i)}):t===n},Il.prototype.isShown=function(){return this.isOpen()&&sr(this._current.html).has("open")},Il.prototype.show=function(){this.isOpen()&&(sr(this._current.html).add("open"),this._updatePosition(),this._eventBus.fire("contextPad.show",{current:this._current}))},Il.prototype.hide=function(){this.isOpen()&&(sr(this._current.html).remove("open"),this._eventBus.fire("contextPad.hide",{current:this._current}))},Il.prototype._getPosition=function(n){if(!Nn(n)&&fo(n)){const r=this._canvas.viewbox(),s=jM(n),o=s.x*r.scale-r.x*r.scale,l=s.y*r.scale-r.y*r.scale;return{left:o+uE*this._canvas.zoom(),top:l}}var e=this._canvas.getContainer(),t=e.getBoundingClientRect(),i=this._getTargetBounds(n);return{left:i.right-t.left+uE*this._canvas.zoom(),top:i.top-t.top}},Il.prototype._updatePosition=function(){if(this.isOpen()){var n=this._current.html,e=this._getPosition(this._current.target);"x"in e&&"y"in e?(n.style.left=e.x+"px",n.style.top=e.y+"px"):["top","right","bottom","left"].forEach(function(t){t in e&&(n.style[t]=e[t]+"px")})}},Il.prototype._updateVisibility=function(){if(this.isOpen()){var n=this,e=this._current.target,t=Nn(e)?e:[e],i=t.some(function(r){return n._canvas.hasMarker(r,BM)});i?n.hide():n.show()}},Il.prototype._getTargetBounds=function(n){var e=Nn(n)?n:[n],t=e.map(i=>this._canvas.getGraphics(i));return t.reduce((i,r)=>{const s=r.getBoundingClientRect();return i.top=Math.min(i.top,s.top),i.right=Math.max(i.right,s.right),i.bottom=Math.max(i.bottom,s.bottom),i.left=Math.min(i.left,s.left),i.x=i.left,i.y=i.top,i.width=i.right-i.left,i.height=i.bottom-i.top,i},{top:1/0,right:-1/0,bottom:-1/0,left:1/0})};function $M(n,e){var t=sr(n);e=Nn(e)?e:e.split(/\s+/g),e.forEach(function(i){t.add(i)})}function cE(n,e){return n.indexOf(e)!==-1}function jM(n){return n.waypoints[n.waypoints.length-1]}function VM(n,e){return n=Nn(n)?n:[n],e=Nn(e)?e:[e],n.length===e.length&&mr(n,function(t){return e.includes(t)})}var WM={__depends__:[Zp,dt],contextPad:["type",Il]};function hE(n,e,t,i){function r(o,l){return i.allowed("connection.create",{source:o,target:l})}function s(o,l){return r(l,o)}n.on("connect.hover",function(o){var l=o.context,h=l.start,p=o.hover,y;if(l.hover=p,y=l.canExecute=r(h,p),!ii(y)){if(y!==!1){l.source=h,l.target=p;return}y=l.canExecute=s(h,p),!ii(y)&&y!==!1&&(l.source=p,l.target=h)}}),n.on(["connect.out","connect.cleanup"],function(o){var l=o.context;l.hover=null,l.source=null,l.target=null,l.canExecute=!1}),n.on("connect.end",function(o){var l=o.context,h=l.canExecute,p=l.connectionStart,y={x:o.x,y:o.y},w=l.source,F=l.target;if(!h)return!1;var j=null,Q={connectionStart:G1(l)?y:p,connectionEnd:G1(l)?p:y};Kt(h)&&(j=h),l.connection=t.connect(w,F,j,Q)}),this.start=function(o,l,h,p){Kt(h)||(p=h,h=Se(l)),e.init(o,"connect",{autoActivate:p,data:{shape:l,context:{start:l,connectionStart:h}}})}}hE.$inject=["eventBus","dragging","modeling","rules"];function G1(n){var e=n.hover,t=n.source,i=n.target;return e&&t&&e===t&&t!==i}var HM=1100,UM=900,dE="connect-ok",pE="connect-not-ok";function fE(n,e,t){var i=n.get("connectionPreview",!1);i&&e.on("connect.move",function(r){var s=r.context,o=s.canExecute,l=s.hover,h=s.source,p=s.start,y=s.startPosition,w=s.target,F=s.connectionStart||y,j=s.connectionEnd||{x:r.x,y:r.y},Q=F,he=j;G1(s)&&(Q=j,he=F),i.drawPreview(s,o,{source:h||p,target:w||l,connectionStart:Q,connectionEnd:he})}),e.on("connect.hover",UM,function(r){var s=r.context,o=r.hover,l=s.canExecute;l!==null&&t.addMarker(o,l?dE:pE)}),e.on(["connect.out","connect.cleanup"],HM,function(r){var s=r.hover;s&&(t.removeMarker(s,dE),t.removeMarker(s,pE))}),i&&e.on("connect.cleanup",function(r){i.cleanUp(r.context)})}fE.$inject=["injector","eventBus","canvas"];var zM={__depends__:[x,Jd,Zd],__init__:["connectPreview"],connect:["type",hE],connectPreview:["type",fE]},qM=["marker-start","marker-mid","marker-end"],QM=["circle","ellipse","line","path","polygon","polyline","path","rect"];function rd(n,e,t,i){this._elementRegistry=n,this._canvas=t,this._styles=i,this._clonedMarkers={};var r=this;e.on("drag.cleanup",function(){r.cleanUp()})}rd.$inject=["elementRegistry","eventBus","canvas","styles"],rd.prototype.cleanUp=function(){var n=this;$t(n._clonedMarkers,function(e){ra(e)}),n._clonedMarkers={}},rd.prototype.getGfx=function(n){return this._elementRegistry.getGraphics(n)},rd.prototype.addDragger=function(n,e,t,i="djs-dragger"){t=t||this.getGfx(n);var r=iu(t),s=t.getBoundingClientRect();return this._cloneMarkers(k(r),i),Ji(r,this._styles.cls(i,[],{x:s.top,y:s.left})),Br(e,r),Ji(r,"data-preview-support-element-id",n.id),r},rd.prototype.addFrame=function(n,e){var t=Yr("rect",{class:"djs-resize-overlay",width:n.width,height:n.height,x:n.x,y:n.y});return Br(e,t),Ji(t,"data-preview-support-element-id",n.id),t},rd.prototype._cloneMarkers=function(n,e="djs-dragger"){var t=this;if(n.childNodes)for(var i=0;i<n.childNodes.length;i++)t._cloneMarkers(n.childNodes[i],e);KM(n)&&qM.forEach(function(r){if(Ji(n,r)){var s=XM(n,r,t._canvas.getContainer());t._cloneMarker(n,s,r,e)}})},rd.prototype._cloneMarker=function(n,e,t,i="djs-dragger"){var r=e.id+"-"+i,s=this._clonedMarkers[r];if(!s){s=iu(e);var o=r+"-clone";s.id=o,Hs(s).add(i),this._clonedMarkers[r]=s;var l=xs("defs",this._canvas._svg);l||(l=Yr("defs"),Br(this._canvas._svg,l)),Br(l,s)}var h=GM(this._clonedMarkers[r].id);Ji(n,t,h)};function XM(n,e,t){var i=YM(Ji(n,e));return xs("marker#"+i,t||document)}function YM(n){return n.match(/url\(['"]?#([^'"]*)['"]?\)/)[1]}function GM(n){return"url(#"+n+")"}function KM(n){return QM.indexOf(n.nodeName)!==-1}var K1={__init__:["previewSupport"],previewSupport:["type",rd]},ZM="drop-ok",mE="drop-not-ok",gE="attach-ok",yE="new-parent",vE="create",JM=2e3;function xE(n,e,t,i,r){function s(h,p,y,w,F){if(!p)return!1;h=Un(h,function(et){var Me=et.labelTarget;return!et.parent&&!(ta(et)&&h.indexOf(Me)!==-1)});var j=Ii(h,function(et){return!fo(et)}),Q=!1,he=!1,ye=!1;DE(h)&&(Q=r.allowed("shape.attach",{position:y,shape:j,target:p})),Q||(DE(h)?ye=r.allowed("shape.create",{position:y,shape:j,source:w,target:p}):ye=r.allowed("elements.create",{elements:h,position:y,target:p}));var Le=F.connectionTarget;return ye||Q?(j&&w&&(he=r.allowed("connection.create",{source:Le===w?j:w,target:Le===w?w:j,hints:{targetParent:p,targetAttach:Q}})),{attach:Q,connect:he}):ye===null||Q===null?null:!1}function o(h,p){[gE,ZM,mE,yE].forEach(function(y){y===p?n.addMarker(h,y):n.removeMarker(h,y)})}t.on(["create.move","create.hover"],function(h){var p=h.context,y=p.elements,w=h.hover,F=p.source,j=p.hints||{};if(!w){p.canExecute=!1,p.target=null;return}bE(h);var Q={x:h.x,y:h.y},he=p.canExecute=w&&s(y,w,Q,F,j);w&&he!==null&&(p.target=w,he&&he.attach?o(w,gE):o(w,he?yE:mE))}),t.on(["create.end","create.out","create.cleanup"],function(h){var p=h.hover;p&&o(p,null)}),t.on("create.end",function(h){var p=h.context,y=p.source,w=p.shape,F=p.elements,j=p.target,Q=p.canExecute,he=Q&&Q.attach,ye=Q&&Q.connect,Le=p.hints||{};if(Q===!1||!j)return!1;bE(h);var et={x:h.x,y:h.y};ye?w=i.appendShape(y,w,et,j,{attach:he,connection:ye===!0?{}:ye,connectionTarget:Le.connectionTarget}):(F=i.createElements(F,et,j,ee({},Le,{attach:he})),w=Ii(F,function(Me){return!fo(Me)})),ee(p,{elements:F,shape:w}),ee(h,{elements:F,shape:w})});function l(){var h=e.context();h&&h.prefix===vE&&e.cancel()}t.on("create.init",function(){t.on("elements.changed",l),t.once(["create.cancel","create.end"],JM,function(){t.off("elements.changed",l)})}),this.start=function(h,p,y){Nn(p)||(p=[p]);var w=Ii(p,function(Q){return!fo(Q)});if(w){y=ee({elements:p,hints:{},shape:w},y||{}),$t(p,function(Q){In(Q.x)||(Q.x=0),In(Q.y)||(Q.y=0)});var F=Un(p,function(Q){return!Q.hidden}),j=Za(F);$t(p,function(Q){fo(Q)&&(Q.waypoints=Dr(Q.waypoints,function(he){return{x:he.x-j.x-j.width/2,y:he.y-j.y-j.height/2}})),ee(Q,{x:Q.x-j.x-j.width/2,y:Q.y-j.y-j.height/2})}),e.init(h,vE,{cursor:"grabbing",autoActivate:!0,data:{shape:w,elements:p,context:y}})}}}xE.$inject=["canvas","dragging","eventBus","modeling","rules"];function bE(n){var e=n.context,t=e.createConstraints;t&&(t.left&&(n.x=Math.max(n.x,t.left)),t.right&&(n.x=Math.min(n.x,t.right)),t.top&&(n.y=Math.max(n.y,t.top)),t.bottom&&(n.y=Math.min(n.y,t.bottom)))}function DE(n){return n&&n.length===1&&!fo(n[0])}var eI=750;function wE(n,e,t,i,r){function s(o){var l=Yr("g");Ji(l,r.cls("djs-drag-group",["no-events"]));var h=Yr("g");return o.forEach(function(p){var y;p.hidden||(p.waypoints?(y=t._createContainer("connection",h),t.drawConnection(k(y),p)):(y=t._createContainer("shape",h),t.drawShape(k(y),p),L(y,p.x,p.y)),i.addDragger(p,l,y))}),l}e.on("create.move",eI,function(o){var l=o.hover,h=o.context,p=h.elements,y=h.dragGroup;y||(y=h.dragGroup=s(p));var w;l?(y.parentNode||(w=n.getActiveLayer(),Br(w,y)),L(y,o.x,o.y)):ra(y)}),e.on("create.cleanup",function(o){var l=o.context,h=l.dragGroup;h&&ra(h)})}wE.$inject=["canvas","eventBus","graphicsFactory","previewSupport","styles"];var EE={__depends__:[Zd,K1,Jd,x],__init__:["create","createPreview"],create:["type",xE],createPreview:["type",wE]},Ly,Dl,CE,np,SE,AE,Z1,J1,ex,tx,Am={},TE=[],tI=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,nx=Array.isArray;function sd(n,e){for(var t in e)n[t]=e[t];return n}function OE(n){var e=n.parentNode;e&&e.removeChild(n)}function kE(n,e,t){var i,r,s,o={};for(s in e)s=="key"?i=e[s]:s=="ref"?r=e[s]:o[s]=e[s];if(arguments.length>2&&(o.children=arguments.length>3?Ly.call(arguments,2):t),typeof n=="function"&&n.defaultProps!=null)for(s in n.defaultProps)o[s]===void 0&&(o[s]=n.defaultProps[s]);return $y(n,o,i,r,null)}function $y(n,e,t,i,r){var s={type:n,props:e,key:t,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:r==null?++CE:r,__i:-1,__u:0};return r==null&&Dl.vnode!=null&&Dl.vnode(s),s}function jy(n){return n.children}function Vy(n,e){this.props=n,this.context=e}function ip(n,e){if(e==null)return n.__?ip(n.__,n.__i+1):null;for(var t;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null)return t.__e;return typeof n.type=="function"?ip(n):null}function _E(n){var e,t;if((n=n.__)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,e=0;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null){n.__e=n.__c.base=t.__e;break}return _E(n)}}function PE(n){(!n.__d&&(n.__d=!0)&&np.push(n)&&!Wy.__r++||SE!==Dl.debounceRendering)&&((SE=Dl.debounceRendering)||AE)(Wy)}function Wy(){var n,e,t,i,r,s,o,l;for(np.sort(Z1);n=np.shift();)n.__d&&(e=np.length,i=void 0,s=(r=(t=n).__v).__e,o=[],l=[],t.__P&&((i=sd({},r)).__v=r.__v+1,Dl.vnode&&Dl.vnode(i),ix(t.__P,i,r,t.__n,t.__P.ownerSVGElement!==void 0,32&r.__u?[s]:null,o,s==null?ip(r):s,!!(32&r.__u),l),i.__v=r.__v,i.__.__k[i.__i]=i,BE(o,i,l),i.__e!=s&&_E(i)),np.length>e&&np.sort(Z1));Wy.__r=0}function FE(n,e,t,i,r,s,o,l,h,p,y){var w,F,j,Q,he,ye=i&&i.__k||TE,Le=e.length;for(t.__d=h,nI(t,e,ye),h=t.__d,w=0;w<Le;w++)(j=t.__k[w])!=null&&typeof j!="boolean"&&typeof j!="function"&&(F=j.__i===-1?Am:ye[j.__i]||Am,j.__i=w,ix(n,j,F,r,s,o,l,h,p,y),Q=j.__e,j.ref&&F.ref!=j.ref&&(F.ref&&rx(F.ref,null,j),y.push(j.ref,j.__c||Q,j)),he==null&&Q!=null&&(he=Q),65536&j.__u||F.__k===j.__k?(h&&!h.isConnected&&(h=ip(F)),h=ME(j,h,n)):typeof j.type=="function"&&j.__d!==void 0?h=j.__d:Q&&(h=Q.nextSibling),j.__d=void 0,j.__u&=-196609);t.__d=h,t.__e=he}function nI(n,e,t){var i,r,s,o,l,h=e.length,p=t.length,y=p,w=0;for(n.__k=[],i=0;i<h;i++)o=i+w,(r=n.__k[i]=(r=e[i])==null||typeof r=="boolean"||typeof r=="function"?null:typeof r=="string"||typeof r=="number"||typeof r=="bigint"||r.constructor==String?$y(null,r,null,null,null):nx(r)?$y(jy,{children:r},null,null,null):r.constructor===void 0&&r.__b>0?$y(r.type,r.props,r.key,r.ref?r.ref:null,r.__v):r)!=null?(r.__=n,r.__b=n.__b+1,l=iI(r,t,o,y),r.__i=l,s=null,l!==-1&&(y--,(s=t[l])&&(s.__u|=131072)),s==null||s.__v===null?(l==-1&&w--,typeof r.type!="function"&&(r.__u|=65536)):l!==o&&(l===o+1?w++:l>o?y>h-o?w+=l-o:w--:l<o?l==o-1&&(w=l-o):w=0,l!==i+w&&(r.__u|=65536))):(s=t[o])&&s.key==null&&s.__e&&!(131072&s.__u)&&(s.__e==n.__d&&(n.__d=ip(s)),sx(s,s,!1),t[o]=null,y--);if(y)for(i=0;i<p;i++)(s=t[i])!=null&&!(131072&s.__u)&&(s.__e==n.__d&&(n.__d=ip(s)),sx(s,s))}function ME(n,e,t){var i,r;if(typeof n.type=="function"){for(i=n.__k,r=0;i&&r<i.length;r++)i[r]&&(i[r].__=n,e=ME(i[r],e,t));return e}n.__e!=e&&(t.insertBefore(n.__e,e||null),e=n.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType===8);return e}function iI(n,e,t,i){var r=n.key,s=n.type,o=t-1,l=t+1,h=e[t];if(h===null||h&&r==h.key&&s===h.type&&!(131072&h.__u))return t;if(i>(h!=null&&!(131072&h.__u)?1:0))for(;o>=0||l<e.length;){if(o>=0){if((h=e[o])&&!(131072&h.__u)&&r==h.key&&s===h.type)return o;o--}if(l<e.length){if((h=e[l])&&!(131072&h.__u)&&r==h.key&&s===h.type)return l;l++}}return-1}function IE(n,e,t){e[0]==="-"?n.setProperty(e,t==null?"":t):n[e]=t==null?"":typeof t!="number"||tI.test(e)?t:t+"px"}function Hy(n,e,t,i,r){var s;e:if(e==="style")if(typeof t=="string")n.style.cssText=t;else{if(typeof i=="string"&&(n.style.cssText=i=""),i)for(e in i)t&&e in t||IE(n.style,e,"");if(t)for(e in t)i&&t[e]===i[e]||IE(n.style,e,t[e])}else if(e[0]==="o"&&e[1]==="n")s=e!==(e=e.replace(/(PointerCapture)$|Capture$/i,"$1")),e=e.toLowerCase()in n||e==="onFocusOut"||e==="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),n.l||(n.l={}),n.l[e+s]=t,t?i?t.u=i.u:(t.u=J1,n.addEventListener(e,s?tx:ex,s)):n.removeEventListener(e,s?tx:ex,s);else{if(r)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e in n)try{n[e]=t==null?"":t;break e}catch(o){}typeof t=="function"||(t==null||t===!1&&e[4]!=="-"?n.removeAttribute(e):n.setAttribute(e,t))}}function NE(n){return function(e){if(this.l){var t=this.l[e.type+n];if(e.t==null)e.t=J1++;else if(e.t<t.u)return;return t(Dl.event?Dl.event(e):e)}}}function ix(n,e,t,i,r,s,o,l,h,p){var y,w,F,j,Q,he,ye,Le,et,Me,ke,Qe,ft,bt,st,Lt=e.type;if(e.constructor!==void 0)return null;128&t.__u&&(h=!!(32&t.__u),s=[l=e.__e=t.__e]),(y=Dl.__b)&&y(e);e:if(typeof Lt=="function")try{if(Le=e.props,et=(y=Lt.contextType)&&i[y.__c],Me=y?et?et.props.value:y.__:i,t.__c?ye=(w=e.__c=t.__c).__=w.__E:("prototype"in Lt&&Lt.prototype.render?e.__c=w=new Lt(Le,Me):(e.__c=w=new Vy(Le,Me),w.constructor=Lt,w.render=sI),et&&et.sub(w),w.props=Le,w.state||(w.state={}),w.context=Me,w.__n=i,F=w.__d=!0,w.__h=[],w._sb=[]),w.__s==null&&(w.__s=w.state),Lt.getDerivedStateFromProps!=null&&(w.__s==w.state&&(w.__s=sd({},w.__s)),sd(w.__s,Lt.getDerivedStateFromProps(Le,w.__s))),j=w.props,Q=w.state,w.__v=e,F)Lt.getDerivedStateFromProps==null&&w.componentWillMount!=null&&w.componentWillMount(),w.componentDidMount!=null&&w.__h.push(w.componentDidMount);else{if(Lt.getDerivedStateFromProps==null&&Le!==j&&w.componentWillReceiveProps!=null&&w.componentWillReceiveProps(Le,Me),!w.__e&&(w.shouldComponentUpdate!=null&&w.shouldComponentUpdate(Le,w.__s,Me)===!1||e.__v===t.__v)){for(e.__v!==t.__v&&(w.props=Le,w.state=w.__s,w.__d=!1),e.__e=t.__e,e.__k=t.__k,e.__k.forEach(function(Vt){Vt&&(Vt.__=e)}),ke=0;ke<w._sb.length;ke++)w.__h.push(w._sb[ke]);w._sb=[],w.__h.length&&o.push(w);break e}w.componentWillUpdate!=null&&w.componentWillUpdate(Le,w.__s,Me),w.componentDidUpdate!=null&&w.__h.push(function(){w.componentDidUpdate(j,Q,he)})}if(w.context=Me,w.props=Le,w.__P=n,w.__e=!1,Qe=Dl.__r,ft=0,"prototype"in Lt&&Lt.prototype.render){for(w.state=w.__s,w.__d=!1,Qe&&Qe(e),y=w.render(w.props,w.state,w.context),bt=0;bt<w._sb.length;bt++)w.__h.push(w._sb[bt]);w._sb=[]}else do w.__d=!1,Qe&&Qe(e),y=w.render(w.props,w.state,w.context),w.state=w.__s;while(w.__d&&++ft<25);w.state=w.__s,w.getChildContext!=null&&(i=sd(sd({},i),w.getChildContext())),F||w.getSnapshotBeforeUpdate==null||(he=w.getSnapshotBeforeUpdate(j,Q)),FE(n,nx(st=y!=null&&y.type===jy&&y.key==null?y.props.children:y)?st:[st],e,t,i,r,s,o,l,h,p),w.base=e.__e,e.__u&=-161,w.__h.length&&o.push(w),ye&&(w.__E=w.__=null)}catch(Vt){e.__v=null,h||s!=null?(e.__e=l,e.__u|=h?160:32,s[s.indexOf(l)]=null):(e.__e=t.__e,e.__k=t.__k),Dl.__e(Vt,e,t)}else s==null&&e.__v===t.__v?(e.__k=t.__k,e.__e=t.__e):e.__e=rI(t.__e,e,t,i,r,s,o,h,p);(y=Dl.diffed)&&y(e)}function BE(n,e,t){e.__d=void 0;for(var i=0;i<t.length;i++)rx(t[i],t[++i],t[++i]);Dl.__c&&Dl.__c(e,n),n.some(function(r){try{n=r.__h,r.__h=[],n.some(function(s){s.call(r)})}catch(s){Dl.__e(s,r.__v)}})}function rI(n,e,t,i,r,s,o,l,h){var p,y,w,F,j,Q,he,ye=t.props,Le=e.props,et=e.type;if(et==="svg"&&(r=!0),s!=null){for(p=0;p<s.length;p++)if((j=s[p])&&"setAttribute"in j==!!et&&(et?j.localName===et:j.nodeType===3)){n=j,s[p]=null;break}}if(n==null){if(et===null)return document.createTextNode(Le);n=r?document.createElementNS("http://www.w3.org/2000/svg",et):document.createElement(et,Le.is&&Le),s=null,l=!1}if(et===null)ye===Le||l&&n.data===Le||(n.data=Le);else{if(s=s&&Ly.call(n.childNodes),ye=t.props||Am,!l&&s!=null)for(ye={},p=0;p<n.attributes.length;p++)ye[(j=n.attributes[p]).name]=j.value;for(p in ye)j=ye[p],p=="children"||(p=="dangerouslySetInnerHTML"?w=j:p==="key"||p in Le||Hy(n,p,null,j,r));for(p in Le)j=Le[p],p=="children"?F=j:p=="dangerouslySetInnerHTML"?y=j:p=="value"?Q=j:p=="checked"?he=j:p==="key"||l&&typeof j!="function"||ye[p]===j||Hy(n,p,j,ye[p],r);if(y)l||w&&(y.__html===w.__html||y.__html===n.innerHTML)||(n.innerHTML=y.__html),e.__k=[];else if(w&&(n.innerHTML=""),FE(n,nx(F)?F:[F],e,t,i,r&&et!=="foreignObject",s,o,s?s[0]:t.__k&&ip(t,0),l,h),s!=null)for(p=s.length;p--;)s[p]!=null&&OE(s[p]);l||(p="value",Q!==void 0&&(Q!==n[p]||et==="progress"&&!Q||et==="option"&&Q!==ye[p])&&Hy(n,p,Q,ye[p],!1),p="checked",he!==void 0&&he!==n[p]&&Hy(n,p,he,ye[p],!1))}return n}function rx(n,e,t){try{typeof n=="function"?n(e):n.current=e}catch(i){Dl.__e(i,t)}}function sx(n,e,t){var i,r;if(Dl.unmount&&Dl.unmount(n),(i=n.ref)&&(i.current&&i.current!==n.__e||rx(i,null,e)),(i=n.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(s){Dl.__e(s,e)}i.base=i.__P=null}if(i=n.__k)for(r=0;r<i.length;r++)i[r]&&sx(i[r],e,t||typeof n.type!="function");t||n.__e==null||OE(n.__e),n.__c=n.__=n.__e=n.__d=void 0}function sI(n,e,t){return this.constructor(n,t)}function RE(n,e,t){var i,r,s,o;Dl.__&&Dl.__(n,e),r=(i=typeof t=="function")?null:e.__k,s=[],o=[],ix(e,n=(!i&&t||e).__k=kE(jy,null,[n]),r||Am,Am,e.ownerSVGElement!==void 0,!i&&t?[t]:r?null:e.firstChild?Ly.call(e.childNodes):null,s,!i&&t?t:r?r.__e:e.firstChild,i,o),BE(s,n,o)}Ly=TE.slice,Dl={__e:function(n,e,t,i){for(var r,s,o;e=e.__;)if((r=e.__c)&&!r.__)try{if((s=r.constructor)&&s.getDerivedStateFromError!=null&&(r.setState(s.getDerivedStateFromError(n)),o=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(n,i||{}),o=r.__d),o)return r.__E=r}catch(l){n=l}throw n}},CE=0,Vy.prototype.setState=function(n,e){var t;t=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=sd({},this.state),typeof n=="function"&&(n=n(sd({},t),this.props)),n&&sd(t,n),n!=null&&this.__v&&(e&&this._sb.push(e),PE(this))},Vy.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),PE(this))},Vy.prototype.render=jy,np=[],AE=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Z1=function(n,e){return n.__v.__b-e.__v.__b},Wy.__r=0,J1=0,ex=NE(!1),tx=NE(!0);var LE=function(n,e,t,i){var r;e[0]=0;for(var s=1;s<e.length;s++){var o=e[s++],l=e[s]?(e[0]|=o?1:2,t[e[s++]]):e[++s];o===3?i[0]=l:o===4?i[1]=Object.assign(i[1]||{},l):o===5?(i[1]=i[1]||{})[e[++s]]=l:o===6?i[1][e[++s]]+=l+"":o?(r=n.apply(l,LE(n,l,t,["",null])),i.push(r),l[0]?e[0]|=2:(e[s-2]=0,e[s]=r)):i.push(l)}return i},$E=new Map;function oI(n){var e=$E.get(this);return e||(e=new Map,$E.set(this,e)),(e=LE(this,e.get(n)||(e.set(n,e=function(t){for(var i,r,s=1,o="",l="",h=[0],p=function(F){s===1&&(F||(o=o.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?h.push(0,F,o):s===3&&(F||o)?(h.push(3,F,o),s=2):s===2&&o==="..."&&F?h.push(4,F,0):s===2&&o&&!F?h.push(5,0,!0,o):s>=5&&((o||!F&&s===5)&&(h.push(s,0,o,r),s=6),F&&(h.push(s,F,0,r),s=6)),o=""},y=0;y<t.length;y++){y&&(s===1&&p(),p(y));for(var w=0;w<t[y].length;w++)i=t[y][w],s===1?i==="<"?(p(),h=[h],s=3):o+=i:s===4?o==="--"&&i===">"?(s=1,o=""):o=i+o[0]:l?i===l?l="":o+=i:i==='"'||i==="'"?l=i:i===">"?(p(),s=1):s&&(i==="="?(s=5,r=o,o=""):i==="/"&&(s<5||t[y][w+1]===">")?(p(),s===3&&(h=h[0]),s=h,(h=h[0]).push(2,0,s),s=0):i===" "||i==="	"||i===`
`||i==="\r"?(p(),s=2):o+=i),s===3&&o==="!--"&&(s=4,h=h[0])}return p(),h}(n)),e),arguments,[])).length>1?e:e[0]}var Ql=oI.bind(kE),af,Nl,ox,jE,Tm=0,VE=[],Uy=[],Xl=Dl,WE=Xl.__b,HE=Xl.__r,UE=Xl.diffed,zE=Xl.__c,qE=Xl.unmount,QE=Xl.__;function zy(n,e){Xl.__h&&Xl.__h(Nl,n,Tm||e),Tm=0;var t=Nl.__H||(Nl.__H={__:[],__h:[]});return n>=t.__.length&&t.__.push({__V:Uy}),t.__[n]}function ax(n){return Tm=1,aI(GE,n)}function aI(n,e,t){var i=zy(af++,2);if(i.t=n,!i.__c&&(i.__=[GE(void 0,e),function(l){var h=i.__N?i.__N[0]:i.__[0],p=i.t(h,l);h!==p&&(i.__N=[p,i.__[1]],i.__c.setState({}))}],i.__c=Nl,!Nl.u)){var r=function(l,h,p){if(!i.__c.__H)return!0;var y=i.__c.__H.__.filter(function(F){return!!F.__c});if(y.every(function(F){return!F.__N}))return!s||s.call(this,l,h,p);var w=!1;return y.forEach(function(F){if(F.__N){var j=F.__[0];F.__=F.__N,F.__N=void 0,j!==F.__[0]&&(w=!0)}}),!(!w&&i.__c.props===l)&&(!s||s.call(this,l,h,p))};Nl.u=!0;var s=Nl.shouldComponentUpdate,o=Nl.componentWillUpdate;Nl.componentWillUpdate=function(l,h,p){if(this.__e){var y=s;s=void 0,r(l,h,p),s=y}o&&o.call(this,l,h,p)},Nl.shouldComponentUpdate=r}return i.__N||i.__}function lx(n,e){var t=zy(af++,3);!Xl.__s&&hx(t.__H,e)&&(t.__=n,t.i=e,Nl.__H.__h.push(t))}function ux(n,e){var t=zy(af++,4);!Xl.__s&&hx(t.__H,e)&&(t.__=n,t.i=e,Nl.__h.push(t))}function XE(n){return Tm=5,Om(function(){return{current:n}},[])}function Om(n,e){var t=zy(af++,7);return hx(t.__H,e)?(t.__V=n(),t.i=e,t.__h=n,t.__V):t.__}function km(n,e){return Tm=8,Om(function(){return n},e)}function lI(){for(var n;n=VE.shift();)if(n.__P&&n.__H)try{n.__H.__h.forEach(qy),n.__H.__h.forEach(cx),n.__H.__h=[]}catch(e){n.__H.__h=[],Xl.__e(e,n.__v)}}Xl.__b=function(n){Nl=null,WE&&WE(n)},Xl.__=function(n,e){n&&e.__k&&e.__k.__m&&(n.__m=e.__k.__m),QE&&QE(n,e)},Xl.__r=function(n){HE&&HE(n),af=0;var e=(Nl=n.__c).__H;e&&(ox===Nl?(e.__h=[],Nl.__h=[],e.__.forEach(function(t){t.__N&&(t.__=t.__N),t.__V=Uy,t.__N=t.i=void 0})):(e.__h.forEach(qy),e.__h.forEach(cx),e.__h=[],af=0)),ox=Nl},Xl.diffed=function(n){UE&&UE(n);var e=n.__c;e&&e.__H&&(e.__H.__h.length&&(VE.push(e)!==1&&jE===Xl.requestAnimationFrame||((jE=Xl.requestAnimationFrame)||uI)(lI)),e.__H.__.forEach(function(t){t.i&&(t.__H=t.i),t.__V!==Uy&&(t.__=t.__V),t.i=void 0,t.__V=Uy})),ox=Nl=null},Xl.__c=function(n,e){e.some(function(t){try{t.__h.forEach(qy),t.__h=t.__h.filter(function(i){return!i.__||cx(i)})}catch(i){e.some(function(r){r.__h&&(r.__h=[])}),e=[],Xl.__e(i,t.__v)}}),zE&&zE(n,e)},Xl.unmount=function(n){qE&&qE(n);var e,t=n.__c;t&&t.__H&&(t.__H.__.forEach(function(i){try{qy(i)}catch(r){e=r}}),t.__H=void 0,e&&Xl.__e(e,t.__v))};var YE=typeof requestAnimationFrame=="function";function uI(n){var e,t=function(){clearTimeout(i),YE&&cancelAnimationFrame(e),setTimeout(n)},i=setTimeout(t,100);YE&&(e=requestAnimationFrame(t))}function qy(n){var e=Nl,t=n.__c;typeof t=="function"&&(n.__c=void 0,t()),Nl=e}function cx(n){var e=Nl;n.__c=n.__(),Nl=e}function hx(n,e){return!n||n.length!==e.length||e.some(function(t,i){return t!==n[i]})}function GE(n,e){return typeof e=="function"?e(n):e}function KE(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var r=n.length;for(e=0;e<r;e++)n[e]&&(t=KE(n[e]))&&(i&&(i+=" "),i+=t)}else for(t in n)n[t]&&(i&&(i+=" "),i+=t);return i}function Qy(){for(var n,e,t=0,i="",r=arguments.length;t<r;t++)(n=arguments[t])&&(e=KE(n))&&(i&&(i+=" "),i+=e);return i}function cI(n){const{entry:e,selected:t,onMouseEnter:i,onMouseLeave:r,onAction:s}=n;return Ql`
    <li
      class=${Qy("entry",{selected:t})}
      data-id=${e.id}
      title=${e.title||e.label}
      tabIndex="0"
      onClick=${s}
      onFocus=${i}
      onBlur=${r}
      onMouseEnter=${i}
      onMouseLeave=${r}
      onDragStart=${o=>s(o,e,"dragstart")}
      aria-role="button"
      draggable=${!0}
    >
      <div class="djs-popup-entry-content">
        <span
          class=${Qy("djs-popup-entry-name",e.className)}
        >
          ${e.imageUrl&&Ql`<img class="djs-popup-entry-icon" src=${e.imageUrl} alt="" />`||e.imageHtml&&Ql`<div class="djs-popup-entry-icon" dangerouslySetInnerHTML=${{__html:e.imageHtml}} />`}

          ${e.label?Ql`
            <span class="djs-popup-label">
              ${e.label}
            </span>
          `:null}
        </span>
        ${e.description&&Ql`
          <span
            class="djs-popup-entry-description"
            title=${e.description}
          >
            ${e.description}
          </span>
        `}
      </div>
      ${e.documentationRef&&Ql`
        <div class="djs-popup-entry-docs">
          <a
            href="${e.documentationRef}"
            onClick=${o=>o.stopPropagation()}
            title="Open element documentation"
            target="_blank"
            rel="noopener"
          >
            <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M10.6368 10.6375V5.91761H11.9995V10.6382C11.9995 10.9973 11.8623 11.3141 11.5878 11.5885C11.3134 11.863 10.9966 12.0002 10.6375 12.0002H1.36266C0.982345 12.0002 0.660159 11.8681 0.396102 11.6041C0.132044 11.34 1.52588e-05 11.0178 1.52588e-05 10.6375V1.36267C1.52588e-05 0.98236 0.132044 0.660173 0.396102 0.396116C0.660159 0.132058 0.982345 2.95639e-05 1.36266 2.95639e-05H5.91624V1.36267H1.36266V10.6375H10.6368ZM12 0H7.2794L7.27873 1.36197H9.68701L3.06507 7.98391L4.01541 8.93425L10.6373 2.31231V4.72059H12V0Z" fill="#818798"/>
            </svg>
          </a>
        </div>
      `}
    </li>
  `}function hI(n){const l=n,{selectedEntry:e,setSelectedEntry:t,entries:i}=l,r=Zu(l,["selectedEntry","setSelectedEntry","entries"]),s=XE(),o=Om(()=>dI(i),[i]);return ux(()=>{const h=s.current;if(!h)return;const p=h.querySelector(".selected");p&&pI(p)},[e]),Ql`
    <div class="djs-popup-results" ref=${s}>
      ${o.map(h=>Ql`
        ${h.name&&Ql`
          <div key=${h.id} class="entry-header" title=${h.name}>
            ${h.name}
          </div>
        `}
        <ul class="djs-popup-group" data-group=${h.id}>
          ${h.entries.map(p=>Ql`
            <${cI}
              key=${p.id}
              entry=${p}
              selected=${p===e}
              onMouseEnter=${()=>t(p)}
              onMouseLeave=${()=>t(null)}
              ...${r}
            />
          `)}
        </ul>
      `)}
    </div>
  `}function dI(n){const e=[],t=s=>e.find(o=>s.id===o.id),i=s=>!!t(s),r=s=>typeof s=="string"?{id:s}:s;return n.forEach(s=>{const o=s.group?r(s.group):{id:"default"};i(o)?t(o).entries.push(s):e.push(qi(Jt({},o),{entries:[s]}))}),e}function pI(n){typeof n.scrollIntoViewIfNeeded=="function"?n.scrollIntoViewIfNeeded():n.scrollIntoView({scrollMode:"if-needed",block:"nearest"})}function fI(n){const{onClose:e,onSelect:t,className:i,headerEntries:r,position:s,title:o,width:l,scale:h,search:p,emptyPlaceholder:y,entries:w,onOpened:F,onClosed:j}=n,Q=Om(()=>yn(p)?w.length>5:!1,[p,w]),[he,ye]=ax(""),Le=km((Zt,wn)=>{if(!Q)return Zt;const Kn=Mr=>{if(!wn)return(Mr.rank||0)>=0;if(Mr.searchable===!1)return!1;const qa=[Mr.description||"",Mr.label||"",Mr.search||""].map(Go=>Go.toLowerCase());return wn.toLowerCase().split(/\s/g).every(Go=>qa.some(Do=>Do.includes(Go)))};return Zt.filter(Kn)},[Q]),[et,Me]=ax(Le(w,he)),[ke,Qe]=ax(et[0]),ft=km(Zt=>{(!ke||!Zt.includes(ke))&&Qe(Zt[0]),Me(Zt)},[ke,Me,Qe]);lx(()=>{ft(Le(w,he))},[he,w]);const bt=km(Zt=>{let Kn=et.indexOf(ke)+Zt;Kn<0&&(Kn=et.length-1),Kn>=et.length&&(Kn=0),Qe(et[Kn])},[et,ke,Qe]),st=km(Zt=>{if(Zt.key==="Enter"&&ke)return t(Zt,ke);if(Zt.key==="ArrowUp")return bt(-1),Zt.preventDefault();if(Zt.key==="ArrowDown")return bt(1),Zt.preventDefault()},[t,ke,bt]),Lt=km(Zt=>{Yt(Zt.target,"input")&&ye(()=>Zt.target.value)},[ye]);lx(()=>(F(),()=>{j()}),[]);const Vt=Om(()=>o||r.length>0,[o,r]);return Ql`
    <${ZE}
      onClose=${e}
      onKeyup=${Lt}
      onKeydown=${st}
      className=${i}
      position=${s}
      width=${l}
      scale=${h}
    >
      ${Vt&&Ql`
        <div class="djs-popup-header">
          <h3 class="djs-popup-title" title=${o}>${o}</h3>
          ${r.map(Zt=>Ql`
            <${Zt.action?"button":"span"}
              class=${gI(Zt,Zt===ke)}
              onClick=${wn=>t(wn,Zt)}
              title=${Zt.title||Zt.label}
              data-id=${Zt.id}
              onMouseEnter=${()=>Qe(Zt)}
              onMouseLeave=${()=>Qe(null)}
              onFocus=${()=>Qe(Zt)}
              onBlur=${()=>Qe(null)}
            >
            ${Zt.imageUrl&&Ql`<img class="djs-popup-entry-icon" src=${Zt.imageUrl} alt="" />`||Zt.imageHtml&&Ql`<div class="djs-popup-entry-icon" dangerouslySetInnerHTML=${{__html:Zt.imageHtml}} />`}

              ${Zt.label?Ql`
                <span class="djs-popup-label">${Zt.label}</span>
              `:null}
            </${Zt.action?"button":"span"}>
          `)}
        </div>
      `}
      ${w.length>0&&Ql`
        <div class="djs-popup-body">

          ${Q&&Ql`
          <div class="djs-popup-search">
            <svg class="djs-popup-search-icon" width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M9.0325 8.5H9.625L13.3675 12.25L12.25 13.3675L8.5 9.625V9.0325L8.2975 8.8225C7.4425 9.5575 6.3325 10 5.125 10C2.4325 10 0.25 7.8175 0.25 5.125C0.25 2.4325 2.4325 0.25 5.125 0.25C7.8175 0.25 10 2.4325 10 5.125C10 6.3325 9.5575 7.4425 8.8225 8.2975L9.0325 8.5ZM1.75 5.125C1.75 6.9925 3.2575 8.5 5.125 8.5C6.9925 8.5 8.5 6.9925 8.5 5.125C8.5 3.2575 6.9925 1.75 5.125 1.75C3.2575 1.75 1.75 3.2575 1.75 5.125Z" fill="#22242A"/>
            </svg>
            <input type="text" aria-label="${o}" />
          </div>
          `}

          <${hI}
            entries=${et}
            selectedEntry=${ke}
            setSelectedEntry=${Qe}
            onAction=${t}
          />
        </div>
      `}
    ${y&&et.length===0&&Ql`
      <div class="djs-popup-no-results">${vn(y)?y(he):y}</div>
    `}
    </${ZE}>
  `}function ZE(n){const{onClose:e,onKeydown:t,onKeyup:i,className:r,children:s,position:o}=n,l=XE();return ux(()=>{if(typeof o!="function")return;const h=l.current,p=o(h);h.style.left=`${p.x}px`,h.style.top=`${p.y}px`},[l.current,o]),ux(()=>{const h=l.current;if(!h)return;(h.querySelector("input")||h).focus()},[]),lx(()=>{const h=y=>{if(y.key==="Escape")return y.preventDefault(),e()},p=y=>{if(!ti(y.target,".djs-popup",!0))return e()};return document.documentElement.addEventListener("keydown",h),document.body.addEventListener("click",p),()=>{document.documentElement.removeEventListener("keydown",h),document.body.removeEventListener("click",p)}},[]),Ql`
    <div
      class=${Qy("djs-popup",r)}
      style=${mI(n)}
      onKeydown=${t}
      onKeyup=${i}
      ref=${l}
      tabIndex="-1"
    >
      ${s}
    </div>
  `}function mI(n){return{transform:`scale(${n.scale})`,width:`${n.width}px`,"transform-origin":"top left"}}function gI(n,e){return Qy("entry",n.className,n.active?"active":"",n.disabled?"disabled":"",e?"selected":"")}var yI="data-id",JE=["contextPad.close","canvas.viewbox.changing","commandStack.changed"],vI=1e3;function ol(n,e,t){this._eventBus=e,this._canvas=t,this._current=null;var i=yn(n&&n.scale)?n.scale:{min:1,max:1};this._config={scale:i},e.on("diagram.destroy",()=>{this.close()}),e.on("element.changed",r=>{const s=this.isOpen()&&this._current.target;r.element===s&&this.refresh()})}ol.$inject=["config.popupMenu","eventBus","canvas"],ol.prototype._render=function(){const{position:n,providerId:e,entries:t,headerEntries:i,emptyPlaceholder:r,options:s}=this._current,o=Object.entries(t).map(([F,j])=>Jt({id:F},j)),l=Object.entries(i).map(([F,j])=>Jt({id:F},j)),h=n&&(F=>this._ensureVisible(F,n)),p=this._updateScale(this._current.container);RE(Ql`
      <${fI}
        onClose=${F=>this.close(F)}
        onSelect=${(F,j,Q)=>this.trigger(F,j,Q)}
        position=${h}
        className=${e}
        entries=${o}
        headerEntries=${l}
        emptyPlaceholder=${r}
        scale=${p}
        onOpened=${this._onOpened.bind(this)}
        onClosed=${this._onClosed.bind(this)}
        ...${Jt({},s)}
      />
    `,this._current.container)},ol.prototype.open=function(n,e,t,i){if(!n)throw new Error("target is missing");if(!e)throw new Error("providers for <"+e+"> not found");if(!t)throw new Error("position is missing");this.isOpen()&&this.close();const{entries:r,headerEntries:s,emptyPlaceholder:o}=this._getContext(n,e);this._current={position:t,providerId:e,target:n,entries:r,headerEntries:s,emptyPlaceholder:o,container:this._createContainer({provider:e}),options:i},this._emit("open"),this._bindAutoClose(),this._render()},ol.prototype.refresh=function(){if(!this.isOpen())return;const{target:n,providerId:e}=this._current,{entries:t,headerEntries:i,emptyPlaceholder:r}=this._getContext(n,e);this._current=qi(Jt({},this._current),{entries:t,headerEntries:i,emptyPlaceholder:r}),this._emit("refresh"),this._render()},ol.prototype._getContext=function(n,e){const t=this._getProviders(e);if(!t||!t.length)throw new Error("provider for <"+e+"> not found");const i=this._getEntries(n,t),r=this._getHeaderEntries(n,t),s=this._getEmptyPlaceholder(t);return{entries:i,headerEntries:r,emptyPlaceholder:s,empty:!(Object.keys(i).length||Object.keys(r).length)}},ol.prototype.close=function(){this.isOpen()&&(this._emit("close"),this.reset(),this._current=null)},ol.prototype.reset=function(){const n=this._current.container;RE(null,n),Li(n)},ol.prototype._emit=function(n,e){this._eventBus.fire(`popupMenu.${n}`,e)},ol.prototype._onOpened=function(){this._emit("opened")},ol.prototype._onClosed=function(){this._emit("closed")},ol.prototype._createContainer=function(n){var e=this._canvas,t=e.getContainer();const i=Es(`<div class="djs-popup-parent djs-scrollable" data-popup=${n.provider}></div>`);return t.appendChild(i),i},ol.prototype._bindAutoClose=function(){this._eventBus.once(JE,this.close,this)},ol.prototype._unbindAutoClose=function(){this._eventBus.off(JE,this.close,this)},ol.prototype._updateScale=function(){var n=this._canvas.zoom(),e=this._config.scale,t,i,r=n;return e!==!0&&(e===!1?(t=1,i=1):(t=e.min,i=e.max),yn(t)&&n<t&&(r=t),yn(i)&&n>i&&(r=i)),r},ol.prototype._ensureVisible=function(n,e){var t=document.documentElement.getBoundingClientRect(),i=n.getBoundingClientRect(),r={},s=e.x,o=e.y;return e.x+i.width>t.width&&(r.x=!0),e.y+i.height>t.height&&(r.y=!0),r.x&&r.y?(s=e.x-i.width,o=e.y-i.height):r.x?(s=e.x-i.width,o=e.y):r.y&&e.y<i.height?(s=e.x,o=10):r.y&&(s=e.x,o=e.y-i.height),e.y<t.top&&(o=e.y+i.height),{x:s,y:o}},ol.prototype.isEmpty=function(n,e){if(!n)throw new Error("target is missing");if(!e)throw new Error("provider ID is missing");const t=this._getProviders(e);return!t||!t.length?!0:this._getContext(n,e).empty},ol.prototype.registerProvider=function(n,e,t){t||(t=e,e=vI),this._eventBus.on("popupMenu.getProviders."+n,e,function(i){i.providers.push(t)})},ol.prototype._getProviders=function(n){var e=this._eventBus.createEvent({type:"popupMenu.getProviders."+n,providers:[]});return this._eventBus.fire(e),e.providers},ol.prototype._getEntries=function(n,e){var t={};return $t(e,function(i){if(!i.getPopupMenuEntries){$t(i.getEntries(n),function(s){var o=s.id;if(!o)throw new Error("entry ID is missing");t[o]=Ie(s,["id"])});return}var r=i.getPopupMenuEntries(n);vn(r)?t=r(t):$t(r,function(s,o){t[o]=s})}),t},ol.prototype._getHeaderEntries=function(n,e){var t={};return $t(e,function(i){if(!i.getPopupMenuHeaderEntries){if(!i.getHeaderEntries)return;$t(i.getHeaderEntries(n),function(s){var o=s.id;if(!o)throw new Error("entry ID is missing");t[o]=Ie(s,["id"])});return}var r=i.getPopupMenuHeaderEntries(n);vn(r)?t=r(t):$t(r,function(s,o){t[o]=s})}),t},ol.prototype._getEmptyPlaceholder=function(n){const e=n.find(t=>vn(t.getEmptyPlaceholder));return e&&e.getEmptyPlaceholder()},ol.prototype.isOpen=function(){return!!this._current},ol.prototype.trigger=function(n,e,t="click"){if(n.preventDefault(),!e){let r=ti(n.delegateTarget||n.target,".entry",!0),s=Or(r,yI);e=Jt({id:s},this._getEntry(s))}const i=e.action;if(this._emit("trigger",{entry:e,event:n})!==!1){if(vn(i)){if(t==="click")return i(n,e)}else if(i[t])return i[t](n,e)}},ol.prototype._getEntry=function(n){var e=this._current.entries[n]||this._current.headerEntries[n];if(!e)throw new Error("entry not found");return e};var xI={__init__:["popupMenu"],popupMenu:["type",ol]},eC=Math.round;function dx(n,e){this._modeling=n,this._eventBus=e}dx.$inject=["modeling","eventBus"],dx.prototype.replaceElement=function(n,e,t){if(n.waypoints)return null;var i=this._modeling,r=this._eventBus;r.fire("replace.start",{element:n,attrs:e,hints:t});var s=e.width||n.width,o=e.height||n.height,l=e.x||n.x,h=e.y||n.y,p=eC(l+s/2),y=eC(h+o/2),w=i.replaceShape(n,ee({},e,{x:p,y,width:s,height:o}),t);return r.fire("replace.end",{element:n,newElement:w,hints:t}),w};function tC(n,e){e.on("replace.end",500,function(t){const{newElement:i,hints:r={}}=t;r.select!==!1&&n.select(i)})}tC.$inject=["selection","eventBus"];var bI={__init__:["replace","replaceSelectionBehavior"],replaceSelectionBehavior:["type",tC],replace:["type",dx]};function nC(n,e,t,i){function r(s,o,l){l=l||{};var h=o.type,p=s.businessObject,y=n.create(h),w={type:h,businessObject:y};if(w.width=s.width,w.height=s.height,y.name=p.name,o.table){var F=n.create("dmn:DecisionTable");F.$parent=y;var j=n.create("dmn:OutputClause");j.typeRef="string",j.$parent=F,F.output=[j];var Q=n.create("dmn:InputClause");Q.$parent=F;var he=n.create("dmn:LiteralExpression",{typeRef:"string"});Q.inputExpression=he,he.$parent=Q,F.input=[Q],iC(y,F,n)}if(o.expression){var ye=n.create("dmn:LiteralExpression"),Le=n.create("dmn:InformationItem");iC(y,ye,n,Le)}return e.replaceElement(s,w,l)}this.replaceElement=r}nC.$inject=["drdFactory","replace","selection","modeling"];function iC(n,e,t,i){if(Mt(n,"dmn:Decision"))n.decisionLogic=e,e.$parent=n;else if(Mt(n,"dmn:BusinessKnowledgeModel")){var r=t.create("dmn:FunctionDefinition",{body:e});n.encapsulatedLogic=r,r.$parent=n,e.$parent=r}i&&(n.variable=i,i.$parent=n)}var DI={__depends__:[bI,x],drdReplace:["type",nC]},rC={DECISION:[{label:"Empty",actionName:"replace-with-empty-decision",className:"dmn-icon-clear",target:{type:"dmn:Decision",table:!1,expression:!1}},{label:"Decision table",actionName:"replace-with-decision-table",className:"dmn-icon-decision-table",target:{type:"dmn:Decision",table:!0,expression:!1}},{label:"Literal expression",actionName:"replace-with-literal-expression",className:"dmn-icon-literal-expression",target:{type:"dmn:Decision",table:!1,expression:!0}}],BKM:[{label:"Empty",actionName:"replace-with-empty",className:"dmn-icon-clear",target:{type:"dmn:BusinessKnowledgeModel",table:!1,expression:!1}},{label:"Literal Expression",actionName:"replace-with-literal-expression",className:"dmn-icon-literal-expression",target:{type:"dmn:BusinessKnowledgeModel",table:!1,expression:!0}}]};function rp(n,e,t,i,r,s){this._popupMenu=n,this._modeling=e,this._moddle=t,this._drdReplace=i,this._rules=r,this._translate=s,this.register()}rp.$inject=["popupMenu","modeling","moddle","drdReplace","rules","translate"],rp.prototype.register=function(){this._popupMenu.registerProvider("dmn-replace",this)},rp.prototype.getEntries=function(n){var e=n.businessObject,t=this._rules,i,r;return t.allowed("shape.replace",{element:n})?Mt(e,"dmn:Decision")?(r=Po(e),i=Un(rC.DECISION,function(s){var o=s.actionName==="replace-with-empty-decision"&&r,l=s.actionName==="replace-with-decision-table"&&!Mt(r,"dmn:DecisionTable"),h=s.actionName==="replace-with-literal-expression"&&!Mt(r,"dmn:LiteralExpression");return o||l||h}),this._createEntries(n,i)):Mt(e,"dmn:BusinessKnowledgeModel")?(r=Po(e),i=Un(rC.BKM,function(s){var o=s.actionName==="replace-with-empty"&&r,l=s.actionName==="replace-with-decision-table"&&!Mt(r,"dmn:DecisionTable"),h=s.actionName==="replace-with-literal-expression"&&!Mt(r,"dmn:LiteralExpression");return o||l||h}),this._createEntries(n,i)):[]:[]},rp.prototype._createEntries=function(n,e){var t=[],i=this;return $t(e,function(r){var s=i._createMenuEntry(r,n);t.push(s)}),t},rp.prototype._createMenuEntry=function(n,e,t){var i=this._drdReplace.replaceElement,r=this._translate,s=function(){return i(e,n.target)};t=t||s;var o={label:r(n.label),className:n.className,id:n.actionName,action:t};return o},rp.prototype.getHeaderEntries=function(n){return[]};var wI={__depends__:[nc,xI,DI],__init__:["replaceMenuProvider"],replaceMenuProvider:["type",rp]};function px(n,e,t,i,r,s,o,l,h,p,y,w){y=y||{},e.registerProvider(this),this._contextPad=e,this._modeling=t,this._elementFactory=i,this._connect=r,this._create=s,this._rules=o,this._popupMenu=l,this._canvas=h,this._translate=p,y.autoPlace!==!1&&(this._autoPlace=w.get("autoPlace",!1)),n.on("create.end",250,function(F){var j=F.context.shape;if(gm(F)){var Q=e.getEntries(j);Q.replace&&Q.replace.action.click(F,j)}})}px.$inject=["eventBus","contextPad","modeling","elementFactory","connect","create","rules","popupMenu","canvas","translate","config.contextPad","injector"],px.prototype.getContextPadEntries=function(n){var e=this._modeling,t=this._elementFactory,i=this._connect,r=this._create,s=this._popupMenu,o=this._contextPad,l=this._rules,h=this._translate,p=this._autoPlace,y={};if(n.type==="label")return y;var w=n.businessObject;function F(Le,et,Me){i.start(Le,et,Me)}function j(Le){e.removeElements([n])}function Q(Le){var et=5,Me=o.getPad(Le).html,ke=Me.getBoundingClientRect(),Qe={x:ke.left,y:ke.bottom+et};return Qe}function he(Le,et,Me,ke){function Qe(bt,st){var Lt=t.createShape(ee({type:Le},ke));r.start(bt,Lt,{source:st,hints:{connectionTarget:st}})}var ft=p?function(bt,st){var Lt=t.createShape(ee({type:Le},ke));p.append(st,Lt,{connectionTarget:st})}:Qe;return{group:"model",className:et,title:Me,action:{dragstart:Qe,click:ft}}}Mt(w,"dmn:Decision")&&ee(y,{"append.decision":he("dmn:Decision","dmn-icon-decision",h("Append decision"))}),Rn(w,["dmn:BusinessKnowledgeModel","dmn:Decision","dmn:KnowledgeSource"])&&ee(y,{"append.knowledge-source":he("dmn:KnowledgeSource","dmn-icon-knowledge-source",h("Append knowledge source"))}),Rn(w,["dmn:BusinessKnowledgeModel","dmn:Decision"])&&ee(y,{"append.business-knowledge-model":he("dmn:BusinessKnowledgeModel","dmn-icon-business-knowledge",h("Append business knowledge model"))}),Rn(w,["dmn:Decision","dmn:KnowledgeSource"])&&ee(y,{"append.input-data":he("dmn:InputData","dmn-icon-input-data",h("Append input data"))}),Mt(w,"dmn:DRGElement")&&ee(y,{"append.text-annotation":he("dmn:TextAnnotation","dmn-icon-text-annotation",h("Add text annotation")),connect:{group:"connect",className:"dmn-icon-connection-multi",title:h("Connect to other element"),action:{click:F,dragstart:F}}}),Mt(w,"dmn:TextAnnotation")&&ee(y,{connect:{group:"connect",className:"dmn-icon-connection-multi",title:h("Connect to other element"),action:{click:F,dragstart:F}}}),s.isEmpty(n,"dmn-replace")||ee(y,{replace:{group:"edit",className:"dmn-icon-screw-wrench",title:h("Change type"),action:{click:function(Le,et){var Me=ee(Q(et),{cursor:{x:Le.x,y:Le.y}});s.open(et,"dmn-replace",Me)}}}});var ye=l.allowed("elements.delete",{elements:[n]});return Nn(ye)&&(ye=ye[0]===n),ye&&ee(y,{delete:{group:"edit",className:"dmn-icon-trash",title:h("Delete"),action:{click:j}}}),y};var EI={__depends__:[nc,WM,x,zM,EE,wI],__init__:["contextPadProvider"],contextPadProvider:["type",px]},CI="djs-dragger";function Bh(n,e,t,i){this._canvas=e,this._graphicsFactory=t,this._elementFactory=i,this._connectionDocking=n.get("connectionDocking",!1),this._layouter=n.get("layouter",!1)}Bh.$inject=["injector","canvas","graphicsFactory","elementFactory"],Bh.prototype.drawPreview=function(n,e,t){t=t||{};var i=n.connectionPreviewGfx,r=n.getConnection,s=t.source,o=t.target,l=t.waypoints,h=t.connectionStart,p=t.connectionEnd,y=t.noLayout,w=t.noCropping,F=t.noNoop,j,Q=this;if(i||(i=n.connectionPreviewGfx=this.createConnectionPreviewGfx()),Cu(i),r||(r=n.getConnection=SI(function(he,ye,Le){return Q.getConnection(he,ye,Le)})),e&&(j=r(e,s,o)),!j){!F&&this.drawNoopPreview(i,t);return}j.waypoints=l||[],this._layouter&&!y&&(j.waypoints=this._layouter.layoutConnection(j,{source:s,target:o,connectionStart:h,connectionEnd:p,waypoints:t.waypoints||j.waypoints})),(!j.waypoints||!j.waypoints.length)&&(j.waypoints=[s?Se(s):h,o?Se(o):p]),this._connectionDocking&&(s||o)&&!w&&(j.waypoints=this._connectionDocking.getCroppedWaypoints(j,s,o)),this._graphicsFactory.drawConnection(i,j,{stroke:"var(--element-dragger-color)"})},Bh.prototype.drawNoopPreview=function(n,e){var t=e.source,i=e.target,r=e.connectionStart||Se(t),s=e.connectionEnd||Se(i),o=this.cropWaypoints(r,s,t,i),l=this.createNoopConnection(o[0],o[1]);Br(n,l)},Bh.prototype.cropWaypoints=function(n,e,t,i){var r=this._graphicsFactory,s=t&&r.getShapePath(t),o=i&&r.getShapePath(i),l=r.getConnectionPath({waypoints:[n,e]});return n=t&&E(s,l,!0)||n,e=i&&E(o,l,!1)||e,[n,e]},Bh.prototype.cleanUp=function(n){n&&n.connectionPreviewGfx&&ra(n.connectionPreviewGfx)},Bh.prototype.getConnection=function(n){var e=AI(n);return this._elementFactory.createConnection(e)},Bh.prototype.createConnectionPreviewGfx=function(){var n=Yr("g");return Ji(n,{pointerEvents:"none"}),Hs(n).add(CI),Br(this._canvas.getActiveLayer(),n),n},Bh.prototype.createNoopConnection=function(n,e){return Su([n,e],{stroke:"#333",strokeDasharray:[1],strokeWidth:2,"pointer-events":"none"})};function SI(n){var e={};return function(t){var i=JSON.stringify(t),r=e[i];return r||(r=e[i]=n.apply(null,arguments)),r}}function AI(n){return Kt(n)?n:{}}var TI={__init__:["connectionPreview"],connectionPreview:["type",Bh]};const OI=/\s/,kI=/^([a-z][\w-.]*:)?[a-z_][\w-.]*$/i,_I=/^[a-z_][\w-.]*$/i,PI=/\$\{([^}]*)\}/g;function FI(n,e){const t=n.$model.ids.assigned(e),i=t&&t!==n;return e?i?"Element must have unique ID.":MI(e):"Element must have ID."}function MI(n){if(n=NI(n),II(n))return"Id must not contain spaces.";if(!_I.test(n))return kI.test(n)?"Id must not contain prefix.":"Id must be a valid QName."}function II(n){return OI.test(n)}function NI(n){return n.replace(PI,"$1")}var BI=300;function lf(n,e,t,i,r){this._eventBus=n,this._modeling=e,this._canvas=t,this._definitionPropertiesView=i,this._translate=r,n.on("definitionIdView.create",function(s){this._container=s.html;var o=xs(".dmn-definitions-name",this._container),l=xs(".dmn-definitions-id",this._container);this._setup(o,"name"),this._setup(l,"id")},this)}lf.$inject=["eventBus","modeling","canvas","definitionPropertiesView","translate"],lf.prototype.update=function(n,e){var t=this._canvas.getRootElement(),i={};if(i[n]=e,n==="id"){var r=FI(es(t),e);if(r){this._addErrorMessage(r);return}this._clearErrorMessage()}this._modeling.updateProperties(t,i)},lf.prototype._setup=function(n,e){var t=this;n.setAttribute("contenteditable",!0),n.addEventListener("input",le(function(i){var r=i.target.value||i.target.textContent;t.update(e,r.trim())},BI)),n.addEventListener("keydown",function(i){i.keyCode===13&&(n.blur(),window.getSelection().removeAllRanges())}),n.addEventListener("blur",function(){t._clearErrorMessage(),t._definitionPropertiesView.update()})},lf.prototype._addErrorMessage=function(n){const e='<span class="dmn-definitions-error-message">'+this._translate(n)+"</span>";var t=xs(".dmn-definitions-id",this._container);this._clearErrorMessage(),sr(t).add("dmn-definitions-error"),t.parentElement.appendChild(Es(e))},lf.prototype._clearErrorMessage=function(){var n=xs(".dmn-definitions-id",this._container);if(sr(n).has("dmn-definitions-error")){sr(n).remove("dmn-definitions-error");const e=xs(".dmn-definitions-error-message",this._container);n.parentNode.removeChild(e)}};var RI={__depends__:[hn],__init__:["definitionPropertiesEdit","definitionPropertiesPaletteAdapter"],definitionPropertiesEdit:["type",lf],definitionPropertiesPaletteAdapter:["type",cn]},LI={horizontal:["x","width"],vertical:["y","height"]},sC=5;function Rh(n,e){this._modeling=n,this._filters=[],this.registerFilter(function(t){var i=e.allowed("elements.distribute",{elements:t});return Nn(i)?i:i?t:[]})}Rh.$inject=["modeling","rules"],Rh.prototype.registerFilter=function(n){if(typeof n!="function")throw new Error("the filter has to be a function");this._filters.push(n)},Rh.prototype.trigger=function(n,e){var t=this._modeling,i,r;if(!(n.length<3)&&(this._setOrientation(e),r=this._filterElements(n),i=this._createGroups(r),!(i.length<=2)))return t.distributeElements(i,this._axis,this._dimension),i},Rh.prototype._filterElements=function(n){var e=this._filters,t=this._axis,i=this._dimension,r=[].concat(n);return e.length?($t(e,function(s){r=s(r,t,i)}),r):n},Rh.prototype._createGroups=function(n){var e=[],t=this,i=this._axis,r=this._dimension;if(!i)throw new Error('must have a defined "axis" and "dimension"');var s=wr(n,i);return $t(s,function(o,l){var h=t._findRange(o,i,r),p,y=e[e.length-1];y&&t._hasIntersection(y.range,h)?e[e.length-1].elements.push(o):(p={range:h,elements:[o]},e.push(p))}),e},Rh.prototype._setOrientation=function(n){var e=LI[n];this._axis=e[0],this._dimension=e[1]},Rh.prototype._hasIntersection=function(n,e){return Math.max(n.min,n.max)>=Math.min(e.min,e.max)&&Math.min(n.min,n.max)<=Math.max(e.min,e.max)},Rh.prototype._findRange=function(n){var e=n[this._axis],t=n[this._dimension];return{min:e+sC,max:e+t-sC}};var $I={__init__:["distributeElements"],distributeElements:["type",Rh]};function oC(n){n.registerFilter(function(e){return Un(e,function(t){var i=Rn(t,["dmn:AuthorityRequirement","dmn:InformationRequirement","dmn:KnowledgeRequirement","dmn:Association","dmn:TextAnnotation"]);return!(t.labelTarget||i)})})}oC.$inject=["distributeElements"];var jI={__depends__:[$I],__init__:["drdDistributeElements"],drdDistributeElements:["type",oC]},aC="is not a registered action",VI="is already registered";function $c(n,e){this._actions={};var t=this;n.on("diagram.init",function(){t._registerDefaultActions(e),n.fire("editorActions.init",{editorActions:t})})}$c.$inject=["eventBus","injector"],$c.prototype._registerDefaultActions=function(n){var e=n.get("commandStack",!1),t=n.get("modeling",!1),i=n.get("selection",!1),r=n.get("zoomScroll",!1),s=n.get("copyPaste",!1),o=n.get("canvas",!1),l=n.get("rules",!1),h=n.get("keyboardMove",!1),p=n.get("keyboardMoveSelection",!1);e&&(this.register("undo",function(){e.undo()}),this.register("redo",function(){e.redo()})),s&&i&&this.register("copy",function(){var y=i.get();if(y.length)return s.copy(y)}),s&&this.register("paste",function(){s.paste()}),r&&this.register("stepZoom",function(y){r.stepZoom(y.value)}),o&&this.register("zoom",function(y){o.zoom(y.value)}),t&&i&&l&&this.register("removeSelection",function(){var y=i.get();if(y.length){var w=l.allowed("elements.delete",{elements:y}),F;w!==!1&&(Nn(w)?F=w:F=y,F.length&&t.removeElements(F.slice()))}}),h&&this.register("moveCanvas",function(y){h.moveCanvas(y)}),p&&this.register("moveSelection",function(y){p.moveSelection(y.direction,y.accelerated)})},$c.prototype.trigger=function(n,e){if(!this._actions[n])throw fx(n,aC);return this._actions[n](e)},$c.prototype.register=function(n,e){var t=this;if(typeof n=="string")return this._registerAction(n,e);$t(n,function(i,r){t._registerAction(r,i)})},$c.prototype._registerAction=function(n,e){if(this.isRegistered(n))throw fx(n,VI);this._actions[n]=e},$c.prototype.unregister=function(n){if(!this.isRegistered(n))throw fx(n,aC);this._actions[n]=void 0},$c.prototype.getActions=function(){return Object.keys(this._actions)},$c.prototype.isRegistered=function(n){return!!this._actions[n]};function fx(n,e){return new Error(n+" "+e)}var WI={__init__:["editorActions"],editorActions:["type",$c]};function Xy(n){n.invoke($c,this)}po(Xy,$c),Xy.$inject=["injector"],Xy.prototype._registerDefaultActions=function(n){$c.prototype._registerDefaultActions.call(this,n);const e=n.get("canvas",!1),t=n.get("elementRegistry",!1),i=n.get("selection",!1),r=n.get("lassoTool",!1),s=n.get("handTool",!1),o=n.get("directEditing",!1),l=n.get("distributeElements",!1),h=n.get("alignElements",!1),p=n.get("searchPad",!1);e&&t&&i&&this._registerAction("selectElements",function(){var y=e.getRootElement(),w=t.filter(function(F){return F!==y});return i.select(w),w}),i&&l&&this._registerAction("distributeElements",function(y){var w=i.get(),F=y.type;w.length>2&&l.trigger(w,F)}),i&&h&&this._registerAction("alignElements",function(y){var w=i.get(),F=y.type;w.length>1&&h.trigger(w,F)}),r&&this._registerAction("lassoTool",function(){r.toggle()}),s&&this._registerAction("handTool",function(){s.toggle()}),i&&o&&this._registerAction("directEditing",function(){var y=i.get();y.length&&o.activate(y[0])}),i&&p&&this._registerAction("find",function(){p.toggle()})};var HI={__depends__:[WI],editorActions:["type",Xy]};function lC(n){return n.dmnDI&&n.dmnDI.diagrams&&n.dmnDI.diagrams[0]}function uC(n,e,t,i){function r(s){var o=s.dmnDI;o||(o=n.create("dmndi:DMNDI"),s.set("dmnDI",o));var l=n.create("dmndi:DMNDiagram");o.set("diagrams",[l]);var h=0;$t(s.get("drgElement"),function(p){if(Mt(p,"dmn:Decision")){var y=e._getDefaultSize(p),w=n.createDiShape(p,{x:150+h*30,y:150+h*30,width:y.width,height:y.height});i.updateDiParent(w,l),h++}})}t.on("import.start",({definitions:s})=>{lC(s)||r(s)})}uC.$inject=["drdFactory","elementFactory","eventBus","drdUpdater"];var UI={__init__:["diGenerator"],diGenerator:["type",uC]},Yy=10;function mx(n,e,t){return t||(t="round"),Math[t](n/e)*e}var zI=1200,qI=800;function od(n,e,t){var i=!t||t.active!==!1;this._eventBus=e;var r=this;e.on("diagram.init",qI,function(){r.setActive(i)}),e.on(["create.move","create.end","bendpoint.move.move","bendpoint.move.end","connect.move","connect.end","connectionSegment.move.move","connectionSegment.move.end","resize.move","resize.end","shape.move.move","shape.move.end"],zI,function(s){var o=s.originalEvent;if(!(!r.active||o&&fl(o))){var l=s.context,h=l.gridSnappingContext;h||(h=l.gridSnappingContext={}),["x","y"].forEach(function(p){var y={},w=XI(s,p,n);w&&(y.offset=w);var F=QI(s,p);F&&ee(y,F),Sm(s,p)||r.snapEvent(s,p,y)})}})}od.prototype.snapEvent=function(n,e,t){var i=this.snapValue(n[e],t);gh(n,e,i)},od.prototype.getGridSpacing=function(){return Yy},od.prototype.snapValue=function(n,e){var t=0;e&&e.offset&&(t=e.offset),n+=t,n=mx(n,Yy);var i,r;return e&&e.min&&(i=e.min,In(i)&&(i=mx(i+t,Yy,"ceil"),n=Math.max(n,i))),e&&e.max&&(r=e.max,In(r)&&(r=mx(r+t,Yy,"floor"),n=Math.min(n,r))),n-=t,n},od.prototype.isActive=function(){return this.active},od.prototype.setActive=function(n){this.active=n,this._eventBus.fire("gridSnapping.toggle",{active:n})},od.prototype.toggleActive=function(){this.setActive(!this.active)},od.$inject=["elementRegistry","eventBus","config.gridSnapping"];function QI(n,e){var t=n.context,i=t.createConstraints,r=t.resizeConstraints||{},s=t.gridSnappingContext,o=s.snapConstraints;if(o&&o[e])return o[e];o||(o=s.snapConstraints={}),o[e]||(o[e]={});var l=t.direction;i&&(Gy(e)?(o.x.min=i.left,o.x.max=i.right):(o.y.min=i.top,o.y.max=i.bottom));var h=r.min,p=r.max;return h&&(Gy(e)?hC(l)?o.x.max=h.left:o.x.min=h.right:cC(l)?o.y.max=h.top:o.y.min=h.bottom),p&&(Gy(e)?hC(l)?o.x.min=p.left:o.x.max=p.right:cC(l)?o.y.min=p.top:o.y.max=p.bottom),o[e]}function XI(n,e,t){var i=n.context,r=n.shape,s=i.gridSnappingContext,o=s.snapLocation,l=s.snapOffset;return l&&In(l[e])||(l||(l=s.snapOffset={}),In(l[e])||(l[e]=0),!r)||(t.get(r.id)||(Gy(e)?l[e]+=r[e]+r.width/2:l[e]+=r[e]+r.height/2),!o)||(e==="x"?/left/.test(o)?l[e]-=r.width/2:/right/.test(o)&&(l[e]+=r.width/2):/top/.test(o)?l[e]-=r.height/2:/bottom/.test(o)&&(l[e]+=r.height/2)),l[e]}function Gy(n){return n==="x"}function cC(n){return n.indexOf("n")!==-1}function hC(n){return n.indexOf("w")!==-1}var YI=1e3;function va(n){this._eventBus=n}va.$inject=["eventBus"];function GI(n,e){return function(t){return n.call(e||null,t.context,t.command,t)}}va.prototype.on=function(n,e,t,i,r,s){if((vn(e)||In(e))&&(s=r,r=i,i=t,t=e,e=null),vn(t)&&(s=r,r=i,i=t,t=YI),Kt(r)&&(s=r,r=!1),!vn(i))throw new Error("handlerFn must be a function");Nn(n)||(n=[n]);var o=this._eventBus;$t(n,function(l){var h=["commandStack",l,e].filter(function(p){return p}).join(".");o.on(h,t,r?GI(i,s):i,s)})},va.prototype.canExecute=Lh("canExecute"),va.prototype.preExecute=Lh("preExecute"),va.prototype.preExecuted=Lh("preExecuted"),va.prototype.execute=Lh("execute"),va.prototype.executed=Lh("executed"),va.prototype.postExecute=Lh("postExecute"),va.prototype.postExecuted=Lh("postExecuted"),va.prototype.revert=Lh("revert"),va.prototype.reverted=Lh("reverted");function Lh(n){return function(t,i,r,s,o){(vn(t)||In(t))&&(o=s,s=r,r=i,i=t,t=null),this.on(t,n,i,r,s,o)}}function sp(n,e){va.call(this,n),this._gridSnapping=e;var t=this;this.preExecute("shape.resize",function(i){var r=i.context,s=r.hints||{},o=s.autoResize;if(o){var l=r.shape,h=r.newBounds;gn(o)?r.newBounds=t.snapComplex(h,o):r.newBounds=t.snapSimple(l,h)}})}sp.$inject=["eventBus","gridSnapping","modeling"],po(sp,va),sp.prototype.snapSimple=function(n,e){var t=this._gridSnapping;return e.width=t.snapValue(e.width,{min:e.width}),e.height=t.snapValue(e.height,{min:e.height}),e.x=n.x+n.width/2-e.width/2,e.y=n.y+n.height/2-e.height/2,e},sp.prototype.snapComplex=function(n,e){return/w|e/.test(e)&&(n=this.snapHorizontally(n,e)),/n|s/.test(e)&&(n=this.snapVertically(n,e)),n},sp.prototype.snapHorizontally=function(n,e){var t=this._gridSnapping,i=/w/.test(e),r=/e/.test(e),s={};return s.width=t.snapValue(n.width,{min:n.width}),r&&(i?(s.x=t.snapValue(n.x,{max:n.x}),s.width+=t.snapValue(n.x-s.x,{min:n.x-s.x})):n.x=n.x+n.width-s.width),ee(n,s),n},sp.prototype.snapVertically=function(n,e){var t=this._gridSnapping,i=/n/.test(e),r=/s/.test(e),s={};return s.height=t.snapValue(n.height,{min:n.height}),i&&(r?(s.y=t.snapValue(n.y,{max:n.y}),s.height+=t.snapValue(n.y-s.y,{min:n.y-s.y})):n.y=n.y+n.height-s.height),ee(n,s),n};var KI=2e3;function dC(n,e){n.on(["spaceTool.move","spaceTool.end"],KI,function(t){var i=t.context;if(i.initialized){var r=i.axis,s;r==="x"?(s=e.snapValue(t.dx),t.x=t.x+s-t.dx,t.dx=s):(s=e.snapValue(t.dy),t.y=t.y+s-t.dy,t.dy=s)}})}dC.$inject=["eventBus","gridSnapping"];var ZI={__init__:["gridSnappingResizeBehavior","gridSnappingSpaceToolBehavior"],gridSnappingResizeBehavior:["type",sp],gridSnappingSpaceToolBehavior:["type",dC]},JI={__depends__:[ZI],__init__:["gridSnapping"],gridSnapping:["type",od]},Ky="keyboard.keydown",eN="keyboard.keyup",pC="input-handle-modified-keys",tN=1e3;function Fu(n,e){var t=this;this._config=n||{},this._eventBus=e,this._keydownHandler=this._keydownHandler.bind(this),this._keyupHandler=this._keyupHandler.bind(this),e.on("diagram.destroy",function(){t._fire("destroy"),t.unbind()}),e.on("diagram.init",function(){t._fire("init")}),e.on("attach",function(){n&&n.bindTo&&t.bind(n.bindTo)}),e.on("detach",function(){t.unbind()})}Fu.$inject=["config.keyboard","eventBus"],Fu.prototype._keydownHandler=function(n){this._keyHandler(n,Ky)},Fu.prototype._keyupHandler=function(n){this._keyHandler(n,eN)},Fu.prototype._keyHandler=function(n,e){var t;if(!this._isEventIgnored(n)){var i={keyEvent:n};t=this._eventBus.fire(e||Ky,i),t&&n.preventDefault()}},Fu.prototype._isEventIgnored=function(n){return n.defaultPrevented?!0:(nN(n.target)||iN(n.target)&&cu([" ","Enter"],n))&&this._isModifiedKeyIgnored(n)},Fu.prototype._isModifiedKeyIgnored=function(n){if(!fl(n))return!0;var e=this._getAllowedModifiers(n.target);return e.indexOf(n.key)===-1},Fu.prototype._getAllowedModifiers=function(n){var e=ti(n,"["+pC+"]",!0);return!e||this._node&&!this._node.contains(e)?[]:e.getAttribute(pC).split(",")},Fu.prototype.bind=function(n){this.unbind(),this._node=n,zn.bind(n,"keydown",this._keydownHandler),zn.bind(n,"keyup",this._keyupHandler),this._fire("bind")},Fu.prototype.getBinding=function(){return this._node},Fu.prototype.unbind=function(){var n=this._node;n&&(this._fire("unbind"),zn.unbind(n,"keydown",this._keydownHandler),zn.unbind(n,"keyup",this._keyupHandler)),this._node=null},Fu.prototype._fire=function(n){this._eventBus.fire("keyboard."+n,{node:this._node})},Fu.prototype.addListener=function(n,e,t){vn(n)&&(t=e,e=n,n=tN),this._eventBus.on(t||Ky,n,e)},Fu.prototype.removeListener=function(n,e){this._eventBus.off(e||Ky,n)},Fu.prototype.hasModifier=Xd,Fu.prototype.isCmd=fl,Fu.prototype.isShift=L1,Fu.prototype.isKey=cu;function nN(n){return n&&(Yt(n,"input, textarea")||n.contentEditable==="true")}function iN(n){return n&&Yt(n,"button, input[type=submit], input[type=button], a[href], [aria-role=button]")}var rN=500;function uf(n,e){var t=this;n.on("editorActions.init",rN,function(i){var r=i.editorActions;t.registerBindings(e,r)})}uf.$inject=["eventBus","keyboard"],uf.prototype.registerBindings=function(n,e){function t(i,r){e.isRegistered(i)&&n.addListener(r)}t("undo",function(i){var r=i.keyEvent;if(_F(r))return e.trigger("undo"),!0}),t("redo",function(i){var r=i.keyEvent;if(PF(r))return e.trigger("redo"),!0}),t("copy",function(i){var r=i.keyEvent;if(OF(r))return e.trigger("copy"),!0}),t("paste",function(i){var r=i.keyEvent;if(kF(r))return e.trigger("paste"),!0}),t("stepZoom",function(i){var r=i.keyEvent;if(cu(["+","Add","="],r)&&fl(r))return e.trigger("stepZoom",{value:1}),!0}),t("stepZoom",function(i){var r=i.keyEvent;if(cu(["-","Subtract"],r)&&fl(r))return e.trigger("stepZoom",{value:-1}),!0}),t("zoom",function(i){var r=i.keyEvent;if(cu("0",r)&&fl(r))return e.trigger("zoom",{value:1}),!0}),t("removeSelection",function(i){var r=i.keyEvent;if(cu(["Backspace","Delete","Del"],r))return e.trigger("removeSelection"),!0})};var gx={__init__:["keyboard","keyboardBindings"],keyboard:["type",Fu],keyboardBindings:["type",uf]};function Zy(n){n.invoke(uf,this)}po(Zy,uf),Zy.$inject=["injector"],Zy.prototype.registerBindings=function(n,e){uf.prototype.registerBindings.call(this,n,e);function t(i,r){e.isRegistered(i)&&n.addListener(r)}t("selectElements",function(i){var r=i.keyEvent;if(n.isKey(["a","A"],r)&&n.isCmd(r))return e.trigger("selectElements"),!0}),t("lassoTool",function(i){var r=i.keyEvent;if(!n.hasModifier(r)&&n.isKey(["l","L"],r))return e.trigger("lassoTool"),!0}),t("handTool",function(i){var r=i.keyEvent;if(!n.hasModifier(r)&&n.isKey(["h","H"],r))return e.trigger("handTool"),!0}),t("directEditing",function(i){var r=i.keyEvent;if(!n.hasModifier(r)&&n.isKey(["e","E"],r))return e.trigger("directEditing"),!0}),t("find",function(i){var r=i.keyEvent;if(n.isKey(["f","F"],r)&&n.isCmd(r))return e.trigger("find"),!0})};var sN={__depends__:[gx],__init__:["keyboardBindings"],keyboardBindings:["type",Zy]},oN={moveSpeed:50,moveSpeedAccelerated:200};function fC(n,e,t){var i=this;this._config=ee({},oN,n||{}),e.addListener(r);function r(s){var o=s.keyEvent,l=i._config;if(e.isCmd(o)&&e.isKey(["ArrowLeft","Left","ArrowUp","Up","ArrowDown","Down","ArrowRight","Right"],o)){var h=e.isShift(o)?l.moveSpeedAccelerated:l.moveSpeed,p;switch(o.key){case"ArrowLeft":case"Left":p="left";break;case"ArrowUp":case"Up":p="up";break;case"ArrowRight":case"Right":p="right";break;case"ArrowDown":case"Down":p="down";break}return i.moveCanvas({speed:h,direction:p}),!0}}this.moveCanvas=function(s){var o=0,l=0,h=s.speed,p=h/Math.min(Math.sqrt(t.viewbox().scale),1);switch(s.direction){case"left":o=p;break;case"up":l=p;break;case"right":o=-p;break;case"down":l=-p;break}t.scroll({dx:o,dy:l})}}fC.$inject=["config.keyboardMove","keyboard","canvas"];var aN={__depends__:[gx],__init__:["keyboardMove"],keyboardMove:["type",fC]},lN={moveSpeed:1,moveSpeedAccelerated:10},uN=1500,mC="left",gC="up",yC="right",vC="down",cN={ArrowLeft:mC,Left:mC,ArrowUp:gC,Up:gC,ArrowRight:yC,Right:yC,ArrowDown:vC,Down:vC},hN={left:function(n){return{x:-n,y:0}},up:function(n){return{x:0,y:-n}},right:function(n){return{x:n,y:0}},down:function(n){return{x:0,y:n}}};function xC(n,e,t,i,r){var s=this;this._config=ee({},lN,n||{}),e.addListener(uN,function(o){var l=o.keyEvent,h=cN[l.key];if(h&&!e.isCmd(l)){var p=e.isShift(l);return s.moveSelection(h,p),!0}}),this.moveSelection=function(o,l){var h=r.get();if(h.length){var p=this._config[l?"moveSpeedAccelerated":"moveSpeed"],y=hN[o](p),w=i.allowed("elements.move",{shapes:h});w&&t.moveElements(h,y)}}}xC.$inject=["config.keyboardMoveSelection","keyboard","modeling","rules","selection"];var dN={__depends__:[gx,x],__init__:["keyboardMoveSelection"],keyboardMoveSelection:["type",xC]};function Ha(n,e){this._handlerMap={},this._stack=[],this._stackIdx=-1,this._currentExecution={actions:[],dirty:[],trigger:null},this._injector=e,this._eventBus=n,this._uid=1,n.on(["diagram.destroy","diagram.clear"],function(){this.clear(!1)},this)}Ha.$inject=["eventBus","injector"],Ha.prototype.execute=function(n,e){if(!n)throw new Error("command required");this._currentExecution.trigger="execute";const t={command:n,context:e};this._pushAction(t),this._internalExecute(t),this._popAction()},Ha.prototype.canExecute=function(n,e){const t={command:n,context:e},i=this._getHandler(n);let r=this._fire(n,"canExecute",t);if(r===void 0){if(!i)return!1;i.canExecute&&(r=i.canExecute(e))}return r},Ha.prototype.clear=function(n){this._stack.length=0,this._stackIdx=-1,n!==!1&&this._fire("changed",{trigger:"clear"})},Ha.prototype.undo=function(){let n=this._getUndoAction(),e;if(n){for(this._currentExecution.trigger="undo",this._pushAction(n);n&&(this._internalUndo(n),e=this._getUndoAction(),!(!e||e.id!==n.id));)n=e;this._popAction()}},Ha.prototype.redo=function(){let n=this._getRedoAction(),e;if(n){for(this._currentExecution.trigger="redo",this._pushAction(n);n&&(this._internalExecute(n,!0),e=this._getRedoAction(),!(!e||e.id!==n.id));)n=e;this._popAction()}},Ha.prototype.register=function(n,e){this._setHandler(n,e)},Ha.prototype.registerHandler=function(n,e){if(!n||!e)throw new Error("command and handlerCls must be defined");const t=this._injector.instantiate(e);this.register(n,t)},Ha.prototype.canUndo=function(){return!!this._getUndoAction()},Ha.prototype.canRedo=function(){return!!this._getRedoAction()},Ha.prototype._getRedoAction=function(){return this._stack[this._stackIdx+1]},Ha.prototype._getUndoAction=function(){return this._stack[this._stackIdx]},Ha.prototype._internalUndo=function(n){const e=n.command,t=n.context,i=this._getHandler(e);this._atomicDo(()=>{this._fire(e,"revert",n),i.revert&&this._markDirty(i.revert(t)),this._revertedAction(n),this._fire(e,"reverted",n)})},Ha.prototype._fire=function(n,e,t){arguments.length<3&&(t=e,e=null);const i=e?[n+"."+e,e]:[n];let r;t=this._eventBus.createEvent(t);for(const s of i)if(r=this._eventBus.fire("commandStack."+s,t),t.cancelBubble)break;return r},Ha.prototype._createId=function(){return this._uid++},Ha.prototype._atomicDo=function(n){const e=this._currentExecution;e.atomic=!0;try{n()}finally{e.atomic=!1}},Ha.prototype._internalExecute=function(n,e){const t=n.command,i=n.context,r=this._getHandler(t);if(!r)throw new Error("no command handler registered for <"+t+">");this._pushAction(n),e||(this._fire(t,"preExecute",n),r.preExecute&&r.preExecute(i),this._fire(t,"preExecuted",n)),this._atomicDo(()=>{this._fire(t,"execute",n),r.execute&&this._markDirty(r.execute(i)),this._executedAction(n,e),this._fire(t,"executed",n)}),e||(this._fire(t,"postExecute",n),r.postExecute&&r.postExecute(i),this._fire(t,"postExecuted",n)),this._popAction()},Ha.prototype._pushAction=function(n){const e=this._currentExecution,t=e.actions,i=t[0];if(e.atomic)throw new Error("illegal invocation in <execute> or <revert> phase (action: "+n.command+")");n.id||(n.id=i&&i.id||this._createId()),t.push(n)},Ha.prototype._popAction=function(){const n=this._currentExecution,e=n.trigger,t=n.actions,i=n.dirty;t.pop(),t.length||(this._eventBus.fire("elements.changed",{elements:cs("id",i.reverse())}),i.length=0,this._fire("changed",{trigger:e}),n.trigger=null)},Ha.prototype._markDirty=function(n){const e=this._currentExecution;n&&(n=Nn(n)?n:[n],e.dirty=e.dirty.concat(n))},Ha.prototype._executedAction=function(n,e){const t=++this._stackIdx;e||this._stack.splice(t,this._stack.length,n)},Ha.prototype._revertedAction=function(n){this._stackIdx--},Ha.prototype._getHandler=function(n){return this._handlerMap[n]},Ha.prototype._setHandler=function(n,e){if(!n||!e)throw new Error("command and handler required");if(this._handlerMap[n])throw new Error("overriding handler for command <"+n+">");this._handlerMap[n]=e};var yx={commandStack:["type",Ha]};function bC(n,e,t,i){n.on("element.changed",function(r){var s=r.element;(s.parent||s===e.getRootElement())&&(r.gfx=t.getGraphics(s)),r.gfx&&n.fire(uc(s)+".changed",r)}),n.on("elements.changed",function(r){var s=r.elements;s.forEach(function(o){n.fire("element.changed",{element:o})}),i.updateContainments(s)}),n.on("shape.changed",function(r){i.update("shape",r.element,r.gfx)}),n.on("connection.changed",function(r){i.update("connection",r.element,r.gfx)})}bC.$inject=["eventBus","canvas","elementRegistry","graphicsFactory"];var DC={__init__:["changeSupport"],changeSupport:["type",bC]},wC=Math.min,EC=Math.max;function vx(n){n.preventDefault()}function _m(n){n.stopPropagation()}function pN(n){return n.nodeType===Node.TEXT_NODE}function fN(n){return[].slice.call(n)}function th(n){this.container=n.container,this.parent=Es('<div class="djs-direct-editing-parent"><div class="djs-direct-editing-content" contenteditable="true"></div></div>'),this.content=xs("[contenteditable]",this.parent),this.keyHandler=n.keyHandler||function(){},this.resizeHandler=n.resizeHandler||function(){},this.autoResize=ze(this.autoResize,this),this.handlePaste=ze(this.handlePaste,this)}th.prototype.create=function(n,e,t,i){var r=this,s=this.parent,o=this.content,l=this.container;i=this.options=i||{},e=this.style=e||{};var h=Ze(e,["width","height","maxWidth","maxHeight","minWidth","minHeight","left","top","backgroundColor","position","overflow","border","wordWrap","textAlign","outline","transform"]);ee(s.style,{width:n.width+"px",height:n.height+"px",maxWidth:n.maxWidth+"px",maxHeight:n.maxHeight+"px",minWidth:n.minWidth+"px",minHeight:n.minHeight+"px",left:n.x+"px",top:n.y+"px",backgroundColor:"#ffffff",position:"absolute",overflow:"visible",border:"1px solid #ccc",boxSizing:"border-box",wordWrap:"normal",textAlign:"center",outline:"none"},h);var p=Ze(e,["fontFamily","fontSize","fontWeight","lineHeight","padding","paddingTop","paddingRight","paddingBottom","paddingLeft"]);return ee(o.style,{boxSizing:"border-box",width:"100%",outline:"none",wordWrap:"break-word"},p),i.centerVertically&&ee(o.style,{position:"absolute",top:"50%",transform:"translate(0, -50%)"},p),o.innerText=t,zn.bind(o,"keydown",this.keyHandler),zn.bind(o,"mousedown",_m),zn.bind(o,"paste",r.handlePaste),i.autoResize&&zn.bind(o,"input",this.autoResize),i.resizable&&this.resizable(e),l.appendChild(s),this.setSelection(o.lastChild,o.lastChild&&o.lastChild.length),s},th.prototype.handlePaste=function(n){var e=this.options,t=this.style;n.preventDefault();var i;if(n.clipboardData?i=n.clipboardData.getData("text/plain"):i=window.clipboardData.getData("Text"),this.insertText(i),e.autoResize){var r=this.autoResize(t);r&&this.resizeHandler(r)}},th.prototype.insertText=function(n){n=mN(n);var e=document.execCommand("insertText",!1,n);e||this._insertTextIE(n)},th.prototype._insertTextIE=function(n){var e=this.getSelection(),t=e.startContainer,i=e.endContainer,r=e.startOffset,s=e.endOffset,o=e.commonAncestorContainer,l=fN(o.childNodes),h,p;if(pN(o)){var y=t.textContent;t.textContent=y.substring(0,r)+n+y.substring(s),h=t,p=r+n.length}else if(t===this.content&&i===this.content){var w=document.createTextNode(n);this.content.insertBefore(w,l[r]),h=w,p=w.textContent.length}else{var F=l.indexOf(t),j=l.indexOf(i);l.forEach(function(Q,he){he===F?Q.textContent=t.textContent.substring(0,r)+n+i.textContent.substring(s):he>F&&he<=j&&Li(Q)}),h=t,p=r+n.length}h&&p!==void 0&&setTimeout(function(){self.setSelection(h,p)})},th.prototype.autoResize=function(){var n=this.parent,e=this.content,t=parseInt(this.style.fontSize)||12;if(e.scrollHeight>n.offsetHeight||e.scrollHeight<n.offsetHeight-t){var i=n.getBoundingClientRect(),r=e.scrollHeight;n.style.height=r+"px",this.resizeHandler({width:i.width,height:i.height,dx:0,dy:r-i.height})}},th.prototype.resizable=function(){var n=this,e=this.parent,t=this.resizeHandle,i=parseInt(this.style.minWidth)||0,r=parseInt(this.style.minHeight)||0,s=parseInt(this.style.maxWidth)||1/0,o=parseInt(this.style.maxHeight)||1/0;if(!t){t=this.resizeHandle=Es('<div class="djs-direct-editing-resize-handle"></div>');var l,h,p,y,w=function(Q){vx(Q),_m(Q),l=Q.clientX,h=Q.clientY;var he=e.getBoundingClientRect();p=he.width,y=he.height,zn.bind(document,"mousemove",F),zn.bind(document,"mouseup",j)},F=function(Q){vx(Q),_m(Q);var he=wC(EC(p+Q.clientX-l,i),s),ye=wC(EC(y+Q.clientY-h,r),o);e.style.width=he+"px",e.style.height=ye+"px",n.resizeHandler({width:p,height:y,dx:Q.clientX-l,dy:Q.clientY-h})},j=function(Q){vx(Q),_m(Q),zn.unbind(document,"mousemove",F,!1),zn.unbind(document,"mouseup",j,!1)};zn.bind(t,"mousedown",w)}ee(t.style,{position:"absolute",bottom:"0px",right:"0px",cursor:"nwse-resize",width:"0",height:"0",borderTop:(parseInt(this.style.fontSize)/4||3)+"px solid transparent",borderRight:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderBottom:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderLeft:(parseInt(this.style.fontSize)/4||3)+"px solid transparent"}),e.appendChild(t)},th.prototype.destroy=function(){var n=this.parent,e=this.content,t=this.resizeHandle;e.innerText="",n.removeAttribute("style"),e.removeAttribute("style"),zn.unbind(e,"keydown",this.keyHandler),zn.unbind(e,"mousedown",_m),zn.unbind(e,"input",this.autoResize),zn.unbind(e,"paste",this.handlePaste),t&&(t.removeAttribute("style"),Li(t)),Li(n)},th.prototype.getValue=function(){return this.content.innerText.trim()},th.prototype.getSelection=function(){var n=window.getSelection(),e=n.getRangeAt(0);return e},th.prototype.setSelection=function(n,e){var t=document.createRange();n===null?t.selectNodeContents(this.content):(t.setStart(n,e),t.setEnd(n,e));var i=window.getSelection();i.removeAllRanges(),i.addRange(t)};function mN(n){return n.replace(/\r\n|\r|\n/g,`
`)}function jc(n,e){this._eventBus=n,this._providers=[],this._textbox=new th({container:e.getContainer(),keyHandler:ze(this._handleKey,this),resizeHandler:ze(this._handleResize,this)})}jc.$inject=["eventBus","canvas"],jc.prototype.registerProvider=function(n){this._providers.push(n)},jc.prototype.isActive=function(n){return!!(this._active&&(!n||this._active.element===n))},jc.prototype.cancel=function(){this._active&&(this._fire("cancel"),this.close())},jc.prototype._fire=function(n,e){this._eventBus.fire("directEditing."+n,e||{active:this._active})},jc.prototype.close=function(){this._textbox.destroy(),this._fire("deactivate"),this._active=null,this.resizable=void 0},jc.prototype.complete=function(){var n=this._active;if(n){var e,t=n.context.bounds,i=this.$textbox.getBoundingClientRect(),r=this.getValue(),s=n.context.text;(r!==s||i.height!==t.height||i.width!==t.width)&&(e=this._textbox.container.getBoundingClientRect(),n.provider.update(n.element,r,n.context.text,{x:i.left-e.left,y:i.top-e.top,width:i.width,height:i.height})),this._fire("complete"),this.close()}},jc.prototype.getValue=function(){return this._textbox.getValue()},jc.prototype._handleKey=function(n){n.stopPropagation();var e=n.keyCode||n.charCode;if(e===27)return n.preventDefault(),this.cancel();if(e===13&&!n.shiftKey)return n.preventDefault(),this.complete()},jc.prototype._handleResize=function(n){this._fire("resize",n)},jc.prototype.activate=function(n){this.isActive()&&this.cancel();var e,t=Ii(this._providers,function(i){return(e=i.activate(n))?i:null});return e&&(this.$textbox=this._textbox.create(e.bounds,e.style,e.text,e.options),this._active={element:n,context:e,provider:t},e.options&&e.options.resizable&&(this.resizable=!0),this._fire("activate")),!!e};var gN={__depends__:[Zp],__init__:["directEditing"],directEditing:["type",jc]},CC="djs-label-hidden";function Pm(n,e,t,i,r){this._canvas=n,this._modeling=i,this._textRenderer=r,this._eventBus=t,e.registerProvider(this),t.on("element.dblclick",function(s){e.activate(s.element)}),t.on(["autoPlace.start","canvas.viewbox.changing","drag.init","drillDown.click","element.mousedown","popupMenu.open","selection.changed"],function(){e.complete()}),t.on(["commandStack.changed"],function(){e.cancel()}),t.on("create.end",500,function(s){var o=s.shape;(Mt(o,"dmn:Decision")||Mt(o,"dmn:InputData")||Mt(o,"dmn:BusinessKnowledgeModel")||Mt(o,"dmn:KnowledgeSource")||Mt(o,"dmn:TextAnnotation"))&&e.activate(o)}),t.on("autoPlace.end",500,function(s){e.activate(s.shape)}),this._eventBus.on(["directEditing.complete","directEditing.cancel"],function(s){var o=s.active;if(o){var l=o.element.label||o.element;n.removeMarker(l,CC)}})}Pm.$inject=["canvas","directEditing","eventBus","modeling","textRenderer"],Pm.prototype.activate=function(n){var e=Fy(n);if(yn(e)){var t={text:e},i=this.getEditingBBox(n);ee(t,i);var r={},s=t.style||{};return Mt(n,"dmn:DRGElement")&&(ee(r,{centerVertically:!0}),ee(s,{backgroundColor:null,border:null})),Mt(n,"dmn:TextAnnotation")&&ee(r,{resizable:!0}),ee(t,{options:r,style:s}),this._canvas.addMarker(n,CC),t}},Pm.prototype.getEditingBBox=function(n){var e=this._canvas,t=n.label||n,i=e.getAbsoluteBBox(t),r={x:i.x,y:i.y},s=e.zoom(),o=this._textRenderer.getDefaultStyle(),l=o.fontSize*s,h=o.lineHeight,p={fontFamily:this._textRenderer.getDefaultStyle().fontFamily,fontWeight:this._textRenderer.getDefaultStyle().fontWeight};return Mt(n,"dmn:DRGElement")&&(ee(r,{width:i.width,height:i.height}),ee(p,{fontSize:l+"px",lineHeight:h,paddingTop:7*s+"px",paddingBottom:7*s+"px",paddingLeft:5*s+"px",paddingRight:5*s+"px"})),Mt(n,"dmn:TextAnnotation")&&(ee(r,{width:i.width,height:i.height,minWidth:30*s,minHeight:10*s}),ee(p,{textAlign:"left",paddingTop:5*s+"px",paddingBottom:7*s+"px",paddingLeft:7*s+"px",paddingRight:5*s+"px",fontSize:l+"px",lineHeight:h})),{bounds:r,style:p}},Pm.prototype.update=function(n,e,t,i){var r,s;Mt(n,"dmn:TextAnnotation")&&(s=this._canvas.getAbsoluteBBox(n),r={x:n.x,y:n.y,width:n.width/s.width*i.width,height:n.height/s.height*i.height}),yN(e)&&(e=null),this._modeling.updateLabel(n,e,r)};function yN(n){return!n||!n.trim()}var vN={__depends__:[yx,DC,gN],__init__:["labelEditingProvider"],labelEditingProvider:["type",Pm]};function xx(n,e){e.invoke(va,this),this.preExecute("connection.create",function(t){var i=t.connection,r=i.businessObject,s=t.source,o=t.target,l,h,p;Mt(i,"dmn:Association")?(h=r.sourceRef=n.create("dmn:DMNElementReference",{href:"#"+s.id}),h.$parent=r,p=r.targetRef=n.create("dmn:DMNElementReference",{href:"#"+o.id}),p.$parent=r):(l=r["required"+xN(s)]=n.create("dmn:DMNElementReference",{href:"#"+s.id}),l.$parent=r)},!0)}xx.$inject=["drdFactory","injector"],po(xx,va);function xN(n){if(Mt(n,"dmn:BusinessKnowledgeModel"))return"Knowledge";if(Mt(n,"dmn:Decision"))return"Decision";if(Mt(n,"dmn:InputData"))return"Input";if(Mt(n,"dmn:KnowledgeSource"))return"Authority"}var bN=500;function bx(n,e,t,i){n.invoke(va,this),this.preExecute(["connection.create","connection.reconnect"],function(s){var o=s.connection,l=s.newSource||s.source,h=s.newTarget||s.target;if(!(Mt(o,"dmn:InformationRequirement")&&!i.allowed("connection.connect",{connection:o,source:l,target:h}))&&Mt(o,"dmn:InformationRequirement")){var p=xt(l,h);s.hints||(s.hints={}),ee(s.hints,DN(l,h,p))}},!0);function r(s,o,l){o||(o=s.incoming.filter(function(p){return Mt(p,"dmn:InformationRequirement")}));var h={};l?h[l]=o:h=EN(s,o),$t(h,function(p,y){p=CN(p,y);var w=wN(p,s,y);p.forEach((F,j)=>{var Q=w[j].start,he=w[j].end,ye=e.layoutConnection(F,{connectionStart:Q,connectionEnd:he});t.updateWaypoints(F,ye)})})}this.postExecuted(["connection.create","connection.delete","connection.reconnect"],function(s){var o=s.connection,l=o.source||s.source,h=o.target||s.target;if(Mt(o,"dmn:InformationRequirement")){var p=xt(l,h),y=h.incoming.filter(w=>{var F=xt(w.source,w.target);return Mt(w,"dmn:InformationRequirement")&&SC(F,p)});y.length&&r(h,y,p)}},!0),this.preExecute("connection.reconnect",function(s){var o=s.connection,l=o.source,h=o.target;if(Mt(o,"dmn:InformationRequirement")){var p=xt(l,h),y=h.incoming.filter(w=>{var F=xt(w.source,w.target);return w!==o&&Mt(w,"dmn:InformationRequirement")&&SC(F,p)});y.length&&r(h,y,p)}},!0),this.postExecuted("elements.move",bN,function(s){var o=s.shapes,l=s.closure,h=l.enclosedConnections;o.forEach(function(p){if(Rn(p,["dmn:Decision","dmn:InputData"])){var y=p.incoming.filter(function(w){return Mt(w,"dmn:InformationRequirement")&&!h[w.id]});y.length&&r(p,y),p.outgoing.forEach(function(w){!Mt(w,"dmn:InformationRequirement")||h[w.id]||r(w.target)})}})},!0)}bx.$inject=["injector","layouter","modeling","rules"],po(bx,va);function DN(n,e,t){var i=Se(n),r=Se(e);return t.includes("bottom")?(i.y=n.y,r.y=e.y+e.height):t.includes("top")?(i.y=n.y+n.height,r.y=e.y):t.includes("right")?(i.x=n.x,r.x=e.x+e.width):(i.x=n.x+n.width,r.x=e.x),{connectionStart:i,connectionEnd:r}}function wN(n,e,t){return n.map(function(i,r){var s=i.source,o=Se(s),l=C(s),h=C(e),p=n.length;return t.includes("bottom")?{start:{x:o.x,y:l.top},end:{x:h.left+e.width/(p+1)*(r+1),y:h.bottom}}:t.includes("top")?{start:{x:o.x,y:l.bottom},end:{x:h.left+e.width/(p+1)*(r+1),y:h.top}}:t.includes("right")?{start:{x:l.left,y:o.y},end:{x:h.right,y:h.top+e.height/(p+1)*(r+1)}}:{start:{x:l.right,y:o.y},end:{x:h.left,y:h.top+e.height/(p+1)*(r+1)}}})}function EN(n,e){var t={};return e.forEach(function(i){var r=xt(i.source,n).split("-").shift();t[r]||(t[r]=[]),t[r].push(i)}),t}function SC(n,e){return n&&e&&n.split("-").shift()===e.split("-").shift()}function CN(n,e){var t;return e.includes("top")||e.includes("bottom")?t="x":t="y",n.sort(function(i,r){return Se(i.source)[t]-Se(r.source)[t]})}function Dx(n,e,t){n.invoke(va,this),this.preExecute("connection.reconnect",function(i){var r=i.connection,s=i.newSource||r.source,o=i.newTarget||r.target,l=r.waypoints.slice(),h=t.allowed("connection.reconnect",{connection:r,source:s,target:o});!h||h.type===r.type||(i.connection=e.connect(s,o,{type:h.type,waypoints:l}),e.removeConnection(r))},!0)}po(Dx,va),Dx.$inject=["injector","modeling","rules"];function wx(n,e,t){va.call(this,n),this._modeling=e,this.postExecuted(["shape.replace"],1500,function(i){var r=i.context,s=r.oldShape,o=r.newShape;e.unclaimId(s.businessObject.id,s.businessObject),e.updateProperties(o,{id:s.id}),t.select(o)})}po(wx,va),wx.$inject=["eventBus","modeling","selection"];const AC="id";class Fm extends va{constructor(e){super(e),this.executed("element.updateProperties",this.updateIds.bind(this))}updateIds({context:e}){const{element:t,oldProperties:i,properties:r}=e,s=es(t);if(this.shouldSkipUpdate(s,i,r))return;const o=AN(s);o.get("drgElement").forEach(p=>{TN(p,i.id,r.id)}),o.get("artifact").forEach(p=>{ON(p,i.id,r.id)})}shouldSkipUpdate(e,t,i){return!SN(t,i)||!Mt(e,"dmn:DRGElement")&&!Mt(e,"dmn:TextAnnotation")}}Fm.$inject=["eventBus"];function SN(n,e){return AC in n&&AC in e}function AN(n){let e=n;for(;!Mt(e,"dmn:Definitions");)e=e.$parent;return e}function TN(n,e,t){$t({authorityRequirement:()=>{n.authorityRequirement.forEach(r=>{const{requiredAuthority:s,requiredDecision:o,requiredInput:l}=r;s&&s.href===`#${e}`&&(s.href=`#${t}`),o&&o.href===`#${e}`&&(o.href=`#${t}`),l&&l.href===`#${e}`&&(l.href=`#${t}`)})},informationRequirement:()=>{n.informationRequirement.forEach(r=>{const{requiredDecision:s,requiredInput:o}=r;s&&s.href===`#${e}`&&(s.href=`#${t}`),o&&o.href===`#${e}`&&(o.href=`#${t}`)})},knowledgeRequirement:()=>{n.knowledgeRequirement.forEach(r=>{const{requiredKnowledge:s}=r;s&&s.href===`#${e}`&&(s.href=`#${t}`)})}},(r,s)=>{n[s]&&r()})}function ON(n,e,t){$t({sourceRef:()=>{const{sourceRef:r}=n;r.href===`#${e}`&&(r.href=`#${t}`)},targetRef:()=>{const{targetRef:r}=n;r.href===`#${e}`&&(r.href=`#${t}`)}},(r,s)=>{n[s]&&r()})}var kN={__init__:["createConnectionBehavior","idChangeBehavior","layoutConnectionBehavior","replaceConnectionBehavior","replaceElementBehavior"],createConnectionBehavior:["type",xx],idChangeBehavior:["type",Fm],layoutConnectionBehavior:["type",bx],replaceConnectionBehavior:["type",Dx],replaceElementBehavior:["type",wx]};function op(n){va.call(this,n),this.init()}op.$inject=["eventBus"],po(op,va),op.prototype.addRule=function(n,e,t){var i=this;typeof n=="string"&&(n=[n]),n.forEach(function(r){i.canExecute(r,e,function(s,o,l){return t(s)},!0)})},op.prototype.init=function(){};function ap(n){n.invoke(op,this)}po(ap,op),ap.$inject=["injector"],ap.prototype.init=function(){this.addRule("connection.create",function(n){var e=n.source,t=n.target;return Ex(e,t)}),this.addRule("connection.reconnect",function(n){n.connection;var e=n.source,t=n.target;return Ex(e,t)}),this.addRule("connection.updateWaypoints",function(n){const e=n.connection;return{type:e.type,businessObject:e.businessObject}}),this.addRule("elements.move",function(n){var e=n.target,t=n.shapes;return n.position,OC(t,e)}),this.addRule("shape.create",function(n){var e=n.shape,t=n.target;return TC(e,t)}),this.addRule("shape.resize",function(n){var e=n.shape;return Mt(e,"dmn:TextAnnotation")})},ap.prototype.canConnect=Ex,ap.prototype.canCreate=TC,ap.prototype.canMove=OC;function Ex(n,e){if(!n||kC(n)||!e||kC(e))return null;if(n===e)return!1;if(Mt(n,"dmn:BusinessKnowledgeModel")&&Rn(e,["dmn:BusinessKnowledgeModel","dmn:Decision"]))return{type:"dmn:KnowledgeRequirement"};if(Mt(n,"dmn:Decision")){if(Mt(e,"dmn:Decision"))return{type:"dmn:InformationRequirement"};if(Mt(e,"dmn:KnowledgeSource"))return{type:"dmn:AuthorityRequirement"}}if(Mt(n,"dmn:Definitions")||Mt(e,"dmn:Definitions"))return!1;if(Mt(n,"dmn:InputData")){if(Mt(e,"dmn:Decision"))return{type:"dmn:InformationRequirement"};if(Mt(e,"dmn:KnowledgeSource"))return{type:"dmn:AuthorityRequirement"}}return Mt(n,"dmn:KnowledgeSource")&&Rn(e,["dmn:BusinessKnowledgeModel","dmn:Decision","dmn:KnowledgeSource"])?{type:"dmn:AuthorityRequirement"}:Mt(n,"dmn:TextAnnotation")&&!Mt(e,"dmn:TextAnnotation")||!Mt(n,"dmn:TextAnnotation")&&Mt(e,"dmn:TextAnnotation")?{type:"dmn:Association"}:!1}function TC(n,e){return Rn(n,["dmn:BusinessKnowledgeModel","dmn:Decision","dmn:InputData","dmn:KnowledgeSource","dmn:TextAnnotation"])&&Mt(e,"dmn:Definitions")}function OC(n,e){return Nn(n)||(n=[n]),!!(!e||mr(n,function(t){return Rn(t,["dmn:BusinessKnowledgeModel","dmn:Decision","dmn:InputData","dmn:KnowledgeSource","dmn:TextAnnotation","dmn:InformationRequirement","dmn:AuthorityRequirement","dmn:KnowledgeRequirement","dmn:Association"])})&&Mt(e,"dmn:Definitions"))}function kC(n){return!!n.labelTarget}var _N={__depends__:[Jd],__init__:["drdRules"],drdRules:["type",ap]};function nh(n){this._model=n}nh.$inject=["moddle"],nh.prototype._needsId=function(n){return Rn(n,["dmn:Artifact","dmn:DMNElement","dmn:DRGElement","dmndi:DMNDiagram","dmndi:DMNDiagramElement"])},nh.prototype._ensureId=function(n){var e=(n.$type||"").replace(/^[^:]*:/g,"")+"_";!n.id&&this._needsId(n)&&(n.id=this._model.ids.nextPrefixed(e,n))},nh.prototype.create=function(n,e){var t=this._model.create(n,e||{});return this._ensureId(t),t},nh.prototype.createDiShape=function(n,e,t){return this.create("dmndi:DMNShape",ee({dmnElementRef:n,bounds:this.createDiBounds(e)},t))},nh.prototype.createDiBounds=function(n){return this.create("dc:Bounds",n)},nh.prototype.createDiEdge=function(n,e,t){return this.create("dmndi:DMNEdge",{dmnElementRef:n,waypoint:this.createDiWaypoints(e)},t)},nh.prototype.createDiWaypoints=function(n){var e=this;return n.map(function(t){return e.createDiWaypoint(t)})},nh.prototype.createDiWaypoint=function(n){return this.create("dc:Point",Ze(n,["x","y"]))},nh.prototype.createExtensionElements=function(){return this.create("dmn:ExtensionElements",{values:[]})};function ad(n,e,t,i,r){r.invoke(va,this),this._definitionPropertiesView=e,this._drdFactory=t,this._drdRules=i;var s=this;function o(w){var F=w.connection,j=w.cropped;j||(F.waypoints=n.getCroppedWaypoints(F),w.cropped=!0)}this.executed(["connection.create","connection.layout"],o,!0),this.reverted(["connection.layout"],function(w){delete w.cropped},!0);function l(w){var F=w.connection,j=w.parent,Q=w.shape;F&&!Mt(F,"dmn:Association")&&(j=F.target),s.updateParent(Q||F,j)}function h(w){var F=w.connection,j=w.shape,Q=w.parent||w.newParent;F&&!Mt(F,"dmn:Association")&&(Q=F.target),s.updateParent(j||F,Q)}this.executed(["connection.create","connection.delete","connection.move","shape.create","shape.delete"],l,!0),this.reverted(["connection.create","connection.delete","connection.move","shape.create","shape.delete"],h,!0);function p(w){var F=w.shape;(Mt(F,"dmn:DRGElement")||Mt(F,"dmn:TextAnnotation"))&&s.updateBounds(F)}this.executed(["shape.create","shape.move","shape.resize"],p,!0),this.reverted(["shape.create","shape.move","shape.resize"],p,!0);function y(w){s.updateConnectionWaypoints(w)}this.executed(["connection.create","connection.layout","connection.move","connection.updateWaypoints"],y,!0),this.reverted(["connection.create","connection.layout","connection.move","connection.updateWaypoints"],y,!0),this.executed("connection.create",function(w){var F=w.connection,j=F.businessObject,Q=w.target,he=Q.businessObject;Mt(F,"dmn:Association")?l(w):s.updateSemanticParent(j,he)},!0),this.reverted("connection.create",function(w){h(w)},!0),this.executed("connection.reconnect",function(w){var F=w.connection,j=F.businessObject,Q=w.newTarget,he=Q.businessObject;Mt(j,"dmn:Association")||s.updateSemanticParent(j,he)},!0),this.reverted("connection.reconnect",function(w){var F=w.connection,j=F.businessObject,Q=w.oldTarget,he=Q.businessObject;Mt(j,"dmn:Association")||s.updateSemanticParent(j,he)},!0),this.executed("element.updateProperties",function(w){e.update()},!0),this.reverted("element.updateProperties",function(w){e.update()},!0)}po(ad,va),ad.$inject=["connectionDocking","definitionPropertiesView","drdFactory","drdRules","injector"],ad.prototype.updateBounds=function(n){var e=n.businessObject,t=e.di.bounds;ee(t,{x:n.x,y:n.y,width:n.width,height:n.height})},ad.prototype.updateConnectionWaypoints=function(n){var e=this._drdFactory,t=n.connection,i=t.businessObject,r=i.di;r.waypoint=e.createDiWaypoints(t.waypoints).map(function(s){return s.$parent=r,s})},ad.prototype.updateParent=function(n,e){var t=n.parent;!Mt(n,"dmn:DRGElement")&&!Mt(n,"dmn:Artifact")&&(t=e);var i=n.businessObject,r=t&&t.businessObject;this.updateSemanticParent(i,r),this.updateDiParent(i.di,r&&r.di)},ad.prototype.updateSemanticParent=function(n,e){var t,i;n.$parent!==e&&(Mt(n,"dmn:DRGElement")?i="drgElement":Mt(n,"dmn:Artifact")?i="artifact":Mt(n,"dmn:InformationRequirement")?i="informationRequirement":Mt(n,"dmn:AuthorityRequirement")?i="authorityRequirement":Mt(n,"dmn:KnowledgeRequirement")&&(i="knowledgeRequirement"),n.$parent&&(t=n.$parent.get(i),ot(t,n)),e?(t=e.get(i),t&&(t.push(n),n.$parent=e)):n.$parent=null)},ad.prototype.updateDiParent=function(n,e){if(n.$parent!==e)if(Rn(n,["dmndi:DMNEdge","dmndi:DMNShape"])){for(var t=e||n;!Mt(t,"dmndi:DMNDiagram");)t=t.$parent;var i=t.get("diagramElements");e?(n.$parent=t,_t(i,n)):(n.$parent=null,ot(i,n))}else throw new Error("unsupported")};function Jy(n,e){this._modeling=n,this._canvas=e}Jy.$inject=["modeling","canvas"],Jy.prototype.preExecute=function(n){var e=this._modeling,t=n.elements,i=n.alignment;$t(t,function(r){var s={x:0,y:0};yn(i.left)?s.x=i.left-r.x:yn(i.right)?s.x=i.right-r.width-r.x:yn(i.center)?s.x=i.center-Math.round(r.width/2)-r.x:yn(i.top)?s.y=i.top-r.y:yn(i.bottom)?s.y=i.bottom-r.height-r.y:yn(i.middle)&&(s.y=i.middle-Math.round(r.height/2)-r.y),e.moveElements([r],s,r.parent)})},Jy.prototype.postExecute=function(n){};function e0(n){this._modeling=n}e0.$inject=["modeling"],e0.prototype.preExecute=function(n){var e=n.source;if(!e)throw new Error("source required");var t=n.target||e.parent,i=n.shape,r=n.hints||{};i=n.shape=this._modeling.createShape(i,n.position,t,{attach:r.attach}),n.shape=i},e0.prototype.postExecute=function(n){var e=n.hints||{};PN(n.source,n.shape)||(e.connectionTarget===n.source?this._modeling.connect(n.shape,n.source,n.connection):this._modeling.connect(n.source,n.shape,n.connection))};function PN(n,e){return ss(n.outgoing,function(t){return t.target===e})}function t0(n,e){this._canvas=n,this._layouter=e}t0.$inject=["canvas","layouter"],t0.prototype.execute=function(n){var e=n.connection,t=n.source,i=n.target,r=n.parent,s=n.parentIndex,o=n.hints;if(!t||!i)throw new Error("source and target required");if(!r)throw new Error("parent required");return e.source=t,e.target=i,e.waypoints||(e.waypoints=this._layouter.layoutConnection(e,o)),this._canvas.addConnection(e,r,s),e},t0.prototype.revert=function(n){var e=n.connection;return this._canvas.removeConnection(e),e.source=null,e.target=null,e};var n0=Math.round;function Cx(n){this._modeling=n}Cx.$inject=["modeling"],Cx.prototype.preExecute=function(n){var e=n.elements,t=n.parent,i=n.parentIndex,r=n.position,s=n.hints,o=this._modeling;$t(e,function(w){In(w.x)||(w.x=0),In(w.y)||(w.y=0)});var l=Un(e,function(w){return!w.hidden}),h=Za(l);$t(e,function(w){fo(w)&&(w.waypoints=Dr(w.waypoints,function(F){return{x:n0(F.x-h.x-h.width/2+r.x),y:n0(F.y-h.y-h.height/2+r.y)}})),ee(w,{x:n0(w.x-h.x-h.width/2+r.x),y:n0(w.y-h.y-h.height/2+r.y)})});var p=mu(e),y={};$t(e,function(w){if(fo(w)){y[w.id]=In(i)?o.createConnection(y[w.source.id],y[w.target.id],i,w,w.parent||t,s):o.createConnection(y[w.source.id],y[w.target.id],w,w.parent||t,s);return}var F=ee({},s);p.indexOf(w)===-1&&(F.autoResize=!1),ta(w)&&(F=Ie(F,["attach"])),y[w.id]=In(i)?o.createShape(w,Ze(w,["x","y","width","height"]),w.parent||t,i,F):o.createShape(w,Ze(w,["x","y","width","height"]),w.parent||t,F)}),n.elements=vs(y)};var _C=Math.round;function ld(n){this._canvas=n}ld.$inject=["canvas"],ld.prototype.execute=function(n){var e=n.shape,t=n.position,i=n.parent,r=n.parentIndex;if(!i)throw new Error("parent required");if(!t)throw new Error("position required");return t.width!==void 0?ee(e,t):ee(e,{x:t.x-_C(e.width/2),y:t.y-_C(e.height/2)}),this._canvas.addShape(e,i,r),e},ld.prototype.revert=function(n){var e=n.shape;return this._canvas.removeShape(e),e};function Mm(n){ld.call(this,n)}po(Mm,ld),Mm.$inject=["canvas"];var FN=ld.prototype.execute;Mm.prototype.execute=function(n){var e=n.shape;return IN(e),e.labelTarget=n.labelTarget,FN.call(this,n)};var MN=ld.prototype.revert;Mm.prototype.revert=function(n){return n.shape.labelTarget=null,MN.call(this,n)};function IN(n){["width","height"].forEach(function(e){typeof n[e]=="undefined"&&(n[e]=0)})}function Im(n,e){if(typeof e!="function")throw new Error("removeFn iterator must be a function");if(n){for(var t;t=n[0];)e(t);return n}}function Nm(n,e){this._canvas=n,this._modeling=e}Nm.$inject=["canvas","modeling"],Nm.prototype.preExecute=function(n){var e=this._modeling,t=n.connection;Im(t.incoming,function(i){e.removeConnection(i,{nested:!0})}),Im(t.outgoing,function(i){e.removeConnection(i,{nested:!0})})},Nm.prototype.execute=function(n){var e=n.connection,t=e.parent;return n.parent=t,n.parentIndex=Rt(t.children,e),n.source=e.source,n.target=e.target,this._canvas.removeConnection(e),e.source=null,e.target=null,e},Nm.prototype.revert=function(n){var e=n.connection,t=n.parent,i=n.parentIndex;return e.source=n.source,e.target=n.target,_t(t.children,e,i),this._canvas.addConnection(e,t),e};function Sx(n,e){this._modeling=n,this._elementRegistry=e}Sx.$inject=["modeling","elementRegistry"],Sx.prototype.postExecute=function(n){var e=this._modeling,t=this._elementRegistry,i=n.elements;$t(i,function(r){t.get(r.id)&&(r.waypoints?e.removeConnection(r):e.removeShape(r))})};function Bm(n,e){this._canvas=n,this._modeling=e}Bm.$inject=["canvas","modeling"],Bm.prototype.preExecute=function(n){var e=this._modeling,t=n.shape;Im(t.incoming,function(i){e.removeConnection(i,{nested:!0})}),Im(t.outgoing,function(i){e.removeConnection(i,{nested:!0})}),Im(t.children,function(i){fo(i)?e.removeConnection(i,{nested:!0}):e.removeShape(i,{nested:!0})})},Bm.prototype.execute=function(n){var e=this._canvas,t=n.shape,i=t.parent;return n.oldParent=i,n.oldParentIndex=Rt(i.children,t),e.removeShape(t),t},Bm.prototype.revert=function(n){var e=this._canvas,t=n.shape,i=n.oldParent,r=n.oldParentIndex;return _t(i.children,t,r),e.addShape(t,i),t};function i0(n){this._modeling=n}i0.$inject=["modeling"];var PC={x:"y",y:"x"};i0.prototype.preExecute=function(n){var e=this._modeling,t=n.groups,i=n.axis,r=n.dimension;function s(ye,Le){ye.range.min=Math.min(Le[i],ye.range.min),ye.range.max=Math.max(Le[i]+Le[r],ye.range.max)}function o(ye){return ye[i]+ye[r]/2}function l(ye){return ye.length-1}function h(ye){return ye.max-ye.min}function p(ye,Le){var et={y:0};et[i]=ye-o(Le),et[i]&&(et[PC[i]]=0,e.moveElements([Le],et,Le.parent))}var y=t[0],w=l(t),F=t[w],j,Q,he=0;$t(t,function(ye,Le){var et,Me,ke;if(ye.elements.length<2){Le&&Le!==t.length-1&&(s(ye,ye.elements[0]),he+=h(ye.range));return}et=wr(ye.elements,i),Me=et[0],Le===w&&(Me=et[l(et)]),ke=o(Me),ye.range=null,$t(et,function(Qe){if(p(ke,Qe),ye.range===null){ye.range={min:Qe[i],max:Qe[i]+Qe[r]};return}s(ye,Qe)}),Le&&Le!==t.length-1&&(he+=h(ye.range))}),Q=Math.abs(F.range.min-y.range.max),j=Math.round((Q-he)/(t.length-1)),!(j<t.length-1)&&$t(t,function(ye,Le){var et={},Me;ye===y||ye===F||(Me=t[Le-1],ye.range.max=0,$t(ye.elements,function(ke,Qe){et[PC[i]]=0,et[i]=Me.range.max-ke[i]+j,ye.range.min!==ke[i]&&(et[i]+=ke[i]-ye.range.min),et[i]&&e.moveElements([ke],et,ke.parent),ye.range.max=Math.max(ke[i]+ke[r],Qe?ye.range.max:0)}))})},i0.prototype.postExecute=function(n){};function r0(n,e){this._layouter=n,this._canvas=e}r0.$inject=["layouter","canvas"],r0.prototype.execute=function(n){var e=n.connection,t=e.waypoints;return ee(n,{oldWaypoints:t}),e.waypoints=this._layouter.layoutConnection(e,n.hints),e},r0.prototype.revert=function(n){var e=n.connection;return e.waypoints=n.oldWaypoints,e};function Ax(){}Ax.prototype.execute=function(n){var e=n.connection,t=n.delta,i=n.newParent||e.parent,r=n.newParentIndex,s=e.parent;return n.oldParent=s,n.oldParentIndex=ot(s.children,e),_t(i.children,e,r),e.parent=i,$t(e.waypoints,function(o){o.x+=t.x,o.y+=t.y,o.original&&(o.original.x+=t.x,o.original.y+=t.y)}),e},Ax.prototype.revert=function(n){var e=n.connection,t=e.parent,i=n.oldParent,r=n.oldParentIndex,s=n.delta;return ot(t.children,e),_t(i.children,e,r),e.parent=i,$t(e.waypoints,function(o){o.x-=s.x,o.y-=s.y,o.original&&(o.original.x-=s.x,o.original.y-=s.y)}),e};function s0(n,e,t){var i=zr(e),r=zr(t),s=ro(n,i),o={x:s.x*(t.width/e.width),y:s.y*(t.height/e.height)};return is({x:r.x+o.x,y:r.y+o.y})}function Tx(n,e,t){var i=o0(n),r=MC(i,e),s=i[0];return r.length?r[r.length-1]:s0(s.original||s,t,e)}function Ox(n,e,t){var i=o0(n),r=MC(i,e),s=i[i.length-1];return r.length?r[0]:s0(s.original||s,t,e)}function kx(n,e,t){var i=o0(n),r=FC(e,t),s=i[0];return s0(s.original||s,r,e)}function _x(n,e,t){var i=o0(n),r=FC(e,t),s=i[i.length-1];return s0(s.original||s,r,e)}function FC(n,e){return{x:n.x-e.x,y:n.y-e.y,width:n.width,height:n.height}}function o0(n){var e=n.waypoints;if(!e.length)throw new Error("connection#"+n.id+": no waypoints");return e}function MC(n,e){var t=Dr(n,BN);return Un(t,function(i){return NN(i,e)})}function NN(n,e){return xt(e,n,1)==="intersect"}function BN(n){return n.original||n}function Px(){this.allShapes={},this.allConnections={},this.enclosedElements={},this.enclosedConnections={},this.topLevel={}}Px.prototype.add=function(n,e){return this.addAll([n],e)},Px.prototype.addAll=function(n,e){var t=lc(n,!!e,this);return ee(this,t),this};function Rm(n){this._modeling=n}Rm.prototype.moveRecursive=function(n,e,t){return n?this.moveClosure(this.getClosure(n),e,t):[]},Rm.prototype.moveClosure=function(n,e,t,i,r){var s=this._modeling,o=n.allShapes,l=n.allConnections,h=n.enclosedConnections,p=n.topLevel,y=!1;r&&r.parent===t&&(y=!0),$t(o,function(w){s.moveShape(w,e,p[w.id]&&!y&&t,{recurse:!1,layout:!1})}),$t(l,function(w){var F=!!o[w.source.id],j=!!o[w.target.id];h[w.id]&&F&&j?s.moveConnection(w,e,p[w.id]&&!y&&t):s.layoutConnection(w,{connectionStart:F&&kx(w,w.source,e),connectionEnd:j&&_x(w,w.target,e)})})},Rm.prototype.getClosure=function(n){return new Px().addAll(n,!0)};function a0(n){this._helper=new Rm(n)}a0.$inject=["modeling"],a0.prototype.preExecute=function(n){n.closure=this._helper.getClosure(n.shapes)},a0.prototype.postExecute=function(n){var e=n.hints,t;e&&e.primaryShape&&(t=e.primaryShape,e.oldParent=t.parent),this._helper.moveClosure(n.closure,n.delta,n.newParent,n.newHost,t)};function lp(n){this._modeling=n,this._helper=new Rm(n)}lp.$inject=["modeling"],lp.prototype.execute=function(n){var e=n.shape,t=n.delta,i=n.newParent||e.parent,r=n.newParentIndex,s=e.parent;return n.oldBounds=Ze(e,["x","y","width","height"]),n.oldParent=s,n.oldParentIndex=ot(s.children,e),_t(i.children,e,r),ee(e,{parent:i,x:e.x+t.x,y:e.y+t.y}),e},lp.prototype.postExecute=function(n){var e=n.shape,t=n.delta,i=n.hints,r=this._modeling;i.layout!==!1&&($t(e.incoming,function(s){r.layoutConnection(s,{connectionEnd:_x(s,e,t)})}),$t(e.outgoing,function(s){r.layoutConnection(s,{connectionStart:kx(s,e,t)})})),i.recurse!==!1&&this.moveChildren(n)},lp.prototype.revert=function(n){var e=n.shape,t=n.oldParent,i=n.oldParentIndex,r=n.delta;return _t(t.children,e,i),ee(e,{parent:t,x:e.x-r.x,y:e.y-r.y}),e},lp.prototype.moveChildren=function(n){var e=n.delta,t=n.shape;this._helper.moveRecursive(t.children,e,null)},lp.prototype.getNewParent=function(n){return n.newParent||n.shape.parent};function Lm(n){this._modeling=n}Lm.$inject=["modeling"],Lm.prototype.execute=function(n){var e=n.newSource,t=n.newTarget,i=n.connection,r=n.dockingOrPoints;if(!e&&!t)throw new Error("newSource or newTarget required");return Nn(r)&&(n.oldWaypoints=i.waypoints,i.waypoints=r),e&&(n.oldSource=i.source,i.source=e),t&&(n.oldTarget=i.target,i.target=t),i},Lm.prototype.postExecute=function(n){var e=n.connection,t=n.newSource,i=n.newTarget,r=n.dockingOrPoints,s=n.hints||{},o={};s.connectionStart&&(o.connectionStart=s.connectionStart),s.connectionEnd&&(o.connectionEnd=s.connectionEnd),s.layoutConnection!==!1&&(t&&(!i||s.docking==="source")&&(o.connectionStart=o.connectionStart||IC(Nn(r)?r[0]:r)),i&&(!t||s.docking==="target")&&(o.connectionEnd=o.connectionEnd||IC(Nn(r)?r[r.length-1]:r)),s.newWaypoints&&(o.waypoints=s.newWaypoints),this._modeling.layoutConnection(e,o))},Lm.prototype.revert=function(n){var e=n.oldSource,t=n.oldTarget,i=n.oldWaypoints,r=n.connection;return e&&(r.source=e),t&&(r.target=t),i&&(r.waypoints=i),r};function IC(n){return n.original||n}function $h(n,e){this._modeling=n,this._rules=e}$h.$inject=["modeling","rules"],$h.prototype.preExecute=function(n){var e=this,t=this._modeling,i=this._rules,r=n.oldShape,s=n.newData,o=n.hints||{},l;function h(Q,he,ye){return i.allowed("connection.reconnect",{connection:ye,source:Q,target:he})}var p={x:s.x,y:s.y},y={x:r.x,y:r.y,width:r.width,height:r.height};l=n.newShape=n.newShape||e.createShape(s,p,r.parent,o),r.host&&t.updateAttachment(l,r.host);var w;o.moveChildren!==!1&&(w=r.children.slice(),t.moveElements(w,{x:0,y:0},l,o));var F=r.incoming.slice(),j=r.outgoing.slice();$t(F,function(Q){var he=Q.source,ye=h(he,l,Q);ye&&e.reconnectEnd(Q,l,Ox(Q,l,y),o)}),$t(j,function(Q){var he=Q.target,ye=h(l,he,Q);ye&&e.reconnectStart(Q,l,Tx(Q,l,y),o)})},$h.prototype.postExecute=function(n){var e=n.oldShape;this._modeling.removeShape(e)},$h.prototype.execute=function(n){},$h.prototype.revert=function(n){},$h.prototype.createShape=function(n,e,t,i){return this._modeling.createShape(n,e,t,i)},$h.prototype.reconnectStart=function(n,e,t,i){this._modeling.reconnectStart(n,e,t,i)},$h.prototype.reconnectEnd=function(n,e,t,i){this._modeling.reconnectEnd(n,e,t,i)};function $m(n){this._modeling=n}$m.$inject=["modeling"],$m.prototype.execute=function(n){var e=n.shape,t=n.newBounds,i=n.minBounds;if(t.x===void 0||t.y===void 0||t.width===void 0||t.height===void 0)throw new Error("newBounds must have {x, y, width, height} properties");if(i&&(t.width<i.width||t.height<i.height))throw new Error("width and height cannot be less than minimum height and width");if(!i&&t.width<10||t.height<10)throw new Error("width and height cannot be less than 10px");return n.oldBounds={width:e.width,height:e.height,x:e.x,y:e.y},ee(e,{width:t.width,height:t.height,x:t.x,y:t.y}),e},$m.prototype.postExecute=function(n){var e=this._modeling,t=n.shape,i=n.oldBounds,r=n.hints||{};r.layout!==!1&&($t(t.incoming,function(s){e.layoutConnection(s,{connectionEnd:Ox(s,t,i)})}),$t(t.outgoing,function(s){e.layoutConnection(s,{connectionStart:Tx(s,t,i)})}))},$m.prototype.revert=function(n){var e=n.shape,t=n.oldBounds;return ee(e,{width:t.width,height:t.height,x:t.x,y:t.y}),e};function RN(n,e){var t=[];return $t(n.concat(e),function(i){var r=i.incoming,s=i.outgoing;$t(r.concat(s),function(o){var l=o.source,h=o.target;(jm(n,l)||jm(n,h)||jm(e,l)||jm(e,h))&&(jm(t,o)||t.push(o))})}),t}function jm(n,e){return n.indexOf(e)!==-1}function LN(n,e,t){var i=n.x,r=n.y,s=n.width,o=n.height,l=t.x,h=t.y;switch(e){case"n":return{x:i,y:r+h,width:s,height:o-h};case"s":return{x:i,y:r,width:s,height:o+h};case"w":return{x:i+l,y:r,width:s-l,height:o};case"e":return{x:i,y:r,width:s+l,height:o};default:throw new Error("unknown direction: "+e)}}function ud(n){this._modeling=n}ud.$inject=["modeling"],ud.prototype.preExecute=function(n){var e=n.delta,t=n.direction,i=n.movingShapes,r=n.resizingShapes,s=n.start,o={};this.moveShapes(i,e),$t(r,function(l){o[l.id]=jN(l)}),this.resizeShapes(r,e,t),this.updateConnectionWaypoints(RN(i,r),e,t,s,i,r,o)},ud.prototype.execute=function(){},ud.prototype.revert=function(){},ud.prototype.moveShapes=function(n,e){var t=this;$t(n,function(i){t._modeling.moveShape(i,e,null,{autoResize:!1,layout:!1,recurse:!1})})},ud.prototype.resizeShapes=function(n,e,t){var i=this;$t(n,function(r){var s=LN(r,t,e);i._modeling.resizeShape(r,s,null,{attachSupport:!1,autoResize:!1,layout:!1})})},ud.prototype.updateConnectionWaypoints=function(n,e,t,i,r,s,o){var l=this,h=r.concat(s);$t(n,function(p){var y=p.source,w=p.target,F=$N(p),j=BC(t),Q={};cd(h,y)&&cd(h,w)?(F=Dr(F,function(he){return RC(he,i,t)&&(he[j]=he[j]+e[j]),he.original&&RC(he.original,i,t)&&(he.original[j]=he.original[j]+e[j]),he}),l._modeling.updateWaypoints(p,F,{labelBehavior:!1})):(cd(h,y)||cd(h,w))&&(cd(r,y)?Q.connectionStart=kx(p,y,e):cd(r,w)?Q.connectionEnd=_x(p,w,e):cd(s,y)?Q.connectionStart=Tx(p,y,o[y.id]):cd(s,w)&&(Q.connectionEnd=Ox(p,w,o[w.id])),l._modeling.layoutConnection(p,Q))})};function NC(n){return ee({},n)}function $N(n){return Dr(n.waypoints,function(e){return e=NC(e),e.original&&(e.original=NC(e.original)),e})}function BC(n){switch(n){case"n":return"y";case"w":return"x";case"s":return"y";case"e":return"x"}}function RC(n,e,t){var i=BC(t);if(/e|s/.test(t))return n[i]>e;if(/n|w/.test(t))return n[i]<e}function cd(n,e){return n.indexOf(e)!==-1}function jN(n){return{x:n.x,y:n.y,height:n.height,width:n.width}}function l0(n){this._modeling=n}l0.$inject=["modeling"],l0.prototype.execute=function(n){var e=n.shape,t=e.children;n.oldChildrenVisibility=LC(t),e.collapsed=!e.collapsed;var i=$C(t,e.collapsed);return[e].concat(i)},l0.prototype.revert=function(n){var e=n.shape,t=n.oldChildrenVisibility,i=e.children,r=jC(i,t);return e.collapsed=!e.collapsed,[e].concat(r)};function LC(n){var e={};return $t(n,function(t){e[t.id]=t.hidden,t.children&&(e=ee({},e,LC(t.children)))}),e}function $C(n,e){var t=[];return $t(n,function(i){i.hidden=e,t=t.concat(i),i.children&&(t=t.concat($C(i.children,i.collapsed||e)))}),t}function jC(n,e){var t=[];return $t(n,function(i){i.hidden=e[i.id],t=t.concat(i),i.children&&(t=t.concat(jC(i.children,e)))}),t}function u0(n){this._modeling=n}u0.$inject=["modeling"],u0.prototype.execute=function(n){var e=n.shape,t=n.newHost,i=e.host;return n.oldHost=i,n.attacherIdx=VC(i,e),WC(t,e),e.host=t,e},u0.prototype.revert=function(n){var e=n.shape,t=n.newHost,i=n.oldHost,r=n.attacherIdx;return e.host=i,VC(t,e),WC(i,e,r),e};function VC(n,e){return ot(n&&n.attachers,e)}function WC(n,e,t){if(n){var i=n.attachers;i||(n.attachers=i=[]),_t(i,e,t)}}function Fx(){}Fx.prototype.execute=function(n){var e=n.connection,t=n.newWaypoints;return n.oldWaypoints=e.waypoints,e.waypoints=t,e},Fx.prototype.revert=function(n){var e=n.connection,t=n.oldWaypoints;return e.waypoints=t,e};function xa(n,e,t){this._eventBus=n,this._elementFactory=e,this._commandStack=t;var i=this;n.on("diagram.init",function(){i.registerHandlers(t)})}xa.$inject=["eventBus","elementFactory","commandStack"],xa.prototype.getHandlers=function(){return{"shape.append":e0,"shape.create":ld,"shape.delete":Bm,"shape.move":lp,"shape.resize":$m,"shape.replace":$h,"shape.toggleCollapse":l0,spaceTool:ud,"label.create":Mm,"connection.create":t0,"connection.delete":Nm,"connection.move":Ax,"connection.layout":r0,"connection.updateWaypoints":Fx,"connection.reconnect":Lm,"elements.create":Cx,"elements.move":a0,"elements.delete":Sx,"elements.distribute":i0,"elements.align":Jy,"element.updateAttachment":u0}},xa.prototype.registerHandlers=function(n){$t(this.getHandlers(),function(e,t){n.registerHandler(t,e)})},xa.prototype.moveShape=function(n,e,t,i,r){typeof i=="object"&&(r=i,i=null);var s={shape:n,delta:e,newParent:t,newParentIndex:i,hints:r||{}};this._commandStack.execute("shape.move",s)},xa.prototype.updateAttachment=function(n,e){var t={shape:n,newHost:e};this._commandStack.execute("element.updateAttachment",t)},xa.prototype.moveElements=function(n,e,t,i){i=i||{};var r=i.attach,s=t,o;r===!0?(o=t,s=t.parent):r===!1&&(o=null);var l={shapes:n,delta:e,newParent:s,newHost:o,hints:i};this._commandStack.execute("elements.move",l)},xa.prototype.moveConnection=function(n,e,t,i,r){typeof i=="object"&&(r=i,i=void 0);var s={connection:n,delta:e,newParent:t,newParentIndex:i,hints:r||{}};this._commandStack.execute("connection.move",s)},xa.prototype.layoutConnection=function(n,e){var t={connection:n,hints:e||{}};this._commandStack.execute("connection.layout",t)},xa.prototype.createConnection=function(n,e,t,i,r,s){typeof t=="object"&&(s=r,r=i,i=t,t=void 0),i=this._create("connection",i);var o={source:n,target:e,parent:r,parentIndex:t,connection:i,hints:s};return this._commandStack.execute("connection.create",o),o.connection},xa.prototype.createShape=function(n,e,t,i,r){typeof i!="number"&&(r=i,i=void 0),r=r||{};var s=r.attach,o,l;n=this._create("shape",n),s?(o=t.parent,l=t):o=t;var h={position:e,shape:n,parent:o,parentIndex:i,host:l,hints:r};return this._commandStack.execute("shape.create",h),h.shape},xa.prototype.createElements=function(n,e,t,i,r){Nn(n)||(n=[n]),typeof i!="number"&&(r=i,i=void 0),r=r||{};var s={position:e,elements:n,parent:t,parentIndex:i,hints:r};return this._commandStack.execute("elements.create",s),s.elements},xa.prototype.createLabel=function(n,e,t,i){t=this._create("label",t);var r={labelTarget:n,position:e,parent:i||n.parent,shape:t};return this._commandStack.execute("label.create",r),r.shape},xa.prototype.appendShape=function(n,e,t,i,r){r=r||{},e=this._create("shape",e);var s={source:n,position:t,target:i,shape:e,connection:r.connection,connectionParent:r.connectionParent,hints:r};return this._commandStack.execute("shape.append",s),s.shape},xa.prototype.removeElements=function(n){var e={elements:n};this._commandStack.execute("elements.delete",e)},xa.prototype.distributeElements=function(n,e,t){var i={groups:n,axis:e,dimension:t};this._commandStack.execute("elements.distribute",i)},xa.prototype.removeShape=function(n,e){var t={shape:n,hints:e||{}};this._commandStack.execute("shape.delete",t)},xa.prototype.removeConnection=function(n,e){var t={connection:n,hints:e||{}};this._commandStack.execute("connection.delete",t)},xa.prototype.replaceShape=function(n,e,t){var i={oldShape:n,newData:e,hints:t||{}};return this._commandStack.execute("shape.replace",i),i.newShape},xa.prototype.alignElements=function(n,e){var t={elements:n,alignment:e};this._commandStack.execute("elements.align",t)},xa.prototype.resizeShape=function(n,e,t,i){var r={shape:n,newBounds:e,minBounds:t,hints:i};this._commandStack.execute("shape.resize",r)},xa.prototype.createSpace=function(n,e,t,i,r){var s={delta:t,direction:i,movingShapes:n,resizingShapes:e,start:r};this._commandStack.execute("spaceTool",s)},xa.prototype.updateWaypoints=function(n,e,t){var i={connection:n,newWaypoints:e,hints:t||{}};this._commandStack.execute("connection.updateWaypoints",i)},xa.prototype.reconnect=function(n,e,t,i,r){var s={connection:n,newSource:e,newTarget:t,dockingOrPoints:i,hints:r||{}};this._commandStack.execute("connection.reconnect",s)},xa.prototype.reconnectStart=function(n,e,t,i){i||(i={}),this.reconnect(n,e,n.target,t,ee(i,{docking:"source"}))},xa.prototype.reconnectEnd=function(n,e,t,i){i||(i={}),this.reconnect(n,n.source,e,t,ee(i,{docking:"target"}))},xa.prototype.connect=function(n,e,t,i){return this.createConnection(n,e,t||{},n.parent,i)},xa.prototype._create=function(n,e){return Tu(e)?e:this._elementFactory.create(n,e)},xa.prototype.toggleCollapse=function(n,e){var t={shape:n,hints:e||{}};this._commandStack.execute("shape.toggleCollapse",t)};function c0(n){this._moddle=n}c0.$inject=["moddle"],c0.prototype.execute=function(n){var e=this._moddle.ids,t=n.id,i=n.element,r=n.claiming;r?e.claim(t,i):e.unclaim(t)},c0.prototype.revert=function(n){var e=this._moddle.ids,t=n.id,i=n.element,r=n.claiming;r?e.unclaim(t):e.claim(t,i)};function VN(){function n(i,r){var s=i.label||i,o=i.labelTarget||i;return NF(s,r,o!==s),[s,o]}function e(i){return i.oldLabel=Fy(i.element),n(i.element,i.newLabel)}function t(i){return n(i.element,i.oldLabel)}this.execute=e,this.revert=t}var WN="name",jh="id";function h0(n,e){this._elementRegistry=n,this._moddle=e}h0.$inject=["elementRegistry","moddle"],h0.prototype.execute=function(n){var e=n.element,t=[e];if(!e)throw new Error("element required");var i=this._elementRegistry,r=this._moddle.ids,s=e.businessObject,o=n.properties,l=n.oldProperties||HN(s,zs(o));return HC(o,s)&&(r.unclaim(s[jh]),i.updateId(e,o[jh]),r.claim(o[jh],s)),WN in o&&e.label&&t.push(e.label),UC(s,o),n.oldProperties=l,n.changed=t,t},h0.prototype.revert=function(n){var e=n.element,t=n.properties,i=n.oldProperties,r=e.businessObject,s=this._elementRegistry,o=this._moddle.ids;return UC(r,i),HC(t,r)&&(o.unclaim(t[jh]),s.updateId(e,i[jh]),o.claim(i[jh],r)),n.changed};function HC(n,e){return jh in n&&n[jh]!==e[jh]}function HN(n,e){return qt(e,function(t,i){return t[i]=n.get(i),t},{})}function UC(n,e){$t(e,function(t,i){n.set(i,t)})}function Vh(n,e,t){this._canvas=n,this._drdRules=e,t.invoke(xa,this)}po(Vh,xa),Vh.$inject=["canvas","drdRules","injector"],Vh.prototype.claimId=function(n,e){this._commandStack.execute("id.updateClaim",{id:n,element:e,claiming:!0})},Vh.prototype.connect=function(n,e,t,i){var r=this._drdRules,s=this._canvas.getRootElement();return t||(t=r.canConnect(n,e)||{type:"dmn:Association"}),this.createConnection(n,e,t,s,i)},Vh.prototype.getHandlers=function(){var n=xa.prototype.getHandlers.call(this);return n["id.updateClaim"]=c0,n["element.updateLabel"]=VN,n["element.updateProperties"]=h0,n},Vh.prototype.unclaimId=function(n,e){this._commandStack.execute("id.updateClaim",{id:n,element:e})},Vh.prototype.updateProperties=function(n,e){this._commandStack.execute("element.updateProperties",{element:n,properties:e})},Vh.prototype.updateLabel=function(n,e,t,i){this._commandStack.execute("element.updateLabel",{element:n,newLabel:e,newBounds:t,hints:i||{}})};function zC(){}zC.prototype.layoutConnection=function(n,e){return e=e||{},[e.connectionStart||Se(e.source||n.source),e.connectionEnd||Se(e.target||n.target)]};var d0=20;function p0(n){this._connectionDocking=n}po(p0,zC),p0.$inject=["connectionDocking"],p0.prototype.layoutConnection=function(n,e){var t=this._connectionDocking;e||(e={});var i=e.source||n.source,r=e.target||n.target,s=e.waypoints||n.waypoints||[],o=e.connectionStart,l=e.connectionEnd,h=xt(i,r);if(o||(o=qC(s[0],i)),l||(l=qC(s[s.length-1],r)),Mt(n,"dmn:InformationRequirement")){s=[o,l];var p=t.getCroppedWaypoints(ee({},n,{waypoints:s}),i,r);l=p.pop();var y={x:l.x,y:l.y};return h.includes("bottom")?y.y+=d0:h.includes("top")?y.y-=d0:h.includes("right")?y.x+=d0:y.x-=d0,s=p.concat([y,l]),s}return[o,l]};function qC(n,e){return n?n.original||n:Se(e)}function QC(n){return ee({original:n.point.original||n.point},n.actual)}function hd(n,e){this._elementRegistry=n,this._graphicsFactory=e}hd.$inject=["elementRegistry","graphicsFactory"],hd.prototype.getCroppedWaypoints=function(n,e,t){e=e||n.source,t=t||n.target;var i=this.getDockingPoint(n,e,!0),r=this.getDockingPoint(n,t),s=n.waypoints.slice(i.idx+1,r.idx);return s.unshift(QC(i)),s.push(QC(r)),s},hd.prototype.getDockingPoint=function(n,e,t){var i=n.waypoints,r,s,o;return r=t?0:i.length-1,s=i[r],o=this._getIntersection(e,n,t),{point:s,actual:o||s,idx:r}},hd.prototype._getIntersection=function(n,e,t){var i=this._getShapePath(n),r=this._getConnectionPath(e);return E(i,r,t)},hd.prototype._getConnectionPath=function(n){return this._graphicsFactory.getConnectionPath(n)},hd.prototype._getShapePath=function(n){return this._graphicsFactory.getShapePath(n)},hd.prototype._getGfx=function(n){return this._elementRegistry.getGraphics(n)};var UN={__init__:["modeling","drdUpdater"],__depends__:[kN,_N,hn,yx,x,DC],drdFactory:["type",nh],drdUpdater:["type",ad],elementFactory:["type",Gd],modeling:["type",Vh],layouter:["type",p0],connectionDocking:["type",hd]},zN=500,qN=1250,QN=1500,f0=Math.round;function XN(n){return{x:n.x+f0(n.width/2),y:n.y+f0(n.height/2)}}function XC(n,e,t,i,r){function s(l,h,p,y){return r.allowed("elements.move",{shapes:l,delta:h,position:p,target:y})}n.on("shape.move.start",QN,function(l){var h=l.context,p=l.shape,y=i.get().slice();y.indexOf(p)===-1&&(y=[p]),y=YN(y),ee(h,{shapes:y,validatedShapes:y,shape:p})}),n.on("shape.move.start",qN,function(l){var h=l.context,p=h.validatedShapes,y;if(y=h.canExecute=s(p),!y)return!1}),n.on("shape.move.move",zN,function(l){var h=l.context,p=h.validatedShapes,y=l.hover,w={x:l.dx,y:l.dy},F={x:l.x,y:l.y},j;if(j=s(p,w,F,y),h.delta=w,h.canExecute=j,j===null){h.target=null;return}h.target=y}),n.on("shape.move.end",function(l){var h=l.context,p=h.delta,y=h.canExecute,w=y==="attach",F=h.shapes;if(y===!1)return!1;p.x=f0(p.x),p.y=f0(p.y),!(p.x===0&&p.y===0)&&t.moveElements(F,p,h.target,{primaryShape:h.shape,attach:w})}),n.on("element.mousedown",function(l){if(fh(l)){var h=td(l);if(!h)throw new Error("must supply DOM mousedown event");return o(h,l.element)}});function o(l,h,p,y){if(Kt(p)&&(y=p,p=!1),!(h.waypoints||!h.parent)&&!Hs(l.target).has("djs-hit-no-move")){var w=XN(h);return e.init(l,w,"shape.move",{cursor:"grabbing",autoActivate:p,data:{shape:h,context:y||{}}}),!0}}this.start=o}XC.$inject=["eventBus","dragging","modeling","selection","rules"];function YN(n){var e=uo(n,"id");return Un(n,function(t){for(;t=t.parent;)if(e[t.id])return!1;return!0})}var YC=499,Mx="djs-dragging",GC="drop-ok",KC="drop-not-ok",ZC="new-parent",JC="attach-ok";function eS(n,e,t,i){function r(h){var p=s(h),y=GN(p);return y}function s(h){var p=hl(h,!0),y=Dr(p,function(w){return(w.incoming||[]).concat(w.outgoing||[])});return It(p.concat(y))}function o(h,p){[JC,GC,KC,ZC].forEach(function(y){y===p?e.addMarker(h,y):e.removeMarker(h,y)})}function l(h,p,y){i.addDragger(p,h.dragGroup),y&&e.addMarker(p,Mx),h.allDraggedElements?h.allDraggedElements.push(p):h.allDraggedElements=[p]}n.on("shape.move.start",YC,function(h){var p=h.context,y=p.shapes,w=p.allDraggedElements,F=r(y);if(!p.dragGroup){var j=Yr("g");Ji(j,t.cls("djs-drag-group",["no-events"]));var Q=e.getActiveLayer();Br(Q,j),p.dragGroup=j}F.forEach(function(he){i.addDragger(he,p.dragGroup)}),w?w=It([w,s(y)]):w=s(y),$t(w,function(he){e.addMarker(he,Mx)}),p.allDraggedElements=w,p.differentParents=KN(y)}),n.on("shape.move.move",YC,function(h){var p=h.context,y=p.dragGroup,w=p.target,F=p.shape.parent,j=p.canExecute;w&&(j==="attach"?o(w,JC):p.canExecute&&F&&w.id!==F.id?o(w,ZC):o(w,p.canExecute?GC:KC)),L(y,h.dx,h.dy)}),n.on(["shape.move.out","shape.move.cleanup"],function(h){var p=h.context,y=p.target;y&&o(y,null)}),n.on("shape.move.cleanup",function(h){var p=h.context,y=p.allDraggedElements,w=p.dragGroup;$t(y,function(F){e.removeMarker(F,Mx)}),w&&ra(w)}),this.makeDraggable=l}eS.$inject=["eventBus","canvas","styles","previewSupport"];function GN(n){var e=Un(n,function(t){return fo(t)?Ii(n,jr({id:t.source.id}))&&Ii(n,jr({id:t.target.id})):!0});return e}function KN(n){return pi(uo(n,function(e){return e.parent&&e.parent.id}))!==1}var ZN={__depends__:[Zp,x,nd,Jd,Zd,K1],__init__:["move","movePreview"],move:["type",XC],movePreview:["type",eS]};const JN=`
M2.45221 16.0068L18.7175 1.74436L18.0615 0.996331L18.7175 1.74436C19.2646 1.26455 19.9676 
1 20.6953 1H140.926C142.583 1 143.926 2.34295 143.926 3.99967L143.93 37.5457C143.93 
38.3668 143.593 39.152 142.999 39.7183L143.689 40.4424L142.999 39.7183L127.299 
54.6723C126.741 55.2036 126 55.5 125.23 55.5H4.53787C2.88599 55.5 1.54491 54.1646 1.5379 
52.5127L1.43066 27.229L1.43065 27.2248L1.4301 18.2626C1.43005 
17.3986 1.80255 16.5765 2.45221 16.0068Z
`,eB=`
M1.79494 63.0032L1.2941 63.6423L1.79493 63.0032C1.71778 62.9427 1.6428 62.8741 1.57288 
62.8L1.01736 63.3241L1.57288 62.8C1.20495 62.41 1 61.8941 1 61.3579V2.65067C1 1.74066 
1.73867 1.00345 2.64868 1.00526L108.006 1.2145C109.66 1.21778 111 2.55996 111 
4.21449V21.7015V61.6762C111 63.3188 109.679 64.656 108.037 64.676L107.06 64.6879C106.66 
64.6927 106.26 64.6165 105.89 64.4652C105.04 64.1176 104.222 63.78 103.43 
63.4531C93.4866 59.3517 87.6891 56.9603 76.3991 58.1057C71.7035 58.5821 66.8747 60.74 
61.5721 63.1744C61.3243 63.2881 61.0753 63.4026 60.825 63.5177C55.6712 65.8868 49.9696 
68.5077 43.2365 70.3468C31.101 73.6617 15.2135 73.5179 1.79494 63.0032Z
`,tB={width:135,height:46},nB={width:100,height:63};function tS(n,e,t){return Yr("path",Jt({d:n,strokeWidth:2,transform:`translate(${e.x}, ${e.y})`},t))}const m0=5;function g0(n,e){this._styles=e,n.registerProvider(this)}g0.$inject=["outline","styles"],g0.prototype.getOutline=function(n){const e=this._styles.cls("djs-outline",["no-fill"]);var t;return Mt(n,"dmn:InputData")?(t=Yr("rect"),Ji(t,ee({x:-m0,y:-m0,rx:27,width:n.width+m0*2,height:n.height+m0*2},e))):Mt(n,"dmn:BusinessKnowledgeModel")&&nS(n,"dmn:BusinessKnowledgeModel")?t=tS(JN,{x:-6,y:-6},e):Mt(n,"dmn:KnowledgeSource")&&nS(n,"dmn:KnowledgeSource")&&(t=tS(eB,{x:-6,y:-1.5},e)),t},g0.prototype.updateOutline=function(n){return!!Rn(n,["dmn:InputData","dmn:BusinessKnowledgeModel","dmn:KnowledgeSource"])};function nS(n,e){var t;return e==="dmn:BusinessKnowledgeModel"?t=tB:e==="dmn:KnowledgeSource"&&(t=nB),n.width===t.width&&n.height===t.height}var iB={__depends__:[nd],__init__:["outlineProvider"],outlineProvider:["type",g0]},iS=".djs-palette-toggle",rS=".entry",rB=iS+", "+rS,Ix="djs-palette-",sB="shown",Nx="open",sS="two-column",oB=1e3;function Bl(n,e){this._eventBus=n,this._canvas=e;var t=this;n.on("tool-manager.update",function(i){var r=i.tool;t.updateToolHighlight(r)}),n.on("i18n.changed",function(){t._update()}),n.on("diagram.init",function(){t._diagramInitialized=!0,t._rebuild()})}Bl.$inject=["eventBus","canvas"],Bl.prototype.registerProvider=function(n,e){e||(e=n,n=oB),this._eventBus.on("palette.getProviders",n,function(t){t.providers.push(e)}),this._rebuild()},Bl.prototype.getEntries=function(){var n=this._getProviders();return n.reduce(lB,{})},Bl.prototype._rebuild=function(){if(this._diagramInitialized){var n=this._getProviders();n.length&&(this._container||this._init(),this._update())}},Bl.prototype._init=function(){var n=this,e=this._eventBus,t=this._getParentContainer(),i=this._container=Es(Bl.HTML_MARKUP);t.appendChild(i),sr(t).add(Ix+sB),Jr.bind(i,rB,"click",function(r){var s=r.delegateTarget;if(Yt(s,iS))return n.toggle();n.trigger("click",r)}),zn.bind(i,"mousedown",function(r){r.stopPropagation()}),Jr.bind(i,rS,"dragstart",function(r){n.trigger("dragstart",r)}),e.on("canvas.resized",this._layoutChanged,this),e.fire("palette.create",{container:i})},Bl.prototype._getProviders=function(n){var e=this._eventBus.createEvent({type:"palette.getProviders",providers:[]});return this._eventBus.fire(e),e.providers},Bl.prototype._toggleState=function(n){n=n||{};var e=this._getParentContainer(),t=this._container,i=this._eventBus,r,s=sr(t),o=sr(e);"twoColumn"in n?r=n.twoColumn:r=this._needsCollapse(e.clientHeight,this._entries||{}),s.toggle(sS,r),o.toggle(Ix+sS,r),"open"in n&&(s.toggle(Nx,n.open),o.toggle(Ix+Nx,n.open)),i.fire("palette.changed",{twoColumn:r,open:this.isOpen()})},Bl.prototype._update=function(){var n=xs(".djs-palette-entries",this._container),e=this._entries=this.getEntries();ln(n),$t(e,function(t,i){var r=t.group||"default",s=xs("[data-group="+bm(r)+"]",n);s||(s=Es('<div class="group"></div>'),Or(s,"data-group",r),n.appendChild(s));var o=t.html||(t.separator?'<hr class="separator" />':'<div class="entry" draggable="true"></div>'),l=Es(o);if(s.appendChild(l),!t.separator&&(Or(l,"data-action",i),t.title&&Or(l,"title",t.title),t.className&&aB(l,t.className),t.imageUrl)){var h=Es("<img>");Or(h,"src",t.imageUrl),l.appendChild(h)}}),this.open()},Bl.prototype.trigger=function(n,e,t){var i,r,s=e.delegateTarget||e.target;return s?(i=Or(s,"data-action"),r=e.originalEvent||e,this.triggerEntry(i,n,r,t)):e.preventDefault()},Bl.prototype.triggerEntry=function(n,e,t,i){var r=this._entries,s,o;if(s=r[n],!!s&&(o=s.action,this._eventBus.fire("palette.trigger",{entry:s,event:t})!==!1)){if(vn(o)){if(e==="click")return o(t,i)}else if(o[e])return o[e](t,i);t.preventDefault()}},Bl.prototype._layoutChanged=function(){this._toggleState({})},Bl.prototype._needsCollapse=function(n,e){var t=50,i=Object.keys(e).length*46;return n<i+t},Bl.prototype.close=function(){this._toggleState({open:!1,twoColumn:!1})},Bl.prototype.open=function(){this._toggleState({open:!0})},Bl.prototype.toggle=function(){this.isOpen()?this.close():this.open()},Bl.prototype.isActiveTool=function(n){return n&&this._activeTool===n},Bl.prototype.updateToolHighlight=function(n){var e,t;this._toolsContainer||(e=xs(".djs-palette-entries",this._container),this._toolsContainer=xs("[data-group=tools]",e)),t=this._toolsContainer,$t(t.children,function(i){var r=i.getAttribute("data-action");if(r){var s=sr(i);r=r.replace("-tool",""),s.contains("entry")&&r===n?s.add("highlighted-entry"):s.remove("highlighted-entry")}})},Bl.prototype.isOpen=function(){return sr(this._container).has(Nx)},Bl.prototype._getParentContainer=function(){return this._canvas.getContainer()},Bl.HTML_MARKUP='<div class="djs-palette"><div class="djs-palette-entries"></div><div class="djs-palette-toggle"></div></div>';function aB(n,e){var t=sr(n),i=Nn(e)?e:e.split(/\s+/g);i.forEach(function(r){t.add(r)})}function lB(n,e){var t=e.getPaletteEntries();return vn(t)?t(n):($t(t,function(i,r){n[r]=i}),n)}var uB={__init__:["palette"],palette:["type",Bl]},cB=250;function up(n){this._eventBus=n,this._tools=[],this._active=null}up.$inject=["eventBus"],up.prototype.registerTool=function(n,e){var t=this._tools;if(!e)throw new Error(`A tool has to be registered with it's "events"`);t.push(n),this.bindEvents(n,e)},up.prototype.isActive=function(n){return n&&this._active===n},up.prototype.length=function(n){return this._tools.length},up.prototype.setActive=function(n){var e=this._eventBus;this._active!==n&&(this._active=n,e.fire("tool-manager.update",{tool:n}))},up.prototype.bindEvents=function(n,e){var t=this._eventBus,i=[];t.on(e.tool+".init",function(r){var s=r.context;if(!s.reactivate&&this.isActive(n)){this.setActive(null);return}this.setActive(n)},this),$t(e,function(r){i.push(r+".ended"),i.push(r+".canceled")}),t.on(i,cB,function(r){this._active&&(hB(r)||this.setActive(null))},this)};function hB(n){var e=n.originalEvent&&n.originalEvent.target;return e&&ti(e,'.group[data-group="tools"]')}var oS={__depends__:[Zd],__init__:["toolManager"],toolManager:["type",up]};function Bx(n){var e=this;this._lastMoveEvent=null;function t(i){e._lastMoveEvent=i}n.on("canvas.init",function(i){var r=e._svg=i.svg;r.addEventListener("mousemove",t)}),n.on("canvas.destroy",function(){e._lastMouseEvent=null,e._svg.removeEventListener("mousemove",t)})}Bx.$inject=["eventBus"],Bx.prototype.getLastMoveEvent=function(){return this._lastMoveEvent||dB(0,0)};function dB(n,e){var t=document.createEvent("MouseEvent"),i=n,r=e,s=n,o=e;return t.initMouseEvent&&t.initMouseEvent("mousemove",!0,!0,window,0,i,r,s,o,!1,!1,!1,!1,0,null),t}var aS={__init__:["mouse"],mouse:["type",Bx]},lS="crosshair";function cp(n,e,t,i,r,s,o){this._selection=r,this._dragging=t,this._mouse=o;var l=this,h={create:function(p){var y=e.getActiveLayer(),w;w=p.frame=Yr("rect"),Ji(w,{class:"djs-lasso-overlay",width:1,height:1,x:0,y:0}),Br(y,w)},update:function(p){var y=p.frame,w=p.bbox;Ji(y,{x:w.x,y:w.y,width:w.width,height:w.height})},remove:function(p){p.frame&&ra(p.frame)}};s.registerTool("lasso",{tool:"lasso.selection",dragging:"lasso"}),n.on("lasso.selection.end",function(p){var y=p.originalEvent.target;!p.hover&&!(y instanceof SVGElement)||n.once("lasso.selection.ended",function(){l.activateLasso(p.originalEvent,!0)})}),n.on("lasso.end",0,function(p){var y=p.context,w=Rx(p),F=i.filter(function(Q){return Q}),j=Gp(p);l.select(F,w,j?y.selection:[])}),n.on("lasso.start",function(p){var y=p.context;y.bbox=Rx(p),h.create(y),y.selection=r.get()}),n.on("lasso.move",function(p){var y=p.context;y.bbox=Rx(p),h.update(y)}),n.on("lasso.cleanup",function(p){var y=p.context;h.remove(y)}),n.on("element.mousedown",1500,function(p){if(Gp(p))return l.activateLasso(p.originalEvent),!0})}cp.$inject=["eventBus","canvas","dragging","elementRegistry","selection","toolManager","mouse"],cp.prototype.activateLasso=function(n,e){this._dragging.init(n,"lasso",{autoActivate:e,cursor:lS,data:{context:{}}})},cp.prototype.activateSelection=function(n,e){this._dragging.init(n,"lasso.selection",{trapClick:!1,autoActivate:e,cursor:lS,data:{context:{}},keepSelection:!0})},cp.prototype.select=function(n,e,t=[]){var i=gc(n,e);this._selection.select([...t,...vs(i)])},cp.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var n=this._mouse.getLastMoveEvent();this.activateSelection(n,!!n)},cp.prototype.isActive=function(){var n=this._dragging.context();return n&&/^lasso/.test(n.prefix)};function Rx(n){var e={x:n.x-n.dx,y:n.y-n.dy},t={x:n.x,y:n.y},i;return e.x<=t.x&&e.y<t.y||e.x<t.x&&e.y<=t.y?i={x:e.x,y:e.y,width:t.x-e.x,height:t.y-e.y}:e.x>=t.x&&e.y<t.y||e.x>t.x&&e.y<=t.y?i={x:t.x,y:e.y,width:e.x-t.x,height:t.y-e.y}:e.x<=t.x&&e.y>t.y||e.x<t.x&&e.y>=t.y?i={x:e.x,y:t.y,width:t.x-e.x,height:e.y-t.y}:e.x>=t.x&&e.y>t.y||e.x>t.x&&e.y>=t.y?i={x:t.x,y:t.y,width:e.x-t.x,height:e.y-t.y}:i={x:t.x,y:t.y,width:0,height:0},i}var pB={__depends__:[oS,aS],__init__:["lassoTool"],lassoTool:["type",cp]},Lx=1500,uS="grab";function cf(n,e,t,i,r,s){this._dragging=t,this._mouse=s;var o=this,l=i.get("keyboard",!1);r.registerTool("hand",{tool:"hand",dragging:"hand.move"}),n.on("element.mousedown",Lx,function(h){if(gm(h))return o.activateMove(h.originalEvent,!0),!1}),l&&l.addListener(Lx,function(h){if(!(!cS(h.keyEvent)||o.isActive())){var p=o._mouse.getLastMoveEvent();o.activateMove(p,!!p)}},"keyboard.keydown"),l&&l.addListener(Lx,function(h){!cS(h.keyEvent)||!o.isActive()||o.toggle()},"keyboard.keyup"),n.on("hand.end",function(h){var p=h.originalEvent.target;if(!h.hover&&!(p instanceof SVGElement))return!1;n.once("hand.ended",function(){o.activateMove(h.originalEvent,{reactivate:!0})})}),n.on("hand.move.move",function(h){var p=e.viewbox().scale;e.scroll({dx:h.dx*p,dy:h.dy*p})}),n.on("hand.move.end",function(h){var p=h.context,y=p.reactivate;return!gm(h)&&y&&n.once("hand.move.ended",function(w){o.activateHand(w.originalEvent,!0,!0)}),!1})}cf.$inject=["eventBus","canvas","dragging","injector","toolManager","mouse"],cf.prototype.activateMove=function(n,e,t){typeof e=="object"&&(t=e,e=!1),this._dragging.init(n,"hand.move",{autoActivate:e,cursor:uS,data:{context:t||{}}})},cf.prototype.activateHand=function(n,e,t){this._dragging.init(n,"hand",{trapClick:!1,autoActivate:e,cursor:uS,data:{context:{reactivate:t}}})},cf.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var n=this._mouse.getLastMoveEvent();this.activateHand(n,!!n)},cf.prototype.isActive=function(){var n=this._dragging.context();return n?/^(hand|hand\.move)$/.test(n.prefix):!1};function cS(n){return cu("Space",n)}var fB={__depends__:[oS,aS],__init__:["handTool"],handTool:["type",cf]};function $x(n,e,t,i,r,s){this._palette=n,this._create=e,this._elementFactory=t,this._handTool=i,this._lassoTool=r,this._translate=s,n.registerProvider(this)}$x.$inject=["palette","create","elementFactory","handTool","lassoTool","translate"],$x.prototype.getPaletteEntries=function(n){var e={},t=this._create,i=this._elementFactory,r=this._handTool,s=this._lassoTool,o=this._translate;function l(h,p,y,w,F){function j(Q){var he=i.createShape(ee({type:h},F));t.start(Q,he)}return{group:p,className:y,title:w,action:{dragstart:j,click:j}}}return ee(e,{"hand-tool":{group:"tools",className:"dmn-icon-hand-tool",title:o("Activate hand tool"),action:{click:function(h){r.activateHand(h)}}},"lasso-tool":{group:"tools",className:"dmn-icon-lasso-tool",title:o("Activate lasso tool"),action:{click:function(h){s.activateSelection(h)}}},"tool-separator":{group:"tools",separator:!0},"create.decision":l("dmn:Decision","drd","dmn-icon-decision",o("Create decision")),"create.input-data":l("dmn:InputData","drd","dmn-icon-input-data",o("Create input data")),"create.knowledge-source":l("dmn:KnowledgeSource","drd","dmn-icon-knowledge-source",o("Create knowledge source")),"create.business-knowledge-model":l("dmn:BusinessKnowledgeModel","drd","dmn-icon-business-knowledge",o("Create knowledge model"))}),e};var mB={__depends__:[nc,uB,EE,pB,fB],__init__:["paletteProvider"],paletteProvider:["type",$x]},y0=Math.max,v0=Math.min,gB=20;function yB(n,e,t){var i=t.x,r=t.y,s={x:n.x,y:n.y,width:n.width,height:n.height};return e.indexOf("n")!==-1?(s.y=n.y+r,s.height=n.height-r):e.indexOf("s")!==-1&&(s.height=n.height+r),e.indexOf("e")!==-1?s.width=n.width+i:e.indexOf("w")!==-1&&(s.x=n.x+i,s.width=n.width-i),s}function x0(n,e,t){var i=e[n],r=t.min&&t.min[n],s=t.max&&t.max[n];return In(r)&&(i=(/top|left/.test(n)?v0:y0)(i,r)),In(s)&&(i=(/top|left/.test(n)?y0:v0)(i,s)),i}function vB(n,e){if(!e)return n;var t=C(n);return R({top:x0("top",t,e),right:x0("right",t,e),bottom:x0("bottom",t,e),left:x0("left",t,e)})}function xB(n,e,t,i){var r=C(e),s={top:/n/.test(n)?r.bottom-t.height:r.top,left:/w/.test(n)?r.right-t.width:r.left,bottom:/s/.test(n)?r.top+t.height:r.bottom,right:/e/.test(n)?r.left+t.width:r.right},o=i?C(i):s,l={top:v0(s.top,o.top),left:v0(s.left,o.left),bottom:y0(s.bottom,o.bottom),right:y0(s.right,o.right)};return R(l)}function Vm(n,e){return typeof n!="undefined"?n:gB}function bB(n,e){var t,i,r,s;return typeof e=="object"?(t=Vm(e.left),i=Vm(e.right),r=Vm(e.top),s=Vm(e.bottom)):t=i=r=s=Vm(e),{x:n.x-t,y:n.y-r,width:n.width+t+i,height:n.height+r+s}}function DB(n){return!(n.waypoints||n.type==="label")}function wB(n,e){var t;if(n.length===void 0?t=Un(n.children,DB):t=n,t.length)return bB(Za(t),e)}var hS=10;function Wm(n,e,t,i){this._dragging=i,this._rules=e;var r=this;function s(h,p){var y=h.shape,w=h.direction,F=h.resizeConstraints,j;h.delta=p,j=yB(y,w,p),h.newBounds=vB(j,F),h.canExecute=r.canResize(h)}function o(h){var p=h.resizeConstraints,y=h.minBounds;p===void 0&&(y===void 0&&(y=r.computeMinResizeBox(h)),h.resizeConstraints={min:C(y)})}function l(h){var p=h.shape,y=h.canExecute,w=h.newBounds;if(y){if(w=tc(w),!EB(p,w))return;t.resizeShape(p,w)}}n.on("resize.start",function(h){o(h.context)}),n.on("resize.move",function(h){var p={x:h.dx,y:h.dy};s(h.context,p)}),n.on("resize.end",function(h){l(h.context)})}Wm.prototype.canResize=function(n){var e=this._rules,t=Ze(n,["newBounds","shape","delta","direction"]);return e.allowed("shape.resize",t)},Wm.prototype.activate=function(n,e,t){var i=this._dragging,r,s;if(typeof t=="string"&&(t={direction:t}),r=ee({shape:e},t),s=r.direction,!s)throw new Error("must provide a direction (n|w|s|e|nw|se|ne|sw)");i.init(n,dS(e,s),"resize",{autoActivate:!0,cursor:CB(s),data:{shape:e,context:r}})},Wm.prototype.computeMinResizeBox=function(n){var e=n.shape,t=n.direction,i,r;return i=n.minDimensions||{width:hS,height:hS},r=wB(e,n.childrenBoxPadding),xB(t,e,i,r)},Wm.$inject=["eventBus","rules","modeling","dragging"];function EB(n,e){return n.x!==e.x||n.y!==e.y||n.width!==e.width||n.height!==e.height}function dS(n,e){var t=Se(n),i=C(n),r={x:t.x,y:t.y};return e.indexOf("n")!==-1?r.y=i.top:e.indexOf("s")!==-1&&(r.y=i.bottom),e.indexOf("e")!==-1?r.x=i.right:e.indexOf("w")!==-1&&(r.x=i.left),r}function CB(n){var e="resize-";return n==="n"||n==="s"?e+"ns":n==="e"||n==="w"?e+"ew":n==="nw"||n==="se"?e+"nwse":e+"nesw"}var pS="djs-resizing",fS="resize-not-ok",SB=500;function mS(n,e,t){function i(s){var o=s.shape,l=s.newBounds,h=s.frame;h||(h=s.frame=t.addFrame(o,e.getActiveLayer()),e.addMarker(o,pS)),l.width>5&&Ji(h,{x:l.x,width:l.width}),l.height>5&&Ji(h,{y:l.y,height:l.height}),s.canExecute?Hs(h).remove(fS):Hs(h).add(fS)}function r(s){var o=s.shape,l=s.frame;l&&ra(s.frame),e.removeMarker(o,pS)}n.on("resize.move",SB,function(s){i(s.context)}),n.on("resize.cleanup",function(s){r(s.context)})}mS.$inject=["eventBus","canvas","previewSupport"];var b0=-6,D0=8,w0=20,Hm="djs-resizer",AB=["n","w","s","e","nw","ne","se","sw"];function dd(n,e,t,i){this._resize=i,this._canvas=e;var r=this;n.on("selection.changed",function(s){var o=s.newSelection;r.removeResizers(),o.length===1&&$t(o,ze(r.addResizer,r))}),n.on("shape.changed",function(s){var o=s.element;t.isSelected(o)&&(r.removeResizers(),r.addResizer(o))})}dd.prototype.makeDraggable=function(n,e,t){var i=this._resize;function r(s){fh(s)&&i.activate(s,n,t)}zn.bind(e,"mousedown",r),zn.bind(e,"touchstart",r)},dd.prototype._createResizer=function(n,e,t,i){var r=this._getResizersParent(),s=TB(i),o=Yr("g");Hs(o).add(Hm),Hs(o).add(Hm+"-"+n.id),Hs(o).add(Hm+"-"+i),Br(r,o);var l=Yr("rect");Ji(l,{x:-D0/2+s.x,y:-D0/2+s.y,width:D0,height:D0}),Hs(l).add(Hm+"-visual"),Br(o,l);var h=Yr("rect");return Ji(h,{x:-w0/2+s.x,y:-w0/2+s.y,width:w0,height:w0}),Hs(h).add(Hm+"-hit"),Br(o,h),M(o,e,t),o},dd.prototype.createResizer=function(n,e){var t=dS(n,e),i=this._createResizer(n,t.x,t.y,e);this.makeDraggable(n,i,e)},dd.prototype.addResizer=function(n){var e=this;fo(n)||!this._resize.canResize({shape:n})||$t(AB,function(t){e.createResizer(n,t)})},dd.prototype.removeResizers=function(){var n=this._getResizersParent();Cu(n)},dd.prototype._getResizersParent=function(){return this._canvas.getLayer("resizers")},dd.$inject=["eventBus","canvas","selection","resize"];function TB(n){var e={x:0,y:0};return n.indexOf("e")!==-1?e.x=-b0:n.indexOf("w")!==-1&&(e.x=b0),n.indexOf("s")!==-1?e.y=-b0:n.indexOf("n")!==-1&&(e.y=b0),e}var OB={__depends__:[Jd,Zd,K1],__init__:["resize","resizePreview","resizeHandles"],resize:["type",Wm],resizePreview:["type",mS],resizeHandles:["type",dd]},kB="reconnectStart",_B="reconnectEnd",PB=2e3;function gS(n){n.on(["bendpoint.move.move","bendpoint.move.end"],PB,function(e){var t=e.context,i=t.allowed,r=t.hover,s=t.source,o=t.target,l=t.type;if(t.hints||(t.hints={}),delete t.hints.connectionStart,delete t.hints.connectionEnd,!(i&&i.type!=="dmn:InformationRequirement")&&!(!r||!Rn(r,["dmn:Decision","dmn:InputData"]))&&s!==o){var h=l===kB||l===_B,p=xt(s,o);h&&r===s?(FB(e,p),t.hints.connectionEnd=vS(o,p)):h&&r===o&&(t.hints.connectionStart=yS(s,p),MB(e,p))}})}gS.$inject=["eventBus"];function yS(n,e){var t=C(n),i=Se(n);return e.includes("bottom")?i.y=t.top:e.includes("top")?i.y=t.bottom:e.includes("right")?i.x=t.left:i.x=t.right,i}function vS(n,e){var t=C(n),i=Se(n);return e.includes("bottom")?i.y=t.bottom:e.includes("top")?i.y=t.top:e.includes("right")?i.x=t.right:i.x=t.left,i}function FB(n,e){var t=n.context,i=t.source,r=yS(i,e),s=n.x-r.x,o=n.y-r.y;n.x-=s,n.y-=o,n.dx-=s,n.dy-=o}function MB(n,e){var t=n.context,i=t.target,r=vS(i,e),s=0,o=0;e.includes("top")||e.includes("bottom")?o=n.y-r.y:s=n.x-r.x,n.x-=s,n.y-=o,n.dx-=s,n.dy-=o}var IB=250;function xS(n){n.on(["connect.hover","connect.move","connect.end"],IB,function(e){var t=e.context,i=t.canExecute,r=t.hover,s=t.source,o=t.target;if(i&&i.type==="dmn:InformationRequirement"){var l=xt(s,o);t.connectionStart=Se(s),r===s?t.connectionEnd=Se(o):t.connectionEnd={x:e.x,y:e.y},l.includes("bottom")?(t.connectionStart.y=C(s).top,t.connectionEnd.y=C(o).bottom):l.includes("top")?(t.connectionStart.y=C(s).bottom,t.connectionEnd.y=C(o).top):l.includes("right")?(t.connectionStart.x=C(s).left,t.connectionEnd.x=C(o).right):(t.connectionStart.x=C(s).right,t.connectionEnd.x=C(o).left)}else delete t.connectionStart,delete t.connectionEnd})}xS.$inject=["eventBus"];function pd(){this._targets={},this._snapOrigins={},this._snapLocations=[],this._defaultSnaps={}}pd.prototype.getSnapOrigin=function(n){return this._snapOrigins[n]},pd.prototype.setSnapOrigin=function(n,e){this._snapOrigins[n]=e,this._snapLocations.indexOf(n)===-1&&this._snapLocations.push(n)},pd.prototype.addDefaultSnap=function(n,e){var t=this._defaultSnaps[n];t||(t=this._defaultSnaps[n]=[]),t.push(e)},pd.prototype.getSnapLocations=function(){return this._snapLocations},pd.prototype.setSnapLocations=function(n){this._snapLocations=n},pd.prototype.pointsForTarget=function(n){var e=n.id||n,t=this._targets[e];return t||(t=this._targets[e]=new E0,t.initDefaults(this._defaultSnaps)),t};function E0(){this._snapValues={}}E0.prototype.add=function(n,e){var t=this._snapValues[n];t||(t=this._snapValues[n]={x:[],y:[]}),t.x.indexOf(e.x)===-1&&t.x.push(e.x),t.y.indexOf(e.y)===-1&&t.y.push(e.y)},E0.prototype.snap=function(n,e,t,i){var r=this._snapValues[e];return r&&PM(n[t],r[t],i)},E0.prototype.initDefaults=function(n){var e=this;$t(n||{},function(t,i){$t(t,function(r){e.add(i,r)})})};var NB=1250;function Um(n,e,t){var i=this;this._elementRegistry=n,e.on(["create.start","shape.move.start"],function(r){i.initSnap(r)}),e.on(["create.move","create.end","shape.move.move","shape.move.end"],NB,function(r){var s=r.context,o=s.shape,l=s.snapContext,h=s.target;if(!(r.originalEvent&&fl(r.originalEvent))&&!(Sm(r)||!h)){var p=l.pointsForTarget(h);p.initialized||(p=i.addSnapTargetPoints(p,o,h),p.initialized=!0),t.snap(r,p)}}),e.on(["create.cleanup","shape.move.cleanup"],function(){t.hide()})}Um.$inject=["elementRegistry","eventBus","snapping"],Um.prototype.initSnap=function(n){var e=this._elementRegistry,t=n.context,i=t.shape,r=t.snapContext;r||(r=t.snapContext=new pd);var s;e.get(i.id)?s=of(i,n):s={x:n.x+of(i).x,y:n.y+of(i).y};var o={x:s.x-i.width/2,y:s.y-i.height/2},l={x:s.x+i.width/2,y:s.y+i.height/2};return r.setSnapOrigin("mid",{x:s.x-n.x,y:s.y-n.y}),ta(i)||(r.setSnapOrigin("top-left",{x:o.x-n.x,y:o.y-n.y}),r.setSnapOrigin("bottom-right",{x:l.x-n.x,y:l.y-n.y})),r},Um.prototype.addSnapTargetPoints=function(n,e,t){var i=this.getSnapTargets(e,t);return $t(i,function(r){if(ta(r)){ta(e)&&n.add("mid",of(r));return}if(fo(r)){if(r.waypoints.length<3)return;var s=r.waypoints.slice(1,-1);$t(s,function(o){n.add("mid",o)});return}n.add("mid",of(r))}),!In(e.x)||!In(e.y)||this._elementRegistry.get(e.id)&&n.add("mid",of(e)),n},Um.prototype.getSnapTargets=function(n,e){return oE(e).filter(function(t){return!BB(t)})};function BB(n){return!!n.hidden}var RB=1250;function zm(n,e){var t=this;n.on(["resize.start"],function(i){t.initSnap(i)}),n.on(["resize.move","resize.end"],RB,function(i){var r=i.context,s=r.shape,o=s.parent,l=r.direction,h=r.snapContext;if(!(i.originalEvent&&fl(i.originalEvent))&&!Sm(i)){var p=h.pointsForTarget(o);p.initialized||(p=t.addSnapTargetPoints(p,s,o,l),p.initialized=!0),jB(l)&&gh(i,"x",i.x),VB(l)&&gh(i,"y",i.y),e.snap(i,p)}}),n.on(["resize.cleanup"],function(){e.hide()})}zm.prototype.initSnap=function(n){var e=n.context,t=e.shape,i=e.direction,r=e.snapContext;r||(r=e.snapContext=new pd);var s=bS(t,i);return r.setSnapOrigin("corner",{x:s.x-n.x,y:s.y-n.y}),r},zm.prototype.addSnapTargetPoints=function(n,e,t,i){var r=this.getSnapTargets(e,t);return $t(r,function(s){n.add("corner",MM(s)),n.add("corner",FM(s))}),n.add("corner",bS(e,i)),n},zm.$inject=["eventBus","snapping"],zm.prototype.getSnapTargets=function(n,e){return oE(e).filter(function(t){return!LB(t,n)&&!fo(t)&&!$B(t)&&!ta(t)})};function bS(n,e){var t=Se(n),i=C(n),r={x:t.x,y:t.y};return e.indexOf("n")!==-1?r.y=i.top:e.indexOf("s")!==-1&&(r.y=i.bottom),e.indexOf("e")!==-1?r.x=i.right:e.indexOf("w")!==-1&&(r.x=i.left),r}function LB(n,e){return n.host===e}function $B(n){return!!n.hidden}function jB(n){return n==="n"||n==="s"}function VB(n){return n==="e"||n==="w"}var WB=7,HB=1e3;function fd(n){this._canvas=n,this._asyncHide=le(ze(this.hide,this),HB)}fd.$inject=["canvas"],fd.prototype.snap=function(n,e){var t=n.context,i=t.snapContext,r=i.getSnapLocations(),s={x:Sm(n,"x"),y:Sm(n,"y")};$t(r,function(o){var l=i.getSnapOrigin(o),h={x:n.x+l.x,y:n.y+l.y};if($t(["x","y"],function(p){var y;s[p]||(y=e.snap(h,o,p,WB),y!==void 0&&(s[p]={value:y,originValue:y-l[p]}))}),s.x&&s.y)return!1}),this.showSnapLine("vertical",s.x&&s.x.value),this.showSnapLine("horizontal",s.y&&s.y.value),$t(["x","y"],function(o){var l=s[o];Kt(l)&&gh(n,o,l.originValue)})},fd.prototype._createLine=function(n){var e=this._canvas.getLayer("snap"),t=Yr("path");return Ji(t,{d:"M0,0 L0,0"}),Hs(t).add("djs-snap-line"),Br(e,t),{update:function(i){In(i)?n==="horizontal"?Ji(t,{d:"M-100000,"+i+" L+100000,"+i,display:""}):Ji(t,{d:"M "+i+",-100000 L "+i+", +100000",display:""}):Ji(t,{display:"none"})}}},fd.prototype._createSnapLines=function(){this._snapLines={horizontal:this._createLine("horizontal"),vertical:this._createLine("vertical")}},fd.prototype.showSnapLine=function(n,e){var t=this.getSnapLine(n);t&&t.update(e),this._asyncHide()},fd.prototype.getSnapLine=function(n){return this._snapLines||this._createSnapLines(),this._snapLines[n]},fd.prototype.hide=function(){$t(this._snapLines,function(n){n.update()})};var UB={__init__:["createMoveSnapping","resizeSnapping","snapping"],createMoveSnapping:["type",Um],resizeSnapping:["type",zm],snapping:["type",fd]},zB={__depends__:[UB],__init__:["bendpointSnapping","connectSnapping"],bendpointSnapping:["type",gS],connectSnapping:["type",xS]};function hf(n){Yd.call(this,n)}po(hf,Yd),hf.prototype._modelingModules=[LF,sM,hM,NM,EI,TI,RI,jI,HI,UI,JI,sN,aN,dN,vN,UN,ZN,iB,mB,OB,zB],hf.prototype._modules=[].concat(hf.prototype._modules,hf.prototype._modelingModules);function qB(n){const e={variables:[],rootElement:oR(n)};for(let t=n;t;t=t.$parent)QB(t,e);return e.variables}function QB(n,e){qm(n,"dmn:Decision")?XB(n,e):qm(n,"dmn:Expression")&&iR(n,e)}function XB(n,e){for(const t of n.get("informationRequirement"))YB(t,e);for(const t of n.get("knowledgeRequirement"))eR(t,e)}function YB(n,e){const t=n.get("requiredInput");t&&GB(t,e);const i=n.get("requiredDecision");i&&KB(i,e)}function GB(n,e){const t=jx(n,e.rootElement);if(!t)return;const i=t.get("name");i&&e.variables.push({name:i,origin:t})}function KB(n,e){const t=jx(n,e.rootElement);if(!t)return;const i=t.get("name");if(!i)return;const r={name:i,origin:t},s=t.get("decisionLogic");s&&ZB(s,r),e.variables.push(r)}function ZB(n,e,t){if(qm(n,"dmn:DecisionTable")){const i=n.get("output");JB(i,e)}}function JB(n,e,t){if(n.length===1){const r=qi(Jt({},DS(n[0])),{name:e.name});Object.assign(e,r);return}const i=n.map(DS);e.entries=i.filter(r=>!!r.name)}function DS(n){const e={name:n.name};return n.typeRef&&(e.detail=n.typeRef),e}function eR(n,e){const t=n.get("requiredKnowledge");t&&tR(t,e)}function tR(n,e){const t=jx(n,e.rootElement);t&&qm(t,"dmn:BusinessKnowledgeModel")&&nR(t,e)}function nR(n,e){const t=n.get("name");if(!t)return;const i={name:t,origin:n};e.variables.push(i)}function iR(n,e){qm(n,"dmn:FunctionDefinition")&&rR(n,e)}function rR(n,e){const t=n.get("formalParameter");for(const i of t)sR(i,e)}function sR(n,e){const t=n.get("name");if(!t)return;const i={name:t,origin:n};n.get("typeRef")&&(i.detail=n.get("typeRef")),e.variables.push(i)}function oR(n){let e=n;for(;e.$parent;)e=e.$parent;return e}function jx(n,e){const t=n.get("href");if(!t||!t.startsWith("#"))return;const i=t.slice(1);return e.get("drgElement").find(s=>s.get("id")===i)}function qm(n,e){return n.$instanceOf(e)}class wS{constructor(e){e.registerProvider(this)}getVariables(e,t){return e.concat(qB(t))}}wS.$inject=["variableResolver"];class aR{constructor(){this._providers=[]}registerProvider(e){this._providers.push(e)}getVariables(e){return this._providers.reduce((t,i)=>i.getVariables(t,e),[])}}const Vx={__init__:["dmnVariableProvider"],dmnVariableProvider:["type",wS],variableResolver:["type",aR]};class Qm{constructor(e){ee(this,e),Wh(this,"businessObject",{writable:!0})}}class lR extends Qm{constructor(e){super(e),Wh(this,"rows",{enumerable:!0,value:this.rows||[]}),Wh(this,"cols",{enumerable:!0,value:this.cols||[]})}}class bc extends Qm{constructor(e){super(e),Wh(this,"root",{writable:!0}),Wh(this,"cells",{enumerable:!0,value:this.cells||[]})}}class Dc extends Qm{constructor(e){super(e),Wh(this,"root",{writable:!0}),Wh(this,"cells",{enumerable:!0,value:this.cells||[]})}}class C0 extends Qm{constructor(e){super(e),Wh(this,"row",{writable:!0}),Wh(this,"col",{writable:!0})}}const uR={root:lR,row:bc,col:Dc,cell:C0};function cR(n,e){const t=uR[n];if(!t)throw new Error("unknown type "+n);return new t(e)}function Wh(n,e,t){Object.defineProperty(n,e,t)}let ES=class{constructor(){this._uid=12}create(e,t={}){return t.id||(t.id=e+"_"+this._uid++),cR(e,t)}createRoot(e){return this.create("root",e)}createRow(e){return this.create("row",e)}createCol(e){return this.create("col",e)}createCell(e){return this.create("cell",e)}},CS=class{constructor(e){this._eventBus=e,this._elements={},e.on("table.clear",this.clear.bind(this))}add(e,t){const{id:i}=e;this._elements[i]=e}remove(e){const t=e.id||e;delete this._elements[t]}get(e){return this._elements[e]}getAll(){return Wx(this._elements)}forEach(e){Wx(this._elements).forEach(t=>e(t))}filter(e){return Wx(this._elements).filter(t=>e(t))}clear(){this._elements={}}updateId(e,t){this._validateId(t),typeof e=="string"&&(e=this.get(e)),this._eventBus.fire("element.updateId",{element:e,newId:t}),this.remove(e),e.id=t,this.add(e)}_validateId(e){if(!e)throw new Error("element must have an id");if(this._elements[e])throw new Error("element with id "+e+" already added")}};CS.$inject=["eventBus"];function Wx(n){return Object.keys(n).map(function(e){return n[e]})}let SS=class{constructor(e){this._listeners={},e.on("elements.changed",({elements:t})=>{this.elementsChanged(t)}),e.on("root.remove",t=>{const i=t.root.id;this._listeners[i]&&e.once("root.add",r=>{const s=r.root.id;this.updateId(i,s)})}),e.on("element.updateId",({element:t,newId:i})=>{this.updateId(t.id,i)})}elementsChanged(e){const t={},i=e.length;for(let r=0;r<i;r++){const{id:s}=e[r];if(t[s])return;t[s]=!0;const o=this._listeners[s]&&this._listeners[s].length;if(o)for(let l=0;l<o;l++)this._listeners[s][l]&&this._listeners[s][l]()}}onElementsChanged(e,t){this._listeners[e]||(this._listeners[e]=[]),this._listeners[e][this._listeners[e].length]=t}offElementsChanged(e,t){if(this._listeners[e])if(t){const i=this._listeners[e].indexOf(t);i!==-1&&this._listeners[e].splice(i,1)}else this._listeners[e].length=0}updateId(e,t){this._listeners[e]&&(this._listeners[t]=this._listeners[e],delete this._listeners[e])}};SS.$inject=["eventBus"];const hR=1e3;let dR=class{constructor(){this._listeners={}}getComponent(e,t){const i=this._listeners[e];if(!i)return;let r;for(let s=0;s<i.length&&(r=i[s].callback(t),!r);s++);return r}getComponents(e,t){const i=this._listeners[e],r=[];if(!i)return r;for(let s=0;s<i.length;s++){const o=i[s].callback(t);o&&r.push(o)}return r.length,r}onGetComponent(e,t,i){if(vn(t)&&(i=t,t=hR),!In(t))throw new Error("priority must be a number");const r=this._getListeners(e);let s,o;const l={priority:t,callback:i};for(o=0;s=r[o];o++)if(s.priority<t){r.splice(o,0,l);return}r.push(l)}offGetComponent(e,t){const i=this._getListeners(e);let r,s,o;if(t)for(o=i.length-1;r=i[o];o--)s=r.callback,s===t&&i.splice(o,1);else i.length=0}_getListeners(e){let t=this._listeners[e];return t||(this._listeners[e]=t=[]),t}};class pR extends br{constructor(e){super(e);const t=this._injector=e.injector;this._sheet=t.get("sheet"),this._changeSupport=t.get("changeSupport"),this._components=t.get("components"),this._eventBus=t.get("eventBus");const i=t.get("throttle");this.onElementsChanged=this.onElementsChanged.bind(this),this.onScroll=i(this.onScroll.bind(this))}onElementsChanged(){this.forceUpdate()}onScroll(){this._eventBus.fire("sheet.scroll")}getChildContext(){return{changeSupport:this._changeSupport,components:this._components,injector:this._injector}}componentWillMount(){const{id:e}=this._sheet.getRoot();this._changeSupport.onElementsChanged(e,this.onElementsChanged)}componentWillUnmount(){const{id:e}=this._sheet.getRoot();this._changeSupport.offElementsChanged(e,this.onElementsChanged)}render(){const{rows:e,cols:t}=this._sheet.getRoot(),i=this._components.getComponents("table.before"),r=this._components.getComponents("table.after"),s=this._components.getComponent("table.head"),o=this._components.getComponent("table.body"),l=this._components.getComponent("table.foot");return Re(1,"div","tjs-container",[i&&i.map((h,p)=>jn(2,h,null,p)),Re(1,"div","tjs-table-container",Re(1,"table","tjs-table",[s&&jn(2,s,{rows:e,cols:t}),o&&jn(2,o,{rows:e,cols:t}),l&&jn(2,l,{rows:e,cols:t})],0),2,{onScroll:this.onScroll}),r&&r.map((h,p)=>jn(2,h,null,p))],0)}}let AS=class{constructor(e,t,i,r,s){const{container:o}=i;this._container=o,r.on("root.added",()=>{Hd(jn(2,pR,{injector:s}),o)}),r.on("root.remove",()=>{Hd(null,o)})}getContainer(){return this._container}};AS.$inject=["changeSupport","components","config.renderer","eventBus","injector"];var TS={__init__:["changeSupport","components","renderer"],changeSupport:["type",SS],components:["type",dR],renderer:["type",AS]};class OS{constructor(e,t){this._elementRegistry=e,this._eventBus=t,this._root=null,t.on("table.clear",()=>{this.setRoot(null)})}setRoot(e){if(this._root){const t=this._root;this._eventBus.fire("root.remove",{root:t}),this._root=null,this._eventBus.fire("root.removed",{root:t})}e&&this._eventBus.fire("root.add",{root:e}),this._root=e,e&&this._eventBus.fire("root.added",{root:e})}getRoot(){return this._root||this.setRoot({id:"__implicitroot",rows:[],cols:[]}),this._root}addRow(e,t){const i=this.getRoot();if(i.cols.length!=e.cells.length)throw new Error("number of cells is not equal to number of cols");return typeof t=="undefined"&&(t=i.rows.length),S0(t,i.rows,e),e.root=i,this._elementRegistry.add(e),e.cells.forEach((r,s)=>{this._elementRegistry.add(r),r.row=e,r.col=i.cols[s],S0(t,i.cols[s].cells,r)}),this._eventBus.fire("row.add",{row:e}),e}removeRow(e){const t=this.getRoot();typeof e=="string"&&(e=this._elementRegistry.get(e));const i=t.rows.indexOf(e);i!==-1&&(A0(i,t.rows),e.root=void 0,this._elementRegistry.remove(e),e.cells.forEach((r,s)=>{this._elementRegistry.remove(r),r.col=void 0,A0(i,t.cols[s].cells)}),this._eventBus.fire("row.remove",{row:e}))}addCol(e,t){const i=this.getRoot();if(this._elementRegistry.add(e),i.rows.length!=e.cells.length)throw new Error("number of cells is not equal to number of rows");return typeof t=="undefined"&&(t=i.cols.length),S0(t,i.cols,e),e.root=i,e.cells.forEach((r,s)=>{this._elementRegistry.add(r),r.col=e,r.row=i.rows[s],S0(t,i.rows[s].cells,r)}),this._eventBus.fire("col.add",{col:e}),e}removeCol(e){const t=this.getRoot();typeof e=="string"&&(e=this._elementRegistry.get(e));const i=t.cols.indexOf(e);i!==-1&&(A0(i,t.cols),e.root=void 0,this._elementRegistry.remove(e),e.cells.forEach((r,s)=>{this._elementRegistry.remove(r),r.row=void 0,A0(i,t.rows[s].cells)}),this._eventBus.fire("col.remove",{col:e}))}resized(){this._eventBus.fire("sheet.resized")}}OS.$inject=["elementRegistry","eventBus"];function S0(n,e,t){return e.splice(n,0,t)}function A0(n,e){return e.splice(n,1)}function kS(n=!0){const e=typeof n=="number"?n:n?300:0;return e?t=>$e(t,e):t=>t}kS.$inject=["config.throttle"];var fR={__depends__:[TS],__init__:["elementFactory","sheet"],elementFactory:["type",ES],elementRegistry:["type",CS],eventBus:["type",Bn],sheet:["type",OS],throttle:["factory",kS]};class mR{constructor(e={}){let{injector:t}=e;if(!t){let{modules:i,config:r}=this._init(e);t=gR(r,i)}this.get=t.get,this.invoke=t.invoke,this.get("eventBus").fire("table.init"),this.get("eventBus").fire("diagram.init")}_init(e){let r=e,{modules:t}=r,i=Zu(r,["modules"]);return{modules:t,config:i}}destroy(){const e=this.get("eventBus");e.fire("table.destroy"),e.fire("diagram.destroy")}clear(){const e=this.get("eventBus");e.fire("table.clear"),e.fire("diagram.clear")}}function gR(n,e){const t=[{config:["value",n]},fR].concat(e||[]),i=new No(t);return i.init(),i}function Hx(n){if(!n)return"<null>";const e=n.id?` id="${n.id}"`:"";return`<${n.$type}${e} />`}function yR(n,e){function t(h,p,y){var w=h.gfx;if(w)throw new Error(`already rendered ${Hx(h)}`);return n.element(h,p,y)}function i(h){return n.table(h)}function r(h){h.id||(h.id="decision");const p=h.decisionLogic;if(p){if(!p.output)throw new Error(`missing output for ${Hx(p)}`);const y=i(p);p.input&&s(p.input,y,p),s(p.output,y,p),o(p.rule,y,p)}else throw new Error(`no table for ${Hx(h)}`)}function s(h,p,y){$t(h,function(w){t(w,p,y)})}function o(h,p,y){$t(h,function(w){t(w,p,y),l(w.inputEntry,w),l(w.outputEntry,w)})}function l(h,p,y){$t(h,function(w){t(w,p,y)})}return{handleDecision:r}}function vR(n,e,t){const i=n.get("tableImporter"),r=n.get("eventBus"),s=n.get("sheet");n.get("modeling",!1);let o,l=[];function h(p){const y={create(F,j,Q,he){return i.create(F,j,Q,he)},table(F){return i.add(F)},element(F,j,Q){return i.add(F,j,Q)},error(F,j){l.push({message:F,context:j})}};new yR(y).handleDecision(p)}r.fire("import.render.start",{decision:e});try{h(e)}catch(p){o=p}r.fire("import.render.complete",{error:o,warnings:l}),r.fire("elements.changed",{elements:[s.getRoot()]}),t(o,l)}function xR(){return{elements:[],index:{}}}function _S(n,e){const{elements:t,index:i}=n;return i[e]?n:{elements:[...t,e],index:qi(Jt({},i),{[e]:!0})}}function bR(n,e){return n.elements.join(e)}function Ux(...n){let e=xR();return n.forEach(function(t){const i=typeof t;i==="string"&&t.length>0?e=_S(e,t):i==="object"&&t!==null&&Object.keys(t).forEach(function(r){t[r]&&(e=_S(e,r))})}),bR(e," ")}function Uu(n){const e=n.constructor;return PS(e,n)}function PS(n,e){const t=n.$inject;if(!t)return;const{injector:i}=e.context,r=[...t,function(...s){for(const o in s){const l=t[o],h=s[o];e[l]=h}}];i.invoke(r)}function DR(n,...e){return function(...t){let i;return e.forEach(function(r){if(i=r.call(n,...t),typeof i!="undefined")return!1}),i}.bind(n)}function hp(n,e){Object.keys(e).forEach(function(t){if(t==="$inject"||t==="__init")return;const i=e[t];t==="constructor"&&i.call(n,n.props,n.context);const r=n[t];if(typeof r!="undefined"){if(typeof r!="function")throw new Error(`failed to mixin <${t}>: cannot combine with non-fn component value`);n[t]=DR(n,r,i)}else n[t]=i.bind(n)}),"$inject"in e&&PS(e,n),"__init"in e&&e.__init.call(n,n.props,n.context)}const zx={getSelectionClasses(){const{selected:n,selectedSecondary:e,focussed:t}=this.state;return Ux({selected:n,"selected-secondary":e,focussed:t})},selectionChanged(n){this.setState(n)},componentWillUpdate(n){n.elementId!==this.props.elementId&&this.updateSelectionSubscription(!1)},componentDidUpdate(n){n.elementId!==this.props.elementId&&this.updateSelectionSubscription(!0)},componentDidMount(){this.updateSelectionSubscription(!0)},componentWillUnmount(){this.updateSelectionSubscription(!1)},updateSelectionSubscription(n){const{elementId:e}=this.props;e&&e&&this.eventBus[n?"on":"off"](`selection.${e}.changed`,this.selectionChanged)}};zx.$inject=["eventBus"];class wR extends br{constructor(e,t){super(e,t),hp(this,zx),Uu(this)}getRenderProps(...e){const l=this.props,{className:t,elementId:i,coords:r}=l,s=Zu(l,["className","elementId","coords"]),o={className:Ux(...e,this.getSelectionClasses(),t)};return i&&(o["data-element-id"]=i),r&&(o["data-coords"]=r),Jt(Jt({},o),s)}}class Xm extends wR{constructor(e,t){super(e,t),this.state={}}render(){const{children:e}=this.props,t=this.getRenderProps("cell");return Tc(Re(1,"td",null,e,0,Jt({},t)))}}const df={slotFill(n,e){const o=n,{type:t,context:i}=o,r=Zu(o,["type","context"]),s=this.components.getComponent(t,i)||e;return s?Tc(jn(2,s,Jt(Jt({},i),r))):null},slotFills(n){const s=n,{type:e,context:t}=s,i=Zu(s,["type","context"]);return this.components.getComponents(e,t).map(o=>Tc(jn(2,o,Jt(Jt({},t),i))))}};df.$inject=["components"];const FS=400;class qx extends br{constructor(t,i){super(t,i);$n(this,"onElementsChanged",()=>{this.forceUpdate()});hp(this,df),Uu(this)}componentDidMount(){this.changeSupport.onElementsChanged(this.getRoot(),this.onElementsChanged)}componentWillUnmount(){this.changeSupport.offElementsChanged(this.getRoot(),this.onElementsChanged)}getRoot(){return this.sheet.getRoot()}render(){const r=(this.getRoot().businessObject.get("annotationsWidth")||FS)+"px";return Re(1,"th","annotation header",[this.slotFills({type:"cell-inner",context:{cellType:"annotations",col:this.sheet.getRoot(),minWidth:FS}}),this.translate("Annotations")],0,{style:{width:r}})}}qx.$inject=["changeSupport","sheet","translate"];function ER(n){const{row:e}=n,{id:t,description:i}=e.businessObject;return jn(2,Xm,{className:"annotation",elementId:t,children:i||"-"})}function MS(n){n.onGetComponent("cell",({cellType:e})=>{if(e==="after-label-cells")return qx;if(e==="after-rule-cells")return ER})}MS.$inject=["components"];var CR={__init__:["annotationsProvider"],annotationsProvider:["type",MS]};function Ym(n,e){return ee({id:n.id,type:n.$type,businessObject:n},e)}class IS{constructor(e,t,i){this._elementFactory=e,this._eventBus=t,this._sheet=i}add(e){let t;if(Mt(e,"dmn:DecisionTable"))t=this._elementFactory.createRoot(Ym(e)),this._sheet.setRoot(t);else if(Mt(e,"dmn:InputClause"))t=this._elementFactory.createCol(Ym(e)),this._sheet.addCol(t);else if(Mt(e,"dmn:OutputClause"))t=this._elementFactory.createCol(Ym(e)),this._sheet.addCol(t);else if(Mt(e,"dmn:DecisionRule")){e.inputEntry||(e.inputEntry=[]),e.outputEntry||(e.outputEntry=[]);const i=[...e.inputEntry,...e.outputEntry].map(r=>this._elementFactory.createCell(Ym(r)));t=this._elementFactory.createRow(ee(Ym(e),{cells:i})),this._sheet.addRow(t)}return this._eventBus.fire("dmnElement.added",{element:t}),t}}IS.$inject=["elementFactory","eventBus","sheet"];var SR={__depends__:[nc],tableImporter:["type",IS]},AR={__depends__:[SR,TS]};class TR extends br{constructor(t,i){super(t,i);$n(this,"onElementsChanged",()=>{this.forceUpdate()});hp(this,df),this._sheet=i.injector.get("sheet"),this._changeSupport=i.changeSupport}componentWillMount(){const t=this._sheet.getRoot();this._changeSupport.onElementsChanged(t.id,this.onElementsChanged)}componentWillUnmount(){const t=this._sheet.getRoot();this._changeSupport.offElementsChanged(t.id,this.onElementsChanged)}render(){const t=this._sheet.getRoot();if(!Mt(t,"dmn:DMNElement"))return null;const i=es(t),r=i.input,s=i.output;return Re(1,"thead",null,Re(1,"tr",null,[Re(1,"th","index-column"),this.slotFills({type:"cell",context:{cellType:"before-label-cells"}}),r&&r.map((o,l)=>{const h=o.width||"192px";return this.slotFill({type:"cell",context:{cellType:"input-header",input:o,index:l,inputsLength:r.length,width:h},key:o.id},OR)}),s.map((o,l)=>this.slotFill({type:"cell",context:{cellType:"output-header",output:o,index:l,outputsLength:s.length},key:o.id},kR)),this.slotFills({type:"cell",context:{cellType:"after-label-cells"}})],0),2)}}function OR(n,e){const{input:t,className:i,index:r}=n,{label:s,inputExpression:o,inputValues:l}=t,h=e.injector.get("translate"),p=(i||"")+" input-cell";return Re(1,"th",p,[Re(1,"div","clause",h(r===0?"When":"And"),0),s?Re(1,"div","input-label",s,0,{title:h("Input label: ")+s}):Re(1,"div","input-expression",o.text,0,{title:h("Input expression: ")+o.text}),Re(1,"div","input-variable",l&&l.text||o.typeRef,0,{title:l&&l.text?h("Input values"):h("Input type")})],0,{"data-col-id":t.id},t.id)}function kR(n,e){const{output:t,className:i,index:r}=n,{label:s,name:o,outputValues:l,typeRef:h}=t,p=e.injector.get("translate"),y=(i||"")+" output-cell";return Re(1,"th",y,[Re(1,"div","clause",p(r===0?"Then":"And"),0),s?Re(1,"div","output-label",s,0,{title:p("Output label")}):Re(1,"div","output-name",o,0,{title:p("Output name")}),Re(1,"div","output-variable",l&&l.text||h,0,{title:l&&l.text?p("Output values"):p("Output type")})],0,null,t.id)}function NS(n){n.onGetComponent("table.head",()=>TR)}NS.$inject=["components"];var _R={__init__:["decisionTableHeadProvider"],decisionTableHeadProvider:["type",NS]};let BS=class extends br{constructor(e,t){super(e,t),this._translate=t.injector.get("translate"),Uu(this)}render(){const e=this.sheet.getRoot();if(!Mt(e,"dmn:DMNElement"))return null;const{name:t}=e.businessObject.$parent,i=this.components.getComponent("hit-policy")||PR;return Re(1,"div","decision-table-properties",[Re(1,"div","decision-table-name",t,0,{title:this._translate("Decision name: ")+t}),Re(1,"div","decision-table-header-separator"),jn(2,i)],4)}};BS.$inject=["sheet","components"];function PR(){return null}const FR=500;let RS=class{constructor(e){e.onGetComponent("table.before",FR,()=>BS)}};RS.$inject=["components"];var MR={__init__:["decisionTableProperties"],decisionTableProperties:["type",RS]};class IR extends br{render(){const{row:e,rowIndex:t}=this.props,{components:i}=this.context,r=i.getComponents("cell-inner",{cellType:"rule-index",row:e,rowIndex:t});return Re(1,"td","rule-index",[r&&r.map(s=>jn(2,s,{row:e,rowIndex:t})),t+1],0,{"data-element-id":e.id,"data-row-id":e.id})}}class LS{constructor(e){e.onGetComponent("cell",({cellType:t})=>{if(t==="before-rule-cells")return IR})}}LS.$inject=["components"];var NR={__init__:["decisionRuleIndices"],decisionRuleIndices:["type",LS]};const BR=[{label:"FEEL",value:"feel"}];class $S{constructor(e){this._injector=e;const t=e.get("config.expressionLanguages")||{};this._config={options:BR,defaults:{editor:"feel"}},t.options&&(this._config.options=t.options);const i=this._getLegacyDefaults();ee(this._config.defaults,i,t.defaults)}getDefault(e){const{defaults:t}=this._config,i=t[e]||t.editor;return this._getLanguageByValue(i)||this.getAll()[0]}getLabel(e){const t=this._getLanguageByValue(e);return t?t.label:e}getAll(){return this._config.options}_getLegacyDefaults(){const e={},t=this._injector,i=t.get("config.defaultInputExpressionLanguage"),r=t.get("config.defaultOutputExpressionLanguage");return i&&(e.inputCell=i),r&&(e.outputCell=r),e}_getLanguageByValue(e){return Ii(this.getAll(),t=>e===t.value)}}$S.$inject=["injector"];var md={__init__:["expressionLanguages"],expressionLanguages:["type",$S]};class RR extends br{render({rows:e,cols:t}){const{components:i}=this.context;return Re(1,"tbody",null,e.map((r,s)=>{const o=i.getComponent("row",{rowType:"rule"});return o&&jn(2,o,{row:r,rowIndex:s,cols:t},r.id)}),0)}}class LR extends br{constructor(e,t){super(e,t),hp(this,df)}render(){const{row:e,rowIndex:t,cols:i}=this.props,{cells:r}=e;return Re(1,"tr",null,[this.slotFills({type:"cell",context:{cellType:"before-rule-cells",row:e,rowIndex:t}}),r.map((s,o)=>this.slotFill({type:"cell",context:{cellType:"rule",cell:s,rowIndex:t,colIndex:o},key:s.id,row:e,col:i[o]})),this.slotFills({type:"cell",context:{cellType:"after-rule-cells",row:e,rowIndex:t}})],0)}}class $R extends br{render(){const{cell:e,row:t,col:i}=this.props;return Mt(e,"dmn:UnaryTests")?jn(2,Xm,{className:"input-cell",elementId:e.id,"data-row-id":t.id,"data-col-id":i.id,children:e.businessObject.text}):jn(2,Xm,{className:"output-cell",elementId:e.id,"data-row-id":t.id,"data-col-id":i.id,children:e.businessObject.text})}}let jS=class{constructor(e){e.onGetComponent("table.body",()=>RR),e.onGetComponent("row",({rowType:t})=>{if(t==="rule")return LR}),e.onGetComponent("cell",({cellType:t})=>{if(t==="rule")return $R})}};jS.$inject=["components"];var VS={__depends__:[md],__init__:["decisionRules"],decisionRules:["type",jS]};const Qx=[{label:"Unique",value:{hitPolicy:"UNIQUE",aggregation:void 0},explanation:"No overlap is possible and all rules are disjoint. Only a single rule can be matched"},{label:"First",value:{hitPolicy:"FIRST",aggregation:void 0},explanation:"Rules may overlap. The first matching rule will be chosen"},{label:"Priority",value:{hitPolicy:"PRIORITY",aggregation:void 0},explanation:"Rules may overlap. The one with the highest priority will be chosen"},{label:"Any",value:{hitPolicy:"ANY",aggregation:void 0},explanation:"Rules may overlap. Their output have to match"},{label:"Collect",value:{hitPolicy:"COLLECT",aggregation:void 0},explanation:"Collects the values of all matching rules"},{label:"Collect (Sum)",value:{hitPolicy:"COLLECT",aggregation:"SUM"},explanation:"Collects the values of all matching rules and sums up to a single value"},{label:"Collect (Min)",value:{hitPolicy:"COLLECT",aggregation:"MIN"},explanation:"Collects the values of all matching rules and uses the lowest value"},{label:"Collect (Max)",value:{hitPolicy:"COLLECT",aggregation:"MAX"},explanation:"Collects the values of all matching rules and uses the highest value"},{label:"Collect (Count)",value:{hitPolicy:"COLLECT",aggregation:"COUNT"},explanation:"Collects the values of all matching rules and counts the number of them"},{label:"Rule order",value:{hitPolicy:"RULE ORDER",aggregation:void 0},explanation:"Collects the values of all matching rules in rule order"},{label:"Output order",value:{hitPolicy:"OUTPUT ORDER",aggregation:void 0},explanation:"Collects the values of all matching rules in decreasing output priority order"}];class WS extends br{constructor(e,t){super(e,t),this._translate=t.injector.get("translate"),Uu(this)}getRoot(){return this.sheet.getRoot()}render(){const e=this.getRoot(),t=e.businessObject,{aggregation:i,hitPolicy:r}=t,s=Ii(Qx,o=>jR(o.value,{aggregation:i,hitPolicy:r}));return Re(1,"div","hit-policy header",[Re(1,"label","dms-label",this._translate("Hit policy:"),0),Re(1,"span","hit-policy-value",this._translate(s.label),0)],4,{title:this._translate(s.explanation)})}}WS.$inject=["sheet"];function jR(n,e){return n.hitPolicy===e.hitPolicy&&n.aggregation===e.aggregation}function HS(n){n.onGetComponent("hit-policy",()=>WS)}HS.$inject=["components"];var VR={__init__:["hitPolicyProvider"],hitPolicyProvider:["type",HS]};let WR=class extends br{constructor(t,i){super(t,i);$n(this,"onClick",()=>{this._eventBus.fire("showDrd")});const{injector:r}=i;this._translate=r.get("translate"),this._eventBus=r.get("eventBus")}render(){return Re(1,"div","view-drd",Re(1,"button","view-drd-button",this._translate("View DRD"),0,{type:"button",onClick:this.onClick}),2,null,null,t=>this.node=t)}},US=class{constructor(e,t,i,r){this._injector=i,this._sheet=r,e.onGetComponent("table.before",()=>{if(this.canViewDrd())return WR}),t.on("showDrd",()=>{const s=i.get("_parent",!1),o=r.getRoot(),l=zS(o);if(!l)return;const h=s.getView(l);s.open(h)})}canViewDrd(){const e=this._injector.get("_parent",!1);if(!e)return!1;const t=this._sheet.getRoot(),i=zS(t);return!!e.getView(i)}};US.$inject=["components","eventBus","injector","sheet"];function zS(n){const{businessObject:e}=n;return e?e.$parent.$parent:void 0}var HR={__init__:["viewDrd"],viewDrd:["type",US]};let qS=class{constructor(e){e.onGetComponent("table.before",()=>Up)}};qS.$inject=["components"];var UR={__init__:["poweredBy"],poweredBy:["type",qS]};let QS=class xw extends mR{constructor(e={}){const t=xw._createContainer();super(ee(e,{renderer:{container:t}})),this._container=t}open(e){var t=this;return new Promise((i,r)=>{var s;try{return t._decision&&t.clear(),t._decision=e,vR(t,e,function(o,l){o?(o.warnings=l||[],r(o)):i({warnings:l||[]})})}catch(o){s=o}s?(s.warnings=s.warnings||[],r(s)):i({warnings:[]})})}_init(e){let p=e,{modules:t,additionalModules:i}=p,r=Zu(p,["modules","additionalModules"]),s=t||this.getModules(),o=i||[],l=[{decisionTable:["value",this]}];return{modules:[UR,...s,...o,...l],config:r}}on(e,t,i,r){return this.get("eventBus").on(e,t,i,r)}off(e,t){this.get("eventBus").off(e,t)}_emit(e,t){return this.get("eventBus").fire(e,t)}attachTo(e){if(!e)throw new Error("parentNode required");this.detach();const t=this._container;e.appendChild(t),this._emit("attach",{})}detach(){const e=this._container;e.parentNode&&(this._emit("detach",{}),Li(e))}destroy(){super.destroy(),this.detach()}getModules(){return xw._getModules()}static _getModules(){return[CR,AR,nc,_R,MR,NR,VS,VR,HR]}static _createContainer(){return Es('<div class="dmn-decision-table-container"></div>')}};class XS extends br{constructor(t,i){super(t,i);$n(this,"handleClick",t=>{t.stopPropagation(),this.addRule(t.target.dataset.colIndex)});Uu(this),this.addRule=this.addRule.bind(this)}componentWillMount(){this._eventBus=this.context.injector.get("eventBus")}addRule(t){this._eventBus.fire("addRule",{colIndex:t})}render(){const{cols:t}=this.props,i=[Re(1,"td","add-rule-add",Re(1,"span","dmn-icon-plus action-icon",null,1,{title:this.translate("Add rule")}),2)],{businessObject:r}=this.sheet.getRoot();(!r.input||!r.input.length)&&i.push(Re(1,"td","input-cell",bo("-"),2));for(let s=0;s<t.length+1;s++){let o="add-rule";const l=t[s]&&t[s].businessObject;let h="";l?(l.$instanceOf("dmn:InputClause")&&(o+=" input-cell",h="-"),l.$instanceOf("dmn:OutputClause")&&(o+=" output-cell")):o+=" annotation",i.push(Re(1,"td",o,h,0,{"data-col-index":s}))}return Re(1,"tfoot","actionable add-rule",Re(1,"tr",null,i,0),2,{onClick:this.handleClick})}}XS.$inject=["sheet","translate"];class YS{constructor(e,t,i,r){e.onGetComponent("table.foot",()=>XS),i.on("addRule",(s,o)=>{const l=t.trigger("addRule"),h=o.colIndex;l.cells[h]?r.select(l.cells[h]):r.select(l.cells[0])})}}YS.$inject=["components","editorActions","eventBus","selection"];class GS{constructor(e,t,i){this._elementRegistry=e,this._eventBus=t,this._renderer=i,this._selection=void 0,t.on("diagram.clear",()=>{this._selection=void 0})}select(e){gn(e)&&(e=this._elementRegistry.get(e));const t=this._selection;t!==e&&(this._selection=e,this._eventBus.fire("selection.changed",{oldSelection:t,selection:e}))}deselect(){const e=this._selection;this._selection=void 0,this._eventBus.fire("selection.changed",{oldSelection:e,selection:this._selection})}get(){return this._selection}hasSelection(){return!!this._selection}}GS.$inject=["elementRegistry","eventBus","renderer"];class KS{constructor(e,t,i,r){this._elementRegistry=e,this._renderer=i,this._selection=r,t.on(["cell.click","cell.contextmenu"],({id:s})=>{const o=e.get(s);o&&r.select(o)}),t.on("row.remove",({row:s})=>{const o=r.get();o&&s===o.row&&r.deselect()}),t.on("col.remove",({col:s})=>{const o=r.get();o&&s===o.col&&r.deselect()})}}KS.$inject=["elementRegistry","eventBus","renderer","selection"];var T0={__init__:["selection","selectionBehavior"],selection:["type",GS],selectionBehavior:["type",KS]};function zR(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}const ZS=["click","dblclick","contextmenu","mousedown","mouseup","mouseenter","mouseleave","mouseout","mouseover","mousemove","focusin","focusout","drag","dragstart","dragend","dragover","dragenter","dragleave","drop"];class JS{constructor(e,t){zR(this,"_handleEvent",i=>{const{target:r,type:s}=i,o=qR(r);if(!o)return;const l=o.getAttribute("data-element-id");if(l){const h=this._eventBus.createEvent({id:l,event:i,node:o,target:o});this._eventBus.fire(`cell.${s}`,h),h.defaultPrevented&&i.preventDefault(),h.cancelBubble&&i.stopPropagation()}}),this._eventBus=t,this._container=e.container,t.on("table.init",()=>{this._addEventListeners(ZS)}),t.on("table.destroy",()=>{this._removeEventListeners(ZS)})}_addEventListeners(e){const t=this._container;e.forEach(i=>{t.addEventListener(i,this._handleEvent)})}_removeEventListeners(e){const t=this._container;e.forEach(i=>{t.removeEventListener(i,this._handleEvent)})}}JS.$inject=["config.renderer","eventBus"];function qR(n){return ti(n,"[data-element-id]",!0)}var Xx={__init__:["interactionEvents"],interactionEvents:["type",JS]},Yx=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof dn.g!="undefined"?dn.g:typeof self!="undefined"?self:{};function Gx(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var eA={exports:{}};(function(n,e){(function(t,i){n.exports=i(t)})(Yx,function(t){if(t.CSS&&t.CSS.escape)return t.CSS.escape;var i=function(r){if(arguments.length==0)throw new TypeError("`CSS.escape` requires an argument.");for(var s=String(r),o=s.length,l=-1,h,p="",y=s.charCodeAt(0);++l<o;){if(h=s.charCodeAt(l),h==0){p+="\uFFFD";continue}if(h>=1&&h<=31||h==127||l==0&&h>=48&&h<=57||l==1&&h>=48&&h<=57&&y==45){p+="\\"+h.toString(16)+" ";continue}if(l==0&&o==1&&h==45){p+="\\"+s.charAt(l);continue}if(h>=128||h==45||h==95||h>=48&&h<=57||h>=65&&h<=90||h>=97&&h<=122){p+=s.charAt(l);continue}p+="\\"+s.charAt(l)}return p};return t.CSS||(t.CSS={}),t.CSS.escape=i,i})})(eA);var QR=eA.exports,tA=Gx(QR),nA=XR;function XR(n,e){return n^e}var YR=/\b(Array|Date|Object|Math|JSON)\b/g,GR=function(n,e){var t=JR(KR(n));return e&&typeof e=="string"&&(e=e3(e)),e?ZR(n,t,e):t};function KR(n){return n.replace(/\.\w+|\w+ *\(|"[^"]*"|'[^']*'|\/([^/]+)\//g,"").replace(YR,"").match(/[a-zA-Z_]\w*/g)||[]}function ZR(n,e,t){var i=/\.\w+|\w+ *\(|"[^"]*"|'[^']*'|\/([^/]+)\/|[a-zA-Z_]\w*/g;return n.replace(i,function(r){return r[r.length-1]=="("||~e.indexOf(r)?t(r):r})}function JR(n){for(var e=[],t=0;t<n.length;t++)~e.indexOf(n[t])||e.push(n[t]);return e}function e3(n){return function(e){return n+e}}var iA=Yl;function Yl(n,e){if(!(this instanceof Yl))return new Yl(n,e);if(this.node=this.start=this.peeked=n,this.root=e,this.closingTag=!1,this._revisit=!0,this._selects=[],this._rejects=[],n&&this.higher(n))throw new Error("root must be a parent or ancestor to node")}Yl.prototype.reset=function(n){return this.node=n||this.start,this},Yl.prototype.revisit=function(n){return this._revisit=n==null?!0:n,this},Yl.prototype.opening=function(){return this.node.nodeType==1&&(this.closingTag=!1),this},Yl.prototype.atOpening=function(){return!this.closingTag},Yl.prototype.closing=function(){return this.node.nodeType==1&&(this.closingTag=!0),this},Yl.prototype.atClosing=function(){return this.closingTag},Yl.prototype.next=rA("nextSibling","firstChild"),Yl.prototype.previous=Yl.prototype.prev=rA("previousSibling","lastChild");function rA(n,e){var t=n=="nextSibling";return function(r,s,o){r=this.compile(r),s=s&&s>0?s:1;for(var l=this.node,h=this.closingTag,p=this._revisit;l;){if(nA(t,h)&&l[e])l=l[e],h=!t;else if(l.nodeType==1&&!l[e]&&nA(t,h)){if(h=t,!p)continue}else if(l[n])l=l[n],h=!t;else if(l=l.parentNode,h=t,!p)continue;if(!l||this.higher(l,this.root))break;if(r(l)&&this.selects(l,o)&&this.rejects(l,o)){if(--s)continue;return o||(this.node=l),this.closingTag=h,l}}return null}}Yl.prototype.select=function(n){return n=this.compile(n),this._selects.push(n),this},Yl.prototype.selects=function(n,e){var t=this._selects,i=t.length;if(!i)return!0;for(var r=0;r<i;r++)if(t[r].call(this,n,e))return!0;return!1},Yl.prototype.reject=function(n){return n=this.compile(n),this._rejects.push(n),this},Yl.prototype.rejects=function(n,e){var t=this._rejects,i=t.length;if(!i)return!0;for(var r=0;r<i;r++)if(t[r].call(this,n,e))return!1;return!0},Yl.prototype.higher=function(n){var e=this.root;if(!e)return!1;for(n=n.parentNode;n&&n!=e;)n=n.parentNode;return n!=e},Yl.prototype.compile=function(n){switch(typeof n){case"number":return function(e){return n==e.nodeType};case"string":return new Function("node","return "+GR(n,"node."));case"function":return n;default:return function(){return!0}}},Yl.prototype.peak=Yl.prototype.peek=function(n,e){return arguments.length==1&&(e=n,n=!0),e=e==null?1:e,e?e>0?this.next(n,e,!0):this.prev(n,Math.abs(e),!0):this.node},Yl.prototype.use=function(n){return n(this),this};var pf=window.getSelection();function sA(n){pf.removeAllRanges(),pf.addRange(n)}function t3(){return pf}function n3(n){if(!pf.rangeCount)return null;var e=pf.focusNode;return O0(e)&&(e=e.parentNode),n==e||n.contains(e)}function oA(n,e){var t=i3(n,e);sA(t)}function Kx(n){if(!n3(n))return null;var e=pf.getRangeAt(0),t=e.startContainer,i=e.endContainer,r=e.startOffset,s=e.endOffset,o=iA(n.firstChild,n),l=o.node,h,p=!1,y,w=0;function F(Q,he){return arguments.length===1&&(he=Q),Q.parentNode===i&&he==i.childNodes[s]}function j(Q,he){return arguments.length===1&&(he=Q),Q.parentNode===t&&he==t.childNodes[r]}for(;l&&(j(l)&&(y=w),!F(l));){if(p||(aA(l)||h&&h.nextSibling==l&&(lA(l)||uA(l)))&&w++,O0(l)){if(t===l&&(y=w+r),i===l){w+=s;break}w+=l.textContent.length}if((O0(l)||p)&&(j(l,l.nextSibling)&&(y=w),F(l,l.nextSibling)))break;h=l,l=o.next(),p=o.closingTag}return{start:typeof y=="undefined"?w:y,end:w}}function i3(n,e){for(var t=e.start,i=e.end,r=document.createRange(),s=iA(n.firstChild,n),o=s.node,l=!1,h=0,p;o;){if(h===t&&(l?r.setStartAfter(o):r.setStartBefore(o)),h===i)return l?r.setEndAfter(o):r.setEndBefore(o),r;if(l||(aA(o)||o.previousSibling&&(lA(o)||uA(o)))&&h++,O0(o)){if(p=o.textContent.length,h<=t&&h+p>t&&r.setStart(o,t-h),h+p>i)return r.setEnd(o,i-h),r;h+=p}o=s.next(),l=s.closingTag}return h<=t&&(n.lastChild?r.setStartAfter(n.lastChild):r.setStart(n,0)),n.lastChild?r.setEndAfter(n.lastChild):r.setEnd(n,0),r}function O0(n){return n.nodeType===3}function aA(n){return n.nodeType===1&&n.nodeName==="BR"}function lA(n){return n.nodeType===1&&n.nodeName==="DIV"}function uA(n){return n.nodeType===1&&n.nodeName==="P"}const r3="[contenteditable]",s3="[data-element-id]";function k0(n){return n.getAttribute("data-element-id")}function o3(n){const e=n.getAttribute("data-coords");if(!e)return null;const[t,i]=e.split(":");return{row:t,col:i}}function a3(n,e){const t=`${n.row}:${n.col}`;return xs(`[data-coords="${tA(t)}"]`,e)}function ff(n,e){return xs(`[data-element-id="${tA(n)}"]`,e)}function l3(n){return ti(n,".no-deselect",!0)}function Zx(n){return ti(n,s3,!0)}function cA(n){const e=r3;return Yt(n,e)?n:xs(e,n)}function u3(n){const e=cA(n);if(!e||!document.body.contains(e)||document.activeElement===e)return;e.focus();const t=Kx(e);(!t||t.end===0)&&window.getSelection().setPosition(e.firstChild,e.firstChild.length)}const Jx=500,c3={above:!0,below:!0,right:!0,left:!0};function hA(n,e,t,i,r){const{container:s}=n;let o=null;function l(F,j){e.fire("selection."+F+".changed",j),e.fire("cellSelection.changed",{elementId:F,selection:j})}function h(F){const j=F.target;if(l3(j))return;const Q=Zx(j),he=Q&&k0(Q),ye=!F.defaultPrevented;w(he,ye)}function p(F){const j=k0(F.target),Q=!F.defaultPrevented;return F.stopPropagation(),w(j,Q)}function y(F){const j=k0(F.target);l(j,{focussed:!1})}function w(F,j=!0){o!==F&&l(o,{selected:!1,focussed:!1}),o=F,F&&l(F,{selected:!0,focussed:j}),F?i.select(F):i.deselect()}e.on("cell.click",Jx,h),e.on("cell.focusin",Jx,p),e.on("cell.focusout",Jx,y),e.on("cellSelection.changed",function(F){const{elementId:j,selection:Q}=F,he=ff(j,s);Q.focussed&&he&&u3(he)}),e.on("selection.changed",function(F){const{selection:j,oldSelection:Q}=F;var he=j&&j.id,ye=Q&&Q.id;he&&he!==o?w(j.id):ye&&ye===o&&w()}),this.isCellSelected=function(){return!!o},this.getCellSelection=function(){return o},this.selectCell=function(F){if(!o)return;if(!(F in c3))throw new Error("direction must be any of { above, below, left, right }");var j=ff(o,s);const Q=o3(j);if(!Q)return!1;const he=h3(Q,F),ye=a3(he,s);if(!ye)return!1;const Le=k0(ye);return Le&&w(Le,{focussed:!0,selected:!0}),!0},e.on("contextMenu.close",function(){if(o)return w(o)})}hA.$inject=["config.renderer","eventBus","sheet","selection","elementRegistry"];function h3(n,e){const{row:t,col:i}=n;if(e==="above"||e==="below"){const r=parseInt(t,10);if(isNaN(r))return n;const s=e==="above"?r-1:r+1;return{col:i,row:s}}if(e==="left"||e==="right"){const r=parseInt(i,10);if(isNaN(r))return n;const s=e==="left"?r-1:r+1;return{row:t,col:s}}throw new Error("invalid direction <"+e+">")}var _0={__depends__:[Xx,T0],__init__:["cellSelection"],cellSelection:["type",hA]};function Gm(){}Gm.prototype.get=function(){return this._data},Gm.prototype.set=function(n){this._data=n},Gm.prototype.clear=function(){var n=this._data;return delete this._data,n},Gm.prototype.isEmpty=function(){return!this._data};var dA={clipboard:["type",Gm]};const eb=2e3;class pA extends op{constructor(e,t){super(e),this._sheet=t}init(){this.addRule("col.move",eb,({col:e,index:t})=>{const{businessObject:i}=this._sheet.getRoot(),{input:r}=i;return $i(e)?t<r.length:t>=r.length}),this.addRule("col.remove",eb,({col:e})=>{const{cols:t}=this._sheet.getRoot();return Ir(e)?t.filter(i=>Ir(i)).length>1:!0}),this.addRule("paste",eb,({data:e,target:t})=>{if(!e||!t)return!1;const{root:i}=e;return t instanceof bc?this.canPasteRows(i):t instanceof Dc?this.canPasteCols(i,t):!1})}canPasteRows(e){const{cols:t}=this._sheet.getRoot();return mr(e,i=>i.type!=="row"||i.cells.length!==t.length?!1:mr(i.cells,(r,s)=>$i(t[s])?r.businessObject.$type==="dmn:UnaryTests":r.businessObject.$type==="dmn:LiteralExpression"))}canPasteCols(e,t){const{rows:i}=this._sheet.getRoot();return mr(e,r=>r.type!=="col"||r.cells.length!==i.length?!1:$i(t)?r.businessObject.$type==="dmn:InputClause":r.businessObject.$type==="dmn:OutputClause")}}pA.$inject=["eventBus","sheet"];var d3={__depends__:[Jd]},tb={__depends__:[d3],__init__:["decisionTableModelingRules"],decisionTableModelingRules:["type",pA]};class fA{constructor(e,t,i){this._clipboard=e,this._modeling=t,this._sheet=i}execute(e){let{data:t}=e;return e.oldData=this._clipboard.get(),this._clipboard.set(t),this._sheet.getRoot()}postExecute(e){let{elements:t}=e;t.forEach(i=>{i instanceof bc?this._modeling.removeRow(i):i instanceof Dc&&this._modeling.removeCol(i)})}revert(e){const{oldData:t}=e;return this._clipboard.set(t),this._sheet.getRoot()}}fA.$inject=["clipboard","modeling","sheet"];const p3=[y3,v3],f3=[E3,w3];function nb(n,e,t){return t=t||p3,e=e||{},Nn(n)?m3(n,e,t):mA(n,e,t)}function m3(n,e,t){return qt(n,(i,r)=>{var s=i.descriptorCache,o=i.root;let{root:l,descriptorCache:h}=mA(r,s,t);return{root:[...o,l],descriptorCache:Jt(Jt({},s),h)}},{root:[],descriptorCache:e})}function mA(n,e,t){var i=n.id,r={id:i},s=e.elements||{},o=s[i];if(o)return{root:o,descriptorCache:e};let l=g3(n,r,t,qi(Jt({},e),{elements:s}));return{root:l.root,descriptorCache:qi(Jt({},l.descriptorCache),{elements:qi(Jt({},l.descriptorCache.elements),{[i]:l.root})})}}function g3(n,e,t,i){function r(s,o){return nb(s,o,t)}return qt(t,function(s,o){return o(n,s.root,s.descriptorCache,r)},{root:e,descriptorCache:i})}function y3(n,e,t,i){var r=t,s=qi(Jt({},e),{type:x3(n)});if(n instanceof bc||n instanceof Dc){let o=i(n.cells,r);s.cells=o.root,r=o.descriptorCache}return{root:s,descriptorCache:r}}function v3(n,e,t){var i=n.businessObject;if(!i)return{root:e,descriptorCache:t};var r=ib(i,t);return{root:qi(Jt({},e),{businessObject:r.root}),descriptorCache:r.descriptorCache}}function x3(n){if(n instanceof bc)return"row";if(n instanceof Dc)return"col";if(n instanceof C0)return"cell";throw new Error("cannot deduce element type: #"+n.id)}function ib(n,e){var t,i,r=n.id;if(r&&(t=e.boCache||{},i=t[r],i))return{root:i,descriptorCache:e};var s={$type:n.$type};return r&&(s.id=r,t=qi(Jt({},t),{[r]:s}),e=qi(Jt({},e),{boCache:t})),n.$descriptor.properties.forEach(function(o){var l=n[o.name];if(l){if(Nn(l)&&(l=l.map(h=>{var p=ib(h,e);return e=p.descriptorCache,p.root})),l.$type){let h=ib(l,e);e=h.descriptorCache,l=h.root}s[o.name]=l}}),{root:s,descriptorCache:e}}function gA(n,e,t){return t=t||f3,e=e||{},Nn(n.root)?b3(n,e,t):yA(n,e,t)}function b3(n,e,t){let i=n.root,r=n.descriptorCache;return qt(i,(s,o)=>{var l=s.reviveCache,h=s.root;let{root:p,reviveCache:y}=yA({root:o,descriptorCache:r},l,t);return{root:[...h,p],reviveCache:y}},{root:[],reviveCache:e})}function yA(n,e,t){var i=n.root,r=i.id,s=e.elements||{},o=s[r];if(o)return{root:o,reviveCache:e};var l={id:r};let h=D3(n,l,t,qi(Jt({},e),{elements:s}));return{root:h.root,reviveCache:qi(Jt({},h.reviveCache),{elements:qi(Jt({},h.reviveCache.elements),{[r]:h.root})})}}function D3(n,e,t,i){function r(s,o){return gA(s,o,t)}return qt(t,function(s,o){return o(n,s.root,s.reviveCache,r)},{root:e,reviveCache:i})}function w3(n,e,t,i){var r=n.root,s=n.descriptorCache,o=Jt({},e);if(e.businessObject&&e.businessObject.id&&(o.id=e.businessObject.id),r.type==="row"||r.type==="col"){let p=i({root:r.cells,descriptorCache:s},t);o.cells=p.root,t=p.reviveCache}var l=C3(r),h=new l(o);return h instanceof bc?h.cells.forEach(p=>{p.row=h}):h instanceof Dc&&h.cells.forEach(p=>{p.col=h}),{root:h,reviveCache:t}}function E3(n,e,t){var i=n.root.businessObject;if(!i)return{root:e,reviveCache:t};var r=rb({root:i,descriptorCache:n.descriptorCache},t);return{root:qi(Jt({},e),{businessObject:r.root}),reviveCache:r.reviveCache}}function C3(n){switch(n.type){case"row":return bc;case"cell":return C0;case"col":return Dc;default:throw new Error("unknown element type: #"+n.type)}}function rb(n,e){var t=n.root,i=t.id;let r,s;if(i&&(r=e.boCache||{},s=r[i],s))return{root:s,reviveCache:e};var o={};zs(t).forEach(p=>{let y,w;t[p].$type?(w=rb({root:t[p]},e),y=w.root,e=w.reviveCache,r=e.boCache||{}):Nn(t[p])?y=t[p].map(F=>(w=rb({root:F},e),e=w.reviveCache,r=e.boCache||{},w.root)):y=t[p],o[p]=y});const l=o.$type;delete o.$type,(!e._keepIds||e._model.ids.assigned(o.id))&&delete o.id;var h=e._dmnFactory.create(l,o);return $t(o,p=>{p.$type&&(p.$parent=h),Nn(p)&&p.forEach(y=>y.$parent=h)}),i&&(r=qi(Jt({},r),{[i]:h}),e=qi(Jt({},e),{boCache:r})),{root:h,reviveCache:e}}class vA{constructor(e,t,i,r,s,o,l,h){this._clipboard=e,this._dmnFactory=t,this._elementFactory=i,this._elementRegistry=r,this._eventBus=s,this._model=o,this._modeling=l,this._sheet=h}postExecute(e){let{element:t,after:i}=e;const r=this._clipboard.get();if(!r)throw new Error("missing clipboard data");const s=this._sheet.getRoot(),o=gA(r.elements,{_dmnFactory:this._dmnFactory,_keepIds:r.keepIds,_model:this._model}).root;if(t instanceof bc){let l=s.rows.indexOf(t);if(l===-1)return;o.forEach(h=>{i&&l++,this._modeling.addRow(h,l)})}else if(t instanceof Dc){let l=s.cols.indexOf(t);if(l===-1)return;o.forEach(h=>{i&&l++,this._modeling.addCol(h,l)})}return e.oldElements=this._clipboard.get(),this._sheet.getRoot()}revert(e){}}vA.$inject=["clipboard","dmnFactory","elementFactory","elementRegistry","eventBus","moddle","modeling","sheet"];class xA{constructor(e,t,i,r,s,o){this._clipboard=e,this._commandStack=t,this._eventBus=i,this._modeling=r,this._sheet=s,this._rules=o,t.registerHandler("cut",fA),t.registerHandler("paste",vA)}copy(e){Nn(e)||(e=[e]);const t={elements:nb(e)};this._eventBus.fire("copyCutPaste.copy",{data:t}),this._clipboard.set(t)}cut(e){Nn(e)||(e=[e]);const t={elements:nb(e),keepIds:!0},i={elements:e,data:t};this._eventBus.fire("copyCutPaste.cut",{data:t}),this._commandStack.execute("cut",i)}pasteBefore(e){return this._paste(e,{before:!0})}pasteAfter(e){return this._paste(e,{after:!0})}_paste(e,t){const i=this._clipboard.get();return i?this._rules.allowed("paste",{data:i.elements,target:e})?(this._commandStack.execute("paste",Jt({element:e},t)),this._clipboard.clear(),!0):!1:void 0}pasteAt(e){}}xA.$inject=["clipboard","commandStack","eventBus","modeling","sheet","rules"];var bA={__depends__:[dA,tb],__init__:["copyCutPaste"],copyCutPaste:["type",xA]};class DA{constructor(e,t,i,r,s,o){const l={addRule(){return i.addRow({type:"dmn:DecisionRule"})},addRuleAbove(h){let p=h&&h.rule;if(!p&&!r.hasSelection())return;p=p||r.get().row;const y=o.getRoot(),w=y.rows.indexOf(p);if(w!==-1)return i.addRow({type:"dmn:DecisionRule"},w)},addRuleBelow(h){let p=h&&h.rule;if(!p&&!r.hasSelection())return;p=p||r.get().row;const y=o.getRoot(),w=y.rows.indexOf(p);if(w!==-1)return i.addRow({type:"dmn:DecisionRule"},w+1)},removeRule(h){let p=h&&h.rule;!p&&!r.hasSelection()||(p=p||r.get().row,i.removeRow(p))},addInput(){const h=o.getRoot(),p=h.businessObject,{input:y}=p;return i.addCol({type:"dmn:InputClause"},y?y.length:0)},addInputLeft(h){let p=h&&h.input;if(!p&&!r.hasSelection())return;p=p||r.get().col;const y=o.getRoot(),w=y.cols.indexOf(p);if(w!==-1)return i.addCol({type:"dmn:InputClause"},w)},addInputRight(h){let p=h&&h.input;if(!p&&!r.hasSelection())return;p=p||r.get().col;const y=o.getRoot(),w=y.cols.indexOf(p);if(w!==-1)return i.addCol({type:"dmn:InputClause"},w+1)},removeInput(h){let p=h&&h.input;!p&&!r.hasSelection()||(p=p||r.get().col,i.removeCol(p))},addOutput(){const h=o.getRoot(),p=h.businessObject,y=p.get("input"),w=p.get("output");return i.addCol({type:"dmn:OutputClause"},y.length+w.length)},addOutputLeft(h){let p=h&&h.output;if(!p&&!r.hasSelection())return;p=p||r.get().col;const y=o.getRoot(),w=y.cols.indexOf(p);if(w!==-1)return i.addCol({type:"dmn:OutputClause"},w)},addOutputRight(h){let p=h&&h.output;if(!p&&!r.hasSelection())return;p=p||r.get().col;const y=o.getRoot(),w=y.cols.indexOf(p);if(w!==-1)return i.addCol({type:"dmn:OutputClause"},w+1)},removeOutput(h){let p=h&&h.output;!p&&!r.hasSelection()||(p=p||r.get().col,i.removeCol(p))},addClause(){if(!r.hasSelection())return;const h=r.get().col;if(Mt(h,"dmn:InputClause"))return l.addInput({input:h});if(Mt(h,"dmn:OutputClause"))return l.addOutput({output:h})},addClauseLeft(){if(!r.hasSelection())return;const h=r.get().col;if(Mt(h,"dmn:InputClause"))return l.addInputLeft({input:h});if(Mt(h,"dmn:OutputClause"))return l.addOutputLeft({output:h})},addClauseRight(){if(!r.hasSelection())return;const h=r.get().col;if(Mt(h,"dmn:InputClause"))return l.addInputRight({input:h});if(Mt(h,"dmn:OutputClause"))return l.addOutputRight({output:h})},removeClause(){if(!r.hasSelection())return;const h=r.get().col;if(Mt(h,"dmn:InputClause"))return l.removeInput({input:h});if(Mt(h,"dmn:OutputClause"))return l.removeOutput({output:h})},selectCellAbove(){return s.selectCell("above")},selectCellBelow(){return s.selectCell("below")},copy({element:h}){e.copy(h)},cut({element:h}){e.cut(h)},pasteBefore({element:h}){return e.pasteBefore(h)},pasteAfter({element:h}){return e.pasteAfter(h)}};t.register(l)}}DA.$inject=["copyCutPaste","editorActions","modeling","selection","cellSelection","sheet"];const wA="is not a registered action",S3="is already registered";let EA=class{constructor(e,t,i,r){this._actions={undo(){e.undo()},redo(){e.redo()},select({cell:s}){r.select(s)},deselect(){r.deselect()},addRow({attrs:s,index:o}){i.addRow(s,o)},removeRow({row:s}){i.removeRow(s)},moveRow({row:s,index:o}){i.moveRow(s,o)},addCol({attrs:s,index:o}){i.addCol(s,o)},removeCol({col:s}){i.removeCol(s)},moveCol({col:s,index:o}){i.moveCol(s,o)}}}trigger(e,t){if(!this._actions[e])throw sb(e,wA);return this._actions[e](t)}register(e,t){if(typeof e=="string")return this._registerAction(e,t);$t(e,(i,r)=>{this._registerAction(r,i)})}_registerAction(e,t){if(this.isRegistered(e))throw sb(e,S3);this._actions[e]=t}unregister(e){if(!this.isRegistered(e))throw sb(e,wA);this._actions[e]=void 0}isRegistered(e){return!!this._actions[e]}};EA.$inject=["commandStack","eventBus","modeling","selection"];function sb(n,e){return new Error(n+" "+e)}var CA={__depends__:[T0],__init__:["editorActions"],editorActions:["type",EA]},mf={__depends__:[_0,bA,CA,T0],__init__:["decisionTableEditorActions"],decisionTableEditorActions:["type",DA]},A3={__depends__:[mf],__init__:["addRule"],addRule:["type",YS]};var T3=/["'&<>]/,O3=k3;function k3(n){var e=""+n,t=T3.exec(e);if(!t)return e;var i,r="",s=0,o=0;for(s=t.index;s<e.length;s++){switch(e.charCodeAt(s)){case 34:i="&quot;";break;case 38:i="&amp;";break;case 39:i="&#39;";break;case 60:i="&lt;";break;case 62:i="&gt;";break;default:continue}o!==s&&(r+=e.substring(o,s)),o=s+1,r+=i}return o!==s?r+e.substring(o,s):r}var _3=Gx(O3),ob={exports:{}};function P3(n,e,t){var i=n.start,r=i,o=t.length-e.length;t.length-e.length;var s=e.substring(i);t.lastIndexOf(s)===t.length-s.length&&(e=e.substring(0,e.length-s.length),t=t.substring(0,t.length-s.length));var o=F3(e,t);return o&&(o.type==="remove"?r=o.newStart:r=o.newEnd),SA(r)}ob.exports=P3;function F3(n,e){var t,i,r,s=0,o,l,h=0;for(e.length>n.length?(i=e,o=n):(i=n,o=e);s<i.length;)r=i.charAt(s),l=o.charAt(h),r!==l?(t||(t={l_start:s,s_start:h}),s++):(t&&!t.complete&&(t.l_end=s,t.s_end=h,t.complete=!0),h++,s++);if(t&&!t.complete&&(t.complete=!0,t.s_end=o.length,t.l_end=i.length),!!t)return e.length>n.length?{newStart:t.l_start,newEnd:t.l_end,type:"add"}:{newStart:t.s_start,newEnd:t.s_end,type:e.length<n.length?"remove":"replace"}}function SA(n,e){return{start:n,end:e===void 0?n:e}}ob.exports.range=SA;var M3=ob.exports,I3=Gx(M3);class gf extends br{constructor(t,i){super(t,i);$n(this,"onFocus",t=>{var i=this.props.onFocus;this.setState({focussed:!0}),typeof i=="function"&&i(t)});$n(this,"onBlur",t=>{var i=this.props.onBlur;this.setState({focussed:!1}),typeof i=="function"&&i(t)});$n(this,"onKeydown",t=>{if(t.which===13){if(t.preventDefault(),this.props.ctrlForNewline&&!L3(t)||this.props.singleLine)return;t.stopPropagation(),B3(),this.onInput(t)}});$n(this,"onInput",t=>{var i=this.props.onInput;if(typeof i=="function"){var r=ab(this.node);i(r)}});$n(this,"onKeyPress",t=>{this.onInputIEPolyfill&&this.onInputIEPolyfill(t)});$n(this,"onPaste",t=>{if(this.onInputIEPolyfill&&this.onInputIEPolyfill(t),this.props.singleLine){const i=(t.clipboardData||window.clipboardData).getData("text");document.execCommand("insertText",!1,i.replace(/\n/g," ")),t.preventDefault()}});this.state={},R3()&&(this.onInputIEPolyfill=r=>{var s=this.node.innerHTML;setTimeout(()=>{var o=this.node.innerHTML;s!==o&&this.onInput(r)},0)})}componentWillUpdate(t,i){var r=this.node,s=i.focussed&&Kx(r);this.selected=s&&{range:s,text:ab(r)}}componentDidUpdate(){var t=this.selected;if(!t)return;const i=t.range,r=t.text,s=this.node,o=ab(s),l=o!==r?I3(i,r,o):i;oA(s,l)}getClassName(){const{className:t,placeholder:i,value:r}=this.props;return[t||"","content-editable",!r&&i?"placeholder":""].join(" ")}render(t){var{label:i,value:r,placeholder:s}=t;return r=_3(r).replace(/\r?\n/g,"<br/>")+"<br/>",Re(1,"div",this.getClassName(),null,1,{"aria-label":i,role:"textbox","aria-multiline":!this.props.singleLine,tabIndex:"0",contentEditable:"true",spellcheck:"false","data-placeholder":s||"",onInput:this.onInput,onKeypress:this.onKeypress,onPaste:this.onPaste,onFocus:this.onFocus,onBlur:this.onBlur,onKeydown:this.onKeydown,dangerouslySetInnerHTML:{__html:r}},null,o=>this.node=o)}}function N3(){return document.createElement("br")}function ab(n){return n.innerText.replace(/\n$/,"")}function B3(){var n=t3(),e=n.getRangeAt(0);if(e){var t=e.cloneRange(),i=N3();t.deleteContents(),t.insertNode(i),t.setStartAfter(i),t.setEndAfter(i),sA(t)}}function R3(){var n=window.navigator.userAgent;return n.indexOf("MSIE ")>0||n.indexOf("Trident/")>0}function L3(n){return n.metaKey||n.ctrlKey}class yf extends br{constructor(t,i){super(t,i);$n(this,"onFocus",t=>{this.setState({focussed:!0});var{onFocus:i}=this.props;typeof i=="function"&&i(t)});$n(this,"onBlur",t=>{this.setState({focussed:!1});const{invalid:i}=this.state;i&&this.setState({changing:!1,invalid:!1});const{onBlur:r}=this.props;typeof r=="function"&&r(t)});this.state={changing:!1,focussed:!1};const{injector:r}=i,s=r.get("debounceInput");this.inputChanged=s(o=>{const{onChange:l}=this.props;typeof l=="function"&&l(o);const h=this.state.changing;this.setState({changing:h===o?!1:h})}),this.onInput=o=>{var l=this.props.validate||function(){},h=l(o);this.setState({changing:o,invalid:h}),h||this.inputChanged(o)}}getClassName(){var{className:t,value:i}=this.props,{changing:r,focussed:s,invalid:o}=this.state;return t+=" editable",s&&(t+=" focussed"),o&&(t+=" invalid"),!i&&!r&&(t+=" empty"),t}getDisplayValue(){var{value:t,placeholder:i}=this.props,{focussed:r,changing:s}=this.state;return typeof s=="string"&&(t=s),t||(t=r?"":i||""),t}getEditor(t={}){return jn(2,gf,{className:t.className,ctrlForNewline:this.props.ctrlForNewline,label:this.props.label,onFocus:this.onFocus,onBlur:this.onBlur,onInput:this.onInput,value:this.getDisplayValue()})}}class AA extends br{constructor(t,i){super(t,i);$n(this,"onElementsChanged",()=>{this.forceUpdate()});$n(this,"setAnnotationValue",t=>{const{row:i}=this.props;this.modeling.editAnnotation(i.businessObject,t)});Uu(this)}componentWillMount(){const{row:t}=this.props;this.changeSupport.onElementsChanged(t.id,this.onElementsChanged)}componentWillUnmount(){const{row:t}=this.props;this.changeSupport.offElementsChanged(t.id,this.onElementsChanged)}render(){const{row:t,rowIndex:i}=this.props,{description:r,id:s}=t.businessObject;return jn(2,Xm,{className:"annotation",onChange:this.setAnnotationValue,coords:`${i}:annotation`,value:r,elementId:s,"data-row-id":t.id,children:jn(2,$3,{label:this.translate("Annotation"),ctrlForNewline:!0,className:"annotation-editor",onChange:this.setAnnotationValue,value:r})})}}AA.$inject=["changeSupport","modeling","translate"];class $3 extends yf{render(){return Re(1,"div",this.getClassName(),this.getEditor(),0)}}function TA(n){n.onGetComponent("cell",({cellType:e})=>{if(e==="after-label-cells")return qx;if(e==="after-rule-cells")return AA})}TA.$inject=["components"];const j3=300;function OA(n){return function(t){if(n!==!1){var i=In(n)?n:j3;return le(t,i)}else return t}}OA.$inject=["config.debounceInput"];var gd={debounceInput:["factory",OA]},V3={__depends__:[gd],__init__:["annotationsProvider"],annotationsProvider:["type",TA]};function dp(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}const W3={position:"absolute"};class kA extends br{constructor(e,t){super(e,t),dp(this,"open",({position:i,context:r})=>{this.close(),this.setState({isOpen:!0,position:i||{x:0,y:0},context:r||{}})}),dp(this,"close",()=>{this.state.isOpen&&this.setState({context:void 0,isOpen:!1,position:{x:0,y:0}})}),dp(this,"triggerClose",()=>{this.eventBus.fire("contextMenu.close")}),this.state={isOpen:!1,position:{x:0,y:0}},Uu(this)}componentDidMount(){this.eventBus.on("contextMenu.open",this.open),this.eventBus.on("contextMenu.close",this.close)}componentWillUnmount(){this.eventBus.off("contextMenu.open",this.open),this.eventBus.off("contextMenu.close",this.close)}render(){const{isOpen:e,context:t,position:i}=this.state;if(!e)return null;const r=this.components.getComponents("context-menu",t);return r.length?jn(2,_A,{className:"context-menu no-deselect",context:t,position:i,offset:t.offset||{x:0,y:0},autoFocus:t.autoFocus!==!1,autoClose:t.autoClose!==!1,components:r,onClose:this.triggerClose}):null}}kA.$inject=["eventBus","components"];let _A=class extends br{constructor(e,t){super(e,t),dp(this,"onGlobalMouseDown",i=>{this.checkClose(i.target)}),dp(this,"onGlobalKey",i=>{var r=i.which;(r===13||r===27)&&(i.stopPropagation(),i.preventDefault(),this.close())}),dp(this,"onFocusChanged",i=>{this.checkClose(i.target)}),dp(this,"setNode",i=>{this.node=i;const{autoFocus:r}=this.props;i&&(this.updatePosition(),r&&U3(i))}),Uu(this)}close(){const{onClose:e}=this.props;vn(e)&&e()}checkClose(e){const{autoClose:t}=this.props;if(t){var i=this.node;i&&i!==e&&(i.contains(e)||this.close())}}componentDidMount(){document.addEventListener("focusin",this.onFocusChanged),document.addEventListener("keydown",this.onGlobalKey),document.addEventListener("mousedown",this.onGlobalMouseDown)}componentWillUnmount(){document.removeEventListener("focusin",this.onFocusChanged),document.removeEventListener("keydown",this.onGlobalKey),document.removeEventListener("mousedown",this.onGlobalMouseDown)}updatePosition(){const{position:e,offset:t}=this.props,{node:i}=this,r=i.getBoundingClientRect();e.width||(e.width=0),e.height||(e.height=0);const s=this.renderer.getContainer(),o=s.getBoundingClientRect();o.width>o.height?(this.node.classList.add("horizontal"),this.node.classList.remove("vertical")):(this.node.classList.add("vertical"),this.node.classList.remove("horizontal"));const{scrollLeft:l,scrollTop:h}=z3(i),p={};let y;e.align&&(y=e.align.split("-"));let w,F;(y&&y[1]||(e.x+e.width/2>o.width/2?"left":"right"))==="left"?(w=e.x-o.left-r.width+t.x+l,i.classList.remove("right"),i.classList.add("left")):(w=-o.left+e.x+e.width-t.x+l,i.classList.remove("left"),i.classList.add("right")),w=y?w:PA(w,0+l,o.width-r.width+l),p.left=w+"px",(y&&y[0]||(e.y+e.height/2>o.height/2?"top":"bottom"))==="top"?(F=e.y-o.top-r.height+t.y+h,i.classList.remove("bottom"),i.classList.add("top")):(F=-o.top+e.y-t.y+h,i.classList.remove("top"),i.classList.add("bottom")),F=y?F:PA(F,0+h,o.height-r.height+h),p.top=F+"px",p.overflowY="auto",p.maxHeight=o.height-F+h+"px",ee(this.node.style,W3,p)}render(){const{context:e,components:t,className:i}=this.props;return Re(1,"div",i,t.map((r,s)=>jn(2,r,{context:e},s)),0,{onContextMenu:r=>r.preventDefault()},null,this.setNode)}};_A.$inject=["renderer"];function PA(n,e,t){return Math.max(e,Math.min(t,n))}const H3=`
  input[type=text],
  input[type=number],
  input[type=button],
  input[type=submit],
  [contenteditable],
  [tabindex],
  a[href],
  textarea,
  button
`;function U3(n){var e=xs(H3,n);e&&(e.focus(),e.selectionStart&&e.type==="text"?e.selectionStart=1e5:"contentEditable"in e&&oA(e,{start:1e5,end:1e5}))}function z3(n){const e=ti(n,".tjs-container");if(!e)return{scrollTop:0,scrollLeft:0};const{scrollLeft:t,scrollTop:i}=e;return{scrollTop:i,scrollLeft:t}}let FA=class{constructor(e,t,i){this._eventBus=t,e.onGetComponent("table.before",()=>kA)}open(e,t){this._eventBus.fire("contextMenu.open",{position:e,context:t})}close(){this._eventBus.fire("contextMenu.close")}};FA.$inject=["components","eventBus","renderer"];var yd={__init__:["contextMenu"],contextMenu:["type",FA]};function pp(n){return n.altKey?!1:n.ctrlKey||n.metaKey}function fp(n){return n.shiftKey}class MA{constructor(e,t,i,r,s,o,l){$n(this,"_clearClipboard",()=>{this._clipboard.clear()});$n(this,"_registerBindings",()=>{[(r,s)=>{if(pp(s)&&r===67){const o=this._getSelectedCell();return o?(fp(s)?this._editorActions.trigger("copy",{element:o.col}):this._editorActions.trigger("copy",{element:o.row}),!0):void 0}},(r,s)=>{if(pp(s)&&r===88){const o=this._getSelectedCell();return o?(fp(s)?this._editorActions.trigger("cut",{element:o.col}):this._editorActions.trigger("cut",{element:o.row}),!0):void 0}},(r,s)=>{let o;if(pp(s)&&r===86){const l=this._getSelectedCell();if(!l)return;fp(s)?(o=this._editorActions.trigger("pasteAfter",{element:l.col}),o&&this._cellSelection.selectCell("right")):(o=this._editorActions.trigger("pasteAfter",{element:l.row}),o&&this._cellSelection.selectCell("below"))}return typeof o!="undefined"}].forEach(r=>{this._keyboard.addListener(r)})});this._clipboard=i,this._cellSelection=r,this._elementRegistry=s,this._editorActions=o,this._keyboard=e.get("keyboard",!1),this._renderer=l,this._keyboard&&(t.on("keyboard.init",this._registerBindings),t.on("keyboard.bind",()=>{zn.bind(document,"copy",this._clearClipboard,!0),zn.bind(document,"cut",this._clearClipboard,!0)}),t.on("keyboard.unbind",()=>{zn.unbind(document,"copy",this._clearClipboard,!0),zn.unbind(document,"cut",this._clearClipboard,!0)}))}_getSelectedCell(){const e=this._cellSelection.getCellSelection();if(!e)return;const t=this._elementRegistry.get(e);if(!t)return;const i=this._renderer.getContainer(),r=ff(e,i),s=cA(r);if(document.activeElement!==s)return;const o=Kx(r);if(!(o&&o.start!==o.end))return t}}MA.$inject=["injector","eventBus","clipboard","cellSelection","elementRegistry","editorActions","renderer"];var q3={__depends__:[dA,_0],__init__:["copyCutPasteKeyBindings"],copyCutPasteKeyBindings:["type",MA]};class IA extends br{constructor(t,i){super(t,i);$n(this,"onClick",t=>{this.editorActions.trigger("addInput")});Uu(this)}render(){return Re(1,"th","input-cell create-inputs header actionable",[this.translate("Input"),bo(" "),Re(1,"span","add-input dmn-icon-plus action-icon",null,1,{title:this.translate("Add input")})],0,{onClick:this.onClick,title:this.translate("Add input")})}}IA.$inject=["editorActions","translate"];class NA extends br{constructor(t,i){super(t,i);$n(this,"onClick",t=>{this.editorActions.trigger("addInput")});Uu(this)}render(){return Re(1,"td","input-cell create-inputs",bo("-"),2,{onClick:this.onClick,title:this.translate("Add input")})}}NA.$inject=["editorActions","translate"];const Q3=500;class BA{constructor(e,t){e.onGetComponent("cell",Q3,({cellType:i})=>{const{businessObject:r}=t.getRoot();if(!(r.input&&r.input.length)){if(i==="before-label-cells")return IA;if(i==="before-rule-cells")return NA}})}}BA.$inject=["components","sheet"];var X3={__depends__:[mf],__init__:["createInputsProvider"],createInputsProvider:["type",BA]};const Y3=["string","boolean","number","date","time","dateTime","dayTimeDuration","yearMonthDuration","Any"];class lb{constructor(e){this._dataTypes=e||Y3}getAll(){return this._dataTypes}}lb.$inject=["config.dataTypes"];var P0={__init__:["dataTypes"],dataTypes:["type",lb]};class RA{constructor(e,t,i,r,s,o,l,h,p,y,w){this._contextMenu=t,this._clipboard=i,this._editorActions=r,this._elementRegistry=o,this._eventBus=s,this._modeling=l,this._selection=h,this._sheet=p,this._rules=y,this._translate=w,this._getEntries=this._getEntries.bind(this),e.onGetComponent("context-menu",(F={})=>{if(F.contextMenuType&&F.contextMenuType==="context-menu"){const j=this._getEntries(F),Q=this._elementRegistry.get(F.id),he=G3(Q)&&e.getComponents("context-menu-cell-additional",F);if(he&&he.length){const ye=Re(1,"div","context-menu-group context-menu-group-cell",he,0);return()=>Re(1,"div","context-menu-flex",(j||[]).concat(ye),0)}else return()=>Re(1,"div","context-menu-flex",j||[],0)}}),s.on("cell.contextmenu",({event:F,id:j,node:Q})=>{F.preventDefault(),t.open({x:F.pageX,y:F.pageY},{contextMenuType:"context-menu",event:F,id:j})})}_getEntries(e){const t={addRuleAbove:h=>{const p=h.cells.map(w=>w.id).indexOf(e.id),y=this._editorActions.trigger("addRuleAbove",{rule:h});y.cells[p]?this._selection.select(y.cells[p]):this._selection.select(y.cells[0]),this._contextMenu.close()},addRuleBelow:h=>{const p=h.cells.map(w=>w.id).indexOf(e.id),y=this._editorActions.trigger("addRuleBelow",{rule:h});y.cells[p]?this._selection.select(y.cells[p]):this._selection.select(y.cells[0]),this._contextMenu.close()},removeRule:h=>{this._editorActions.trigger("removeRule",{rule:h}),this._contextMenu.close()},addInputLeft:h=>{this._editorActions.trigger("addInputLeft",{input:h}),this._contextMenu.close()},addInputRight:h=>{this._editorActions.trigger("addInputRight",{input:h}),this._contextMenu.close()},removeInput:h=>{this._editorActions.trigger("removeInput",{input:h}),this._contextMenu.close()},addOutputLeft:h=>{this._editorActions.trigger("addOutputLeft",{output:h}),this._contextMenu.close()},addOutputRight:h=>{this._editorActions.trigger("addOutputRight",{output:h}),this._contextMenu.close()},removeOutput:h=>{this._editorActions.trigger("removeOutput",{output:h}),this._contextMenu.close()},copy:h=>{this._editorActions.trigger("copy",{element:h}),this._contextMenu.close()},cut:h=>{this._editorActions.trigger("cut",{element:h}),this._contextMenu.close()},pasteBefore:h=>{this._editorActions.trigger("pasteBefore",{element:h}),this._contextMenu.close()},pasteAfter:h=>{this._editorActions.trigger("pasteAfter",{element:h}),this._contextMenu.close()}},i=e&&e.id;if(!i)return null;const r=this._elementRegistry.get(i);if(!r)return null;const s=this._clipboard.get()||{},o=[],l=r.row||r;if(Mt(l,"dmn:DecisionRule")){const h=this._rules.allowed("paste",{data:s.elements,target:l});o.push(Re(1,"div","context-menu-group",[Re(1,"div","context-menu-group-entry context-menu-entry-copy-rule",this._translate("Copy rule"),0,{onClick:()=>t.copy(l)}),Re(1,"div","context-menu-group-entry context-menu-entry-cut-rule",this._translate("Cut rule"),0,{onClick:()=>t.cut(l)}),Re(1,"div",`context-menu-group-entry ${h?"":"disabled"} context-menu-entry-paste-rule-above`,this._translate("Paste rule above"),0,{onClick:()=>t.pasteBefore(l)}),Re(1,"div",`context-menu-group-entry ${h?"":"disabled"} context-menu-entry-paste-rule-below`,this._translate("Paste rule below"),0,{onClick:()=>t.pasteAfter(l)})],4),Re(1,"div","context-menu-group",[Re(1,"div","context-menu-group-entry context-menu-entry-add-rule-above",this._translate("Add rule above"),0,{onClick:()=>t.addRuleAbove(l)}),Re(1,"div","context-menu-group-entry context-menu-entry-add-rule-below",this._translate("Add rule below"),0,{onClick:()=>t.addRuleBelow(l)}),Re(1,"div","context-menu-group-entry context-menu-entry-remove-rule",this._translate("Remove rule"),0,{onClick:()=>t.removeRule(l)})],4))}else if(Mt(r,"dmn:InputClause")){const h=Mt(r,"dmn:InputClause")?r:r.col,p=this._rules.allowed("col.remove",{col:r.col||r}),y=this._rules.allowed("paste",{data:s.elements,target:r.col||r});o.push(Re(1,"div","context-menu-group",[Re(1,"div","context-menu-group-entry context-menu-entry-copy-input",this._translate("Copy input column"),0,{onClick:()=>t.copy(h)}),Re(1,"div",`context-menu-group-entry ${p?"":"disabled"} context-menu-entry-cut-input`,this._translate("Cut input column"),0,{onClick:()=>t.cut(h)}),Re(1,"div",`context-menu-group-entry ${y?"":"disabled"} context-menu-entry-paste-input-left`,this._translate("Paste input column left"),0,{onClick:()=>t.pasteBefore(h)}),Re(1,"div",`context-menu-group-entry ${y?"":"disabled"} context-menu-entry-paste-input-right`,this._translate("Paste input column right"),0,{onClick:()=>t.pasteAfter(h)})],4),Re(1,"div","context-menu-group",[Re(1,"div","context-menu-group-entry context-menu-entry-add-input-left",this._translate("Add input column left"),0,{onClick:()=>t.addInputLeft(h)}),Re(1,"div","context-menu-group-entry context-menu-entry-add-input-right",this._translate("Add input column right"),0,{onClick:()=>t.addInputRight(h)}),Re(1,"div",`context-menu-group-entry ${p?"":"disabled"} context-menu-entry-remove-input`,this._translate("Remove input column"),0,{onClick:()=>t.removeInput(h)})],4))}else if(Mt(r,"dmn:OutputClause")||Mt(r.col,"dmn:OutputClause")){const h=Mt(r,"dmn:OutputClause")?r:r.col,p=this._rules.allowed("col.remove",{col:r.col||r}),y=this._rules.allowed("paste",{data:s.elements,target:r.col||r});o.push(Re(1,"div","context-menu-group",[Re(1,"div","context-menu-group-entry context-menu-entry-copy-output",this._translate("Copy output column"),0,{onClick:()=>t.copy(h)}),Re(1,"div",`context-menu-group-entry ${p?"":"disabled"} context-menu-entry-cut-output`,this._translate("Cut output column"),0,{onClick:()=>t.cut(h)}),Re(1,"div",`context-menu-group-entry ${y?"":"disabled"} context-menu-entry-paste-output-left`,this._translate("Paste output column left"),0,{onClick:()=>t.pasteBefore(h)}),Re(1,"div",`context-menu-group-entry ${y?"":"disabled"} context-menu-entry-paste-output-right`,this._translate("Paste output column right"),0,{onClick:()=>t.pasteAfter(h)})],4),Re(1,"div","context-menu-group",[Re(1,"div","context-menu-group-entry context-menu-entry-add-output-left",this._translate("Add output column left"),0,{onClick:()=>t.addOutputLeft(h)}),Re(1,"div","context-menu-group-entry context-menu-entry-add-output-right",this._translate("Add output column right"),0,{onClick:()=>t.addOutputRight(h)}),Re(1,"div",`context-menu-group-entry ${p?"":"disabled"} context-menu-entry-remove-output`,this._translate("Remove output column"),0,{onClick:()=>t.removeOutput(h)})],4))}return o}}RA.$inject=["components","contextMenu","clipboard","editorActions","eventBus","elementRegistry","modeling","selection","sheet","rules","translate"];function G3(n){return n instanceof C0}const K3=["row.add","row.remove","col.add","col.remove"];class LA{constructor(e,t){t.on("commandStack.executed",({command:i})=>{K3.indexOf(i)!==-1&&e.close()}),t.on("commandStack.reverted",()=>{e.close()})}}LA.$inject=["contextMenu","eventBus"];var Z3={__depends__:[mf,yd,tb],__init__:["decisionTableContextMenu","contextMenuCloseBehavior"],decisionTableContextMenu:["type",RA],contextMenuCloseBehavior:["type",LA]};class J3 extends br{constructor(t,i){super(t,i);$n(this,"onClick",t=>{const{output:i}=this.props;this._eventBus.fire("output.edit",{event:t,output:i})});$n(this,"onContextmenu",t=>{const{id:i}=this.props.output;this._eventBus.fire("cell.contextmenu",{event:t,id:i})});$n(this,"onElementsChanged",()=>{this.forceUpdate()});hp(this,df),this._translate=i.injector.get("translate")}componentWillMount(){const{injector:t}=this.context;this._changeSupport=this.context.changeSupport,this._eventBus=t.get("eventBus"),this._elementRegistry=t.get("elementRegistry");const{output:i}=this.props;this._changeSupport.onElementsChanged(i.id,this.onElementsChanged)}componentWillUnmount(){const{output:t}=this.props;this._changeSupport.offElementsChanged(t.id,this.onElementsChanged)}render(){const{output:t,index:i,outputsLength:r}=this.props,{label:s,name:o,outputValues:l,typeRef:h}=t,p=t.width?t.width+"px":"192px";return Re(1,"th","output-cell output-editor",[this.slotFills({type:"cell-inner",context:{cellType:"output-cell",col:this._elementRegistry.get(t.id),index:i,outputsLength:r},col:t}),Re(1,"div","clause",i===0?this._translate("Then"):this._translate("And"),0),s?Re(1,"div","output-label",s,0,{title:this._translate("Output label: ")+s}):Re(1,"div","output-name",o,0,{title:this._translate("Output name: ")+o}),Re(1,"div","output-variable",l&&l.text||this._translate(h||""),0,{title:l&&l.text?this._translate("Output values"):this._translate("Output type")})],0,{"data-col-id":t.id,onDblClick:this.onClick,onContextmenu:this.onContextmenu,style:{width:p}})}}class Hh extends br{constructor(t,i){super(t,i);$n(this,"onInput",t=>{const{onInput:i}=this.props;typeof i=="function"&&i(t.target.value)});$n(this,"onKeyDown",t=>{const{onKeyDown:i}=this.props;typeof i=="function"&&i(t)});$n(this,"onKeyUp",t=>{const{onKeyUp:i}=this.props;typeof i=="function"&&i(t)})}render(){const{className:t,label:i,id:r,placeholder:s,type:o,value:l}=this.props;return Re(64,"input",[t||"","dms-input"].join(" "),null,1,{"aria-label":i,placeholder:s||"",onInput:this.onInput,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,spellcheck:"false",type:o||"text",value:l,id:r})}}class eL extends br{constructor(e,t){super(e,t),this.translate=t.injector?t.injector.get("translate"):tL,this.setName=i=>{i=i||void 0,this.handleChange({name:i})},this.setLabel=i=>{i=i||void 0,this.handleChange({label:i})}}handleChange(e){var{onChange:t}=this.props;typeof t=="function"&&t(e)}render(){const{name:e,label:t}=this.props;return Re(1,"div","context-menu-container ref-output-editor output-edit",[Re(1,"div","dms-form-control",jn(2,gf,{label:this.translate("Output label"),className:"dms-output-label",value:t||"",placeholder:this.translate("Output"),singleLine:!0,onInput:this.setLabel}),2),Re(1,"div","dms-form-control",[Re(1,"label","dms-label",this.translate("Output name"),0),jn(2,Hh,{label:this.translate("Output name"),className:"ref-output-name",value:e||"",onInput:this.setName})],4)],4)}}function tL(n){return n}class $A extends br{constructor(t,i){super(t,i);$n(this,"persistChanges",()=>{const{output:t}=this.props.context,{unsaved:i}=this.state;i&&(this.modeling.updateProperties(t,i),this.setState({unsaved:!1}))});$n(this,"handleChange",t=>{this.setState({unsaved:Jt(Jt({},this.state.unsaved),t)},this.persistChanges)});this.state={},Uu(this),this.persistChanges=this.debounceInput(this.persistChanges)}getValue(t){const{output:i}=this.props.context,{unsaved:r}=this.state;return r&&t in r?r[t]:i.get(t)}render(){return jn(2,eL,{name:this.getValue("name"),label:this.getValue("label"),onChange:this.handleChange})}}$A.$inject=["debounceInput","modeling"];class jA{constructor(e,t,i,r){e.onGetComponent("cell",({cellType:s})=>{if(s==="output-header")return J3}),e.onGetComponent("context-menu",(s={})=>{if(s.contextMenuType==="output-edit")return $A}),i.on("output.edit",({event:s,output:o})=>{const{target:l}=s,h=ti(l,"th",!0),{left:p,top:y}=h.getBoundingClientRect(),w=nL(h);t.open({x:p,y,align:"bottom-right"},{contextMenuType:"output-edit",output:o,offset:w})})}}jA.$inject=["components","contextMenu","eventBus","renderer"];function nL(n){if(!Yt(n,".output-cell + .output-cell"))return{x:-1,y:0}}class iL extends br{constructor(t,i){super(t,i);$n(this,"onClick",t=>{const{input:i}=this.props;this._eventBus.fire("input.edit",{event:t,input:i})});$n(this,"onContextmenu",t=>{const{id:i}=this.props.input;this._eventBus.fire("cell.contextmenu",{event:t,id:i})});$n(this,"onElementsChanged",()=>{this.forceUpdate()});hp(this,df),this._translate=i.injector.get("translate")}componentWillMount(){const{injector:t}=this.context;this._changeSupport=this.context.changeSupport,this._sheet=t.get("sheet"),this._eventBus=t.get("eventBus"),this._elementRegistry=t.get("elementRegistry");const i=this._sheet.getRoot(),{input:r}=this.props;this._changeSupport.onElementsChanged(i.id,this.onElementsChanged),this._changeSupport.onElementsChanged(r.id,this.onElementsChanged)}componentWillUnmount(){const t=this._sheet.getRoot(),{input:i}=this.props;this._changeSupport.offElementsChanged(t.id,this.onElementsChanged),this._changeSupport.offElementsChanged(i.id,this.onElementsChanged)}render(){const{input:t,index:i,inputsLength:r}=this.props,{inputExpression:s,inputValues:o}=t,l=t.get("label"),h=t.width?t.width+"px":"192px";return Re(1,"th","input-cell input-editor",[this.slotFills({type:"cell-inner",context:{cellType:"input-cell",col:this._elementRegistry.get(t.id),index:i,inputsLength:r},col:t}),Re(1,"div","clause",i===0?this._translate("When"):this._translate("And"),0),l?Re(1,"div","input-label",l,0,{title:this._translate("Input label: ")+l}):Re(1,"div","input-expression",s.text,0,{title:this._translate("Input expression: ")+s.text}),Re(1,"div","input-variable",o&&o.text||this._translate(s.typeRef||""),0,{title:o&&o.text?this._translate("Input values"):this._translate("Input type")})],0,{"data-col-id":t.id,onDblClick:this.onClick,onContextmenu:this.onContextmenu,style:{width:h}})}}class da{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,i){[e,t]=vf(this,e,t);let r=[];return this.decompose(0,e,r,2),i.length&&i.decompose(0,i.length,r,3),this.decompose(t,this.length,r,1),yh.from(r,this.length-(t-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=vf(this,e,t);let i=[];return this.decompose(e,t,i,0),yh.from(i,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),r=new Km(this),s=new Km(e);for(let o=t,l=t;;){if(r.next(o),s.next(o),o=0,r.lineBreak!=s.lineBreak||r.done!=s.done||r.value!=s.value)return!1;if(l+=r.value.length,r.done||l>=i)return!0}}iter(e=1){return new Km(this,e)}iterRange(e,t=this.length){return new WA(this,e,t)}iterLines(e,t){let i;if(e==null)i=this.iter();else{t==null&&(t=this.lines+1);let r=this.line(e).from;i=this.iterRange(r,Math.max(r,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new HA(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?da.empty:e.length<=32?new Gl(e):yh.from(Gl.split(e,[]))}}class Gl extends da{constructor(e,t=rL(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,i,r){for(let s=0;;s++){let o=this.text[s],l=r+o.length;if((t?i:l)>=e)return new sL(r,l,i,o);r=l+1,i++}}decompose(e,t,i,r){let s=e<=0&&t>=this.length?this:new Gl(VA(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(r&1){let o=i.pop(),l=F0(s.text,o.text.slice(),0,s.length);if(l.length<=32)i.push(new Gl(l,o.length+s.length));else{let h=l.length>>1;i.push(new Gl(l.slice(0,h)),new Gl(l.slice(h)))}}else i.push(s)}replace(e,t,i){if(!(i instanceof Gl))return super.replace(e,t,i);[e,t]=vf(this,e,t);let r=F0(this.text,F0(i.text,VA(this.text,0,e)),t),s=this.length+i.length-(t-e);return r.length<=32?new Gl(r,s):yh.from(Gl.split(r,[]),s)}sliceString(e,t=this.length,i=`
`){[e,t]=vf(this,e,t);let r="";for(let s=0,o=0;s<=t&&o<this.text.length;o++){let l=this.text[o],h=s+l.length;s>e&&o&&(r+=i),e<h&&t>s&&(r+=l.slice(Math.max(0,e-s),t-s)),s=h+1}return r}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let i=[],r=-1;for(let s of e)i.push(s),r+=s.length+1,i.length==32&&(t.push(new Gl(i,r)),i=[],r=-1);return r>-1&&t.push(new Gl(i,r)),t}}class yh extends da{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,t,i,r){for(let s=0;;s++){let o=this.children[s],l=r+o.length,h=i+o.lines-1;if((t?h:l)>=e)return o.lineInner(e,t,i,r);r=l+1,i=h+1}}decompose(e,t,i,r){for(let s=0,o=0;o<=t&&s<this.children.length;s++){let l=this.children[s],h=o+l.length;if(e<=h&&t>=o){let p=r&((o<=e?1:0)|(h>=t?2:0));o>=e&&h<=t&&!p?i.push(l):l.decompose(e-o,t-o,i,p)}o=h+1}}replace(e,t,i){if([e,t]=vf(this,e,t),i.lines<this.lines)for(let r=0,s=0;r<this.children.length;r++){let o=this.children[r],l=s+o.length;if(e>=s&&t<=l){let h=o.replace(e-s,t-s,i),p=this.lines-o.lines+h.lines;if(h.lines<p>>5-1&&h.lines>p>>5+1){let y=this.children.slice();return y[r]=h,new yh(y,this.length-(t-e)+i.length)}return super.replace(s,l,h)}s=l+1}return super.replace(e,t,i)}sliceString(e,t=this.length,i=`
`){[e,t]=vf(this,e,t);let r="";for(let s=0,o=0;s<this.children.length&&o<=t;s++){let l=this.children[s],h=o+l.length;o>e&&s&&(r+=i),e<h&&t>o&&(r+=l.sliceString(e-o,t-o,i)),o=h+1}return r}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof yh))return 0;let i=0,[r,s,o,l]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=t,s+=t){if(r==o||s==l)return i;let h=this.children[r],p=e.children[s];if(h!=p)return i+h.scanIdentical(p,t);i+=h.length+1}}static from(e,t=e.reduce((i,r)=>i+r.length+1,-1)){let i=0;for(let j of e)i+=j.lines;if(i<32){let j=[];for(let Q of e)Q.flatten(j);return new Gl(j,t)}let r=Math.max(32,i>>5),s=r<<1,o=r>>1,l=[],h=0,p=-1,y=[];function w(j){let Q;if(j.lines>s&&j instanceof yh)for(let he of j.children)w(he);else j.lines>o&&(h>o||!h)?(F(),l.push(j)):j instanceof Gl&&h&&(Q=y[y.length-1])instanceof Gl&&j.lines+Q.lines<=32?(h+=j.lines,p+=j.length+1,y[y.length-1]=new Gl(Q.text.concat(j.text),Q.length+1+j.length)):(h+j.lines>r&&F(),h+=j.lines,p+=j.length+1,y.push(j))}function F(){h!=0&&(l.push(y.length==1?y[0]:yh.from(y,p)),p=-1,h=y.length=0)}for(let j of e)w(j);return F(),l.length==1?l[0]:new yh(l,t)}}da.empty=new Gl([""],0);function rL(n){let e=-1;for(let t of n)e+=t.length+1;return e}function F0(n,e,t=0,i=1e9){for(let r=0,s=0,o=!0;s<n.length&&r<=i;s++){let l=n[s],h=r+l.length;h>=t&&(h>i&&(l=l.slice(0,i-r)),r<t&&(l=l.slice(t-r)),o?(e[e.length-1]+=l,o=!1):e.push(l)),r=h+1}return e}function VA(n,e,t){return F0(n,[""],e,t)}class Km{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof Gl?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,r=this.nodes[i],s=this.offsets[i],o=s>>1,l=r instanceof Gl?r.text.length:r.children.length;if(o==(t>0?l:0)){if(i==0)return this.done=!0,this.value="",this;t>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(t>0?0:1)){if(this.offsets[i]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(r instanceof Gl){let h=r.text[o+(t<0?-1:0)];if(this.offsets[i]+=t,h.length>Math.max(0,e))return this.value=e==0?h:t>0?h.slice(e):h.slice(0,h.length-e),this;e-=h.length}else{let h=r.children[o+(t<0?-1:0)];e>h.length?(e-=h.length,this.offsets[i]+=t):(t<0&&this.offsets[i]--,this.nodes.push(h),this.offsets.push(t>0?1:(h instanceof Gl?h.text.length:h.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class WA{constructor(e,t,i){this.value="",this.done=!1,this.cursor=new Km(e,t>i?-1:1),this.pos=t>i?e.length:0,this.from=Math.min(t,i),this.to=Math.max(t,i)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let i=t<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*t,this.value=r.length<=i?r:t<0?r.slice(r.length-i):r.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class HA{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:i,value:r}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol!="undefined"&&(da.prototype[Symbol.iterator]=function(){return this.iter()},Km.prototype[Symbol.iterator]=WA.prototype[Symbol.iterator]=HA.prototype[Symbol.iterator]=function(){return this});class sL{constructor(e,t,i,r){this.from=e,this.to=t,this.number=i,this.text=r}get length(){return this.to-this.from}}function vf(n,e,t){return e=Math.max(0,Math.min(n.length,e)),[e,Math.max(e,Math.min(n.length,t))]}let xf="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(n=>n?parseInt(n,36):1);for(let n=1;n<xf.length;n++)xf[n]+=xf[n-1];function oL(n){for(let e=1;e<xf.length;e+=2)if(xf[e]>n)return xf[e-1]<=n;return!1}function UA(n){return n>=127462&&n<=127487}const zA=8205;function dc(n,e,t=!0,i=!0){return(t?qA:aL)(n,e,i)}function qA(n,e,t){if(e==n.length)return e;e&&QA(n.charCodeAt(e))&&XA(n.charCodeAt(e-1))&&e--;let i=_c(n,e);for(e+=vh(i);e<n.length;){let r=_c(n,e);if(i==zA||r==zA||t&&oL(r))e+=vh(r),i=r;else if(UA(r)){let s=0,o=e-2;for(;o>=0&&UA(_c(n,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function aL(n,e,t){for(;e>0;){let i=qA(n,e-2,t);if(i<e)return i;e--}return 0}function QA(n){return n>=56320&&n<57344}function XA(n){return n>=55296&&n<56320}function _c(n,e){let t=n.charCodeAt(e);if(!XA(t)||e+1==n.length)return t;let i=n.charCodeAt(e+1);return QA(i)?(t-55296<<10)+(i-56320)+65536:t}function YA(n){return n<=65535?String.fromCharCode(n):(n-=65536,String.fromCharCode((n>>10)+55296,(n&1023)+56320))}function vh(n){return n<65536?1:2}const ub=/\r\n?|\n/;var zu=function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n}(zu||(zu={}));class Uh{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t+1];e+=i<0?this.sections[t]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,i=0,r=0;t<this.sections.length;){let s=this.sections[t++],o=this.sections[t++];o<0?(e(i,r,s),r+=s):r+=o,i+=s}}iterChangedRanges(e,t=!1){cb(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let i=this.sections[t++],r=this.sections[t++];r<0?e.push(i,r):e.push(r,i)}return new Uh(e)}composeDesc(e){return this.empty?e:e.empty?this:GA(this,e)}mapDesc(e,t=!1){return e.empty?this:hb(this,e,t)}mapPos(e,t=-1,i=zu.Simple){let r=0,s=0;for(let o=0;o<this.sections.length;){let l=this.sections[o++],h=this.sections[o++],p=r+l;if(h<0){if(p>e)return s+(e-r);s+=l}else{if(i!=zu.Simple&&p>=e&&(i==zu.TrackDel&&r<e&&p>e||i==zu.TrackBefore&&r<e||i==zu.TrackAfter&&p>e))return null;if(p>e||p==e&&t<0&&!l)return e==r||t<0?s:s+h;s+=h}r=p}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return s}touchesRange(e,t=e){for(let i=0,r=0;i<this.sections.length&&r<=t;){let s=this.sections[i++],o=this.sections[i++],l=r+s;if(o>=0&&r<=t&&l>=e)return r<e&&l>t?"cover":!0;r=l}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let i=this.sections[t++],r=this.sections[t++];e+=(e?" ":"")+i+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Uh(e)}static create(e){return new Uh(e)}}class Mu extends Uh{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return cb(this,(t,i,r,s,o)=>e=e.replace(r,r+(i-t),o),!1),e}mapDesc(e,t=!1){return hb(this,e,t,!0)}invert(e){let t=this.sections.slice(),i=[];for(let r=0,s=0;r<t.length;r+=2){let o=t[r],l=t[r+1];if(l>=0){t[r]=l,t[r+1]=o;let h=r>>1;for(;i.length<h;)i.push(da.empty);i.push(o?e.slice(s,s+o):da.empty)}s+=o}return new Mu(t,i)}compose(e){return this.empty?e:e.empty?this:GA(this,e,!0)}map(e,t=!1){return e.empty?this:hb(this,e,t,!0)}iterChanges(e,t=!1){cb(this,e,t)}get desc(){return Uh.create(this.sections)}filter(e){let t=[],i=[],r=[],s=new Zm(this);e:for(let o=0,l=0;;){let h=o==e.length?1e9:e[o++];for(;l<h||l==h&&s.len==0;){if(s.done)break e;let y=Math.min(s.len,h-l);rc(r,y,-1);let w=s.ins==-1?-1:s.off==0?s.ins:0;rc(t,y,w),w>0&&vd(i,t,s.text),s.forward(y),l+=y}let p=e[o++];for(;l<p;){if(s.done)break e;let y=Math.min(s.len,p-l);rc(t,y,-1),rc(r,y,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(y),l+=y}}return{changes:new Mu(t,i),filtered:Uh.create(r)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t],r=this.sections[t+1];r<0?e.push(i):r==0?e.push([i]):e.push([i].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,i){let r=[],s=[],o=0,l=null;function h(y=!1){if(!y&&!r.length)return;o<t&&rc(r,t-o,-1);let w=new Mu(r,s);l=l?l.compose(w.map(l)):w,r=[],s=[],o=0}function p(y){if(Array.isArray(y))for(let w of y)p(w);else if(y instanceof Mu){if(y.length!=t)throw new RangeError(`Mismatched change set length (got ${y.length}, expected ${t})`);h(),l=l?l.compose(y.map(l)):y}else{let{from:w,to:F=w,insert:j}=y;if(w>F||w<0||F>t)throw new RangeError(`Invalid change range ${w} to ${F} (in doc of length ${t})`);let Q=j?typeof j=="string"?da.of(j.split(i||ub)):j:da.empty,he=Q.length;if(w==F&&he==0)return;w<o&&h(),w>o&&rc(r,w-o,-1),rc(r,F-w,he),vd(s,r,Q),o=F}}return p(e),h(!l),l}static empty(e){return new Mu(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],i=[];for(let r=0;r<e.length;r++){let s=e[r];if(typeof s=="number")t.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,l)=>l&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)t.push(s[0],0);else{for(;i.length<r;)i.push(da.empty);i[r]=da.of(s.slice(1)),t.push(s[0],i[r].length)}}}return new Mu(t,i)}static createSet(e,t){return new Mu(e,t)}}function rc(n,e,t,i=!1){if(e==0&&t<=0)return;let r=n.length-2;r>=0&&t<=0&&t==n[r+1]?n[r]+=e:e==0&&n[r]==0?n[r+1]+=t:i?(n[r]+=e,n[r+1]+=t):n.push(e,t)}function vd(n,e,t){if(t.length==0)return;let i=e.length-2>>1;if(i<n.length)n[n.length-1]=n[n.length-1].append(t);else{for(;n.length<i;)n.push(da.empty);n.push(t)}}function cb(n,e,t){let i=n.inserted;for(let r=0,s=0,o=0;o<n.sections.length;){let l=n.sections[o++],h=n.sections[o++];if(h<0)r+=l,s+=l;else{let p=r,y=s,w=da.empty;for(;p+=l,y+=h,h&&i&&(w=w.append(i[o-2>>1])),!(t||o==n.sections.length||n.sections[o+1]<0);)l=n.sections[o++],h=n.sections[o++];e(r,p,s,y,w),r=p,s=y}}}function hb(n,e,t,i=!1){let r=[],s=i?[]:null,o=new Zm(n),l=new Zm(e);for(let h=-1;;)if(o.ins==-1&&l.ins==-1){let p=Math.min(o.len,l.len);rc(r,p,-1),o.forward(p),l.forward(p)}else if(l.ins>=0&&(o.ins<0||h==o.i||o.off==0&&(l.len<o.len||l.len==o.len&&!t))){let p=l.len;for(rc(r,l.ins,-1);p;){let y=Math.min(o.len,p);o.ins>=0&&h<o.i&&o.len<=y&&(rc(r,0,o.ins),s&&vd(s,r,o.text),h=o.i),o.forward(y),p-=y}l.next()}else if(o.ins>=0){let p=0,y=o.len;for(;y;)if(l.ins==-1){let w=Math.min(y,l.len);p+=w,y-=w,l.forward(w)}else if(l.ins==0&&l.len<y)y-=l.len,l.next();else break;rc(r,p,h<o.i?o.ins:0),s&&h<o.i&&vd(s,r,o.text),h=o.i,o.forward(o.len-y)}else{if(o.done&&l.done)return s?Mu.createSet(r,s):Uh.create(r);throw new Error("Mismatched change set lengths")}}function GA(n,e,t=!1){let i=[],r=t?[]:null,s=new Zm(n),o=new Zm(e);for(let l=!1;;){if(s.done&&o.done)return r?Mu.createSet(i,r):Uh.create(i);if(s.ins==0)rc(i,s.len,0,l),s.next();else if(o.len==0&&!o.done)rc(i,0,o.ins,l),r&&vd(r,i,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let h=Math.min(s.len2,o.len),p=i.length;if(s.ins==-1){let y=o.ins==-1?-1:o.off?0:o.ins;rc(i,h,y,l),r&&y&&vd(r,i,o.text)}else o.ins==-1?(rc(i,s.off?0:s.len,h,l),r&&vd(r,i,s.textBit(h))):(rc(i,s.off?0:s.len,o.off?0:o.ins,l),r&&!o.off&&vd(r,i,o.text));l=(s.ins>h||o.ins>=0&&o.len>h)&&(l||i.length>p),s.forward2(h),o.forward(h)}}}}class Zm{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?da.empty:e[t]}textBit(e){let{inserted:t}=this.set,i=this.i-2>>1;return i>=t.length&&!e?da.empty:t[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class mp{constructor(e,t,i){this.from=e,this.to=t,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let i,r;return this.empty?i=r=e.mapPos(this.from,t):(i=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),i==this.from&&r==this.to?this:new mp(i,r,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return ki.range(e,t);let i=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return ki.range(this.anchor,i)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return ki.range(e.anchor,e.head)}static create(e,t,i){return new mp(e,t,i)}}class ki{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:ki.create(this.ranges.map(i=>i.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new ki([this.main],0)}addRange(e,t=!0){return ki.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let i=this.ranges.slice();return i[t]=e,ki.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new ki(e.ranges.map(t=>mp.fromJSON(t)),e.main)}static single(e,t=e){return new ki([ki.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,r=0;r<e.length;r++){let s=e[r];if(s.empty?s.from<=i:s.from<i)return ki.normalized(e.slice(),t);i=s.to}return new ki(e,t)}static cursor(e,t=0,i,r){return mp.create(e,e,(t==0?0:t<0?8:16)|(i==null?7:Math.min(6,i))|(r!=null?r:16777215)<<6)}static range(e,t,i,r){let s=(i!=null?i:16777215)<<6|(r==null?7:Math.min(6,r));return t<e?mp.create(t,e,48|s):mp.create(e,t,(t>e?8:0)|s)}static normalized(e,t=0){let i=e[t];e.sort((r,s)=>r.from-s.from),t=e.indexOf(i);for(let r=1;r<e.length;r++){let s=e[r],o=e[r-1];if(s.empty?s.from<=o.to:s.from<o.to){let l=o.from,h=Math.max(s.to,o.to);r<=t&&t--,e.splice(--r,2,s.anchor>s.head?ki.range(h,l):ki.range(l,h))}}return new ki(e,t)}}function KA(n,e){for(let t of n.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let db=0;class $s{constructor(e,t,i,r,s){this.combine=e,this.compareInput=t,this.compare=i,this.isStatic=r,this.id=db++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new $s(e.combine||(t=>t),e.compareInput||((t,i)=>t===i),e.compare||(e.combine?(t,i)=>t===i:pb),!!e.static,e.enables)}of(e){return new M0([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new M0(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new M0(e,this,2,t)}from(e,t){return t||(t=i=>i),this.compute([e],i=>t(i.field(e)))}}function pb(n,e){return n==e||n.length==e.length&&n.every((t,i)=>t===e[i])}class M0{constructor(e,t,i,r){this.dependencies=e,this.facet=t,this.type=i,this.value=r,this.id=db++}dynamicSlot(e){var t;let i=this.value,r=this.facet.compareInput,s=this.id,o=e[s]>>1,l=this.type==2,h=!1,p=!1,y=[];for(let w of this.dependencies)w=="doc"?h=!0:w=="selection"?p=!0:((t=e[w.id])!==null&&t!==void 0?t:1)&1||y.push(e[w.id]);return{create(w){return w.values[o]=i(w),1},update(w,F){if(h&&F.docChanged||p&&(F.docChanged||F.selection)||fb(w,y)){let j=i(w);if(l?!ZA(j,w.values[o],r):!r(j,w.values[o]))return w.values[o]=j,1}return 0},reconfigure:(w,F)=>{let j,Q=F.config.address[s];if(Q!=null){let he=N0(F,Q);if(this.dependencies.every(ye=>ye instanceof $s?F.facet(ye)===w.facet(ye):ye instanceof Pc?F.field(ye,!1)==w.field(ye,!1):!0)||(l?ZA(j=i(w),he,r):r(j=i(w),he)))return w.values[o]=he,0}else j=i(w);return w.values[o]=j,1}}}}function ZA(n,e,t){if(n.length!=e.length)return!1;for(let i=0;i<n.length;i++)if(!t(n[i],e[i]))return!1;return!0}function fb(n,e){let t=!1;for(let i of e)tg(n,i)&1&&(t=!0);return t}function lL(n,e,t){let i=t.map(h=>n[h.id]),r=t.map(h=>h.type),s=i.filter(h=>!(h&1)),o=n[e.id]>>1;function l(h){let p=[];for(let y=0;y<i.length;y++){let w=N0(h,i[y]);if(r[y]==2)for(let F of w)p.push(F);else p.push(w)}return e.combine(p)}return{create(h){for(let p of i)tg(h,p);return h.values[o]=l(h),1},update(h,p){if(!fb(h,s))return 0;let y=l(h);return e.compare(y,h.values[o])?0:(h.values[o]=y,1)},reconfigure(h,p){let y=fb(h,i),w=p.config.facets[e.id],F=p.facet(e);if(w&&!y&&pb(t,w))return h.values[o]=F,0;let j=l(h);return e.compare(j,F)?(h.values[o]=F,0):(h.values[o]=j,1)}}}const JA=$s.define({static:!0});class Pc{constructor(e,t,i,r,s){this.id=e,this.createF=t,this.updateF=i,this.compareF=r,this.spec=s,this.provides=void 0}static define(e){let t=new Pc(db++,e.create,e.update,e.compare||((i,r)=>i===r),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(JA).find(i=>i.field==this);return((t==null?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:i=>(i.values[t]=this.create(i),1),update:(i,r)=>{let s=i.values[t],o=this.updateF(s,r);return this.compareF(s,o)?0:(i.values[t]=o,1)},reconfigure:(i,r)=>r.config.address[this.id]!=null?(i.values[t]=r.field(this),0):(i.values[t]=this.create(i),1)}}init(e){return[this,JA.of({field:this,create:e})]}get extension(){return this}}const gp={lowest:4,low:3,default:2,high:1,highest:0};function Jm(n){return e=>new eT(e,n)}const bf={highest:Jm(gp.highest),high:Jm(gp.high),default:Jm(gp.default),low:Jm(gp.low),lowest:Jm(gp.lowest)};class eT{constructor(e,t){this.inner=e,this.prec=t}}class eg{of(e){return new mb(this,e)}reconfigure(e){return eg.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class mb{constructor(e,t){this.compartment=e,this.inner=t}}class I0{constructor(e,t,i,r,s,o){for(this.base=e,this.compartments=t,this.dynamicSlots=i,this.address=r,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,i){let r=[],s=Object.create(null),o=new Map;for(let F of uL(e,t,o))F instanceof Pc?r.push(F):(s[F.facet.id]||(s[F.facet.id]=[])).push(F);let l=Object.create(null),h=[],p=[];for(let F of r)l[F.id]=p.length<<1,p.push(j=>F.slot(j));let y=i==null?void 0:i.config.facets;for(let F in s){let j=s[F],Q=j[0].facet,he=y&&y[F]||[];if(j.every(ye=>ye.type==0))if(l[Q.id]=h.length<<1|1,pb(he,j))h.push(i.facet(Q));else{let ye=Q.combine(j.map(Le=>Le.value));h.push(i&&Q.compare(ye,i.facet(Q))?i.facet(Q):ye)}else{for(let ye of j)ye.type==0?(l[ye.id]=h.length<<1|1,h.push(ye.value)):(l[ye.id]=p.length<<1,p.push(Le=>ye.dynamicSlot(Le)));l[Q.id]=p.length<<1,p.push(ye=>lL(ye,Q,j))}}let w=p.map(F=>F(l));return new I0(e,o,w,l,h,s)}}function uL(n,e,t){let i=[[],[],[],[],[]],r=new Map;function s(o,l){let h=r.get(o);if(h!=null){if(h<=l)return;let p=i[h].indexOf(o);p>-1&&i[h].splice(p,1),o instanceof mb&&t.delete(o.compartment)}if(r.set(o,l),Array.isArray(o))for(let p of o)s(p,l);else if(o instanceof mb){if(t.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let p=e.get(o.compartment)||o.inner;t.set(o.compartment,p),s(p,l)}else if(o instanceof eT)s(o.inner,o.prec);else if(o instanceof Pc)i[l].push(o),o.provides&&s(o.provides,l);else if(o instanceof M0)i[l].push(o),o.facet.extensions&&s(o.facet.extensions,gp.default);else{let p=o.extension;if(!p)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(p,l)}}return s(n,gp.default),i.reduce((o,l)=>o.concat(l))}function tg(n,e){if(e&1)return 2;let t=e>>1,i=n.status[t];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;n.status[t]=4;let r=n.computeSlot(n,n.config.dynamicSlots[t]);return n.status[t]=2|r}function N0(n,e){return e&1?n.config.staticValues[e>>1]:n.values[e>>1]}const tT=$s.define(),gb=$s.define({combine:n=>n.some(e=>e),static:!0}),nT=$s.define({combine:n=>n.length?n[0]:void 0,static:!0}),iT=$s.define(),rT=$s.define(),sT=$s.define(),oT=$s.define({combine:n=>n.length?n[0]:!1});class yp{constructor(e,t){this.type=e,this.value=t}static define(){return new cL}}class cL{of(e){return new yp(this,e)}}class hL{constructor(e){this.map=e}of(e){return new pa(this,e)}}class pa{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new pa(this.type,t)}is(e){return this.type==e}static define(e={}){return new hL(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let i=[];for(let r of e){let s=r.map(t);s&&i.push(s)}return i}}pa.reconfigure=pa.define(),pa.appendConfig=pa.define();class qu{constructor(e,t,i,r,s,o){this.startState=e,this.changes=t,this.selection=i,this.effects=r,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,i&&KA(i,t.newLength),s.some(l=>l.type==qu.time)||(this.annotations=s.concat(qu.time.of(Date.now())))}static create(e,t,i,r,s,o){return new qu(e,t,i,r,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(qu.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}qu.time=yp.define(),qu.userEvent=yp.define(),qu.addToHistory=yp.define(),qu.remote=yp.define();function dL(n,e){let t=[];for(let i=0,r=0;;){let s,o;if(i<n.length&&(r==e.length||e[r]>=n[i]))s=n[i++],o=n[i++];else if(r<e.length)s=e[r++],o=e[r++];else return t;!t.length||t[t.length-1]<s?t.push(s,o):t[t.length-1]<o&&(t[t.length-1]=o)}}function aT(n,e,t){var i;let r,s,o;return t?(r=e.changes,s=Mu.empty(e.changes.length),o=n.changes.compose(e.changes)):(r=e.changes.map(n.changes),s=n.changes.mapDesc(e.changes,!0),o=n.changes.compose(r)),{changes:o,selection:e.selection?e.selection.map(s):(i=n.selection)===null||i===void 0?void 0:i.map(r),effects:pa.mapEffects(n.effects,r).concat(pa.mapEffects(e.effects,s)),annotations:n.annotations.length?n.annotations.concat(e.annotations):e.annotations,scrollIntoView:n.scrollIntoView||e.scrollIntoView}}function yb(n,e,t){let i=e.selection,r=Df(e.annotations);return e.userEvent&&(r=r.concat(qu.userEvent.of(e.userEvent))),{changes:e.changes instanceof Mu?e.changes:Mu.of(e.changes||[],t,n.facet(nT)),selection:i&&(i instanceof ki?i:ki.single(i.anchor,i.head)),effects:Df(e.effects),annotations:r,scrollIntoView:!!e.scrollIntoView}}function lT(n,e,t){let i=yb(n,e.length?e[0]:{},n.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(t=!1);let o=!!e[s].sequential;i=aT(i,yb(n,e[s],o?i.changes.newLength:n.doc.length),o)}let r=qu.create(n,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return fL(t?pL(r):r)}function pL(n){let e=n.startState,t=!0;for(let r of e.facet(iT)){let s=r(n);if(s===!1){t=!1;break}Array.isArray(s)&&(t=t===!0?s:dL(t,s))}if(t!==!0){let r,s;if(t===!1)s=n.changes.invertedDesc,r=Mu.empty(e.doc.length);else{let o=n.changes.filter(t);r=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}n=qu.create(e,r,n.selection&&n.selection.map(s),pa.mapEffects(n.effects,s),n.annotations,n.scrollIntoView)}let i=e.facet(rT);for(let r=i.length-1;r>=0;r--){let s=i[r](n);s instanceof qu?n=s:Array.isArray(s)&&s.length==1&&s[0]instanceof qu?n=s[0]:n=lT(e,Df(s),!1)}return n}function fL(n){let e=n.startState,t=e.facet(sT),i=n;for(let r=t.length-1;r>=0;r--){let s=t[r](n);s&&Object.keys(s).length&&(i=aT(i,yb(e,s,n.changes.newLength),!0))}return i==n?n:qu.create(e,n.changes,n.selection,i.effects,i.annotations,i.scrollIntoView)}const mL=[];function Df(n){return n==null?mL:Array.isArray(n)?n:[n]}var Vc=function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n}(Vc||(Vc={}));const gL=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let vb;try{vb=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(n){}function yL(n){if(vb)return vb.test(n);for(let e=0;e<n.length;e++){let t=n[e];if(/\w/.test(t)||t>"\x80"&&(t.toUpperCase()!=t.toLowerCase()||gL.test(t)))return!0}return!1}function vL(n){return e=>{if(!/\S/.test(e))return Vc.Space;if(yL(e))return Vc.Word;for(let t=0;t<n.length;t++)if(e.indexOf(n[t])>-1)return Vc.Word;return Vc.Other}}class ba{constructor(e,t,i,r,s,o){this.config=e,this.doc=t,this.selection=i,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let l=0;l<this.config.dynamicSlots.length;l++)tg(this,l<<1);this.computeSlot=null}field(e,t=!0){let i=this.config.address[e.id];if(i==null){if(t)throw new RangeError("Field is not present in this state");return}return tg(this,i),N0(this,i)}update(...e){return lT(this,e,!0)}applyTransaction(e){let t=this.config,{base:i,compartments:r}=t;for(let l of e.effects)l.is(eg.reconfigure)?(t&&(r=new Map,t.compartments.forEach((h,p)=>r.set(p,h)),t=null),r.set(l.value.compartment,l.value.extension)):l.is(pa.reconfigure)?(t=null,i=l.value):l.is(pa.appendConfig)&&(t=null,i=Df(i).concat(l.value));let s;t?s=e.startState.values.slice():(t=I0.resolve(i,r,this),s=new ba(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(h,p)=>p.reconfigure(h,this),null).values);let o=e.startState.facet(gb)?e.newSelection:e.newSelection.asSingle();new ba(t,e.newDoc,o,s,(l,h)=>h.update(l,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:ki.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,i=e(t.ranges[0]),r=this.changes(i.changes),s=[i.range],o=Df(i.effects);for(let l=1;l<t.ranges.length;l++){let h=e(t.ranges[l]),p=this.changes(h.changes),y=p.map(r);for(let F=0;F<l;F++)s[F]=s[F].map(y);let w=r.mapDesc(p,!0);s.push(h.range.map(w)),r=r.compose(y),o=pa.mapEffects(o,y).concat(pa.mapEffects(Df(h.effects),w))}return{changes:r,selection:ki.create(s,t.mainIndex),effects:o}}changes(e=[]){return e instanceof Mu?e:Mu.of(e,this.doc.length,this.facet(ba.lineSeparator))}toText(e){return da.of(e.split(this.facet(ba.lineSeparator)||ub))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(tg(this,t),N0(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let r=e[i];r instanceof Pc&&this.config.address[r.id]!=null&&(t[i]=r.spec.toJSON(this.field(e[i]),this))}return t}static fromJSON(e,t={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(i){for(let s in i)if(Object.prototype.hasOwnProperty.call(e,s)){let o=i[s],l=e[s];r.push(o.init(h=>o.spec.fromJSON(l,h)))}}return ba.create({doc:e.doc,selection:ki.fromJSON(e.selection),extensions:t.extensions?r.concat([t.extensions]):r})}static create(e={}){let t=I0.resolve(e.extensions||[],new Map),i=e.doc instanceof da?e.doc:da.of((e.doc||"").split(t.staticFacet(ba.lineSeparator)||ub)),r=e.selection?e.selection instanceof ki?e.selection:ki.single(e.selection.anchor,e.selection.head):ki.single(0);return KA(r,i.length),t.staticFacet(gb)||(r=r.asSingle()),new ba(t,i,r,t.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(ba.tabSize)}get lineBreak(){return this.facet(ba.lineSeparator)||`
`}get readOnly(){return this.facet(oT)}phrase(e,...t){for(let i of this.facet(ba.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(i,r)=>{if(r=="$")return"$";let s=+(r||1);return!s||s>t.length?i:t[s-1]})),e}languageDataAt(e,t,i=-1){let r=[];for(let s of this.facet(tT))for(let o of s(this,t,i))Object.prototype.hasOwnProperty.call(o,e)&&r.push(o[e]);return r}charCategorizer(e){return vL(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:i,length:r}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-i,l=e-i;for(;o>0;){let h=dc(t,o,!1);if(s(t.slice(h,o))!=Vc.Word)break;o=h}for(;l<r;){let h=dc(t,l);if(s(t.slice(l,h))!=Vc.Word)break;l=h}return o==l?null:ki.range(o+i,l+i)}}ba.allowMultipleSelections=gb,ba.tabSize=$s.define({combine:n=>n.length?n[0]:4}),ba.lineSeparator=nT,ba.readOnly=oT,ba.phrases=$s.define({compare(n,e){let t=Object.keys(n),i=Object.keys(e);return t.length==i.length&&t.every(r=>n[r]==e[r])}}),ba.languageData=tT,ba.changeFilter=iT,ba.transactionFilter=rT,ba.transactionExtender=sT,eg.reconfigure=pa.define();function xb(n,e,t={}){let i={};for(let r of n)for(let s of Object.keys(r)){let o=r[s],l=i[s];if(l===void 0)i[s]=o;else if(!(l===o||o===void 0))if(Object.hasOwnProperty.call(t,s))i[s]=t[s](l,o);else throw new Error("Config merge conflict for field "+s)}for(let r in e)i[r]===void 0&&(i[r]=e[r]);return i}class vp{eq(e){return this==e}range(e,t=e){return bb.create(e,t,this)}}vp.prototype.startSide=vp.prototype.endSide=0,vp.prototype.point=!1,vp.prototype.mapMode=zu.TrackDel;let bb=class DF{constructor(e,t,i){this.from=e,this.to=t,this.value=i}static create(e,t,i){return new DF(e,t,i)}};function Db(n,e){return n.from-e.from||n.value.startSide-e.value.startSide}class wb{constructor(e,t,i,r){this.from=e,this.to=t,this.value=i,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,t,i,r=0){let s=i?this.to:this.from;for(let o=r,l=s.length;;){if(o==l)return o;let h=o+l>>1,p=s[h]-e||(i?this.value[h].endSide:this.value[h].startSide)-t;if(h==o)return p>=0?o:l;p>=0?l=h:o=h+1}}between(e,t,i,r){for(let s=this.findIndex(t,-1e9,!0),o=this.findIndex(i,1e9,!1,s);s<o;s++)if(r(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,t){let i=[],r=[],s=[],o=-1,l=-1;for(let h=0;h<this.value.length;h++){let p=this.value[h],y=this.from[h]+e,w=this.to[h]+e,F,j;if(y==w){let Q=t.mapPos(y,p.startSide,p.mapMode);if(Q==null||(F=j=Q,p.startSide!=p.endSide&&(j=t.mapPos(y,p.endSide),j<F)))continue}else if(F=t.mapPos(y,p.startSide),j=t.mapPos(w,p.endSide),F>j||F==j&&p.startSide>0&&p.endSide<=0)continue;(j-F||p.endSide-p.startSide)<0||(o<0&&(o=F),p.point&&(l=Math.max(l,j-F)),i.push(p),r.push(F-o),s.push(j-o))}return{mapped:i.length?new wb(r,s,i,l):null,pos:o}}}class nl{constructor(e,t,i,r){this.chunkPos=e,this.chunk=t,this.nextLayer=i,this.maxPoint=r}static create(e,t,i,r){return new nl(e,t,i,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:i=!1,filterFrom:r=0,filterTo:s=this.length}=e,o=e.filter;if(t.length==0&&!o)return this;if(i&&(t=t.slice().sort(Db)),this.isEmpty)return t.length?nl.of(t):this;let l=new cT(this,null,-1).goto(0),h=0,p=[],y=new ng;for(;l.value||h<t.length;)if(h<t.length&&(l.from-t[h].from||l.startSide-t[h].value.startSide)>=0){let w=t[h++];y.addInner(w.from,w.to,w.value)||p.push(w)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(h==t.length||this.chunkEnd(l.chunkIndex)<t[h].from)&&(!o||r>this.chunkEnd(l.chunkIndex)||s<this.chunkPos[l.chunkIndex])&&y.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!o||r>l.to||s<l.from||o(l.from,l.to,l.value))&&(y.addInner(l.from,l.to,l.value)||p.push(bb.create(l.from,l.to,l.value))),l.next());return y.finishInner(this.nextLayer.isEmpty&&!p.length?nl.empty:this.nextLayer.update({add:p,filter:o,filterFrom:r,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],i=[],r=-1;for(let o=0;o<this.chunk.length;o++){let l=this.chunkPos[o],h=this.chunk[o],p=e.touchesRange(l,l+h.length);if(p===!1)r=Math.max(r,h.maxPoint),t.push(h),i.push(e.mapPos(l));else if(p===!0){let{mapped:y,pos:w}=h.map(l,e);y&&(r=Math.max(r,y.maxPoint),t.push(y),i.push(w))}}let s=this.nextLayer.map(e);return t.length==0?s:new nl(i,t,s||nl.empty,r)}between(e,t,i){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let s=this.chunkPos[r],o=this.chunk[r];if(t>=s&&e<=s+o.length&&o.between(s,e-s,t-s,i)===!1)return}this.nextLayer.between(e,t,i)}}iter(e=0){return ig.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return ig.from(e).goto(t)}static compare(e,t,i,r,s=-1){let o=e.filter(w=>w.maxPoint>0||!w.isEmpty&&w.maxPoint>=s),l=t.filter(w=>w.maxPoint>0||!w.isEmpty&&w.maxPoint>=s),h=uT(o,l,i),p=new rg(o,h,s),y=new rg(l,h,s);i.iterGaps((w,F,j)=>hT(p,w,y,F,j,r)),i.empty&&i.length==0&&hT(p,0,y,0,0,r)}static eq(e,t,i=0,r){r==null&&(r=1e9-1);let s=e.filter(y=>!y.isEmpty&&t.indexOf(y)<0),o=t.filter(y=>!y.isEmpty&&e.indexOf(y)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let l=uT(s,o),h=new rg(s,l,0).goto(i),p=new rg(o,l,0).goto(i);for(;;){if(h.to!=p.to||!Cb(h.active,p.active)||h.point&&(!p.point||!h.point.eq(p.point)))return!1;if(h.to>r)return!0;h.next(),p.next()}}static spans(e,t,i,r,s=-1){let o=new rg(e,null,s).goto(t),l=t,h=o.openStart;for(;;){let p=Math.min(o.to,i);if(o.point){let y=o.activeForPoint(o.to),w=o.pointFrom<t?y.length+1:o.point.startSide<0?y.length:Math.min(y.length,h);r.point(l,p,o.point,y,w,o.pointRank),h=Math.min(o.openEnd(p),y.length)}else p>l&&(r.span(l,p,o.active,h),h=o.openEnd(p));if(o.to>i)return h+(o.point&&o.to>i?1:0);l=o.to,o.next()}}static of(e,t=!1){let i=new ng;for(let r of e instanceof bb?[e]:t?xL(e):e)i.add(r.from,r.to,r.value);return i.finish()}static join(e){if(!e.length)return nl.empty;let t=e[e.length-1];for(let i=e.length-2;i>=0;i--)for(let r=e[i];r!=nl.empty;r=r.nextLayer)t=new nl(r.chunkPos,r.chunk,t,Math.max(r.maxPoint,t.maxPoint));return t}}nl.empty=new nl([],[],null,-1);function xL(n){if(n.length>1)for(let e=n[0],t=1;t<n.length;t++){let i=n[t];if(Db(e,i)>0)return n.slice().sort(Db);e=i}return n}nl.empty.nextLayer=nl.empty;class ng{finishChunk(e){this.chunks.push(new wb(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,i){this.addInner(e,t,i)||(this.nextLayer||(this.nextLayer=new ng)).add(e,t,i)}addInner(e,t,i){let r=e-this.lastTo||i.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return r<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=t,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let i=t.value.length-1;return this.last=t.value[i],this.lastFrom=t.from[i]+e,this.lastTo=t.to[i]+e,!0}finish(){return this.finishInner(nl.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=nl.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function uT(n,e,t){let i=new Map;for(let s of n)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&i.set(s.chunk[o],s.chunkPos[o]);let r=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let l=i.get(s.chunk[o]);l!=null&&(t?t.mapPos(l):l)==s.chunkPos[o]&&!(t!=null&&t.touchesRange(l,l+s.chunk[o].length))&&r.add(s.chunk[o])}return r}class cT{constructor(e,t,i,r=0){this.layer=e,this.skip=t,this.minPoint=i,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,i){for(;this.chunkIndex<this.layer.chunk.length;){let r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<e||r.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!i||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],i=e+t.from[this.rangeIndex];if(this.from=i,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class ig{constructor(e){this.heap=e}static from(e,t=null,i=-1){let r=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=i&&r.push(new cT(o,t,i,s));return r.length==1?r[0]:new ig(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let i of this.heap)i.goto(e,t);for(let i=this.heap.length>>1;i>=0;i--)Eb(this.heap,i);return this.next(),this}forward(e,t){for(let i of this.heap)i.forward(e,t);for(let i=this.heap.length>>1;i>=0;i--)Eb(this.heap,i);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Eb(this.heap,0)}}}function Eb(n,e){for(let t=n[e];;){let i=(e<<1)+1;if(i>=n.length)break;let r=n[i];if(i+1<n.length&&r.compare(n[i+1])>=0&&(r=n[i+1],i++),t.compare(r)<0)break;n[i]=t,n[e]=r,e=i}}class rg{constructor(e,t,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=ig.from(e,t,i)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){B0(this.active,e),B0(this.activeTo,e),B0(this.activeRank,e),this.minActive=dT(this.active,this.activeTo)}addActive(e){let t=0,{value:i,to:r,rank:s}=this.cursor;for(;t<this.activeRank.length&&(s-this.activeRank[t]||r-this.activeTo[t])>0;)t++;R0(this.active,t,i),R0(this.activeTo,t,r),R0(this.activeRank,t,s),e&&R0(e,t,this.cursor.from),this.minActive=dT(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>e){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),i&&B0(i,r)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(i),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let r=i.length-1;r>=0&&i[r]<e;r--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&t.push(this.active[i]);return t.reverse()}openEnd(e){let t=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)t++;return t}}function hT(n,e,t,i,r,s){n.goto(e),t.goto(i);let o=i+r,l=i,h=i-e;for(;;){let p=n.to+h-t.to||n.endSide-t.endSide,y=p<0?n.to+h:t.to,w=Math.min(y,o);if(n.point||t.point?n.point&&t.point&&(n.point==t.point||n.point.eq(t.point))&&Cb(n.activeForPoint(n.to),t.activeForPoint(t.to))||s.comparePoint(l,w,n.point,t.point):w>l&&!Cb(n.active,t.active)&&s.compareRange(l,w,n.active,t.active),y>o)break;l=y,p<=0&&n.next(),p>=0&&t.next()}}function Cb(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!=e[t]&&!n[t].eq(e[t]))return!1;return!0}function B0(n,e){for(let t=e,i=n.length-1;t<i;t++)n[t]=n[t+1];n.pop()}function R0(n,e,t){for(let i=n.length-1;i>=e;i--)n[i+1]=n[i];n[e]=t}function dT(n,e){let t=-1,i=1e9;for(let r=0;r<e.length;r++)(e[r]-i||n[r].endSide-n[t].endSide)<0&&(t=r,i=e[r]);return t}function L0(n,e,t=n.length){let i=0;for(let r=0;r<t;)n.charCodeAt(r)==9?(i+=e-i%e,r++):(i++,r=dc(n,r));return i}function bL(n,e,t,i){for(let r=0,s=0;;){if(s>=e)return r;if(r==n.length)break;s+=n.charCodeAt(r)==9?t-s%t:1,r=dc(n,r)}return i===!0?-1:n.length}const Sb="\u037C",pT=typeof Symbol=="undefined"?"__"+Sb:Symbol.for(Sb),Ab=typeof Symbol=="undefined"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),fT=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:{};class xd{constructor(e,t){this.rules=[];let{finish:i}=t||{};function r(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,l,h,p){let y=[],w=/^@(\w+)\b/.exec(o[0]),F=w&&w[1]=="keyframes";if(w&&l==null)return h.push(o[0]+";");for(let j in l){let Q=l[j];if(/&/.test(j))s(j.split(/,\s*/).map(he=>o.map(ye=>he.replace(/&/,ye))).reduce((he,ye)=>he.concat(ye)),Q,h);else if(Q&&typeof Q=="object"){if(!w)throw new RangeError("The value of a property ("+j+") should be a primitive value.");s(r(j),Q,y,F)}else Q!=null&&y.push(j.replace(/_.*/,"").replace(/[A-Z]/g,he=>"-"+he.toLowerCase())+": "+Q+";")}(y.length||F)&&h.push((i&&!w&&!p?o.map(i):o).join(", ")+" {"+y.join(" ")+"}")}for(let o in e)s(r(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=fT[pT]||1;return fT[pT]=e+1,Sb+e.toString(36)}static mount(e,t,i){let r=e[Ab],s=i&&i.nonce;r?s&&r.setNonce(s):r=new DL(e,s),r.mount(Array.isArray(t)?t:[t],e)}}let mT=new Map;class DL{constructor(e,t){let i=e.ownerDocument||e,r=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&r.CSSStyleSheet){let s=mT.get(i);if(s)return e[Ab]=s;this.sheet=new r.CSSStyleSheet,mT.set(i,this)}else this.styleTag=i.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[Ab]=this}mount(e,t){let i=this.sheet,r=0,s=0;for(let o=0;o<e.length;o++){let l=e[o],h=this.modules.indexOf(l);if(h<s&&h>-1&&(this.modules.splice(h,1),s--,h=-1),h==-1){if(this.modules.splice(s++,0,l),i)for(let p=0;p<l.rules.length;p++)i.insertRule(l.rules[p],r++)}else{for(;s<h;)r+=this.modules[s++].rules.length;r+=l.rules.length,s++}}if(i)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let o="";for(let h=0;h<this.modules.length;h++)o+=this.modules[h].getRules()+`
`;this.styleTag.textContent=o;let l=t.head||t;this.styleTag.parentNode!=l&&l.insertBefore(this.styleTag,l.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}for(var bd={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},sg={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},wL=typeof navigator!="undefined"&&/Mac/.test(navigator.platform),EL=typeof navigator!="undefined"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),Qu=0;Qu<10;Qu++)bd[48+Qu]=bd[96+Qu]=String(Qu);for(var Qu=1;Qu<=24;Qu++)bd[Qu+111]="F"+Qu;for(var Qu=65;Qu<=90;Qu++)bd[Qu]=String.fromCharCode(Qu+32),sg[Qu]=String.fromCharCode(Qu);for(var Tb in bd)sg.hasOwnProperty(Tb)||(sg[Tb]=bd[Tb]);function CL(n){var e=wL&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||EL&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?sg:bd)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function $0(n){let e;return n.nodeType==11?e=n.getSelection?n:n.ownerDocument:e=n,e.getSelection()}function Ob(n,e){return e?n==e||n.contains(e.nodeType!=1?e.parentNode:e):!1}function SL(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function j0(n,e){if(!e.anchorNode)return!1;try{return Ob(n,e.anchorNode)}catch(t){return!1}}function og(n){return n.nodeType==3?bp(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function ag(n,e,t,i){return t?gT(n,e,t,i,-1)||gT(n,e,t,i,1):!1}function xp(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e}function V0(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}function gT(n,e,t,i,r){for(;;){if(n==t&&e==i)return!0;if(e==(r<0?0:zh(n))){if(n.nodeName=="DIV")return!1;let s=n.parentNode;if(!s||s.nodeType!=1)return!1;e=xp(n)+(r<0?0:1),n=s}else if(n.nodeType==1){if(n=n.childNodes[e+(r<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;e=r<0?zh(n):0}else return!1}}function zh(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function kb(n,e){let t=e?n.left:n.right;return{left:t,right:t,top:n.top,bottom:n.bottom}}function AL(n){let e=n.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function yT(n,e){let t=e.width/n.offsetWidth,i=e.height/n.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-n.offsetWidth)<1)&&(t=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-n.offsetHeight)<1)&&(i=1),{scaleX:t,scaleY:i}}function TL(n,e,t,i,r,s,o,l){let h=n.ownerDocument,p=h.defaultView||window;for(let y=n,w=!1;y&&!w;)if(y.nodeType==1){let F,j=y==h.body,Q=1,he=1;if(j)F=AL(p);else{if(/^(fixed|sticky)$/.test(getComputedStyle(y).position)&&(w=!0),y.scrollHeight<=y.clientHeight&&y.scrollWidth<=y.clientWidth){y=y.assignedSlot||y.parentNode;continue}let et=y.getBoundingClientRect();({scaleX:Q,scaleY:he}=yT(y,et)),F={left:et.left,right:et.left+y.clientWidth*Q,top:et.top,bottom:et.top+y.clientHeight*he}}let ye=0,Le=0;if(r=="nearest")e.top<F.top?(Le=-(F.top-e.top+o),t>0&&e.bottom>F.bottom+Le&&(Le=e.bottom-F.bottom+Le+o)):e.bottom>F.bottom&&(Le=e.bottom-F.bottom+o,t<0&&e.top-Le<F.top&&(Le=-(F.top+Le-e.top+o)));else{let et=e.bottom-e.top,Me=F.bottom-F.top;Le=(r=="center"&&et<=Me?e.top+et/2-Me/2:r=="start"||r=="center"&&t<0?e.top-o:e.bottom-Me+o)-F.top}if(i=="nearest"?e.left<F.left?(ye=-(F.left-e.left+s),t>0&&e.right>F.right+ye&&(ye=e.right-F.right+ye+s)):e.right>F.right&&(ye=e.right-F.right+s,t<0&&e.left<F.left+ye&&(ye=-(F.left+ye-e.left+s))):ye=(i=="center"?e.left+(e.right-e.left)/2-(F.right-F.left)/2:i=="start"==l?e.left-s:e.right-(F.right-F.left)+s)-F.left,ye||Le)if(j)p.scrollBy(ye,Le);else{let et=0,Me=0;if(Le){let ke=y.scrollTop;y.scrollTop+=Le/he,Me=(y.scrollTop-ke)*he}if(ye){let ke=y.scrollLeft;y.scrollLeft+=ye/Q,et=(y.scrollLeft-ke)*Q}e={left:e.left-et,top:e.top-Me,right:e.right-et,bottom:e.bottom-Me},et&&Math.abs(et-ye)<1&&(i="nearest"),Me&&Math.abs(Me-Le)<1&&(r="nearest")}if(j)break;y=y.assignedSlot||y.parentNode}else if(y.nodeType==11)y=y.host;else break}function OL(n){let e=n.ownerDocument;for(let t=n.parentNode;t&&t!=e.body;)if(t.nodeType==1){if(t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth)return t;t=t.assignedSlot||t.parentNode}else if(t.nodeType==11)t=t.host;else break;return null}class kL{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:i}=e;this.set(t,Math.min(e.anchorOffset,t?zh(t):0),i,Math.min(e.focusOffset,i?zh(i):0))}set(e,t,i,r){this.anchorNode=e,this.anchorOffset=t,this.focusNode=i,this.focusOffset=r}}let wf=null;function vT(n){if(n.setActive)return n.setActive();if(wf)return n.focus(wf);let e=[];for(let t=n;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(n.focus(wf==null?{get preventScroll(){return wf={preventScroll:!0},!0}}:void 0),!wf){wf=!1;for(let t=0;t<e.length;){let i=e[t++],r=e[t++],s=e[t++];i.scrollTop!=r&&(i.scrollTop=r),i.scrollLeft!=s&&(i.scrollLeft=s)}}}let xT;function bp(n,e,t=e){let i=xT||(xT=document.createRange());return i.setEnd(n,t),i.setStart(n,e),i}function Ef(n,e,t,i){let r={key:e,code:e,keyCode:t,which:t,cancelable:!0};i&&({altKey:r.altKey,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey,metaKey:r.metaKey}=i);let s=new KeyboardEvent("keydown",r);s.synthetic=!0,n.dispatchEvent(s);let o=new KeyboardEvent("keyup",r);return o.synthetic=!0,n.dispatchEvent(o),s.defaultPrevented||o.defaultPrevented}function _L(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function bT(n){for(;n.attributes.length;)n.removeAttributeNode(n.attributes[0])}function PL(n,e){let t=e.focusNode,i=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=i)return!1;for(i=Math.min(i,zh(t));;)if(i){if(t.nodeType!=1)return!1;let r=t.childNodes[i-1];r.contentEditable=="false"?i--:(t=r,i=zh(t))}else{if(t==n)return!0;i=xp(t),t=t.parentNode}}function DT(n){return n.scrollTop>Math.max(1,n.scrollHeight-n.clientHeight-4)}function wT(n,e){for(let t=n,i=e;;){if(t.nodeType==3&&i>0)return{node:t,offset:i};if(t.nodeType==1&&i>0){if(t.contentEditable=="false")return null;t=t.childNodes[i-1],i=zh(t)}else if(t.parentNode&&!V0(t))i=xp(t),t=t.parentNode;else return null}}function ET(n,e){for(let t=n,i=e;;){if(t.nodeType==3&&i<t.nodeValue.length)return{node:t,offset:i};if(t.nodeType==1&&i<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[i],i=0}else if(t.parentNode&&!V0(t))i=xp(t)+1,t=t.parentNode;else return null}}class sc{constructor(e,t,i=!0){this.node=e,this.offset=t,this.precise=i}static before(e,t){return new sc(e.parentNode,xp(e),t)}static after(e,t){return new sc(e.parentNode,xp(e)+1,t)}}const _b=[];class Ua{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let i of this.children){if(i==e)return t;t+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(this.flags&2){let i=this.dom,r=null,s;for(let o of this.children){if(o.flags&7){if(!o.dom&&(s=r?r.nextSibling:i.firstChild)){let l=Ua.get(s);(!l||!l.parent&&l.canReuseDOM(o))&&o.reuseDOM(s)}o.sync(e,t),o.flags&=-8}if(s=r?r.nextSibling:i.firstChild,t&&!t.written&&t.node==i&&s!=o.dom&&(t.written=!0),o.dom.parentNode==i)for(;s&&s!=o.dom;)s=CT(s);else i.insertBefore(o.dom,s);r=o.dom}for(s=r?r.nextSibling:i.firstChild,s&&t&&t.node==i&&(t.written=!0);s;)s=CT(s)}else if(this.flags&1)for(let i of this.children)i.flags&7&&(i.sync(e,t),i.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let i;if(e==this.dom)i=this.dom.childNodes[t];else{let r=zh(e)==0?0:t==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;r==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?r=-1:r=1),e=s}r<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!Ua.get(i);)i=i.nextSibling;if(!i)return this.length;for(let r=0,s=0;;r++){let o=this.children[r];if(o.dom==i)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,t,i=0){let r=-1,s=-1,o=-1,l=-1;for(let h=0,p=i,y=i;h<this.children.length;h++){let w=this.children[h],F=p+w.length;if(p<e&&F>t)return w.domBoundsAround(e,t,p);if(F>=e&&r==-1&&(r=h,s=p),p>t&&w.dom.parentNode==this.dom){o=h,l=y;break}y=F,p=F+w.breakAfter}return{from:s,to:l<0?i+this.length:l,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),t.flags&1)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,i=_b){this.markDirty();for(let r=e;r<t;r++){let s=this.children[r];s.parent==this&&i.indexOf(s)<0&&s.destroy()}this.children.splice(e,t-e,...i);for(let r=0;r<i.length;r++)i[r].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new ST(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,i,r,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}Ua.prototype.breakAfter=0;function CT(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class ST{constructor(e,t,i){this.children=e,this.pos=t,this.i=i,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function AT(n,e,t,i,r,s,o,l,h){let{children:p}=n,y=p.length?p[e]:null,w=s.length?s[s.length-1]:null,F=w?w.breakAfter:o;if(!(e==i&&y&&!o&&!F&&s.length<2&&y.merge(t,r,s.length?w:null,t==0,l,h))){if(i<p.length){let j=p[i];j&&(r<j.length||j.breakAfter&&(w!=null&&w.breakAfter))?(e==i&&(j=j.split(r),r=0),!F&&w&&j.merge(0,r,w,!0,0,h)?s[s.length-1]=j:((r||j.children.length&&!j.children[0].length)&&j.merge(0,r,null,!1,0,h),s.push(j))):j!=null&&j.breakAfter&&(w?w.breakAfter=1:o=1),i++}for(y&&(y.breakAfter=o,t>0&&(!o&&s.length&&y.merge(t,y.length,s[0],!1,l,0)?y.breakAfter=s.shift().breakAfter:(t<y.length||y.children.length&&y.children[y.children.length-1].length==0)&&y.merge(t,y.length,null,!1,l,0),e++));e<i&&s.length;)if(p[i-1].become(s[s.length-1]))i--,s.pop(),h=s.length?0:l;else if(p[e].become(s[0]))e++,s.shift(),l=s.length?0:h;else break;!s.length&&e&&i<p.length&&!p[e-1].breakAfter&&p[i].merge(0,0,p[e-1],!1,l,h)&&e--,(e<i||s.length)&&n.replaceChildren(e,i,s)}}function TT(n,e,t,i,r,s){let o=n.childCursor(),{i:l,off:h}=o.findPos(t,1),{i:p,off:y}=o.findPos(e,-1),w=e-t;for(let F of i)w+=F.length;n.length+=w,AT(n,p,y,l,h,i,0,r,s)}let Fc=typeof navigator!="undefined"?navigator:{userAgent:"",vendor:"",platform:""},Pb=typeof document!="undefined"?document:{documentElement:{style:{}}};const Fb=/Edge\/(\d+)/.exec(Fc.userAgent),OT=/MSIE \d/.test(Fc.userAgent),Mb=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Fc.userAgent),W0=!!(OT||Mb||Fb),kT=!W0&&/gecko\/(\d+)/i.test(Fc.userAgent),Ib=!W0&&/Chrome\/(\d+)/.exec(Fc.userAgent),_T="webkitFontSmoothing"in Pb.documentElement.style,PT=!W0&&/Apple Computer/.test(Fc.vendor),FT=PT&&(/Mobile\/\w+/.test(Fc.userAgent)||Fc.maxTouchPoints>2);var ns={mac:FT||/Mac/.test(Fc.platform),windows:/Win/.test(Fc.platform),linux:/Linux|X11/.test(Fc.platform),ie:W0,ie_version:OT?Pb.documentMode||6:Mb?+Mb[1]:Fb?+Fb[1]:0,gecko:kT,gecko_version:kT?+(/Firefox\/(\d+)/.exec(Fc.userAgent)||[0,0])[1]:0,chrome:!!Ib,chrome_version:Ib?+Ib[1]:0,ios:FT,android:/Android\b/.test(Fc.userAgent),webkit:_T,safari:PT,webkit_version:_T?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:Pb.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const FL=256;class ih extends Ua{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,i){return this.flags&8||i&&(!(i instanceof ih)||this.length-(t-e)+i.length>FL||i.flags&8)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new ih(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=this.flags&8,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new sc(this.dom,e)}domBoundsAround(e,t,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return ML(this.dom,e,t)}}class qh extends Ua{constructor(e,t=[],i=0){super(),this.mark=e,this.children=t,this.length=i;for(let r of t)r.setParent(this)}setAttrs(e){if(bT(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,i,r,s,o){return i&&(!(i instanceof qh&&i.mark.eq(this.mark))||e&&s<=0||t<this.length&&o<=0)?!1:(TT(this,e,t,i?i.children.slice():[],s-1,o-1),this.markDirty(),!0)}split(e){let t=[],i=0,r=-1,s=0;for(let l of this.children){let h=i+l.length;h>e&&t.push(i<e?l.split(e-i):l),r<0&&i>=e&&(r=s),i=h,s++}let o=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new qh(this.mark,t,o)}domAtPos(e){return MT(this,e)}coordsAt(e,t){return NT(this,e,t)}}function ML(n,e,t){let i=n.nodeValue.length;e>i&&(e=i);let r=e,s=e,o=0;e==0&&t<0||e==i&&t>=0?ns.chrome||ns.gecko||(e?(r--,o=1):s<i&&(s++,o=-1)):t<0?r--:s<i&&s++;let l=bp(n,r,s).getClientRects();if(!l.length)return null;let h=l[(o?o<0:t>=0)?0:l.length-1];return ns.safari&&!o&&h.width==0&&(h=Array.prototype.find.call(l,p=>p.width)||h),o?kb(h,o<0):h||null}class Dd extends Ua{static create(e,t,i){return new Dd(e,t,i)}constructor(e,t,i){super(),this.widget=e,this.length=t,this.side=i,this.prevWidget=null}split(e){let t=Dd.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,i,r,s,o){return i&&(!(i instanceof Dd)||!this.widget.compare(i.widget)||e>0&&s<=0||t<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}become(e){return e instanceof Dd&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return da.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,i=t&&t.state.doc,r=this.posAtStart;return i?i.slice(r,r+this.length):da.empty}domAtPos(e){return(this.length?e==0:this.side>0)?sc.before(this.dom):sc.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let i=this.widget.coordsAt(this.dom,e,t);if(i)return i;let r=this.dom.getClientRects(),s=null;if(!r.length)return null;let o=this.side?this.side<0:e>0;for(let l=o?r.length-1:0;s=r[l],!(e>0?l==0:l==r.length-1||s.top<s.bottom);l+=o?-1:1);return kb(s,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Cf extends Ua{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof Cf&&e.side==this.side}split(){return new Cf(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?sc.before(this.dom):sc.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return da.empty}get isHidden(){return!0}}ih.prototype.children=Dd.prototype.children=Cf.prototype.children=_b;function MT(n,e){let t=n.dom,{children:i}=n,r=0;for(let s=0;r<i.length;r++){let o=i[r],l=s+o.length;if(!(l==s&&o.getSide()<=0)){if(e>s&&e<l&&o.dom.parentNode==t)return o.domAtPos(e-s);if(e<=s)break;s=l}}for(let s=r;s>0;s--){let o=i[s-1];if(o.dom.parentNode==t)return o.domAtPos(o.length)}for(let s=r;s<i.length;s++){let o=i[s];if(o.dom.parentNode==t)return o.domAtPos(0)}return new sc(t,0)}function IT(n,e,t){let i,{children:r}=n;t>0&&e instanceof qh&&r.length&&(i=r[r.length-1])instanceof qh&&i.mark.eq(e.mark)?IT(i,e.children[0],t-1):(r.push(e),e.setParent(n)),n.length+=e.length}function NT(n,e,t){let i=null,r=-1,s=null,o=-1;function l(p,y){for(let w=0,F=0;w<p.children.length&&F<=y;w++){let j=p.children[w],Q=F+j.length;Q>=y&&(j.children.length?l(j,y-F):(!s||s.isHidden&&t>0)&&(Q>y||F==Q&&j.getSide()>0)?(s=j,o=y-F):(F<y||F==Q&&j.getSide()<0&&!j.isHidden)&&(i=j,r=y-F)),F=Q}}l(n,e);let h=(t<0?i:s)||i||s;return h?h.coordsAt(Math.max(0,h==i?r:o),t):IL(n)}function IL(n){let e=n.dom.lastChild;if(!e)return n.dom.getBoundingClientRect();let t=og(e);return t[t.length-1]||null}function Nb(n,e){for(let t in n)t=="class"&&e.class?e.class+=" "+n.class:t=="style"&&e.style?e.style+=";"+n.style:e[t]=n[t];return e}const BT=Object.create(null);function Bb(n,e,t){if(n==e)return!0;n||(n=BT),e||(e=BT);let i=Object.keys(n),r=Object.keys(e);if(i.length-(t&&i.indexOf(t)>-1?1:0)!=r.length-(t&&r.indexOf(t)>-1?1:0))return!1;for(let s of i)if(s!=t&&(r.indexOf(s)==-1||n[s]!==e[s]))return!1;return!0}function Rb(n,e,t){let i=!1;if(e)for(let r in e)t&&r in t||(i=!0,r=="style"?n.style.cssText="":n.removeAttribute(r));if(t)for(let r in t)e&&e[r]==t[r]||(i=!0,r=="style"?n.style.cssText=t[r]:n.setAttribute(r,t[r]));return i}function NL(n){let e=Object.create(null);for(let t=0;t<n.attributes.length;t++){let i=n.attributes[t];e[i.name]=i.value}return e}class bu extends Ua{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,i,r,s,o){if(i){if(!(i instanceof bu))return!1;this.dom||i.transferDOM(this)}return r&&this.setDeco(i?i.attrs:null),TT(this,e,t,i?i.children.slice():[],s,o),!0}split(e){let t=new bu;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i,off:r}=this.childPos(e);r&&(t.append(this.children[i].split(r),0),this.children[i].merge(r,this.children[i].length,null,!1,0,0),i++);for(let s=i;s<this.children.length;s++)t.append(this.children[s],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){Bb(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){IT(this,e,t)}addLineDeco(e){let t=e.spec.attributes,i=e.spec.class;t&&(this.attrs=Nb(t,this.attrs||{})),i&&(this.attrs=Nb({class:i},this.attrs||{}))}domAtPos(e){return MT(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,t){var i;this.dom?this.flags&4&&(bT(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(Rb(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let r=this.dom.lastChild;for(;r&&Ua.get(r)instanceof qh;)r=r.lastChild;if(!r||!this.length||r.nodeName!="BR"&&((i=Ua.get(r))===null||i===void 0?void 0:i.isEditable)==!1&&(!ns.ios||!this.children.some(s=>s instanceof ih))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,t;for(let i of this.children){if(!(i instanceof ih)||/[^ -~]/.test(i.text))return null;let r=og(i.dom);if(r.length!=1)return null;e+=r[0].width,t=r[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let i=NT(this,e,t);if(!this.children.length&&i&&this.parent){let{heightOracle:r}=this.parent.view.viewState,s=i.bottom-i.top;if(Math.abs(s-r.lineHeight)<2&&r.textHeight<s){let o=(s-r.textHeight)/2;return{top:i.top+o,bottom:i.bottom-o,left:i.left,right:i.left}}}return i}become(e){return!1}covers(){return!0}static find(e,t){for(let i=0,r=0;i<e.children.length;i++){let s=e.children[i],o=r+s.length;if(o>=t){if(s instanceof bu)return s;if(o>t)break}r=o+s.breakAfter}return null}}class wd extends Ua{constructor(e,t,i){super(),this.widget=e,this.length=t,this.deco=i,this.breakAfter=0,this.prevWidget=null}merge(e,t,i,r,s,o){return i&&(!(i instanceof wd)||!this.widget.compare(i.widget)||e>0&&s<=0||t<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?sc.before(this.dom):sc.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let i=new wd(this.widget,t,this.deco);return i.breakAfter=this.breakAfter,i}get children(){return _b}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):da.empty}domBoundsAround(){return null}become(e){return e instanceof wd&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){return this.widget.coordsAt(this.dom,e,t)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:i}=this.deco;return t==i?!1:e<0?t<0:i>0}}class lg{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var Qh=function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n}(Qh||(Qh={}));class Ta extends vp{constructor(e,t,i,r){super(),this.startSide=e,this.endSide=t,this.widget=i,this.spec=r}get heightRelevant(){return!1}static mark(e){return new ug(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return t+=i&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new Ed(e,t,t,i,e.widget||null,!1)}static replace(e){let t=!!e.block,i,r;if(e.isBlockGap)i=-5e8,r=4e8;else{let{start:s,end:o}=RT(e,t);i=(s?t?-3e8:-1:5e8)-1,r=(o?t?2e8:1:-6e8)+1}return new Ed(e,i,r,t,e.widget||null,!0)}static line(e){return new cg(e)}static set(e,t=!1){return nl.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Ta.none=nl.empty;class ug extends Ta{constructor(e){let{start:t,end:i}=RT(e);super(t?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,i;return this==e||e instanceof ug&&this.tagName==e.tagName&&(this.class||((t=this.attrs)===null||t===void 0?void 0:t.class))==(e.class||((i=e.attrs)===null||i===void 0?void 0:i.class))&&Bb(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}ug.prototype.point=!1;class cg extends Ta{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof cg&&this.spec.class==e.spec.class&&Bb(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}cg.prototype.mapMode=zu.TrackBefore,cg.prototype.point=!0;class Ed extends Ta{constructor(e,t,i,r,s,o){super(t,i,s,e),this.block=r,this.isReplace=o,this.mapMode=r?t<=0?zu.TrackBefore:zu.TrackAfter:zu.TrackDel}get type(){return this.startSide!=this.endSide?Qh.WidgetRange:this.startSide<=0?Qh.WidgetBefore:Qh.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Ed&&BL(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}Ed.prototype.point=!0;function RT(n,e=!1){let{inclusiveStart:t,inclusiveEnd:i}=n;return t==null&&(t=n.inclusive),i==null&&(i=n.inclusive),{start:t!=null?t:e,end:i!=null?i:e}}function BL(n,e){return n==e||!!(n&&e&&n.compare(e))}function Lb(n,e,t,i=0){let r=t.length-1;r>=0&&t[r]+i>=n?t[r]=Math.max(t[r],e):t.push(n,e)}class hg{constructor(e,t,i,r){this.doc=e,this.pos=t,this.end=i,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof wd&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new bu),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(H0(new Cf(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof wd)&&this.getLine()}buildText(e,t,i){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:l}=this.cursor.next(this.skip);if(this.skip=0,l)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-i)),this.getLine().append(H0(new ih(this.text.slice(this.textOff,this.textOff+r)),t),i),this.atCursorPos=!0,this.textOff+=r,e-=r,i=0}}span(e,t,i,r){this.buildText(t-e,i,r),this.pos=t,this.openStart<0&&(this.openStart=r)}point(e,t,i,r,s,o){if(this.disallowBlockEffectsFor[o]&&i instanceof Ed){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let l=t-e;if(i instanceof Ed)if(i.block)i.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new wd(i.widget||Sf.block,l,i));else{let h=Dd.create(i.widget||Sf.inline,l,l?0:i.startSide),p=this.atCursorPos&&!h.isEditable&&s<=r.length&&(e<t||i.startSide>0),y=!h.isEditable&&(e<t||s>r.length||i.startSide<=0),w=this.getLine();this.pendingBuffer==2&&!p&&!h.isEditable&&(this.pendingBuffer=0),this.flushBuffer(r),p&&(w.append(H0(new Cf(1),r),s),s=r.length+Math.max(0,s-r.length)),w.append(H0(h,r),s),this.atCursorPos=y,this.pendingBuffer=y?e<t||s>r.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=r.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);l&&(this.textOff+l<=this.text.length?this.textOff+=l:(this.skip+=l-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=s)}static build(e,t,i,r,s){let o=new hg(e,t,i,s);return o.openEnd=nl.spans(r,t,i,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function H0(n,e){for(let t of e)n=new qh(t,[n],n.length);return n}class Sf extends lg{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Sf.inline=new Sf("span"),Sf.block=new Sf("div");var Kl=function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n}(Kl||(Kl={}));const Dp=Kl.LTR,$b=Kl.RTL;function LT(n){let e=[];for(let t=0;t<n.length;t++)e.push(1<<+n[t]);return e}const RL=LT("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),LL=LT("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),jb=Object.create(null),xh=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),t=n.charCodeAt(1);jb[e]=t,jb[t]=-e}function $T(n){return n<=247?RL[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?LL[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8204?256:64336<=n&&n<=65023?4:1}const $L=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Cd{get dir(){return this.level%2?$b:Dp}constructor(e,t,i){this.from=e,this.to=t,this.level=i}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,i,r){let s=-1;for(let o=0;o<e.length;o++){let l=e[o];if(l.from<=t&&l.to>=t){if(l.level==i)return o;(s<0||(r!=0?r<0?l.from<t:l.to>t:e[s].level>l.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}function jT(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++){let i=n[t],r=e[t];if(i.from!=r.from||i.to!=r.to||i.direction!=r.direction||!jT(i.inner,r.inner))return!1}return!0}const za=[];function jL(n,e,t,i,r){for(let s=0;s<=i.length;s++){let o=s?i[s-1].to:e,l=s<i.length?i[s].from:t,h=s?256:r;for(let p=o,y=h,w=h;p<l;p++){let F=$T(n.charCodeAt(p));F==512?F=y:F==8&&w==4&&(F=16),za[p]=F==4?2:F,F&7&&(w=F),y=F}for(let p=o,y=h,w=h;p<l;p++){let F=za[p];if(F==128)p<l-1&&y==za[p+1]&&y&24?F=za[p]=y:za[p]=256;else if(F==64){let j=p+1;for(;j<l&&za[j]==64;)j++;let Q=p&&y==8||j<t&&za[j]==8?w==1?1:8:256;for(let he=p;he<j;he++)za[he]=Q;p=j-1}else F==8&&w==1&&(za[p]=1);y=F,F&7&&(w=F)}}}function VL(n,e,t,i,r){let s=r==1?2:1;for(let o=0,l=0,h=0;o<=i.length;o++){let p=o?i[o-1].to:e,y=o<i.length?i[o].from:t;for(let w=p,F,j,Q;w<y;w++)if(j=jb[F=n.charCodeAt(w)])if(j<0){for(let he=l-3;he>=0;he-=3)if(xh[he+1]==-j){let ye=xh[he+2],Le=ye&2?r:ye&4?ye&1?s:r:0;Le&&(za[w]=za[xh[he]]=Le),l=he;break}}else{if(xh.length==189)break;xh[l++]=w,xh[l++]=F,xh[l++]=h}else if((Q=za[w])==2||Q==1){let he=Q==r;h=he?0:1;for(let ye=l-3;ye>=0;ye-=3){let Le=xh[ye+2];if(Le&2)break;if(he)xh[ye+2]|=2;else{if(Le&4)break;xh[ye+2]|=4}}}}}function WL(n,e,t,i){for(let r=0,s=i;r<=t.length;r++){let o=r?t[r-1].to:n,l=r<t.length?t[r].from:e;for(let h=o;h<l;){let p=za[h];if(p==256){let y=h+1;for(;;)if(y==l){if(r==t.length)break;y=t[r++].to,l=r<t.length?t[r].from:e}else if(za[y]==256)y++;else break;let w=s==1,F=(y<e?za[y]:i)==1,j=w==F?w?1:2:i;for(let Q=y,he=r,ye=he?t[he-1].to:n;Q>h;)Q==ye&&(Q=t[--he].from,ye=he?t[he-1].to:n),za[--Q]=j;h=y}else s=p,h++}}}function Vb(n,e,t,i,r,s,o){let l=i%2?2:1;if(i%2==r%2)for(let h=e,p=0;h<t;){let y=!0,w=!1;if(p==s.length||h<s[p].from){let he=za[h];he!=l&&(y=!1,w=he==16)}let F=!y&&l==1?[]:null,j=y?i:i+1,Q=h;e:for(;;)if(p<s.length&&Q==s[p].from){if(w)break e;let he=s[p];if(!y)for(let ye=he.to,Le=p+1;;){if(ye==t)break e;if(Le<s.length&&s[Le].from==ye)ye=s[Le++].to;else{if(za[ye]==l)break e;break}}if(p++,F)F.push(he);else{he.from>h&&o.push(new Cd(h,he.from,j));let ye=he.direction==Dp!=!(j%2);Wb(n,ye?i+1:i,r,he.inner,he.from,he.to,o),h=he.to}Q=he.to}else{if(Q==t||(y?za[Q]!=l:za[Q]==l))break;Q++}F?Vb(n,h,Q,i+1,r,F,o):h<Q&&o.push(new Cd(h,Q,j)),h=Q}else for(let h=t,p=s.length;h>e;){let y=!0,w=!1;if(!p||h>s[p-1].to){let he=za[h-1];he!=l&&(y=!1,w=he==16)}let F=!y&&l==1?[]:null,j=y?i:i+1,Q=h;e:for(;;)if(p&&Q==s[p-1].to){if(w)break e;let he=s[--p];if(!y)for(let ye=he.from,Le=p;;){if(ye==e)break e;if(Le&&s[Le-1].to==ye)ye=s[--Le].from;else{if(za[ye-1]==l)break e;break}}if(F)F.push(he);else{he.to<h&&o.push(new Cd(he.to,h,j));let ye=he.direction==Dp!=!(j%2);Wb(n,ye?i+1:i,r,he.inner,he.from,he.to,o),h=he.from}Q=he.from}else{if(Q==e||(y?za[Q-1]!=l:za[Q-1]==l))break;Q--}F?Vb(n,Q,h,i+1,r,F,o):Q<h&&o.push(new Cd(Q,h,j)),h=Q}}function Wb(n,e,t,i,r,s,o){let l=e%2?2:1;jL(n,r,s,i,l),VL(n,r,s,i,l),WL(r,s,i,l),Vb(n,r,s,e,t,i,o)}function HL(n,e,t){if(!n)return[new Cd(0,0,e==$b?1:0)];if(e==Dp&&!t.length&&!$L.test(n))return VT(n.length);if(t.length)for(;n.length>za.length;)za[za.length]=256;let i=[],r=e==Dp?0:1;return Wb(n,r,r,t,0,n.length,i),i}function VT(n){return[new Cd(0,n,0)]}let WT="";function UL(n,e,t,i,r){var s;let o=i.head-n.from,l=Cd.find(e,o,(s=i.bidiLevel)!==null&&s!==void 0?s:-1,i.assoc),h=e[l],p=h.side(r,t);if(o==p){let F=l+=r?1:-1;if(F<0||F>=e.length)return null;h=e[l=F],o=h.side(!r,t),p=h.side(r,t)}let y=dc(n.text,o,h.forward(r,t));(y<h.from||y>h.to)&&(y=p),WT=n.text.slice(Math.min(o,y),Math.max(o,y));let w=l==(r?e.length-1:0)?null:e[l+(r?1:-1)];return w&&y==p&&w.level+(r?0:1)<h.level?ki.cursor(w.side(!r,t)+n.from,w.forward(r,t)?1:-1,w.level):ki.cursor(y+n.from,h.forward(r,t)?-1:1,h.level)}function zL(n,e,t){for(let i=e;i<t;i++){let r=$T(n.charCodeAt(i));if(r==1)return Dp;if(r==2||r==4)return $b}return Dp}const HT=$s.define(),UT=$s.define(),zT=$s.define(),qT=$s.define(),Hb=$s.define(),QT=$s.define(),XT=$s.define(),YT=$s.define({combine:n=>n.some(e=>e)}),qL=$s.define({combine:n=>n.some(e=>e)}),GT=$s.define();class Af{constructor(e,t="nearest",i="nearest",r=5,s=5,o=!1){this.range=e,this.y=t,this.x=i,this.yMargin=r,this.xMargin=s,this.isSnapshot=o}map(e){return e.empty?this:new Af(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new Af(ki.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const U0=pa.define({map:(n,e)=>n.map(e)});function pc(n,e,t){let i=n.facet(qT);i.length?i[0](e):window.onerror?window.onerror(String(e),t,void 0,void 0,e):t?console.error(t+":",e):console.error(e)}const z0=$s.define({combine:n=>n.length?n[0]:!0});let QL=0;const dg=$s.define();class Wc{constructor(e,t,i,r,s){this.id=e,this.create=t,this.domEventHandlers=i,this.domEventObservers=r,this.extension=s(this)}static define(e,t){const{eventHandlers:i,eventObservers:r,provide:s,decorations:o}=t||{};return new Wc(QL++,e,i,r,l=>{let h=[dg.of(l)];return o&&h.push(pg.of(p=>{let y=p.plugin(l);return y?o(y):Ta.none})),s&&h.push(s(l)),h})}static fromClass(e,t){return Wc.define(i=>new e(i),t)}}class Ub{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(i){if(pc(t.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(r){}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){pc(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(i){pc(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const KT=$s.define(),zb=$s.define(),pg=$s.define(),ZT=$s.define(),qb=$s.define(),JT=$s.define();function eO(n,e){let t=n.state.facet(JT);if(!t.length)return t;let i=t.map(s=>s instanceof Function?s(n):s),r=[];return nl.spans(i,e.from,e.to,{point(){},span(s,o,l,h){let p=s-e.from,y=o-e.from,w=r;for(let F=l.length-1;F>=0;F--,h--){let j=l[F].spec.bidiIsolate,Q;if(j==null&&(j=zL(e.text,p,y)),h>0&&w.length&&(Q=w[w.length-1]).to==p&&Q.direction==j)Q.to=y,w=Q.inner;else{let he={from:p,to:y,direction:j,inner:[]};w.push(he),w=he.inner}}}}),r}const tO=$s.define();function nO(n){let e=0,t=0,i=0,r=0;for(let s of n.state.facet(tO)){let o=s(n);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(t=Math.max(t,o.right)),o.top!=null&&(i=Math.max(i,o.top)),o.bottom!=null&&(r=Math.max(r,o.bottom)))}return{left:e,right:t,top:i,bottom:r}}const fg=$s.define();class Hc{constructor(e,t,i,r){this.fromA=e,this.toA=t,this.fromB=i,this.toB=r}join(e){return new Hc(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,i=this;for(;t>0;t--){let r=e[t-1];if(!(r.fromA>i.toA)){if(r.toA<i.fromA)break;i=i.join(r),e.splice(t-1,1)}}return e.splice(t,0,i),e}static extendWithRanges(e,t){if(t.length==0)return e;let i=[];for(let r=0,s=0,o=0,l=0;;r++){let h=r==e.length?null:e[r],p=o-l,y=h?h.fromB:1e9;for(;s<t.length&&t[s]<y;){let w=t[s],F=t[s+1],j=Math.max(l,w),Q=Math.min(y,F);if(j<=Q&&new Hc(j+p,Q+p,j,Q).addToSet(i),F>y)break;s+=2}if(!h)return i;new Hc(h.fromA,h.toA,h.fromB,h.toB).addToSet(i),o=h.toA,l=h.toB}}}class q0{constructor(e,t,i){this.view=e,this.state=t,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=Mu.empty(this.startState.doc.length);for(let s of i)this.changes=this.changes.compose(s.changes);let r=[];this.changes.iterChangedRanges((s,o,l,h)=>r.push(new Hc(s,o,l,h))),this.changedRanges=r}static create(e,t,i){return new q0(e,t,i)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class iO extends Ua{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new bu],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Hc(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:p,toA:y})=>y<this.minWidthFrom||p>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0);let r=-1;this.view.inputState.composing>=0&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?r=this.domChanged.newSel.head:!e$(e.changes,this.hasComposition)&&!e.selectionSet&&(r=e.state.selection.main.head));let s=r>-1?YL(this.view,e.changes,r):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:p,to:y}=this.hasComposition;i=new Hc(p,y,e.changes.mapPos(p,-1),e.changes.mapPos(y,1)).addToSet(i.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(ns.ie||ns.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,l=this.updateDeco(),h=ZL(o,l,e.changes);return i=Hc.extendWithRanges(i,h),!(this.flags&7)&&i.length==0?!1:(this.updateInner(i,e.startState.doc.length,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,i);let{observer:r}=this.view;r.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=ns.chrome||ns.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||r.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof wd&&o.widget instanceof rO&&s.push(o.dom);r.updateGaps(s)}updateChildren(e,t,i){let r=i?i.range.addToSet(e.slice()):e,s=this.childCursor(t);for(let o=r.length-1;;o--){let l=o>=0?r[o]:null;if(!l)break;let{fromA:h,toA:p,fromB:y,toB:w}=l,F,j,Q,he;if(i&&i.range.fromB<w&&i.range.toB>y){let ke=hg.build(this.view.state.doc,y,i.range.fromB,this.decorations,this.dynamicDecorationMap),Qe=hg.build(this.view.state.doc,i.range.toB,w,this.decorations,this.dynamicDecorationMap);j=ke.breakAtStart,Q=ke.openStart,he=Qe.openEnd;let ft=this.compositionView(i);Qe.breakAtStart?ft.breakAfter=1:Qe.content.length&&ft.merge(ft.length,ft.length,Qe.content[0],!1,Qe.openStart,0)&&(ft.breakAfter=Qe.content[0].breakAfter,Qe.content.shift()),ke.content.length&&ft.merge(0,0,ke.content[ke.content.length-1],!0,0,ke.openEnd)&&ke.content.pop(),F=ke.content.concat(ft).concat(Qe.content)}else({content:F,breakAtStart:j,openStart:Q,openEnd:he}=hg.build(this.view.state.doc,y,w,this.decorations,this.dynamicDecorationMap));let{i:ye,off:Le}=s.findPos(p,1),{i:et,off:Me}=s.findPos(h,-1);AT(this,et,Me,ye,Le,F,j,Q,he)}i&&this.fixCompositionDOM(i)}compositionView(e){let t=new ih(e.text.nodeValue);t.flags|=8;for(let{deco:r}of e.marks)t=new qh(r,[t],t.length);let i=new bu;return i.append(t,0),i}fixCompositionDOM(e){let t=(s,o)=>{o.flags|=8|(o.children.some(h=>h.flags&7)?1:0),this.markedForComposition.add(o);let l=Ua.get(s);l&&l!=o&&(l.dom=null),o.setDOM(s)},i=this.childPos(e.range.fromB,1),r=this.children[i.i];t(e.line,r);for(let s=e.marks.length-1;s>=-1;s--)i=r.childPos(i.off,1),r=r.children[i.i],t(s>=0?e.marks[s].node:e.text,r)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,r=i==this.dom,s=!r&&j0(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(r||t||s))return;let o=this.forceSelection;this.forceSelection=!1;let l=this.view.state.selection.main,h=this.moveToLine(this.domAtPos(l.anchor)),p=l.empty?h:this.moveToLine(this.domAtPos(l.head));if(ns.gecko&&l.empty&&!this.hasComposition&&XL(h)){let w=document.createTextNode("");this.view.observer.ignore(()=>h.node.insertBefore(w,h.node.childNodes[h.offset]||null)),h=p=new sc(w,0),o=!0}let y=this.view.observer.selectionRange;(o||!y.focusNode||(!ag(h.node,h.offset,y.anchorNode,y.anchorOffset)||!ag(p.node,p.offset,y.focusNode,y.focusOffset))&&!this.suppressWidgetCursorChange(y,l))&&(this.view.observer.ignore(()=>{ns.android&&ns.chrome&&this.dom.contains(y.focusNode)&&JL(y.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let w=$0(this.view.root);if(w)if(l.empty){if(ns.gecko){let F=GL(h.node,h.offset);if(F&&F!=3){let j=(F==1?wT:ET)(h.node,h.offset);j&&(h=new sc(j.node,j.offset))}}w.collapse(h.node,h.offset),l.bidiLevel!=null&&w.caretBidiLevel!==void 0&&(w.caretBidiLevel=l.bidiLevel)}else if(w.extend){w.collapse(h.node,h.offset);try{w.extend(p.node,p.offset)}catch(F){}}else{let F=document.createRange();l.anchor>l.head&&([h,p]=[p,h]),F.setEnd(p.node,p.offset),F.setStart(h.node,h.offset),w.removeAllRanges(),w.addRange(F)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(h,p)),this.impreciseAnchor=h.precise?null:new sc(y.anchorNode,y.anchorOffset),this.impreciseHead=p.precise?null:new sc(y.focusNode,y.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&ag(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,i=$0(e.root),{anchorNode:r,anchorOffset:s}=e.observer.selectionRange;if(!i||!t.empty||!t.assoc||!i.modify)return;let o=bu.find(this,t.head);if(!o)return;let l=o.posAtStart;if(t.head==l||t.head==l+o.length)return;let h=this.coordsAt(t.head,-1),p=this.coordsAt(t.head,1);if(!h||!p||h.bottom>p.top)return;let y=this.domAtPos(t.head+t.assoc);i.collapse(y.node,y.offset),i.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let w=e.observer.selectionRange;e.docView.posFromDOM(w.anchorNode,w.anchorOffset)!=t.from&&i.collapse(r,s)}moveToLine(e){let t=this.dom,i;if(e.node!=t)return e;for(let r=e.offset;!i&&r<t.childNodes.length;r++){let s=Ua.get(t.childNodes[r]);s instanceof bu&&(i=s.domAtPos(0))}for(let r=e.offset-1;!i&&r>=0;r--){let s=Ua.get(t.childNodes[r]);s instanceof bu&&(i=s.domAtPos(s.length))}return i?new sc(i.node,i.offset,!0):e}nearest(e){for(let t=e;t;){let i=Ua.get(t);if(i&&i.rootView==this)return i;t=t.parentNode}return null}posFromDOM(e,t){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,t)+i.posAtStart}domAtPos(e){let{i:t,off:i}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let r=this.children[t];if(i<r.length||r instanceof bu)break;t++,i=0}return this.children[t].domAtPos(i)}coordsAt(e,t){let i=null,r=0;for(let s=this.length,o=this.children.length-1;o>=0;o--){let l=this.children[o],h=s-l.breakAfter,p=h-l.length;if(h<e)break;p<=e&&(p<e||l.covers(-1))&&(h>e||l.covers(1))&&(!i||l instanceof bu&&!(i instanceof bu&&t>=0))&&(i=l,r=p),s=p}return i?i.coordsAt(e-r,t):null}coordsForChar(e){let{i:t,off:i}=this.childPos(e,1),r=this.children[t];if(!(r instanceof bu))return null;for(;r.children.length;){let{i:l,off:h}=r.childPos(i,1);for(;;l++){if(l==r.children.length)return null;if((r=r.children[l]).length)break}i=h}if(!(r instanceof ih))return null;let s=dc(r.text,i);if(s==i)return null;let o=bp(r.dom,i,s).getClientRects();for(let l=0;l<o.length;l++){let h=o[l];if(l==o.length-1||h.top<h.bottom&&h.left<h.right)return h}return null}measureVisibleLineHeights(e){let t=[],{from:i,to:r}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1,h=this.view.textDirection==Kl.LTR;for(let p=0,y=0;y<this.children.length;y++){let w=this.children[y],F=p+w.length;if(F>r)break;if(p>=i){let j=w.dom.getBoundingClientRect();if(t.push(j.height),o){let Q=w.dom.lastChild,he=Q?og(Q):[];if(he.length){let ye=he[he.length-1],Le=h?ye.right-j.left:j.right-ye.left;Le>l&&(l=Le,this.minWidth=s,this.minWidthFrom=p,this.minWidthTo=F)}}}p=F+w.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?Kl.RTL:Kl.LTR}measureTextSize(){for(let s of this.children)if(s instanceof bu){let o=s.measureTextSize();if(o)return o}let e=document.createElement("div"),t,i,r;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=og(e.firstChild)[0];t=e.getBoundingClientRect().height,i=s?s.width/27:7,r=s?s.height:t,e.remove()}),{lineHeight:t,charWidth:i,textHeight:r}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new ST(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let i=0,r=0;;r++){let s=r==t.viewports.length?null:t.viewports[r],o=s?s.from-1:this.length;if(o>i){let l=(t.lineBlockAt(o).bottom-t.lineBlockAt(i).top)/this.view.scaleY;e.push(Ta.replace({widget:new rO(l),block:!0,inclusive:!0,isBlockGap:!0}).range(i,o))}if(!s)break;i=s.to+1}return Ta.set(e)}updateDeco(){let e=0,t=this.view.state.facet(pg).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),i=!1,r=this.view.state.facet(ZT).map((s,o)=>{let l=typeof s=="function";return l&&(i=!0),l?s(this.view):s});for(r.length&&(this.dynamicDecorationMap[e++]=i,t.push(nl.join(r))),this.decorations=[...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let p=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=p.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let p of this.view.state.facet(GT))try{if(p(this.view,e.range,e))return!0}catch(y){pc(this.view.state,y,"scroll handler")}let{range:t}=e,i=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),r;if(!i)return;!t.empty&&(r=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(i={left:Math.min(i.left,r.left),top:Math.min(i.top,r.top),right:Math.max(i.right,r.right),bottom:Math.max(i.bottom,r.bottom)});let s=nO(this.view),o={left:i.left-s.left,top:i.top-s.top,right:i.right+s.right,bottom:i.bottom+s.bottom},{offsetWidth:l,offsetHeight:h}=this.view.scrollDOM;TL(this.view.scrollDOM,o,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,l),-l),Math.max(Math.min(e.yMargin,h),-h),this.view.textDirection==Kl.LTR)}}function XL(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}class rO extends lg{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}function sO(n,e){let t=n.observer.selectionRange;if(!t.focusNode)return null;let i=wT(t.focusNode,t.focusOffset),r=ET(t.focusNode,t.focusOffset),s=i||r;if(r&&i&&r.node!=i.node){let l=Ua.get(r.node);if(!l||l instanceof ih&&l.text!=r.node.nodeValue)s=r;else if(n.docView.lastCompositionAfterCursor){let h=Ua.get(i.node);!h||h instanceof ih&&h.text!=i.node.nodeValue||(s=r)}}if(n.docView.lastCompositionAfterCursor=s!=i,!s)return null;let o=e-s.offset;return{from:o,to:o+s.node.nodeValue.length,node:s.node}}function YL(n,e,t){let i=sO(n,t);if(!i)return null;let{node:r,from:s,to:o}=i,l=r.nodeValue;if(/[\n\r]/.test(l)||n.state.doc.sliceString(i.from,i.to)!=l)return null;let h=e.invertedDesc,p=new Hc(h.mapPos(s),h.mapPos(o),s,o),y=[];for(let w=r.parentNode;;w=w.parentNode){let F=Ua.get(w);if(F instanceof qh)y.push({node:w,deco:F.mark});else{if(F instanceof bu||w.nodeName=="DIV"&&w.parentNode==n.contentDOM)return{range:p,text:r,marks:y,line:w};if(w!=n.contentDOM)y.push({node:w,deco:new ug({inclusive:!0,attributes:NL(w),tagName:w.tagName.toLowerCase()})});else return null}}}function GL(n,e){return n.nodeType!=1?0:(e&&n.childNodes[e-1].contentEditable=="false"?1:0)|(e<n.childNodes.length&&n.childNodes[e].contentEditable=="false"?2:0)}let KL=class{constructor(){this.changes=[]}compareRange(e,t){Lb(e,t,this.changes)}comparePoint(e,t){Lb(e,t,this.changes)}};function ZL(n,e,t){let i=new KL;return nl.compare(n,e,t,i),i.changes}function JL(n,e){for(let t=n;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function e$(n,e){let t=!1;return e&&n.iterChangedRanges((i,r)=>{i<e.to&&r>e.from&&(t=!0)}),t}function t$(n,e,t=1){let i=n.charCategorizer(e),r=n.doc.lineAt(e),s=e-r.from;if(r.length==0)return ki.cursor(e);s==0?t=1:s==r.length&&(t=-1);let o=s,l=s;t<0?o=dc(r.text,s,!1):l=dc(r.text,s);let h=i(r.text.slice(o,l));for(;o>0;){let p=dc(r.text,o,!1);if(i(r.text.slice(p,o))!=h)break;o=p}for(;l<r.length;){let p=dc(r.text,l);if(i(r.text.slice(l,p))!=h)break;l=p}return ki.range(o+r.from,l+r.from)}function n$(n,e){return e.left>n?e.left-n:Math.max(0,n-e.right)}function i$(n,e){return e.top>n?e.top-n:Math.max(0,n-e.bottom)}function Qb(n,e){return n.top<e.bottom-1&&n.bottom>e.top+1}function oO(n,e){return e<n.top?{top:e,left:n.left,right:n.right,bottom:n.bottom}:n}function aO(n,e){return e>n.bottom?{top:n.top,left:n.left,right:n.right,bottom:e}:n}function Xb(n,e,t){let i,r,s,o,l=!1,h,p,y,w;for(let Q=n.firstChild;Q;Q=Q.nextSibling){let he=og(Q);for(let ye=0;ye<he.length;ye++){let Le=he[ye];r&&Qb(r,Le)&&(Le=oO(aO(Le,r.bottom),r.top));let et=n$(e,Le),Me=i$(t,Le);if(et==0&&Me==0)return Q.nodeType==3?lO(Q,e,t):Xb(Q,e,t);if(!i||o>Me||o==Me&&s>et){i=Q,r=Le,s=et,o=Me;let ke=Me?t<Le.top?-1:1:et?e<Le.left?-1:1:0;l=!ke||(ke>0?ye<he.length-1:ye>0)}et==0?t>Le.bottom&&(!y||y.bottom<Le.bottom)?(h=Q,y=Le):t<Le.top&&(!w||w.top>Le.top)&&(p=Q,w=Le):y&&Qb(y,Le)?y=aO(y,Le.bottom):w&&Qb(w,Le)&&(w=oO(w,Le.top))}}if(y&&y.bottom>=t?(i=h,r=y):w&&w.top<=t&&(i=p,r=w),!i)return{node:n,offset:0};let F=Math.max(r.left,Math.min(r.right,e));if(i.nodeType==3)return lO(i,F,t);if(l&&i.contentEditable!="false")return Xb(i,F,t);let j=Array.prototype.indexOf.call(n.childNodes,i)+(e>=(r.left+r.right)/2?1:0);return{node:n,offset:j}}function lO(n,e,t){let i=n.nodeValue.length,r=-1,s=1e9,o=0;for(let l=0;l<i;l++){let h=bp(n,l,l+1).getClientRects();for(let p=0;p<h.length;p++){let y=h[p];if(y.top==y.bottom)continue;o||(o=e-y.left);let w=(y.top>t?y.top-t:t-y.bottom)-1;if(y.left-1<=e&&y.right+1>=e&&w<s){let F=e>=(y.left+y.right)/2,j=F;if((ns.chrome||ns.gecko)&&bp(n,l).getBoundingClientRect().left==y.right&&(j=!F),w<=0)return{node:n,offset:l+(j?1:0)};r=l+(j?1:0),s=w}}}return{node:n,offset:r>-1?r:o>0?n.nodeValue.length:0}}function uO(n,e,t,i=-1){var r,s;let o=n.contentDOM.getBoundingClientRect(),l=o.top+n.viewState.paddingTop,h,{docHeight:p}=n.viewState,{x:y,y:w}=e,F=w-l;if(F<0)return 0;if(F>p)return n.state.doc.length;for(let ke=n.viewState.heightOracle.textHeight/2,Qe=!1;h=n.elementAtHeight(F),h.type!=Qh.Text;)for(;F=i>0?h.bottom+ke:h.top-ke,!(F>=0&&F<=p);){if(Qe)return t?null:0;Qe=!0,i=-i}w=l+F;let j=h.from;if(j<n.viewport.from)return n.viewport.from==0?0:t?null:cO(n,o,h,y,w);if(j>n.viewport.to)return n.viewport.to==n.state.doc.length?n.state.doc.length:t?null:cO(n,o,h,y,w);let Q=n.dom.ownerDocument,he=n.root.elementFromPoint?n.root:Q,ye=he.elementFromPoint(y,w);ye&&!n.contentDOM.contains(ye)&&(ye=null),ye||(y=Math.max(o.left+1,Math.min(o.right-1,y)),ye=he.elementFromPoint(y,w),ye&&!n.contentDOM.contains(ye)&&(ye=null));let Le,et=-1;if(ye&&((r=n.docView.nearest(ye))===null||r===void 0?void 0:r.isEditable)!=!1){if(Q.caretPositionFromPoint){let ke=Q.caretPositionFromPoint(y,w);ke&&({offsetNode:Le,offset:et}=ke)}else if(Q.caretRangeFromPoint){let ke=Q.caretRangeFromPoint(y,w);ke&&({startContainer:Le,startOffset:et}=ke,(!n.contentDOM.contains(Le)||ns.safari&&r$(Le,et,y)||ns.chrome&&s$(Le,et,y))&&(Le=void 0))}}if(!Le||!n.docView.dom.contains(Le)){let ke=bu.find(n.docView,j);if(!ke)return F>h.top+h.height/2?h.to:h.from;({node:Le,offset:et}=Xb(ke.dom,y,w))}let Me=n.docView.nearest(Le);if(!Me)return null;if(Me.isWidget&&((s=Me.dom)===null||s===void 0?void 0:s.nodeType)==1){let ke=Me.dom.getBoundingClientRect();return e.y<ke.top||e.y<=ke.bottom&&e.x<=(ke.left+ke.right)/2?Me.posAtStart:Me.posAtEnd}else return Me.localPosFromDOM(Le,et)+Me.posAtStart}function cO(n,e,t,i,r){let s=Math.round((i-e.left)*n.defaultCharacterWidth);if(n.lineWrapping&&t.height>n.defaultLineHeight*1.5){let l=n.viewState.heightOracle.textHeight,h=Math.floor((r-t.top-(n.defaultLineHeight-l)*.5)/l);s+=h*n.viewState.heightOracle.lineLength}let o=n.state.sliceDoc(t.from,t.to);return t.from+bL(o,s,n.state.tabSize)}function r$(n,e,t){let i;if(n.nodeType!=3||e!=(i=n.nodeValue.length))return!1;for(let r=n.nextSibling;r;r=r.nextSibling)if(r.nodeType!=1||r.nodeName!="BR")return!1;return bp(n,i-1,i).getBoundingClientRect().left>t}function s$(n,e,t){if(e!=0)return!1;for(let r=n;;){let s=r.parentNode;if(!s||s.nodeType!=1||s.firstChild!=r)return!1;if(s.classList.contains("cm-line"))break;r=s}let i=n.nodeType==1?n.getBoundingClientRect():bp(n,0,Math.max(n.nodeValue.length,1)).getBoundingClientRect();return t-i.left>5}function o$(n,e){let t=n.lineBlockAt(e);if(Array.isArray(t.type)){for(let i of t.type)if(i.to>e||i.to==e&&(i.to==t.to||i.type==Qh.Text))return i}return t}function a$(n,e,t,i){let r=o$(n,e.head),s=!i||r.type!=Qh.Text||!(n.lineWrapping||r.widgetLineBreaks)?null:n.coordsAtPos(e.assoc<0&&e.head>r.from?e.head-1:e.head);if(s){let o=n.dom.getBoundingClientRect(),l=n.textDirectionAt(r.from),h=n.posAtCoords({x:t==(l==Kl.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(h!=null)return ki.cursor(h,t?-1:1)}return ki.cursor(t?r.to:r.from,t?-1:1)}function hO(n,e,t,i){let r=n.state.doc.lineAt(e.head),s=n.bidiSpans(r),o=n.textDirectionAt(r.from);for(let l=e,h=null;;){let p=UL(r,s,o,l,t),y=WT;if(!p){if(r.number==(t?n.state.doc.lines:1))return l;y=`
`,r=n.state.doc.line(r.number+(t?1:-1)),s=n.bidiSpans(r),p=n.visualLineSide(r,!t)}if(h){if(!h(y))return l}else{if(!i)return p;h=i(y)}l=p}}function l$(n,e,t){let i=n.state.charCategorizer(e),r=i(t);return s=>{let o=i(s);return r==Vc.Space&&(r=o),r==o}}function u$(n,e,t,i){let r=e.head,s=t?1:-1;if(r==(t?n.state.doc.length:0))return ki.cursor(r,e.assoc);let o=e.goalColumn,l,h=n.contentDOM.getBoundingClientRect(),p=n.coordsAtPos(r,e.assoc||-1),y=n.documentTop;if(p)o==null&&(o=p.left-h.left),l=s<0?p.top:p.bottom;else{let j=n.viewState.lineBlockAt(r);o==null&&(o=Math.min(h.right-h.left,n.defaultCharacterWidth*(r-j.from))),l=(s<0?j.top:j.bottom)+y}let w=h.left+o,F=i!=null?i:n.viewState.heightOracle.textHeight>>1;for(let j=0;;j+=10){let Q=l+(F+j)*s,he=uO(n,{x:w,y:Q},!1,s);if(Q<h.top||Q>h.bottom||(s<0?he<r:he>r)){let ye=n.docView.coordsForChar(he),Le=!ye||Q<ye.top?-1:1;return ki.cursor(he,Le,void 0,o)}}}function Q0(n,e,t){for(;;){let i=0;for(let r of n)r.between(e-1,e+1,(s,o,l)=>{if(e>s&&e<o){let h=i||t||(e-s<o-e?-1:1);e=h<0?s:o,i=h}});if(!i)return e}}function Yb(n,e,t){let i=Q0(n.state.facet(qb).map(r=>r(n)),t.from,e.head>t.from?-1:1);return i==t.from?t:ki.cursor(i,i<t.from?1:-1)}class c${setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,ns.safari&&e.contentDOM.addEventListener("input",()=>null),ns.gecko&&A$(e.contentDOM.ownerDocument)}handleEvent(e){!v$(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||this.runHandlers(e.type,e)}runHandlers(e,t){let i=this.handlers[e];if(i){for(let r of i.observers)r(this.view,t);for(let r of i.handlers){if(t.defaultPrevented)break;if(r(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=h$(e),i=this.handlers,r=this.view.contentDOM;for(let s in t)if(s!="scroll"){let o=!t[s].handlers.length,l=i[s];l&&o!=!l.handlers.length&&(r.removeEventListener(s,this.handleEvent),l=null),l||r.addEventListener(s,this.handleEvent,{passive:o})}for(let s in i)s!="scroll"&&!t[s]&&r.removeEventListener(s,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(e.keyCode!=27&&fO.indexOf(e.keyCode)<0&&(this.view.inputState.lastEscPress=0),ns.android&&ns.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return ns.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=pO.find(i=>i.keyCode==e.keyCode))&&!e.ctrlKey||d$.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,Ef(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:ns.safari&&!ns.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function dO(n,e){return(t,i)=>{try{return e.call(n,i,t)}catch(r){pc(t.state,r)}}}function h$(n){let e=Object.create(null);function t(i){return e[i]||(e[i]={observers:[],handlers:[]})}for(let i of n){let r=i.spec;if(r&&r.domEventHandlers)for(let s in r.domEventHandlers){let o=r.domEventHandlers[s];o&&t(s).handlers.push(dO(i.value,o))}if(r&&r.domEventObservers)for(let s in r.domEventObservers){let o=r.domEventObservers[s];o&&t(s).observers.push(dO(i.value,o))}}for(let i in rh)t(i).handlers.push(rh[i]);for(let i in Uc)t(i).observers.push(Uc[i]);return e}const pO=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],d$="dthko",fO=[16,17,18,20,91,92,224,225],X0=6;function Y0(n){return Math.max(0,n)*.7+8}function p$(n,e){return Math.max(Math.abs(n.clientX-e.clientX),Math.abs(n.clientY-e.clientY))}class f${constructor(e,t,i,r){this.view=e,this.startEvent=t,this.style=i,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParent=OL(e.contentDOM),this.atoms=e.state.facet(qb).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(ba.allowMultipleSelections)&&m$(e,t),this.dragging=y$(e,t)&&CO(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){var t;if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&p$(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let i=0,r=0,s=((t=this.scrollParent)===null||t===void 0?void 0:t.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight},o=nO(this.view);e.clientX-o.left<=s.left+X0?i=-Y0(s.left-e.clientX):e.clientX+o.right>=s.right-X0&&(i=Y0(e.clientX-s.right)),e.clientY-o.top<=s.top+X0?r=-Y0(s.top-e.clientY):e.clientY+o.bottom>=s.bottom-X0&&(r=Y0(e.clientY-s.bottom)),this.setScrollSpeed(i,r)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let t=null;for(let i=0;i<e.ranges.length;i++){let r=e.ranges[i],s=null;if(r.empty){let o=Q0(this.atoms,r.from,0);o!=r.from&&(s=ki.cursor(o,-1))}else{let o=Q0(this.atoms,r.from,-1),l=Q0(this.atoms,r.to,1);(o!=r.from||l!=r.to)&&(s=ki.range(r.from==r.anchor?o:l,r.from==r.head?o:l))}s&&(t||(t=e.ranges.slice()),t[i]=s)}return t?ki.create(t,e.mainIndex):e}select(e){let{view:t}=this,i=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function m$(n,e){let t=n.state.facet(HT);return t.length?t[0](e):ns.mac?e.metaKey:e.ctrlKey}function g$(n,e){let t=n.state.facet(UT);return t.length?t[0](e):ns.mac?!e.altKey:!e.ctrlKey}function y$(n,e){let{main:t}=n.state.selection;if(t.empty)return!1;let i=$0(n.root);if(!i||i.rangeCount==0)return!0;let r=i.getRangeAt(0).getClientRects();for(let s=0;s<r.length;s++){let o=r[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function v$(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,i;t!=n.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(i=Ua.get(t))&&i.ignoreEvent(e))return!1;return!0}const rh=Object.create(null),Uc=Object.create(null),mO=ns.ie&&ns.ie_version<15||ns.ios&&ns.webkit_version<604;function x$(n){let e=n.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{n.focus(),t.remove(),gO(n,t.value)},50)}function gO(n,e){let{state:t}=n,i,r=1,s=t.toText(e),o=s.lines==t.selection.ranges.length;if(Gb!=null&&t.selection.ranges.every(h=>h.empty)&&Gb==s.toString()){let h=-1;i=t.changeByRange(p=>{let y=t.doc.lineAt(p.from);if(y.from==h)return{range:p};h=y.from;let w=t.toText((o?s.line(r++).text:e)+t.lineBreak);return{changes:{from:y.from,insert:w},range:ki.cursor(p.from+w.length)}})}else o?i=t.changeByRange(h=>{let p=s.line(r++);return{changes:{from:h.from,to:h.to,insert:p.text},range:ki.cursor(h.from+p.length)}}):i=t.replaceSelection(s);n.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}Uc.scroll=n=>{n.inputState.lastScrollTop=n.scrollDOM.scrollTop,n.inputState.lastScrollLeft=n.scrollDOM.scrollLeft},rh.keydown=(n,e)=>(n.inputState.setSelectionOrigin("select"),e.keyCode==27&&(n.inputState.lastEscPress=Date.now()),!1),Uc.touchstart=(n,e)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")},Uc.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")},rh.mousedown=(n,e)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let i of n.state.facet(zT))if(t=i(n,e),t)break;if(!t&&e.button==0&&(t=w$(n,e)),t){let i=!n.hasFocus;n.inputState.startMouseSelection(new f$(n,e,t,i)),i&&n.observer.ignore(()=>vT(n.contentDOM));let r=n.inputState.mouseSelection;if(r)return r.start(e),r.dragging===!1}return!1};function yO(n,e,t,i){if(i==1)return ki.cursor(e,t);if(i==2)return t$(n.state,e,t);{let r=bu.find(n.docView,e),s=n.state.doc.lineAt(r?r.posAtEnd:e),o=r?r.posAtStart:s.from,l=r?r.posAtEnd:s.to;return l<n.state.doc.length&&l==s.to&&l++,ki.range(o,l)}}let vO=(n,e)=>n>=e.top&&n<=e.bottom,xO=(n,e,t)=>vO(e,t)&&n>=t.left&&n<=t.right;function b$(n,e,t,i){let r=bu.find(n.docView,e);if(!r)return 1;let s=e-r.posAtStart;if(s==0)return 1;if(s==r.length)return-1;let o=r.coordsAt(s,-1);if(o&&xO(t,i,o))return-1;let l=r.coordsAt(s,1);return l&&xO(t,i,l)?1:o&&vO(i,o)?-1:1}function bO(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:b$(n,t,e.clientX,e.clientY)}}const D$=ns.ie&&ns.ie_version<=11;let DO=null,wO=0,EO=0;function CO(n){if(!D$)return n.detail;let e=DO,t=EO;return DO=n,EO=Date.now(),wO=!e||t>Date.now()-400&&Math.abs(e.clientX-n.clientX)<2&&Math.abs(e.clientY-n.clientY)<2?(wO+1)%3:1}function w$(n,e){let t=bO(n,e),i=CO(e),r=n.state.selection;return{update(s){s.docChanged&&(t.pos=s.changes.mapPos(t.pos),r=r.map(s.changes))},get(s,o,l){let h=bO(n,s),p,y=yO(n,h.pos,h.bias,i);if(t.pos!=h.pos&&!o){let w=yO(n,t.pos,t.bias,i),F=Math.min(w.from,y.from),j=Math.max(w.to,y.to);y=F<y.from?ki.range(F,j):ki.range(j,F)}return o?r.replaceRange(r.main.extend(y.from,y.to)):l&&i==1&&r.ranges.length>1&&(p=E$(r,h.pos))?p:l?r.addRange(y):ki.create([y])}}}function E$(n,e){for(let t=0;t<n.ranges.length;t++){let{from:i,to:r}=n.ranges[t];if(i<=e&&r>=e)return ki.create(n.ranges.slice(0,t).concat(n.ranges.slice(t+1)),n.mainIndex==t?0:n.mainIndex-(n.mainIndex>t?1:0))}return null}rh.dragstart=(n,e)=>{let{selection:{main:t}}=n.state;if(e.target.draggable){let r=n.docView.nearest(e.target);if(r&&r.isWidget){let s=r.posAtStart,o=s+r.length;(s>=t.to||o<=t.from)&&(t=ki.range(s,o))}}let{inputState:i}=n;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",n.state.sliceDoc(t.from,t.to)),e.dataTransfer.effectAllowed="copyMove"),!1},rh.dragend=n=>(n.inputState.draggedContent=null,!1);function SO(n,e,t,i){if(!t)return;let r=n.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=n.inputState,o=i&&s&&g$(n,e)?{from:s.from,to:s.to}:null,l={from:r,insert:t},h=n.state.changes(o?[o,l]:l);n.focus(),n.dispatch({changes:h,selection:{anchor:h.mapPos(r,-1),head:h.mapPos(r,1)},userEvent:o?"move.drop":"input.drop"}),n.inputState.draggedContent=null}rh.drop=(n,e)=>{if(!e.dataTransfer)return!1;if(n.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let i=Array(t.length),r=0,s=()=>{++r==t.length&&SO(n,e,i.filter(o=>o!=null).join(n.state.lineBreak),!1)};for(let o=0;o<t.length;o++){let l=new FileReader;l.onerror=s,l.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(l.result)||(i[o]=l.result),s()},l.readAsText(t[o])}return!0}else{let i=e.dataTransfer.getData("Text");if(i)return SO(n,e,i,!0),!0}return!1},rh.paste=(n,e)=>{if(n.state.readOnly)return!0;n.observer.flush();let t=mO?null:e.clipboardData;return t?(gO(n,t.getData("text/plain")||t.getData("text/uri-list")),!0):(x$(n),!1)};function C$(n,e){let t=n.dom.parentNode;if(!t)return;let i=t.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),n.focus()},50)}function S$(n){let e=[],t=[],i=!1;for(let r of n.selection.ranges)r.empty||(e.push(n.sliceDoc(r.from,r.to)),t.push(r));if(!e.length){let r=-1;for(let{from:s}of n.selection.ranges){let o=n.doc.lineAt(s);o.number>r&&(e.push(o.text),t.push({from:o.from,to:Math.min(n.doc.length,o.to+1)})),r=o.number}i=!0}return{text:e.join(n.lineBreak),ranges:t,linewise:i}}let Gb=null;rh.copy=rh.cut=(n,e)=>{let{text:t,ranges:i,linewise:r}=S$(n.state);if(!t&&!r)return!1;Gb=r?t:null,e.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let s=mO?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",t),!0):(C$(n,t),!1)};const AO=yp.define();function TO(n,e){let t=[];for(let i of n.facet(XT)){let r=i(n,e);r&&t.push(r)}return t?n.update({effects:t,annotations:AO.of(!0)}):null}function OO(n){setTimeout(()=>{let e=n.hasFocus;if(e!=n.inputState.notifiedFocused){let t=TO(n.state,e);t?n.dispatch(t):n.update([])}},10)}Uc.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),OO(n)},Uc.blur=n=>{n.observer.clearSelectionRange(),OO(n)},Uc.compositionstart=Uc.compositionupdate=n=>{n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0)},Uc.compositionend=n=>{n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionPendingKey=!0,n.inputState.compositionPendingChange=n.observer.pendingRecords().length>0,n.inputState.compositionFirstChange=null,ns.chrome&&ns.android?n.observer.flushSoon():n.inputState.compositionPendingChange?Promise.resolve().then(()=>n.observer.flush()):setTimeout(()=>{n.inputState.composing<0&&n.docView.hasComposition&&n.update([])},50)},Uc.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()},rh.beforeinput=(n,e)=>{var t;let i;if(ns.chrome&&ns.android&&(i=pO.find(r=>r.inputType==e.inputType))&&(n.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let r=((t=window.visualViewport)===null||t===void 0?void 0:t.height)||0;setTimeout(()=>{var s;(((s=window.visualViewport)===null||s===void 0?void 0:s.height)||0)>r+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}return ns.ios&&e.inputType=="deleteContentForward"&&n.observer.flushSoon(),ns.safari&&e.inputType=="insertText"&&n.inputState.composing>=0&&setTimeout(()=>Uc.compositionend(n,e),20),!1};const kO=new Set;function A$(n){kO.has(n)||(kO.add(n),n.addEventListener("copy",()=>{}),n.addEventListener("cut",()=>{}))}const _O=["pre-wrap","normal","pre-line","break-spaces"];class T${constructor(e){this.lineWrapping=e,this.doc=da.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}heightForGap(e,t){let i=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((t-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return _O.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let i=0;i<e.length;i++){let r=e[i];r<0?i++:this.heightSamples[Math.floor(r*10)]||(t=!0,this.heightSamples[Math.floor(r*10)]=!0)}return t}refresh(e,t,i,r,s,o){let l=_O.indexOf(e)>-1,h=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=l;if(this.lineWrapping=l,this.lineHeight=t,this.charWidth=i,this.textHeight=r,this.lineLength=s,h){this.heightSamples={};for(let p=0;p<o.length;p++){let y=o[p];y<0?p++:this.heightSamples[Math.floor(y*10)]=!0}}return h}}class O${constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class bh{constructor(e,t,i,r,s){this.from=e,this.length=t,this.top=i,this.height=r,this._content=s}get type(){return typeof this._content=="number"?Qh.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Ed?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new bh(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var al=function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n}(al||(al={}));const G0=.001;class fc{constructor(e,t,i=2){this.length=e,this.height=t,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,t){this.height!=t&&(Math.abs(this.height-t)>G0&&(e.heightChanged=!0),this.height=t)}replace(e,t,i){return fc.of(i)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,i,r){let s=this,o=i.doc;for(let l=r.length-1;l>=0;l--){let{fromA:h,toA:p,fromB:y,toB:w}=r[l],F=s.lineAt(h,al.ByPosNoHeight,i.setDoc(t),0,0),j=F.to>=p?F:s.lineAt(p,al.ByPosNoHeight,i,0,0);for(w+=j.to-p,p=j.to;l>0&&F.from<=r[l-1].toA;)h=r[l-1].fromA,y=r[l-1].fromB,l--,h<F.from&&(F=s.lineAt(h,al.ByPosNoHeight,i,0,0));y+=F.from-h,h=F.from;let Q=Kb.build(i.setDoc(o),e,y,w);s=s.replace(h,p,Q)}return s.updateHeight(i,0)}static empty(){return new Mc(0,0)}static of(e){if(e.length==1)return e[0];let t=0,i=e.length,r=0,s=0;for(;;)if(t==i)if(r>s*2){let l=e[t-1];l.break?e.splice(--t,1,l.left,null,l.right):e.splice(--t,1,l.left,l.right),i+=1+l.break,r-=l.size}else if(s>r*2){let l=e[i];l.break?e.splice(i,1,l.left,null,l.right):e.splice(i,1,l.left,l.right),i+=2+l.break,s-=l.size}else break;else if(r<s){let l=e[t++];l&&(r+=l.size)}else{let l=e[--i];l&&(s+=l.size)}let o=0;return e[t-1]==null?(o=1,t--):e[t]==null&&(o=1,i++),new k$(fc.of(e.slice(0,t)),o,fc.of(e.slice(i)))}}fc.prototype.size=1;class PO extends fc{constructor(e,t,i){super(e,t),this.deco=i}blockAt(e,t,i,r){return new bh(r,this.length,i,this.height,this.deco||0)}lineAt(e,t,i,r,s){return this.blockAt(0,i,r,s)}forEachLine(e,t,i,r,s,o){e<=s+this.length&&t>=s&&o(this.blockAt(0,i,r,s))}updateHeight(e,t=0,i=!1,r){return r&&r.from<=t&&r.more&&this.setHeight(e,r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Mc extends PO{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,i,r){return new bh(r,this.length,i,this.height,this.breaks)}replace(e,t,i){let r=i[0];return i.length==1&&(r instanceof Mc||r instanceof Xu&&r.flags&4)&&Math.abs(this.length-r.length)<10?(r instanceof Xu?r=new Mc(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):fc.of(i)}updateHeight(e,t=0,i=!1,r){return r&&r.from<=t&&r.more?this.setHeight(e,r.heights[r.index++]):(i||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Xu extends fc{constructor(e){super(e,0)}heightMetrics(e,t){let i=e.doc.lineAt(t).number,r=e.doc.lineAt(t+this.length).number,s=r-i+1,o,l=0;if(e.lineWrapping){let h=Math.min(this.height,e.lineHeight*s);o=h/s,this.length>s+1&&(l=(this.height-h)/(this.length-s-1))}else o=this.height/s;return{firstLine:i,lastLine:r,perLine:o,perChar:l}}blockAt(e,t,i,r){let{firstLine:s,lastLine:o,perLine:l,perChar:h}=this.heightMetrics(t,r);if(t.lineWrapping){let p=r+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length)),y=t.doc.lineAt(p),w=l+y.length*h,F=Math.max(i,e-w/2);return new bh(y.from,y.length,F,w,0)}else{let p=Math.max(0,Math.min(o-s,Math.floor((e-i)/l))),{from:y,length:w}=t.doc.line(s+p);return new bh(y,w,i+l*p,l,0)}}lineAt(e,t,i,r,s){if(t==al.ByHeight)return this.blockAt(e,i,r,s);if(t==al.ByPosNoHeight){let{from:j,to:Q}=i.doc.lineAt(e);return new bh(j,Q-j,0,0,0)}let{firstLine:o,perLine:l,perChar:h}=this.heightMetrics(i,s),p=i.doc.lineAt(e),y=l+p.length*h,w=p.number-o,F=r+l*w+h*(p.from-s-w);return new bh(p.from,p.length,Math.max(r,Math.min(F,r+this.height-y)),y,0)}forEachLine(e,t,i,r,s,o){e=Math.max(e,s),t=Math.min(t,s+this.length);let{firstLine:l,perLine:h,perChar:p}=this.heightMetrics(i,s);for(let y=e,w=r;y<=t;){let F=i.doc.lineAt(y);if(y==e){let Q=F.number-l;w+=h*Q+p*(e-s-Q)}let j=h+p*F.length;o(new bh(F.from,F.length,w,j,0)),w+=j,y=F.to+1}}replace(e,t,i){let r=this.length-t;if(r>0){let s=i[i.length-1];s instanceof Xu?i[i.length-1]=new Xu(s.length+r):i.push(null,new Xu(r-1))}if(e>0){let s=i[0];s instanceof Xu?i[0]=new Xu(e+s.length):i.unshift(new Xu(e-1),null)}return fc.of(i)}decomposeLeft(e,t){t.push(new Xu(e-1),null)}decomposeRight(e,t){t.push(null,new Xu(this.length-e-1))}updateHeight(e,t=0,i=!1,r){let s=t+this.length;if(r&&r.from<=t+this.length&&r.more){let o=[],l=Math.max(t,r.from),h=-1;for(r.from>t&&o.push(new Xu(r.from-t-1).updateHeight(e,t));l<=s&&r.more;){let y=e.doc.lineAt(l).length;o.length&&o.push(null);let w=r.heights[r.index++];h==-1?h=w:Math.abs(w-h)>=G0&&(h=-2);let F=new Mc(y,w);F.outdated=!1,o.push(F),l+=y+1}l<=s&&o.push(null,new Xu(s-l).updateHeight(e,l));let p=fc.of(o);return(h<0||Math.abs(p.height-this.height)>=G0||Math.abs(h-this.heightMetrics(e,t).perLine)>=G0)&&(e.heightChanged=!0),p}else(i||this.outdated)&&(this.setHeight(e,e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class k$ extends fc{constructor(e,t,i){super(e.length+t+i.length,e.height+i.height,t|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,t,i,r){let s=i+this.left.height;return e<s?this.left.blockAt(e,t,i,r):this.right.blockAt(e,t,s,r+this.left.length+this.break)}lineAt(e,t,i,r,s){let o=r+this.left.height,l=s+this.left.length+this.break,h=t==al.ByHeight?e<o:e<l,p=h?this.left.lineAt(e,t,i,r,s):this.right.lineAt(e,t,i,o,l);if(this.break||(h?p.to<l:p.from>l))return p;let y=t==al.ByPosNoHeight?al.ByPosNoHeight:al.ByPos;return h?p.join(this.right.lineAt(l,y,i,o,l)):this.left.lineAt(l,y,i,r,s).join(p)}forEachLine(e,t,i,r,s,o){let l=r+this.left.height,h=s+this.left.length+this.break;if(this.break)e<h&&this.left.forEachLine(e,t,i,r,s,o),t>=h&&this.right.forEachLine(e,t,i,l,h,o);else{let p=this.lineAt(h,al.ByPos,i,r,s);e<p.from&&this.left.forEachLine(e,p.from-1,i,r,s,o),p.to>=e&&p.from<=t&&o(p),t>p.to&&this.right.forEachLine(p.to+1,t,i,l,h,o)}}replace(e,t,i){let r=this.left.length+this.break;if(t<r)return this.balanced(this.left.replace(e,t,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,t-r,i));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let l of i)s.push(l);if(e>0&&FO(s,o-1),t<this.length){let l=s.length;this.decomposeRight(t,s),FO(s,l)}return fc.of(s)}decomposeLeft(e,t){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(i++,e>=i&&t.push(null)),e>i&&this.right.decomposeLeft(e-i,t)}decomposeRight(e,t){let i=this.left.length,r=i+this.break;if(e>=r)return this.right.decomposeRight(e-r,t);e<i&&this.left.decomposeRight(e,t),this.break&&e<r&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?fc.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,i=!1,r){let{left:s,right:o}=this,l=t+s.length+this.break,h=null;return r&&r.from<=t+s.length&&r.more?h=s=s.updateHeight(e,t,i,r):s.updateHeight(e,t,i),r&&r.from<=l+o.length&&r.more?h=o=o.updateHeight(e,l,i,r):o.updateHeight(e,l,i),h?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function FO(n,e){let t,i;n[e]==null&&(t=n[e-1])instanceof Xu&&(i=n[e+1])instanceof Xu&&n.splice(e-1,3,new Xu(t.length+1+i.length))}const _$=5;class Kb{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let i=Math.min(t,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof Mc?r.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new Mc(i-this.pos,-1)),this.writtenTo=i,t>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,i){if(e<t||i.heightRelevant){let r=i.widget?i.widget.estimatedHeight:0,s=i.widget?i.widget.lineBreaks:0;r<0&&(r=this.oracle.lineHeight);let o=t-e;i.block?this.addBlock(new PO(o,r,i)):(o||s||r>=_$)&&this.addLineDeco(r,s,o)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Mc(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let i=new Xu(t-e);return this.oracle.doc.lineAt(e).to==t&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Mc)return e;let t=new Mc(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,i){let r=this.ensureLine();r.length+=i,r.collapsed+=i,r.widgetHeight=Math.max(r.widgetHeight,e),r.breaks+=t,this.writtenTo=this.pos=this.pos+i}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof Mc)&&!this.isCovered?this.nodes.push(new Mc(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let r of this.nodes)r instanceof Mc&&r.updateHeight(this.oracle,i),i+=r?r.length:1;return this.nodes}static build(e,t,i,r){let s=new Kb(i,e);return nl.spans(t,i,r,s,0),s.finish(i)}}function P$(n,e,t){let i=new F$;return nl.compare(n,e,t,i,0),i.changes}class F${constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,i,r){(e<t||i&&i.heightRelevant||r&&r.heightRelevant)&&Lb(e,t,this.changes,5)}}function M$(n,e){let t=n.getBoundingClientRect(),i=n.ownerDocument,r=i.defaultView||window,s=Math.max(0,t.left),o=Math.min(r.innerWidth,t.right),l=Math.max(0,t.top),h=Math.min(r.innerHeight,t.bottom);for(let p=n.parentNode;p&&p!=i.body;)if(p.nodeType==1){let y=p,w=window.getComputedStyle(y);if((y.scrollHeight>y.clientHeight||y.scrollWidth>y.clientWidth)&&w.overflow!="visible"){let F=y.getBoundingClientRect();s=Math.max(s,F.left),o=Math.min(o,F.right),l=Math.max(l,F.top),h=p==n.parentNode?F.bottom:Math.min(h,F.bottom)}p=w.position=="absolute"||w.position=="fixed"?y.offsetParent:y.parentNode}else if(p.nodeType==11)p=p.host;else break;return{left:s-t.left,right:Math.max(s,o)-t.left,top:l-(t.top+e),bottom:Math.max(l,h)-(t.top+e)}}function I$(n,e){let t=n.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class Zb{constructor(e,t,i){this.from=e,this.to=t,this.size=i}static same(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],s=t[i];if(r.from!=s.from||r.to!=s.to||r.size!=s.size)return!1}return!0}draw(e,t){return Ta.replace({widget:new N$(this.size*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class N$ extends lg{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class MO{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=IO,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Kl.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(zb).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new T$(t),this.stateDeco=e.facet(pg).filter(i=>typeof i!="function"),this.heightMap=fc.empty().applyChanges(this.stateDeco,da.empty,this.heightOracle.setDoc(e.doc),[new Hc(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Ta.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let i=0;i<=1;i++){let r=i?t.head:t.anchor;if(!e.some(({from:s,to:o})=>r>=s&&r<=o)){let{from:s,to:o}=this.lineBlockAt(r);e.push(new K0(s,o))}}this.viewports=e.sort((i,r)=>i.from-r.from),this.scaler=this.heightMap.height<=7e6?IO:new L$(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(this.scaler.scale==1?e:mg(e,this.scaler))})}update(e,t=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(pg).filter(y=>typeof y!="function");let r=e.changedRanges,s=Hc.extendWithRanges(r,P$(i,this.stateDeco,e?e.changes:Mu.empty(this.state.doc.length))),o=this.heightMap.height,l=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),this.heightMap.height!=o&&(e.flags|=2),l?(this.scrollAnchorPos=e.changes.mapPos(l.from,-1),this.scrollAnchorHeight=l.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let h=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<h.from||t.range.head>h.to)||!this.viewportIsAppropriate(h))&&(h=this.getViewport(0,t));let p=!e.changes.empty||e.flags&2||h.from!=this.viewport.from||h.to!=this.viewport.to;this.viewport=h,this.updateForViewport(),p&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(qL)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,i=window.getComputedStyle(t),r=this.heightOracle,s=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?Kl.RTL:Kl.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),l=t.getBoundingClientRect(),h=o||this.mustMeasureContent||this.contentDOMHeight!=l.height;this.contentDOMHeight=l.height,this.mustMeasureContent=!1;let p=0,y=0;if(l.width&&l.height){let{scaleX:ke,scaleY:Qe}=yT(t,l);(ke>.005&&Math.abs(this.scaleX-ke)>.005||Qe>.005&&Math.abs(this.scaleY-Qe)>.005)&&(this.scaleX=ke,this.scaleY=Qe,p|=8,o=h=!0)}let w=(parseInt(i.paddingTop)||0)*this.scaleY,F=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=w||this.paddingBottom!=F)&&(this.paddingTop=w,this.paddingBottom=F,p|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(h=!0),this.editorWidth=e.scrollDOM.clientWidth,p|=8);let j=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=j&&(this.scrollAnchorHeight=-1,this.scrollTop=j),this.scrolledToBottom=DT(e.scrollDOM);let Q=(this.printing?I$:M$)(t,this.paddingTop),he=Q.top-this.pixelViewport.top,ye=Q.bottom-this.pixelViewport.bottom;this.pixelViewport=Q;let Le=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(Le!=this.inView&&(this.inView=Le,Le&&(h=!0)),!this.inView&&!this.scrollTarget)return 0;let et=l.width;if((this.contentDOMWidth!=et||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=l.width,this.editorHeight=e.scrollDOM.clientHeight,p|=8),h){let ke=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(ke)&&(o=!0),o||r.lineWrapping&&Math.abs(et-this.contentDOMWidth)>r.charWidth){let{lineHeight:Qe,charWidth:ft,textHeight:bt}=e.docView.measureTextSize();o=Qe>0&&r.refresh(s,Qe,ft,bt,et/ft,ke),o&&(e.docView.minWidth=0,p|=8)}he>0&&ye>0?y=Math.max(he,ye):he<0&&ye<0&&(y=Math.min(he,ye)),r.heightChanged=!1;for(let Qe of this.viewports){let ft=Qe.from==this.viewport.from?ke:e.docView.measureVisibleLineHeights(Qe);this.heightMap=(o?fc.empty().applyChanges(this.stateDeco,da.empty,this.heightOracle,[new Hc(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(r,0,o,new O$(Qe.from,ft))}r.heightChanged&&(p|=2)}let Me=!this.viewportIsAppropriate(this.viewport,y)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return Me&&(this.viewport=this.getViewport(y,this.scrollTarget)),this.updateForViewport(),(p&2||Me)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),p|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),p}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:l}=this,h=new K0(r.lineAt(o-i*1e3,al.ByHeight,s,0,0).from,r.lineAt(l+(1-i)*1e3,al.ByHeight,s,0,0).to);if(t){let{head:p}=t.range;if(p<h.from||p>h.to){let y=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),w=r.lineAt(p,al.ByPos,s,0,0),F;t.y=="center"?F=(w.top+w.bottom)/2-y/2:t.y=="start"||t.y=="nearest"&&p<h.from?F=w.top:F=w.bottom-y,h=new K0(r.lineAt(F-1e3/2,al.ByHeight,s,0,0).from,r.lineAt(F+y+1e3/2,al.ByHeight,s,0,0).to)}}return h}mapViewport(e,t){let i=t.mapPos(e.from,-1),r=t.mapPos(e.to,1);return new K0(this.heightMap.lineAt(i,al.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,al.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},i=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,al.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(t,al.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:l}=this;return(e==0||r<=o-Math.max(10,Math.min(-i,250)))&&(t==this.state.doc.length||s>=l+Math.max(10,Math.min(i,250)))&&r>o-2*1e3&&s<l+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let i=[];for(let r of e)t.touchesRange(r.from,r.to)||i.push(new Zb(t.mapPos(r.from),t.mapPos(r.to),r.size));return i}ensureLineGaps(e,t){let i=this.heightOracle.lineWrapping,r=i?1e4:2e3,s=r>>1,o=r<<1;if(this.defaultTextDirection!=Kl.LTR&&!i)return[];let l=[],h=(p,y,w,F)=>{if(y-p<s)return;let j=this.state.selection.main,Q=[j.from];j.empty||Q.push(j.to);for(let ye of Q)if(ye>p&&ye<y){h(p,ye-10,w,F),h(ye+10,y,w,F);return}let he=R$(e,ye=>ye.from>=w.from&&ye.to<=w.to&&Math.abs(ye.from-p)<s&&Math.abs(ye.to-y)<s&&!Q.some(Le=>ye.from<Le&&ye.to>Le));if(!he){if(y<w.to&&t&&i&&t.visibleRanges.some(ye=>ye.from<=y&&ye.to>=y)){let ye=t.moveToLineBoundary(ki.cursor(y),!1,!0).head;ye>p&&(y=ye)}he=new Zb(p,y,this.gapSize(w,p,y,F))}l.push(he)};for(let p of this.viewportLines){if(p.length<o)continue;let y=B$(p.from,p.to,this.stateDeco);if(y.total<o)continue;let w=this.scrollTarget?this.scrollTarget.range.head:null,F,j;if(i){let Q=r/this.heightOracle.lineLength*this.heightOracle.lineHeight,he,ye;if(w!=null){let Le=J0(y,w),et=((this.visibleBottom-this.visibleTop)/2+Q)/p.height;he=Le-et,ye=Le+et}else he=(this.visibleTop-p.top-Q)/p.height,ye=(this.visibleBottom-p.top+Q)/p.height;F=Z0(y,he),j=Z0(y,ye)}else{let Q=y.total*this.heightOracle.charWidth,he=r*this.heightOracle.charWidth,ye,Le;if(w!=null){let et=J0(y,w),Me=((this.pixelViewport.right-this.pixelViewport.left)/2+he)/Q;ye=et-Me,Le=et+Me}else ye=(this.pixelViewport.left-he)/Q,Le=(this.pixelViewport.right+he)/Q;F=Z0(y,ye),j=Z0(y,Le)}F>p.from&&h(p.from,F,p,y),j<p.to&&h(j,p.to,p,y)}return l}gapSize(e,t,i,r){let s=J0(r,i)-J0(r,t);return this.heightOracle.lineWrapping?e.height*s:r.total*this.heightOracle.charWidth*s}updateLineGaps(e){Zb.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Ta.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];nl.spans(e,this.viewport.from,this.viewport.to,{span(r,s){t.push({from:r,to:s})},point(){}},20);let i=t.length!=this.visibleRanges.length||this.visibleRanges.some((r,s)=>r.from!=t[s].from||r.to!=t[s].to);return this.visibleRanges=t,i?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||mg(this.heightMap.lineAt(e,al.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return mg(this.heightMap.lineAt(this.scaler.fromDOM(e),al.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return mg(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class K0{constructor(e,t){this.from=e,this.to=t}}function B$(n,e,t){let i=[],r=n,s=0;return nl.spans(t,n,e,{span(){},point(o,l){o>r&&(i.push({from:r,to:o}),s+=o-r),r=l}},20),r<e&&(i.push({from:r,to:e}),s+=e-r),{total:s,ranges:i}}function Z0({total:n,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let i=Math.floor(n*t);for(let r=0;;r++){let{from:s,to:o}=e[r],l=o-s;if(i<=l)return s+i;i-=l}}function J0(n,e){let t=0;for(let{from:i,to:r}of n.ranges){if(e<=r){t+=e-i;break}t+=r-i}return t/n.total}function R$(n,e){for(let t of n)if(e(t))return t}const IO={toDOM(n){return n},fromDOM(n){return n},scale:1};class L${constructor(e,t,i){let r=0,s=0,o=0;this.viewports=i.map(({from:l,to:h})=>{let p=t.lineAt(l,al.ByPos,e,0,0).top,y=t.lineAt(h,al.ByPos,e,0,0).bottom;return r+=y-p,{from:l,to:h,top:p,bottom:y,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(t.height-r);for(let l of this.viewports)l.domTop=o+(l.top-s)*this.scale,o=l.domBottom=l.domTop+(l.bottom-l.top),s=l.bottom}toDOM(e){for(let t=0,i=0,r=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.top)return r+(e-i)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);i=s.bottom,r=s.domBottom}}fromDOM(e){for(let t=0,i=0,r=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.domTop)return i+(e-r)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);i=s.bottom,r=s.domBottom}}}function mg(n,e){if(e.scale==1)return n;let t=e.toDOM(n.top),i=e.toDOM(n.bottom);return new bh(n.from,n.length,t,i-t,Array.isArray(n._content)?n._content.map(r=>mg(r,e)):n._content)}const ev=$s.define({combine:n=>n.join(" ")}),Jb=$s.define({combine:n=>n.indexOf(!0)>-1}),eD=xd.newName(),NO=xd.newName(),BO=xd.newName(),RO={"&light":"."+NO,"&dark":"."+BO};function tD(n,e,t){return new xd(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,r=>{if(r=="&")return n;if(!t||!t[r])throw new RangeError(`Unsupported selector: ${r}`);return t[r]}):n+" "+i}})}const $$=tD("."+eD,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},RO),gg="\uFFFF";class j${constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(ba.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=gg}readRange(e,t){if(!e)return this;let i=e.parentNode;for(let r=e;;){this.findPointBefore(i,r);let s=this.text.length;this.readNode(r);let o=r.nextSibling;if(o==t)break;let l=Ua.get(r),h=Ua.get(o);(l&&h?l.breakAfter:(l?l.breakAfter:V0(r))||V0(o)&&(r.nodeName!="BR"||r.cmIgnore)&&this.text.length>s)&&this.lineBreak(),r=o}return this.findPointBefore(i,t),this}readTextNode(e){let t=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,t.length));for(let i=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,l;if(this.lineSeparator?(s=t.indexOf(this.lineSeparator,i),o=this.lineSeparator.length):(l=r.exec(t))&&(s=l.index,o=l[0].length),this.append(t.slice(i,s<0?t.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let h of this.points)h.node==e&&h.pos>this.text.length&&(h.pos-=o-1);i=s+o}}readNode(e){if(e.cmIgnore)return;let t=Ua.get(e),i=t&&t.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let r=i.iter();!r.next().done;)r.lineBreak?this.lineBreak():this.append(r.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==t&&(i.pos=this.text.length)}findPointInside(e,t){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+(V$(e,i.node,i.offset)?t:0))}}function V$(n,e,t){for(;;){if(!e||t<zh(e))return!1;if(e==n)return!0;t=xp(e)+1,e=e.parentNode}}class LO{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class W${constructor(e,t,i,r){this.typeOver=r,this.bounds=null,this.text="";let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,i,0))){let l=s||o?[]:z$(e),h=new j$(l,e.state);h.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=h.text,this.newSel=q$(l,this.bounds.from)}else{let l=e.observer.selectionRange,h=s&&s.node==l.focusNode&&s.offset==l.focusOffset||!Ob(e.contentDOM,l.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(l.focusNode,l.focusOffset),p=o&&o.node==l.anchorNode&&o.offset==l.anchorOffset||!Ob(e.contentDOM,l.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(l.anchorNode,l.anchorOffset),y=e.viewport;if((ns.ios||ns.chrome)&&e.state.selection.main.empty&&h!=p&&(y.from>0||y.to<e.state.doc.length)){let w=Math.min(h,p),F=Math.max(h,p),j=y.from-w,Q=y.to-F;(j==0||j==1||w==0)&&(Q==0||Q==-1||F==e.state.doc.length)&&(h=0,p=e.state.doc.length)}this.newSel=ki.single(p,h)}}}function $O(n,e){let t,{newSel:i}=e,r=n.state.selection.main,s=n.inputState.lastKeyTime>Date.now()-100?n.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:l}=e.bounds,h=r.from,p=null;(s===8||ns.android&&e.text.length<l-o)&&(h=r.to,p="end");let y=U$(n.state.doc.sliceString(o,l,gg),e.text,h-o,p);y&&(ns.chrome&&s==13&&y.toB==y.from+2&&e.text.slice(y.from,y.toB)==gg+gg&&y.toB--,t={from:o+y.from,to:o+y.toA,insert:da.of(e.text.slice(y.from,y.toB).split(gg))})}else i&&(!n.hasFocus&&n.state.facet(z0)||i.main.eq(r))&&(i=null);if(!t&&!i)return!1;if(!t&&e.typeOver&&!r.empty&&i&&i.main.empty?t={from:r.from,to:r.to,insert:n.state.doc.slice(r.from,r.to)}:t&&t.from>=r.from&&t.to<=r.to&&(t.from!=r.from||t.to!=r.to)&&r.to-r.from-(t.to-t.from)<=4?t={from:r.from,to:r.to,insert:n.state.doc.slice(r.from,t.from).append(t.insert).append(n.state.doc.slice(t.to,r.to))}:(ns.mac||ns.android)&&t&&t.from==t.to&&t.from==r.head-1&&/^\. ?$/.test(t.insert.toString())&&n.contentDOM.getAttribute("autocorrect")=="off"?(i&&t.insert.length==2&&(i=ki.single(i.main.anchor-1,i.main.head-1)),t={from:r.from,to:r.to,insert:da.of([" "])}):ns.chrome&&t&&t.from==t.to&&t.from==r.head&&t.insert.toString()==`
 `&&n.lineWrapping&&(i&&(i=ki.single(i.main.anchor-1,i.main.head-1)),t={from:r.from,to:r.to,insert:da.of([" "])}),t){if(ns.ios&&n.inputState.flushIOSKey(t)||ns.android&&(t.to==r.to&&(t.from==r.from||t.from==r.from-1&&n.state.sliceDoc(t.from,r.from)==" ")&&t.insert.length==1&&t.insert.lines==2&&Ef(n.contentDOM,"Enter",13)||(t.from==r.from-1&&t.to==r.to&&t.insert.length==0||s==8&&t.insert.length<t.to-t.from&&t.to>r.head)&&Ef(n.contentDOM,"Backspace",8)||t.from==r.from&&t.to==r.to+1&&t.insert.length==0&&Ef(n.contentDOM,"Delete",46)))return!0;let o=t.insert.toString();n.inputState.composing>=0&&n.inputState.composing++;let l,h=()=>l||(l=H$(n,t,i));return n.state.facet(QT).some(p=>p(n,t.from,t.to,o,h))||n.dispatch(h()),!0}else if(i&&!i.main.eq(r)){let o=!1,l="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(o=!0),l=n.inputState.lastSelectionOrigin),n.dispatch({selection:i,scrollIntoView:o,userEvent:l}),!0}else return!1}function H$(n,e,t){let i,r=n.state,s=r.selection.main;if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&n.inputState.composing<0){let l=s.from<e.from?r.sliceDoc(s.from,e.from):"",h=s.to>e.to?r.sliceDoc(e.to,s.to):"";i=r.replaceSelection(n.state.toText(l+e.insert.sliceString(0,void 0,n.state.lineBreak)+h))}else{let l=r.changes(e),h=t&&t.main.to<=l.newLength?t.main:void 0;if(r.selection.ranges.length>1&&n.inputState.composing>=0&&e.to<=s.to&&e.to>=s.to-10){let p=n.state.sliceDoc(e.from,e.to),y,w=t&&sO(n,t.main.head);if(w){let Q=e.insert.length-(e.to-e.from);y={from:w.from,to:w.to-Q}}else y=n.state.doc.lineAt(s.head);let F=s.to-e.to,j=s.to-s.from;i=r.changeByRange(Q=>{if(Q.from==s.from&&Q.to==s.to)return{changes:l,range:h||Q.map(l)};let he=Q.to-F,ye=he-p.length;if(Q.to-Q.from!=j||n.state.sliceDoc(ye,he)!=p||Q.to>=y.from&&Q.from<=y.to)return{range:Q};let Le=r.changes({from:ye,to:he,insert:e.insert}),et=Q.to-s.to;return{changes:Le,range:h?ki.range(Math.max(0,h.anchor+et),Math.max(0,h.head+et)):Q.map(Le)}})}else i={changes:l,selection:h&&r.selection.replaceRange(h)}}let o="input.type";return(n.composing||n.inputState.compositionPendingChange&&n.inputState.compositionEndedAt>Date.now()-50)&&(n.inputState.compositionPendingChange=!1,o+=".compose",n.inputState.compositionFirstChange&&(o+=".start",n.inputState.compositionFirstChange=!1)),r.update(i,{userEvent:o,scrollIntoView:!0})}function U$(n,e,t,i){let r=Math.min(n.length,e.length),s=0;for(;s<r&&n.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==r&&n.length==e.length)return null;let o=n.length,l=e.length;for(;o>0&&l>0&&n.charCodeAt(o-1)==e.charCodeAt(l-1);)o--,l--;if(i=="end"){let h=Math.max(0,s-Math.min(o,l));t-=o+h-s}if(o<s&&n.length<e.length){let h=t<=s&&t>=o?s-t:0;s-=h,l=s+(l-o),o=s}else if(l<s){let h=t<=s&&t>=l?s-t:0;s-=h,o=s+(o-l),l=s}return{from:s,toA:o,toB:l}}function z$(n){let e=[];if(n.root.activeElement!=n.contentDOM)return e;let{anchorNode:t,anchorOffset:i,focusNode:r,focusOffset:s}=n.observer.selectionRange;return t&&(e.push(new LO(t,i)),(r!=t||s!=i)&&e.push(new LO(r,s))),e}function q$(n,e){if(n.length==0)return null;let t=n[0].pos,i=n.length==2?n[1].pos:t;return t>-1&&i>-1?ki.single(t+e,i+e):null}const Q$={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},nD=ns.ie&&ns.ie_version<=11;class X${constructor(e){this.view=e,this.active=!1,this.selectionRange=new kL,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let i of t)this.queue.push(i);(ns.ie&&ns.ie_version<=11||ns.ios&&e.composing)&&t.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),nD&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){e.type=="change"&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,i)=>t!=e[i]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,r=this.selectionRange;if(i.state.facet(z0)?i.root.activeElement!=this.dom:!j0(i.dom,r))return;let s=r.anchorNode&&i.docView.nearest(r.anchorNode);if(s&&s.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(ns.ie&&ns.ie_version<=11||ns.android&&ns.chrome)&&!i.state.selection.main.empty&&r.focusNode&&ag(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=$0(e.root);if(!t)return!1;let i=ns.safari&&e.root.nodeType==11&&SL(this.dom.ownerDocument)==this.dom&&Y$(this.view,t)||t;if(!i||this.selectionRange.eq(i))return!1;let r=j0(this.dom,i);return r&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&PL(this.dom,i)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(i),r&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let i=this.dom;i;)if(i.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=t)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,Q$),nD&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),nD&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var i;if(!this.delayedAndroidKey){let r=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&Ef(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(r)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,i=-1,r=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(r=!0),t==-1?{from:t,to:i}=o:(t=Math.min(o.from,t),i=Math.max(o.to,i)))}return{from:t,to:i,typeOver:r}}readChange(){let{from:e,to:t,typeOver:i}=this.processRecords(),r=this.selectionChanged&&j0(this.dom,this.selectionRange);if(e<0&&!r)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new W$(this.view,e,t,i);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let i=this.view.state,r=$O(this.view,t);return this.view.state==i&&this.view.update([]),r}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.flags|=4),e.type=="childList"){let i=jO(t,e.previousSibling||e.target.previousSibling,-1),r=jO(t,e.nextSibling||e.target.nextSibling,1);return{from:i?t.posAfter(i):t.posAtStart,to:r?t.posBefore(r):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener("change",this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener("change",this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var e,t,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function jO(n,e,t){for(;e;){let i=Ua.get(e);if(i&&i.parent==n)return i;let r=e.parentNode;e=r!=n.dom?r:t>0?e.nextSibling:e.previousSibling}return null}function VO(n,e){let t=e.startContainer,i=e.startOffset,r=e.endContainer,s=e.endOffset,o=n.docView.domAtPos(n.state.selection.main.anchor);return ag(o.node,o.offset,r,s)&&([t,i,r,s]=[r,s,t,i]),{anchorNode:t,anchorOffset:i,focusNode:r,focusOffset:s}}function Y$(n,e){if(e.getComposedRanges){let r=e.getComposedRanges(n.root)[0];if(r)return VO(n,r)}let t=null;function i(r){r.preventDefault(),r.stopImmediatePropagation(),t=r.getTargetRanges()[0]}return n.contentDOM.addEventListener("beforeinput",i,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",i,!0),t?VO(n,t):null}class As{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:t}=e;this.dispatchTransactions=e.dispatchTransactions||t&&(i=>i.forEach(r=>t(r,this)))||(i=>this.update(i)),this.dispatch=this.dispatch.bind(this),this._root=e.root||_L(e.parent)||document,this.viewState=new MO(e.state||ba.create(e)),e.scrollTo&&e.scrollTo.is(U0)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(dg).map(i=>new Ub(i));for(let i of this.plugins)i.update(this);this.observer=new X$(this),this.inputState=new c$(this),this.inputState.ensureHandlers(this.plugins),this.docView=new iO(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure()}dispatch(...e){let t=e.length==1&&e[0]instanceof qu?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,i=!1,r,s=this.state;for(let F of e){if(F.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=F.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,l=0,h=null;e.some(F=>F.annotation(AO))?(this.inputState.notifiedFocused=o,l=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,h=TO(s,o),h||(l=1));let p=this.observer.delayedAndroidKey,y=null;if(p?(this.observer.clearDelayedAndroidKey(),y=this.observer.readChange(),(y&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(y=null)):this.observer.clear(),s.facet(ba.phrases)!=this.state.facet(ba.phrases))return this.setState(s);r=q0.create(this,s,e),r.flags|=l;let w=this.viewState.scrollTarget;try{this.updateState=2;for(let F of e){if(w&&(w=w.map(F.changes)),F.scrollIntoView){let{main:j}=F.state.selection;w=new Af(j.empty?j:ki.cursor(j.head,j.head>j.anchor?-1:1))}for(let j of F.effects)j.is(U0)&&(w=j.value.clip(this.state))}this.viewState.update(r,w),this.bidiCache=tv.update(this.bidiCache,r.changes),r.empty||(this.updatePlugins(r),this.inputState.update(r)),t=this.docView.update(r),this.state.facet(fg)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(F=>F.isUserEvent("select.pointer")))}finally{this.updateState=0}if(r.startState.facet(ev)!=r.state.facet(ev)&&(this.viewState.mustMeasureContent=!0),(t||i||w||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!r.empty)for(let F of this.state.facet(Hb))try{F(r)}catch(j){pc(this.state,j,"update listener")}(h||y)&&Promise.resolve().then(()=>{h&&this.state==h.startState&&this.dispatch(h),y&&!$O(this,y)&&p.force&&Ef(this.contentDOM,p.key,p.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new MO(e),this.plugins=e.facet(dg).map(i=>new Ub(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView.destroy(),this.docView=new iO(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(dg),i=e.state.facet(dg);if(t!=i){let r=[];for(let s of i){let o=t.indexOf(s);if(o<0)r.push(new Ub(s));else{let l=this.plugins[o];l.mustUpdate=e,r.push(l)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=r,this.pluginMap.clear()}else for(let r of this.plugins)r.mustUpdate=e;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this);t!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(i){pc(this.state,i,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,i=this.scrollDOM,r=i.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;Math.abs(r-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let l=0;;l++){if(o<0)if(DT(i))s=-1,o=this.viewState.heightMap.height;else{let j=this.viewState.scrollAnchorAt(r);s=j.from,o=j.top}this.updateState=1;let h=this.viewState.measure(this);if(!h&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(l>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let p=[];h&4||([this.measureRequests,p]=[p,this.measureRequests]);let y=p.map(j=>{try{return j.read(this)}catch(Q){return pc(this.state,Q),WO}}),w=q0.create(this,this.state,[]),F=!1;w.flags|=h,t?t.flags|=h:t=w,this.updateState=2,w.empty||(this.updatePlugins(w),this.inputState.update(w),this.updateAttrs(),F=this.docView.update(w),F&&this.docViewUpdate());for(let j=0;j<p.length;j++)if(y[j]!=WO)try{let Q=p[j];Q.write&&Q.write(y[j],this)}catch(Q){pc(this.state,Q)}if(F&&this.docView.updateSelection(!0),!w.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let Q=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(Q>1||Q<-1){r=r+Q,i.scrollTop=r/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let l of this.state.facet(Hb))l(t)}get themeClasses(){return eD+" "+(this.state.facet(Jb)?BO:NO)+" "+this.state.facet(ev)}updateAttrs(){let e=HO(this,KT,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(z0)?"true":"false",class:"cm-content",style:`${ns.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),HO(this,zb,t);let i=this.observer.ignore(()=>{let r=Rb(this.contentDOM,this.contentAttrs,t),s=Rb(this.dom,this.editorAttrs,e);return r||s});return this.editorAttrs=e,this.contentAttrs=t,i}showAnnouncements(e){let t=!0;for(let i of e)for(let r of i.effects)if(r.is(As.announce)){t&&(this.announceDOM.textContent=""),t=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=r.value}}mountStyles(){this.styleModules=this.state.facet(fg);let e=this.state.facet(As.cspNonce);xd.mount(this.root,this.styleModules.concat($$).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find(i=>i.spec==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,i){return Yb(this,e,hO(this,e,t,i))}moveByGroup(e,t){return Yb(this,e,hO(this,e,t,i=>l$(this,e.head,i)))}visualLineSide(e,t){let i=this.bidiSpans(e),r=this.textDirectionAt(e.from),s=i[t?i.length-1:0];return ki.cursor(s.side(t,r)+e.from,s.forward(!t,r)?1:-1)}moveToLineBoundary(e,t,i=!0){return a$(this,e,t,i)}moveVertically(e,t,i){return Yb(this,e,u$(this,e,t,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),uO(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let i=this.docView.coordsAt(e,t);if(!i||i.left==i.right)return i;let r=this.state.doc.lineAt(e),s=this.bidiSpans(r),o=s[Cd.find(s,e-r.from,-1,t)];return kb(i,o.dir==Kl.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(YT)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>G$)return VT(e.length);let t=this.textDirectionAt(e.from),i;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==t&&(s.fresh||jT(s.isolates,i=eO(this,e))))return s.order;i||(i=eO(this,e));let r=HL(e.text,t,i);return this.bidiCache.push(new tv(e.from,e.to,t,i,!0,r)),r}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||ns.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{vT(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return U0.of(new Af(typeof e=="number"?ki.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,i=this.viewState.scrollAnchorAt(e);return U0.of(new Af(ki.cursor(i.from),"start","start",i.top-e,t,!0))}static domEventHandlers(e){return Wc.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return Wc.define(()=>({}),{eventObservers:e})}static theme(e,t){let i=xd.newName(),r=[ev.of(i),fg.of(tD(`.${i}`,e))];return t&&t.dark&&r.push(Jb.of(!0)),r}static baseTheme(e){return bf.lowest(fg.of(tD("."+eD,e,RO)))}static findFromDOM(e){var t;let i=e.querySelector(".cm-content"),r=i&&Ua.get(i)||Ua.get(e);return((t=r==null?void 0:r.rootView)===null||t===void 0?void 0:t.view)||null}}As.styleModule=fg,As.inputHandler=QT,As.scrollHandler=GT,As.focusChangeEffect=XT,As.perLineTextDirection=YT,As.exceptionSink=qT,As.updateListener=Hb,As.editable=z0,As.mouseSelectionStyle=zT,As.dragMovesSelection=UT,As.clickAddsSelectionRange=HT,As.decorations=pg,As.outerDecorations=ZT,As.atomicRanges=qb,As.bidiIsolatedRanges=JT,As.scrollMargins=tO,As.darkTheme=Jb,As.cspNonce=$s.define({combine:n=>n.length?n[0]:""}),As.contentAttributes=zb,As.editorAttributes=KT,As.lineWrapping=As.contentAttributes.of({class:"cm-lineWrapping"}),As.announce=pa.define();const G$=4096,WO={};class tv{constructor(e,t,i,r,s,o){this.from=e,this.to=t,this.dir=i,this.isolates=r,this.fresh=s,this.order=o}static update(e,t){if(t.empty&&!e.some(s=>s.fresh))return e;let i=[],r=e.length?e[e.length-1].dir:Kl.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==r&&!t.touchesRange(o.from,o.to)&&i.push(new tv(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return i}}function HO(n,e,t){for(let i=n.state.facet(e),r=i.length-1;r>=0;r--){let s=i[r],o=typeof s=="function"?s(n):s;o&&Nb(o,t)}return t}const K$=ns.mac?"mac":ns.windows?"win":ns.linux?"linux":"key";function Z$(n,e){const t=n.split(/-(?!$)/);let i=t[t.length-1];i=="Space"&&(i=" ");let r,s,o,l;for(let h=0;h<t.length-1;++h){const p=t[h];if(/^(cmd|meta|m)$/i.test(p))l=!0;else if(/^a(lt)?$/i.test(p))r=!0;else if(/^(c|ctrl|control)$/i.test(p))s=!0;else if(/^s(hift)?$/i.test(p))o=!0;else if(/^mod$/i.test(p))e=="mac"?l=!0:s=!0;else throw new Error("Unrecognized modifier name: "+p)}return r&&(i="Alt-"+i),s&&(i="Ctrl-"+i),l&&(i="Meta-"+i),o&&(i="Shift-"+i),i}function nv(n,e,t){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t!==!1&&e.shiftKey&&(n="Shift-"+n),n}const J$=bf.default(As.domEventHandlers({keydown(n,e){return i8(e8(e.state),n,e,"editor")}})),iv=$s.define({enables:J$}),UO=new WeakMap;function e8(n){let e=n.facet(iv),t=UO.get(e);return t||UO.set(e,t=n8(e.reduce((i,r)=>i.concat(r),[]))),t}let Sd=null;const t8=4e3;function n8(n,e=K$){let t=Object.create(null),i=Object.create(null),r=(o,l)=>{let h=i[o];if(h==null)i[o]=l;else if(h!=l)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,l,h,p,y)=>{var w,F;let j=t[o]||(t[o]=Object.create(null)),Q=l.split(/ (?!$)/).map(Le=>Z$(Le,e));for(let Le=1;Le<Q.length;Le++){let et=Q.slice(0,Le).join(" ");r(et,!0),j[et]||(j[et]={preventDefault:!0,stopPropagation:!1,run:[Me=>{let ke=Sd={view:Me,prefix:et,scope:o};return setTimeout(()=>{Sd==ke&&(Sd=null)},t8),!0}]})}let he=Q.join(" ");r(he,!1);let ye=j[he]||(j[he]={preventDefault:!1,stopPropagation:!1,run:((F=(w=j._any)===null||w===void 0?void 0:w.run)===null||F===void 0?void 0:F.slice())||[]});h&&ye.run.push(h),p&&(ye.preventDefault=!0),y&&(ye.stopPropagation=!0)};for(let o of n){let l=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let p of l){let y=t[p]||(t[p]=Object.create(null));y._any||(y._any={preventDefault:!1,stopPropagation:!1,run:[]});for(let w in y)y[w].run.push(o.any)}let h=o[e]||o.key;if(h)for(let p of l)s(p,h,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(p,"Shift-"+h,o.shift,o.preventDefault,o.stopPropagation)}return t}function i8(n,e,t,i){let r=CL(e),s=_c(r,0),o=vh(s)==r.length&&r!=" ",l="",h=!1,p=!1,y=!1;Sd&&Sd.view==t&&Sd.scope==i&&(l=Sd.prefix+" ",fO.indexOf(e.keyCode)<0&&(p=!0,Sd=null));let w=new Set,F=ye=>{if(ye){for(let Le of ye.run)if(!w.has(Le)&&(w.add(Le),Le(t,e)))return ye.stopPropagation&&(y=!0),!0;ye.preventDefault&&(ye.stopPropagation&&(y=!0),p=!0)}return!1},j=n[i],Q,he;return j&&(F(j[l+nv(r,e,!o)])?h=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(ns.windows&&e.ctrlKey&&e.altKey)&&(Q=bd[e.keyCode])&&Q!=r?(F(j[l+nv(Q,e,!0)])||e.shiftKey&&(he=sg[e.keyCode])!=r&&he!=Q&&F(j[l+nv(he,e,!1)]))&&(h=!0):o&&e.shiftKey&&F(j[l+nv(r,e,!0)])&&(h=!0),!h&&F(j._any)&&(h=!0)),p&&(h=!0),h&&y&&e.stopPropagation(),h}const r8=!ns.ios,zO={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};r8&&(zO[".cm-line"].caretColor="transparent !important",zO[".cm-content"]={caretColor:"transparent !important"});const yg="-10000px";class qO{constructor(e,t,i,r){this.facet=t,this.createTooltipView=i,this.removeTooltipView=r,this.input=e.state.facet(t),this.tooltips=this.input.filter(o=>o);let s=null;this.tooltipViews=this.tooltips.map(o=>s=i(o,s))}update(e,t){var i;let r=e.state.facet(this.facet),s=r.filter(h=>h);if(r===this.input){for(let h of this.tooltipViews)h.update&&h.update(e);return!1}let o=[],l=t?[]:null;for(let h=0;h<s.length;h++){let p=s[h],y=-1;if(p){for(let w=0;w<this.tooltips.length;w++){let F=this.tooltips[w];F&&F.create==p.create&&(y=w)}if(y<0)o[h]=this.createTooltipView(p,h?o[h-1]:null),l&&(l[h]=!!p.above);else{let w=o[h]=this.tooltipViews[y];l&&(l[h]=t[y]),w.update&&w.update(e)}}}for(let h of this.tooltipViews)o.indexOf(h)<0&&(this.removeTooltipView(h),(i=h.destroy)===null||i===void 0||i.call(h));return t&&(l.forEach((h,p)=>t[p]=h),t.length=l.length),this.input=r,this.tooltips=s,this.tooltipViews=o,!0}}function s8(n={}){return rv.of(n)}function o8(n){let{win:e}=n;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const rv=$s.define({combine:n=>{var e,t,i;return{position:ns.ios?"absolute":((e=n.find(r=>r.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=n.find(r=>r.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((i=n.find(r=>r.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||o8}}}),QO=new WeakMap,iD=Wc.fromClass(class{constructor(n){this.view=n,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=n.state.facet(rv);this.position=e.position,this.parent=e.parent,this.classes=n.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new qO(n,rD,(t,i)=>this.createTooltip(t,i),t=>{this.resizeObserver&&this.resizeObserver.unobserve(t.dom),t.dom.remove()}),this.above=this.manager.tooltips.map(t=>!!t.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),n.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let n of this.manager.tooltipViews)this.intersectionObserver.observe(n.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(n){n.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(n,this.above);e&&this.observeIntersection();let t=e||n.geometryChanged,i=n.state.facet(rv);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let r of this.manager.tooltipViews)r.dom.style.position=this.position;t=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let r of this.manager.tooltipViews)this.container.appendChild(r.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(n,e){let t=n.create(this.view),i=e?e.dom:null;if(t.dom.classList.add("cm-tooltip"),n.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let r=document.createElement("div");r.className="cm-tooltip-arrow",t.dom.appendChild(r)}return t.dom.style.position=this.position,t.dom.style.top=yg,t.dom.style.left="0px",this.container.insertBefore(t.dom,i),t.mount&&t.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(t.dom),t}destroy(){var n,e,t;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),(n=i.destroy)===null||n===void 0||n.call(i);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(t=this.intersectionObserver)===null||t===void 0||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let n=this.view.dom.getBoundingClientRect(),e=1,t=1,i=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:r}=this.manager.tooltipViews[0];if(ns.gecko)i=r.offsetParent!=this.container.ownerDocument.body;else if(r.style.top==yg&&r.style.left=="0px"){let s=r.getBoundingClientRect();i=Math.abs(s.top+1e4)>1||Math.abs(s.left)>1}}if(i||this.position=="absolute")if(this.parent){let r=this.parent.getBoundingClientRect();r.width&&r.height&&(e=r.width/this.parent.offsetWidth,t=r.height/this.parent.offsetHeight)}else({scaleX:e,scaleY:t}=this.view.viewState);return{editor:n,parent:this.parent?this.container.getBoundingClientRect():n,pos:this.manager.tooltips.map((r,s)=>{let o=this.manager.tooltipViews[s];return o.getCoords?o.getCoords(r.pos):this.view.coordsAtPos(r.pos)}),size:this.manager.tooltipViews.map(({dom:r})=>r.getBoundingClientRect()),space:this.view.state.facet(rv).tooltipSpace(this.view),scaleX:e,scaleY:t,makeAbsolute:i}}writeMeasure(n){var e;if(n.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let l of this.manager.tooltipViews)l.dom.style.position="absolute"}let{editor:t,space:i,scaleX:r,scaleY:s}=n,o=[];for(let l=0;l<this.manager.tooltips.length;l++){let h=this.manager.tooltips[l],p=this.manager.tooltipViews[l],{dom:y}=p,w=n.pos[l],F=n.size[l];if(!w||w.bottom<=Math.max(t.top,i.top)||w.top>=Math.min(t.bottom,i.bottom)||w.right<Math.max(t.left,i.left)-.1||w.left>Math.min(t.right,i.right)+.1){y.style.top=yg;continue}let j=h.arrow?p.dom.querySelector(".cm-tooltip-arrow"):null,Q=j?7:0,he=F.right-F.left,ye=(e=QO.get(p))!==null&&e!==void 0?e:F.bottom-F.top,Le=p.offset||l8,et=this.view.textDirection==Kl.LTR,Me=F.width>i.right-i.left?et?i.left:i.right-F.width:et?Math.min(w.left-(j?14:0)+Le.x,i.right-he):Math.max(i.left,w.left-he+(j?14:0)-Le.x),ke=this.above[l];!h.strictSide&&(ke?w.top-(F.bottom-F.top)-Le.y<i.top:w.bottom+(F.bottom-F.top)+Le.y>i.bottom)&&ke==i.bottom-w.bottom>w.top-i.top&&(ke=this.above[l]=!ke);let Qe=(ke?w.top-i.top:i.bottom-w.bottom)-Q;if(Qe<ye&&p.resize!==!1){if(Qe<this.view.defaultLineHeight){y.style.top=yg;continue}QO.set(p,ye),y.style.height=(ye=Qe)/s+"px"}else y.style.height&&(y.style.height="");let ft=ke?w.top-ye-Q-Le.y:w.bottom+Q+Le.y,bt=Me+he;if(p.overlap!==!0)for(let st of o)st.left<bt&&st.right>Me&&st.top<ft+ye&&st.bottom>ft&&(ft=ke?st.top-ye-2-Q:st.bottom+Q+2);if(this.position=="absolute"?(y.style.top=(ft-n.parent.top)/s+"px",y.style.left=(Me-n.parent.left)/r+"px"):(y.style.top=ft/s+"px",y.style.left=Me/r+"px"),j){let st=w.left+(et?Le.x:-Le.x)-(Me+14-7);j.style.left=st/r+"px"}p.overlap!==!0&&o.push({left:Me,top:ft,right:bt,bottom:ft+ye}),y.classList.toggle("cm-tooltip-above",ke),y.classList.toggle("cm-tooltip-below",!ke),p.positioned&&p.positioned(n.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let n of this.manager.tooltipViews)n.dom.style.top=yg}},{eventObservers:{scroll(){this.maybeMeasure()}}}),a8=As.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),l8={x:0,y:0},rD=$s.define({enables:[iD,a8]}),sv=$s.define({combine:n=>n.reduce((e,t)=>e.concat(t),[])});class ov{static create(e){return new ov(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new qO(e,sv,(t,i)=>this.createHostedView(t,i),t=>t.dom.remove())}createHostedView(e,t){let i=e.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(i.dom,t?t.dom.nextSibling:this.dom.firstChild),this.mounted&&i.mount&&i.mount(this.view),i}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)(e=t.destroy)===null||e===void 0||e.call(t)}passProp(e){let t;for(let i of this.manager.tooltipViews){let r=i[e];if(r!==void 0){if(t===void 0)t=r;else if(t!==r)return}}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const u8=rD.compute([sv],n=>{let e=n.facet(sv);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.map(t=>{var i;return(i=t.end)!==null&&i!==void 0?i:t.pos})),create:ov.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class c8{constructor(e,t,i,r,s){this.view=e,this.source=t,this.field=i,this.setHover=r,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,i=e.docView.nearest(t.target);if(!i)return;let r,s=1;if(i instanceof Dd)r=i.posAtStart;else{if(r=e.posAtCoords(t),r==null)return;let l=e.coordsAtPos(r);if(!l||t.y<l.top||t.y>l.bottom||t.x<l.left-e.defaultCharacterWidth||t.x>l.right+e.defaultCharacterWidth)return;let h=e.bidiSpans(e.state.doc.lineAt(r)).find(y=>y.from<=r&&y.to>=r),p=h&&h.dir==Kl.RTL?-1:1;s=t.x<l.left?-p:p}let o=this.source(e,r,s);if(o!=null&&o.then){let l=this.pending={pos:r};o.then(h=>{this.pending==l&&(this.pending=null,h&&!(Array.isArray(h)&&!h.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(h)?h:[h])}))},h=>pc(e.state,h,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(iD),t=e?e.manager.tooltips.findIndex(i=>i.create==ov.create):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t,i;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:r,tooltip:s}=this;if(r.length&&s&&!h8(s.dom,e)||this.pending){let{pos:o}=r[0]||this.pending,l=(i=(t=r[0])===null||t===void 0?void 0:t.end)!==null&&i!==void 0?i:o;(o==l?this.view.posAtCoords(this.lastMove)!=o:!d8(this.view,o,l,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t.length){let{tooltip:i}=this;i&&i.dom.contains(e.relatedTarget)?this.watchTooltipLeave(i.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let t=i=>{e.removeEventListener("mouseleave",t),this.active.length&&!this.view.dom.contains(i.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const av=4;function h8(n,e){let t=n.getBoundingClientRect();return e.clientX>=t.left-av&&e.clientX<=t.right+av&&e.clientY>=t.top-av&&e.clientY<=t.bottom+av}function d8(n,e,t,i,r,s){let o=n.scrollDOM.getBoundingClientRect(),l=n.documentTop+n.documentPadding.top+n.contentHeight;if(o.left>i||o.right<i||o.top>r||Math.min(o.bottom,l)<r)return!1;let h=n.posAtCoords({x:i,y:r},!1);return h>=e&&h<=t}function p8(n,e={}){let t=pa.define(),i=Pc.define({create(){return[]},update(r,s){if(r.length&&(e.hideOnChange&&(s.docChanged||s.selection)?r=[]:e.hideOn&&(r=r.filter(o=>!e.hideOn(s,o))),s.docChanged)){let o=[];for(let l of r){let h=s.changes.mapPos(l.pos,-1,zu.TrackDel);if(h!=null){let p=Object.assign(Object.create(null),l);p.pos=h,p.end!=null&&(p.end=s.changes.mapPos(p.end)),o.push(p)}}r=o}for(let o of s.effects)o.is(t)&&(r=o.value),o.is(f8)&&(r=[]);return r},provide:r=>sv.from(r)});return[i,Wc.define(r=>new c8(r,n,i,t,e.hoverTime||300)),u8]}function XO(n,e){let t=n.plugin(iD);if(!t)return null;let i=t.manager.tooltips.indexOf(e);return i<0?null:t.manager.tooltipViews[i]}const f8=pa.define(),YO=$s.define({combine(n){let e,t;for(let i of n)e=e||i.topContainer,t=t||i.bottomContainer;return{topContainer:e,bottomContainer:t}}}),m8=Wc.fromClass(class{constructor(n){this.input=n.state.facet(sD),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(n));let e=n.state.facet(YO);this.top=new lv(n,!0,e.topContainer),this.bottom=new lv(n,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(n){let e=n.state.facet(YO);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new lv(n.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new lv(n.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=n.state.facet(sD);if(t!=this.input){let i=t.filter(h=>h),r=[],s=[],o=[],l=[];for(let h of i){let p=this.specs.indexOf(h),y;p<0?(y=h(n.view),l.push(y)):(y=this.panels[p],y.update&&y.update(n)),r.push(y),(y.top?s:o).push(y)}this.specs=i,this.panels=r,this.top.sync(s),this.bottom.sync(o);for(let h of l)h.dom.classList.add("cm-panel"),h.mount&&h.mount()}else for(let i of this.panels)i.update&&i.update(n)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:n=>As.scrollMargins.of(e=>{let t=e.plugin(n);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class lv{constructor(e,t,i){this.view=e,this.top=t,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=GO(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=GO(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function GO(n){let e=n.nextSibling;return n.remove(),e}const sD=$s.define({enables:m8});class Tf extends vp{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Tf.prototype.elementClass="",Tf.prototype.toDOM=void 0,Tf.prototype.mapMode=zu.TrackBefore,Tf.prototype.startSide=Tf.prototype.endSide=-1,Tf.prototype.point=!0;const KO=1024;let g8=0;class oD{constructor(e,t){this.from=e,this.to=t}}class Ho{constructor(e={}){this.id=g8++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=wc.match(e)),t=>{let i=e(t);return i===void 0?null:[this,i]}}}Ho.closedBy=new Ho({deserialize:n=>n.split(" ")}),Ho.openedBy=new Ho({deserialize:n=>n.split(" ")}),Ho.group=new Ho({deserialize:n=>n.split(" ")}),Ho.isolate=new Ho({deserialize:n=>{if(n&&n!="rtl"&&n!="ltr"&&n!="auto")throw new RangeError("Invalid value for isolate: "+n);return n||"auto"}}),Ho.contextHash=new Ho({perNode:!0}),Ho.lookAhead=new Ho({perNode:!0}),Ho.mounted=new Ho({perNode:!0});class uv{constructor(e,t,i){this.tree=e,this.overlay=t,this.parser=i}static get(e){return e&&e.props&&e.props[Ho.mounted.id]}}const y8=Object.create(null);class wc{constructor(e,t,i,r=0){this.name=e,this.props=t,this.id=i,this.flags=r}static define(e){let t=e.props&&e.props.length?Object.create(null):y8,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),r=new wc(e.name||"",t,e.id,i);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(r)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[s[0].id]=s[1]}}return r}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(Ho.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let r of i.split(" "))t[r]=e[i];return i=>{for(let r=i.prop(Ho.group),s=-1;s<(r?r.length:0);s++){let o=t[s<0?i.name:r[s]];if(o)return o}}}}wc.none=new wc("",Object.create(null),0,8);class aD{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let i of this.types){let r=null;for(let s of e){let o=s(i);o&&(r||(r=Object.assign({},i.props)),r[o[0].id]=o[1])}t.push(r?new wc(i.name,r,i.id,i.flags):i)}return new aD(t)}}const cv=new WeakMap,ZO=new WeakMap;var Iu;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays"})(Iu||(Iu={}));class hu{constructor(e,t,i,r,s){if(this.type=e,this.children=t,this.positions=i,this.length=r,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,l]of s)this.props[typeof o=="number"?o:o.id]=l}}toString(){let e=uv.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let i of this.children){let r=i.toString();r&&(t&&(t+=","),t+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new cD(this.topNode,e)}cursorAt(e,t=0,i=0){let r=cv.get(this)||this.topNode,s=new cD(r);return s.moveTo(e,t),cv.set(this,s._tree),s}get topNode(){return new zc(this,0,0,null)}resolve(e,t=0){let i=vg(cv.get(this)||this.topNode,e,t,!1);return cv.set(this,i),i}resolveInner(e,t=0){let i=vg(ZO.get(this)||this.topNode,e,t,!0);return ZO.set(this,i),i}resolveStack(e,t=0){return b8(this,e,t)}iterate(e){let{enter:t,leave:i,from:r=0,to:s=this.length}=e,o=e.mode||0,l=(o&Iu.IncludeAnonymous)>0;for(let h=this.cursor(o|Iu.IncludeAnonymous);;){let p=!1;if(h.from<=s&&h.to>=r&&(!l&&h.type.isAnonymous||t(h)!==!1)){if(h.firstChild())continue;p=!0}for(;p&&i&&(l||!h.type.isAnonymous)&&i(h),!h.nextSibling();){if(!h.parent())return;p=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:dD(wc.none,this.children,this.positions,0,this.children.length,0,this.length,(t,i,r)=>new hu(this.type,t,i,r,this.propValues),e.makeTree||((t,i,r)=>new hu(wc.none,t,i,r)))}static build(e){return D8(e)}}hu.empty=new hu(wc.none,[],[],0);class lD{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new lD(this.buffer,this.index)}}class Ad{constructor(e,t,i){this.buffer=e,this.length=t,this.set=i}get type(){return wc.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],r=this.set.types[t],s=r.name;if(/\W/.test(s)&&!r.isError&&(s=JSON.stringify(s)),e+=4,i==e)return s;let o=[];for(;e<i;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,t,i,r,s){let{buffer:o}=this,l=-1;for(let h=e;h!=t&&!(JO(s,r,o[h+1],o[h+2])&&(l=h,i>0));h=o[h+3]);return l}slice(e,t,i){let r=this.buffer,s=new Uint16Array(t-e),o=0;for(let l=e,h=0;l<t;){s[h++]=r[l++],s[h++]=r[l++]-i;let p=s[h++]=r[l++]-i;s[h++]=r[l++]-e,o=Math.max(o,p)}return new Ad(s,o,this.set)}}function JO(n,e,t,i){switch(n){case-2:return t<e;case-1:return i>=e&&t<e;case 0:return t<e&&i>e;case 1:return t<=e&&i>e;case 2:return i>e;case 4:return!0}}function vg(n,e,t,i){for(var r;n.from==n.to||(t<1?n.from>=e:n.from>e)||(t>-1?n.to<=e:n.to<e);){let o=!i&&n instanceof zc&&n.index<0?null:n.parent;if(!o)return n;n=o}let s=i?0:Iu.IgnoreOverlays;if(i)for(let o=n,l=o.parent;l;o=l,l=o.parent)o instanceof zc&&o.index<0&&((r=l.enter(e,t,s))===null||r===void 0?void 0:r.from)!=o.from&&(n=l);for(;;){let o=n.enter(e,t,s);if(!o)return n;n=o}}class ek{cursor(e=0){return new cD(this,e)}getChild(e,t=null,i=null){let r=tk(this,e,t,i);return r.length?r[0]:null}getChildren(e,t=null,i=null){return tk(this,e,t,i)}resolve(e,t=0){return vg(this,e,t,!1)}resolveInner(e,t=0){return vg(this,e,t,!0)}matchContext(e){return uD(this,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),i=this;for(;t;){let r=t.lastChild;if(!r||r.to!=t.to)break;r.type.isError&&r.from==r.to?(i=t,t=r.prevSibling):t=r}return i}get node(){return this}get next(){return this.parent}}class zc extends ek{constructor(e,t,i,r){super(),this._tree=e,this.from=t,this.index=i,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,i,r,s=0){for(let o=this;;){for(let{children:l,positions:h}=o._tree,p=t>0?l.length:-1;e!=p;e+=t){let y=l[e],w=h[e]+o.from;if(JO(r,i,w,w+y.length)){if(y instanceof Ad){if(s&Iu.ExcludeBuffers)continue;let F=y.findChild(0,y.buffer.length,t,i-w,r);if(F>-1)return new Td(new v8(o,y,e,w),null,F)}else if(s&Iu.IncludeAnonymous||!y.type.isAnonymous||hD(y)){let F;if(!(s&Iu.IgnoreMounts)&&(F=uv.get(y))&&!F.overlay)return new zc(F.tree,w,e,o);let j=new zc(y,w,e,o);return s&Iu.IncludeAnonymous||!j.type.isAnonymous?j:j.nextChild(t<0?y.children.length-1:0,t,i,r)}}}if(s&Iu.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+t:e=t<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,i=0){let r;if(!(i&Iu.IgnoreOverlays)&&(r=uv.get(this._tree))&&r.overlay){let s=e-this.from;for(let{from:o,to:l}of r.overlay)if((t>0?o<=s:o<s)&&(t<0?l>=s:l>s))return new zc(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function tk(n,e,t,i){let r=n.cursor(),s=[];if(!r.firstChild())return s;if(t!=null){for(let o=!1;!o;)if(o=r.type.is(t),!r.nextSibling())return s}for(;;){if(i!=null&&r.type.is(i))return s;if(r.type.is(e)&&s.push(r.node),!r.nextSibling())return i==null?s:[]}}function uD(n,e,t=e.length-1){for(let i=n.parent;t>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[t]&&e[t]!=i.name)return!1;t--}}return!0}class v8{constructor(e,t,i,r){this.parent=e,this.buffer=t,this.index=i,this.start=r}}class Td extends ek{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,i){super(),this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,t,i){let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.context.start,i);return s<0?null:new Td(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,i=0){if(i&Iu.ExcludeBuffers)return null;let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return s<0?null:new Td(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Td(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new Td(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:i}=this.context,r=this.index+4,s=i.buffer[this.index+3];if(s>r){let o=i.buffer[this.index+1];e.push(i.slice(r,s,o)),t.push(0)}return new hu(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function nk(n){if(!n.length)return null;let e=0,t=n[0];for(let s=1;s<n.length;s++){let o=n[s];(o.from>t.from||o.to<t.to)&&(t=o,e=s)}let i=t instanceof zc&&t.index<0?null:t.parent,r=n.slice();return i?r[e]=i:r.splice(e,1),new x8(r,t)}class x8{constructor(e,t){this.heads=e,this.node=t}get next(){return nk(this.heads)}}function b8(n,e,t){let i=n.resolveInner(e,t),r=null;for(let s=i instanceof zc?i:i.context.parent;s;s=s.parent)if(s.index<0){let o=s.parent;(r||(r=[i])).push(o.resolve(e,t)),s=o}else{let o=uv.get(s.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let l=new zc(o.tree,o.overlay[0].from+s.from,-1,s);(r||(r=[i])).push(vg(l,e,t,!1))}}return r?nk(r):i}class cD{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof zc)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:i,buffer:r}=this.buffer;return this.type=t||r.set.types[r.buffer[e]],this.from=i+r.buffer[e+1],this.to=i+r.buffer[e+2],!0}yield(e){return e?e instanceof zc?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,i,this.mode));let{buffer:r}=this.buffer,s=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.buffer.start,i);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,i=this.mode){return this.buffer?i&Iu.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Iu.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Iu.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let r=i<0?0:this.stack[i]+4;if(this.index!=r)return this.yieldBuf(t.findChild(r,this.index,-1,0,4))}else{let r=t.buffer[this.index+3];if(r<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(r)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(r.buffer.buffer[s+3]<this.index)return!1;({index:t,parent:i}=r)}else({index:t,_parent:i}=this._tree);for(;i;{index:t,_parent:i}=i)if(t>-1)for(let s=t+e,o=e<0?-1:i._tree.children.length;s!=o;s+=e){let l=i._tree.children[s];if(this.mode&Iu.IncludeAnonymous||l instanceof Ad||!l.type.isAnonymous||hD(l))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer)e:for(let r=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==r){if(r==this.index)return o;t=o,i=s+1;break e}r=this.stack[--s]}for(let r=i;r<this.stack.length;r++)t=new Td(this.buffer,t,this.stack[r]);return this.bufferNode=new Td(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let i=0;;){let r=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(r=!0)}for(;r&&t&&t(this),r=this.type.isAnonymous,!this.nextSibling();){if(!i)return;this.parent(),i--,r=!0}}}matchContext(e){if(!this.buffer)return uD(this.node,e);let{buffer:t}=this.buffer,{types:i}=t.set;for(let r=e.length-1,s=this.stack.length-1;r>=0;s--){if(s<0)return uD(this.node,e,r);let o=i[t.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[r]&&e[r]!=o.name)return!1;r--}}return!0}}function hD(n){return n.children.some(e=>e instanceof Ad||!e.type.isAnonymous||hD(e))}function D8(n){var e;let{buffer:t,nodeSet:i,maxBufferLength:r=KO,reused:s=[],minRepeatType:o=i.types.length}=n,l=Array.isArray(t)?new lD(t,t.length):t,h=i.types,p=0,y=0;function w(Qe,ft,bt,st,Lt,Vt){let{id:Zt,start:wn,end:Kn,size:Mr}=l,qa=y;for(;Mr<0;)if(l.next(),Mr==-1){let Ra=s[Zt];bt.push(Ra),st.push(wn-Qe);return}else if(Mr==-3){p=Zt;return}else if(Mr==-4){y=Zt;return}else throw new RangeError(`Unrecognized record size: ${Mr}`);let Go=h[Zt],Do,ac,lh=wn-Qe;if(Kn-wn<=r&&(ac=ye(l.pos-ft,Lt))){let Ra=new Uint16Array(ac.size-ac.skip),El=l.pos-ac.size,Gu=Ra.length;for(;l.pos>El;)Gu=Le(ac.start,Ra,Gu);Do=new Ad(Ra,Kn-ac.start,i),lh=ac.start-Qe}else{let Ra=l.pos-Mr;l.next();let El=[],Gu=[],Cc=Zt>=o?Zt:-1,Nc=0,du=Kn;for(;l.pos>Ra;)Cc>=0&&l.id==Cc&&l.size>=0?(l.end<=du-r&&(Q(El,Gu,wn,Nc,l.end,du,Cc,qa),Nc=El.length,du=l.end),l.next()):Vt>2500?F(wn,Ra,El,Gu):w(wn,Ra,El,Gu,Cc,Vt+1);if(Cc>=0&&Nc>0&&Nc<El.length&&Q(El,Gu,wn,Nc,wn,du,Cc,qa),El.reverse(),Gu.reverse(),Cc>-1&&Nc>0){let Bd=j(Go);Do=dD(Go,El,Gu,0,El.length,0,Kn-wn,Bd,Bd)}else Do=he(Go,El,Gu,Kn-wn,qa-Kn)}bt.push(Do),st.push(lh)}function F(Qe,ft,bt,st){let Lt=[],Vt=0,Zt=-1;for(;l.pos>ft;){let{id:wn,start:Kn,end:Mr,size:qa}=l;if(qa>4)l.next();else{if(Zt>-1&&Kn<Zt)break;Zt<0&&(Zt=Mr-r),Lt.push(wn,Kn,Mr),Vt++,l.next()}}if(Vt){let wn=new Uint16Array(Vt*4),Kn=Lt[Lt.length-2];for(let Mr=Lt.length-3,qa=0;Mr>=0;Mr-=3)wn[qa++]=Lt[Mr],wn[qa++]=Lt[Mr+1]-Kn,wn[qa++]=Lt[Mr+2]-Kn,wn[qa++]=qa;bt.push(new Ad(wn,Lt[2]-Kn,i)),st.push(Kn-Qe)}}function j(Qe){return(ft,bt,st)=>{let Lt=0,Vt=ft.length-1,Zt,wn;if(Vt>=0&&(Zt=ft[Vt])instanceof hu){if(!Vt&&Zt.type==Qe&&Zt.length==st)return Zt;(wn=Zt.prop(Ho.lookAhead))&&(Lt=bt[Vt]+Zt.length+wn)}return he(Qe,ft,bt,st,Lt)}}function Q(Qe,ft,bt,st,Lt,Vt,Zt,wn){let Kn=[],Mr=[];for(;Qe.length>st;)Kn.push(Qe.pop()),Mr.push(ft.pop()+bt-Lt);Qe.push(he(i.types[Zt],Kn,Mr,Vt-Lt,wn-Vt)),ft.push(Lt-bt)}function he(Qe,ft,bt,st,Lt=0,Vt){if(p){let Zt=[Ho.contextHash,p];Vt=Vt?[Zt].concat(Vt):[Zt]}if(Lt>25){let Zt=[Ho.lookAhead,Lt];Vt=Vt?[Zt].concat(Vt):[Zt]}return new hu(Qe,ft,bt,st,Vt)}function ye(Qe,ft){let bt=l.fork(),st=0,Lt=0,Vt=0,Zt=bt.end-r,wn={size:0,start:0,skip:0};e:for(let Kn=bt.pos-Qe;bt.pos>Kn;){let Mr=bt.size;if(bt.id==ft&&Mr>=0){wn.size=st,wn.start=Lt,wn.skip=Vt,Vt+=4,st+=4,bt.next();continue}let qa=bt.pos-Mr;if(Mr<0||qa<Kn||bt.start<Zt)break;let Go=bt.id>=o?4:0,Do=bt.start;for(bt.next();bt.pos>qa;){if(bt.size<0)if(bt.size==-3)Go+=4;else break e;else bt.id>=o&&(Go+=4);bt.next()}Lt=Do,st+=Mr,Vt+=Go}return(ft<0||st==Qe)&&(wn.size=st,wn.start=Lt,wn.skip=Vt),wn.size>4?wn:void 0}function Le(Qe,ft,bt){let{id:st,start:Lt,end:Vt,size:Zt}=l;if(l.next(),Zt>=0&&st<o){let wn=bt;if(Zt>4){let Kn=l.pos-(Zt-4);for(;l.pos>Kn;)bt=Le(Qe,ft,bt)}ft[--bt]=wn,ft[--bt]=Vt-Qe,ft[--bt]=Lt-Qe,ft[--bt]=st}else Zt==-3?p=st:Zt==-4&&(y=st);return bt}let et=[],Me=[];for(;l.pos>0;)w(n.start||0,n.bufferStart||0,et,Me,-1,0);let ke=(e=n.length)!==null&&e!==void 0?e:et.length?Me[0]+et[0].length:0;return new hu(h[n.topID],et.reverse(),Me.reverse(),ke)}const ik=new WeakMap;function hv(n,e){if(!n.isAnonymous||e instanceof Ad||e.type!=n)return 1;let t=ik.get(e);if(t==null){t=1;for(let i of e.children){if(i.type!=n||!(i instanceof hu)){t=1;break}t+=hv(n,i)}ik.set(e,t)}return t}function dD(n,e,t,i,r,s,o,l,h){let p=0;for(let Q=i;Q<r;Q++)p+=hv(n,e[Q]);let y=Math.ceil(p*1.5/8),w=[],F=[];function j(Q,he,ye,Le,et){for(let Me=ye;Me<Le;){let ke=Me,Qe=he[Me],ft=hv(n,Q[Me]);for(Me++;Me<Le;Me++){let bt=hv(n,Q[Me]);if(ft+bt>=y)break;ft+=bt}if(Me==ke+1){if(ft>y){let bt=Q[ke];j(bt.children,bt.positions,0,bt.children.length,he[ke]+et);continue}w.push(Q[ke])}else{let bt=he[Me-1]+Q[Me-1].length-Qe;w.push(dD(n,Q,he,ke,Me,Qe,bt,null,h))}F.push(Qe+et-s)}}return j(e,t,i,r,0),(l||h)(w,F,o)}class wp{constructor(e,t,i,r,s=!1,o=!1){this.from=e,this.to=t,this.tree=i,this.offset=r,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],i=!1){let r=[new wp(0,e.length,e,0,!1,i)];for(let s of t)s.to>e.length&&r.push(s);return r}static applyChanges(e,t,i=128){if(!t.length)return e;let r=[],s=1,o=e.length?e[0]:null;for(let l=0,h=0,p=0;;l++){let y=l<t.length?t[l]:null,w=y?y.fromA:1e9;if(w-h>=i)for(;o&&o.from<w;){let F=o;if(h>=F.from||w<=F.to||p){let j=Math.max(F.from,h)-p,Q=Math.min(F.to,w)-p;F=j>=Q?null:new wp(j,Q,F.tree,F.offset+p,l>0,!!y)}if(F&&r.push(F),o.to>w)break;o=s<e.length?e[s++]:null}if(!y)break;h=y.toA,p=y.toA-y.toB}return r}}class rk{startParse(e,t,i){return typeof e=="string"&&(e=new w8(e)),i=i?i.length?i.map(r=>new oD(r.from,r.to)):[new oD(0,0)]:[new oD(0,e.length)],this.createParse(e,t||[],i)}parse(e,t,i){let r=this.startParse(e,t,i);for(;;){let s=r.advance();if(s)return s}}}class w8{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new Ho({perNode:!0});let E8=0;class Dh{constructor(e,t,i){this.set=e,this.base=t,this.modified=i,this.id=E8++}static define(e){if(e!=null&&e.base)throw new Error("Can not derive from a modified tag");let t=new Dh([],null,[]);if(t.set.push(t),e)for(let i of e.set)t.set.push(i);return t}static defineModifier(){let e=new dv;return t=>t.modified.indexOf(e)>-1?t:dv.get(t.base||t,t.modified.concat(e).sort((i,r)=>i.id-r.id))}}let C8=0;class dv{constructor(){this.instances=[],this.id=C8++}static get(e,t){if(!t.length)return e;let i=t[0].instances.find(l=>l.base==e&&S8(t,l.modified));if(i)return i;let r=[],s=new Dh(r,e,t);for(let l of t)l.instances.push(s);let o=A8(t);for(let l of e.set)if(!l.modified.length)for(let h of o)r.push(dv.get(l,h));return s}}function S8(n,e){return n.length==e.length&&n.every((t,i)=>t==e[i])}function A8(n){let e=[[]];for(let t=0;t<n.length;t++)for(let i=0,r=e.length;i<r;i++)e.push(e[i].concat(n[t]));return e.sort((t,i)=>i.length-t.length)}function sk(n){let e=Object.create(null);for(let t in n){let i=n[t];Array.isArray(i)||(i=[i]);for(let r of t.split(" "))if(r){let s=[],o=2,l=r;for(let w=0;;){if(l=="..."&&w>0&&w+3==r.length){o=1;break}let F=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!F)throw new RangeError("Invalid path: "+r);if(s.push(F[0]=="*"?"":F[0][0]=='"'?JSON.parse(F[0]):F[0]),w+=F[0].length,w==r.length)break;let j=r[w++];if(w==r.length&&j=="!"){o=0;break}if(j!="/")throw new RangeError("Invalid path: "+r);l=r.slice(w)}let h=s.length-1,p=s[h];if(!p)throw new RangeError("Invalid path: "+r);let y=new pv(i,o,h>0?s.slice(0,h):null);e[p]=y.sort(e[p])}}return ok.add(e)}const ok=new Ho;class pv{constructor(e,t,i,r){this.tags=e,this.mode=t,this.context=i,this.next=r}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}pv.empty=new pv([],2,null);function ak(n,e){let t=Object.create(null);for(let s of n)if(!Array.isArray(s.tag))t[s.tag.id]=s.class;else for(let o of s.tag)t[o.id]=s.class;let{scope:i,all:r=null}=e||{};return{style:s=>{let o=r;for(let l of s)for(let h of l.set){let p=t[h.id];if(p){o=o?o+" "+p:p;break}}return o},scope:i}}function T8(n,e){let t=null;for(let i of n){let r=i.style(e);r&&(t=t?t+" "+r:r)}return t}function O8(n,e,t,i=0,r=n.length){let s=new k8(i,Array.isArray(e)?e:[e],t);s.highlightRange(n.cursor(),i,r,"",s.highlighters),s.flush(r)}class k8{constructor(e,t,i){this.at=e,this.highlighters=t,this.span=i,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,i,r,s){let{type:o,from:l,to:h}=e;if(l>=i||h<=t)return;o.isTop&&(s=this.highlighters.filter(j=>!j.scope||j.scope(o)));let p=r,y=_8(e)||pv.empty,w=T8(s,y.tags);if(w&&(p&&(p+=" "),p+=w,y.mode==1&&(r+=(r?" ":"")+w)),this.startSpan(Math.max(t,l),p),y.opaque)return;let F=e.tree&&e.tree.prop(Ho.mounted);if(F&&F.overlay){let j=e.node.enter(F.overlay[0].from+l,1),Q=this.highlighters.filter(ye=>!ye.scope||ye.scope(F.tree.type)),he=e.firstChild();for(let ye=0,Le=l;;ye++){let et=ye<F.overlay.length?F.overlay[ye]:null,Me=et?et.from+l:h,ke=Math.max(t,Le),Qe=Math.min(i,Me);if(ke<Qe&&he)for(;e.from<Qe&&(this.highlightRange(e,ke,Qe,r,s),this.startSpan(Math.min(Qe,e.to),p),!(e.to>=Me||!e.nextSibling())););if(!et||Me>i)break;Le=et.to+l,Le>t&&(this.highlightRange(j.cursor(),Math.max(t,et.from+l),Math.min(i,Le),"",Q),this.startSpan(Math.min(i,Le),p))}he&&e.parent()}else if(e.firstChild()){F&&(r="");do if(!(e.to<=t)){if(e.from>=i)break;this.highlightRange(e,t,i,r,s),this.startSpan(Math.min(i,e.to),p)}while(e.nextSibling());e.parent()}}}function _8(n){let e=n.type.prop(ok);for(;e&&e.context&&!n.matchContext(e.context);)e=e.next;return e||null}const cr=Dh.define,fv=cr(),Od=cr(),lk=cr(Od),uk=cr(Od),kd=cr(),mv=cr(kd),pD=cr(kd),wh=cr(),Ep=cr(wh),Eh=cr(),Ch=cr(),fD=cr(),xg=cr(fD),gv=cr(),Vi={comment:fv,lineComment:cr(fv),blockComment:cr(fv),docComment:cr(fv),name:Od,variableName:cr(Od),typeName:lk,tagName:cr(lk),propertyName:uk,attributeName:cr(uk),className:cr(Od),labelName:cr(Od),namespace:cr(Od),macroName:cr(Od),literal:kd,string:mv,docString:cr(mv),character:cr(mv),attributeValue:cr(mv),number:pD,integer:cr(pD),float:cr(pD),bool:cr(kd),regexp:cr(kd),escape:cr(kd),color:cr(kd),url:cr(kd),keyword:Eh,self:cr(Eh),null:cr(Eh),atom:cr(Eh),unit:cr(Eh),modifier:cr(Eh),operatorKeyword:cr(Eh),controlKeyword:cr(Eh),definitionKeyword:cr(Eh),moduleKeyword:cr(Eh),operator:Ch,derefOperator:cr(Ch),arithmeticOperator:cr(Ch),logicOperator:cr(Ch),bitwiseOperator:cr(Ch),compareOperator:cr(Ch),updateOperator:cr(Ch),definitionOperator:cr(Ch),typeOperator:cr(Ch),controlOperator:cr(Ch),punctuation:fD,separator:cr(fD),bracket:xg,angleBracket:cr(xg),squareBracket:cr(xg),paren:cr(xg),brace:cr(xg),content:wh,heading:Ep,heading1:cr(Ep),heading2:cr(Ep),heading3:cr(Ep),heading4:cr(Ep),heading5:cr(Ep),heading6:cr(Ep),contentSeparator:cr(wh),list:cr(wh),quote:cr(wh),emphasis:cr(wh),strong:cr(wh),link:cr(wh),monospace:cr(wh),strikethrough:cr(wh),inserted:cr(),deleted:cr(),changed:cr(),invalid:cr(),meta:gv,documentMeta:cr(gv),annotation:cr(gv),processingInstruction:cr(gv),definition:Dh.defineModifier(),constant:Dh.defineModifier(),function:Dh.defineModifier(),standard:Dh.defineModifier(),local:Dh.defineModifier(),special:Dh.defineModifier()};ak([{tag:Vi.link,class:"tok-link"},{tag:Vi.heading,class:"tok-heading"},{tag:Vi.emphasis,class:"tok-emphasis"},{tag:Vi.strong,class:"tok-strong"},{tag:Vi.keyword,class:"tok-keyword"},{tag:Vi.atom,class:"tok-atom"},{tag:Vi.bool,class:"tok-bool"},{tag:Vi.url,class:"tok-url"},{tag:Vi.labelName,class:"tok-labelName"},{tag:Vi.inserted,class:"tok-inserted"},{tag:Vi.deleted,class:"tok-deleted"},{tag:Vi.literal,class:"tok-literal"},{tag:Vi.string,class:"tok-string"},{tag:Vi.number,class:"tok-number"},{tag:[Vi.regexp,Vi.escape,Vi.special(Vi.string)],class:"tok-string2"},{tag:Vi.variableName,class:"tok-variableName"},{tag:Vi.local(Vi.variableName),class:"tok-variableName tok-local"},{tag:Vi.definition(Vi.variableName),class:"tok-variableName tok-definition"},{tag:Vi.special(Vi.variableName),class:"tok-variableName2"},{tag:Vi.definition(Vi.propertyName),class:"tok-propertyName tok-definition"},{tag:Vi.typeName,class:"tok-typeName"},{tag:Vi.namespace,class:"tok-namespace"},{tag:Vi.className,class:"tok-className"},{tag:Vi.macroName,class:"tok-macroName"},{tag:Vi.propertyName,class:"tok-propertyName"},{tag:Vi.operator,class:"tok-operator"},{tag:Vi.comment,class:"tok-comment"},{tag:Vi.meta,class:"tok-meta"},{tag:Vi.invalid,class:"tok-invalid"},{tag:Vi.punctuation,class:"tok-punctuation"}]);var mD;const Of=new Ho;function P8(n){return $s.define({combine:n?e=>e.concat(n):void 0})}const F8=new Ho;class sh{constructor(e,t,i=[],r=""){this.data=e,this.name=r,ba.prototype.hasOwnProperty("tree")||Object.defineProperty(ba.prototype,"tree",{get(){return Nu(this)}}),this.parser=t,this.extension=[_f.of(this),ba.languageData.of((s,o,l)=>{let h=ck(s,o,l),p=h.type.prop(Of);if(!p)return[];let y=s.facet(p),w=h.type.prop(F8);if(w){let F=h.resolve(o-h.from,l);for(let j of w)if(j.test(F,s)){let Q=s.facet(j.facet);return j.type=="replace"?Q:Q.concat(y)}}return y})].concat(i)}isActiveAt(e,t,i=-1){return ck(e,t,i).type.prop(Of)==this.data}findRegions(e){let t=e.facet(_f);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let i=[],r=(s,o)=>{if(s.prop(Of)==this.data){i.push({from:o,to:o+s.length});return}let l=s.prop(Ho.mounted);if(l){if(l.tree.prop(Of)==this.data){if(l.overlay)for(let h of l.overlay)i.push({from:h.from+o,to:h.to+o});else i.push({from:o,to:o+s.length});return}else if(l.overlay){let h=i.length;if(r(l.tree,l.overlay[0].from+o),i.length>h)return}}for(let h=0;h<s.children.length;h++){let p=s.children[h];p instanceof hu&&r(p,s.positions[h]+o)}};return r(Nu(e),0),i}get allowsNesting(){return!0}}sh.setState=pa.define();function ck(n,e,t){let i=n.facet(_f),r=Nu(n).topNode;if(!i||i.allowsNesting)for(let s=r;s;s=s.enter(e,t,Iu.ExcludeBuffers))s.type.isTop&&(r=s);return r}class yv extends sh{constructor(e,t,i){super(e,t,[],i),this.parser=t}static define(e){let t=P8(e.languageData);return new yv(t,e.parser.configure({props:[Of.add(i=>i.isTop?t:void 0)]}),e.name)}configure(e,t){return new yv(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function Nu(n){let e=n.field(sh.state,!1);return e?e.tree:hu.empty}class M8{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let i=this.cursorPos-this.string.length;return e<i||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-i,t-i)}}let bg=null;class vv{constructor(e,t,i=[],r,s,o,l,h){this.parser=e,this.state=t,this.fragments=i,this.tree=r,this.treeLen=s,this.viewport=o,this.skipped=l,this.scheduleOn=h,this.parse=null,this.tempSkipped=[]}static create(e,t,i){return new vv(e,t,[],hu.empty,0,i,[],null)}startParse(){return this.parser.startParse(new M8(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=hu.empty&&this.isDone(t!=null?t:this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let r=Date.now()+e;e=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped(wp.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(t!=null?t:this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(wp.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=bg;bg=this;try{return e()}finally{bg=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=hk(e,t.from,t.to);return e}changes(e,t){let{fragments:i,tree:r,treeLen:s,viewport:o,skipped:l}=this;if(this.takeTree(),!e.empty){let h=[];if(e.iterChangedRanges((p,y,w,F)=>h.push({fromA:p,toA:y,fromB:w,toB:F})),i=wp.applyChanges(i,h),r=hu.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){l=[];for(let p of this.skipped){let y=e.mapPos(p.from,1),w=e.mapPos(p.to,-1);y<w&&l.push({from:y,to:w})}}}return new vv(this.parser,t,i,r,s,o,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:r,to:s}=this.skipped[i];r<e.to&&s>e.from&&(this.fragments=hk(this.fragments,r,s),this.skipped.splice(i--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends rk{createParse(t,i,r){let s=r[0].from,o=r[r.length-1].to;return{parsedPos:s,advance(){let h=bg;if(h){for(let p of r)h.tempSkipped.push(p);e&&(h.scheduleOn=h.scheduleOn?Promise.all([h.scheduleOn,e]):e)}return this.parsedPos=o,new hu(wc.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return bg}}function hk(n,e,t){return wp.applyChanges(n,[{fromA:e,toA:t,fromB:e,toB:t}])}class kf{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,i)||t.takeTree(),new kf(t)}static init(e){let t=Math.min(3e3,e.doc.length),i=vv.create(e.facet(_f).parser,e,{from:0,to:t});return i.work(20,t)||i.takeTree(),new kf(i)}}sh.state=Pc.define({create:kf.init,update(n,e){for(let t of e.effects)if(t.is(sh.setState))return t.value;return e.startState.facet(_f)!=e.state.facet(_f)?kf.init(e.state):n.apply(e)}});let dk=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback!="undefined"&&(dk=n=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(n,{timeout:500-100})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const gD=typeof navigator!="undefined"&&(!((mD=navigator.scheduling)===null||mD===void 0)&&mD.isInputPending)?()=>navigator.scheduling.isInputPending():null,I8=Wc.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(sh.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(sh.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=dk(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:r}}=this.view,s=i.field(sh.state);if(s.tree==s.context.tree&&s.context.isDone(r+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!gD?Math.max(25,e.timeRemaining()-5):1e9),l=s.context.treeLen<r&&i.doc.length>r+1e3,h=s.context.work(()=>gD&&gD()||Date.now()>o,r+(l?0:1e5));this.chunkBudget-=Date.now()-t,(h||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:sh.setState.of(new kf(s.context))})),this.chunkBudget>0&&!(h&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>pc(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),_f=$s.define({combine(n){return n.length?n[0]:null},enables:n=>[sh.state,I8,As.contentAttributes.compute([n],e=>{let t=e.facet(n);return t&&t.name?{"data-language":t.name}:{}})]});class N8{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const B8=$s.define(),xv=$s.define({combine:n=>{if(!n.length)return"  ";let e=n[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return e}});function bv(n){let e=n.facet(xv);return e.charCodeAt(0)==9?n.tabSize*e.length:e.length}function Dg(n,e){let t="",i=n.tabSize,r=n.facet(xv)[0];if(r=="	"){for(;e>=i;)t+="	",e-=i;r=" "}for(let s=0;s<e;s++)t+=r;return t}function yD(n,e){n instanceof ba&&(n=new Dv(n));for(let i of n.state.facet(B8)){let r=i(n,e);if(r!==void 0)return r}let t=Nu(n.state);return t.length>=e?R8(n,t,e):null}class Dv{constructor(e,t={}){this.state=e,this.options=t,this.unit=bv(e)}lineAt(e,t=1){let i=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:s}=this.options;return r!=null&&r>=i.from&&r<=i.to?s&&r==e?{text:"",from:e}:(t<0?r<e:r<=e)?{text:i.text.slice(r-i.from),from:r}:{text:i.text.slice(0,r-i.from),from:i.from}:i}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:r}=this.lineAt(e,t);return i.slice(e-r,Math.min(i.length,e+100-r))}column(e,t=1){let{text:i,from:r}=this.lineAt(e,t),s=this.countColumn(i,e-r),o=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return o>-1&&(s+=o-this.countColumn(i,i.search(/\S|$/))),s}countColumn(e,t=e.length){return L0(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:i,from:r}=this.lineAt(e,t),s=this.options.overrideIndentation;if(s){let o=s(r);if(o>-1)return o}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const pk=new Ho;function R8(n,e,t){let i=e.resolveStack(t),r=i.node.enterUnfinishedNodesBefore(t);if(r!=i.node){let s=[];for(let o=r;o!=i.node;o=o.parent)s.push(o);for(let o=s.length-1;o>=0;o--)i={node:s[o],next:i}}return fk(i,n,t)}function fk(n,e,t){for(let i=n;i;i=i.next){let r=$8(i.node);if(r)return r(vD.create(e,t,i))}return 0}function L8(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function $8(n){let e=n.type.prop(pk);if(e)return e;let t=n.firstChild,i;if(t&&(i=t.type.prop(Ho.closedBy))){let r=n.lastChild,s=r&&i.indexOf(r.name)>-1;return o=>gk(o,!0,1,void 0,s&&!L8(o)?r.from:void 0)}return n.parent==null?j8:null}function j8(){return 0}class vD extends Dv{constructor(e,t,i){super(e.state,e.options),this.base=e,this.pos=t,this.context=i}get node(){return this.context.node}static create(e,t,i){return new vD(e,t,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(t.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(V8(i,e))break;t=this.state.doc.lineAt(i.from)}return this.lineIndent(t.from)}continue(){return fk(this.context.next,this.base,this.pos)}}function V8(n,e){for(let t=e;t;t=t.parent)if(n==t)return!0;return!1}function W8(n){let e=n.node,t=e.childAfter(e.from),i=e.lastChild;if(!t)return null;let r=n.options.simulateBreak,s=n.state.doc.lineAt(t.from),o=r==null||r<=s.from?s.to:Math.min(s.to,r);for(let l=t.to;;){let h=e.childAfter(l);if(!h||h==i)return null;if(!h.type.isSkipped)return h.from<o?t:null;l=h.to}}function mk({closing:n,align:e=!0,units:t=1}){return i=>gk(i,e,t,n)}function gk(n,e,t,i,r){let s=n.textAfter,o=s.match(/^\s*/)[0].length,l=i&&s.slice(o,o+i.length)==i||r==n.pos+o,h=e?W8(n):null;return h?l?n.column(h.from):n.column(h.to):n.baseIndent+(l?0:n.unit*t)}function xD({except:n,units:e=1}={}){return t=>{let i=n&&n.test(t.textAfter);return t.baseIndent+(i?0:e*t.unit)}}const H8=200;function U8(){return ba.transactionFilter.of(n=>{if(!n.docChanged||!n.isUserEvent("input.type")&&!n.isUserEvent("input.complete"))return n;let e=n.startState.languageDataAt("indentOnInput",n.startState.selection.main.head);if(!e.length)return n;let t=n.newDoc,{head:i}=n.newSelection.main,r=t.lineAt(i);if(i>r.from+H8)return n;let s=t.sliceString(r.from,i);if(!e.some(p=>p.test(s)))return n;let{state:o}=n,l=-1,h=[];for(let{head:p}of o.selection.ranges){let y=o.doc.lineAt(p);if(y.from==l)continue;l=y.from;let w=yD(o,y.from);if(w==null)continue;let F=/^\s*/.exec(y.text)[0],j=Dg(o,w);F!=j&&h.push({from:y.from,to:y.from+F.length,insert:j})}return h.length?[n,{changes:h,sequential:!0}]:n})}const z8=new Ho;function bD(n){let e=n.firstChild,t=n.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?n.to:t.from}:null}class wv{constructor(e,t){this.specs=e;let i;function r(l){let h=xd.newName();return(i||(i=Object.create(null)))["."+h]=l,h}const s=typeof t.all=="string"?t.all:t.all?r(t.all):void 0,o=t.scope;this.scope=o instanceof sh?l=>l.prop(Of)==o.data:o?l=>l==o:void 0,this.style=ak(e.map(l=>({tag:l.tag,class:l.class||r(Object.assign({},l,{tag:null}))})),{all:s}).style,this.module=i?new xd(i):null,this.themeType=t.themeType}static define(e,t){return new wv(e,t||{})}}const DD=$s.define(),q8=$s.define({combine(n){return n.length?[n[0]]:null}});function wD(n){let e=n.facet(DD);return e.length?e:n.facet(q8)}function Q8(n,e){let t=[Y8],i;return n instanceof wv&&(n.module&&t.push(As.styleModule.of(n.module)),i=n.themeType),i?t.push(DD.computeN([As.darkTheme],r=>r.facet(As.darkTheme)==(i=="dark")?[n]:[])):t.push(DD.of(n)),t}class X8{constructor(e){this.markCache=Object.create(null),this.tree=Nu(e.state),this.decorations=this.buildDeco(e,wD(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=Nu(e.state),i=wD(e.state),r=i!=wD(e.startState),{viewport:s}=e.view,o=e.changes.mapPos(this.decoratedTo,1);t.length<s.to&&!r&&t.type==this.tree.type&&o>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(t!=this.tree||e.viewportChanged||r)&&(this.tree=t,this.decorations=this.buildDeco(e.view,i),this.decoratedTo=s.to)}buildDeco(e,t){if(!t||!this.tree.length)return Ta.none;let i=new ng;for(let{from:r,to:s}of e.visibleRanges)O8(this.tree,t,(o,l,h)=>{i.add(o,l,this.markCache[h]||(this.markCache[h]=Ta.mark({class:h})))},r,s);return i.finish()}}const Y8=bf.high(Wc.fromClass(X8,{decorations:n=>n.decorations})),G8=As.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),yk=1e4,vk="()[]{}",xk=$s.define({combine(n){return xb(n,{afterCursor:!0,brackets:vk,maxScanDistance:yk,renderMatch:J8})}}),K8=Ta.mark({class:"cm-matchingBracket"}),Z8=Ta.mark({class:"cm-nonmatchingBracket"});function J8(n){let e=[],t=n.matched?K8:Z8;return e.push(t.range(n.start.from,n.start.to)),n.end&&e.push(t.range(n.end.from,n.end.to)),e}const e6=[Pc.define({create(){return Ta.none},update(n,e){if(!e.docChanged&&!e.selection)return n;let t=[],i=e.state.facet(xk);for(let r of e.state.selection.ranges){if(!r.empty)continue;let s=Sh(e.state,r.head,-1,i)||r.head>0&&Sh(e.state,r.head-1,1,i)||i.afterCursor&&(Sh(e.state,r.head,1,i)||r.head<e.state.doc.length&&Sh(e.state,r.head+1,-1,i));s&&(t=t.concat(i.renderMatch(s,e.state)))}return Ta.set(t,!0)},provide:n=>As.decorations.from(n)}),G8];function t6(n={}){return[xk.of(n),e6]}const n6=new Ho;function ED(n,e,t){let i=n.prop(e<0?Ho.openedBy:Ho.closedBy);if(i)return i;if(n.name.length==1){let r=t.indexOf(n.name);if(r>-1&&r%2==(e<0?1:0))return[t[r+e]]}return null}function CD(n){let e=n.type.prop(n6);return e?e(n.node):n}function Sh(n,e,t,i={}){let r=i.maxScanDistance||yk,s=i.brackets||vk,o=Nu(n),l=o.resolveInner(e,t);for(let h=l;h;h=h.parent){let p=ED(h.type,t,s);if(p&&h.from<h.to){let y=CD(h);if(y&&(t>0?e>=y.from&&e<y.to:e>y.from&&e<=y.to))return i6(n,e,t,h,y,p,s)}}return r6(n,e,t,o,l.type,r,s)}function i6(n,e,t,i,r,s,o){let l=i.parent,h={from:r.from,to:r.to},p=0,y=l==null?void 0:l.cursor();if(y&&(t<0?y.childBefore(i.from):y.childAfter(i.to)))do if(t<0?y.to<=i.from:y.from>=i.to){if(p==0&&s.indexOf(y.type.name)>-1&&y.from<y.to){let w=CD(y);return{start:h,end:w?{from:w.from,to:w.to}:void 0,matched:!0}}else if(ED(y.type,t,o))p++;else if(ED(y.type,-t,o)){if(p==0){let w=CD(y);return{start:h,end:w&&w.from<w.to?{from:w.from,to:w.to}:void 0,matched:!1}}p--}}while(t<0?y.prevSibling():y.nextSibling());return{start:h,matched:!1}}function r6(n,e,t,i,r,s,o){let l=t<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),h=o.indexOf(l);if(h<0||h%2==0!=t>0)return null;let p={from:t<0?e-1:e,to:t>0?e+1:e},y=n.doc.iterRange(e,t>0?n.doc.length:0),w=0;for(let F=0;!y.next().done&&F<=s;){let j=y.value;t<0&&(F+=j.length);let Q=e+F*t;for(let he=t>0?0:j.length-1,ye=t>0?j.length:-1;he!=ye;he+=t){let Le=o.indexOf(j[he]);if(!(Le<0||i.resolveInner(Q+he,1).type!=r))if(Le%2==0==t>0)w++;else{if(w==1)return{start:p,end:{from:Q+he,to:Q+he+1},matched:Le>>1==h>>1};w--}}t>0&&(F+=j.length)}return y.done?{start:p,matched:!1}:null}const s6=Object.create(null),bk=[wc.none],Dk=[],wk=Object.create(null),o6=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])o6[n]=a6(s6,e);function SD(n,e){Dk.indexOf(n)>-1||(Dk.push(n),console.warn(e))}function a6(n,e){let t=[];for(let l of e.split(" ")){let h=[];for(let p of l.split(".")){let y=n[p]||Vi[p];y?typeof y=="function"?h.length?h=h.map(y):SD(p,`Modifier ${p} used at start of tag`):h.length?SD(p,`Tag ${p} used as modifier`):h=Array.isArray(y)?y:[y]:SD(p,`Unknown highlighting tag ${p}`)}for(let p of h)t.push(p)}if(!t.length)return 0;let i=e.replace(/ /g,"_"),r=i+" "+t.map(l=>l.id),s=wk[r];if(s)return s.id;let o=wk[r]=wc.define({id:bk.length,name:i,props:[sk({[i]:t})]});return bk.push(o),o.id}Kl.RTL,Kl.LTR;class Ek{constructor(e,t,i){this.state=e,this.pos=t,this.explicit=i,this.abortListeners=[]}tokenBefore(e){let t=Nu(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),i=Math.max(t.from,this.pos-250),r=t.text.slice(i-t.from,this.pos-t.from),s=r.search(Ak(e,!1));return s<0?null:{from:i+s,to:this.pos,text:r.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,t){e=="abort"&&this.abortListeners&&this.abortListeners.push(t)}}function Ck(n){let e=Object.keys(n).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function l6(n){let e=Object.create(null),t=Object.create(null);for(let{label:r}of n){e[r[0]]=!0;for(let s=1;s<r.length;s++)t[r[s]]=!0}let i=Ck(e)+Ck(t)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function AD(n){let e=n.map(r=>typeof r=="string"?{label:r}:r),[t,i]=e.every(r=>/^\w+$/.test(r.label))?[/\w*$/,/\w+$/]:l6(e);return r=>{let s=r.matchBefore(i);return s||r.explicit?{from:s?s.from:r.pos,options:e,validFor:t}:null}}class Sk{constructor(e,t,i,r){this.completion=e,this.source=t,this.match=i,this.score=r}}function _d(n){return n.selection.main.from}function Ak(n,e){var t;let{source:i}=n,r=e&&i[0]!="^",s=i[i.length-1]!="$";return!r&&!s?n:new RegExp(`${r?"^":""}(?:${i})${s?"$":""}`,(t=n.flags)!==null&&t!==void 0?t:n.ignoreCase?"i":"")}const TD=yp.define();function u6(n,e,t,i){let{main:r}=n.selection,s=t-r.from,o=i-r.from;return Object.assign(Object.assign({},n.changeByRange(l=>l!=r&&t!=i&&n.sliceDoc(l.from+s,l.from+o)!=n.sliceDoc(t,i)?{range:l}:{changes:{from:l.from+s,to:i==r.from?l.to:l.from+o,insert:e},range:ki.cursor(l.from+s+e.length)})),{scrollIntoView:!0,userEvent:"input.complete"})}const Tk=new WeakMap;function c6(n){if(!Array.isArray(n))return n;let e=Tk.get(n);return e||Tk.set(n,e=AD(n)),e}const Ev=pa.define(),wg=pa.define();class h6{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let i=_c(e,t),r=vh(i);this.chars.push(i);let s=e.slice(t,t+r),o=s.toUpperCase();this.folded.push(_c(o==s?s.toLowerCase():o,0)),t+=r}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:t,folded:i,any:r,precise:s,byWord:o}=this;if(t.length==1){let et=_c(e,0),Me=vh(et),ke=Me==e.length?0:-100;if(et!=t[0])if(et==i[0])ke+=-200;else return null;return this.ret(ke,[0,Me])}let l=e.indexOf(this.pattern);if(l==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let h=t.length,p=0;if(l<0){for(let et=0,Me=Math.min(e.length,200);et<Me&&p<h;){let ke=_c(e,et);(ke==t[p]||ke==i[p])&&(r[p++]=et),et+=vh(ke)}if(p<h)return null}let y=0,w=0,F=!1,j=0,Q=-1,he=-1,ye=/[a-z]/.test(e),Le=!0;for(let et=0,Me=Math.min(e.length,200),ke=0;et<Me&&w<h;){let Qe=_c(e,et);l<0&&(y<h&&Qe==t[y]&&(s[y++]=et),j<h&&(Qe==t[j]||Qe==i[j]?(j==0&&(Q=et),he=et+1,j++):j=0));let ft,bt=Qe<255?Qe>=48&&Qe<=57||Qe>=97&&Qe<=122?2:Qe>=65&&Qe<=90?1:0:(ft=YA(Qe))!=ft.toLowerCase()?1:ft!=ft.toUpperCase()?2:0;(!et||bt==1&&ye||ke==0&&bt!=0)&&(t[w]==Qe||i[w]==Qe&&(F=!0)?o[w++]=et:o.length&&(Le=!1)),ke=bt,et+=vh(Qe)}return w==h&&o[0]==0&&Le?this.result(-100+(F?-200:0),o,e):j==h&&Q==0?this.ret(-200-e.length+(he==e.length?0:-100),[0,he]):l>-1?this.ret(-700-e.length,[l,l+this.pattern.length]):j==h?this.ret(-200+-700-e.length,[Q,he]):w==h?this.result(-100+(F?-200:0)+-700+(Le?0:-1100),o,e):t.length==2?null:this.result((r[0]?-700:0)+-200+-1100,r,e)}result(e,t,i){let r=[],s=0;for(let o of t){let l=o+(this.astral?vh(_c(i,o)):1);s&&r[s-1]==o?r[s-1]=l:(r[s++]=o,r[s++]=l)}return this.ret(e-i.length,r)}}class d6{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let t=e.slice(0,this.pattern.length),i=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return i==null?null:(this.matched=[0,t.length],this.score=i+(e.length==this.pattern.length?0:-100),this)}}const Yu=$s.define({combine(n){return xb(n,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:p6,filterStrict:!1,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>i=>Ok(e(i),t(i)),optionClass:(e,t)=>i=>Ok(e(i),t(i)),addToOptions:(e,t)=>e.concat(t),filterStrict:(e,t)=>e||t})}});function Ok(n,e){return n?e?n+" "+e:n:e}function p6(n,e,t,i,r,s){let o=n.textDirection==Kl.RTL,l=o,h=!1,p="top",y,w,F=e.left-r.left,j=r.right-e.right,Q=i.right-i.left,he=i.bottom-i.top;if(l&&F<Math.min(Q,j)?l=!1:!l&&j<Math.min(Q,F)&&(l=!0),Q<=(l?F:j))y=Math.max(r.top,Math.min(t.top,r.bottom-he))-e.top,w=Math.min(400,l?F:j);else{h=!0,w=Math.min(400,(o?e.right:r.right-e.left)-30);let et=r.bottom-e.bottom;et>=he||et>e.top?y=t.bottom-e.top:(p="bottom",y=e.bottom-t.top)}let ye=(e.bottom-e.top)/s.offsetHeight,Le=(e.right-e.left)/s.offsetWidth;return{style:`${p}: ${y/ye}px; max-width: ${w/Le}px`,class:"cm-completionInfo-"+(h?o?"left-narrow":"right-narrow":l?"left":"right")}}function f6(n){let e=n.addToOptions.slice();return n.icons&&e.push({render(t){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),t.type&&i.classList.add(...t.type.split(/\s+/g).map(r=>"cm-completionIcon-"+r)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(t,i,r,s){let o=document.createElement("span");o.className="cm-completionLabel";let l=t.displayLabel||t.label,h=0;for(let p=0;p<s.length;){let y=s[p++],w=s[p++];y>h&&o.appendChild(document.createTextNode(l.slice(h,y)));let F=o.appendChild(document.createElement("span"));F.appendChild(document.createTextNode(l.slice(y,w))),F.className="cm-completionMatchedText",h=w}return h<l.length&&o.appendChild(document.createTextNode(l.slice(h))),o},position:50},{render(t){if(!t.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=t.detail,i},position:80}),e.sort((t,i)=>t.position-i.position).map(t=>t.render)}function OD(n,e,t){if(n<=t)return{from:0,to:n};if(e<0&&(e=0),e<=n>>1){let r=Math.floor(e/t);return{from:r*t,to:(r+1)*t}}let i=Math.floor((n-e)/t);return{from:n-(i+1)*t,to:n-i*t}}class m6{constructor(e,t,i){this.view=e,this.stateField=t,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:h=>this.placeInfo(h),key:this},this.space=null,this.currentClass="";let r=e.state.field(t),{options:s,selected:o}=r.open,l=e.state.facet(Yu);this.optionContent=f6(l),this.optionClass=l.optionClass,this.tooltipClass=l.tooltipClass,this.range=OD(s.length,o,l.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",h=>{let{options:p}=e.state.field(t).open;for(let y=h.target,w;y&&y!=this.dom;y=y.parentNode)if(y.nodeName=="LI"&&(w=/-(\d+)$/.exec(y.id))&&+w[1]<p.length){this.applyCompletion(e,p[+w[1]]),h.preventDefault();return}}),this.dom.addEventListener("focusout",h=>{let p=e.state.field(this.stateField,!1);p&&p.tooltip&&e.state.facet(Yu).closeOnBlur&&h.relatedTarget!=e.contentDOM&&e.dispatch({effects:wg.of(null)})}),this.showOptions(s,r.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var t;let i=e.state.field(this.stateField),r=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),i!=r){let{options:s,selected:o,disabled:l}=i.open;(!r.open||r.open.options!=s)&&(this.range=OD(s.length,o,e.state.facet(Yu).maxRenderedOptions),this.showOptions(s,i.id)),this.updateSel(),l!=((t=r.open)===null||t===void 0?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!l)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of t.split(" "))i&&this.dom.classList.add(i);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=OD(t.options.length,t.selected,this.view.state.facet(Yu).maxRenderedOptions),this.showOptions(t.options,e.id)),this.updateSelectedOption(t.selected)){this.destroyInfo();let{completion:i}=t.options[t.selected],{info:r}=i;if(!r)return;let s=typeof r=="string"?document.createTextNode(r):r(i);if(!s)return;"then"in s?s.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,i)}).catch(o=>pc(this.view.state,o,"completion info")):this.addInfoPane(s,i)}}addInfoPane(e,t){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:r,destroy:s}=e;i.appendChild(r),this.infoDestroy=s||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let i=this.list.firstChild,r=this.range.from;i;i=i.nextSibling,r++)i.nodeName!="LI"||!i.id?r--:r==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),t=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return t&&y6(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),r=e.getBoundingClientRect(),s=this.space;if(!s){let o=this.dom.ownerDocument.defaultView||window;s={left:0,top:0,right:o.innerWidth,bottom:o.innerHeight}}return r.top>Math.min(s.bottom,t.bottom)-10||r.bottom<Math.max(s.top,t.top)+10?null:this.view.state.facet(Yu).positionInfo(this.view,t,r,i,s,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,i){const r=document.createElement("ul");r.id=t,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions"));let s=null;for(let o=i.from;o<i.to;o++){let{completion:l,match:h}=e[o],{section:p}=l;if(p){let F=typeof p=="string"?p:p.name;if(F!=s&&(o>i.from||i.from==0))if(s=F,typeof p!="string"&&p.header)r.appendChild(p.header(p));else{let j=r.appendChild(document.createElement("completion-section"));j.textContent=F}}const y=r.appendChild(document.createElement("li"));y.id=t+"-"+o,y.setAttribute("role","option");let w=this.optionClass(l);w&&(y.className=w);for(let F of this.optionContent){let j=F(l,this.view.state,this.view,h);j&&y.appendChild(j)}}return i.from&&r.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function g6(n,e){return t=>new m6(t,n,e)}function y6(n,e){let t=n.getBoundingClientRect(),i=e.getBoundingClientRect(),r=t.height/n.offsetHeight;i.top<t.top?n.scrollTop-=(t.top-i.top)/r:i.bottom>t.bottom&&(n.scrollTop+=(i.bottom-t.bottom)/r)}function kk(n){return(n.boost||0)*100+(n.apply?10:0)+(n.info?5:0)+(n.type?1:0)}function v6(n,e){let t=[],i=null,r=p=>{t.push(p);let{section:y}=p.completion;if(y){i||(i=[]);let w=typeof y=="string"?y:y.name;i.some(F=>F.name==w)||i.push(typeof y=="string"?{name:w}:y)}},s=e.facet(Yu);for(let p of n)if(p.hasResult()){let y=p.result.getMatch;if(p.result.filter===!1)for(let w of p.result.options)r(new Sk(w,p.source,y?y(w):[],1e9-t.length));else{let w=e.sliceDoc(p.from,p.to),F,j=s.filterStrict?new d6(w):new h6(w);for(let Q of p.result.options)if(F=j.match(Q.label)){let he=Q.displayLabel?y?y(Q,F.matched):[]:F.matched;r(new Sk(Q,p.source,he,F.score+(Q.boost||0)))}}}if(i){let p=Object.create(null),y=0,w=(F,j)=>{var Q,he;return((Q=F.rank)!==null&&Q!==void 0?Q:1e9)-((he=j.rank)!==null&&he!==void 0?he:1e9)||(F.name<j.name?-1:1)};for(let F of i.sort(w))y-=1e5,p[F.name]=y;for(let F of t){let{section:j}=F.completion;j&&(F.score+=p[typeof j=="string"?j:j.name])}}let o=[],l=null,h=s.compareCompletions;for(let p of t.sort((y,w)=>w.score-y.score||h(y.completion,w.completion))){let y=p.completion;!l||l.label!=y.label||l.detail!=y.detail||l.type!=null&&y.type!=null&&l.type!=y.type||l.apply!=y.apply||l.boost!=y.boost?o.push(p):kk(p.completion)>kk(l)&&(o[o.length-1]=p),l=p.completion}return o}class Pf{constructor(e,t,i,r,s,o){this.options=e,this.attrs=t,this.tooltip=i,this.timestamp=r,this.selected=s,this.disabled=o}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new Pf(this.options,_k(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,i,r,s){let o=v6(e,t);if(!o.length)return r&&e.some(h=>h.state==1)?new Pf(r.options,r.attrs,r.tooltip,r.timestamp,r.selected,!0):null;let l=t.facet(Yu).selectOnOpen?0:-1;if(r&&r.selected!=l&&r.selected!=-1){let h=r.options[r.selected].completion;for(let p=0;p<o.length;p++)if(o[p].completion==h){l=p;break}}return new Pf(o,_k(i,l),{pos:e.reduce((h,p)=>p.hasResult()?Math.min(h,p.from):h,1e8),create:E6,above:s.aboveCursor},r?r.timestamp:Date.now(),l,!1)}map(e){return new Pf(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class Cv{constructor(e,t,i){this.active=e,this.id=t,this.open=i}static start(){return new Cv(D6,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,i=t.facet(Yu),s=(i.override||t.languageDataAt("autocomplete",_d(t)).map(c6)).map(l=>(this.active.find(p=>p.source==l)||new mc(l,this.active.some(p=>p.state!=0)?1:0)).update(e,i));s.length==this.active.length&&s.every((l,h)=>l==this.active[h])&&(s=this.active);let o=this.open;o&&e.docChanged&&(o=o.map(e.changes)),e.selection||s.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!x6(s,this.active)?o=Pf.build(s,t,this.id,o,i):o&&o.disabled&&!s.some(l=>l.state==1)&&(o=null),!o&&s.every(l=>l.state!=1)&&s.some(l=>l.hasResult())&&(s=s.map(l=>l.hasResult()?new mc(l.source,0):l));for(let l of e.effects)l.is(Fk)&&(o=o&&o.setSelected(l.value,this.id));return s==this.active&&o==this.open?this:new Cv(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:b6}}function x6(n,e){if(n==e)return!0;for(let t=0,i=0;;){for(;t<n.length&&!n[t].hasResult;)t++;for(;i<e.length&&!e[i].hasResult;)i++;let r=t==n.length,s=i==e.length;if(r||s)return r==s;if(n[t++].result!=e[i++].result)return!1}}const b6={"aria-autocomplete":"list"};function _k(n,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":n};return e>-1&&(t["aria-activedescendant"]=n+"-"+e),t}const D6=[];function kD(n,e){if(n.isUserEvent("input.complete")){let t=n.annotation(TD);if(t&&e.activateOnCompletion(t))return"input"}return n.isUserEvent("input.type")?"input":n.isUserEvent("delete.backward")?"delete":null}class mc{constructor(e,t,i=-1){this.source=e,this.state=t,this.explicitPos=i}hasResult(){return!1}update(e,t){let i=kD(e,t),r=this;i?r=r.handleUserEvent(e,i,t):e.docChanged?r=r.handleChange(e):e.selection&&r.state!=0&&(r=new mc(r.source,0));for(let s of e.effects)if(s.is(Ev))r=new mc(r.source,1,s.value?_d(e.state):-1);else if(s.is(wg))r=new mc(r.source,0);else if(s.is(Pk))for(let o of s.value)o.source==r.source&&(r=o);return r}handleUserEvent(e,t,i){return t=="delete"||!i.activateOnTyping?this.map(e.changes):new mc(this.source,1)}handleChange(e){return e.changes.touchesRange(_d(e.startState))?new mc(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new mc(this.source,this.state,e.mapPos(this.explicitPos))}}class Ff extends mc{constructor(e,t,i,r,s){super(e,2,t),this.result=i,this.from=r,this.to=s}hasResult(){return!0}handleUserEvent(e,t,i){var r;let s=this.result;s.map&&!e.changes.empty&&(s=s.map(s,e.changes));let o=e.changes.mapPos(this.from),l=e.changes.mapPos(this.to,1),h=_d(e.state);if((this.explicitPos<0?h<=o:h<this.from)||h>l||!s||t=="delete"&&_d(e.startState)==this.from)return new mc(this.source,t=="input"&&i.activateOnTyping?1:0);let p=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos);return w6(s.validFor,e.state,o,l)?new Ff(this.source,p,s,o,l):s.update&&(s=s.update(s,o,l,new Ek(e.state,h,p>=0)))?new Ff(this.source,p,s,s.from,(r=s.to)!==null&&r!==void 0?r:_d(e.state)):new mc(this.source,1,p)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new mc(this.source,0):this.map(e.changes)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new Ff(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new mc(this.source,0)}}function w6(n,e,t,i){if(!n)return!1;let r=e.sliceDoc(t,i);return typeof n=="function"?n(r,t,i,e):Ak(n,!0).test(r)}const Pk=pa.define({map(n,e){return n.map(t=>t.map(e))}}),Fk=pa.define(),Ec=Pc.define({create(){return Cv.start()},update(n,e){return n.update(e)},provide:n=>[rD.from(n,e=>e.tooltip),As.contentAttributes.from(n,e=>e.attrs)]});function _D(n,e){const t=e.completion.apply||e.completion.label;let i=n.state.field(Ec).active.find(r=>r.source==e.source);return i instanceof Ff?(typeof t=="string"?n.dispatch(Object.assign(Object.assign({},u6(n.state,t,i.from,i.to)),{annotations:TD.of(e.completion)})):t(n,e.completion,i.from,i.to),!0):!1}const E6=g6(Ec,_D);function Sv(n,e="option"){return t=>{let i=t.state.field(Ec,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<t.state.facet(Yu).interactionDelay)return!1;let r=1,s;e=="page"&&(s=XO(t,i.open.tooltip))&&(r=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=i.open.options,l=i.open.selected>-1?i.open.selected+r*(n?1:-1):n?0:o-1;return l<0?l=e=="page"?0:o-1:l>=o&&(l=e=="page"?o-1:0),t.dispatch({effects:Fk.of(l)}),!0}}const C6=n=>{let e=n.state.field(Ec,!1);return n.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<n.state.facet(Yu).interactionDelay?!1:_D(n,e.open.options[e.open.selected])},S6=n=>n.state.field(Ec,!1)?(n.dispatch({effects:Ev.of(!0)}),!0):!1,A6=n=>{let e=n.state.field(Ec,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(n.dispatch({effects:wg.of(null)}),!0)};class T6{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const O6=50,k6=1e3,_6=Wc.fromClass(class{constructor(n){this.view=n,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of n.state.field(Ec).active)e.state==1&&this.startQuery(e)}update(n){let e=n.state.field(Ec),t=n.state.facet(Yu);if(!n.selectionSet&&!n.docChanged&&n.startState.field(Ec)==e)return;let i=n.transactions.some(s=>(s.selection||s.docChanged)&&!kD(s,t));for(let s=0;s<this.running.length;s++){let o=this.running[s];if(i||o.updates.length+n.transactions.length>O6&&Date.now()-o.time>k6){for(let l of o.context.abortListeners)try{l()}catch(h){pc(this.view.state,h)}o.context.abortListeners=null,this.running.splice(s--,1)}else o.updates.push(...n.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),n.transactions.some(s=>s.effects.some(o=>o.is(Ev)))&&(this.pendingStart=!0);let r=this.pendingStart?50:t.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(s=>s.state==1&&!this.running.some(o=>o.active.source==s.source))?setTimeout(()=>this.startUpdate(),r):-1,this.composing!=0)for(let s of n.transactions)kD(s,t)=="input"?this.composing=2:this.composing==2&&s.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:n}=this.view,e=n.field(Ec);for(let t of e.active)t.state==1&&!this.running.some(i=>i.active.source==t.source)&&this.startQuery(t)}startQuery(n){let{state:e}=this.view,t=_d(e),i=new Ek(e,t,n.explicitPos==t),r=new T6(n,i);this.running.push(r),Promise.resolve(n.source(i)).then(s=>{r.context.aborted||(r.done=s||null,this.scheduleAccept())},s=>{this.view.dispatch({effects:wg.of(null)}),pc(this.view.state,s)})}scheduleAccept(){this.running.every(n=>n.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Yu).updateSyncTime))}accept(){var n;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(Yu);for(let i=0;i<this.running.length;i++){let r=this.running[i];if(r.done===void 0)continue;if(this.running.splice(i--,1),r.done){let o=new Ff(r.active.source,r.active.explicitPos,r.done,r.done.from,(n=r.done.to)!==null&&n!==void 0?n:_d(r.updates.length?r.updates[0].startState:this.view.state));for(let l of r.updates)o=o.update(l,t);if(o.hasResult()){e.push(o);continue}}let s=this.view.state.field(Ec).active.find(o=>o.source==r.active.source);if(s&&s.state==1)if(r.done==null){let o=new mc(r.active.source,0);for(let l of r.updates)o=o.update(l,t);o.state!=1&&e.push(o)}else this.startQuery(s)}e.length&&this.view.dispatch({effects:Pk.of(e)})}},{eventHandlers:{blur(n){let e=this.view.state.field(Ec,!1);if(e&&e.tooltip&&this.view.state.facet(Yu).closeOnBlur){let t=e.open&&XO(this.view,e.open.tooltip);(!t||!t.dom.contains(n.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:wg.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:Ev.of(!1)}),20),this.composing=0}}}),P6=typeof navigator=="object"&&/Win/.test(navigator.platform),F6=bf.highest(As.domEventHandlers({keydown(n,e){let t=e.state.field(Ec,!1);if(!t||!t.open||t.open.disabled||t.open.selected<0||n.key.length>1||n.ctrlKey&&!(P6&&n.altKey)||n.metaKey)return!1;let i=t.open.options[t.open.selected],r=t.active.find(o=>o.source==i.source),s=i.completion.commitCharacters||r.result.commitCharacters;return s&&s.indexOf(n.key)>-1&&_D(e,i),!1}})),Mk=As.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xB7\xB7\xB7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\u0192'"}},".cm-completionIcon-class":{"&:after":{content:"'\u25CB'"}},".cm-completionIcon-interface":{"&:after":{content:"'\u25CC'"}},".cm-completionIcon-variable":{"&:after":{content:"'\u{1D465}'"}},".cm-completionIcon-constant":{"&:after":{content:"'\u{1D436}'"}},".cm-completionIcon-type":{"&:after":{content:"'\u{1D461}'"}},".cm-completionIcon-enum":{"&:after":{content:"'\u222A'"}},".cm-completionIcon-property":{"&:after":{content:"'\u25A1'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\u{1F511}\uFE0E'"}},".cm-completionIcon-namespace":{"&:after":{content:"'\u25A2'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class M6{constructor(e,t,i,r){this.field=e,this.line=t,this.from=i,this.to=r}}class PD{constructor(e,t,i){this.field=e,this.from=t,this.to=i}map(e){let t=e.mapPos(this.from,-1,zu.TrackDel),i=e.mapPos(this.to,1,zu.TrackDel);return t==null||i==null?null:new PD(this.field,t,i)}}class FD{constructor(e,t){this.lines=e,this.fieldPositions=t}instantiate(e,t){let i=[],r=[t],s=e.doc.lineAt(t),o=/^\s*/.exec(s.text)[0];for(let h of this.lines){if(i.length){let p=o,y=/^\t*/.exec(h)[0].length;for(let w=0;w<y;w++)p+=e.facet(xv);r.push(t+p.length-y),h=p+h.slice(y)}i.push(h),t+=h.length+1}let l=this.fieldPositions.map(h=>new PD(h.field,r[h.line]+h.from,r[h.line]+h.to));return{text:i,ranges:l}}static parse(e){let t=[],i=[],r=[],s;for(let o of e.split(/\r\n?|\n/)){for(;s=/[#$]\{(?:(\d+)(?::([^}]*))?|([^}]*))\}/.exec(o);){let l=s[1]?+s[1]:null,h=s[2]||s[3]||"",p=-1;for(let y=0;y<t.length;y++)(l!=null?t[y].seq==l:h&&t[y].name==h)&&(p=y);if(p<0){let y=0;for(;y<t.length&&(l==null||t[y].seq!=null&&t[y].seq<l);)y++;t.splice(y,0,{seq:l,name:h}),p=y;for(let w of r)w.field>=p&&w.field++}r.push(new M6(p,i.length,s.index,s.index+h.length)),o=o.slice(0,s.index)+h+o.slice(s.index+s[0].length)}for(let l;l=/\\([{}])/.exec(o);){o=o.slice(0,l.index)+l[1]+o.slice(l.index+l[0].length);for(let h of r)h.line==i.length&&h.from>l.index&&(h.from--,h.to--)}i.push(o)}return new FD(i,r)}}let I6=Ta.widget({widget:new class extends lg{toDOM(){let n=document.createElement("span");return n.className="cm-snippetFieldPosition",n}ignoreEvent(){return!1}}}),N6=Ta.mark({class:"cm-snippetField"});class Mf{constructor(e,t){this.ranges=e,this.active=t,this.deco=Ta.set(e.map(i=>(i.from==i.to?I6:N6).range(i.from,i.to)))}map(e){let t=[];for(let i of this.ranges){let r=i.map(e);if(!r)return null;t.push(r)}return new Mf(t,this.active)}selectionInsideField(e){return e.ranges.every(t=>this.ranges.some(i=>i.field==this.active&&i.from<=t.from&&i.to>=t.to))}}const Eg=pa.define({map(n,e){return n&&n.map(e)}}),B6=pa.define(),Cg=Pc.define({create(){return null},update(n,e){for(let t of e.effects){if(t.is(Eg))return t.value;if(t.is(B6)&&n)return new Mf(n.ranges,t.value)}return n&&e.docChanged&&(n=n.map(e.changes)),n&&e.selection&&!n.selectionInsideField(e.selection)&&(n=null),n},provide:n=>As.decorations.from(n,e=>e?e.deco:Ta.none)});function MD(n,e){return ki.create(n.filter(t=>t.field==e).map(t=>ki.range(t.from,t.to)))}function R6(n){let e=FD.parse(n);return(t,i,r,s)=>{let{text:o,ranges:l}=e.instantiate(t.state,r),h={changes:{from:r,to:s,insert:da.of(o)},scrollIntoView:!0,annotations:i?[TD.of(i),qu.userEvent.of("input.complete")]:void 0};if(l.length&&(h.selection=MD(l,0)),l.some(p=>p.field>0)){let p=new Mf(l,0),y=h.effects=[Eg.of(p)];t.state.field(Cg,!1)===void 0&&y.push(pa.appendConfig.of([Cg,$6,j6,Mk]))}t.dispatch(t.state.update(h))}}function Ik(n){return({state:e,dispatch:t})=>{let i=e.field(Cg,!1);if(!i||n<0&&i.active==0)return!1;let r=i.active+n,s=n>0&&!i.ranges.some(o=>o.field==r+n);return t(e.update({selection:MD(i.ranges,r),effects:Eg.of(s?null:new Mf(i.ranges,r)),scrollIntoView:!0})),!0}}const L6=[{key:"Tab",run:Ik(1),shift:Ik(-1)},{key:"Escape",run:({state:n,dispatch:e})=>n.field(Cg,!1)?(e(n.update({effects:Eg.of(null)})),!0):!1}],Nk=$s.define({combine(n){return n.length?n[0]:L6}}),$6=bf.highest(iv.compute([Nk],n=>n.facet(Nk)));function Cp(n,e){return Object.assign(Object.assign({},e),{apply:R6(n)})}const j6=As.domEventHandlers({mousedown(n,e){let t=e.state.field(Cg,!1),i;if(!t||(i=e.posAtCoords({x:n.clientX,y:n.clientY}))==null)return!1;let r=t.ranges.find(s=>s.from<=i&&s.to>=i);return!r||r.field==t.active?!1:(e.dispatch({selection:MD(t.ranges,r.field),effects:Eg.of(t.ranges.some(s=>s.field>r.field)?new Mf(t.ranges,r.field):null),scrollIntoView:!0}),!0)}}),Av={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Sp=pa.define({map(n,e){let t=e.mapPos(n,-1,zu.TrackAfter);return t==null?void 0:t}}),ID=new class extends vp{};ID.startSide=1,ID.endSide=-1;const Bk=Pc.define({create(){return nl.empty},update(n,e){if(n=n.map(e.changes),e.selection){let t=e.state.doc.lineAt(e.selection.main.head);n=n.update({filter:i=>i>=t.from&&i<=t.to})}for(let t of e.effects)t.is(Sp)&&(n=n.update({add:[ID.range(t.value,t.value+1)]}));return n}});function V6(){return[z6,Bk]}const ND="()[]{}<>";function W6(n){for(let e=0;e<ND.length;e+=2)if(ND.charCodeAt(e)==n)return ND.charAt(e+1);return YA(n<128?n:n+1)}function H6(n,e){return n.languageDataAt("closeBrackets",e)[0]||Av}const U6=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),z6=As.inputHandler.of((n,e,t,i)=>{if((U6?n.composing:n.compositionStarted)||n.state.readOnly)return!1;let r=n.state.selection.main;if(i.length>2||i.length==2&&vh(_c(i,0))==1||e!=r.from||t!=r.to)return!1;let s=q6(n.state,i);return s?(n.dispatch(s),!0):!1});function q6(n,e){let t=H6(n,n.selection.main.head),i=t.brackets||Av.brackets;for(let r of i){let s=W6(_c(r,0));if(e==r)return s==r?Y6(n,r,i.indexOf(r+r+r)>-1,t):Q6(n,r,s,t.before||Av.before);if(e==s&&Rk(n,n.selection.main.from))return X6(n,r,s)}return null}function Rk(n,e){let t=!1;return n.field(Bk).between(0,n.doc.length,i=>{i==e&&(t=!0)}),t}function BD(n,e){let t=n.sliceString(e,e+2);return t.slice(0,vh(_c(t,0)))}function Q6(n,e,t,i){let r=null,s=n.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:t,from:o.to}],effects:Sp.of(o.to+e.length),range:ki.range(o.anchor+e.length,o.head+e.length)};let l=BD(n.doc,o.head);return!l||/\s/.test(l)||i.indexOf(l)>-1?{changes:{insert:e+t,from:o.head},effects:Sp.of(o.head+e.length),range:ki.cursor(o.head+e.length)}:{range:r=o}});return r?null:n.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function X6(n,e,t){let i=null,r=n.changeByRange(s=>s.empty&&BD(n.doc,s.head)==t?{changes:{from:s.head,to:s.head+t.length,insert:t},range:ki.cursor(s.head+t.length)}:i={range:s});return i?null:n.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function Y6(n,e,t,i){let r=i.stringPrefixes||Av.stringPrefixes,s=null,o=n.changeByRange(l=>{if(!l.empty)return{changes:[{insert:e,from:l.from},{insert:e,from:l.to}],effects:Sp.of(l.to+e.length),range:ki.range(l.anchor+e.length,l.head+e.length)};let h=l.head,p=BD(n.doc,h),y;if(p==e){if(Lk(n,h))return{changes:{insert:e+e,from:h},effects:Sp.of(h+e.length),range:ki.cursor(h+e.length)};if(Rk(n,h)){let F=t&&n.sliceDoc(h,h+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:h,to:h+F.length,insert:F},range:ki.cursor(h+F.length)}}}else{if(t&&n.sliceDoc(h-2*e.length,h)==e+e&&(y=$k(n,h-2*e.length,r))>-1&&Lk(n,y))return{changes:{insert:e+e+e+e,from:h},effects:Sp.of(h+e.length),range:ki.cursor(h+e.length)};if(n.charCategorizer(h)(p)!=Vc.Word&&$k(n,h,r)>-1&&!G6(n,h,e,r))return{changes:{insert:e+e,from:h},effects:Sp.of(h+e.length),range:ki.cursor(h+e.length)}}return{range:s=l}});return s?null:n.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function Lk(n,e){let t=Nu(n).resolveInner(e+1);return t.parent&&t.from==e}function G6(n,e,t,i){let r=Nu(n).resolveInner(e,-1),s=i.reduce((o,l)=>Math.max(o,l.length),0);for(let o=0;o<5;o++){let l=n.sliceDoc(r.from,Math.min(r.to,r.from+t.length+s)),h=l.indexOf(t);if(!h||h>-1&&i.indexOf(l.slice(0,h))>-1){let y=r.firstChild;for(;y&&y.from==r.from&&y.to-y.from>t.length+h;){if(n.sliceDoc(y.to-t.length,y.to)==t)return!1;y=y.firstChild}return!0}let p=r.to==e&&r.parent;if(!p)break;r=p}return!1}function $k(n,e,t){let i=n.charCategorizer(e);if(i(n.sliceDoc(e-1,e))!=Vc.Word)return e;for(let r of t){let s=e-r.length;if(n.sliceDoc(s,e)==r&&i(n.sliceDoc(s-1,s))!=Vc.Word)return s}return-1}function K6(n={}){return[F6,Ec,Yu.of(n),_6,J6,Mk]}const Z6=[{key:"Ctrl-Space",run:S6},{key:"Escape",run:A6},{key:"ArrowDown",run:Sv(!0)},{key:"ArrowUp",run:Sv(!1)},{key:"PageDown",run:Sv(!0,"page")},{key:"PageUp",run:Sv(!1,"page")},{key:"Enter",run:C6}],J6=bf.highest(iv.computeN([Yu],n=>n.facet(Yu).defaultKeymap?[Z6]:[])),e4=n=>{let{state:e}=n,t=e.doc.lineAt(e.selection.main.from),i=LD(n.state,t.from);return i.line?t4(n):i.block?i4(n):!1};function RD(n,e){return({state:t,dispatch:i})=>{if(t.readOnly)return!1;let r=n(e,t);return r?(i(t.update(r)),!0):!1}}const t4=RD(o4,0),n4=RD(jk,0),i4=RD((n,e)=>jk(n,e,s4(e)),0);function LD(n,e){let t=n.languageDataAt("commentTokens",e);return t.length?t[0]:{}}const Sg=50;function r4(n,{open:e,close:t},i,r){let s=n.sliceDoc(i-Sg,i),o=n.sliceDoc(r,r+Sg),l=/\s*$/.exec(s)[0].length,h=/^\s*/.exec(o)[0].length,p=s.length-l;if(s.slice(p-e.length,p)==e&&o.slice(h,h+t.length)==t)return{open:{pos:i-l,margin:l&&1},close:{pos:r+h,margin:h&&1}};let y,w;r-i<=2*Sg?y=w=n.sliceDoc(i,r):(y=n.sliceDoc(i,i+Sg),w=n.sliceDoc(r-Sg,r));let F=/^\s*/.exec(y)[0].length,j=/\s*$/.exec(w)[0].length,Q=w.length-j-t.length;return y.slice(F,F+e.length)==e&&w.slice(Q,Q+t.length)==t?{open:{pos:i+F+e.length,margin:/\s/.test(y.charAt(F+e.length))?1:0},close:{pos:r-j-t.length,margin:/\s/.test(w.charAt(Q-1))?1:0}}:null}function s4(n){let e=[];for(let t of n.selection.ranges){let i=n.doc.lineAt(t.from),r=t.to<=i.to?i:n.doc.lineAt(t.to),s=e.length-1;s>=0&&e[s].to>i.from?e[s].to=r.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:r.to})}return e}function jk(n,e,t=e.selection.ranges){let i=t.map(s=>LD(e,s.from).block);if(!i.every(s=>s))return null;let r=t.map((s,o)=>r4(e,i[o],s.from,s.to));if(n!=2&&!r.every(s=>s))return{changes:e.changes(t.map((s,o)=>r[o]?[]:[{from:s.from,insert:i[o].open+" "},{from:s.to,insert:" "+i[o].close}]))};if(n!=1&&r.some(s=>s)){let s=[];for(let o=0,l;o<r.length;o++)if(l=r[o]){let h=i[o],{open:p,close:y}=l;s.push({from:p.pos-h.open.length,to:p.pos+p.margin},{from:y.pos-y.margin,to:y.pos+h.close.length})}return{changes:s}}return null}function o4(n,e,t=e.selection.ranges){let i=[],r=-1;for(let{from:s,to:o}of t){let l=i.length,h=1e9,p=LD(e,s).line;if(p){for(let y=s;y<=o;){let w=e.doc.lineAt(y);if(w.from>r&&(s==o||o>w.from)){r=w.from;let F=/^\s*/.exec(w.text)[0].length,j=F==w.length,Q=w.text.slice(F,F+p.length)==p?F:-1;F<w.text.length&&F<h&&(h=F),i.push({line:w,comment:Q,token:p,indent:F,empty:j,single:!1})}y=w.to+1}if(h<1e9)for(let y=l;y<i.length;y++)i[y].indent<i[y].line.text.length&&(i[y].indent=h);i.length==l+1&&(i[l].single=!0)}}if(n!=2&&i.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:l,token:h,indent:p,empty:y,single:w}of i)(w||!y)&&s.push({from:l.from+p,insert:h+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(n!=1&&i.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:l,token:h}of i)if(l>=0){let p=o.from+l,y=p+h.length;o.text[y-o.from]==" "&&y++,s.push({from:p,to:y})}return{changes:s}}return null}function If(n,e){return ki.create(n.ranges.map(e),n.mainIndex)}function Ah(n,e){return n.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function oh({state:n,dispatch:e},t){let i=If(n.selection,t);return i.eq(n.selection,!0)?!1:(e(Ah(n,i)),!0)}function Tv(n,e){return ki.cursor(e?n.to:n.from)}function Vk(n,e){return oh(n,t=>t.empty?n.moveByChar(t,e):Tv(t,e))}function oc(n){return n.textDirectionAt(n.state.selection.main.head)==Kl.LTR}const Wk=n=>Vk(n,!oc(n)),Hk=n=>Vk(n,oc(n));function Uk(n,e){return oh(n,t=>t.empty?n.moveByGroup(t,e):Tv(t,e))}const a4=n=>Uk(n,!oc(n)),l4=n=>Uk(n,oc(n));function u4(n,e,t){if(e.type.prop(t))return!0;let i=e.to-e.from;return i&&(i>2||/[^\s,.;:]/.test(n.sliceDoc(e.from,e.to)))||e.firstChild}function Ov(n,e,t){let i=Nu(n).resolveInner(e.head),r=t?Ho.closedBy:Ho.openedBy;for(let h=e.head;;){let p=t?i.childAfter(h):i.childBefore(h);if(!p)break;u4(n,p,r)?i=p:h=t?p.to:p.from}let s=i.type.prop(r),o,l;return s&&(o=t?Sh(n,i.from,1):Sh(n,i.to,-1))&&o.matched?l=t?o.end.to:o.end.from:l=t?i.to:i.from,ki.cursor(l,t?-1:1)}const c4=n=>oh(n,e=>Ov(n.state,e,!oc(n))),h4=n=>oh(n,e=>Ov(n.state,e,oc(n)));function zk(n,e){return oh(n,t=>{if(!t.empty)return Tv(t,e);let i=n.moveVertically(t,e);return i.head!=t.head?i:n.moveToLineBoundary(t,e)})}const qk=n=>zk(n,!1),Qk=n=>zk(n,!0);function Xk(n){let e=n.scrollDOM.clientHeight<n.scrollDOM.scrollHeight-2,t=0,i=0,r;if(e){for(let s of n.state.facet(As.scrollMargins)){let o=s(n);o!=null&&o.top&&(t=Math.max(o==null?void 0:o.top,t)),o!=null&&o.bottom&&(i=Math.max(o==null?void 0:o.bottom,i))}r=n.scrollDOM.clientHeight-t-i}else r=(n.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:i,selfScroll:e,height:Math.max(n.defaultLineHeight,r-5)}}function Yk(n,e){let t=Xk(n),{state:i}=n,r=If(i.selection,o=>o.empty?n.moveVertically(o,e,t.height):Tv(o,e));if(r.eq(i.selection))return!1;let s;if(t.selfScroll){let o=n.coordsAtPos(i.selection.main.head),l=n.scrollDOM.getBoundingClientRect(),h=l.top+t.marginTop,p=l.bottom-t.marginBottom;o&&o.top>h&&o.bottom<p&&(s=As.scrollIntoView(r.main.head,{y:"start",yMargin:o.top-h}))}return n.dispatch(Ah(i,r),{effects:s}),!0}const Gk=n=>Yk(n,!1),$D=n=>Yk(n,!0);function Pd(n,e,t){let i=n.lineBlockAt(e.head),r=n.moveToLineBoundary(e,t);if(r.head==e.head&&r.head!=(t?i.to:i.from)&&(r=n.moveToLineBoundary(e,t,!1)),!t&&r.head==i.from&&i.length){let s=/^\s*/.exec(n.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;s&&e.head!=i.from+s&&(r=ki.cursor(i.from+s))}return r}const d4=n=>oh(n,e=>Pd(n,e,!0)),p4=n=>oh(n,e=>Pd(n,e,!1)),f4=n=>oh(n,e=>Pd(n,e,!oc(n))),m4=n=>oh(n,e=>Pd(n,e,oc(n))),g4=n=>oh(n,e=>ki.cursor(n.lineBlockAt(e.head).from,1)),y4=n=>oh(n,e=>ki.cursor(n.lineBlockAt(e.head).to,-1));function v4(n,e,t){let i=!1,r=If(n.selection,s=>{let o=Sh(n,s.head,-1)||Sh(n,s.head,1)||s.head>0&&Sh(n,s.head-1,1)||s.head<n.doc.length&&Sh(n,s.head+1,-1);if(!o||!o.end)return s;i=!0;let l=o.start.from==s.head?o.end.to:o.end.from;return ki.cursor(l)});return i?(e(Ah(n,r)),!0):!1}const x4=({state:n,dispatch:e})=>v4(n,e);function qc(n,e){let t=If(n.state.selection,i=>{let r=e(i);return ki.range(i.anchor,r.head,r.goalColumn,r.bidiLevel||void 0)});return t.eq(n.state.selection)?!1:(n.dispatch(Ah(n.state,t)),!0)}function Kk(n,e){return qc(n,t=>n.moveByChar(t,e))}const Zk=n=>Kk(n,!oc(n)),Jk=n=>Kk(n,oc(n));function e2(n,e){return qc(n,t=>n.moveByGroup(t,e))}const b4=n=>e2(n,!oc(n)),D4=n=>e2(n,oc(n)),w4=n=>qc(n,e=>Ov(n.state,e,!oc(n))),E4=n=>qc(n,e=>Ov(n.state,e,oc(n)));function t2(n,e){return qc(n,t=>n.moveVertically(t,e))}const n2=n=>t2(n,!1),i2=n=>t2(n,!0);function r2(n,e){return qc(n,t=>n.moveVertically(t,e,Xk(n).height))}const s2=n=>r2(n,!1),o2=n=>r2(n,!0),C4=n=>qc(n,e=>Pd(n,e,!0)),S4=n=>qc(n,e=>Pd(n,e,!1)),A4=n=>qc(n,e=>Pd(n,e,!oc(n))),T4=n=>qc(n,e=>Pd(n,e,oc(n))),O4=n=>qc(n,e=>ki.cursor(n.lineBlockAt(e.head).from)),k4=n=>qc(n,e=>ki.cursor(n.lineBlockAt(e.head).to)),a2=({state:n,dispatch:e})=>(e(Ah(n,{anchor:0})),!0),l2=({state:n,dispatch:e})=>(e(Ah(n,{anchor:n.doc.length})),!0),u2=({state:n,dispatch:e})=>(e(Ah(n,{anchor:n.selection.main.anchor,head:0})),!0),c2=({state:n,dispatch:e})=>(e(Ah(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),_4=({state:n,dispatch:e})=>(e(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),P4=({state:n,dispatch:e})=>{let t=_v(n).map(({from:i,to:r})=>ki.range(i,Math.min(r+1,n.doc.length)));return e(n.update({selection:ki.create(t),userEvent:"select"})),!0},F4=({state:n,dispatch:e})=>{let t=If(n.selection,i=>{var r;let s=Nu(n).resolveStack(i.from,1);for(let o=s;o;o=o.next){let{node:l}=o;if((l.from<i.from&&l.to>=i.to||l.to>i.to&&l.from<=i.from)&&(!((r=l.parent)===null||r===void 0)&&r.parent))return ki.range(l.to,l.from)}return i});return e(Ah(n,t)),!0},M4=({state:n,dispatch:e})=>{let t=n.selection,i=null;return t.ranges.length>1?i=ki.create([t.main]):t.main.empty||(i=ki.create([ki.cursor(t.main.head)])),i?(e(Ah(n,i)),!0):!1};function Ag(n,e){if(n.state.readOnly)return!1;let t="delete.selection",{state:i}=n,r=i.changeByRange(s=>{let{from:o,to:l}=s;if(o==l){let h=e(s);h<o?(t="delete.backward",h=kv(n,h,!1)):h>o&&(t="delete.forward",h=kv(n,h,!0)),o=Math.min(o,h),l=Math.max(l,h)}else o=kv(n,o,!1),l=kv(n,l,!0);return o==l?{range:s}:{changes:{from:o,to:l},range:ki.cursor(o,o<s.head?-1:1)}});return r.changes.empty?!1:(n.dispatch(i.update(r,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?As.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function kv(n,e,t){if(n instanceof As)for(let i of n.state.facet(As.atomicRanges).map(r=>r(n)))i.between(e,e,(r,s)=>{r<e&&s>e&&(e=t?s:r)});return e}const h2=(n,e,t)=>Ag(n,i=>{let r=i.from,{state:s}=n,o=s.doc.lineAt(r),l,h;if(t&&!e&&r>o.from&&r<o.from+200&&!/[^ \t]/.test(l=o.text.slice(0,r-o.from))){if(l[l.length-1]=="	")return r-1;let p=L0(l,s.tabSize),y=p%bv(s)||bv(s);for(let w=0;w<y&&l[l.length-1-w]==" ";w++)r--;h=r}else h=dc(o.text,r-o.from,e,e)+o.from,h==r&&o.number!=(e?s.doc.lines:1)?h+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(h-o.from,r-o.from))&&(h=dc(o.text,h-o.from,!1,!1)+o.from);return h}),jD=n=>h2(n,!1,!0),d2=n=>h2(n,!0,!1),p2=(n,e)=>Ag(n,t=>{let i=t.head,{state:r}=n,s=r.doc.lineAt(i),o=r.charCategorizer(i);for(let l=null;;){if(i==(e?s.to:s.from)){i==t.head&&s.number!=(e?r.doc.lines:1)&&(i+=e?1:-1);break}let h=dc(s.text,i-s.from,e)+s.from,p=s.text.slice(Math.min(i,h)-s.from,Math.max(i,h)-s.from),y=o(p);if(l!=null&&y!=l)break;(p!=" "||i!=t.head)&&(l=y),i=h}return i}),f2=n=>p2(n,!1),I4=n=>p2(n,!0),N4=n=>Ag(n,e=>{let t=n.lineBlockAt(e.head).to;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),B4=n=>Ag(n,e=>{let t=n.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),R4=n=>Ag(n,e=>{let t=n.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),L4=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:da.of(["",""])},range:ki.cursor(i.from)}));return e(n.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},$4=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(i=>{if(!i.empty||i.from==0||i.from==n.doc.length)return{range:i};let r=i.from,s=n.doc.lineAt(r),o=r==s.from?r-1:dc(s.text,r-s.from,!1)+s.from,l=r==s.to?r+1:dc(s.text,r-s.from,!0)+s.from;return{changes:{from:o,to:l,insert:n.doc.slice(r,l).append(n.doc.slice(o,r))},range:ki.cursor(l)}});return t.changes.empty?!1:(e(n.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function _v(n){let e=[],t=-1;for(let i of n.selection.ranges){let r=n.doc.lineAt(i.from),s=n.doc.lineAt(i.to);if(!i.empty&&i.to==s.from&&(s=n.doc.lineAt(i.to-1)),t>=r.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(i)}else e.push({from:r.from,to:s.to,ranges:[i]});t=s.number+1}return e}function m2(n,e,t){if(n.readOnly)return!1;let i=[],r=[];for(let s of _v(n)){if(t?s.to==n.doc.length:s.from==0)continue;let o=n.doc.lineAt(t?s.to+1:s.from-1),l=o.length+1;if(t){i.push({from:s.to,to:o.to},{from:s.from,insert:o.text+n.lineBreak});for(let h of s.ranges)r.push(ki.range(Math.min(n.doc.length,h.anchor+l),Math.min(n.doc.length,h.head+l)))}else{i.push({from:o.from,to:s.from},{from:s.to,insert:n.lineBreak+o.text});for(let h of s.ranges)r.push(ki.range(h.anchor-l,h.head-l))}}return i.length?(e(n.update({changes:i,scrollIntoView:!0,selection:ki.create(r,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}const j4=({state:n,dispatch:e})=>m2(n,e,!1),V4=({state:n,dispatch:e})=>m2(n,e,!0);function g2(n,e,t){if(n.readOnly)return!1;let i=[];for(let r of _v(n))t?i.push({from:r.from,insert:n.doc.slice(r.from,r.to)+n.lineBreak}):i.push({from:r.to,insert:n.lineBreak+n.doc.slice(r.from,r.to)});return e(n.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const W4=({state:n,dispatch:e})=>g2(n,e,!1),H4=({state:n,dispatch:e})=>g2(n,e,!0),U4=n=>{if(n.state.readOnly)return!1;let{state:e}=n,t=e.changes(_v(e).map(({from:r,to:s})=>(r>0?r--:s<e.doc.length&&s++,{from:r,to:s}))),i=If(e.selection,r=>{let s;if(n.lineWrapping){let o=n.lineBlockAt(r.head),l=n.coordsAtPos(r.head,r.assoc||1);l&&(s=o.bottom+n.documentTop-l.bottom+n.defaultLineHeight/2)}return n.moveVertically(r,!0,s)}).map(t);return n.dispatch({changes:t,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function z4(n,e){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=Nu(n).resolveInner(e),i=t.childBefore(e),r=t.childAfter(e),s;return i&&r&&i.to<=e&&r.from>=e&&(s=i.type.prop(Ho.closedBy))&&s.indexOf(r.name)>-1&&n.doc.lineAt(i.to).from==n.doc.lineAt(r.from).from&&!/\S/.test(n.sliceDoc(i.to,r.from))?{from:i.to,to:r.from}:null}const q4=y2(!1),Q4=y2(!0);function y2(n){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=e.changeByRange(r=>{let{from:s,to:o}=r,l=e.doc.lineAt(s),h=!n&&s==o&&z4(e,s);n&&(s=o=(o<=l.to?l:e.doc.lineAt(o)).to);let p=new Dv(e,{simulateBreak:s,simulateDoubleBreak:!!h}),y=yD(p,s);for(y==null&&(y=L0(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));o<l.to&&/\s/.test(l.text[o-l.from]);)o++;h?{from:s,to:o}=h:s>l.from&&s<l.from+100&&!/\S/.test(l.text.slice(0,s))&&(s=l.from);let w=["",Dg(e,y)];return h&&w.push(Dg(e,p.lineIndent(l.from,-1))),{changes:{from:s,to:o,insert:da.of(w)},range:ki.cursor(s+1+w[1].length)}});return t(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function VD(n,e){let t=-1;return n.changeByRange(i=>{let r=[];for(let o=i.from;o<=i.to;){let l=n.doc.lineAt(o);l.number>t&&(i.empty||i.to>l.from)&&(e(l,r,i),t=l.number),o=l.to+1}let s=n.changes(r);return{changes:r,range:ki.range(s.mapPos(i.anchor,1),s.mapPos(i.head,1))}})}const X4=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=Object.create(null),i=new Dv(n,{overrideIndentation:s=>{let o=t[s];return o==null?-1:o}}),r=VD(n,(s,o,l)=>{let h=yD(i,s.from);if(h==null)return;/\S/.test(s.text)||(h=0);let p=/^\s*/.exec(s.text)[0],y=Dg(n,h);(p!=y||l.from<s.from+p.length)&&(t[s.from]=h,o.push({from:s.from,to:s.from+p.length,insert:y}))});return r.changes.empty||e(n.update(r,{userEvent:"indent"})),!0},Y4=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(VD(n,(t,i)=>{i.push({from:t.from,insert:n.facet(xv)})}),{userEvent:"input.indent"})),!0),G4=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(VD(n,(t,i)=>{let r=/^\s*/.exec(t.text)[0];if(!r)return;let s=L0(r,n.tabSize),o=0,l=Dg(n,Math.max(0,s-bv(n)));for(;o<r.length&&o<l.length&&r.charCodeAt(o)==l.charCodeAt(o);)o++;i.push({from:t.from+o,to:t.from+r.length,insert:l.slice(o)})}),{userEvent:"delete.dedent"})),!0),K4=[{key:"Ctrl-b",run:Wk,shift:Zk,preventDefault:!0},{key:"Ctrl-f",run:Hk,shift:Jk},{key:"Ctrl-p",run:qk,shift:n2},{key:"Ctrl-n",run:Qk,shift:i2},{key:"Ctrl-a",run:g4,shift:O4},{key:"Ctrl-e",run:y4,shift:k4},{key:"Ctrl-d",run:d2},{key:"Ctrl-h",run:jD},{key:"Ctrl-k",run:N4},{key:"Ctrl-Alt-h",run:f2},{key:"Ctrl-o",run:L4},{key:"Ctrl-t",run:$4},{key:"Ctrl-v",run:$D}],Z4=[{key:"ArrowLeft",run:Wk,shift:Zk,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:a4,shift:b4,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:f4,shift:A4,preventDefault:!0},{key:"ArrowRight",run:Hk,shift:Jk,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:l4,shift:D4,preventDefault:!0},{mac:"Cmd-ArrowRight",run:m4,shift:T4,preventDefault:!0},{key:"ArrowUp",run:qk,shift:n2,preventDefault:!0},{mac:"Cmd-ArrowUp",run:a2,shift:u2},{mac:"Ctrl-ArrowUp",run:Gk,shift:s2},{key:"ArrowDown",run:Qk,shift:i2,preventDefault:!0},{mac:"Cmd-ArrowDown",run:l2,shift:c2},{mac:"Ctrl-ArrowDown",run:$D,shift:o2},{key:"PageUp",run:Gk,shift:s2},{key:"PageDown",run:$D,shift:o2},{key:"Home",run:p4,shift:S4,preventDefault:!0},{key:"Mod-Home",run:a2,shift:u2},{key:"End",run:d4,shift:C4,preventDefault:!0},{key:"Mod-End",run:l2,shift:c2},{key:"Enter",run:q4},{key:"Mod-a",run:_4},{key:"Backspace",run:jD,shift:jD},{key:"Delete",run:d2},{key:"Mod-Backspace",mac:"Alt-Backspace",run:f2},{key:"Mod-Delete",mac:"Alt-Delete",run:I4},{mac:"Mod-Backspace",run:B4},{mac:"Mod-Delete",run:R4}].concat(K4.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),J4=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:c4,shift:w4},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:h4,shift:E4},{key:"Alt-ArrowUp",run:j4},{key:"Shift-Alt-ArrowUp",run:W4},{key:"Alt-ArrowDown",run:V4},{key:"Shift-Alt-ArrowDown",run:H4},{key:"Escape",run:M4},{key:"Mod-Enter",run:Q4},{key:"Alt-l",mac:"Ctrl-l",run:P4},{key:"Mod-i",run:F4,preventDefault:!0},{key:"Mod-[",run:G4},{key:"Mod-]",run:Y4},{key:"Mod-Alt-\\",run:X4},{key:"Shift-Mod-k",run:U4},{key:"Shift-Mod-\\",run:x4},{key:"Mod-/",run:e4},{key:"Alt-A",run:n4}].concat(Z4);function Th(){var n=arguments[0];typeof n=="string"&&(n=document.createElement(n));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var r=t[i];typeof r=="string"?n.setAttribute(i,r):r!=null&&(n[i]=r)}e++}for(;e<arguments.length;e++)v2(n,arguments[e]);return n}function v2(n,e){if(typeof e=="string")n.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)n.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)v2(n,e[t]);else throw new RangeError("Unsupported child node: "+e)}class e5{constructor(e,t,i){this.from=e,this.to=t,this.diagnostic=i}}class Ap{constructor(e,t,i){this.diagnostics=e,this.panel=t,this.selected=i}static init(e,t,i){let r=e,s=i.facet(Tp).markerFilter;s&&(r=s(r,i));let o=Ta.set(r.map(l=>l.from==l.to||l.from==l.to-1&&i.doc.lineAt(l.from).to==l.from?Ta.widget({widget:new u5(l),diagnostic:l}).range(l.from):Ta.mark({attributes:{class:"cm-lintRange cm-lintRange-"+l.severity+(l.markClass?" "+l.markClass:"")},diagnostic:l,inclusive:!0}).range(l.from,l.to)),!0);return new Ap(o,t,Nf(o))}}function Nf(n,e=null,t=0){let i=null;return n.between(t,1e9,(r,s,{spec:o})=>{if(!(e&&o.diagnostic!=e))return i=new e5(r,s,o.diagnostic),!1}),i}function t5(n,e){let t=n.startState.doc.lineAt(e.pos);return!!(n.effects.some(i=>i.is(Pv))||n.changes.touchesRange(t.from,t.to))}function n5(n,e){return n.field(ah,!1)?e:e.concat(pa.appendConfig.of(S2))}function i5(n,e){return{effects:n5(n,[Pv.of(e)])}}const Pv=pa.define(),x2=pa.define(),b2=pa.define(),ah=Pc.define({create(){return new Ap(Ta.none,null,null)},update(n,e){if(e.docChanged){let t=n.diagnostics.map(e.changes),i=null;if(n.selected){let r=e.changes.mapPos(n.selected.from,1);i=Nf(t,n.selected.diagnostic,r)||Nf(t,null,r)}n=new Ap(t,n.panel,i)}for(let t of e.effects)t.is(Pv)?n=Ap.init(t.value,n.panel,e.state):t.is(x2)?n=new Ap(n.diagnostics,t.value?WD.open:null,n.selected):t.is(b2)&&(n=new Ap(n.diagnostics,n.panel,t.value));return n},provide:n=>[sD.from(n,e=>e.panel),As.decorations.from(n,e=>e.diagnostics)]}),r5=Ta.mark({class:"cm-lintRange cm-lintRange-active",inclusive:!0});function s5(n,e,t){let{diagnostics:i}=n.state.field(ah),r=[],s=2e8,o=0;i.between(e-(t<0?1:0),e+(t>0?1:0),(h,p,{spec:y})=>{e>=h&&e<=p&&(h==p||(e>h||t>0)&&(e<p||t<0))&&(r.push(y.diagnostic),s=Math.min(h,s),o=Math.max(p,o))});let l=n.state.facet(Tp).tooltipFilter;return l&&(r=l(r,n.state)),r.length?{pos:s,end:o,above:n.state.doc.lineAt(s).to<o,create(){return{dom:o5(n,r)}}}:null}function o5(n,e){return Th("ul",{class:"cm-tooltip-lint"},e.map(t=>E2(n,t,!1)))}const D2=n=>{let e=n.state.field(ah,!1);return!e||!e.panel?!1:(n.dispatch({effects:x2.of(!1)}),!0)},a5=Wc.fromClass(class{constructor(n){this.view=n,this.timeout=-1,this.set=!0;let{delay:e}=n.state.facet(Tp);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){let n=Date.now();if(n<this.lintTime-10)this.timeout=setTimeout(this.run,this.lintTime-n);else{this.set=!1;let{state:e}=this.view,{sources:t}=e.facet(Tp);t.length&&Promise.all(t.map(i=>Promise.resolve(i(this.view)))).then(i=>{let r=i.reduce((s,o)=>s.concat(o));this.view.state.doc==e.doc&&this.view.dispatch(i5(this.view.state,r))},i=>{pc(this.view.state,i)})}}update(n){let e=n.state.facet(Tp);(n.docChanged||e!=n.startState.facet(Tp)||e.needsRefresh&&e.needsRefresh(n))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),Tp=$s.define({combine(n){return Object.assign({sources:n.map(e=>e.source).filter(e=>e!=null)},xb(n.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null},{needsRefresh:(e,t)=>e?t?i=>e(i)||t(i):e:t}))}});function l5(n,e={}){return[Tp.of({source:n,config:e}),a5,S2]}function w2(n){let e=[];if(n)e:for(let{name:t}of n){for(let i=0;i<t.length;i++){let r=t[i];if(/[a-zA-Z]/.test(r)&&!e.some(s=>s.toLowerCase()==r.toLowerCase())){e.push(r);continue e}}e.push("")}return e}function E2(n,e,t){var i;let r=t?w2(e.actions):[];return Th("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},Th("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage():e.message),(i=e.actions)===null||i===void 0?void 0:i.map((s,o)=>{let l=!1,h=F=>{if(F.preventDefault(),l)return;l=!0;let j=Nf(n.state.field(ah).diagnostics,e);j&&s.apply(n,j.from,j.to)},{name:p}=s,y=r[o]?p.indexOf(r[o]):-1,w=y<0?p:[p.slice(0,y),Th("u",p.slice(y,y+1)),p.slice(y+1)];return Th("button",{type:"button",class:"cm-diagnosticAction",onclick:h,onmousedown:h,"aria-label":` Action: ${p}${y<0?"":` (access key "${r[o]})"`}.`},w)}),e.source&&Th("div",{class:"cm-diagnosticSource"},e.source))}class u5 extends lg{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return Th("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class C2{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=E2(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class WD{constructor(e){this.view=e,this.items=[];let t=r=>{if(r.keyCode==27)D2(this.view),this.view.focus();else if(r.keyCode==38||r.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(r.keyCode==40||r.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(r.keyCode==36)this.moveSelection(0);else if(r.keyCode==35)this.moveSelection(this.items.length-1);else if(r.keyCode==13)this.view.focus();else if(r.keyCode>=65&&r.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=w2(s.actions);for(let l=0;l<o.length;l++)if(o[l].toUpperCase().charCodeAt(0)==r.keyCode){let h=Nf(this.view.state.field(ah).diagnostics,s);h&&s.actions[l].apply(e,h.from,h.to)}}else return;r.preventDefault()},i=r=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(r.target)&&this.moveSelection(s)};this.list=Th("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:i}),this.dom=Th("div",{class:"cm-panel-lint"},this.list,Th("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>D2(this.view)},"\xD7")),this.update()}get selectedIndex(){let e=this.view.state.field(ah).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(ah),i=0,r=!1,s=null;for(e.between(0,this.view.state.doc.length,(o,l,{spec:h})=>{let p=-1,y;for(let w=i;w<this.items.length;w++)if(this.items[w].diagnostic==h.diagnostic){p=w;break}p<0?(y=new C2(this.view,h.diagnostic),this.items.splice(i,0,y),r=!0):(y=this.items[p],p>i&&(this.items.splice(i,p-i),r=!0)),t&&y.diagnostic==t.diagnostic?y.dom.hasAttribute("aria-selected")||(y.dom.setAttribute("aria-selected","true"),s=y):y.dom.hasAttribute("aria-selected")&&y.dom.removeAttribute("aria-selected"),i++});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();this.items.length==0&&(this.items.push(new C2(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:o,panel:l})=>{let h=l.height/this.list.offsetHeight;o.top<l.top?this.list.scrollTop-=(l.top-o.top)/h:o.bottom>l.bottom&&(this.list.scrollTop+=(o.bottom-l.bottom)/h)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let e=this.list.firstChild;function t(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)t();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(ah),i=Nf(t.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:b2.of(i)})}static open(e){return new WD(e)}}function c5(n,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(n)}</svg>')`}function Fv(n){return c5(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${n}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const h5=As.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Fv("#d11")},".cm-lintRange-warning":{backgroundImage:Fv("orange")},".cm-lintRange-info":{backgroundImage:Fv("#999")},".cm-lintRange-hint":{backgroundImage:Fv("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),S2=[ah,As.decorations.compute([ah],n=>{let{selected:e,panel:t}=n.field(ah);return!e||!t||e.from==e.to?Ta.none:Ta.set([r5.range(e.from,e.to)])}),p8(s5,{hideOn:t5}),h5];class Mv{constructor(e,t,i,r,s,o,l,h,p,y=0,w){this.p=e,this.stack=t,this.state=i,this.reducePos=r,this.pos=s,this.score=o,this.buffer=l,this.bufferBase=h,this.curContext=p,this.lookAhead=y,this.parent=w}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,i=0){let r=e.parser.context;return new Mv(e,[],t,i,i,0,[],0,r?new A2(r,r.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let i=e>>19,r=e&65535,{parser:s}=this.p,o=s.dynamicPrecedence(r);if(o&&(this.score+=o),i==0){this.pushState(s.getGoto(this.state,r,!0),this.reducePos),r<s.minRepeatTerm&&this.storeNode(r,this.reducePos,this.reducePos,4,!0),this.reduceContext(r,this.reducePos);return}let l=this.stack.length-(i-1)*3-(e&262144?6:0),h=l?this.stack[l-2]:this.p.ranges[0].from,p=this.reducePos-h;p>=2e3&&!(!((t=this.p.parser.nodeSet.types[r])===null||t===void 0)&&t.isAnonymous)&&(h==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=p):this.p.lastBigReductionSize<p&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=h,this.p.lastBigReductionSize=p));let y=l?this.stack[l-1]:0,w=this.bufferBase+this.buffer.length-y;if(r<s.minRepeatTerm||e&131072){let F=s.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(r,h,F,w+4,!0)}if(e&262144)this.state=this.stack[l];else{let F=this.stack[l-3];this.state=s.getGoto(F,r,!0)}for(;this.stack.length>l;)this.stack.pop();this.reduceContext(r,h)}storeNode(e,t,i,r=4,s=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let o=this,l=this.buffer.length;if(l==0&&o.parent&&(l=o.bufferBase-o.parent.bufferBase,o=o.parent),l>0&&o.buffer[l-4]==0&&o.buffer[l-1]>-1){if(t==i)return;if(o.buffer[l-2]>=t){o.buffer[l-2]=i;return}}}if(!s||this.pos==i)this.buffer.push(e,t,i,r);else{let o=this.buffer.length;if(o>0&&this.buffer[o-4]!=0)for(;o>0&&this.buffer[o-2]>i;)this.buffer[o]=this.buffer[o-4],this.buffer[o+1]=this.buffer[o-3],this.buffer[o+2]=this.buffer[o-2],this.buffer[o+3]=this.buffer[o-1],o-=4,r>4&&(r-=4);this.buffer[o]=e,this.buffer[o+1]=t,this.buffer[o+2]=i,this.buffer[o+3]=r}}shift(e,t,i,r){if(e&131072)this.pushState(e&65535,this.pos);else if(e&262144)this.pos=r,this.shiftContext(t,i),t<=this.p.parser.maxNode&&this.buffer.push(t,i,r,4);else{let s=e,{parser:o}=this.p;(r>this.pos||t<=o.maxNode)&&(this.pos=r,o.stateFlag(s,1)||(this.reducePos=r)),this.pushState(s,i),this.shiftContext(t,i),t<=o.maxNode&&this.buffer.push(t,i,r,4)}}apply(e,t,i,r){e&65536?this.reduce(e):this.shift(e,t,i,r)}useNode(e,t){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=e)&&(this.p.reused.push(e),i++);let r=this.pos;this.reducePos=this.pos=r+e.length,this.pushState(t,r),this.buffer.push(i,r,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let i=e.buffer.slice(t),r=e.bufferBase+t;for(;e&&r==e.bufferBase;)e=e.parent;return new Mv(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,r,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let i=e<=this.p.parser.maxNode;i&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,i?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new d5(this);;){let i=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(i==0)return!1;if(!(i&65536))return!0;t.reduce(i)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let r=[];for(let s=0,o;s<t.length;s+=2)(o=t[s+1])!=this.state&&this.p.parser.hasAction(o,e)&&r.push(t[s],o);if(this.stack.length<120)for(let s=0;r.length<8&&s<t.length;s+=2){let o=t[s+1];r.some((l,h)=>h&1&&l==o)||r.push(t[s],o)}t=r}let i=[];for(let r=0;r<t.length&&i.length<4;r+=2){let s=t[r+1];if(s==this.state)continue;let o=this.split();o.pushState(s,this.pos),o.storeNode(0,o.pos,o.pos,4,!0),o.shiftContext(t[r],this.pos),o.reducePos=this.pos,o.score-=200,i.push(o)}return i}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if(!(t&65536))return!1;if(!e.validAction(this.state,t)){let i=t>>19,r=t&65535,s=this.stack.length-i*3;if(s<0||e.getGoto(this.stack[s],r,!1)<0){let o=this.findForcedReduction();if(o==null)return!1;t=o}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],i=(r,s)=>{if(!t.includes(r))return t.push(r),e.allActions(r,o=>{if(!(o&393216))if(o&65536){let l=(o>>19)-s;if(l>1){let h=o&65535,p=this.stack.length-l*3;if(p>=0&&e.getGoto(this.stack[p],h,!1)>=0)return l<<19|65536|h}}else{let l=i(o,s+1);if(l!=null)return l}})};return i(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new A2(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class A2{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class d5{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,i=e>>19;i==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(i-1)*3;let r=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=r}}class Iv{constructor(e,t,i){this.stack=e,this.pos=t,this.index=i,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new Iv(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new Iv(this.stack,this.pos,this.index)}}function Nv(n,e=Uint16Array){if(typeof n!="string")return n;let t=null;for(let i=0,r=0;i<n.length;){let s=0;for(;;){let o=n.charCodeAt(i++),l=!1;if(o==126){s=65535;break}o>=92&&o--,o>=34&&o--;let h=o-32;if(h>=46&&(h-=46,l=!0),s+=h,l)break;s*=46}t?t[r++]=s:t=new e(s)}return t}class Bv{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const T2=new Bv;class p5{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=T2,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let i=this.range,r=this.rangeIndex,s=this.pos+e;for(;s<i.from;){if(!r)return null;let o=this.ranges[--r];s-=i.from-o.to,i=o}for(;t<0?s>i.to:s>=i.to;){if(r==this.ranges.length-1)return null;let o=this.ranges[++r];s+=o.from-i.to,i=o}return s}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t=this.chunkOff+e,i,r;if(t>=0&&t<this.chunk.length)i=this.pos+e,r=this.chunk.charCodeAt(t);else{let s=this.resolveOffset(e,1);if(s==null)return-1;if(i=s,i>=this.chunk2Pos&&i<this.chunk2Pos+this.chunk2.length)r=this.chunk2.charCodeAt(i-this.chunk2Pos);else{let o=this.rangeIndex,l=this.range;for(;l.to<=i;)l=this.ranges[++o];this.chunk2=this.input.chunk(this.chunk2Pos=i),i+this.chunk2.length>l.to&&(this.chunk2=this.chunk2.slice(0,l.to-i)),r=this.chunk2.charCodeAt(0)}}return i>=this.token.lookAhead&&(this.token.lookAhead=i+1),r}acceptToken(e,t=0){let i=t?this.resolveOffset(t,-1):this.pos;if(i==null||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=i}acceptTokenTo(e,t){this.token.value=e,this.token.end=t}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=T2,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let i="";for(let r of this.ranges){if(r.from>=t)break;r.to>e&&(i+=this.input.read(Math.max(r.from,e),Math.min(r.to,t)))}return i}}class Bf{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:i}=t.p;f5(this.data,e,t,this.id,i.data,i.tokenPrecTable)}}Bf.prototype.contextual=Bf.prototype.fallback=Bf.prototype.extend=!1,Bf.prototype.fallback=Bf.prototype.extend=!1;class HD{constructor(e,t={}){this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}}function f5(n,e,t,i,r,s){let o=0,l=1<<i,{dialect:h}=t.p.parser;e:for(;l&n[o];){let p=n[o+1];for(let j=o+3;j<p;j+=2)if((n[j+1]&l)>0){let Q=n[j];if(h.allows(Q)&&(e.token.value==-1||e.token.value==Q||m5(Q,e.token.value,r,s))){e.acceptToken(Q);break}}let y=e.next,w=0,F=n[o+2];if(e.next<0&&F>w&&n[p+F*3-3]==65535){o=n[p+F*3-1];continue e}for(;w<F;){let j=w+F>>1,Q=p+j+(j<<1),he=n[Q],ye=n[Q+1]||65536;if(y<he)F=j;else if(y>=ye)w=j+1;else{o=n[Q+2],e.advance();continue e}}break}}function O2(n,e,t){for(let i=e,r;(r=n[i])!=65535;i++)if(r==t)return i-e;return-1}function m5(n,e,t,i){let r=O2(t,i,e);return r<0||O2(t,i,n)<r}const Ic=typeof xe!="undefined"&&{NODE_ENV:"production",PUBLIC_PATH:"/"}&&/\bparse\b/.test({NODE_ENV:"production",PUBLIC_PATH:"/"}.LOG);let UD=null;function k2(n,e,t){let i=n.cursor(Iu.IncludeAnonymous);for(i.moveTo(e);;)if(!(t<0?i.childBefore(e):i.childAfter(e)))for(;;){if((t<0?i.to<e:i.from>e)&&!i.type.isError)return t<0?Math.max(0,Math.min(i.to-1,e-25)):Math.min(n.length,Math.max(i.from+1,e+25));if(t<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return t<0?0:n.length}}class g5{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?k2(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?k2(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let i=this.trees[t],r=this.index[t];if(r==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let s=i.children[r],o=this.start[t]+i.positions[r];if(o>e)return this.nextStart=o,null;if(s instanceof hu){if(o==e){if(o<this.safeFrom)return null;let l=o+s.length;if(l<=this.safeTo){let h=s.prop(Ho.lookAhead);if(!h||l+h<this.fragment.to)return s}}this.index[t]++,o+s.length>=Math.max(this.safeFrom,e)&&(this.trees.push(s),this.start.push(o),this.index.push(0))}else this.index[t]++,this.nextStart=o+s.length}}}class y5{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(i=>new Bv)}getActions(e){let t=0,i=null,{parser:r}=e.p,{tokenizers:s}=r,o=r.stateSlot(e.state,3),l=e.curContext?e.curContext.hash:0,h=0;for(let p=0;p<s.length;p++){if(!(1<<p&o))continue;let y=s[p],w=this.tokens[p];if(!(i&&!y.fallback)&&((y.contextual||w.start!=e.pos||w.mask!=o||w.context!=l)&&(this.updateCachedToken(w,y,e),w.mask=o,w.context=l),w.lookAhead>w.end+25&&(h=Math.max(w.lookAhead,h)),w.value!=0)){let F=t;if(w.extended>-1&&(t=this.addActions(e,w.extended,w.end,t)),t=this.addActions(e,w.value,w.end,t),!y.extend&&(i=w,t>F))break}}for(;this.actions.length>t;)this.actions.pop();return h&&e.setLookAhead(h),!i&&e.pos==this.stream.end&&(i=new Bv,i.value=e.p.parser.eofTerm,i.start=i.end=e.pos,t=this.addActions(e,i.value,i.end,t)),this.mainToken=i,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new Bv,{pos:i,p:r}=e;return t.start=i,t.end=Math.min(i+1,r.stream.end),t.value=i==r.stream.end?r.parser.eofTerm:0,t}updateCachedToken(e,t,i){let r=this.stream.clipPos(i.pos);if(t.token(this.stream.reset(r,e),i),e.value>-1){let{parser:s}=i.p;for(let o=0;o<s.specialized.length;o++)if(s.specialized[o]==e.value){let l=s.specializers[o](this.stream.read(e.start,e.end),i);if(l>=0&&i.p.parser.dialect.allows(l>>1)){l&1?e.extended=l>>1:e.value=l>>1;break}}}else e.value=0,e.end=this.stream.clipPos(r+1)}putAction(e,t,i,r){for(let s=0;s<r;s+=3)if(this.actions[s]==e)return r;return this.actions[r++]=e,this.actions[r++]=t,this.actions[r++]=i,r}addActions(e,t,i,r){let{state:s}=e,{parser:o}=e.p,{data:l}=o;for(let h=0;h<2;h++)for(let p=o.stateSlot(s,h?2:1);;p+=3){if(l[p]==65535)if(l[p+1]==1)p=Xh(l,p+2);else{r==0&&l[p+1]==2&&(r=this.putAction(Xh(l,p+2),t,i,r));break}l[p]==t&&(r=this.putAction(Xh(l,p+1),t,i,r))}return r}}class v5{constructor(e,t,i,r){this.parser=e,this.input=t,this.ranges=r,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new p5(t,r),this.tokens=new y5(e,this.stream),this.topTerm=e.top[1];let{from:s}=r[0];this.stacks=[Mv.start(this,e.top[0],s)],this.fragments=i.length&&this.stream.end-s>e.bufferLength*4?new g5(i,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,i=this.stacks=[],r,s;if(this.bigReductionCount>300&&e.length==1){let[o]=e;for(;o.forceReduce()&&o.stack.length&&o.stack[o.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let o=0;o<e.length;o++){let l=e[o];for(;;){if(this.tokens.mainToken=null,l.pos>t)i.push(l);else{if(this.advanceStack(l,i,e))continue;{r||(r=[],s=[]),r.push(l);let h=this.tokens.getMainToken(l);s.push(h.value,h.end)}}break}}if(!i.length){let o=r&&D5(r);if(o)return Ic&&console.log("Finish with "+this.stackID(o)),this.stackToTree(o);if(this.parser.strict)throw Ic&&r&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&r){let o=this.stoppedAt!=null&&r[0].pos>this.stoppedAt?r[0]:this.runRecovery(r,s,i);if(o)return Ic&&console.log("Force-finish "+this.stackID(o)),this.stackToTree(o.forceAll())}if(this.recovering){let o=this.recovering==1?1:this.recovering*3;if(i.length>o)for(i.sort((l,h)=>h.score-l.score);i.length>o;)i.pop();i.some(l=>l.reducePos>t)&&this.recovering--}else if(i.length>1){e:for(let o=0;o<i.length-1;o++){let l=i[o];for(let h=o+1;h<i.length;h++){let p=i[h];if(l.sameState(p)||l.buffer.length>500&&p.buffer.length>500)if((l.score-p.score||l.buffer.length-p.buffer.length)>0)i.splice(h--,1);else{i.splice(o--,1);continue e}}}i.length>12&&i.splice(12,i.length-12)}this.minStackPos=i[0].pos;for(let o=1;o<i.length;o++)i[o].pos<this.minStackPos&&(this.minStackPos=i[o].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,i){let r=e.pos,{parser:s}=this,o=Ic?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&r>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let p=e.curContext&&e.curContext.tracker.strict,y=p?e.curContext.hash:0;for(let w=this.fragments.nodeAt(r);w;){let F=this.parser.nodeSet.types[w.type.id]==w.type?s.getGoto(e.state,w.type.id):-1;if(F>-1&&w.length&&(!p||(w.prop(Ho.contextHash)||0)==y))return e.useNode(w,F),Ic&&console.log(o+this.stackID(e)+` (via reuse of ${s.getName(w.type.id)})`),!0;if(!(w instanceof hu)||w.children.length==0||w.positions[0]>0)break;let j=w.children[0];if(j instanceof hu&&w.positions[0]==0)w=j;else break}}let l=s.stateSlot(e.state,4);if(l>0)return e.reduce(l),Ic&&console.log(o+this.stackID(e)+` (via always-reduce ${s.getName(l&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let h=this.tokens.getActions(e);for(let p=0;p<h.length;){let y=h[p++],w=h[p++],F=h[p++],j=p==h.length||!i,Q=j?e:e.split(),he=this.tokens.mainToken;if(Q.apply(y,w,he?he.start:Q.pos,F),Ic&&console.log(o+this.stackID(Q)+` (via ${y&65536?`reduce of ${s.getName(y&65535)}`:"shift"} for ${s.getName(w)} @ ${r}${Q==e?"":", split"})`),j)return!0;Q.pos>r?t.push(Q):i.push(Q)}return!1}advanceFully(e,t){let i=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>i)return _2(e,t),!0}}runRecovery(e,t,i){let r=null,s=!1;for(let o=0;o<e.length;o++){let l=e[o],h=t[o<<1],p=t[(o<<1)+1],y=Ic?this.stackID(l)+" -> ":"";if(l.deadEnd&&(s||(s=!0,l.restart(),Ic&&console.log(y+this.stackID(l)+" (restarted)"),this.advanceFully(l,i))))continue;let w=l.split(),F=y;for(let j=0;w.forceReduce()&&j<10&&(Ic&&console.log(F+this.stackID(w)+" (via force-reduce)"),!this.advanceFully(w,i));j++)Ic&&(F=this.stackID(w)+" -> ");for(let j of l.recoverByInsert(h))Ic&&console.log(y+this.stackID(j)+" (via recover-insert)"),this.advanceFully(j,i);this.stream.end>l.pos?(p==l.pos&&(p++,h=0),l.recoverByDelete(h,p),Ic&&console.log(y+this.stackID(l)+` (via recover-delete ${this.parser.getName(h)})`),_2(l,i)):(!r||r.score<l.score)&&(r=l)}return r}stackToTree(e){return e.close(),hu.build({buffer:Iv.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(UD||(UD=new WeakMap)).get(e);return t||UD.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function _2(n,e){for(let t=0;t<e.length;t++){let i=e[t];if(i.pos==n.pos&&i.sameState(n)){e[t].score<n.score&&(e[t]=n);return}}e.push(n)}class x5{constructor(e,t,i){this.source=e,this.flags=t,this.disabled=i}allows(e){return!this.disabled||this.disabled[e]==0}}const zD=n=>n;class b5{constructor(e){this.start=e.start,this.shift=e.shift||zD,this.reduce=e.reduce||zD,this.reuse=e.reuse||zD,this.hash=e.hash||(()=>0),this.strict=e.strict!==!1}}class Rv extends rk{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let l=0;l<e.repeatNodeCount;l++)t.push("");let i=Object.keys(e.topRules).map(l=>e.topRules[l][1]),r=[];for(let l=0;l<t.length;l++)r.push([]);function s(l,h,p){r[l].push([h,h.deserialize(String(p))])}if(e.nodeProps)for(let l of e.nodeProps){let h=l[0];typeof h=="string"&&(h=Ho[h]);for(let p=1;p<l.length;){let y=l[p++];if(y>=0)s(y,h,l[p++]);else{let w=l[p+-y];for(let F=-y;F>0;F--)s(l[p++],h,w);p++}}}this.nodeSet=new aD(t.map((l,h)=>wc.define({name:h>=this.minRepeatTerm?void 0:l,id:h,props:r[h],top:i.indexOf(h)>-1,error:h==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(h)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=KO;let o=Nv(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let l=0;l<this.specializerSpecs.length;l++)this.specialized[l]=this.specializerSpecs[l].term;this.specializers=this.specializerSpecs.map(P2),this.states=Nv(e.states,Uint32Array),this.data=Nv(e.stateData),this.goto=Nv(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(l=>typeof l=="number"?new Bf(o,l):l),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,i){let r=new v5(this,e,t,i);for(let s of this.wrappers)r=s(r,e,t,i);return r}getGoto(e,t,i=!1){let r=this.goto;if(t>=r[0])return-1;for(let s=r[t+1];;){let o=r[s++],l=o&1,h=r[s++];if(l&&i)return h;for(let p=s+(o>>1);s<p;s++)if(r[s]==e)return h;if(l)return-1}}hasAction(e,t){let i=this.data;for(let r=0;r<2;r++)for(let s=this.stateSlot(e,r?2:1),o;;s+=3){if((o=i[s])==65535)if(i[s+1]==1)o=i[s=Xh(i,s+2)];else{if(i[s+1]==2)return Xh(i,s+2);break}if(o==t||o==0)return Xh(i,s+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,i=>i==t?!0:null)}allActions(e,t){let i=this.stateSlot(e,4),r=i?t(i):void 0;for(let s=this.stateSlot(e,1);r==null;s+=3){if(this.data[s]==65535)if(this.data[s+1]==1)s=Xh(this.data,s+2);else break;r=t(Xh(this.data,s+1))}return r}nextStates(e){let t=[];for(let i=this.stateSlot(e,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=Xh(this.data,i+2);else break;if(!(this.data[i+2]&1)){let r=this.data[i+1];t.some((s,o)=>o&1&&s==r)||t.push(this.data[i],r)}}return t}configure(e){let t=Object.assign(Object.create(Rv.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let i=this.topRules[e.top];if(!i)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=i}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(i=>{let r=e.tokenizers.find(s=>s.from==i);return r?r.to:i})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((i,r)=>{let s=e.specializers.find(l=>l.from==i.external);if(!s)return i;let o=Object.assign(Object.assign({},i),{external:s.to});return t.specializers[r]=P2(o),o})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),i=t.map(()=>!1);if(e)for(let s of e.split(" ")){let o=t.indexOf(s);o>=0&&(i[o]=!0)}let r=null;for(let s=0;s<t.length;s++)if(!i[s])for(let o=this.dialects[t[s]],l;(l=this.data[o++])!=65535;)(r||(r=new Uint8Array(this.maxTerm+1)))[l]=1;return new x5(e,i,r)}static deserialize(e){return new Rv(e)}}function Xh(n,e){return n[e]|n[e+1]<<16}function D5(n){let e=null;for(let t of n){let i=t.p.stoppedAt;(t.pos==t.p.stream.end||i!=null&&t.pos>i)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}function P2(n){if(n.external){let e=n.extend?1:0;return(t,i)=>n.external(t,i)<<1|e}return n.get}const w5=120,qD=121,F2=122,E5=123,M2=127,C5=4,S5=130,A5=7,T5=8,O5=9,k5=10,_5=138,I2=19,P5=139,F5=23,M5=140,I5=27,N5=37,B5=41,R5=144,L5=145,$5=146,j5=147,V5=47,W5=67,N2=152,B2=69,R2=153,L2=71,H5=154,U5=75,z5=159,q5=78,Q5=79,X5=80,Y5=165,$2=88,G5=89,K5=167,Z5=96,J5=169,e9=97,t9=99,n9=100,QD=typeof xe!="undefined"&&{NODE_ENV:"production",PUBLIC_PATH:"/"}&&/\bfparse(:dbg)?\b/.test({NODE_ENV:"production",PUBLIC_PATH:"/"}.LOG),XD=typeof xe!="undefined"&&{NODE_ENV:"production",PUBLIC_PATH:"/"}&&/\bfparse:dbg\b/.test({NODE_ENV:"production",PUBLIC_PATH:"/"}.LOG),Yh=typeof xe!="undefined"&&{NODE_ENV:"production",PUBLIC_PATH:"/"}&&/\bcontext\b/.test({NODE_ENV:"production",PUBLIC_PATH:"/"}.LOG),j2=[9,11,12,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],i9=W2(`
\r`),V2="*".charCodeAt(0),r9=W2("'./-+*^");function W2(n){return Array.from(n).map(e=>e.charCodeAt(0))}function s9(n){return n===63||n>=65&&n<=90||n===95||n>=97&&n<=122||n>=192&&n<=214||n>=216&&n<=246||n>=248&&n<=767||n>=880&&n<=893||n>=895&&n<=8191||n>=8204&&n<=8205||n>=8304&&n<=8591||n>=11264&&n<=12271||n>=12289&&n<=55295||n>=63744&&n<=64975||n>=65008&&n<=65533||n>=55296&&n<=56319||n>=56320&&n<=57343}function o9(n){return r9.includes(n)}function a9(n){return n>=48&&n<=57||n===183||n>=768&&n<=879||n>=8255&&n<=8256}function l9(n){return j2.includes(n)}function H2(n,e){return e.concat(n.split(/\n/g).join(`
`+e))}function u9(n,e=0){const t=n.peek(e);return t===V2&&n.peek(e+1)===V2?{offset:2,token:"**"}:o9(t)?{offset:1,token:String.fromCharCode(t)}:null}function Lv(n,e=0,t=!1){for(let i=!1,r=[],s=0;;s++){const o=n.peek(e+s);if(s9(o)||(i||t)&&a9(o))i||(i=!0),r.push(o);else return r.length?{token:String.fromCharCode(...r),offset:s}:null}}function U2(n,e){for(let t=!1,i=0;;i++){let r=n.peek(e+i);if(l9(r))t||(t=!0);else return t?{token:" ",offset:i}:null}}function c9(n,e){const t=e.contextKeys(),i=e.tokens;for(let r=0,s=[],o=null;;){const l=i.length+s.length>0,h=s.length>0,p=Lv(n,r,l)||l&&u9(n,r)||h&&U2(n,r);if(!p)return o;const{token:y,offset:w}=p;if(r+=w,y===" ")continue;s=[...s,y];const F=[...i,...s].join(" ");if(t.some(j=>j===F)){const j=s[0];o={token:j,offset:j.length,term:F2}}if(!t.some(j=>j.startsWith(F))){if(z2.some(j=>j===F)){const j=s[0];o={token:j,offset:j.length,term:qD}}if(!z2.some(j=>j.startsWith(F)))return o}}}const h9={[qD]:"identifier",[F2]:"nameIdentifier"},d9=new HD((n,e)=>{XD&&console.log("%s: T <identifier | nameIdentifier>",n.pos);const t=c9(n,e.context),i=e.context.tokens,r=t||Lv(n,0,i.length>0);r&&(n.advance(r.offset),n.acceptToken(t?t.term:qD),QD&&console.log("%s: MATCH <%s> <%s>",n.pos,t?h9[t.term]:"identifier",r.token))},{contextual:!0}),p9=new HD((n,e)=>{XD&&console.log("%s: T <propertyIdentifier>",n.pos);const t=e.context.tokens,i=Lv(n,0,t.length>0);i&&(n.advance(i.offset),n.acceptToken(w5),QD&&console.log("%s: MATCH <propertyIdentifier> <%s>",n.pos,i.token))}),f9=new HD((n,e)=>{XD&&console.log("%s: T <insertSemi>",n.pos);let t,i=!1;for(t=0;;t++){const r=n.peek(t);if(!j2.includes(r)){i9.includes(r)&&(i=!0);break}}if(i){const r=Lv(n,t+1);if(U2(n,t+1)||r&&/^(then|else|return|satisfies)$/.test(r.token))return;QD&&console.log("%s: MATCH <insertSemi>",n.pos),n.acceptToken(E5)}}),m9={[H5]:"FunctionInvocation",[R2]:"FilterExpression",[N2]:"PathExpression"},g9={[J5]:"Context",[K5]:"FunctionDefinition",[S5]:"ForExpression",[Y5]:"List",[P5]:"IfExpression",[M5]:"QuantifiedExpression"},y9={[Z5]:"Context",[G5]:"FunctionDefinition",[C5]:"ForExpression",[$2]:"List",[I2]:"IfExpression",[F5]:"QuantifiedExpression",[W5]:"PathExpression",[L2]:"FunctionInvocation",[B2]:"FilterExpression",[B5]:"ArithmeticExpression"};class Tg{constructor(e){this.fn=e}get(e){return this.fn(e)}static of(e){return new Tg(e)}}const z2=Object.keys({"date and time":1,date:1,time:1,duration:1});class v9{constructor(e={}){this.value=e}getKeys(){return Object.keys(this.value)}get(e){const t=this.value[e],i=this.constructor;return i.isAtomic(t)?t:i.of(t)}set(e,t){return this.constructor.of(qi(Jt({},this.value),{[e]:t}))}static isAtomic(e){return!e||e instanceof this||e instanceof Tg||typeof e!="object"}static of(...e){const t=r=>!r||typeof r!="object"?{}:r instanceof this?r.value:Jt({},r),i=e.reduce((r,s)=>Jt(Jt({},r),t(s)),{});return new this(i)}}class Og{constructor({name:e="Expressions",tokens:t=[],children:i=[],parent:r=null,context:s=null,value:o=null,raw:l=null}={}){this.name=e,this.tokens=t,this.children=i,this.parent=r,this.context=s,this.value=o,this.raw=l}enterScope(e){const t=this.of({name:e,parent:this});return Yh&&console.log("[%s] enter",t.path,t.context),t}exitScope(e){return this.parent?(Yh&&console.log(`[%s] exit %o
%s`,this.path,this.context,H2(e,"  ")),this.parent.pushChild(this)):(Yh&&console.log(`[%s] NO exit %o
%s`,this.path,this.context,H2(e,"  ")),this)}token(e){return Yh&&console.log("[%s] token <%s> + <%s>",this.path,this.tokens.join(" "),e),this.assign({tokens:[...this.tokens,e]})}literal(e){return Yh&&console.log("[%s] literal %o",this.path,e),this.pushChild(this.of({name:"Literal",value:e}))}computedValue(){for(let e=this;;e=Rf(e.children)){if(!e)return null;if(e.value)return e.value}}contextKeys(){return this.context.getKeys().map($v)}get path(){var e,t;return((t=(e=this.parent)==null?void 0:e.path)==null?void 0:t.concat(" > ",this.name))||this.name}get(e){const t=[e,e&&$v(e)],i=this.context.getKeys().find(s=>t.includes($v(s)));if(typeof i=="undefined")return;const r=this.context.get(i);return r instanceof Tg?r.get(this):r}resolveName(){const e=this.tokens.join(" "),t=[],i=this.assign({tokens:t}),r=this.of({name:"VariableName",parent:i,value:this.get(e),raw:e});return Yh&&console.log("[%s] resolve name <%s=%s>",r.path,e,this.get(e)),i.pushChild(r)}pushChild(e){if(!e)return this;const t=this.assign({children:[...this.children,e]});return e.parent=t,t}pushChildren(e){let t=this;for(const i of e)t=t.pushChild(i);return t}declareName(){if(this.tokens.length===0)throw Error("no tokens to declare name");const e=this.tokens.join(" ");return Yh&&console.log("[%s] declareName <%s>",this.path,e),this.assign({tokens:[]}).pushChild(this.of({name:"Name",value:e}))}define(e,t){if(typeof e!="string")return Yh&&console.log("[%s] no define <%s=%s>",this.path,e,t),this;Yh&&console.log("[%s] define <%s=%s>",this.path,e,t);const i=this.context.set(e,t);return this.assign({context:i})}assign(e={}){return Og.of(Jt(Jt({},this),e))}of(e={}){const t={context:this.context,parent:this.parent};return Og.of(Jt(Jt({},t),e))}static of(e){const{name:t,tokens:i=[],children:r=[],parent:s=null,context:o,value:l,raw:h}=e;if(!o)throw new Error("must provide <context>");return new Og({name:t,tokens:[...i],children:[...r],context:o,parent:s,value:l,raw:h})}}function $v(n){return n.replace(/\s*([./\-'+]|\*\*?)\s*/g," $1 ").replace(/\s{2,}/g," ").trim()}function q2(n,e,t){const i=n.children.filter(p=>p.name!==e),r=n.children.filter(p=>p.name===e),s=i[0],o=i[Math.max(1,i.length-1)],l=s==null?void 0:s.computedValue(),h=(o==null?void 0:o.computedValue())||null;return n.assign({children:r}).enterScope(e).pushChildren(i).exitScope(t).define(l,h)}function x9(n={},e=v9){const t=Og.of({context:e.of(n)});return new b5({start:t,reduce(i,r,s,o){if(r===I2){const[w,F]=i.children.slice(-2);i=i.assign({value:e.of(w==null?void 0:w.computedValue(),F==null?void 0:F.computedValue())})}if(r===$2&&(i=i.assign({value:e.of(...i.children.map(w=>w==null?void 0:w.computedValue()))})),r===B2){const[w,F]=i.children.slice(-2);i=i.assign({value:w==null?void 0:w.computedValue()})}if(r===L2){const[w,...F]=i.children;(w==null?void 0:w.raw)==="get value"&&(i=D9(i,F))}const l=g9[r];if(l)return i.enterScope(l);const h=m9[r];if(h){const{children:w,context:F}=i,j=w.slice(0,-1),Q=Rf(w);let he=null;return r===N2&&(he=e.of(Q==null?void 0:Q.computedValue())),r===R2&&(he=e.of(F,Q==null?void 0:Q.computedValue()).set("item",Q==null?void 0:Q.computedValue())),i.assign({children:j}).enterScope(h).pushChild(Q).assign({context:he||F})}const p=o.read(o.pos,s.pos);if(y9[r])return i.exitScope(p);if(r===e9){const w=i.children.filter(Q=>Q.name!=="ContextEntry"),F=w[0],j=Rf(w);return q2(i,"ContextEntry",p).assign({value:e.of(i.value).set(F==null?void 0:F.computedValue(),j==null?void 0:j.computedValue())})}if(r===A5||r===I5)return q2(i,"InExpression",p);if(r===_5)return i.define("partial",Tg.of(w=>{var F;return(F=Rf(w.children))==null?void 0:F.computedValue()}));if(r===U5){const w=Rf(i.children).computedValue();return i.define(w,1)}if(r===R5||r===L5||r===$5){const w=i.children.slice(0,-1),F=Rf(i.children);return i.assign({children:w}).enterScope("ArithmeticExpression").pushChild(F)}if(r===j5)return i.enterScope("ArithmeticExpression");if(r===O5||r===k5||r===n9)return i.token(p);if(r===Q5)return i.literal(p.replace(/^"|"$/g,""));if(r===X5)return i.literal(p==="true");if(r===q5)return i.literal(parseFloat(p));if(r===z5)return i.literal(null);if(r===V5)return i.resolveName();if(r===T5||r===t9)return i.declareName();if((r===M2||r===N5)&&i.tokens.length>0)throw new Error("uncleared name");if(r===M2){let w=i;for(;w.parent;)w=w.exitScope(p);return w}return i}})}const b9=x9({});function D9(n,e){if(!e.length)return n.assign({value:null});if(e[0].name==="Name"&&(e=w9(e,["m","key"])),e.length!==2)return n.assign({value:null});const[t,i]=e,r=i==null?void 0:i.computedValue(),s=t==null?void 0:t.computedValue();return!s||typeof s!="object"||typeof r!="string"?n.assign({value:null}):n.assign({value:[$v(r),r].reduce((o,l)=>s.get(l)||o,null)})}function w9(n,e){const t={};for(let i=0;i<n.length;i+=2){const[r,s]=n.slice(i,i+2);t[r.value]=s}return e.map(i=>t[i])}function Rf(n){return n[n.length-1]}const E9=sk({StringLiteral:Vi.string,NumericLiteral:Vi.number,BooleanLiteral:Vi.bool,"AtLiteral!":Vi.special(Vi.string),CompareOp:Vi.compareOperator,ArithOp:Vi.arithmeticOperator,"for if then else some every satisfies between return":Vi.controlKeyword,"in instance of and or":Vi.operatorKeyword,function:Vi.definitionKeyword,as:Vi.keyword,"Type/...":Vi.typeName,Wildcard:Vi.special(Vi.variableName),null:Vi.null,LineComment:Vi.lineComment,BlockComment:Vi.blockComment,'VariableName! "?"':Vi.variableName,"DateTimeConstructor! SpecialFunctionName!":Vi.function(Vi.special(Vi.variableName)),"List Interval":Vi.list,Context:Vi.definition(Vi.literal),"Name!":Vi.definition(Vi.variableName),"Key/Name! ContextEntryType/Name!":Vi.definition(Vi.propertyName),"PathExpression/VariableName!":Vi.function(Vi.propertyName),"FormalParameter/ParameterName!":Vi.function(Vi.definition(Vi.variableName)),"( )":Vi.paren,"[ ]":Vi.squareBracket,"{ }":Vi.brace,".":Vi.derefOperator,", ;":Vi.separator,"..":Vi.punctuation}),C9={__proto__:null,for:10,in:32,return:36,if:40,then:42,else:44,some:48,every:50,satisfies:56,or:60,and:64,between:72,instance:86,of:89,days:99,time:101,duration:103,years:105,months:107,date:109,list:115,context:121,function:128,null:154,true:326,false:326,"?":168,external:184,not:209},S9=Rv.deserialize({version:14,states:"CpO`QYOOO`QYOOO$gQYOOOOQU'#Ce'#CeO$qQYO'#C`O%zQYO'#FPOOQQ'#Fe'#FeO&UQYO'#FeO`QYO'#DVOOQU'#Em'#EmO'rQ^O'#D]OOQO'#Fl'#FlO)oQWO'#DuOOQQ'#D|'#D|OOQQ'#D}'#D}OOQQ'#EO'#EOO)tOWO'#ERO)oQWO'#EPOOQQ'#EP'#EPOOQQ'#Fr'#FrOOQQ'#Fp'#FpOOQQ'#Fw'#FwOOQQ'#ET'#ETO`QYO'#EVOOQQ'#FR'#FRO)yQ^O'#FRO+pQYO'#EWO+wQWO'#EXOOQP'#F{'#F{O+|QXO'#E`OOQQ'#Fx'#FxOOQQ'#FQ'#FQQOQWOOOOQQ'#FS'#FSOOQQ'#F]'#F]O`QYO'#CoOOQQ'#F^'#F^O$qQYO'#CsO,XQYO'#DvOOQQ'#Fq'#FqO,^QYO'#EQOOQO'#EQ'#EQO`QYO'#EUO`QYO'#ETOOQO'#Fy'#FyQ,fQWOOO,kQYO'#DRO-bQWO'#FaOOQO'#DT'#DTO-mQYO'#FeO-tQWOOO.kQYO'#CdO.xQYO'#FUOOQQ'#Cc'#CcO.}QYO'#FTOOQQ'#Cb'#CbO/VQYO,58zO`QYO,59iOOQQ'#Fb'#FbOOQQ'#Fc'#FcOOQQ'#Fd'#FdO`QYO,59qO`QYO,59qO`QYO,59qOOQQ'#Fj'#FjO$qQYO,5:]OOQQ'#Fk'#FkO`QYO,5:_O`QYO,59eO`QYO,59gO`QYO,59iO0uQYO,59iO0|QYO,59rOOQQ,5:h,5:hO1RQYO,59qOOQU-E8k-E8kO2uQYO'#FmOOQQ,5:a,5:aOOQQ,5:m,5:mOOQQ,5:k,5:kO2|QYO,5:qOOQQ,5;m,5;mO3WQYO,5:pO3eQWO,5:rO3jQYO,5:sOOQP'#Ed'#EdO4aQXO'#EcOOQO'#Eb'#EbO4hQWO'#EaO4mQWO'#F|O4uQWO,5:zO4zQYO,59ZO.xQYO'#F`OOQQ'#Cw'#CwO5RQYO'#F_OOQQ'#Cv'#CvO5ZQYO,59_O5`QYO,5:bO5eQYO,5:lO3PQYO,5:pO5jQYO,5:oO`QYO'#EvQ,fQWOOO`QYO'#ElO6aQWO,5;{O`QYOOOOQR'#Cf'#CfOOQQ'#Ei'#EiO7ZQYO,59OO`QYO,5;pOOQQ'#FX'#FXO$qQYO'#EjO7kQYO,5;oO`QYO1G.fOOQQ'#F['#F[O8bQYO1G/TO;XQYO1G/]O;cQYO1G/]O;mQYO1G/]OOQQ1G/w1G/wO=aQYO1G/yO=hQYO1G/PO>qQYO1G/RO?zQYO1G/TO`QYO1G/TOOQQ1G/T1G/TO@bQYO1G/^O@|Q^O'#CdOB`QYO'#FoOOQO'#Dy'#DyOBjQWO'#DxOBoQWO'#FnOOQO'#Dw'#DwOOQO'#Dz'#DzOBwQWO,5<XOOQQ1G0]1G0]O`QYO1G0[O`QYO'#ErOB|QWO,5<ZOOQQ1G0^1G0^OCXQWO'#EZOCdQWO'#FzOOQO'#EY'#EYOClQWO1G0_OOQP'#Et'#EtOCqQXO,5:}O`QYO,5:{OCxQXO'#EuODQQWO,5<hOOQQ1G0f1G0fO`QYO1G.uO`QYO,5;zO$qQYO'#EkODYQYO,5;yO`QYO1G.yODbQYO1G/|OOQO1G0W1G0WOOQO,5;b,5;bOOQO-E8t-E8tOOQO,5;W,5;WOOQO-E8j-E8jODgQWOOOOQQ-E8g-E8gODlQYO'#CmOOQQ1G1[1G1[OOQQ,5;U,5;UOOQQ-E8h-E8hODyQYO7+$QOOQQ7+%e7+%eO`QYO7+$oOEpQYO,5:qOE}QWO7+$oOFSQYO'#D[OOQQ'#DZ'#DZOGvQYO'#D^OG{QYO'#D^OHQQYO'#D^OHVQ`O'#DfOH[Q`O'#DiOHaQ`O'#DmOOQQ7+$x7+$xO`QYO,5:dO$qQYO'#EqOHfQWO,5<YOOQQ1G1s1G1sOIlQYO7+%vOIyQYO,5;^OOQO-E8p-E8pO@bQYO,5:uO$qQYO'#EsOJWQWO,5<fOJ`QYO7+%yOOQP-E8r-E8rOJgQYO1G0gOOQO,5;a,5;aOOQO-E8s-E8sOJqQYO7+$aOJxQYO1G1fOOQQ,5;V,5;VOOQQ-E8i-E8iOKSQYO7+$eOOQO7+%h7+%hO`QYO,59XOKyQYO<<HZOOQQ<<HZ<<HZO$qQYO'#EnOMSQYO,59vONvQYO,59xON{QYO,59xO! QQYO,59xO! VQYO,5:QO$qQYO,5:TO! qQbO,5:XO! xQYO1G0OOOQO,5;],5;]OOQO-E8o-E8oO!!SQYO<<IbOOQQ<<Ib<<IbOOQO1G0a1G0aOOQO,5;_,5;_OOQO-E8q-E8qO!%OQYO'#E]OOQQ<<Ie<<IeO`QYO<<IeO`QYO<<G{O!%uQYO1G.sOOQQ,5;Y,5;YOOQQ-E8l-E8lO!&PQYO1G/dOOQQ1G/d1G/dO!&UQbO'#D]O!&gQ`O'#D[O!&rQ`O1G/lO!&wQWO'#DlO!&|Q`O'#FfOOQO'#Dk'#DkO!'UQ`O1G/oOOQO'#Dp'#DpO!'ZQ`O'#FhOOQO'#Do'#DoO!'cQ`O1G/sOOQQAN?PAN?PO!'hQYOAN=gOOQQ7+%O7+%OO!(_Q`O,59vOOQQ7+%W7+%WO! VQYO,5:WO$qQYO'#EoO!(jQ`O,5<QOOQQ7+%Z7+%ZO! VQYO'#EpO!(rQ`O,5<SO!(zQ`O7+%_OOQO1G/r1G/rOOQO,5;Z,5;ZOOQO-E8m-E8mOOQO,5;[,5;[OOQO-E8n-E8nO@bQYO<<HyOOQQAN>eAN>eO$qQYO'#EnO! VQYO<<HyO!)PQ`O7+%_O!)UQ`O1G/sO! qQbO,5:XO!)ZQ`O'#Dm",stateData:"!)h~O#qOS#rOSPOSQOS~OTqOZVO[UOdrOhtOitOs{OvgO!SyO!TyO!UvO!WxO!b|O!fzO!heO!owO!vhO#RlO#mRO#nRO$g]O$h^O$i_O$j`O~OTqO[UOdrOhtOitOs{OvgO!SyO!TyO!UvO!WxO!b|O!fzO!heO!owO!vhO#RlO#mRO#nRO$g]O$h^O$i_O$j`O~OZ!RO#[!SO~P!|O#mRO#nRO~OZ![O[![O]!]O^!]O_!^O`!iOn!fOp!gOr!ZOs!ZOt!hO{!jO!h!dO#y!bOv$`X~O#k#sX$q#sX~P$yO$g!kOT$XXZ$XX[$XXd$XXh$XXi$XXs$XXv$XX!S$XX!T$XX!U$XX!W$XX!b$XX!f$XX!h$XX!o$XX!v$XX#R$XX#m$XX#n$XX$h$XX$i$XX$j$XX~O#mRO#nROZ!PX[!PX]!PX^!PX_!PX`!PXn!PXp!PXr!PXs!PXt!PXv!PX{!PX!h!PX#k!PX#o!PX#y!PX$q!PX#}!PXx!PX#|!PX!f!PXe!PXb!PX#Q!PXf!PXl!PX~Ov!nO~O$h^O~O#o!sOZ#uX[#uX]#uX^#uX_#uX`#uXn#uXp#uXr#uXs#uXt#uXv#uX{#uX!h#uX#k#uX#y#uX$q#uX#}#uXx#uX#|#uX!f#uXe#uXb#uX#Q#uXf#uXl#uX~O!f$cP~P`Ov!vO~O#l!wO$h^O#Q$pP~Op#TO~Op#UOv!tX~O$q#XO~O#kuX#}uX$quXxuX#|uX!fuXeuXbuX#QuXfuXluX~P$yO#}#ZO#k$TXx$TX~O#k#ZX~P&UOv#]O~OZ#^O[#^O]#^O^#^O_#^O#mRO#nRO#y#^O#z#^O$ZWX~O`WXxWX#}WX~P-yO`#bO~O#}#cOb#wX~Ob#fO~OTqOZVO[UOdrOhtOitOs{O!SyO!TyO!UvO!WxO!b|O!fzO!heO!owO!vhO#RlO#mRO#nRO$g]O$h^O$i_O$j`O~Ov#pO~P/[O|#rO~O{!jO!h!dO#y!bOZya[ya]ya^ya_ya`yanyapyaryasyatyav$`X#kya$qya#}yaxya#|ya!fyaeyabya#Qyafyalya~Ox$cP~P`Ox#{O#|#|O~P$yO#|#|O#}#}O!f$cX~P$yO!f$PO~O#mRO#nROx$nP~OZ#^O[#^O]#^O^#^O_#^O#l!wO#y#^O#z#^O~O$Z#VX~P3uO$Z$WO~O#}$XO#Q$pX~O#Q$ZO~Oe$[O~P$yO#}$^Ol$RX~Ol$`O~O!V$aO~O!S$bO~O#k!wa$q!wa#}!wax!wa#|!wa!f!wae!wab!wa#Q!waf!wal!wa~P$yO#}#ZO#k$Tax$Ta~OZ#^O[#^O]#^O^#^O_#^O#mRO#nRO#y#^O#z#^O~O`Wa$ZWaxWa#}Wa~P6lO#}#cOb#wa~OZ![O[![O]!]O^!]O_!^O{!jO!h!dO#y!bOv$`X~O`qinqipqirqisqitqi#kqi$qqi#}qixqi#|qi!fqieqibqi#Qqifqilqi~P7sO_!^O{!jO!h!dO#y!bOZyi[yi`yinyipyiryisyityiv$`X#kyi$qyi#}yixyi#|yi!fyieyibyi#Qyifyilyi~O]!]O^!]O~P9kO]yi^yi~P9kO{!jO!h!dO#y!bOZyi[yi]yi^yi_yi`yinyipyiryisyityiv$`X#kyi$qyi#}yixyi#|yi!fyieyibyi#Qyifyilyi~O!f$nO~P$yO`!iOp!gOr!ZOs!ZOt!hOnmi#kmi$qmi#}mixmi#|mi!fmiemibmi#Qmifmilmi~P7sO`!iOr!ZOs!ZOt!hOnoipoi#koi$qoi#}oixoi#|oi!foieoiboi#Qoifoiloi~P7sO`!iOn!fOp$oOr!ZOs!ZOt!hO~P7sO!R$tO!U$uO!W$vO!Z$wO!^$xO!b$yO#mRO#nRO~OZ#aX[#aX]#aX^#aX_#aX`#aXn#aXp#aXr#aXs#aXt#aXv#aXx#aX{#aX!h#aX#m#aX#n#aX#o#aX#y#aX#}#aX~P-yO#}#}Ox$cX~P$yO$Z${O~O#}$|Ox$bX~Ox%OO~O#}#}O!f$cax$ca~O$Z%SOx!}X#}!}X~O#}%TOx$nX~Ox%VO~O$Z#Va~P3uO#l!wO$h^O~O#}$XO#Q$pa~O#}$^Ol$Ra~O!T%aO~OxpO~O#|%bObaX#}aX~P$yO#kSq$qSq#}SqxSq#|Sq!fSqeSqbSq#QSqfSqlSq~P$yOx#{O#|#|O#}uX~P$yOx%dO~O#y%eOZ!OX[!OX]!OX^!OX_!OX`!OXn!OXp!OXr!OXs!OXt!OXv!OX{!OX!h!OX#k!OX$q!OX#}!OXx!OX#|!OX!f!OXe!OXb!OX#Q!OXf!OXl!OX~Op%gO~Op%hO~Op%iO~O![%jO~O![%kO~O![%lO~O#}$|Ox$ba~OZ![O[![O]!]O^!]O_!^O`!iOn!fOp!gOr!ZOs!ZOt!hO{!jO#y!bOv$`X~Ox%qO!f%qO!h%pO~PHnO!f#fa#}#fax#fa~P$yO#}%TOx$na~O#O%wO~P`O#Q#Ti#}#Ti~P$yOf%xO~P$yOl$Si#}$Si~P$yO#kgq$qgq#}gqxgq#|gq!fgqegqbgq#Qgqfgqlgq~P$yO`qynqypqyrqysqytqy#kqy$qqy#}qyxqy#|qy!fqyeqybqy#Qqyfqylqy~P7sO#y%eOZ!Oa[!Oa]!Oa^!Oa_!Oa`!Oan!Oap!Oar!Oas!Oat!Oav!Oa{!Oa!h!Oa#k!Oa$q!Oa#}!Oax!Oa#|!Oa!f!Oae!Oab!Oa#Q!Oaf!Oal!Oa~O!S%|O~O!V%|O~O!S%}O~O!R$tO!U$uO!W$vO!Z$wO!^$xO!b&sO#mRO#nRO~O!X$[P~P! VOx!li#}!li~P$yOT$_XZ$_X[$_X]!xy^!xy_!xy`!xyd$_Xh$_Xi$_Xn!xyp!xyr!xys$_Xt!xyv$_X{!xy!S$_X!T$_X!U$_X!W$_X!b$_X!f$_X!h$_X!o$_X!v$_X#R$_X#k!xy#m$_X#n$_X#y!xy$g$_X$h$_X$i$_X$j$_X$q!xy#}!xyx!xy#|!xye!xyb!xy#Q!xyf!xyl!xy~O#k#PX$q#PX#}#PXx#PX#|#PX!f#PXe#PXb#PX#Q#PXf#PXl#PX~P$yObai#}ai~P$yO!T&]O~O#mRO#nRO!X!PX#y!PX#}!PX~O#y&nO!X!OX#}!OX~O!X&_O~O$Z&`O~O#}&aO!X$YX~O!X&cO~O#}&dO!X$[X~O!X&fO~O#kc!R$qc!R#}c!Rxc!R#|c!R!fc!Rec!Rbc!R#Qc!Rfc!Rlc!R~P$yO#y&nO!X!Oa#}!Oa~O#}&aO!X$Ya~O#}&dO!X$[a~O$]&lO~O$]&oO~O!X&pO~O![&rO~OQP_^$g]#y~",goto:"Du$qPPPP$rP%k%n%t&W'qPPPPPP'zP$rPPP$rPP'}(QP$rP$rP$rPPP(WP(cP$r$rPP(l)R)^)RPPPPPPP)RPP)RP*k*n)RP*t*z$rP$rP$r+R+z+},T+zP,]-U,],].U.}P$r/v$r0o0o1h1kP1qPP0o1w1}.Q2RPP2ZP2^2e2k2q2w4S4^4d4j4p4w4}5T5ZPPPPPPPP5a5j7q8j9c9fPP9jPP9p9s:l;e;h;l;q<`=O=o>hP>kP>o?b@T@|ASAV$rA]A]PPPPBU7qB}CvCyDr!mhOPQWgjsz{!Z!_!`!a!e!f!g!h!i!n#X#Z#]#a#e#p#|#}$W$[$]$`$o${%V%b%w%xR!YSQ!WSR$k#cS!US#cS#Ou$^W#u!n!v$|%TT&R%k&a#WXOPQWYgjsz{!Z!_!`!a!c!e!f!g!h!i#X#Z#]#a#e#p#r#|#}$W$[$]$`$o${%S%V%b%e%j%l%w%x&O&`&d&l&n&o&rb!TSu!v#c$^$|%T%k&aU#_!T#`#sR#s!nU#_!T#`#sT$U!x$VR$j#aR#SuQ#QuR%^$^U!PQ#]#pQ#q!iR$e#ZQpQQ$g#]R$q#pQ$z#rQ%r%SQ&Q%jU&V%l&d&rQ&g&`T&m&l&oc$s#r%S%j%l&`&d&l&o&r!liOPQWgjsz{!Z!_!`!a!e!f!g!h!i!n#X#Z#]#a#e#p#|#}$W$[$]$`$o${%V%b%w%xQ#k!cU$r#r%S&lS%z%e&n]&P%j%l&`&d&o&rR&U%kQ&S%kR&h&aQ&Y%lR&q&rS&W%l&rR&j&d!mZOPQWgjsz{!Z!_!`!a!e!f!g!h!i!n#X#Z#]#a#e#p#|#}$W$[$]$`$o${%V%b%w%xR#z!nQ#w!nR%n$|S#v!n$|T$Q!v%T!mcOPQWgjsz{!Z!_!`!a!e!f!g!h!i!n#X#Z#]#a#e#p#|#}$W$[$]$`$o${%V%b%w%x!lcOPQWgjsz{!Z!_!`!a!e!f!g!h!i!n#X#Z#]#a#e#p#|#}$W$[$]$`$o${%V%b%w%xQ!p`T!ym$X!maOPQWgjsz{!Z!_!`!a!e!f!g!h!i!n#X#Z#]#a#e#p#|#}$W$[$]$`$o${%V%b%w%x!mbOPQWgjsz{!Z!_!`!a!e!f!g!h!i!n#X#Z#]#a#e#p#|#}$W$[$]$`$o${%V%b%w%x!mfOPQWgjsz{!Z!_!`!a!e!f!g!h!i!n#X#Z#]#a#e#p#|#}$W$[$]$`$o${%V%b%w%x!mnOPQWgjsz{!Z!_!`!a!e!f!g!h!i!n#X#Z#]#a#e#p#|#}$W$[$]$`$o${%V%b%w%xR$T!vQ$R!vR%s%TQ%v%VR&Z%wQ!{mR%Y$XT!zm$XS!xm$XT$U!x$VRpQS#`!T#sR$h#`Q#d!WR$l#dQ$_#QR%_$_Q#[!PR$f#[!vYOPQWgjsz{!Z!_!`!a!c!e!f!g!h!i!n#X#Z#]#a#e#p#r#|#}$W$[$]$`$o${%S%V%b%e%w%x&lS!mY&O_&O%j%l&`&d&n&o&rQ%f$rS%{%f&^R&^&PQ&b&SR&i&bQ&e&WR&k&eQ$}#wR%o$}S$O!t#tR%R$OQ%U$RR%t%UQ$V!xR%W$VQ$Y!{R%Z$YQ#Y}R$d#YQpOQ}PR$c#XUTOP#XW!OQ!i#Z#]Q!lWQ!rgQ!tjQ!}sQ#VzQ#W{Q#g!ZQ#h!_Q#i!`Q#j!aQ#l!eQ#m!fQ#n!gQ#o!hQ#t!nQ$i#aQ$m#eQ$p#pQ%P#|Q%Q#}Q%X$WQ%[$[Q%]$]Q%`$`Q%c$oQ%m${S%u%V%wQ%y%bR&[%x!moOPQWgjsz{!Z!_!`!a!e!f!g!h!i!n#X#Z#]#a#e#p#|#}$W$[$]$`$o${%V%b%w%x!mSOPQWgjsz{!Z!_!`!a!e!f!g!h!i!n#X#Z#]#a#e#p#|#}$W$[$]$`$o${%V%b%w%xR!XST!VS#cQ#a!UR$]#OR#e!Y!msOPQWgjsz{!Z!_!`!a!e!f!g!h!i!n#X#Z#]#a#e#p#|#}$W$[$]$`$o${%V%b%w%x!muOPQWgjsz{!Z!_!`!a!e!f!g!h!i!n#X#Z#]#a#e#p#|#}$W$[$]$`$o${%V%b%w%xR#RuT#Pu$^V!QQ#]#p!X!_T!O!r!t!}#V#W#g#l#m#n#o#t$i$m$p%P%Q%X%[%]%`%c%m%u%y&[!Z!`T!O!r!t!}#V#W#g#h#l#m#n#o#t$i$m$p%P%Q%X%[%]%`%c%m%u%y&[!]!aT!O!r!t!}#V#W#g#h#i#l#m#n#o#t$i$m$p%P%Q%X%[%]%`%c%m%u%y&[!mWOPQWgjsz{!Z!_!`!a!e!f!g!h!i!n#X#Z#]#a#e#p#|#}$W$[$]$`$o${%V%b%w%xR&T%kT&X%l&r!a!cT!O!l!r!t!}#V#W#g#h#i#j#l#m#n#o#t$i$m$p%P%Q%X%[%]%`%c%m%u%y&[!a!eT!O!l!r!t!}#V#W#g#h#i#j#l#m#n#o#t$i$m$p%P%Q%X%[%]%`%c%m%u%y&[!m[OPQWgjsz{!Z!_!`!a!e!f!g!h!i!n#X#Z#]#a#e#p#|#}$W$[$]$`$o${%V%b%w%xQ!o[R!qaR#x!nQ!ujR#y!n!mdOPQWgjsz{!Z!_!`!a!e!f!g!h!i!n#X#Z#]#a#e#p#|#}$W$[$]$`$o${%V%b%w%x!mjOPQWgjsz{!Z!_!`!a!e!f!g!h!i!n#X#Z#]#a#e#p#|#}$W$[$]$`$o${%V%b%w%x!mkOPQWgjsz{!Z!_!`!a!e!f!g!h!i!n#X#Z#]#a#e#p#|#}$W$[$]$`$o${%V%b%w%xR$S!v!mmOPQWgjsz{!Z!_!`!a!e!f!g!h!i!n#X#Z#]#a#e#p#|#}$W$[$]$`$o${%V%b%w%xR!|m",nodeNames:"\u26A0 LineComment BlockComment Expression ForExpression for InExpressions InExpression Name Identifier Identifier ArithOp ArithOp ArithOp ArithOp ArithOp in IterationContext return IfExpression if then else QuantifiedExpression some every InExpressions InExpression satisfies Disjunction or Conjunction and Comparison CompareOp CompareOp between PositiveUnaryTest ( PositiveUnaryTests ) ArithmeticExpression InstanceOfExpression instance of Type QualifiedName VariableName SpecialType days time duration years months date > ListType list < ContextType context ContextEntryTypes ContextEntryType FunctionType function ArgumentTypes ArgumentType PathExpression ] FilterExpression [ FunctionInvocation SpecialFunctionName NamedParameters NamedParameter ParameterName PositionalParameters null NumericLiteral StringLiteral BooleanLiteral DateTimeLiteral DateTimeConstructor AtLiteral ? SimplePositiveUnaryTest Interval ParenthesizedExpression List FunctionDefinition FormalParameters FormalParameter external FunctionBody } { Context ContextEntry Key Name Identifier Expressions UnaryTests Wildcard not",maxTerm:171,context:b9,nodeProps:[["closedBy",38,")",70,"]",95,"}"],["openedBy",40,"(",68,"[",94,"{"],["group",-5,77,78,79,80,81,"Literal"]],propSources:[E9],skippedNodes:[0,1,2],repeatNodeCount:14,tokenData:"+l~RuXY#fYZ$ZZ[#f]^$Zpq#fqr$`rs$kwx&cxy&hyz&mz{&r{|'P|}'U}!O'Z!O!P'h!P!Q(Q!Q![){![!]*^!]!^*c!^!_*h!_!`$f!`!a*w!b!c+R!}#O+W#P#Q+]#Q#R&z#o#p+b#q#r+g$f$g#f#BY#BZ#f$IS$I_#f$I|$I}$Z$I}$JO$Z$JT$JU#f$KV$KW#f&FU&FV#f?HT?HU#f~#kY#q~XY#fZ[#fpq#f$f$g#f#BY#BZ#f$IS$I_#f$JT$JU#f$KV$KW#f&FU&FV#f?HT?HU#f~$`O#r~~$cP!_!`$f~$kOr~~$pW$h~OY$kZr$krs%Ys#O$k#O#P%_#P;'S$k;'S;=`&]<%lO$k~%_O$h~~%bRO;'S$k;'S;=`%k;=`O$k~%pX$h~OY$kZr$krs%Ys#O$k#O#P%_#P;'S$k;'S;=`&];=`<%l$k<%lO$k~&`P;=`<%l$k~&hO#z~~&mOv~~&rOx~~&wP^~z{&z~'PO_~~'UO[~~'ZO#}~R'`PZP!`!a'cQ'hO$]Q~'mQ#y~!O!P's!Q!['x~'xO#|~~'}P$g~!Q!['x~(VQ]~z{(]!P!Q)d~(`TOz(]z{(o{;'S(];'S;=`)^<%lO(]~(rVOz(]z{(o{!P(]!P!Q)X!Q;'S(];'S;=`)^<%lO(]~)^OQ~~)aP;=`<%l(]~)iSP~OY)dZ;'S)d;'S;=`)u<%lO)d~)xP;=`<%l)d~*QQ$g~!O!P*W!Q![){~*ZP!Q!['x~*cO$Z~~*hO$q~R*oP![QsP!_!`*rP*wOsPR+OP!XQsP!_!`*r~+WO$j~~+]O!h~~+bO!f~~+gO#R~~+lO#Q~",tokenizers:[p9,d9,f9,0,1],topRules:{Expression:[0,3],Expressions:[1,101],UnaryTests:[2,102]},dynamicPrecedences:{31:-1,71:-1,73:-1},specialized:[{term:121,get:n=>C9[n]||-1}],tokenPrec:2500}),A9=[Cp("function(${params}) ${body}",{label:"function",detail:"definition",type:"keyword"}),Cp("for ${var} in ${collection} return ${value}",{label:"for",detail:"expression",type:"keyword"}),Cp("every ${var} in ${collection} satisfies ${condition}",{label:"every",detail:"quantified expression",type:"keyword"}),Cp("some ${var} in ${collection} satisfies ${condition}",{label:"some",detail:"quantified expression",type:"keyword"}),Cp("if ${condition} then ${value} else ${other value}",{label:"if",detail:"block",type:"keyword"}),Cp("{ ${key}: ${value} }",{label:"context",detail:"block",type:"keyword"})];function kg(n){const{context:e,after:t,before:i,keyword:r}=n;return _9({nodes:e,before:i,after:t,keyword:r},AD([{label:r,type:"keyword",boost:10}]))}const T9=[kg({context:"InExpression",keyword:"in"}),kg({context:"IfExpression",keyword:"then",after:"if",before:"else"}),kg({context:"IfExpression",keyword:"else",after:"then"}),kg({context:"QuantifiedExpression",keyword:"satisfies"}),kg({context:"ForExpression",after:"InExpressions",keyword:"return"})];function Q2(n,e,t){return X2(n,e,t,-1)}function O9(n,e,t){return X2(n,e,t,1)}function X2(n,e,t,i){let r=n[i>0?"childAfter":"childBefore"](e);for(;r;){if(t.includes(r.name))return r;if(r.type.isError&&r.firstChild&&t.includes(r.firstChild.name))return r.firstChild;r=r[i>0?"nextSibling":"prevSibling"]}return null}function k9(n,e){for(Array.isArray(e)||(e=[e]);n;n=n.parent){if(e.includes(n.name))return n;if(n.type.isTop)break}return null}function _9(n,e){const{nodes:t,before:i,after:r,keyword:s}=n;return o=>{const{state:l,pos:h}=o,p=k9(Nu(l).resolveInner(h,-1),t);return!p||Q2(p,h,[s,i])||O9(p,h,[s,r])||r&&!Q2(p,h,[r])?null:e(o)}}const YD=yv.define({parser:S9.configure({props:[pk.add({Context:mk({closing:"}"}),"List FilterExpression":mk({closing:"]"}),"ParenthesizedExpression FunctionInvocation":xD({except:/^\s*\)/}),"ForExpression QuantifiedExpression IfExpression":xD({except:/^\s*(then|else|return|satisfies)\b/}),FunctionDefinition:xD({except:/^\s*(\(|\))/})}),z8.add({Context:bD,List:bD,ParenthesizedExpression:bD,FunctionDefinition(n){const e=n.getChild(")");return e?{from:e.to,to:n.to}:null}})]}),languageData:{indentOnInput:/^\s*(\)|\}|\]|then|else|return|satisfies)$/,commentTokens:{line:"//",block:{open:"/*",close:"*/"}}}});YD.configure({top:"UnaryTests"}),YD.configure({top:"Expression"});function P9(n){const e=[];return n.iterate({enter:t=>{const i=t.node;if(!i.type.isError)return;const r=i.parent,s=Y2(i),o={from:i.from,to:i.to,severity:"error",type:"Syntax Error"};if(i.from!==i.to)o.message=`Unrecognized token in <${r.name}>`;else if(s)o.message=`Unrecognized token <${s.name}> in <${r.name}>`,o.to=s.to;else{const l=r.enterUnfinishedNodesBefore(i.to);o.message=`Incomplete <${(l||r).name}>`}e.push(o)}}),e}function Y2(n){return n?n.nextSibling||Y2(n.parent):null}function F9(n){return[...P9(n)]}const M9=()=>n=>{if(n.state.doc.length===0)return[];const e=Nu(n.state);return F9(e).map(i=>qi(Jt({},i),{source:i.type}))};function jv(n){return n.from===n.to}function Vv(n){return n?n.name==="PathExpression"?!0:Vv(n.parent):!1}var I9=[{name:"not(negand)",description:`<p>Returns the logical negation of the given value.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">not(negand: boolean): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">not(true)
// false

not(null)
// null
</code></pre>
`},{name:"is defined(value)",description:`<p><em>Camunda Extension</em></p>
<p>Checks if a given value is not <code>null</code>. If the value is <code>null</code> then the function returns <code>false</code>.
Otherwise, the function returns <code>true</code>.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">is defined(value: Any): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">is defined(1)
// true

is defined(null)
// false

is defined(x)
// false - if no variable &quot;x&quot; exists

is defined(x.y)
// false - if no variable &quot;x&quot; exists or it doesn&#39;t have a property &quot;y&quot;
</code></pre>
<p>:::caution Breaking change</p>
<p>This function worked differently in previous versions. It returned <code>true</code> if the value was <code>null</code>.
Since this version, the function returns <code>false</code> if the value is <code>null</code>.</p>
<p>:::</p>
`},{name:"get or else(value, default)",description:`<p><em>Camunda Extension</em></p>
<p>Return the provided value parameter if not <code>null</code>, otherwise return the default parameter</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">get or else(value: Any, default: Any): Any
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">get or else(&quot;this&quot;, &quot;default&quot;)
// &quot;this&quot;

get or else(null, &quot;default&quot;)
// &quot;default&quot;

get or else(null, null)
// null
</code></pre>
`},{name:"assert(value, condition)",description:`<p><em>Camunda Extension</em></p>
<p>Verify that the given condition is met. If the condition is <code>true</code>, the function returns the value.
Otherwise, the evaluation fails with an error.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">assert(value: Any, condition: Any)
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">assert(x, x != null)
// &quot;value&quot; - if x is &quot;value&quot;
// error - if x is null or doesn&#39;t exist

assert(x, x &gt;= 0)
// 4 - if x is 4
// error - if x is less than zero
</code></pre>
`},{name:"assert(value, condition, cause)",description:`<p><em>Camunda Extension</em></p>
<p>Verify that the given condition is met. If the condition is <code>true</code>, the function returns the value.
Otherwise, the evaluation fails with an error containing the given message.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">assert(value: Any, condition: Any, cause: String)
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">assert(x, x != null, &quot;&#39;x&#39; should not be null&quot;)
// &quot;value&quot; - if x is &quot;value&quot;
// error(&#39;x&#39; should not be null) - if x is null or doesn&#39;t exist

assert(x, x &gt;= 0, &quot;&#39;x&#39; should be positive&quot;)
// 4 - if x is 4
// error(&#39;x&#39; should be positive) - if x is less than zero
</code></pre>
`},{name:"get value(context, key)",description:`<p>Returns the value of the context entry with the given key.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">get value(context: context, key: string): Any
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">get value({foo: 123}, &quot;foo&quot;)
// 123

get value({a: 1}, &quot;b&quot;)
// null
</code></pre>
`},{name:"get value(context, keys)",description:`<p><em>Camunda Extension</em></p>
<p>Returns the value of the context entry for a context path defined by the given keys.</p>
<p>If <code>keys</code> contains the keys <code>[k1, k2]</code> then it returns the value at the nested entry <code>k1.k2</code> of the context.</p>
<p>If <code>keys</code> are empty or the nested entry defined by the keys doesn&#39;t exist in the context, it returns <code>null</code>.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">get value(context: context, keys: list&lt;string&gt;): Any
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">get value({x:1, y: {z:0}}, [&quot;y&quot;, &quot;z&quot;])
// 0

get value({x: {y: {z:0}}}, [&quot;x&quot;, &quot;y&quot;])
// {z:0}

get value({a: {b: 3}}, [&quot;b&quot;])
// null
</code></pre>
`},{name:"get entries(context)",description:`<p>Returns the entries of the context as a list of key-value-pairs.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">get entries(context: context): list&lt;context&gt;
</code></pre>
<p>The return value is a list of contexts. Each context contains two entries for &quot;key&quot; and &quot;value&quot;.</p>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">get entries({foo: 123})
// [{key: &quot;foo&quot;, value: 123}]
</code></pre>
`},{name:"context put(context, key, value)",description:`<p>Adds a new entry with the given key and value to the context. Returns a new context that includes the entry.</p>
<p>If an entry for the same key already exists in the context, it overrides the value.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">context put(context: context, key: string, value: Any): context
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">context put({x:1}, &quot;y&quot;, 2)
// {x:1, y:2}
</code></pre>
<p>:::info
The function <code>context put()</code> replaced the previous function <code>put()</code> (Camunda Extension). The
previous function is deprecated and should not be used anymore.
:::</p>
`},{name:"context put(context, keys, value)",description:`<p>Adds a new entry with the given value to the context. The path of the entry is defined by the keys. Returns a new context that includes the entry.</p>
<p>If <code>keys</code> contains the keys <code>[k1, k2]</code> then it adds the nested entry <code>k1.k2 = value</code> to the context.</p>
<p>If an entry for the same keys already exists in the context, it overrides the value.</p>
<p>If <code>keys</code> are empty, it returns <code>null</code>.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">context put(context: context, keys: list&lt;string&gt;, value: Any): context
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">context put({x:1}, [&quot;y&quot;], 2)
// {x:1, y:2}

context put({x:1, y: {z:0}}, [&quot;y&quot;, &quot;z&quot;], 2)
// {x:1, y: {z:2}}

context put({x:1}, [&quot;y&quot;, &quot;z&quot;], 2)
// {x:1, y: {z:2}}
</code></pre>
`},{name:"context merge(contexts)",description:`<p>Union the given contexts. Returns a new context that includes all entries of the given contexts.</p>
<p>If an entry for the same key already exists in a context, it overrides the value. The entries are overridden in the same order as in the list of contexts.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">context merge(contexts: list&lt;context&gt;): context
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">context merge([{x:1}, {y:2}])
// {x:1, y:2}

context merge([{x:1, y: 0}, {y:2}])
// {x:1, y:2}
</code></pre>
<p>:::info
The function <code>context merge()</code> replaced the previous function <code>put all()</code> (Camunda Extension). The
previous function is deprecated and should not be used anymore.
:::</p>
`},{name:"string(from)",description:`<p>Returns the given value as a string representation.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">string(from: Any): string
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">string(1.1)
// &quot;1.1&quot;

string(date(&quot;2012-12-25&quot;))
// &quot;2012-12-25&quot;
</code></pre>
`},{name:"number(from)",description:`<p>Parses the given string to a number.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">number(from: string): number
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">number(&quot;1500.5&quot;)
// 1500.5
</code></pre>
`},{name:"context(entries)",description:`<p>Constructs a context of the given list of key-value pairs. It is the reverse function to <a href="feel-built-in-functions-context.md#get-entriescontext">get entries()</a>.</p>
<p>Each key-value pair must be a context with two entries: <code>key</code> and <code>value</code>. The entry with name <code>key</code> must have a value of the type <code>string</code>.</p>
<p>It might override context entries if the keys are equal. The entries are overridden in the same order as the contexts in the given list.</p>
<p>Returns <code>null</code> if one of the entries is not a context or if a context doesn&#39;t contain the required entries.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">context(entries: list&lt;context&gt;): context
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">context([{&quot;key&quot;:&quot;a&quot;, &quot;value&quot;:1}, {&quot;key&quot;:&quot;b&quot;, &quot;value&quot;:2}])
// {a:1, b:2}
</code></pre>
`},{name:"date(from)",description:`<p>Returns a date from the given value.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">date(from: string): date
</code></pre>
<p>Parses the given string into a date.</p>
<pre><code class="language-feel">date(from: date and time): date
</code></pre>
<p>Extracts the date component from the given date and time.</p>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">date(&quot;2018-04-29&quot;)
// date(&quot;2018-04-29&quot;)

date(date and time(&quot;2012-12-25T11:00:00&quot;))
// date(&quot;2012-12-25&quot;)
</code></pre>
`},{name:"date(year, month, day)",description:`<p>Returns a date from the given components.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">date(year: number, month: number, day: number): date
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">date(2012, 12, 25)
// date(&quot;2012-12-25&quot;)
</code></pre>
`},{name:"time(from)",description:`<p>Returns a time from the given value.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">time(from: string): time
</code></pre>
<p>Parses the given string into a time.</p>
<pre><code class="language-feel">time(from: date and time): time
</code></pre>
<p>Extracts the time component from the given date and time.</p>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">time(&quot;12:00:00&quot;)
// time(&quot;12:00:00&quot;)

time(date and time(&quot;2012-12-25T11:00:00&quot;))
// time(&quot;11:00:00&quot;)
</code></pre>
`},{name:"time(hour, minute, second)",description:`<p>Returns a time from the given components.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">time(hour: number, minute: number, second: number): time
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">time(23, 59, 0)
// time(&quot;23:59:00&quot;)
</code></pre>
`},{name:"time(hour, minute, second, offset)",description:`<p>Returns a time from the given components, including a timezone offset.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">time(hour: number, minute: number, second: number, offset: days and time duration): time
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">time(14, 30, 0, duration(&quot;PT1H&quot;))
// time(&quot;14:30:00+01:00&quot;)
</code></pre>
`},{name:"date and time(from)",description:`<p>Parses the given string into a date and time.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">date and time(from: string): date and time
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">date and time(&quot;2018-04-29T009:30:00&quot;)
// date and time(&quot;2018-04-29T009:30:00&quot;)
</code></pre>
`},{name:"date and time(date, time)",description:`<p>Returns a date and time from the given components.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">date and time(date: date, time: time): date and time
</code></pre>
<pre><code class="language-feel">date and time(date: date and time, time: time): date and time
</code></pre>
<p>Returns a date and time value that consists of the date component of <code>date</code> combined with <code>time</code>.</p>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">date and time(date(&quot;2012-12-24&quot;),time(&quot;T23:59:00&quot;))
// date and time(&quot;2012-12-24T23:59:00&quot;)

date and time(date and time(&quot;2012-12-25T11:00:00&quot;),time(&quot;T23:59:00&quot;))
// date and time(&quot;2012-12-25T23:59:00&quot;)
</code></pre>
`},{name:"date and time(date, timezone)",description:`<p><em>Camunda Extension</em></p>
<p>Returns the given date and time value at the given timezone.</p>
<p>If <code>date</code> has a different timezone than <code>timezone</code> then it adjusts the time to match the local time of <code>timezone</code>.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">date and time(date: date and time, timezone: string): date and time
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">date and time(@&quot;2020-07-31T14:27:30@Europe/Berlin&quot;, &quot;America/Los_Angeles&quot;)
// date and time(&quot;2020-07-31T05:27:30@America/Los_Angeles&quot;)

date and time(@&quot;2020-07-31T14:27:30&quot;, &quot;Z&quot;)
// date and time(&quot;2020-07-31T12:27:30Z&quot;)
</code></pre>
`},{name:"duration(from)",description:`<p>Parses the given string into a duration. The duration is either a days and time duration or a years and months duration.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">duration(from: string): days and time duration
</code></pre>
<pre><code class="language-feel">duration(from: string): years and months duration
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">duration(&quot;P5D&quot;)
// duration(&quot;P5D&quot;)

duration(&quot;P32Y&quot;)
// duration(&quot;P32Y&quot;)
</code></pre>
`},{name:"years and months duration(from, to)",description:`<p>Returns the years and months duration between <code>from</code> and <code>to</code>.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">years and months duration(from: date, to: date): years and months duration
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">years and months duration(date(&quot;2011-12-22&quot;), date(&quot;2013-08-24&quot;))
// duration(&quot;P1Y8M&quot;)
</code></pre>
`},{name:"list contains(list, element)",description:`<p>Returns <code>true</code> if the given list contains the element. Otherwise, returns <code>false</code>.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">list contains(list: list, element: Any): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">list contains([1,2,3], 2)
// true
</code></pre>
`},{name:"count(list)",description:`<p>Returns the number of elements of the given list.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">count(list: list): number
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">count([1,2,3])
// 3
</code></pre>
`},{name:"min(list)",description:`<p>Returns the minimum of the given list.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">min(list: list): Any
</code></pre>
<p>All elements in <code>list</code> should have the same type and be comparable.</p>
<p>The parameter <code>list</code> can be passed as a list or as a sequence of elements.</p>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">min([1,2,3])
// 1

min(1,2,3)
// 1
</code></pre>
`},{name:"max(list)",description:`<p>Returns the maximum of the given list.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">max(list: list): Any
</code></pre>
<p>All elements in <code>list</code> should have the same type and be comparable.</p>
<p>The parameter <code>list</code> can be passed as a list or as a sequence of elements.</p>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">max([1,2,3])
// 3

max(1,2,3)
// 3
</code></pre>
`},{name:"sum(list)",description:`<p>Returns the sum of the given list of numbers.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">sum(list: list&lt;number&gt;): number
</code></pre>
<p>The parameter <code>list</code> can be passed as a list or as a sequence of elements.</p>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">sum([1,2,3])
// 6

sum(1,2,3)
// 6
</code></pre>
`},{name:"product(list)",description:`<p>Returns the product of the given list of numbers.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">product(list: list&lt;number&gt;): number
</code></pre>
<p>The parameter <code>list</code> can be passed as a list or as a sequence of elements.</p>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">product([2, 3, 4])
// 24

product(2, 3, 4)
// 24
</code></pre>
`},{name:"mean(list)",description:`<p>Returns the arithmetic mean (i.e. average) of the given list of numbers.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">mean(list: list&lt;number&gt;): number
</code></pre>
<p>The parameter <code>list</code> can be passed as a list or as a sequence of elements.</p>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">mean([1,2,3])
// 2

mean(1,2,3)
// 2
</code></pre>
`},{name:"median(list)",description:`<p>Returns the median element of the given list of numbers.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">median(list: list&lt;number&gt;): number
</code></pre>
<p>The parameter <code>list</code> can be passed as a list or as a sequence of elements.</p>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">median(8, 2, 5, 3, 4)
// 4

median([6, 1, 2, 3])
// 2.5
</code></pre>
`},{name:"stddev(list)",description:`<p>Returns the standard deviation of the given list of numbers.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">stddev(list: list&lt;number&gt;): number
</code></pre>
<p>The parameter <code>list</code> can be passed as a list or as a sequence of elements.</p>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">stddev(2, 4, 7, 5)
// 2.0816659994661326

stddev([2, 4, 7, 5])
// 2.0816659994661326
</code></pre>
`},{name:"mode(list)",description:`<p>Returns the mode of the given list of numbers.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">mode(list: list&lt;number&gt;): number
</code></pre>
<p>The parameter <code>list</code> can be passed as a list or as a sequence of elements.</p>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">mode(6, 3, 9, 6, 6)
// [6]

mode([6, 1, 9, 6, 1])
// [1, 6]
</code></pre>
`},{name:"all(list)",description:`<p>Returns <code>false</code> if any element of the given list is <code>false</code>. Otherwise, returns <code>true</code>.</p>
<p>If the given list is empty, it returns <code>true</code>.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">all(list: list&lt;boolean&gt;): boolean
</code></pre>
<p>The parameter <code>list</code> can be passed as a list or as a sequence of elements.</p>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">all([true,false])
// false

all(false,null,true)
// false
</code></pre>
<p>:::info
The function <code>all()</code> replaced the previous function <code>and()</code>. The previous function is deprecated and
should not be used anymore.
:::</p>
`},{name:"any(list)",description:`<p>Returns <code>true</code> if any element of the given list is <code>true</code>. Otherwise, returns <code>false</code>.</p>
<p>If the given list is empty, it returns <code>false</code>.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">any(list: list&lt;boolean&gt;): boolean
</code></pre>
<p>The parameter <code>list</code> can be passed as a list or as a sequence of elements.</p>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">any([false,true])
// true

any(false,null,true)
// true
</code></pre>
<p>:::info
The function <code>any()</code> replaced the previous function <code>or()</code>. The previous function is deprecated and
should not be used anymore.
:::</p>
`},{name:"sublist(list, start position)",description:`<p>Returns a partial list of the given value starting at <code>start position</code>.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">sublist(list: list, start position: number): list
</code></pre>
<p>The <code>start position</code> starts at the index <code>1</code>. The last position is <code>-1</code>.</p>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">sublist([1,2,3], 2)
// [2,3]
</code></pre>
`},{name:"sublist(list, start position, length)",description:`<p>Returns a partial list of the given value starting at <code>start position</code>.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">sublist(list: list, start position: number, length: number): list
</code></pre>
<p>The <code>start position</code> starts at the index <code>1</code>. The last position is <code>-1</code>.</p>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">sublist([1,2,3], 1, 2)
// [1,2]
</code></pre>
`},{name:"append(list, items)",description:`<p>Returns the given list with all <code>items</code> appended.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">append(list: list, items: Any): list
</code></pre>
<p>The parameter <code>items</code> can be a single element or a sequence of elements.</p>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">append([1], 2, 3)
// [1,2,3]
</code></pre>
`},{name:"concatenate(lists)",description:`<p>Returns a list that includes all elements of the given lists.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">concatenate(lists: list): list
</code></pre>
<p>The parameter <code>lists</code> is a sequence of lists.</p>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">concatenate([1,2],[3])
// [1,2,3]

concatenate([1],[2],[3])
// [1,2,3]
</code></pre>
`},{name:"insert before(list, position, newItem)",description:`<p>Returns the given list with <code>newItem</code> inserted at <code>position</code>.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">insert before(list: list, position: number, newItem: Any): list
</code></pre>
<p>The <code>position</code> starts at the index <code>1</code>. The last position is <code>-1</code>.</p>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">insert before([1,3],1,2)
// [2,1,3]
</code></pre>
`},{name:"remove(list, position)",description:`<p>Returns the given list without the element at <code>position</code>.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">remove(list: list, position: number): list
</code></pre>
<p>The <code>position</code> starts at the index <code>1</code>. The last position is <code>-1</code>.</p>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">remove([1,2,3], 2)
// [1,3]
</code></pre>
`},{name:"reverse(list)",description:`<p>Returns the given list in revered order.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">reverse(list: list): list
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">reverse([1,2,3])
// [3,2,1]
</code></pre>
`},{name:"index of(list, match)",description:`<p>Returns an ascending list of positions containing <code>match</code>.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">index of(list: list, match: Any): list&lt;number&gt;
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">index of([1,2,3,2],2)
// [2,4]
</code></pre>
`},{name:"union(list)",description:`<p>Returns a list that includes all elements of the given lists without duplicates.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">union(list: list): list
</code></pre>
<p>The parameter <code>list</code> is a sequence of lists.</p>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">union([1,2],[2,3])
// [1,2,3]
</code></pre>
`},{name:"distinct values(list)",description:`<p>Returns the given list without duplicates.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">distinct values(list: list): list
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">distinct values([1,2,3,2,1])
// [1,2,3]
</code></pre>
`},{name:"duplicate values(list)",description:`<p><em>Camunda Extension</em></p>
<p>Returns all duplicate values of the given list.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">duplicate values(list: list): list
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">duplicate values([1,2,3,2,1])
// [1,2]
</code></pre>
`},{name:"flatten(list)",description:`<p>Returns a list that includes all elements of the given list without nested lists.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">flatten(list: list): list
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">flatten([[1,2],[[3]], 4])
// [1,2,3,4]
</code></pre>
`},{name:"sort(list, precedes)",description:`<p>Returns the given list sorted by the <code>precedes</code> function.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">sort(list: list, precedes: function&lt;(Any, Any) -&gt; boolean&gt;): list
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">sort(list: [3,1,4,5,2], precedes: function(x,y) x &lt; y)
// [1,2,3,4,5]
</code></pre>
`},{name:"string join(list)",description:`<p>Joins a list of strings into a single string. This is similar to
Java&#39;s <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/stream/Collectors.html#joining(java.lang.CharSequence,java.lang.CharSequence,java.lang.CharSequence)">joining</a>
function.</p>
<p>If an item of the list is <code>null</code>, the item is ignored for the result string. If an item is
neither a string nor <code>null</code>, the function returns <code>null</code> instead of a string.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">string join(list: list&lt;string&gt;): string
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">string join([&quot;a&quot;,&quot;b&quot;,&quot;c&quot;])
// &quot;abc&quot;

string join([&quot;a&quot;,null,&quot;c&quot;])
// &quot;ac&quot;

string join([])
// &quot;&quot;
</code></pre>
`},{name:"string join(list, delimiter)",description:`<p>Joins a list of strings into a single string. This is similar to
Java&#39;s <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/stream/Collectors.html#joining(java.lang.CharSequence,java.lang.CharSequence,java.lang.CharSequence)">joining</a>
function.</p>
<p>If an item of the list is <code>null</code>, the item is ignored for the result string. If an item is
neither a string nor <code>null</code>, the function returns <code>null</code> instead of a string.</p>
<p>The resulting string contains a <code>delimiter</code> between each element.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">string join(list: list&lt;string&gt;, delimiter: string): string
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">string join([&quot;a&quot;], &quot;X&quot;)
// &quot;a&quot;

string join([&quot;a&quot;,&quot;b&quot;,&quot;c&quot;], &quot;, &quot;)
// &quot;a, b, c&quot;
</code></pre>
`},{name:"string join(list, delimiter, prefix, suffix)",description:`<p><em>Camunda Extension</em></p>
<p>Joins a list of strings into a single string. This is similar to
Java&#39;s <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/stream/Collectors.html#joining(java.lang.CharSequence,java.lang.CharSequence,java.lang.CharSequence)">joining</a>
function.</p>
<p>If an item of the list is <code>null</code>, the item is ignored for the result string. If an item is
neither a string nor <code>null</code>, the function returns <code>null</code> instead of a string.</p>
<p>The resulting string starts with <code>prefix</code>, contains a <code>delimiter</code> between each element, and ends
with <code>suffix</code>.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">string join(list: list&lt;string&gt;, delimiter: string, prefix: string, suffix: string): string
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">string join([&quot;a&quot;,&quot;b&quot;,&quot;c&quot;], &quot;, &quot;, &quot;[&quot;, &quot;]&quot;)
// &quot;[a, b, c]&quot;
</code></pre>
`},{name:"decimal(n, scale)",description:`<p>Rounds the given value at the given scale.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">decimal(n: number, scale: number): number
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">decimal(1/3, 2)
// .33

decimal(1.5, 0)
// 2
</code></pre>
`},{name:"floor(n)",description:`<p>Rounds the given value with rounding mode flooring.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">floor(n: number): number
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">floor(1.5)
// 1

floor(-1.5)
// -2
</code></pre>
`},{name:"floor(n, scale)",description:`<p>Rounds the given value with rounding mode flooring at the given scale.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">floor(n: number, scale: number): number
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">floor(-1.56, 1)
// -1.6
</code></pre>
`},{name:"ceiling(n)",description:`<p>Rounds the given value with rounding mode ceiling.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">ceiling(n: number): number
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">ceiling(1.5)
// 2

ceiling(-1.5)
// -1
</code></pre>
`},{name:"ceiling(n, scale)",description:`<p>Rounds the given value with rounding mode ceiling at the given scale.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">ceiling(n: number, scale: number): number
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">ceiling(-1.56, 1)
// -1.5
</code></pre>
`},{name:"round up(n, scale)",description:`<p>Rounds the given value with the rounding mode round-up at the given scale.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">round up(n: number, scale: number): number
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">round up(5.5)
// 6

round up(-5.5)
// -6

round up(1.121, 2)
// 1.13

round up(-1.126, 2)
// -1.13
</code></pre>
`},{name:"round down(n, scale)",description:`<p>Rounds the given value with the rounding mode round-down at the given scale.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">round down(n: number, scale: number): number
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">round down(5.5, 0)
// 5

round down (-5.5, 0)
// -5

round down (1.121, 2)
// 1.12

round down (-1.126, 2)
// -1.12
</code></pre>
`},{name:"round half up(n, scale)",description:`<p>Rounds the given value with the rounding mode round-half-up at the given scale.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">round half up(n: number, scale: number): number
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">round half up(5.5, 0)
// 6

round half up(-5.5, 0)
// -6

round half up(1.121, 2)
// 1.12

round half up(-1.126, 2)
// -1.13
</code></pre>
`},{name:"round half down(n, scale)",description:`<p>Rounds the given value with the rounding mode round-half-down at the given scale.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">round half down(n: number, scale: number): number
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">round half down (5.5, 0)
// 5

round half down (-5.5, 0)
// -5

round half down (1.121, 2)
// 1.12

round half down (-1.126, 2)
// -1.13
</code></pre>
`},{name:"abs(number)",description:`<p>Returns the absolute value of the given numeric value.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">abs(number: number): number
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">abs(10)
// 10

abs(-10)
// 10
</code></pre>
`},{name:"modulo(dividend, divisor)",description:`<p>Returns the remainder of the division of dividend by divisor.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">modulo(dividend: number, divisor: number): number
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">modulo(12, 5)
// 2
</code></pre>
`},{name:"sqrt(number)",description:`<p>Returns the square root of the given value.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">sqrt(number: number): number
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">sqrt(16)
// 4
</code></pre>
`},{name:"log(number)",description:`<p>Returns the natural logarithm (base e) of the given value.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">log(number: number): number
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">log(10)
// 2.302585092994046
</code></pre>
`},{name:"exp(number)",description:`<p>Returns the Euler\u2019s number e raised to the power of the given number .</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">exp(number: number): number
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">exp(5)
// 148.4131591025766
</code></pre>
`},{name:"odd(number)",description:`<p>Returns <code>true</code> if the given value is odd. Otherwise, returns <code>false</code>.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">odd(number: number): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">odd(5)
// true

odd(2)
// false
</code></pre>
`},{name:"even(number)",description:`<p>Returns <code>true</code> if the given is even. Otherwise, returns <code>false</code>.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">even(number: number): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">even(5)
// false

even(2)
// true
</code></pre>
`},{name:"random number()",description:`<p><em>Camunda Extension</em></p>
<p>Returns a random number between <code>0</code> and <code>1</code>.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">random number(): number
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">random number()
// 0.9701618132579795
</code></pre>
`},{name:"before(point1, point2)",description:`<p><strong>Function signature</strong></p>
<pre><code class="language-feel">before(point1: Any, point2: Any): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">before(1, 10)
// true

before(10, 1)
// false
</code></pre>
`},{name:"before(range, point)",description:`<p><strong>Function signature</strong></p>
<pre><code class="language-feel">before(range: range, point: Any): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">before([1..5], 10)
// true
</code></pre>
`},{name:"before(point, range)",description:`<p><strong>Function signature</strong></p>
<pre><code class="language-feel">before(point: Any, range: range): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">before(1, [2..5])
// true
</code></pre>
`},{name:"before(range1, range2)",description:`<p><strong>Function signature</strong></p>
<pre><code class="language-feel">before(range1: range, range2: range): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">before([1..5], [6..10])
// true

before([1..5),[5..10])
// true
</code></pre>
`},{name:"after(point1, point2)",description:`<p><strong>Function signature</strong></p>
<pre><code class="language-feel">after(point1: Any, point2: Any): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">after(10, 1)
// true

after(1, 10)
// false
</code></pre>
`},{name:"after(range, point)",description:`<p><strong>Function signature</strong></p>
<pre><code class="language-feel">after(range: range, point: Any): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">after([1..5], 10)
// false
</code></pre>
`},{name:"after(point, range)",description:`<p><strong>Function signature</strong></p>
<pre><code class="language-feel">after(point: Any, range: range): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">after(12, [2..5])
// true
</code></pre>
`},{name:"after(range1, range2)",description:`<p><strong>Function signature</strong></p>
<pre><code class="language-feel">after(range1: range, range2: range): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">after([6..10], [1..5])
// true

after([5..10], [1..5))
// true
</code></pre>
`},{name:"meets(range1, range2)",description:`<p><strong>Function signature</strong></p>
<pre><code class="language-feel">meets(range1: range, range2: range): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">meets([1..5], [5..10])
// true

meets([1..3], [4..6])
// false

meets([1..3], [3..5])
// true

meets([1..5], (5..8])
// false
</code></pre>
`},{name:"met by(range1, range2)",description:`<p><strong>Function signature</strong></p>
<pre><code class="language-feel">met by(range1: range, range2: range): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">met by([5..10], [1..5])
// true

met by([3..4], [1..2])
// false

met by([3..5], [1..3])
// true

met by((5..8], [1..5))
// false

met by([5..10], [1..5))
// false
</code></pre>
`},{name:"overlaps(range1, range2)",description:`<p><strong>Function signature</strong></p>
<pre><code class="language-feel">overlaps(range1: range, range2: range): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">overlaps([5..10], [1..6])
// true

overlaps((3..7], [1..4])
// true

overlaps([1..3], (3..6])
// false

overlaps((5..8], [1..5))
// false

overlaps([4..10], [1..5))
// true
</code></pre>
`},{name:"overlaps before(range1, range2)",description:`<p><strong>Function signature</strong></p>
<pre><code class="language-feel">overlaps before(range1: range, range2: range): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">overlaps before([1..5], [4..10])
// true

overlaps before([3..4], [1..2])
// false

overlaps before([1..3], (3..5])
// false

overlaps before([1..5), (3..8])
// true

overlaps before([1..5), [5..10])
// false
</code></pre>
`},{name:"overlaps after(range1, range2)",description:`<p><strong>Function signature</strong></p>
<pre><code class="language-feel">overlaps after(range1: range, range2: range): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">overlaps after([4..10], [1..5])
// true

overlaps after([3..4], [1..2])
// false

overlaps after([3..5], [1..3))
// false

overlaps after((5..8], [1..5))
// false

overlaps after([4..10], [1..5))
// true
</code></pre>
`},{name:"finishes(point, range)",description:`<p><strong>Function signature</strong></p>
<pre><code class="language-feel">finishes(point: Any, range: range): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">finishes(5, [1..5])
// true

finishes(10, [1..7])
// false
</code></pre>
`},{name:"finishes(range1, range2)",description:`<p><strong>Function signature</strong></p>
<pre><code class="language-feel">finishes(range1: range, range2: range): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">finishes([3..5], [1..5])
// true

finishes((1..5], [1..5))
// false

finishes([5..10], [1..10))
// false
</code></pre>
`},{name:"finished by(range, point)",description:`<p><strong>Function signature</strong></p>
<pre><code class="language-feel">finished by(range: range, point: Any): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">finished by([5..10], 10)
// true

finished by([3..4], 2)
// false
</code></pre>
`},{name:"finished by(range1, range2)",description:`<p><strong>Function signature</strong></p>
<pre><code class="language-feel">finished by(range1: range, range2: range): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">finished by([1..5], [3..5])
// true

finished by((5..8], [1..5))
// false

finished by([5..10], (1..10))
// false
</code></pre>
`},{name:"includes(range, point)",description:`<p><strong>Function signature</strong></p>
<pre><code class="language-feel">includes(range: range, point: Any): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">includes([5..10], 6)
// true

includes([3..4], 5)
// false
</code></pre>
`},{name:"includes(range1, range2)",description:`<p><strong>Function signature</strong></p>
<pre><code class="language-feel">includes(range1: range, range2: range): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">includes([1..10], [4..6])
// true

includes((5..8], [1..5))
// false

includes([1..10], [1..5))
// true
</code></pre>
`},{name:"during(point, range)",description:`<p><strong>Function signature</strong></p>
<pre><code class="language-feel">during(point: Any, range: range): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">during(5, [1..10])
// true

during(12, [1..10])
// false

during(1, (1..10])
// false
</code></pre>
`},{name:"during(range1, range2)",description:`<p><strong>Function signature</strong></p>
<pre><code class="language-feel">during(range1: range, range2: range): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">during([4..6], [1..10))
// true

during((1..5], (1..10])
// true
</code></pre>
`},{name:"starts(point, range)",description:`<p><strong>Function signature</strong></p>
<pre><code class="language-feel">starts(point: Any, range: range): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">starts(1, [1..5])
// true

starts(1, (1..8])
// false
</code></pre>
`},{name:"starts(range1, range2)",description:`<p><strong>Function signature</strong></p>
<pre><code class="language-feel">starts(range1: range, range2: range): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">starts((1..5], [1..5])
// false

starts([1..10], [1..5])
// false

starts((1..5), (1..10))
// true
</code></pre>
`},{name:"started by(range, point)",description:`<p><strong>Function signature</strong></p>
<pre><code class="language-feel">started by(range: range, point: Any): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">started by([1..10], 1)
// true

started by((1..10], 1)
// false
</code></pre>
`},{name:"started by(range1, range2)",description:`<p><strong>Function signature</strong></p>
<pre><code class="language-feel">started by(range1: range, range2: range): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">started by([1..10], [1..5])
// true

started by((1..10], [1..5))
// false

started by([1..10], [1..10))
// true
</code></pre>
`},{name:"coincides(point1, point2)",description:`<p><strong>Function signature</strong></p>
<pre><code class="language-feel">coincides(point1: Any, point2: Any): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">coincides(5, 5)
// true

coincides(3, 4)
// false
</code></pre>
`},{name:"coincides(range1, range2)",description:`<p><strong>Function signature</strong></p>
<pre><code class="language-feel">coincides(range1: range, range2: range): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">coincides([1..5], [1..5])
// true

coincides((1..5], [1..5))
// false

coincides([1..5], [2..6])
// false
</code></pre>
`},{name:"substring(string, start position)",description:`<p>Returns a substring of the given value starting at <code>start position</code>.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">substring(string: string, start position: number): string
</code></pre>
<p>The <code>start position</code> starts at the index <code>1</code>. The last position is <code>-1</code>.</p>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">substring(&quot;foobar&quot;, 3)
// &quot;obar&quot;
</code></pre>
`},{name:"substring(string, start position, length)",description:`<p>Returns a substring of the given value starting at <code>start position</code>.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">substring(string: string, start position: number, length: number): string
</code></pre>
<p>The <code>start position</code> starts at the index <code>1</code>. The last position is <code>-1</code>.</p>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">substring(&quot;foobar&quot;, 3, 3)
// &quot;oba&quot;
</code></pre>
`},{name:"string length(string)",description:`<p>Returns the number of characters in the given value.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">string length(string: string): number
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">string length(&quot;foo&quot;)
// 3
</code></pre>
`},{name:"upper case(string)",description:`<p>Returns the given value with all characters are uppercase.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">upper case(string: string): string
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">upper case(&quot;aBc4&quot;)
// &quot;ABC4&quot;
</code></pre>
`},{name:"lower case(string)",description:`<p>Returns the given value with all characters are lowercase.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">lower case(string: string): string
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">lower case(&quot;aBc4&quot;)
// &quot;abc4&quot;
</code></pre>
`},{name:"substring before(string, match)",description:`<p>Returns a substring of the given value that contains all characters before <code>match</code>.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">substring before(string: string, match: string): string
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">substring before(&quot;foobar&quot;, &quot;bar&quot;)
// &quot;foo&quot;
</code></pre>
`},{name:"substring after(string, match)",description:`<p>Returns a substring of the given value that contains all characters after <code>match</code>.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">substring after(string: string, match: string): string
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">substring after(&quot;foobar&quot;, &quot;ob&quot;)
// &quot;ar&quot;
</code></pre>
`},{name:"contains(string, match)",description:`<p>Returns <code>true</code> if the given value contains the substring <code>match</code>. Otherwise, returns <code>false</code>.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">contains(string: string, match: string): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">contains(&quot;foobar&quot;, &quot;of&quot;)
// false
</code></pre>
`},{name:"starts with(string, match)",description:`<p>Returns <code>true</code> if the given value starts with the substring <code>match</code>. Otherwise, returns <code>false</code>.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">starts with(string: string, match: string): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">starts with(&quot;foobar&quot;, &quot;fo&quot;)
// true
</code></pre>
`},{name:"ends with(string, match)",description:`<p>Returns <code>true</code> if the given value ends with the substring <code>match</code>. Otherwise, returns <code>false</code>.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">ends with(string: string, match: string): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">ends with(&quot;foobar&quot;, &quot;r&quot;)
// true
</code></pre>
`},{name:"matches(input, pattern)",description:`<p>Returns <code>true</code> if the given value matches the <code>pattern</code>. Otherwise, returns <code>false</code>.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">matches(input: string, pattern: string): boolean
</code></pre>
<p>The <code>pattern</code> is a string that contains a regular expression.</p>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">matches(&quot;foobar&quot;, &quot;^fo*bar&quot;)
// true
</code></pre>
`},{name:"matches(input, pattern, flags)",description:`<p>Returns <code>true</code> if the given value matches the <code>pattern</code>. Otherwise, returns <code>false</code>.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">matches(input: string, pattern: string, flags: string): boolean
</code></pre>
<p>The <code>pattern</code> is a string that contains a regular expression.</p>
<p>The <code>flags</code> can contain one or more of the following characters:</p>
<ul>
<li><code>s</code> (dot-all)</li>
<li><code>m</code> (multi-line)</li>
<li><code>i</code> (case insensitive)</li>
<li><code>x</code> (comments)</li>
</ul>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">matches(&quot;FooBar&quot;, &quot;foo&quot;, &quot;i&quot;)
// true
</code></pre>
`},{name:"replace(input, pattern, replacement)",description:`<p>Returns the resulting string after replacing all occurrences of <code>pattern</code> with <code>replacement</code>.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">replace(input: string, pattern: string, replacement: string): string
</code></pre>
<p>The <code>pattern</code> is a string that contains a regular expression.</p>
<p>The <code>replacement</code> can access the match groups by using <code>$</code> and the number of the group, for example,
<code>$1</code> to access the first group.</p>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">replace(&quot;abcd&quot;, &quot;(ab)|(a)&quot;, &quot;[1=$1][2=$2]&quot;)
// &quot;[1=ab][2=]cd&quot;

replace(&quot;0123456789&quot;, &quot;(\\d{3})(\\d{3})(\\d{4})&quot;, &quot;($1) $2-$3&quot;)
// &quot;(012) 345-6789&quot;
</code></pre>
`},{name:"replace(input, pattern, replacement, flags)",description:`<p>Returns the resulting string after replacing all occurrences of <code>pattern</code> with <code>replacement</code>.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">replace(input: string, pattern: string, replacement: string, flags: string): string
</code></pre>
<p>The <code>pattern</code> is a string that contains a regular expression.</p>
<p>The <code>replacement</code> can access the match groups by using <code>$</code> and the number of the group, for example,
<code>$1</code> to access the first group.</p>
<p>The <code>flags</code> can contain one or more of the following characters:</p>
<ul>
<li><code>s</code> (dot-all)</li>
<li><code>m</code> (multi-line)</li>
<li><code>i</code> (case insensitive)</li>
<li><code>x</code> (comments)</li>
</ul>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">replace(&quot;How do you feel?&quot;, &quot;Feel&quot;, &quot;FEEL&quot;, &quot;i&quot;)
// &quot;How do you FEEL?&quot;
</code></pre>
`},{name:"split(string, delimiter)",description:`<p>Splits the given value into a list of substrings, breaking at each occurrence of the <code>delimiter</code> pattern.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">split(string: string, delimiter: string): list&lt;string&gt;
</code></pre>
<p>The <code>delimiter</code> is a string that contains a regular expression.</p>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">split(&quot;John Doe&quot;, &quot;\\s&quot; )
// [&quot;John&quot;, &quot;Doe&quot;]

split(&quot;a;b;c;;&quot;, &quot;;&quot;)
// [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;&quot;, &quot;&quot;]
</code></pre>
`},{name:"extract(string, pattern)",description:`<p><em>Camunda Extension</em></p>
<p>Returns all matches of the pattern in the given string. Returns an empty list if the pattern doesn&#39;t
match.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">extract(string: string, pattern: string): list&lt;string&gt;
</code></pre>
<p>The <code>pattern</code> is a string that contains a regular expression.</p>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">extract(&quot;references are 1234, 1256, 1378&quot;, &quot;12[0-9]*&quot;)
// [&quot;1234&quot;,&quot;1256&quot;]
</code></pre>
`},{name:"now()",description:`<p>Returns the current date and time including the timezone.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">now(): date and time
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">now()
// date and time(&quot;2020-07-31T14:27:30@Europe/Berlin&quot;)
</code></pre>
`},{name:"today()",description:`<p>Returns the current date.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">today(): date
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">today()
// date(&quot;2020-07-31&quot;)
</code></pre>
`},{name:"day of week(date)",description:`<p>Returns the day of the week according to the Gregorian calendar. Note that it always returns the English name of the day.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">day of week(date: date): string
</code></pre>
<pre><code class="language-feel">day of week(date: date and time): string
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">day of week(date(&quot;2019-09-17&quot;))
// &quot;Tuesday&quot;

day of week(date and time(&quot;2019-09-17T12:00:00&quot;))
// &quot;Tuesday&quot;
</code></pre>
`},{name:"day of year(date)",description:`<p>Returns the Gregorian number of the day within the year.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">day of year(date: date): number
</code></pre>
<pre><code class="language-feel">day of year(date: date and time): number
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">day of year(date(&quot;2019-09-17&quot;))
// 260

day of year(date and time(&quot;2019-09-17T12:00:00&quot;))
// 260
</code></pre>
`},{name:"week of year(date)",description:`<p>Returns the Gregorian number of the week within the year, according to ISO 8601.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">week of year(date: date): number
</code></pre>
<pre><code class="language-feel">week of year(date: date and time): number
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">week of year(date(&quot;2019-09-17&quot;))
// 38

week of year(date and time(&quot;2019-09-17T12:00:00&quot;))
// 38
</code></pre>
`},{name:"month of year(date)",description:`<p>Returns the month of the year according to the Gregorian calendar. Note that it always returns the English name of the month.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">month of year(date: date): string
</code></pre>
<pre><code class="language-feel">month of year(date: date and time): string
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">month of year(date(&quot;2019-09-17&quot;))
// &quot;September&quot;

month of year(date and time(&quot;2019-09-17T12:00:00&quot;))
// &quot;September&quot;
</code></pre>
`},{name:"abs(n)",description:`<p>Returns the absolute value of a given duration.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">abs(n: days and time duration): days and time duration
</code></pre>
<pre><code class="language-feel">abs(n: years and months duration): years and months duration
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">abs(duration(&quot;-PT5H&quot;))
// &quot;duration(&quot;PT5H&quot;)&quot;

abs(duration(&quot;PT5H&quot;))
// &quot;duration(&quot;PT5H&quot;)&quot;

abs(duration(&quot;-P2M&quot;))
// duration(&quot;P2M&quot;)
</code></pre>
`},{name:"last day of month(date)",description:`<p><em>Camunda Extension</em></p>
<p>Takes the month of the given date or date-time value and returns the last day of this month.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">last day of month(date: date): date
</code></pre>
<pre><code class="language-feel">last day of month(date: date and time): date
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">last day of month(date(&quot;2022-10-01&quot;))
// date(&quot;2022-10-31&quot;))

last day of month(date and time(&quot;2022-10-16T12:00:00&quot;))
// date(&quot;2022-10-31&quot;))
</code></pre>
`}];const G2=I9.map(n=>{const e=n.name.match(/^([\w\s]+)\((.*)\)$/),t=e[1],r=e[2].split(", ").map(s=>`\${${s}}`).join(", ");return Cp(`${t}(${r})`,{label:n.name,type:"function",info:()=>Es(`<div class="description">${n.description}<div>`),boost:-1})});var N9=n=>{let e=Nu(n.state).resolve(n.pos,-1),t=e.nextSibling;return jv(e)||t&&t.from===n.pos&&jv(t)?n.explicit?{from:n.pos,options:G2}:null:e.parent&&e.parent.name!=="VariableName"||Vv(e)?null:{from:e.from,options:G2}};const Wv=$s.define();var B9=n=>{const e=n.state.facet(Wv)[0],t=Nu(n.state).resolve(n.pos,-1);if(!Vv(t))return;const i=R9(t),r=t===i?n.pos:t.from,s=GD(i,n);let o=e;for(var l=0;l<s.length-1;l++){var h=o.find(y=>y.name===s[l].name);if(!h)return null;if(h.isList!=="optional"&&!!h.isList!==s[l].isList)return;o=h.entries}return o?(o=o.map(y=>({label:y.name,type:"variable",info:y.info,detail:y.detail})),{from:r,options:o}):void 0};function R9(n){for(;n;){if(n.name==="PathExpression")return n;n=n.parent}}function GD(n,e){let t=[];for(let i=n.firstChild;i;i=i.nextSibling)i.name==="PathExpression"?t.push(...GD(i,e)):i.name==="FilterExpression"?t.push(...L9(i,e)):t.push({name:K2(i,e),isList:!1});return t}function L9(n,e){const t=n.firstChild;if(t.name==="PathExpression"){const i=GD(t,e),r=i[i.length-1];return r.isList=!0,i}return[{name:K2(t,e),isList:!0}]}function K2(n,e){return e.state.sliceDoc(n.from,n.to)}var $9=n=>{const t=n.state.facet(Wv)[0].map(l=>({label:l.name,type:"variable",info:l.info,detail:l.detail}));let i=Nu(n.state).resolve(n.pos,-1),r=i.nextSibling;if(jv(i)||r&&r.from===n.pos&&jv(r))return n.explicit?{from:n.pos,options:t}:null;const o={from:i.from,options:t};return i.parent&&i.parent.name!=="VariableName"||Vv(i)?null:o};function j9(){return[K6({override:[$9,N9,AD(A9.map(n=>qi(Jt({},n),{boost:-1}))),B9,...T9]})]}function V9(){return new N8(YD,[])}var W9=[l5(M9())];const H9=As.theme({"& .cm-content":{padding:"0px"},"& .cm-line":{padding:"0px"},"&.cm-editor.cm-focused":{outline:"none"},"& .cm-completionInfo":{whiteSpace:"pre-wrap",overflow:"hidden",textOverflow:"ellipsis"},"& .cm-completionInfo > *":{whiteSpace:"normal"},"& .cm-completionInfo ul":{margin:0,paddingLeft:"15px"},"& .cm-completionInfo pre":{marginBottom:0,whiteSpace:"pre-wrap"},"& .cm-completionInfo p":{marginTop:0},"& .cm-completionInfo p:not(:last-of-type)":{marginBottom:0}}),U9=As.baseTheme({"& .variableName":{color:"#10f"},"& .number":{color:"#164"},"& .string":{color:"#a11"},"& .bool":{color:"#219"},"& .function":{color:"#aa3731",fontWeight:"bold"},"& .control":{color:"#708"}}),z9=Q8(wv.define([{tag:Vi.variableName,class:"variableName"},{tag:Vi.name,class:"variableName"},{tag:Vi.number,class:"number"},{tag:Vi.string,class:"string"},{tag:Vi.bool,class:"bool"},{tag:Vi.function(Vi.variableName),class:"function"},{tag:Vi.function(Vi.special(Vi.variableName)),class:"function"},{tag:Vi.controlKeyword,class:"control"},{tag:Vi.operatorKeyword,class:"control"}]));var q9=[H9,U9,z9];const Z2=new eg;function _g({extensions:n=[],container:e,contentAttributes:t={},tooltipContainer:i,onChange:r=()=>{},onKeyDown:s=()=>{},onLint:o=()=>{},readOnly:l=!1,value:h="",variables:p=[]}){const y=As.updateListener.of(he=>{he.docChanged&&r(he.state.doc.toString())}),w=As.updateListener.of(he=>{const ye=he.transactions.flatMap(et=>et.effects).filter(et=>et.is(Pv));if(!ye.length)return;const Le=ye.flatMap(et=>et.value);o(Le)}),F=As.domEventHandlers({keydown:s});typeof i=="string"&&(i=document.querySelector(i));const j=i?s8({tooltipSpace:function(){return i.getBoundingClientRect()}}):[],Q=[Z2.of(Wv.of(p)),j9(),t6(),y,V6(),As.contentAttributes.of(t),U8(),F,iv.of([...J4]),V9(),W9,w,j,q9,...n];return l&&Q.push(As.editable.of(!1)),this._cmEditor=new As({state:ba.create({doc:h,extensions:Q}),parent:e}),this}_g.prototype.setValue=function(n){this._cmEditor.dispatch({changes:{from:0,to:this._cmEditor.state.doc.length,insert:n}})},_g.prototype.focus=function(n){const e=this._cmEditor;if(e.contentDOM.focus(),e.focus(),typeof n=="number"){const t=e.state.doc.length;e.dispatch({selection:{anchor:n<=t?n:t}})}},_g.prototype.getSelection=function(){return this._cmEditor.state.selection},_g.prototype.setVariables=function(n){this._cmEditor.dispatch({effects:Z2.reconfigure(Wv.of(n))})};let Hv=class extends br{constructor(t,i){super(t,i);$n(this,"handleMouseEvent",t=>{t.stopPropagation()});$n(this,"handleKeyDownCapture",t=>{if(t.key==="Enter"){if(X9(this.node)){t.triggeredFromAutocomplete=!0;return}this.props.ctrlForNewline&&!Q9(t)&&t.preventDefault(),this.props.singleLine&&t.preventDefault()}});$n(this,"handleKeyDown",t=>{["Enter","Escape"].includes(t.key)&&t.triggeredFromAutocomplete&&t.stopPropagation()});$n(this,"handleChange",t=>{const{onInput:i}=this.props;this.setState({value:t}),i&&i(t)});$n(this,"setNode",t=>{this.node=t});this.node=null,this.editor=null,this.state={value:t.value}}componentDidMount(){this.editor=new _g({contentAttributes:{"aria-label":this.props.label},container:this.node,onChange:this.handleChange,value:this.state.value,variables:this.props.variables||[]}),this.node.addEventListener("mousedown",this.handleMouseEvent),this.node.addEventListener("keydown",this.handleKeyDownCapture,!0),this.node.addEventListener("keydown",this.handleKeyDown),this.props.autoFocus&&this.editor.focus(this.state.value.length)}componentDidUpdate(t){const{value:i}=this.props;t.value!==i&&i!==this.state.value&&this.setState({value:i},()=>{this.editor.setValue(i)}),Y9(t.variables,this.props.variables)||this.editor.setVariables(this.props.variables)}componentWillUnmount(){this.node.removeEventListener("mousedown",this.handleMouseEvent),this.node.removeEventListener("keydown",this.handleKeyDownCapture,!0),this.node.removeEventListener("keydown",this.handleKeyDown)}render(){return Re(1,"div",["literal-expression",this.props.className||""].join(" "),null,1,{onClick:this.handleMouseEvent,onFocusIn:this.props.onFocus,onFocusOut:this.props.onBlur},null,this.setNode)}};function Q9(n){return n.metaKey||n.ctrlKey}function X9(n){return n.querySelector(".cm-tooltip-autocomplete")}function Y9(n,e){return JSON.stringify(n)===JSON.stringify(e)}class G9 extends br{constructor(t,i){super(t,i);$n(this,"handleKeyDown",t=>{t.key==="Enter"&&t.stopPropagation()});this.translate=i.injector.get("translate"),this.expressionLanguages=i.injector.get("expressionLanguages",!1),this.variableResolver=i.injector.get("variableResolver",!1),this.handleValue=r=>{let s={text:r};this.handleChange(s)},this.handleLabelChange=r=>{var s=r||void 0;this.handleChange({label:s})}}handleChange(t){var{onChange:i}=this.props;typeof i=="function"&&i(t)}getExpressionEditorComponent(){return this.expressionLanguages&&this.expressionLanguages.getDefault("inputCell").value!=="feel"?gf:Hv}_getVariables(){return this.variableResolver&&this.variableResolver.getVariables(this.props.element)}render(){const{label:t,text:i}=this.props,r=this.getExpressionEditorComponent(),s=this._getVariables();return Re(1,"div","context-menu-container ref-input-editor input-edit",[Re(1,"div","dms-form-control",jn(2,gf,{label:this.translate("Input label"),className:"dms-input-label",value:t||"",placeholder:this.translate("Input"),singleLine:!0,onInput:this.handleLabelChange}),2),Re(1,"div","dms-form-control",[Re(1,"label","dms-label",this.translate("Expression"),0),jn(2,r,{label:this.translate("Input expression"),placeholder:this.translate("Enter expression"),className:["ref-text","dms-input"].join(" "),onInput:this.handleValue,value:i||"",variables:s})],4)],4,{onKeyDown:this.handleKeyDown})}}class J2 extends br{constructor(t,i){super(t,i);$n(this,"persistChanges",()=>{const{input:t}=this.props.context,{unsaved:i}=this.state;if(!i)return;const l=i,{label:r}=l,s=Zu(l,["label"]);var o={};"label"in i&&(o.label=r),K9(s)&&(o.inputExpression=s),this.modeling.updateProperties(t,o),this.setState({unsaved:!1})});$n(this,"handleChange",t=>{this.setState({unsaved:Jt(Jt({},this.state.unsaved),t)},this.persistChanges)});this.state={},Uu(this),this.persistChanges=this.debounceInput(this.persistChanges)}getValue(t){let{input:i}=this.props.context;const{unsaved:r}=this.state;let s=i;return t==="text"&&(s=s.inputExpression),r&&t in r?r[t]:s.get(t)}render(){return jn(2,G9,{label:this.getValue("label"),text:this.getValue("text"),element:this.props.context.input,onChange:this.handleChange})}}J2.$inject=["debounceInput","modeling","injector"];function K9(n){return Object.keys(n).length}class e_{constructor(e,t,i,r){e.onGetComponent("cell",({cellType:s})=>{if(s==="input-header")return iL}),e.onGetComponent("context-menu",(s={})=>{if(s.contextMenuType==="input-edit")return J2}),i.on("input.edit",({event:s,input:o})=>{const{target:l}=s,h=ti(l,"th",!0),{left:p,top:y}=h.getBoundingClientRect();t.open({x:p,y,align:"bottom-right"},{contextMenuType:"input-edit",input:o})})}}e_.$inject=["components","contextMenu","eventBus","renderer"];class wl extends br{constructor(t,i){super(t,i);$n(this,"onChange",t=>{this.setState({value:t});const{onChange:i}=this.props;typeof i=="function"&&i(t)});$n(this,"onInputClick",t=>{t.preventDefault(),t.stopPropagation(),this.setOptionsVisible(!this.state.optionsVisible),this.focusInput()});$n(this,"onInput",t=>{const{value:i}=t.target;this.onChange(i)});$n(this,"onOptionClick",(t,i)=>{i.preventDefault(),i.stopPropagation(),this.setOptionsVisible(!1),this.onChange(t),this.focusInput()});$n(this,"onFocusChanged",t=>{this.checkClose(t.target)});$n(this,"onGlobalClick",t=>{this.checkClose(t.target)});$n(this,"onKeyDown",t=>{const{optionsVisible:i}=this.state;var r=t.which;(r===40||r===38)&&(t.stopPropagation(),t.preventDefault(),i?this.select(r===40?1:-1):this.setOptionsVisible(!0)),i&&(r===13||r===27)&&(t.stopPropagation(),t.preventDefault(),this.setOptionsVisible(!1))});$n(this,"onKeyboard",t=>{const{optionsVisible:i}=this.state;if(i&&t===27)return this.setOptionsVisible(!1),!0});Uu(this);const{value:r}=t;this.state={value:r,optionsVisible:!1},this._portalEl=null}componentDidMount(){document.addEventListener("mousedown",this.onGlobalClick),document.addEventListener("focusin",this.onFocusChanged),this.keyboard.addListener(this.onKeyboard)}componentWillUnmount(){document.removeEventListener("focusin",this.onFocusChanged),document.removeEventListener("mousedown",this.onGlobalClick),this.keyboard.removeListener(this.onKeyboard),this.removePortalEl()}componentWillReceiveProps(t){const{value:i}=t;this.setState({value:i})}componentWillUpdate(t,i){const{optionsVisible:r}=i;r?this._portalEl||this.addPortalEl():this._portalEl&&this.removePortalEl()}componentDidUpdate(){const{optionsVisible:t}=this.state;if(!t||!this.inputNode)return;const i=this.getOptionsBounds();ee(this._portalEl.style,i)}getOptionsBounds(){const t=this.renderer.getContainer(),{top:i,left:r,bottom:s}=t.getBoundingClientRect(),{top:o,left:l,width:h,height:p,bottom:y}=this.inputNode.getBoundingClientRect(),w=o+p-i+t.scrollTop,F=l-r+t.scrollLeft,j={top:`${w}px`,left:`${F}px`,width:`${h}px`,"max-height":`calc(100% - ${w}px)`};if(s-y<p){const Q=s-o;j.bottom=`${Q}px`,j["max-height"]=`calc(100% - ${Q})`,delete j.top}return j}addPortalEl(){this._portalEl=Es('<div class="dms-select-options"></div>'),this.renderer.getContainer().appendChild(this._portalEl),this._portalEl.addEventListener("mousedown",t_)}removePortalEl(){this._portalEl&&(this._portalEl.removeEventListener("mousedown",t_),Li(this._portalEl),this._portalEl=null)}focusInput(){const t=this.inputNode;t.focus(),"selectionStart"in t&&(t.selectionStart=1e5)}checkClose(t){this._portalEl&&!this._portalEl.contains(t)&&!this.parentNode.contains(t)&&this.setOptionsVisible(!1)}select(t){const{options:i}=this.props,{value:r}=this.state;if(!i)return;const s=i.filter(p=>p.value===r)[0],o=s?i.indexOf(s):-1,l=o===-1?t===1?0:i.length-1:(o+t)%i.length,h=i[l<0?i.length+l:l];this.onChange(h.value)}setOptionsVisible(t){this.setState({optionsVisible:t})}renderOptions(t,i){return Re(1,"div","options",t.map(r=>Re(1,"div",["option",i===r?"active":""].join(" "),r.label,0,{"data-value":r.value,onClick:s=>this.onOptionClick(r.value,s)})),0)}render(){const{className:t,label:i,id:r,options:s,noInput:o,title:l}=this.props,{optionsVisible:h,value:p}=this.state,y=s?s.filter(F=>F.value===p)[0]:!1,w=y?y.label:p;return Re(1,"div",[t||"","dms-input-select"].join(" "),[o?Re(1,"div","dms-input",w,0,{"aria-label":i,tabindex:"0",onKeyDown:this.onKeyDown},null,F=>this.inputNode=F):Re(64,"input","dms-input",null,1,{"aria-label":i,onInput:this.onInput,onKeyDown:this.onKeyDown,spellcheck:"false",type:"text",value:p,id:r},null,F=>this.inputNode=F),Re(1,"span",["dms-input-select-icon",h?"dmn-icon-up":"dmn-icon-down"].join(" ")),h&&ly(this.renderOptions(s,y),this._portalEl)],0,{title:l,onClick:this.onInputClick},null,F=>this.parentNode=F)}}wl.$inject=["keyboard","renderer"];function t_(n){n.stopPropagation()}class Z9 extends br{constructor(t,i){super(t);$n(this,"onTypeChange",t=>{const i=this.getElement(),r=Mt(i,"dmn:LiteralExpression")?i.$parent:i;let s;$i(r)?s={inputExpression:{typeRef:t}}:Ir(r)&&(s={typeRef:t}),this._modeling.updateProperties(r,s)});this._translate=i.injector.get("translate"),this._modeling=i.injector.get("modeling"),this._dataTypes=i.injector.get("dataTypes")}getElement(){return this.props.context.input||this.props.context.output}render(){const t=this.getElement(),i=(Mt(t,"dmn:InputClause")?t.inputExpression:t).typeRef,r=this._dataTypes.getAll().map(o=>({label:this._translate(o),value:o})),s=this._translate("Type");return Re(1,"div","type-ref-edit context-menu-container",Re(1,"div","dms-form-control",[Re(1,"label","dms-label",[s,bo(":")],0),jn(2,wl,{className:"type-ref-edit-select",label:s,onChange:this.onTypeChange,options:r,value:i})],4),2)}}const J9=750;class n_{constructor(e){e.onGetComponent("context-menu",J9,(t={})=>{const{contextMenuType:i}=t;if(i==="input-edit"||i==="output-edit")return Z9})}}n_.$inject=["components"];var ej={__depends__:[yd,P0],__init__:["typeRefEditingProvider"],typeRefEditingProvider:["type",n_]};class i_ extends va{constructor(e,t){super(e),this.postExecuted("element.updateProperties",i=>{const{element:r,properties:s}=i.context,o=$i(r)?s.inputExpression:s;if(o&&o.typeRef&&o.typeRef!=="string"){const l=Mt(r,"dmn:LiteralExpression")?r.$parent:r;t.editAllowedValues(l,null)}})}}i_.$inject=["eventBus","modeling"];const tj="radio",nj="remove dmn-icon-clear";class r_ extends br{constructor(t,i){super(t,i);$n(this,"getRemoveClickHandler",t=>i=>{i.stopPropagation(),this.removeItem(t)});$n(this,"getToggleClickHandler",t=>i=>{i.stopPropagation(),this.toggleItem(t)});$n(this,"removeItem",t=>{const{onChange:i}=this.props,r=this.state.items.filter(s=>s!==t);this.setState({items:r}),i&&i(r)});$n(this,"toggleItem",t=>{const{onChange:i,type:r}=this.props,s=this.state.items.map(o=>(o===t?o.isChecked=!o.isChecked:r===tj&&(o.isChecked=!1),o));this.setState({items:s}),i&&i(s)});const{items:r}=t;this.state={items:r}}componentWillReceiveProps(t){const{items:i}=t;this.setState({items:i})}render(){const{className:t,items:i,type:r,labelComponent:s}=this.props,o=["dms-list-component"];t&&o.push(t);const l=uo(i,"group"),h=ij(l);return Re(1,"div",o.join(" "),h.map(p=>{const y=p[0],w=p[1];return Re(1,"div","group",[s&&s(y)||Re(1,"h4","dms-heading",y,0),Re(1,"ul","items no-wrap",w.map(F=>Re(1,"li","item",[r&&Re(64,"input","item-toggle",null,1,{type:r,checked:F.isChecked,onClick:this.getToggleClickHandler(F)}),bo("\xA0"),F.value,F.isRemovable&&Re(1,"span",nj,null,1,{title:"Remove item",onClick:this.getRemoveClickHandler(F)})],0)),0)],0)}),0)}}function ij(n){const e=[];for(let t in n)e.push([t,n[t]]);return e}class Qc extends br{constructor(e,t){super(e,t);const{validate:i,value:r}=e,s=i?i(r||""):void 0;this.state={validationWarning:s,value:r},this.onInput=this.onInput.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onKeyUp=this.onKeyUp.bind(this)}componentWillReceiveProps(e){const{validate:t,value:i}=e,r=t?t(i||""):void 0;this.setState({validationWarning:r,value:i})}onInput(e){const{onInput:t,validate:i}=this.props,r=i?i(e):void 0;this.setState({validationWarning:r,value:e}),typeof t=="function"&&t&&t({isValid:!r,value:e})}onKeyDown(e){const{target:t}=e,{value:i}=t,{onKeyDown:r,validate:s}=this.props,o=s?s(i):void 0;typeof r=="function"&&r({isValid:!o,value:i,event:e})}onKeyUp(e){const{target:t}=e,{value:i}=t,{onKeyUp:r,validate:s}=this.props,o=s?s(i):void 0;typeof r=="function"&&r({isValid:!o,value:i,event:e})}render(){const{placeholder:e,type:t,className:i,label:r}=this.props,{validationWarning:s,value:o}=this.state,l=["dms-validated-input",i].join(" "),h=[];return s&&h.push("invalid"),Re(1,"div",l,[jn(2,Hh,{className:h,label:r,onInput:this.onInput,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,placeholder:e||"",type:t,value:o||""}),s&&Re(1,"p","dms-hint dms-validation-warning",s,0)],0)}}function KD(n){if(!n||rj(n.trim()))return{values:[]};let e=n.split(",");const t={values:[]};let i="";if(e.forEach(r=>{i+=r,/^"[^"]*"$/.test(i.trim())?(t.values.push(i.trim()),i=""):i+=","}),!i)return t}function rj(n){return n===""}function sj(n){return n.map(e=>e.value)}let oj=class extends br{constructor(t,i){super(t,i);$n(this,"onElementsChanged",()=>{this.forceUpdate()});$n(this,"setPredefinedValues",t=>{const i=this.getAllowedValuesTarget();this.setState({values:t}),this._modeling.editAllowedValues(i,t&&sj(t))});$n(this,"onListChange",t=>{this.setPredefinedValues(t)});$n(this,"onInput",({isValid:t,value:i})=>{this.setState({inputValue:i})});$n(this,"onKeyDown",({isValid:t,event:i})=>{if(lj(i.keyCode)&&(i.stopPropagation(),i.preventDefault(),t)){const{inputValue:r,values:s}=this.state,o=KD(r);this.onListChange((s||[]).concat(o.values.map(l=>({value:l,isCheckable:!1,isRemovable:!0,group:this._translate("Predefined values")})))),this.setState({inputValue:""})}});$n(this,"handleRemovePredifinedValuesClick",t=>{t.stopPropagation(),this.removePredefinedValues()});$n(this,"removePredefinedValues",()=>{this.setPredefinedValues(null)});this._translate=i.injector.get("translate"),this._modeling=i.injector.get("modeling"),this._changeSupport=i.changeSupport;const r=this.getAllowedValuesTarget(),s=KD(r.inputValues&&r.inputValues.text||r.outputValues&&r.outputValues.text||"");s?this.state={values:s.values.map(o=>({value:o,isCheckable:!1,isRemovable:!0,group:this._translate("Predefined values")})),inputValue:""}:this.state={values:null,inputValue:""}}componentWillMount(){const t=this.getAllowedValuesTarget();this._changeSupport.onElementsChanged(t.id,this.onElementsChanged)}componentWillUnmount(){const t=this.getAllowedValuesTarget();this._changeSupport.offElementsChanged(t.id,this.onElementsChanged)}getAllowedValuesTarget(){const t=this.getElement();return Mt(t,"dmn:LiteralExpression")?t.$parent:t}getElement(){return this.props.context.output||this.props.context.input.inputExpression}render(){const t=this.getElement(),{inputValue:i,values:r}=this.state;return t.typeRef==="string"?Re(1,"div","context-menu-container allowed-values-edit",Re(1,"div","dms-form-control",[!ZD(r)&&r.length>0&&jn(2,r_,{labelComponent:aj,items:r,onChange:this.onListChange}),!ZD(r)&&!r.length&&Re(1,"div",null,[Re(1,"label","dms-label",this._translate("Predefined values"),0),Re(1,"span","placeholder",this._translate("No values"),0)],4),!ZD(r)&&Re(1,"p","dms-hint",Re(1,"button","del-values",this._translate("Clear predefined values"),0,{type:"button",onClick:this.handleRemovePredifinedValuesClick}),2),Re(1,"label","dms-label",this._translate("Add predefined values"),0),jn(2,Qc,{onInput:this.onInput,onKeyDown:this.onKeyDown,placeholder:this._translate('"value", "value", ...'),type:"text",validate:s=>{if(!KD(s))return this._translate("Strings must be in double quotes")},value:i})],0),2):null}};function aj(n){return Re(1,"label","dms-label",n,0)}function lj(n){return n===13}function ZD(n){return n===null}const uj=500;class s_{constructor(e){e.onGetComponent("context-menu",uj,(t={})=>{const{contextMenuType:i}=t;if(i==="input-edit"||i==="output-edit")return oj})}}s_.$inject=["components"];var cj={__init__:["allowedValuesUpdateBehavior","allowedValuesEditingProvider"],allowedValuesUpdateBehavior:["type",i_],allowedValuesEditingProvider:["type",s_]};class hj extends br{constructor(t,i){super(t,i);$n(this,"onElementsChanged",()=>{this.forceUpdate()});$n(this,"handleClick",t=>{t.stopPropagation(),this.add()});$n(this,"add",()=>{this._eventBus.fire("addInput")});this._sheet=i.injector.get("sheet"),this._eventBus=i.injector.get("eventBus"),this._changeSupport=i.changeSupport,this._translate=i.injector.get("translate")}componentWillMount(){const t=this.getRoot();this._changeSupport.onElementsChanged(t.id,this.onElementsChanged)}componentWillUnmount(){const t=this.getRoot();this._changeSupport.offElementsChanged(t.id,this.onElementsChanged)}getRoot(){return this._sheet.getRoot()}render(){return Re(1,"div","add-input actionable",Re(1,"span","dmn-icon-plus action-icon"),2,{onClick:this.handleClick,title:this._translate("Add input")})}}class dj extends br{constructor(t,i){super(t,i);$n(this,"onElementsChanged",()=>{this.forceUpdate()});$n(this,"handleClick",t=>{t.stopPropagation(),this.add()});$n(this,"add",()=>{this._eventBus.fire("addOutput")});this._sheet=i.injector.get("sheet"),this._eventBus=i.injector.get("eventBus"),this._changeSupport=i.changeSupport,this._translate=i.injector.get("translate")}componentWillMount(){const t=this.getRoot();this._changeSupport.onElementsChanged(t.id,this.onElementsChanged)}componentWillUnmount(){const t=this.getRoot();this._changeSupport.offElementsChanged(t.id,this.onElementsChanged)}getRoot(){return this._sheet.getRoot()}render(){return Re(1,"div","add-output actionable",Re(1,"span","dmn-icon-plus action-icon"),2,{onClick:this.handleClick,title:this._translate("Add output")})}}function o_(n,e,t){n.onGetComponent("cell-inner",(i={})=>{const{cellType:r,index:s,inputsLength:o,outputsLength:l}=i;if(r==="input-cell"&&s===o-1)return hj;if(r==="output-cell"&&s===l-1)return dj}),t.on("addInput",()=>{e.trigger("addInput")}),t.on("addOutput",()=>{e.trigger("addOutput")})}o_.$inject=["components","editorActions","eventBus"];var pj={__depends__:[mf],__init__:["addInputOutputProvider"],addInputOutputProvider:["type",o_]};let a_=class{constructor(e,t,i,r){$n(this,"_init",()=>{this._registerDefaultBindings(),this._fire("init")});$n(this,"_destroy",()=>{this._fire("destroy"),this.unbind(),this._listeners=null});$n(this,"_keyHandler",e=>{var t,i,r=this._listeners,s=e.keyCode||e.charCode||-1;for(t=0;i=r[t];t++)if(i(s,e)){e.preventDefault(),e.stopPropagation();return}});$n(this,"unbind",()=>{var e=this._node;e&&(this._fire("unbind"),zn.unbind(e,"keydown",this._keyHandler)),this._node=null});this._config=e||{},this._editorActions=i,this._eventBus=t,this._cellSelection=r,this._listeners=[],t.on("table.destroy",this._destroy),t.on("table.init",this._init),t.on("attach",()=>{this._config.bindTo&&this.bind(e.bindTo)}),t.on("detach",this.unbind)}bind(e){this.unbind(),this._node=e,zn.bind(e,"keydown",this._keyHandler),this._fire("bind")}getBinding(){return this._node}_fire(e){this._eventBus.fire("keyboard."+e,{node:this._node,listeners:this._listeners})}_registerDefaultBindings(){var e=this._listeners,t=this._editorActions,i=this._cellSelection;function r(h,p){if(pp(p)&&!fp(p)&&h===90)return t.trigger("undo"),!0}function s(h,p){if(pp(p)&&(h===89||h===90&&fp(p)))return t.trigger("redo"),!0}e.push(r),e.push(s);function o(h,p){if(!(h!==13||pp(p)||!fp(p))&&Zx(p.target))return t.trigger("selectCellAbove"),!0}e.push(o);function l(h,p){if(h!==13||pp(p)||fp(p)||!Zx(p.target))return;const y=t.trigger("selectCellBelow"),w=i.getCellSelection();if(!y&&w&&!fj(w)){const F=t.trigger("addRule");return t.trigger("selectCellBelow"),F}return!0}e.push(l)}addListener(e){this._listeners.unshift(e)}removeListener(e){this._listeners=this._listeners.filter(t=>t!==e)}};a_.$inject=["config.keyboard","eventBus","editorActions","cellSelection"];function fj(n){return n==="__decisionProperties_name"}var Gh={__depends__:[mf],__init__:["keyboard"],keyboard:["type",a_]},mj={__depends__:[pj,cj,yd,gd,md,Gh,ej],__init__:["inputEditingProvider","outputEditingProvider"],inputEditingProvider:["type",e_],outputEditingProvider:["type",jA]};function JD(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}const gj=`.dmn-decision-table-container td,
   .dmn-decision-table-container th`;let l_=class{constructor(e,t,i,r){JD(this,"handleDragOver",s=>{Uv(s);const o=s.target,l=ti(o,gj,!0);let h=!!l;const{hoverEl:p}=this._dragContext;p&&p!==l&&(this._emit("dragAndDrop.dragLeave",s),this._dragContext.targetEl=null,this._dragContext.hoverEl=null),l&&(l!==p&&(this._dragContext.hoverEl=l,h=this._emit("dragAndDrop.dragEnter",s),h!==!1&&(this._dragContext.targetEl=l)),h=this._emit("dragAndDrop.dragOver",s)),s.dataTransfer.dropEffect=h!==!1?"move":"none"}),JD(this,"handleDrop",s=>{Uv(s);const o=this._emit("dragAndDrop.drop",s);if(o){const{draggedElement:l}=this._dragContext;if(l instanceof bc){const{rows:h}=this._sheet.getRoot();let p=h.indexOf(o);this._modeling.moveRow(l,p)}else if(l instanceof Dc){const{cols:h}=this._sheet.getRoot();let p=h.indexOf(o);this._modeling.moveCol(l,p)}}this.handleDragEnd(s)}),JD(this,"handleDragEnd",s=>{Uv(s),this._unbindListeners(),this._emit("dragAndDrop.dragEnd",s),this._dragContext=null}),this._eventBus=e,this._renderer=t,this._modeling=i,this._sheet=r,this._dragContext=null,e.on("table.destroy",()=>{this._unbindListeners()})}_bindListeners(){zn.bind(document,"dragover",this.handleDragOver),zn.bind(document,"drop",this.handleDrop),zn.bind(document,"dragend",this.handleDragEnd)}_unbindListeners(){zn.unbind(document,"dragover",this.handleDragOver),zn.unbind(document,"drop",this.handleDrop),zn.unbind(document,"dragend",this.handleDragEnd)}_emit(e,t){return this._eventBus.fire(e,{dragContext:this._dragContext,originalEvent:t})}startDrag(e,t){Uv(t,!0),t.dataTransfer.effectAllowed="move",t.dataTransfer.setData&&t.dataTransfer.setData("text","__DUMMY"),this._dragContext={draggedElement:e},this._bindListeners(),this._emit("dragAndDrop.dragStart",t)}};l_.$inject=["eventBus","renderer","modeling","sheet"];function Uv(n,e){n.stopPropagation(),e!==!0&&n.preventDefault()}var yj={__init__:["dragAndDrop"],dragAndDrop:["type",l_]};const ew="top",vj="right",xj="bottom",tw="left";class u_{constructor(e,t,i,r,s,o,l,h){$n(this,"_cleanup",()=>{const e=this._renderer.getContainer();nw(e),Ej(e),this._dragImage&&(Li(this._dragImage),this._dragImage=null)});this._elementRegistry=t,this._dragAndDrop=r,this._renderer=s,this._rules=o,this._sheet=l,this._translate=h,e.onGetComponent("cell-inner",({cellType:p,col:y,row:w})=>{if(p==="rule-index")return()=>Re(1,"span","dmn-icon-drag vertical",bo("\xA0"),2,{draggable:"true",onDragStart:F=>this.startDrag(w,F),title:this._translate("Move rule")});if(p==="input-cell"||p==="output-cell"){let F=`Move ${$i(y)?"Input":"Output"}`;return()=>Re(1,"span","dmn-icon-drag horizontal",null,1,{draggable:"true",onDragStart:j=>this.startDrag(y,j),title:F})}}),i.on("dragAndDrop.dragEnter",p=>{const{dragContext:y}=p,{draggedElement:w,hoverEl:F}=y;if(w instanceof bc)return!0;if(w instanceof Dc){const j=bj(F,this._elementRegistry,this._sheet);return j===-1?!1:this._rules.allowed("col.move",{col:w,index:j})}return!1}),i.on("dragAndDrop.dragLeave",p=>{const{dragContext:y}=p,{targetEl:w}=y;if(!w)return;const F=this._renderer.getContainer();nw(F)}),i.on("dragAndDrop.dragOver",p=>{const{dragContext:y,originalEvent:w}=p,{draggedElement:F,lastPosition:j,targetEl:Q}=y,he=this._renderer.getContainer();if(!Q)return!1;let ye;return F instanceof bc&&(ye=p_(w,Q)),F instanceof Dc&&(ye=d_(w,Q)),j===ye||(nw(he),F instanceof bc&&(ye===ew?c_(Q,he,"top"):c_(Q,he,"bottom")),F instanceof Dc&&(ye===tw?h_(Q,he,"left"):h_(Q,he,"right")),y.lastPosition=ye),!0}),i.on("dragAndDrop.drop",p=>{const{dragContext:y,originalEvent:w}=p,{draggedElement:F,targetEl:j}=y;if(!j)return!1;if(F instanceof bc){const Q=p_(w,j),he=j.dataset.rowId,ye=this._elementRegistry.get(he);if(!ye||ye===F)return;const Le=Cj(F,ye,Q,this._sheet.getRoot().rows);return Le===F?void 0:Le}if(F instanceof Dc){const Q=d_(w,j),he=j.dataset.colId,ye=this._elementRegistry.get(he);if(!ye||ye===F)return;const Le=Sj(F,ye,Q,this._sheet.getRoot().cols);return Le===F?void 0:Le}}),i.on("dragAndDrop.dragEnd",this._cleanup)}startDrag(e,t){const i=this._renderer.getContainer();this._dragImage=Es(`<span style="
          visibility: hidden;
          position: fixed;
          top: -10000px
      "></span>`),document.body.appendChild(this._dragImage),t.dataTransfer.setDragImage&&t.dataTransfer.setDragImage(this._dragImage,0,0),e instanceof bc?Dj(e,i):e instanceof Dc&&wj(e,i),this._dragAndDrop.startDrag(e,t)}}u_.$inject=["components","elementRegistry","eventBus","dragAndDrop","renderer","rules","sheet","translate"];function bj(n,e,t){const i=e.get(n.dataset.colId);if(!i)return-1;const{cols:r}=t.getRoot();return r.indexOf(i)}function c_(n,e,t){const i=n.dataset.rowId;if(!i)return;const r=Io(`[data-row-id=${i}]`,e);$t(r,s=>{Lf(s)&&(sr(s).add("dragover"),sr(s).add(t))})}function h_(n,e,t){const i=n.dataset.colId;if(!i)return;const r=Io(`[data-col-id=${i}]`,e);$t(r,s=>{Lf(s)&&(sr(s).add("dragover"),sr(s).add(t))})}function nw(n){const e=Io(".dragover",n);$t(e,t=>{Lf(t)&&(sr(t).remove("dragover"),sr(t).remove("top"),sr(t).remove("right"),sr(t).remove("bottom"),sr(t).remove("left"))})}function Dj(n,e){const t=Io(`[data-row-id=${n.id}]`,e);$t(t,i=>{Lf(i)&&sr(i).add("dragged")})}function wj(n,e){const t=Io(`[data-col-id=${n.id}]`,e);$t(t,i=>{Lf(i)&&sr(i).add("dragged")})}function Ej(n){const e=Io(".dragged",n);$t(e,t=>{Lf(t)&&sr(t).remove("dragged")})}function d_(n,e){const t=e.getBoundingClientRect();return n.clientX<t.left+t.width/2?tw:vj}function p_(n,e){const t=e.getBoundingClientRect();return n.clientY<t.top+t.height/2?ew:xj}function Cj(n,e,t,i){return i.indexOf(n)>i.indexOf(e)&&(e=Tj(e,i)),t===ew?Aj(e,i):e}function Sj(n,e,t,i){return i.indexOf(n)>i.indexOf(e)&&(e=kj(e,i)),t===tw?Oj(e,i):e}function Aj(n,e){const t=e.indexOf(n);return e[Math.max(0,t-1)]}function Tj(n,e){const t=e.indexOf(n);return e[Math.min(e.length-1,t+1)]}function Oj(n,e){const t=e.indexOf(n);if(Ir(n)){const i=e.filter(s=>Ir(s))[0],r=e.indexOf(i);return e[Math.max(r,t-1)]}return e[Math.max(0,t-1)]}function kj(n,e){const t=e.indexOf(n);if($i(n)){const i=e.filter(o=>$i(o)),r=i[i.length-1],s=e.indexOf(r);return e[Math.min(s,t+1)]}return e[Math.min(e.length-1,t+1)]}function Lf(n){return n&&(n.nodeType===1||n.nodeType==11)}var _j={__depends__:[yj,tb],__init__:["dmnDragAndDrop"],dmnDragAndDrop:["type",u_]};class Pj extends br{constructor(t,i){super(t,i);$n(this,"onElementsChanged",()=>{this.forceUpdate()});$n(this,"changeDescription",t=>{this._modeling.updateProperties(this._element,{description:t})});this._elementRegistry=i.injector.get("elementRegistry"),this._modeling=i.injector.get("modeling"),this._changeSupport=this.context.changeSupport;const{id:r}=this.props.context;this._element=this._elementRegistry.get(r)}componentWillMount(){this._element&&this._changeSupport.onElementsChanged(this._element.id,this.onElementsChanged)}componentDidMount(){const{autoFocus:t}=this.props.context;t&&this.node&&Mj(this.node).focus()}componentWillUnmount(){if(this._element){this._changeSupport.offElementsChanged(this._element.id,this.onElementsChanged);const{businessObject:t}=this._element,{description:i}=t;gn(i)&&!i.length&&this.changeDescription(null)}}render(){if(!this._element)return;const{businessObject:t}=this._element,{description:i}=t;if(gn(i))return Re(1,"div","context-menu-container description-editor",jn(2,Fj,{className:"dms-input",onChange:this.changeDescription,value:i}),2,null,null,r=>this.node=r)}}let Fj=class extends yf{render(){return Re(1,"div",this.getClassName(),this.getEditor(),0)}};function Mj(n){return xs(".content-editable",n)}const Ij=500,Nj=750,f_=26;class m_{constructor(e,t,i,r,s,o,l){$n(this,"addDescription",e=>{this._modeling.updateProperties(e,{description:""});const t=this._renderer.getContainer(),r=ff(e.id,t).getBoundingClientRect(),s=g_(t,r);this._contextMenu.open(s,{contextMenuType:"cell-description",id:e.id,autoFocus:!0,offset:{x:4,y:4}})});$n(this,"removeDescription",e=>{this._modeling.updateProperties(e,{description:null}),this._contextMenu.close()});this._contextMenu=t,this._modeling=s,this._renderer=o,this._translate=l,r.on("cell.click",Nj,h=>{if(h.defaultPrevented)return;const{target:p,id:y}=h,w=i.get(y);if(!Rn(w,["dmn:UnaryTests","dmn:LiteralExpression"]))return;y_(w)||h.preventDefault();const j=o.getContainer(),Q=p.getBoundingClientRect(),he=g_(j,Q);t.open(he,{contextMenuType:"cell-description",autoFocus:!1,id:y,offset:{x:4,y:4}})}),e.onGetComponent("context-menu",(h={})=>{if(h.contextMenuType&&h.contextMenuType==="cell-description"){const p=i.get(h.id),y=y_(p);if(gn(y))return Pj}}),e.onGetComponent("context-menu-cell-additional",Ij,(h={})=>{if(h.contextMenuType&&h.contextMenuType==="context-menu"){const{id:p}=h;if(!p)return;const y=i.get(p);if(!y)return;const{businessObject:w}=y,{description:F}=w,j=gn(F),Q=j?"remove-description":"add-description",he=j?()=>this.removeDescription(y):()=>this.addDescription(y);return Re(1,"div",`context-menu-group-entry ${Q}`,gn(F)?this._translate("Remove cell description"):this._translate("Add cell description"),0,{onClick:he})}})}}m_.$inject=["components","contextMenu","elementRegistry","eventBus","modeling","renderer","translate"];function g_(n,e){const{top:t,left:i,width:r,height:s}=e;return{x:i+n.parentNode.scrollLeft-f_,y:t+n.parentNode.scrollTop,width:r+2*f_,height:s}}function y_(n){return n&&n.businessObject&&n.businessObject.description}var Bj={__depends__:[yd,Xx],__init__:["description"],description:["type",m_]};let v_=class{constructor(e,t,i,r,s,o){this._modeling=i,this._translate=s,this._expressionLanguages=r,e.onGetComponent("context-menu-cell-additional",(l={})=>{if(l.contextMenuType&&l.contextMenuType==="context-menu"){const{event:h,id:p}=l;if(!p)return;const y=t.get(p);if(!y||!this._shouldDisplayContextMenuEntry(y))return;const w=F=>{o.open({x:(h||F).pageX,y:(h||F).pageY},{contextMenuType:"expression-language",id:p})};return Re(1,"div","context-menu-group-entry",this._translate("Change cell expression language"),0,{onClick:w})}}),e.onGetComponent("context-menu",(l={})=>{if(l.contextMenuType&&l.contextMenuType==="expression-language"){const{id:h}=l;if(!h)return;const p=t.get(h);if(!p)return;const y=this._getElementExpressionLanguage(p),w=r.getAll(),F="context-menu-group-entry context-menu-entry-set-expression-language",j=this._translate("Expression language");return()=>Re(1,"div","context-menu-flex",Re(1,"div","context-menu-group",Re(1,"div",F,[Re(1,"div",null,j,0),jn(2,wl,{label:j,className:"expression-language",onChange:Q=>this.onChange(p,Q),options:w,value:y})],4),2),2)}}),e.onGetComponent("context-menu",(l={})=>{if(l.contextMenuType==="input-edit")return()=>{const{inputExpression:h}=l.input;if(!this._shouldDisplayContextMenuEntry(h))return;const p=this._getElementExpressionLanguage(h),y=r.getAll(),w=this._translate("Expression language");return Re(1,"div","context-menu-container ref-language",Re(1,"div","dms-form-control",[Re(1,"label","dms-label",w,0),jn(2,wl,{label:w,className:"ref-language",value:p||"",onChange:F=>this.onChange(h,F),options:y})],4),2)}})}onChange(e,t){this._modeling.editExpressionLanguage(e,t)}_shouldDisplayContextMenuEntry(e){return this._expressionLanguages.getAll().length>1?!0:this._getElementExpressionLanguage(e)!==this._getDefaultElementExpressionLanguage(e)}_getElementExpressionLanguage(e){return es(e).expressionLanguage||this._getDefaultElementExpressionLanguage(e)}_getDefaultElementExpressionLanguage(e){return this._expressionLanguages.getDefault($i(e.col)?"inputCell":"outputCell").value}};v_.$inject=["components","elementRegistry","modeling","expressionLanguages","translate","contextMenu"];var Rj={__depends__:[md],__init__:["expressionLanguage"],expressionLanguage:["type",v_]};class x_ extends br{constructor(t,i){super(t,i);$n(this,"onElementsChanged",()=>{this.forceUpdate()});$n(this,"setDecisionTableName",t=>{this.modeling.editDecisionTableName(t)});Uu(this)}componentWillMount(){this.setupChangeListeners({bind:this.getBusinessObject().id})}componentWillUnmount(){this.setupChangeListeners({unbind:this.getBusinessObject().id})}setupChangeListeners({bind:t,unbind:i}){typeof i=="string"&&this.changeSupport.offElementsChanged(i,this.onElementsChanged),typeof t=="string"&&this.changeSupport.onElementsChanged(t,this.onElementsChanged)}getBusinessObject(){return this.sheet.getRoot().businessObject.$parent}render(){const t=this.getBusinessObject(),{name:i}=t,r=this.components.getComponent("hit-policy")||$j;return Re(1,"div","decision-table-properties",[jn(2,Lj,{label:this.translate("Decision name"),className:"decision-table-name",value:i,ctrlForNewline:!0,onBlur:jj,onChange:this.setDecisionTableName,elementId:"__decisionProperties_name",coords:"0:__decisionProperties"}),Re(1,"div","decision-table-header-separator"),jn(2,r)],4)}}x_.$inject=["sheet","modeling","changeSupport","components","translate"];class Lj extends yf{constructor(e,t){super(e,t),this._translate=t.injector.get("translate"),hp(this,zx)}render(){const e=this.props.value,t=Ux(this.getSelectionClasses(),this.getClassName());return Re(1,"div",t,this.getEditor(),0,{"data-element-id":this.props.elementId,"data-coords":this.props.coords,title:this._translate("Decision name: ")+e})}}function $j(){return null}function jj(n){n.target.scroll(0,0)}const Vj=500;class b_{constructor(e){e.onGetComponent("table.before",Vj,()=>x_)}}b_.$inject=["components"];var Wj={__depends__:[gd],__init__:["decisionTableProperties"],decisionTableProperties:["type",b_]};class D_ extends br{constructor(t,i){super(t,i);$n(this,"onChange",({aggregation:t,hitPolicy:i})=>{this.modeling.editHitPolicy(i,t)});$n(this,"onElementsChanged",()=>{this.forceUpdate()});this._translate=i.injector.get("translate"),Uu(this)}componentDidMount(){this.changeSupport.onElementsChanged(this.getRoot().id,this.onElementsChanged)}componentWillUnmount(){this.changeSupport.offElementsChanged(this.getRoot().id,this.onElementsChanged)}getRoot(){return this.sheet.getRoot()}render(){const t=this.getRoot(),i=t.businessObject,{aggregation:r,hitPolicy:s}=i,o=Ii(Qx,l=>Hj(l.value,{aggregation:r,hitPolicy:s}));return Re(1,"div","hit-policy",[Re(1,"label","dms-label",this._translate("Hit policy:"),0),jn(2,wl,{className:"hit-policy-edit-policy-select",label:this._translate("Hit policy"),onChange:this.onChange,options:Qx.map(l=>qi(Jt({},l),{label:this._translate(l.label)})),value:o.value,"data-hit-policy":"true",noInput:!0})],4,{title:this._translate(o.explanation)})}}D_.$inject=["changeSupport","sheet","modeling"];function Hj(n,e){return n.hitPolicy===e.hitPolicy&&n.aggregation===e.aggregation}function w_(n){n.onGetComponent("hit-policy",()=>D_)}w_.$inject=["components"];var Uj={__depends__:[yd],__init__:["hitPolicyProvider"],hitPolicyProvider:["type",w_]};class E_ extends va{constructor(e,t){super(e),this.executed(["row.add","row.remove","col.add","col.remove"],C_(i=>{var r=i.context,s=r.row||r.col;this.updateRoot(s,r.oldRoot)})),this.reverted(["row.add","row.remove","col.add","col.remove"],C_(i=>{var r=i.context,s=r.row||r.col;this.updateRoot(s,r.newRoot)}))}updateRoot(e,t){var i=e.root,r=e.businessObject;if(Mt(e,"dmn:DecisionRule")){if(t){let o=t.businessObject.get("rule"),l=o.indexOf(r);o.splice(l,1),r.$parent=null}if(i){let s=i.businessObject,o=i.rows.indexOf(e);s.get("rule").splice(o,0,r),r.$parent=s,e.cells.forEach((l,h)=>{this.wireCell(l,e,h)})}}if(Mt(e,"dmn:InputClause")||Mt(e,"dmn:OutputClause")){let s,o;if(t){let l=t.businessObject,h=l.get("input"),p=l.get("output");if(Mt(e,"dmn:InputClause")&&(s=h,o=h.indexOf(r)),Mt(e,"dmn:OutputClause")&&(s=p,o=p.indexOf(r)),o===-1)throw new Error("inconsistent model: clause not in table");s.splice(o,1),r.$parent=null,e.cells.forEach((y,w)=>{this.unwireCell(y,t.rows[w])})}if(i){let l=i.businessObject,h=l.get("input"),p=l.get("output"),y=i.cols.indexOf(e),w,F;Mt(e,"dmn:InputClause")&&(F=h,w=y),Mt(e,"dmn:OutputClause")&&(F=p,w=y-h.length),F.splice(w,0,r),r.$parent=l,e.cells.forEach((j,Q)=>{this.wireCell(j,i.rows[Q],y)})}}}unwireCell(e,t){var i=e.businessObject;let r=t.businessObject,s=r.get("inputEntry"),o=r.get("outputEntry"),l,h;if(Mt(e,"dmn:UnaryTests")&&(l=s),Mt(e,"dmn:LiteralExpression")&&(l=o),h=l.indexOf(i),h===-1)throw new Error("cell not in row");l.splice(h,1),i.$parent=null}wireCell(e,t,i){var r=e.businessObject;let s=t.businessObject,o=s.get("inputEntry"),l=s.get("outputEntry"),h,p;r.$parent!==s&&(Mt(e,"dmn:UnaryTests")&&(h=o,p=i),Mt(e,"dmn:LiteralExpression")&&(h=l,p=i-o.length),h.splice(p,0,r),r.$parent=s)}}E_.$inject=["eventBus","sheet"];function C_(n){return function(e){var t=e.context,i=t.row||t.col;Mt(i,"dmn:DMNElement")&&n(e)}}let S_=class{constructor(e){this._model=e}create(e,t={}){var i=this._model.create(e,t||{});return Mt(i,"dmn:InputClause")&&(t.inputExpression?i.inputExpression=t.inputExpression:(i.inputExpression=this.create("dmn:LiteralExpression",{typeRef:"string"}),i.inputExpression.$parent=i)),Mt(i,"dmn:OutputClause")&&(i.typeRef=t.typeRef||"string"),(Mt(i,"dmn:UnaryTests")||Mt(i,"dmn:LiteralExpression"))&&(i.text=t.text||""),this._ensureId(i),i}_needsId(e){return Mt(e,"dmn:DMNElement")}_ensureId(e){var t=(e.$type||"").replace(/^[^:]*:/g,"")+"_";!e.id&&this._needsId(e)&&(e.id=this._model.ids.nextPrefixed(t,e))}};S_.$inject=["moddle"];class A_ extends ES{constructor(e){super(),this._dmnFactory=e}create(e,t){const i=this._dmnFactory;let l=t,{businessObject:r,type:s}=l,o=Zu(l,["businessObject","type"]);if(!r){if(!s){if(e==="root")s="dmn:DecisionTable";else if(e==="cell"){let{col:h}=o;Mt(h,"dmn:OutputClause")&&(s="dmn:LiteralExpression"),Mt(h,"dmn:InputClause")&&(s="dmn:UnaryTests")}if(!s)throw new Error("cannot guess <type>")}r=i.create(s)}return super.create(e,Jt({businessObject:r,id:r.id},o))}}A_.$inject=["dmnFactory"];class T_{constructor(e,t){this._sheet=e,this._elementFactory=t}execute(e){const t=this._sheet,i=this._elementFactory,r=t.getRoot();let{row:s,index:o}=e;return typeof o=="undefined"&&(o=e.index=r.rows.length),e.newRoot=r,s.cells.length||r.cols.forEach((l,h)=>{const p=i.create("cell",{row:s,col:l});s.cells[h]=p}),t.addRow(s,o),t.getRoot()}revert(e){const{row:t}=e,i=this._sheet;return i.removeRow(t),i.getRoot()}}T_.$inject=["sheet","elementFactory"];class O_{constructor(e){this._sheet=e}execute(e){const t=this._sheet,i=t.getRoot();let{row:r}=e;const s=e.oldIndex=i.rows.indexOf(r);if(e.oldRoot=r.root,s===-1)throw new Error(`row#${r.id} not in sheet`);return t.removeRow(r),t.getRoot()}revert(e){const{row:t,oldIndex:i}=e,r=this._sheet;return r.addRow(t,i),r.getRoot()}}O_.$inject=["sheet"];class k_{constructor(e){this._modeling=e}preExecute(e){let{row:t}=e;this._modeling.removeRow(t)}postExecute(e){let{row:t,index:i}=e;this._modeling.addRow(t,i)}}k_.$inject=["modeling"];class __{constructor(e,t){this._sheet=e,this._elementFactory=t}execute(e){const t=this._sheet,i=this._elementFactory,r=t.getRoot();let{col:s,index:o}=e;return typeof o=="undefined"&&(o=e.index=r.cols.length),e.newRoot=r,s.cells.length||r.rows.forEach((l,h)=>{const p=i.create("cell",{row:l,col:s});s.cells[h]=p}),t.addCol(s,o),t.getRoot()}revert(e){const{col:t}=e,i=this._sheet;return i.removeCol(t),i.getRoot()}}__.$inject=["sheet","elementFactory"];class P_{constructor(e,t){this._sheet=e,this._elementFactory=t}execute(e){const t=this._sheet;let{col:i}=e;const r=e.oldRoot=i.root;if((e.oldIndex=r.cols.indexOf(i))===-1)throw new Error(`col#${i.id} not in sheet`);return t.removeCol(i),t.getRoot()}revert(e){const{col:t,oldIndex:i}=e,r=this._sheet;return r.addCol(t,i),r.getRoot()}}P_.$inject=["sheet","elementFactory"];class F_{constructor(e){this._modeling=e}preExecute(e){let{col:t}=e;this._modeling.removeCol(t)}postExecute(e){let{col:t,index:i}=e;this._modeling.addCol(t,i)}}F_.$inject=["modeling"];class zj{execute(e){let{cell:t}=e;return t}revert(e){const{cell:t}=e;return t}}let M_=class wF{constructor(e,t,i){this._eventBus=e,this._elementFactory=t,this._commandStack=i,e.on("table.init",()=>{qj(this.getHandlers(),i)})}getHandlers(){return wF._getHandlers()}static _getHandlers(){return{"row.add":T_,"row.remove":O_,"row.move":k_,"col.add":__,"col.remove":P_,"col.move":F_,"cell.edit":zj}}_create(e,t){return t instanceof Qm?t:this._elementFactory.create(e,t)}addRow(e,t){const i=this._create("row",e),r={row:i,index:t};return this._commandStack.execute("row.add",r),i}removeRow(e){this._commandStack.execute("row.remove",{row:e})}moveRow(e,t){const i={row:e,index:t};this._commandStack.execute("row.move",i)}addCol(e,t){const i=this._create("col",e),r={col:i,index:t};return this._commandStack.execute("col.add",r),i}removeCol(e){this._commandStack.execute("col.remove",{col:e})}moveCol(e,t){const i={col:e,index:t};this._commandStack.execute("col.move",i)}editCell(e,t){const i=Jt({cell:e},t);this._commandStack.execute("cell.edit",i)}};M_.$inject=["eventBus","elementFactory","commandStack"];function qj(n,e){$t(n,function(t,i){e.registerHandler(i,t)})}class I_{constructor(e,t,i){this._dmnFactory=e,this._moddle=t,this._modeling=i}execute(e){const{element:t,allowedValues:i}=e;return Mt(t,"dmn:InputClause")?(t.inputValues?e.oldAllowedValues=t.inputValues.text:zv(i)||(t.inputValues=this._dmnFactory.create("dmn:UnaryTests",{text:""})),zv(i)?t.inputValues&&delete t.inputValues:t.inputValues.text=i.join(",")):(t.outputValues&&t?e.oldAllowedValues=t.outputValues.text:zv(i)||(t.outputValues=this._dmnFactory.create("dmn:UnaryTests",{text:""})),zv(i)?t.outputValues&&delete t.outputValues:t.outputValues.text=i.join(",")),t}revert(e){const{element:t,oldAllowedValues:i}=e;return Mt(t,"dmn:InputClause")?i?(t.inputValues||(t.inputValues=this._dmnFactory.create("dmn:UnaryTests",{text:""})),t.inputValues.text=i):delete t.inputValues:i?(t.outputValues||(t.outputValues=this._dmnFactory.create("dmn:UnaryTests",{text:""})),t.outputValues.text=i):delete t.outputValues,t}}I_.$inject=["dmnFactory","moddle","modeling"];function zv(n){return n===null}const iw="id";class qv{constructor(e,t){this._elementRegistry=e,this._moddle=t}execute(e){const{element:t,properties:i}=e,r=es(t),{changed:s,oldProperties:o}=this.updateProperties(r,i);return e.oldProperties=o,[...s,t]}revert(e){const{element:t,oldProperties:i}=e;var r=es(t),{changed:s}=this.updateProperties(r,i);return[...s,t]}updateProperties(e,t){const i=this._moddle.ids;return qt(t,(r,s,o)=>{const l=e.get(o);if(N_(s)){if(!N_(l))throw new Error(`non-existing property <${o}>: cannot update values`);let{changed:h,oldProperties:p}=this.updateProperties(l,s);return{changed:[...r.changed,...h,l],oldProperties:qi(Jt({},r.oldProperties),{[o]:p})}}return o===iw&&Qj(e,s)&&(i.unclaim(e[iw]),this._elementRegistry.updateId(e,s),i.claim(s,e)),e.set(o,s),{changed:r.changed,oldProperties:qi(Jt({},r.oldProperties),{[o]:l})}},{changed:[],oldProperties:{}})}}qv.$inject=["elementRegistry","moddle"];function Qj(n,e){return n[iw]!==e}function N_(n){return yn(n)&&Kt(n)}class B_{constructor(e){this._moddle=e}execute(e){const t=this._moddle.ids,i=e.id,r=e.element;e.claiming?t.claim(i,r):t.unclaim(i)}revert(e){const t=this._moddle.ids,i=e.id,r=e.element;e.claiming?t.unclaim(i):t.claim(i,r)}}B_.$inject=["moddle"];let R_=class EF extends M_{constructor(e,t,i,r){super(e,t,i),this._eventBus=e,this._elementFactory=t,this._commandStack=i,this._sheet=r}getHandlers(){return EF._getHandlers()}static _getHandlers(){return ee({},super._getHandlers(),{editAllowedValues:I_,"element.updateProperties":qv,"id.updateClaim":B_})}editDecisionTableName(e){const s={element:this._sheet.getRoot().businessObject.$parent,properties:{name:e}};this._commandStack.execute("element.updateProperties",s)}editDecisionTableId(e){const s={element:this._sheet.getRoot().businessObject.$parent,properties:{id:e}};this._commandStack.execute("element.updateProperties",s)}editHitPolicy(e,t){const s={element:this._sheet.getRoot().businessObject,properties:{hitPolicy:e,aggregation:t}};this._commandStack.execute("element.updateProperties",s)}updateProperties(e,t){const i={element:e,properties:t};this._commandStack.execute("element.updateProperties",i)}editInputExpression(e,t){const i={element:e,properties:t};this._commandStack.execute("element.updateProperties",i)}editOutputName(e,t){const i={element:e,properties:{name:t}};this._commandStack.execute("element.updateProperties",i)}editInputExpressionTypeRef(e,t){const i={element:e,properties:{typeRef:t}};this._commandStack.execute("element.updateProperties",i)}editOutputTypeRef(e,t){const i={element:e,properties:{typeRef:t}};this._commandStack.execute("element.updateProperties",i)}editCell(e,t){const i={element:e,properties:{text:t}};this._commandStack.execute("element.updateProperties",i)}editAnnotation(e,t){const i={element:e,properties:{description:t}};this._commandStack.execute("element.updateProperties",i)}editAllowedValues(e,t){const i={element:e,allowedValues:t};this._commandStack.execute("editAllowedValues",i)}editExpressionLanguage(e,t){const i={element:e,properties:{expressionLanguage:t}};this._commandStack.execute("element.updateProperties",i)}claimId(e,t){const i={id:e,element:t,claiming:!0};this._commandStack.execute("id.updateClaim",i)}unclaimId(e,t){const i={id:e,element:t};this._commandStack.execute("id.updateClaim",i)}};R_.$inject=["eventBus","elementFactory","commandStack","sheet"];class L_ extends va{constructor(e,t,i){super(e),this._ids=t.ids,this._modeling=i,this.preExecute(["row.add","col.add"],r=>{const s=r.context,o=s.row||s.col;this.claimId(o.businessObject),o.cells&&o.cells.forEach(l=>this.claimId(l.businessObject))})}claimId(e){e.id&&!this._ids.assigned(e.id)&&this._modeling.claimId(e.id,e),e.$descriptor.properties.forEach(t=>{const i=e[t.name];i&&(Nn(i)&&i.forEach(r=>this.claimId(r)),i.$type&&this.claimId(i))})}}L_.$inject=["eventBus","moddle","modeling"];class $_ extends va{constructor(e,t){super(e),this._modeling=t,this.preExecute(["row.remove","col.remove"],i=>{const r=i.context,s=r.row||r.col;this.unclaimId(s.businessObject),s.cells&&s.cells.forEach(o=>this.unclaimId(o.businessObject))})}unclaimId(e){e.id&&this._modeling.unclaimId(e.id,e),e.$descriptor.properties.forEach(t=>{const i=e[t.name];i&&(Nn(i)&&i.forEach(r=>this.unclaimId(r)),i.$type&&this.unclaimId(i))})}}$_.$inject=["eventBus","modeling"];var Xj={__init__:["idClaimBehavior","idUnclaimBehavior"],idClaimBehavior:["type",L_],idUnclaimBehavior:["type",$_]},Yj={__init__:["dmnUpdater","idChangeBehavior","modeling"],__depends__:[Xj,yx],dmnUpdater:["type",E_],dmnFactory:["type",S_],elementFactory:["type",A_],idChangeBehavior:["type",Fm],modeling:["type",R_]};class Gj extends br{constructor(e,t){super(e,t),this.changeCellValue=this.changeCellValue.bind(this),this.onElementsChanged=this.onElementsChanged.bind(this)}onElementsChanged(){this.forceUpdate()}componentWillMount(){const{injector:e}=this.context,{cell:t}=this.props,i=this._changeSupport=this.context.changeSupport;this._modeling=e.get("modeling"),i.onElementsChanged(t.id,this.onElementsChanged)}componentWillUnmount(){const{cell:e}=this.props;this._changeSupport.offElementsChanged(e.id,this.onElementsChanged)}changeCellValue(e){const{cell:t}=this.props;this._modeling.editCell(t.businessObject,e)}render(){const{cell:e,rowIndex:t,row:i,col:r,colIndex:s}=this.props,o=Mt(e,"dmn:UnaryTests"),l=e.businessObject;return jn(2,Xm,{className:o?"input-cell":"output-cell",elementId:e.id,coords:`${t}:${s}`,"data-row-id":i.id,"data-col-id":r.id,children:jn(2,Zj,{placeholder:o?"-":"",onChange:this.changeCellValue,value:l.text,businessObject:l})})}}let Kj=class extends br{constructor(e,t){super(e,t),this.state={focussed:!1},this.onFocus=this.onFocus.bind(this),this.onBlur=this.onBlur.bind(this)}onFocus(){this.setState({focussed:!0})}onBlur(){this.setState({focussed:!1})}render(){const{focussed:e}=this.state;return Re(1,"div",`feel-editor${e?" focussed":""}`,[e&&Tc(jn(2,Hv,qi(Jt({},this.props),{autoFocus:!0,onBlur:this.onBlur}))),Tc(jn(2,gf,qi(Jt({},this.props),{onInput:()=>{},onFocus:this.onFocus})))],0,{onClick:this.onFocus})}};class Zj extends br{constructor(e,t){super(e,t),this._expressionLanguages=t.injector.get("expressionLanguages"),this._translate=t.injector.get("translate"),this._variableResolver=t.injector.get("variableResolver",!1)}isDefaultExpressionLanguage(e){const{expressionLanguage:t}=e,i=this.getDefaultExpressionLanguage().value;return!t||t===i}getDescription(e){return e.description}getExpressionLanguageLabel(e){const{expressionLanguage:t}=e,i=this.getDefaultExpressionLanguage();return this._expressionLanguages.getLabel(t)||i.label}isScript(){const{businessObject:e}=this.props,t=this.getDefaultExpressionLanguage();return this._isInputCell()?e.text.indexOf(`
`)!==-1?!0:e.expressionLanguage&&e.expressionLanguage!==t:!1}_isInputCell(){return Mt(this.props.businessObject,"dmn:UnaryTests")}getDefaultExpressionLanguage(){const e=this._isInputCell()?"inputCell":"outputCell";return this._expressionLanguages.getDefault(e)}getEditor(){return this.isFEEL()?Kj:gf}isFEEL(){return this.getExpressionLanguage()==="feel"}getExpressionLanguage(){const{businessObject:e}=this.props;return e.expressionLanguage||this.getDefaultExpressionLanguage().value}_getVariables(){const{businessObject:e}=this.props;return this._variableResolver&&this._variableResolver.getVariables(e)}_getLabel(){return this._isInputCell()?this._translate("Input"):this._translate("Output")}render(){const{businessObject:e,placeholder:t,value:i,onChange:r}=this.props,s=this.getDescription(e),o=this.isDefaultExpressionLanguage(e),l=this.getExpressionLanguageLabel(e),h=this.isScript(),p=this.getEditor(),y=this._getVariables();return Re(1,"div","cell-editor",[gn(s)&&Re(1,"div","description-indicator"),jn(2,p,{label:this._getLabel(),className:h?"script-editor":"",ctrlForNewline:!0,onInput:r,value:i,placeholder:t,variables:y}),!o&&Re(1,"span","dms-badge dmn-expression-language",[Re(1,"span","dms-badge-icon dmn-icon-file-code"),Re(1,"span","dms-badge-label",l,0)],4,{title:this._translate("Expression language: {expressionLanguageLabel}",{expressionLanguageLabel:l})})],0)}}const Jj=1500;class j_{constructor(e){e.onGetComponent("cell",Jj,({cellType:t})=>{if(t==="rule")return Gj})}}j_.$inject=["components"];var e7={__depends__:[gd,VS],__init__:["decisionRulesEditor"],decisionRulesEditor:["type",j_]};const Qv=4;class V_ extends br{constructor(e,t){super(e,t),this._translate=t.injector.get("translate"),this.state={top:0,left:0,isVisible:!1,isDisabled:!1,selection:null},Uu(this);const{debounceInput:i}=this;this.onClick=this.onClick.bind(this),this.handleSelectionChanged=this.handleSelectionChanged.bind(this),this.hideAndShowDebounced=this.hideAndShowDebounced.bind(this),this.showDebounced=i(this.showDebounced.bind(this)),this.updatePosition=this.updatePosition.bind(this)}componentDidMount(){const{eventBus:e}=this;e.on("cellSelection.changed",this.handleSelectionChanged),e.on("commandStack.changed",this.updatePosition),e.on("sheet.scroll",this.hideAndShowDebounced)}componentWillUnmount(){const{eventBus:e}=this;e.off("cellSelection.changed",this.handleSelectionChanged),e.off("commandStack.changed",this.updatePosition),e.off("sheet.scroll",this.hideAndShowDebounced)}hideAndShowDebounced(){this.state.isVisible&&(this.hide(),this.showDebounced())}showDebounced(){this.show()}hide(e={}){this.setState(qi(Jt({},e),{isVisible:!1}))}show(e={}){this.setState(qi(Jt({},e),{isVisible:!0})),this.updatePosition()}handleSelectionChanged({elementId:e}){const{elementRegistry:t,expressionLanguages:i,simpleMode:r}=this,s=t.get(e);if(!s||!r.canSimpleEdit(s)){this.hide({isDisabled:!1,selection:null});return}const o=t7(s),l=!n7(s,o,i);this.show({isDisabled:l,selection:s})}updatePosition(){const{selection:e}=this.state,{node:t}=this;if(!e||!t)return;const{renderer:i}=this,r=i.getContainer(),s=r.getBoundingClientRect(),l=ff(e.id,r).getBoundingClientRect(),h=this.node.getBoundingClientRect(),{scrollLeft:p,scrollTop:y}=r7(t),w={};l.left+l.width/2>s.width/2?(w.left=-s.left+l.left-h.width+Qv+p+"px",t.classList.remove("right"),t.classList.add("left")):(w.left=-s.left+l.left+l.width-Qv+p+"px",t.classList.remove("left"),t.classList.add("right")),l.top+l.height/2>s.height/2?(w.top=-s.top+l.top-h.height+Qv+y+"px",t.classList.remove("top"),t.classList.add("bottom")):(w.top=-s.top+l.top-Qv+y+"px",t.classList.remove("bottom"),t.classList.add("top")),ee(this.node.style,w)}onClick(){const{eventBus:e}=this,{isDisabled:t}=this.state;if(t)return;const{selection:i}=this,r=i.get();r&&(e.fire("simpleMode.open",{element:r,node:ff(r.id,this._container)}),this.hide())}render(){const{isDisabled:e,isVisible:t,top:i,left:r}=this.state,s=["simple-mode-button","no-deselect"];return e&&s.push("disabled"),t?Re(1,"div",s.join(" "),Re(1,"span","dmn-icon-edit"),2,{onClick:this.onClick,style:{top:i,left:r},title:e?this._translate("Editing not supported for set expression language"):this._translate("Edit")},null,o=>this.node=o):null}}V_.$inject=["debounceInput","elementRegistry","eventBus","expressionLanguages","renderer","selection","simpleMode"];function t7(n){return n.businessObject.expressionLanguage}function n7(n,e,t){return!e||e===i7(n,t)}function i7(n,e){if($i(n.col))return e.getDefault("inputCell").value;if(Ir(n.col))return e.getDefault("outputCell").value}function r7(n){const e=ti(n,".tjs-table-container");if(!e)return{scrollTop:0,scrollLeft:0};const{scrollLeft:t,scrollTop:i}=e;return{scrollTop:i,scrollLeft:t}}class W_{constructor(e,t,i,r,s){this._providers=[],e.onGetComponent("table.before",()=>V_),r.on("simpleMode.open",({element:o,node:l})=>{const{left:h,top:p,width:y,height:w}=l.getBoundingClientRect(),F=s.getContainer();t.open({x:h+F.parentNode.scrollLeft,y:p+F.parentNode.scrollTop,width:y,height:w},{contextMenuType:"simple-mode-edit",element:o,offset:{x:4,y:4}})}),r.on("cell.click",o=>{const{event:l,node:h,id:p}=o;if(s7(l)){const y=i.get(p);y&&r.fire("simpleMode.open",{node:h,element:y}),o.preventDefault()}})}registerProvider(e){this._providers.push(e)}canSimpleEdit(e){return this._providers.reduce((t,i)=>t||i(e),!1)}}W_.$inject=["components","contextMenu","elementRegistry","eventBus","renderer"];function s7(n){return n.altKey?!1:n.ctrlKey||n.metaKey}var Fd={__depends__:[yd,_0,md],__init__:["simpleMode"],simpleMode:["type",W_]};function o7(n){if(!n||a7(n))return"none";if(n.trim()==="true")return"true";if(n.trim()==="false")return"false"}function a7(n){return n===""}const l7="true",u7="false",rw="none";class c7 extends br{constructor(e,t){super(e,t),this._translate=t.injector.get("translate"),this._modeling=t.injector.get("modeling");const{element:i}=this.props.context,r=o7(i.businessObject.text);this.state={value:r||rw},this.editCell=this.editCell.bind(this),this.onChange=this.onChange.bind(this)}editCell(e,t){this._modeling.editCell(e,t)}onChange(e){const{element:t}=this.props.context;this.editCell(t.businessObject,e===rw?"":e),this.setState({value:e})}render(){const{value:e}=this.state,t=[{label:"-",value:rw},{label:this._translate("Yes"),value:l7},{label:this._translate("No"),value:u7}];return Re(1,"div","simple-boolean-edit context-menu-container",[Re(1,"h3","dms-heading",this._translate("Edit boolean"),0),Re(1,"h4","dms-heading",this._translate("Set value"),0),jn(2,wl,{label:this._translate("Boolean value"),noInput:!0,className:"dms-block",onChange:this.onChange,options:t,value:e})],4)}}class H_{constructor(e,t){t.registerProvider(i=>($i(i.col)||Ir(i.col))&&U_(i)==="boolean"),e.onGetComponent("context-menu",(i={})=>{if(i.contextMenuType&&i.contextMenuType==="simple-mode-edit"){if(!i.element)return;if(U_(i.element)==="boolean")return c7}})}}H_.$inject=["components","simpleMode"];function U_(n){return $i(n.col)?n.col&&n.col.businessObject.inputExpression.typeRef:n.col&&n.col.businessObject.typeRef}var h7={__depends__:[Gh,Fd],__init__:["simpleBooleanEdit"],simpleBooleanEdit:["type",H_]};const d7=/^\d{4}(?:-\d\d){2}$/,p7=/^\[date\("([^"]*)"\)..date\("([^"]*)"\)\]$/,f7=/^(<|>)\s*date\("([^"]*)"\)$/,m7=/^date\("([^"]*)"\)$/,g7="exact",y7="before",v7="after",x7="between";function $f(n){if(!d7.test(n.trim()))return"Date must match pattern yyyy-MM-dd"}function Md(n,e){if(n===g7)return`date("${e[0]}")`;if(n===y7)return`< date("${e[0]}")`;if(n===v7)return`> date("${e[0]}")`;if(n===x7)return`[date("${e[0]}")..date("${e[1]}")]`}function Kh(){const n=new Date;return n.setUTCHours(0,0,0,0),n.toISOString().slice(0,10)}function Pg(n){if(!n||n.trim()==="")return{type:"exact",date:""};let e=n.match(p7);if(e)return{type:"between",dates:[e[1],e[2]]};if(e=n.match(f7),e)return{type:e[1]==="<"?"before":"after",date:e[2]};if(e=n.match(m7),e)return{type:"exact",date:e[1]}}const z_="exact",b7="before",D7="after",Fg="between";let w7=class extends br{constructor(e,t){super(e,t),this._translate=t.injector.get("translate"),this._modeling=t.injector.get("modeling");const{element:i}=this.props.context,r=Pg(i.businessObject.text);if(r){let o;r.date?o=[r.date,""]:r.dates?o=r.dates:o=["",""],this.state={type:r.type,dates:o}}else this.state={type:z_,dates:["",""]};const s=t.injector.get("debounceInput");this.debouncedEditCell=s(this.editCell.bind(this)),this.editCell=this.editCell.bind(this),this.onTypeChange=this.onTypeChange.bind(this),this.onSetStartDateTodayClick=this.onSetStartDateTodayClick.bind(this),this.onSetEndDateTodayClick=this.onSetEndDateTodayClick.bind(this),this.onStartDateInput=this.onStartDateInput.bind(this),this.onEndDateInput=this.onEndDateInput.bind(this)}editCell(e,t){this._modeling.editCell(e,t)}onTypeChange(e){const{element:t}=this.props.context,{dates:i}=this.state;this.setState({type:e}),Pg(Md(e,i))&&this.editCell(t.businessObject,Md(e,i))}onSetStartDateTodayClick(){const{element:e}=this.props.context,{dates:t,type:i}=this.state,r=Kh();this.setState({dates:[r,t[1]]}),Pg(Md(i,[r,t[1]]))&&this.editCell(e.businessObject,Md(i,[r,t[1]]))}onSetEndDateTodayClick(){const{element:e}=this.props.context,{dates:t,type:i}=this.state,r=Kh();this.setState({dates:[t[0],r]}),Pg(Md(i,[t[0],r]))&&this.editCell(e.businessObject,Md(i,[t[0],r]))}onStartDateInput({value:e}){const{element:t}=this.props.context,{dates:i,type:r}=this.state;this.setState({dates:[e,i[1]]}),this.debouncedEditCell(t.businessObject,Md(r,[e,i[1]]))}onEndDateInput({value:e}){const{element:t}=this.props.context,{dates:i,type:r}=this.state;this.setState({dates:[i[0],e]}),this.debouncedEditCell(t.businessObject,Md(r,[i[0],e]))}render(){const{dates:e,type:t}=this.state,i=[{label:this._translate("Exactly"),value:z_},{label:this._translate("Before"),value:b7},{label:this._translate("After"),value:D7},{label:this._translate("Between"),value:Fg}];return Re(1,"div","context-menu-container simple-date-edit",[Re(1,"h3","dms-heading",this._translate("Edit date"),0),Re(1,"div","dms-fill-row",jn(2,wl,{label:this._translate("Test type"),noInput:!0,onChange:this.onTypeChange,options:i,value:t}),2),Re(1,"h4","dms-heading",t===Fg?this._translate("Edit start date"):this._translate("Set date"),0),Re(1,"div",null,[jn(2,Qc,{label:t===Fg?this._translate("Start date"):this._translate("Date"),className:"start-date-input dms-block",onInput:this.onStartDateInput,placeholder:this._translate("e.g. { sample }",{sample:Kh()}),validate:r=>$f(r)&&this._translate($f(r)),value:e[0]}),Re(1,"p","dms-hint",[Re(1,"button","use-today",this._translate("Use today"),0,{type:"button",onClick:this.onSetStartDateTodayClick}),bo(".")],4)],4),t===Fg&&Re(1,"h4","dms-heading",this._translate("Edit end date"),0),t===Fg&&Re(1,"div",null,[jn(2,Qc,{label:this._translate("End date"),className:"end-date-input dms-block",onInput:this.onEndDateInput,placeholder:this._translate("e.g. { sample }",{sample:Kh()}),validate:r=>$f(r)&&this._translate($f(r)),value:e[1]}),Re(1,"p","dms-hint",[Re(1,"button","use-today",this._translate("Use today"),0,{type:"button",onClick:this.onSetEndDateTodayClick}),bo(".")],4)],4)],0)}},E7=class extends br{constructor(e,t){super(e,t),this._translate=t.injector.get("translate"),this._modeling=t.injector.get("modeling");const{element:i}=this.props.context,r=Pg(i.businessObject.text);this.state={date:r?r.date:""};const s=t.injector.get("debounceInput");this.debouncedEditCell=s(this.editCell.bind(this)),this.editCell=this.editCell.bind(this),this.onClick=this.onClick.bind(this),this.onInput=this.onInput.bind(this)}editCell(e,t){this._modeling.editCell(e,t)}onClick(){const{element:e}=this.props.context,t=Kh();this.setState({date:t}),this.editCell(e.businessObject,`date("${t}")`)}onInput({value:e}){const{element:t}=this.props.context;this.setState({date:e}),this.debouncedEditCell(t.businessObject,`date("${e}")`)}render(){const{date:e}=this.state;return Re(1,"div","context-menu-container simple-date-edit",[Re(1,"h3","dms-heading",this._translate("Edit date"),0),Re(1,"h4","dms-heading",this._translate("Set date"),0),Re(1,"div",null,[jn(2,Qc,{label:this._translate("Date value"),onInput:this.onInput,placeholder:this._translate("e.g. { example } ",{example:Kh()}),validate:t=>$f(t)&&this._translate($f(t)),value:e,className:"dms-block"}),Re(1,"p","dms-hint",Re(1,"button","use-today",this._translate("Use today"),0,{type:"button",onClick:this.onClick}),2)],4)],4)}},q_=class{constructor(e,t){t.registerProvider(i=>{const r=Q_(i);return($i(i.col)||Ir(i.col))&&X_(r)}),e.onGetComponent("context-menu",(i={})=>{if(i.contextMenuType&&i.contextMenuType==="simple-mode-edit"){if(!i.element)return;const r=Q_(i.element);if(X_(r)){if($i(i.element.col))return w7;if(Ir(i.element.col))return E7}}})}};q_.$inject=["components","simpleMode"];function Q_(n){return $i(n.col)?n.col&&n.col.businessObject.inputExpression.typeRef:n.col&&n.col.businessObject.typeRef}function X_(n){return n==="date"}var C7={__depends__:[Gh,Fd],__init__:["simpleDateEdit"],simpleDateEdit:["type",q_]};const S7=/^\d{4}(?:-\d\d){2}T(?:\d\d:){2}\d\d(?:Z|(?:[@+-][^")]+))?$/,A7=/^\[date and time\("([^"]*)"\)..date and time\("([^"]*)"\)\]$/,T7=/^(<|>)\s*date and time\("([^"]*)"\)$/,O7=/^date and time\("([^"]*)"\)$/,k7="exact",_7="before",P7="after",F7="between";function jf(n){if(!S7.test(n.trim()))return"Date and time must match pattern yyyy-MM-ddTHH:mm:ss[time zone]"}function Id(n,e){if(n===k7)return`date and time("${e[0]}")`;if(n===_7)return`< date and time("${e[0]}")`;if(n===P7)return`> date and time("${e[0]}")`;if(n===F7)return`[date and time("${e[0]}")..date and time("${e[1]}")]`}function Vf(){const n=new Date;return n.setUTCHours(0,0,0,0),n.toISOString().replace(".000Z","Z")}function Mg(n){if(!n||n.trim()==="")return{type:"exact",date:""};let e=n.match(A7);if(e)return{type:"between",dates:[e[1],e[2]]};if(e=n.match(T7),e)return{type:e[1]==="<"?"before":"after",date:e[2]};if(e=n.match(O7),e)return{type:"exact",date:e[1]}}const Y_="exact",M7="before",I7="after",Ig="between";class N7 extends br{constructor(e,t){super(e,t),this._translate=t.injector.get("translate"),this._modeling=t.injector.get("modeling");const{element:i}=this.props.context,r=Mg(i.businessObject.text);if(r){let o;r.date?o=[r.date,""]:r.dates?o=r.dates:o=["",""],this.state={type:r.type,dates:o}}else this.state={type:Y_,dates:["",""]};const s=t.injector.get("debounceInput");this.debouncedEditCell=s(this.editCell.bind(this)),this.editCell=this.editCell.bind(this),this.onTypeChange=this.onTypeChange.bind(this),this.onSetStartDateTodayClick=this.onSetStartDateTodayClick.bind(this),this.onSetEndDateTodayClick=this.onSetEndDateTodayClick.bind(this),this.onStartDateInput=this.onStartDateInput.bind(this),this.onEndDateInput=this.onEndDateInput.bind(this)}editCell(e,t){this._modeling.editCell(e,t)}onTypeChange(e){const{element:t}=this.props.context,{dates:i}=this.state;this.setState({type:e}),Mg(Id(e,i))&&this.editCell(t.businessObject,Id(e,i))}onSetStartDateTodayClick(){const{element:e}=this.props.context,{dates:t,type:i}=this.state,r=Vf();this.setState({dates:[r,t[1]]}),Mg(Id(i,[r,t[1]]))&&this.editCell(e.businessObject,Id(i,[r,t[1]]))}onSetEndDateTodayClick(){const{element:e}=this.props.context,{dates:t,type:i}=this.state,r=Vf();this.setState({dates:[t[0],r]}),Mg(Id(i,[t[0],r]))&&this.editCell(e.businessObject,Id(i,[t[0],r]))}onStartDateInput({value:e}){const{element:t}=this.props.context,{dates:i,type:r}=this.state;this.setState({dates:[e,i[1]]}),this.debouncedEditCell(t.businessObject,Id(r,[e,i[1]]))}onEndDateInput({value:e}){const{element:t}=this.props.context,{dates:i,type:r}=this.state;this.setState({dates:[i[0],e]}),this.debouncedEditCell(t.businessObject,Id(r,[i[0],e]))}render(){const{dates:e,type:t}=this.state,i=[{label:this._translate("Exactly"),value:Y_},{label:this._translate("Before"),value:M7},{label:this._translate("After"),value:I7},{label:this._translate("Between"),value:Ig}];return Re(1,"div","context-menu-container simple-date-edit",[Re(1,"h3","dms-heading",this._translate("Edit date and time"),0),Re(1,"div","dms-fill-row",jn(2,wl,{label:this._translate("Test type"),noInput:!0,onChange:this.onTypeChange,options:i,value:t}),2),Re(1,"h4","dms-heading",t===Ig?this._translate("Edit start date and time"):this._translate("Set date and time"),0),Re(1,"div",null,[jn(2,Qc,{label:t===Ig?this._translate("Start date and time"):this._translate("Date and time"),className:"start-date-input dms-block",onInput:this.onStartDateInput,placeholder:this._translate("e.g. { sample }",{sample:Vf()}),validate:r=>jf(r)&&this._translate(jf(r)),value:e[0]}),Re(1,"p","dms-hint",Re(1,"button","use-today",this._translate("Use today"),0,{type:"button",onClick:this.onSetStartDateTodayClick}),2)],4),t===Ig&&Re(1,"h4","dms-heading",this._translate("Edit end date and time"),0),t===Ig&&Re(1,"div",null,[jn(2,Qc,{label:this._translate("End date and time"),className:"end-date-input dms-block",onInput:this.onEndDateInput,placeholder:this._translate("e.g. { sample }",{sample:Vf()}),validate:r=>jf(r)&&this._translate(jf(r)),value:e[1]}),Re(1,"p","dms-hint",Re(1,"button","use-today",this._translate("Use today"),0,{type:"button",onClick:this.onSetEndDateTodayClick}),2)],4)],0)}}class B7 extends br{constructor(e,t){super(e,t),this._translate=t.injector.get("translate"),this._modeling=t.injector.get("modeling");const{element:i}=this.props.context,r=Mg(i.businessObject.text);this.state={date:r?r.date:""};const s=t.injector.get("debounceInput");this.debouncedEditCell=s(this.editCell.bind(this)),this.editCell=this.editCell.bind(this),this.onClick=this.onClick.bind(this),this.onInput=this.onInput.bind(this)}editCell(e,t){this._modeling.editCell(e,t)}onClick(){const{element:e}=this.props.context,t=Vf();this.setState({date:t}),this.editCell(e.businessObject,`date and time("${t}")`)}onInput({value:e}){const{element:t}=this.props.context;this.setState({date:e}),this.debouncedEditCell(t.businessObject,`date and time("${e}")`)}render(){const{date:e}=this.state;return Re(1,"div","context-menu-container simple-date-edit",[Re(1,"h3","dms-heading",this._translate("Edit date and time"),0),Re(1,"h4","dms-heading",this._translate("Set date and time"),0),Re(1,"div",null,[jn(2,Qc,{label:this._translate("Date and time value"),onInput:this.onInput,placeholder:this._translate("e.g. { sample }",{sample:Vf()}),validate:t=>jf(t)&&this._translate(jf(t)),value:e,className:"dms-block"}),Re(1,"p","dms-hint",Re(1,"button","use-today",this._translate("Use today"),0,{type:"button",onClick:this.onClick}),2)],4)],4)}}let G_=class{constructor(e,t){t.registerProvider(i=>{const r=K_(i);return($i(i.col)||Ir(i.col))&&Z_(r)}),e.onGetComponent("context-menu",(i={})=>{if(i.contextMenuType&&i.contextMenuType==="simple-mode-edit"){if(!i.element)return;const r=K_(i.element);if(Z_(r)){if($i(i.element.col))return N7;if(Ir(i.element.col))return B7}}})}};G_.$inject=["components","simpleMode"];function K_(n){return $i(n.col)?n.col&&n.col.businessObject.inputExpression.typeRef:n.col&&n.col.businessObject.typeRef}function Z_(n){return n==="dateTime"}var R7={__depends__:[Gh,Fd],__init__:["simpleDateTimeEdit"],simpleDateTimeEdit:["type",G_]};const sw={equals:"=",less:"<",lessEquals:"<=",greater:">",greaterEquals:">="};function L7(n){return zs(sw).filter(e=>n===sw[e])[0]}function $7(n){if(!n||j7(n.trim()))return{type:"comparison",values:[]};const e=U7(n);if(e)return e;const t=z7(n);if(t)return t}function j7(n){return n===""}function ow(n,e){return n==="equals"?`duration("${e}")`:`${sw[n]} duration("${e}")`}function Ng(n,e,t,i){return`${t==="exclude"?"]":"["}duration("${n}")..duration("${e}")${i==="exclude"?"[":"]"}`}function V7(n,e){if(n==="yearMonthDuration")return W7(e);if(n==="dayTimeDuration")return H7(e)}function W7(n){return/^P(\d+Y\d+M|\d+Y|\d+M)$/.test(n)}function H7(n){return/^P(\d+DT\d+H|\d+D|T\d+H)$/.test(n)}function J_(n){const e=/^duration\("([^"]*)"\)$/.exec(n);return e&&e[1]}function U7(n){const e=J_(n);if(e)return{type:"comparison",operator:"equals",values:[e]};const{operator:t,value:i}=eP(new RegExp('^(?<operator>=|(:?<|>)=?)\\s*duration\\("(?<value>[^"]*)"\\)$'),n);if(t&&i)return{type:"comparison",values:[i],operator:L7(t)}}function z7(n){const{start:e,end:t,firstValue:i,secondValue:r}=eP(new RegExp('^(?<start>[[\\]])duration\\("(?<firstValue>[^"]*)"\\)\\.\\.duration\\("(?<secondValue>[^"]*)"\\)(?<end>[[\\]])$'),n);if(e&&t)return{type:"range",values:[i,r],start:e==="]"?"exclude":"include",end:t==="["?"exclude":"include"}}function eP(n,e){const{groups:t}=n.exec(e)||{groups:{}};return t}const q7={yearMonthDuration:"Must match PnYnM",dayTimeDuration:"Must match PnDTnH"};class Xv extends br{constructor(e,t){super(e,t),this._translate=t.injector.get("translate"),this._type=e.type,this.onInput=this.onInput.bind(this),this.validate=this.validate.bind(this),this.state={value:e.value}}onInput({value:e}){this.setState({value:e}),this.props.onInput(e)}validate(e){if(!V7(this._type,e))return this._translate(q7[this._type])}_getPlaceholder(){if(this._type==="yearMonthDuration")return this._translate("e.g. { sample }",{sample:"P1Y2M"});this._type==="dayTimeDuration"&&this._translate("e.g. { sample }",{sample:"P1DT2H"})}render(){return jn(2,Qc,{label:this.props.label,type:"text",onInput:this.onInput,placeholder:this._getPlaceholder(),validate:this.validate,value:this.state.value,className:this.props.className})}}const Wf="comparison",Hf="range";class Q7 extends br{constructor(e,t){super(e,t),this._translate=t.injector.get("translate"),this._modeling=t.injector.get("modeling");const{element:i}=this.props.context;this._type=X7(i);const r=$7(i.businessObject.text,this._type);r?this.state={type:r.type,comparisonOperator:r.operator||"equals",startValue:r.values[0]||"",endValue:r.values[1]||"",rangeStartType:r.start||"include",rangeEndType:r.end||"include"}:this.state={type:Wf,comparisonOperator:"equals",startValue:"",endValue:"",rangeStartType:"include",rangeEndType:"include"};const s=t.injector.get("debounceInput");this.debouncedEditCell=s(this.editCell.bind(this)),this.editCell=this.editCell.bind(this),this.onComparisonOperatorChange=this.onComparisonOperatorChange.bind(this),this.onComparisonValueChange=this.onComparisonValueChange.bind(this),this.onTypeChange=this.onTypeChange.bind(this),this.onRangeStartTypeChange=this.onRangeStartTypeChange.bind(this),this.onRangeStartValueChange=this.onRangeStartValueChange.bind(this),this.onRangeEndTypeChange=this.onRangeEndTypeChange.bind(this),this.onRangeEndValueChange=this.onRangeEndValueChange.bind(this)}editCell(e,t){this._modeling.editCell(e,t)}onTypeChange(e){const{element:t}=this.props.context,{comparisonOperator:i,startValue:r,endValue:s,rangeStartType:o,rangeEndType:l}=this.state;e===Wf?this.editCell(t.businessObject,ow(i,r)):this.editCell(t.businessObject,Ng(r,s,o,l)),this.setState({type:e})}onComparisonOperatorChange(e){const{element:t}=this.props.context,{type:i,startValue:r}=this.state;i===Wf&&(this.editCell(t.businessObject,ow(e,r)),this.setState({comparisonOperator:e}))}onComparisonValueChange(e){const{element:t}=this.props.context,{type:i,comparisonOperator:r}=this.state;i===Wf&&(this.debouncedEditCell(t.businessObject,ow(r,e)),this.setState({startValue:e}))}onRangeStartTypeChange(e){const{element:t}=this.props.context,{type:i,startValue:r,endValue:s,rangeEndType:o}=this.state;i===Hf&&(this.editCell(t.businessObject,Ng(r,s,e,o)),this.setState({rangeStartType:e}))}onRangeStartValueChange(e){const{element:t}=this.props.context,{type:i,endValue:r,rangeStartType:s,rangeEndType:o}=this.state;i===Hf&&(this.editCell(t.businessObject,Ng(e,r,s,o)),this.setState({startValue:e}))}onRangeEndTypeChange(e){const{element:t}=this.props.context,{type:i,startValue:r,endValue:s,rangeStartType:o}=this.state;i===Hf&&(this.editCell(t.businessObject,Ng(r,s,o,e)),this.setState({rangeEndType:e}))}onRangeEndValueChange(e){const{element:t}=this.props.context,{type:i,startValue:r,rangeStartType:s,rangeEndType:o}=this.state;i===Hf&&(this.editCell(t.businessObject,Ng(r,e,s,o)),this.setState({endValue:e}))}renderComparison(e,t){const i=[{label:this._translate("Equals"),value:"equals"},{label:this._translate("Less"),value:"less"},{label:this._translate("Less or equals"),value:"lessEquals"},{label:this._translate("Greater"),value:"greater"},{label:this._translate("Greater or equals"),value:"greaterEquals"}];return Re(1,"div","comparison",[Re(1,"h4","dms-heading",bo("Value"),2),Re(1,"div","dms-fill-row dms-input-duration-edit-row",[jn(2,wl,{label:this._translate("Comparison operator"),noInput:!0,onChange:this.onComparisonOperatorChange,options:i,value:e}),bo("\xA0"),jn(2,Xv,{label:this._translate("Duration value"),type:this._type,className:"comparison-duration-input",onInput:this.onComparisonValueChange,value:t})],4)],4)}renderRange(e,t,i,r){const s=[{label:this._translate("Include"),value:"include"},{label:this._translate("Exclude"),value:"exclude"}];return Re(1,"div","range",[Re(1,"h4","dms-heading",this._translate("Start value"),0),Re(1,"div","dms-fill-row dms-input-duration-edit-row",[jn(2,wl,{label:this._translate("Range start operator"),noInput:!0,onChange:this.onRangeStartTypeChange,options:s,value:i}),bo("\xA0"),jn(2,Xv,{label:this._translate("Range start value"),type:this._type,className:"range-start-duration-input",onInput:this.onRangeStartValueChange,value:e})],4),Re(1,"h4","dms-heading",this._translate("End value"),0),Re(1,"div","dms-fill-row dms-input-duration-edit-row",[jn(2,wl,{label:this._translate("Range end operator"),noInput:!0,onChange:this.onRangeEndTypeChange,options:s,value:r}),bo("\xA0"),jn(2,Xv,{label:this._translate("Range end value"),type:this._type,className:"range-end-duration-input",onInput:this.onRangeEndValueChange,value:t})],4)],4)}render(){const{type:e,comparisonOperator:t,startValue:i,endValue:r,rangeStartType:s,rangeEndType:o}=this.state,l=[{label:this._translate("Comparison"),value:Wf},{label:this._translate("Range"),value:Hf}];return Re(1,"div","context-menu-container simple-duration-edit",[Re(1,"h3","dms-heading",this._translate("Edit duration"),0),Re(1,"div","dms-fill-row",jn(2,wl,{label:this._translate("Test type"),noInput:!0,onChange:this.onTypeChange,options:l,value:e}),2),e===Wf&&this.renderComparison(t,i),e===Hf&&this.renderRange(i,r,s,o)],0)}}function X7(n){return n.col.businessObject.inputExpression.typeRef}class Y7 extends br{constructor(e,t){super(e,t),this._translate=t.injector.get("translate"),this._modeling=t.injector.get("modeling");const{element:i}=this.props.context;this._type=G7(i);const r=t.injector.get("debounceInput");this.debouncedEditCell=r(this.editCell.bind(this)),this.editCell=this.editCell.bind(this),this.onInput=this.onInput.bind(this)}editCell(e,t){this._modeling.editCell(e,t)}onInput(e){const{element:t}=this.props.context;this.debouncedEditCell(t.businessObject,`duration("${e}")`)}render(){const e=J_(this.props.context.element.businessObject.text,this._type);return Re(1,"div","context-menu-container simple-duration-edit",[Re(1,"h3","dms-heading",this._translate("Edit duration"),0),Re(1,"h4","dms-heading",this._translate("Set duration"),0),jn(2,Xv,{label:this._translate("Duration value"),onInput:this.onInput,value:e,type:this._type,className:"dms-block"})],4)}}function G7(n){return n.col.businessObject.typeRef}class tP{constructor(e,t){t.registerProvider(i=>{const r=nP(i);return($i(i.col)||Ir(i.col))&&iP(r)}),e.onGetComponent("context-menu",(i={})=>{if(i.contextMenuType&&i.contextMenuType==="simple-mode-edit"){if(!i.element)return;const r=nP(i.element);if(iP(r)){if($i(i.element.col))return Q7;if(Ir(i.element.col))return Y7}}})}}tP.$inject=["components","simpleMode"];function nP(n){return $i(n.col)?n.col&&n.col.businessObject.inputExpression.typeRef:n.col&&n.col.businessObject.typeRef}const K7=["yearMonthDuration","dayTimeDuration"];function iP(n){return K7.includes(n)}var Z7={__depends__:[Gh,Fd],__init__:["simpleDurationEdit"],simpleDurationEdit:["type",tP]};const J7=/^(-?(?:[0-9]|\.[0-9])+)$|^((?:<|>|=){0,2})\s*(-?(?:[0-9]|\.[0-9])+)$/,eV=/^(\[|\]){1}(-?(?:[0-9]|\.[0-9])+){1,}\.\.(-?(?:[0-9]|\.[0-9])+){1,}(\[|\]){1}$/,aw={equals:"=",less:"<",lessEquals:"<=",greater:">",greaterEquals:">="};function tV(n){return zs(aw).filter(e=>n===aw[e])[0]}function rP(n){if(!n||nV(n.trim()))return{type:"comparison"};const e=n.match(J7),t=n.match(eV);if(e){if(iV(e))return{type:"comparison",value:parseFloat(e[1]),operator:"equals"};if(rV(e))return{type:"comparison",value:parseFloat(e[3]),operator:tV(e[2])}}else if(t)return{type:"range",values:[t[2],t[3]].map(i=>parseFloat(i)),start:t[1]==="]"?"exclude":"include",end:t[4]==="["?"exclude":"include"}}function nV(n){return n===""}function iV(n){return n[0]&&n[1]&&!n[2]&&!n[3]}function rV(n){return n[0]&&!n[1]&&n[2]&&n[3]}function lw(n,e){return n==="equals"?`${e}`:`${aw[n]} ${e}`}function Bg(n,e,t,i){return`${t==="exclude"?"]":"["}${n}..${e}${i==="exclude"?"[":"]"}`}const Uf="comparison",zf="range";class sV extends br{constructor(e,t){super(e,t),this._translate=t.injector.get("translate"),this._modeling=t.injector.get("modeling");const{element:i}=this.props.context,r=rP(i.businessObject.text);r?this.state={type:r.type,comparisonOperator:r.operator||"equals",comparisonValue:r.value||0,rangeStartValue:r.values?r.values[0]:0,rangeEndValue:r.values?r.values[1]:0,rangeStartType:r.start||"include",rangeEndType:r.end||"include"}:this.state={type:Uf,comparisonOperator:"equals",comparisonValue:0,rangeStartValue:0,rangeEndValue:0,rangeStartType:"include",rangeEndType:"include"};const s=t.injector.get("debounceInput");this.debouncedEditCell=s(this.editCell.bind(this)),this.editCell=this.editCell.bind(this),this.onComparisonOperatorChange=this.onComparisonOperatorChange.bind(this),this.onComparisonValueChange=this.onComparisonValueChange.bind(this),this.onTypeChange=this.onTypeChange.bind(this),this.onRangeStartTypeChange=this.onRangeStartTypeChange.bind(this),this.onRangeStartValueChange=this.onRangeStartValueChange.bind(this),this.onRangeEndTypeChange=this.onRangeEndTypeChange.bind(this),this.onRangeEndValueChange=this.onRangeEndValueChange.bind(this)}editCell(e,t){this._modeling.editCell(e,t)}onTypeChange(e){const{element:t}=this.props.context,{comparisonOperator:i,comparisonValue:r,rangeStartValue:s,rangeEndValue:o,rangeStartType:l,rangeEndType:h}=this.state;e===Uf?this.editCell(t.businessObject,lw(i,r)):this.editCell(t.businessObject,Bg(s,o,l,h)),this.setState({type:e})}onComparisonOperatorChange(e){const{element:t}=this.props.context,{type:i,comparisonValue:r}=this.state;i===Uf&&(this.editCell(t.businessObject,lw(e,r)),this.setState({comparisonOperator:e}))}onComparisonValueChange(e){const{element:t}=this.props.context,{type:i,comparisonOperator:r}=this.state;i===Uf&&(this.debouncedEditCell(t.businessObject,lw(r,e)),this.setState({comparisonValue:e}))}onRangeStartTypeChange(e){const{element:t}=this.props.context,{type:i,rangeStartValue:r,rangeEndValue:s,rangeEndType:o}=this.state;i===zf&&(this.editCell(t.businessObject,Bg(r,s,e,o)),this.setState({rangeStartType:e}))}onRangeStartValueChange(e){const{element:t}=this.props.context,{type:i,rangeEndValue:r,rangeStartType:s,rangeEndType:o}=this.state;i===zf&&(this.editCell(t.businessObject,Bg(e,r,s,o)),this.setState({rangeStartValue:e}))}onRangeEndTypeChange(e){const{element:t}=this.props.context,{type:i,rangeStartValue:r,rangeEndValue:s,rangeStartType:o}=this.state;i===zf&&(this.editCell(t.businessObject,Bg(r,s,o,e)),this.setState({rangeEndType:e}))}onRangeEndValueChange(e){const{element:t}=this.props.context,{type:i,rangeStartValue:r,rangeStartType:s,rangeEndType:o}=this.state;i===zf&&(this.editCell(t.businessObject,Bg(r,e,s,o)),this.setState({rangeEndValue:e}))}renderComparison(e,t){const i=[{label:this._translate("Equals"),value:"equals"},{label:this._translate("Less"),value:"less"},{label:this._translate("Less or equals"),value:"lessEquals"},{label:this._translate("Greater"),value:"greater"},{label:this._translate("Greater or equals"),value:"greaterEquals"}];return Re(1,"div","comparison",[Re(1,"h4","dms-heading",this._translate("Value"),0),Re(1,"div","dms-fill-row",[jn(2,wl,{label:this._translate("Comparison operator"),noInput:!0,onChange:this.onComparisonOperatorChange,options:i,value:e}),bo("\xA0"),jn(2,Hh,{label:this._translate("Value"),className:"comparison-number-input",onInput:this.onComparisonValueChange,type:"number",value:t})],4)],4)}renderRange(e,t,i,r){const s=[{label:this._translate("Include"),value:"include"},{label:this._translate("Exclude"),value:"exclude"}];return Re(1,"div","range",[Re(1,"h4","dms-heading",this._translate("Start value"),0),Re(1,"div","dms-fill-row",[jn(2,wl,{label:this._translate("Start value"),noInput:!0,onChange:this.onRangeStartTypeChange,options:s,value:i}),bo("\xA0"),jn(2,Hh,{className:"range-start-number-input",onInput:this.onRangeStartValueChange,type:"number",value:e})],4),Re(1,"h4","dms-heading",this._translate("End value"),0),Re(1,"div","dms-fill-row",[jn(2,wl,{label:this._translate("End value"),noInput:!0,onChange:this.onRangeEndTypeChange,options:s,value:r}),bo("\xA0"),jn(2,Hh,{className:"range-end-number-input",onInput:this.onRangeEndValueChange,type:"number",value:t})],4)],4)}render(){const{type:e,comparisonOperator:t,comparisonValue:i,rangeStartValue:r,rangeEndValue:s,rangeStartType:o,rangeEndType:l}=this.state,h=[{label:this._translate("Comparison"),value:Uf},{label:this._translate("Range"),value:zf}];return Re(1,"div","context-menu-container simple-number-edit",[Re(1,"h3","dms-heading",this._translate("Edit number"),0),Re(1,"div","dms-fill-row",jn(2,wl,{label:this._translate("Test type"),noInput:!0,onChange:this.onTypeChange,options:h,value:e}),2),e===Uf&&this.renderComparison(t,i),e===zf&&this.renderRange(r,s,o,l)],0)}}class oV extends br{constructor(e,t){super(e,t),this._translate=t.injector.get("translate"),this._modeling=t.injector.get("modeling");const{element:i}=this.props.context,r=rP(i.businessObject.text);r?this.state={value:r.value}:this.state={value:""};const s=t.injector.get("debounceInput");this.debouncedEditCell=s(this.editCell.bind(this)),this.editCell=this.editCell.bind(this),this.onInput=this.onInput.bind(this)}editCell(e,t){this._modeling.editCell(e,t)}onInput(e){const{element:t}=this.props.context;this.debouncedEditCell(t.businessObject,e),this.setState({value:e})}render(){const{value:e}=this.state;return Re(1,"div","context-menu-container simple-number-edit",[Re(1,"h3","dms-heading",this._translate("Edit number"),0),Re(1,"h4","dms-heading",this._translate("Set value"),0),jn(2,Hh,{onInput:this.onInput,type:"number",value:e})],4)}}class sP{constructor(e,t){t.registerProvider(i=>{const r=oP(i);return($i(i.col)||Ir(i.col))&&aP(r)}),e.onGetComponent("context-menu",(i={})=>{if(i.contextMenuType&&i.contextMenuType==="simple-mode-edit"){if(!i.element)return;const r=oP(i.element);if(aP(r)){if($i(i.element.col))return sV;if(Ir(i.element.col))return oV}}})}}sP.$inject=["components","simpleMode"];function oP(n){return $i(n.col)?n.col&&n.col.businessObject.inputExpression.typeRef:n.col&&n.col.businessObject.typeRef}const aV=["number","integer","long","double"];function aP(n){return aV.includes(n)}var lV={__depends__:[Gh,Fd],__init__:["simpleNumberEdit"],simpleNumberEdit:["type",sP]};function Yv(n){if(!n||lP(n.trim()))return{type:"disjunction",values:[]};let e=n.split(",");const t={type:"disjunction",values:[]};let i="";if(e.forEach(s=>{i+=s,/^"[^"]*"$/.test(i.trim())?(t.values.push(i.trim()),i=""):i+=","}),!i)return t;t.type="negation",t.values=[],i="";const r=n.match(/^\s*not\((.*)\)\s*$/);if(r&&(e=r[1].split(","),e.forEach(s=>{i+=s,/^"[^"]*"$/.test(i.trim())?(t.values.push(i.trim()),i=""):i+=","}),!i))return t}function uV(n){const e=$i(n)?n.inputValues:n.outputValues;return!e||lP(e.text)?[]:e.text.split(",").map(t=>t.trim())}function lP(n){return n===""}const Op="disjunction",Gv="negation",cV="Predefined values",hV="Predefined values",dV="Custom values";class pV extends br{constructor(e,t){super(e,t),this._translate=t.injector.get("translate"),this._modeling=t.injector.get("modeling");let i=Yv(e.context.element.businessObject.text);i||(i={values:[],type:Op});const r=uV(e.context.element.col.businessObject),s=i.values.filter(y=>!cw(r,y)),o=$i(e.context.element.col);let l=r.map(y=>({value:y,isChecked:cw(i.values,y),isRemovable:!1,group:o?this._translate(cV):this._translate(hV)}));o&&(l=l.concat(s.map(y=>({value:y,isChecked:!0,isRemovable:!0,group:this._translate(dV)}))));let h="";!o&&i.values.length&&!cw(r,i.values[0])&&(h=i.values[0]),this.state={items:l,unaryTestsType:i.type,inputValue:h,isOutputValueInputChecked:h!==""};const p=t.injector.get("debounceInput");this.debouncedEditCell=p(this.editCell.bind(this)),this.editCell=this.editCell.bind(this),this.addUnaryTestsListItem=this.addUnaryTestsListItem.bind(this),this.onInput=this.onInput.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onOutputValueInputClick=this.onOutputValueInputClick.bind(this),this.onUnaryTestsListChanged=this.onUnaryTestsListChanged.bind(this),this.onUnaryTestsTypeChange=this.onUnaryTestsTypeChange.bind(this)}editCell(e,t){this._modeling.editCell(e,t)}onUnaryTestsTypeChange(e){const{items:t}=this.state,i=uw(t),{element:r}=this.props.context;e===Op?(this.editCell(r.businessObject,i.join(",")),this.setState({unaryTestsType:Op})):(this.editCell(r.businessObject,`not(${i.join(",")})`),this.setState({unaryTestsType:Gv}))}onUnaryTestsListChanged(e){const t=uw(e),{element:i}=this.props.context,{unaryTestsType:r}=this.state;r===Op?this.editCell(i.businessObject,t.join(",")):this.editCell(i.businessObject,`not(${t.join(",")})`),this.setState({items:e,isOutputValueInputChecked:!1})}onOutputValueInputClick(){const{element:e}=this.props.context,{inputValue:t,items:i}=this.state,r=Yv(t);!r||r.values.length>1||(this.editCell(e.businessObject,`${r.values.join("")}`),this.setState({items:i.map(s=>(s.isChecked=!1,s)),isOutputValueInputChecked:!0}))}onInput({isValid:e,value:t}){const{isOutputValueInputChecked:i}=this.state;this.setState({inputValue:t});const{element:r}=this.props.context;!$i(r)&&e&&i&&this.debouncedEditCell(r.businessObject,t)}onKeyDown({isValid:e,event:t}){if(!fV(t.keyCode))return;const{element:i}=this.props.context,r=$i(i.col);(r||!e)&&(t.stopPropagation(),t.preventDefault()),e&&(r?this.addUnaryTestsListItem():this.onOutputValueInputClick())}addUnaryTestsListItem(){const{inputValue:e,items:t,unaryTestsType:i}=this.state,r=Yv(e);if(!r)return;const{element:s}=this.props.context,o=uw(t),l=[].concat(o,r.values);i===Op?this.editCell(s.businessObject,l.join(",")):this.editCell(s.businessObject,`not(${l.join(",")})`);const h=t.concat(r.values.map(p=>({value:p,isChecked:!0,isRemovable:!0,group:this._translate("Custom values")})));this.setState({items:h,inputValue:""})}render(){const{element:e}=this.props.context,{inputValue:t,isOutputValueInputChecked:i,items:r,unaryTestsType:s}=this.state,o=[{label:this._translate("Match one"),value:Op},{label:this._translate("Match none"),value:Gv}],l=$i(e.col),h=s===Gv,p=!l&&r.length>0;return Re(1,"div","simple-string-edit context-menu-container",[Re(1,"h3","dms-heading",this._translate("Edit string"),0),l&&Re(1,"p",null,jn(2,wl,{label:this._translate("String value"),noInput:!0,onChange:this.onUnaryTestsTypeChange,options:o,value:h?Gv:Op},null,y=>this.selectNode=y),2),jn(2,r_,{onChange:this.onUnaryTestsListChanged,items:r,type:l?"checkbox":"radio"}),l?Re(1,"h4","dms-heading",this._translate("Add values"),0):Re(1,"h4","dms-heading",this._translate("Set value"),0),Re(1,"div","dms-fill-row",[p&&Re(64,"input","cursor-pointer",null,1,{checked:i,onClick:this.onOutputValueInputClick,type:"radio",style:{marginRight:"8px"}}),jn(2,Qc,{label:l?this._translate("Values"):this._translate("Value"),className:"dms-block",onKeyDown:this.onKeyDown,onInput:this.onInput,placeholder:l?this._translate('"value", "value", ...'):this._translate('"value"'),type:"text",validate:y=>{if(!Yv(y))return this._translate("Strings must be in double quotes")},value:t})],0)],0)}}function fV(n){return n===13}function uw(n){return n.filter(e=>e.isChecked).map(e=>e.value)}function cw(n,e){return n.indexOf(e)!==-1}class uP{constructor(e,t){t.registerProvider(i=>($i(i.col)||Ir(i.col))&&cP(i)==="string"),e.onGetComponent("context-menu",(i={})=>{if(i.contextMenuType&&i.contextMenuType==="simple-mode-edit"){if(!i.element)return;if(cP(i.element)==="string")return pV}})}}uP.$inject=["components","simpleMode"];function cP(n){return $i(n.col)?n.col&&n.col.businessObject.inputExpression.typeRef:n.col&&n.col.businessObject.typeRef}var mV={__depends__:[Gh,Fd],__init__:["simpleStringEdit"],simpleStringEdit:["type",uP]};const gV=/^(?:\d\d:){2}\d\d(?:Z|(?:[@+-][^")]+))?$/,yV=/^\[time\("([^"]*)"\)..time\("([^"]*)"\)\]$/,vV=/^(<|>)\s*time\("([^"]*)"\)$/,xV=/^time\("([^"]*)"\)$/,bV="exact",DV="before",wV="after",EV="between";function qf(n){if(!gV.test(n.trim()))return"Time must match pattern hh:mm:ss[time zone]"}function Nd(n,e){if(n===bV)return`time("${e[0]}")`;if(n===DV)return`< time("${e[0]}")`;if(n===wV)return`> time("${e[0]}")`;if(n===EV)return`[time("${e[0]}")..time("${e[1]}")]`}function hw(){return new Date().toISOString().slice(11,-5)+"Z"}function Rg(n){if(!n||n.trim()==="")return{type:"exact",time:""};let e=n.match(yV);if(e)return{type:"between",times:[e[1],e[2]]};if(e=n.match(vV),e)return{type:e[1]==="<"?"before":"after",time:e[2]};if(e=n.match(xV),e)return{type:"exact",time:e[1]}}const hP="exact",CV="before",SV="after",Kv="between";class AV extends br{constructor(e,t){super(e,t),this._translate=t.injector.get("translate"),this._modeling=t.injector.get("modeling");const{element:i}=this.props.context,r=Rg(i.businessObject.text);if(r){let o;r.time?o=[r.time,""]:r.times?o=r.times:o=["",""],this.state={type:r.type,times:o}}else this.state={type:hP,times:["",""]};const s=t.injector.get("debounceInput");this.debouncedEditCell=s(this.editCell.bind(this)),this.editCell=this.editCell.bind(this),this.onTypeChange=this.onTypeChange.bind(this),this.onSetStartTimeNowClick=this.onSetStartTimeNowClick.bind(this),this.onSetEndTimeNowClick=this.onSetEndTimeNowClick.bind(this),this.onStartTimeInput=this.onStartTimeInput.bind(this),this.onEndTimeInput=this.onEndTimeInput.bind(this)}editCell(e,t){this._modeling.editCell(e,t)}onTypeChange(e){const{element:t}=this.props.context,{times:i}=this.state;this.setState({type:e}),Rg(Nd(e,i))&&this.editCell(t.businessObject,Nd(e,i))}onSetStartTimeNowClick(){const{element:e}=this.props.context,{times:t,type:i}=this.state,r=hw();this.setState({times:[r,t[1]]}),Rg(Nd(i,[r,t[1]]))&&this.editCell(e.businessObject,Nd(i,[r,t[1]]))}onSetEndTimeNowClick(){const{element:e}=this.props.context,{times:t,type:i}=this.state,r=hw();this.setState({times:[t[0],r]}),Rg(Nd(i,[t[0],r]))&&this.editCell(e.businessObject,Nd(i,[t[0],r]))}onStartTimeInput({value:e}){const{element:t}=this.props.context,{times:i,type:r}=this.state;this.setState({times:[e,i[1]]}),this.debouncedEditCell(t.businessObject,Nd(r,[e,i[1]]))}onEndTimeInput({value:e}){const{element:t}=this.props.context,{times:i,type:r}=this.state;this.setState({times:[i[0],e]}),this.debouncedEditCell(t.businessObject,Nd(r,[i[0],e]))}render(){const{times:e,type:t}=this.state,i=[{label:this._translate("Exactly"),value:hP},{label:this._translate("Before"),value:CV},{label:this._translate("After"),value:SV},{label:this._translate("Between"),value:Kv}];return Re(1,"div","context-menu-container simple-time-edit",[Re(1,"h3","dms-heading",this._translate("Edit time"),0),Re(1,"div","dms-fill-row",jn(2,wl,{label:this._translate("Time"),noInput:!0,onChange:this.onTypeChange,options:i,value:t}),2),Re(1,"h4","dms-heading",t===Kv?this._translate("Edit start time"):this._translate("Set time"),0),Re(1,"div",null,[jn(2,Qc,{label:this._translate("Start time"),className:"start-time-input dms-block",onInput:this.onStartTimeInput,placeholder:this._translate("e.g. { example } ",{example:Kh()}),validate:r=>qf(r)&&this._translate(qf(r)),value:e[0]}),Re(1,"p","dms-hint",[Re(1,"button","use-now",this._translate("Use now"),0,{type:"button",onClick:this.onSetStartTimeNowClick}),bo(".")],4)],4),t===Kv&&Re(1,"h4","dms-heading",this._translate("Edit end time"),0),t===Kv&&Re(1,"div",null,[jn(2,Qc,{label:this._translate("End time"),className:"end-time-input dms-block",onInput:this.onEndTimeInput,placeholder:this._translate("e.g. { example } ",{example:Kh()}),validate:r=>qf(r)&&this._translate(qf(r)),value:e[1]}),Re(1,"p","dms-hint",[Re(1,"button","use-now",this._translate("Use now"),0,{type:"button",onClick:this.onSetEndTimeNowClick}),bo(".")],4)],4)],0)}}class TV extends br{constructor(e,t){super(e,t),this._translate=t.injector.get("translate"),this._modeling=t.injector.get("modeling");const{element:i}=this.props.context,r=Rg(i.businessObject.text);this.state={date:r?r.date:""};const s=t.injector.get("debounceInput");this.debouncedEditCell=s(this.editCell.bind(this)),this.editCell=this.editCell.bind(this),this.onClick=this.onClick.bind(this),this.onInput=this.onInput.bind(this)}editCell(e,t){this._modeling.editCell(e,t)}onClick(){const{element:e}=this.props.context,t=hw();this.setState({date:t}),this.editCell(e.businessObject,`time("${t}")`)}onInput({value:e}){const{element:t}=this.props.context;this.setState({date:e}),this.debouncedEditCell(t.businessObject,`time("${e}")`)}render(){const{date:e}=this.state;return Re(1,"div","context-menu-container simple-time-edit",[Re(1,"h3","dms-heading",this._translate("Edit time"),0),Re(1,"h4","dms-heading",this._translate("Set time"),0),Re(1,"div",null,[jn(2,Qc,{label:this._translate("Time value"),onInput:this.onInput,placeholder:this._translate("e.g. { example } ",{example:Kh()}),validate:t=>qf(t)&&this._translate(qf(t)),value:e,className:"dms-block"}),Re(1,"p","dms-hint",[Re(1,"button","use-now",this._translate("Use now"),0,{type:"button",onClick:this.onClick}),bo(".")],4)],4)],4)}}class dP{constructor(e,t){t.registerProvider(i=>{const r=pP(i);return($i(i.col)||Ir(i.col))&&fP(r)}),e.onGetComponent("context-menu",(i={})=>{if(i.contextMenuType&&i.contextMenuType==="simple-mode-edit"){if(!i.element)return;const r=pP(i.element);if(fP(r)){if($i(i.element.col))return AV;if(Ir(i.element.col))return TV}}})}}dP.$inject=["components","simpleMode"];function pP(n){return $i(n.col)?n.col&&n.col.businessObject.inputExpression.typeRef:n.col&&n.col.businessObject.typeRef}function fP(n){return n==="time"}var OV={__depends__:[Gh,Fd],__init__:["simpleTimeEdit"],simpleTimeEdit:["type",dP]};class mP extends br{constructor(t,i){super(t,i);$n(this,"onElementsChanged",()=>{this.forceUpdate()});$n(this,"handleMouseDown",t=>{const i=ti(t.target,"th",!1);kV({node:i,event:t,minWidth:this.props.minWidth||150,onEnd:this.saveWidth})});$n(this,"saveWidth",t=>{const{col:i}=this.props,r={};Mt(i,"dmn:DecisionTable")?r.annotationsWidth=t:r.width=t,this.modeling.updateProperties(i,r)});Uu(this)}componentDidMount(){const t=this.getRoot();this.changeSupport.onElementsChanged(t,this.onElementsChanged)}componentWillUnmount(){const t=this.getRoot();this.changeSupport.offElementsChanged(t,this.onElementsChanged)}getRoot(){return this.sheet.getRoot()}isLastInputOrOutput(){const{col:t}=this.props,i=this.getRoot(),r=es(i);if(Mt(t,"dmn:InputClause")){const s=r.get("input");return s.indexOf(t)===s.length-1}else if(Mt(t,"dmn:OutputClause")){const s=r.get("output");return s.indexOf(t)===s.length-1}}render(){const t=this.isLastInputOrOutput()?{right:"-7px",width:"27px"}:null;return Re(1,"div","resize-column-handle",null,1,{onMouseDown:this.handleMouseDown,title:this.translate("Resize"),style:t})}}mP.$inject=["sheet","changeSupport","translate","modeling"];function kV({node:n,event:e,minWidth:t,onEnd:i=_V}){e.preventDefault();const r=n.getBoundingClientRect().width,s=e.clientX;let o;document.addEventListener("mousemove",l),document.addEventListener("mouseup",h);function l(y){y.preventDefault();const w=p(y.clientX);o&&cancelAnimationFrame(o),o=requestAnimationFrame(()=>{n.style.width=w+"px"})}function h(y){y.preventDefault(),document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",h);const w=p(y.clientX);i(w)}function p(y){const w=y-s;return Math.max(r+w,t)}}function _V(){}function gP(n){n.onGetComponent("cell-inner",(e={})=>{const{cellType:t}=e;if(t==="input-cell"||t==="output-cell"||t==="annotations")return mP})}gP.$inject=["components"];var PV={__init__:["columnResizeProvider"],columnResizeProvider:["type",gP]};let FV=class CF extends QS{getModules(){return[...QS._getModules(),...CF._getModules()]}static _getModules(){return[A3,V3,_0,yd,bA,q3,X3,P0,Z3,mf,mj,PV,_j,Bj,Rj,md,Gh,Wj,CA,Uj,Xx,Yj,e7,T0,Fd,h7,C7,R7,Z7,lV,mV,OV,Vx]}};class yP{constructor(e){this._listeners={},e.on("elements.changed",({elements:t})=>{this.elementsChanged(t)}),e.on("element.updateId",({element:t,newId:i})=>{this.updateId(t.id,i)})}elementsChanged(e){const t={},i=e.length;for(let r=0;r<i;r++){const{id:s}=e[r];if(t[s])return;t[s]=!0;const o=this._listeners[s]&&this._listeners[s].length;if(o)for(let l=0;l<o;l++)this._listeners[s][l]&&this._listeners[s][l]()}}onElementsChanged(e,t){this._listeners[e]||(this._listeners[e]=[]),this._listeners[e][this._listeners[e].length]=t}offElementsChanged(e,t){if(this._listeners[e])if(t){const i=this._listeners[e].indexOf(t);i!==-1&&this._listeners[e].splice(i,1)}else this._listeners[e].length=0}updateId(e,t){this._listeners[e]&&(this._listeners[t]=this._listeners[e],delete this._listeners[e])}}yP.$inject=["eventBus"];const MV=1e3;class IV{constructor(){this._listeners={}}getComponent(e,t){const i=this._listeners[e];if(!i)return;let r;for(let s=0;s<i.length&&(r=i[s].callback(t),!r);s++);return r}getComponents(e,t){const i=this._listeners[e];if(!i)return;const r=[];for(let s=0;s<i.length;s++){const o=i[s].callback(t);o&&r.push(o)}if(r.length)return r}onGetComponent(e,t,i){if(vn(t)&&(i=t,t=MV),!In(t))throw new Error("priority must be a number");const r=this._getListeners(e);let s,o;const l={priority:t,callback:i};for(o=0;s=r[o];o++)if(s.priority<t){r.splice(o,0,l);return}r.push(l)}offGetComponent(e,t){const i=this._getListeners(e);let r,s,o;if(t)for(o=i.length-1;r=i[o];o--)s=r.callback,s===t&&i.splice(o,1);else i.length=0}_getListeners(e){let t=this._listeners[e];return t||(this._listeners[e]=t=[]),t}}class NV extends br{constructor(e){super(e);const t=this._injector=e.injector;this._changeSupport=t.get("changeSupport"),this._components=t.get("components"),this._renderer=t.get("renderer")}getChildContext(){return{changeSupport:this._changeSupport,components:this._components,renderer:this._renderer,injector:this._injector}}render(){const e=this._components.getComponents("viewer");return Re(1,"div","viewer-container",e&&e.map((t,i)=>jn(2,t,null,i)),0)}}class vP{constructor(e,t,i,r,s){const{container:o}=i;this._container=o,r.on("renderer.mount",()=>{Hd(jn(2,NV,{injector:s}),o)}),r.on("renderer.unmount",()=>{Hd(null,o)})}getContainer(){return this._container}}vP.$inject=["changeSupport","components","config.renderer","eventBus","injector"];var BV={__init__:["changeSupport","components","renderer"],changeSupport:["type",yP],components:["type",IV],eventBus:["type",Bn],renderer:["type",vP]};let xP=class{constructor(e={}){let{injector:t}=e;if(!t){let{modules:i,config:r}=this._init(e);t=RV(r,i)}this.get=t.get,this.invoke=t.invoke,this.get("eventBus").fire("viewer.init")}_init(e){let r=e,{modules:t}=r,i=Zu(r,["modules"]);return{modules:t,config:i}}destroy(){this.get("eventBus").fire("viewer.destroy")}clear(){this.get("eventBus").fire("viewer.clear")}};function RV(n,e){const t=[{config:["value",n]},BV].concat(e||[]),i=new No(t);return i.init(),i}let bP=class{constructor(e,t){this._eventBus=t,this._viewer=e}getDecision(){return this._viewer.getDecision()}updateId(e,t){var i=this.getDecision();if(e!==i)throw new Error("element !== decision");this._eventBus.fire("element.updateId",{element:e,newId:t}),e.id=t}};bP.$inject=["viewer","eventBus"];var LV={__init__:["elementRegistry"],elementRegistry:["type",bP]};class $V extends br{constructor(e,t){super(e,t),this._viewer=t.injector.get("viewer")}render(){const{name:e}=this._viewer.getDecision();return Re(1,"div","decision-properties",Re(1,"h3","decision-name",e,0),2)}}const jV=1500;let DP=class{constructor(e){e.onGetComponent("viewer",jV,()=>$V)}};DP.$inject=["components"];var VV={__init__:["decisionProperties"],decisionProperties:["type",DP]};let WV=class extends br{constructor(e,t){super(e,t),this._translate=t.injector.get("translate"),this._viewer=t.injector.get("viewer")}render(){const{decisionLogic:e,variable:t}=this._viewer.getDecision();return Re(1,"div","literal-expression-properties",Re(1,"table",null,[Re(1,"tr",null,[Re(1,"td",null,this._translate("Variable name:"),0),Re(1,"td",null,Re(1,"span",null,t.name||"-",0),2)],4),Re(1,"tr",null,[Re(1,"td",null,this._translate("Variable type:"),0),Re(1,"td",null,Re(1,"span",null,this._translate(t.typeRef||"")||"-",0),2)],4),Re(1,"tr",null,[Re(1,"td",null,this._translate("Expression language:"),0),Re(1,"td",null,Re(1,"span",null,e.expressionLanguage||"-",0),2)],4)],4),2)}};const HV=500;class wP{constructor(e){e.onGetComponent("viewer",HV,()=>WV)}}wP.$inject=["components"];var UV={__depends__:[],__init__:["literalExpressionProperties"],literalExpressionProperties:["type",wP]};const zV=2e3;let EP=class{constructor(e){e.onGetComponent("viewer",zV,()=>Up)}};EP.$inject=["components"];var qV={__init__:["poweredBy"],poweredBy:["type",EP]};class QV extends br{constructor(e,t){super(e,t),this._viewer=t.injector.get("viewer")}render(){const{text:e}=this._viewer.getDecision().decisionLogic;return Re(1,"div","textarea",Re(1,"div","content",e,0),2)}}let CP=class{constructor(e){e.onGetComponent("viewer",()=>QV)}};CP.$inject=["components"];var XV={__init__:["textarea"],textarea:["type",CP]};let SP=class extends br{constructor(t,i){super(t,i);$n(this,"onClick",()=>{this._eventBus.fire("showDrd")});const{injector:r}=i;this._translate=r.get("translate"),this._eventBus=r.get("eventBus")}render(){return Re(1,"div","view-drd",Re(1,"button","view-drd-button",this._translate("View DRD"),0,{type:"button",onClick:this.onClick}),2,null,null,t=>this.node=t)}};SP.$inject=["translate"];const YV=2e3;let AP=class{constructor(e,t,i,r){this._injector=r,this._viewer=t,e.onGetComponent("viewer",YV,()=>{if(this.canViewDrd())return SP}),i.on("showDrd",()=>{const s=r.get("_parent",!1),o=this.getDefinitions(),l=s.getView(o);s.open(l)})}canViewDrd(){const e=this._injector.get("_parent",!1);if(!e)return;const t=this.getDefinitions();return!!e.getView(t)}getDefinitions(){return GV(this._viewer.getDecision())}};AP.$inject=["components","viewer","eventBus","injector"];function GV(n){return n.$parent}var KV={__init__:["viewDrd"],viewDrd:["type",AP]};let TP=class bw extends xP{constructor(e={}){const t=bw._createContainer();super(ee(e,{renderer:{container:t}})),this._container=t}open(e){var t=this;return new Promise(function(i,r){var s;try{t._decision&&(t.clear(),t.get("eventBus").fire("renderer.unmount")),t._decision=e,t.get("eventBus").fire("import",e),t.get("eventBus").fire("renderer.mount")}catch(o){s=o}s?(s.warnings=s.warnings||[],r(s)):i({warnings:[]})})}_init(e){let p=e,{modules:t,additionalModules:i}=p,r=Zu(p,["modules","additionalModules"]),s=t||this.getModules(),o=i||[],l=[{viewer:["value",this]}];return{modules:[...s,...o,...l],config:r}}on(e,t,i,r){return this.get("eventBus").on(e,t,i,r)}off(e,t){this.get("eventBus").off(e,t)}_emit(e,t){return this.get("eventBus").fire(e,t)}getDecision(){return this._decision}attachTo(e){if(!e)throw new Error("parentNode required");this.detach(),e.appendChild(this._container),this._emit("attach",{})}detach(){const e=this._container;e.parentNode&&(this._emit("detach",{}),Li(e))}destroy(){super.destroy(),this.detach()}getModules(){return bw._getModules()}static _getModules(){return[LV,nc,VV,UV,qV,XV,KV]}static _createContainer(){return Es('<div class="dmn-literal-expression-container"></div>')}};class ZV extends br{constructor(t,i){super(t,i);$n(this,"onElementsChanged",()=>{this.forceUpdate()});$n(this,"setDecisionName",t=>{this._modeling.editDecisionName(t)});this._viewer=i.injector.get("viewer"),this._modeling=i.injector.get("modeling"),this._translate=i.injector.get("translate"),this.setupChangeListeners({bind:this.getDecision().id})}componentWillUnmount(){this.setupChangeListeners({unbind:this.getDecision().id})}getDecision(){return this._viewer.getDecision()}setupChangeListeners({bind:t,unbind:i}){const{changeSupport:r}=this.context;typeof i=="string"&&r.offElementsChanged(i,this.onElementsChanged),typeof t=="string"&&r.onElementsChanged(t,this.onElementsChanged)}render(){const{name:t}=this.getDecision();return Re(1,"header","decision-properties",jn(2,JV,{label:this._translate("Decision name"),className:"decision-name editor",value:t,onBlur:eW,onChange:this.setDecisionName}),2)}}class JV extends yf{render(){return Re(1,"h3",this.getClassName(),this.getEditor(),0)}}function eW(n){n.target.scroll(0,0)}const tW=1500;class OP{constructor(e){e.onGetComponent("viewer",tW,()=>ZV)}}OP.$inject=["components"];var nW={__depends__:[gd,nc],__init__:["decisionProperties"],decisionProperties:["type",OP]};const kP="is not a registered action",iW="is already registered";let _P=class{constructor(e,t){this._actions={undo(){e.undo()},redo(){e.redo()}}}trigger(e,t){if(!this._actions[e])throw dw(e,kP);return this._actions[e](t)}register(e,t){if(typeof e=="string")return this._registerAction(e,t);$t(e,(i,r)=>{this._registerAction(r,i)})}_registerAction(e,t){if(this.isRegistered(e))throw dw(e,iW);this._actions[e]=t}unregister(e){if(!this.isRegistered(e))throw dw(e,kP);this._actions[e]=void 0}isRegistered(e){return!!this._actions[e]}};_P.$inject=["commandStack","eventBus"];function dw(n,e){return new Error(n+" "+e)}var rW={__init__:["editorActions"],editorActions:["type",_P]};function PP(n){return n.altKey?!1:n.ctrlKey||n.metaKey}function FP(n){return n.shiftKey}let MP=class{constructor(e,t,i){$n(this,"_init",()=>{this._registerDefaultBindings(),this._fire("init")});$n(this,"_destroy",()=>{this._fire("destroy"),this.unbind(),this._listeners=null});$n(this,"_keyHandler",e=>{var t,i,r=this._listeners,s=e.keyCode||e.charCode||-1;for(t=0;i=r[t];t++)if(i(s,e)){e.preventDefault(),e.stopPropagation();return}});$n(this,"unbind",()=>{var e=this._node;e&&(this._fire("unbind"),zn.unbind(e,"keydown",this._keyHandler,!0)),this._node=null});this._config=e||{},this._eventBus=t,this._editorActions=i,this._listeners=[],t.on("viewer.destroy",this._destroy),t.on("viewer.init",this._init),t.on("attach",()=>{this._config.bindTo&&this.bind(e.bindTo)}),t.on("detach",this.unbind)}bind(e){this.unbind(),this._node=e,zn.bind(e,"keydown",this._keyHandler,!0),this._fire("bind")}getBinding(){return this._node}_fire(e){this._eventBus.fire("keyboard."+e,{node:this._node,listeners:this._listeners})}_registerDefaultBindings(){var e=this._listeners,t=this._editorActions;function i(s,o){if(PP(o)&&!FP(o)&&s===90)return t.trigger("undo"),!0}function r(s,o){if(PP(o)&&(s===89||s===90&&FP(o)))return t.trigger("redo"),!0}e.push(i),e.push(r)}addListener(e){this._listeners.unshift(e)}removeListener(e){this._listeners=this._listeners.filter(t=>t!==e)}};MP.$inject=["config.keyboard","eventBus","editorActions"];var IP={__depends__:[rW],__init__:["keyboard"],keyboard:["type",MP]};class sW extends br{constructor(e,t){super(e,t),this._translate=t.injector.get("translate"),this._viewer=t.injector.get("viewer"),this._modeling=t.injector.get("modeling"),this._dataTypes=t.injector.get("dataTypes");const i=this._viewer.getDecision();this.state={name:i.variable.name,typeRef:i.variable.typeRef},this.setVariableName=this.setVariableName.bind(this),this.setVariableType=this.setVariableType.bind(this)}setVariableName(e){this._modeling.editVariableName(e),this.setState({name:e})}setVariableType(e){e===""?(this._modeling.editVariableType(void 0),this.setState({typeRef:void 0})):(this._modeling.editVariableType(e),this.setState({typeRef:e}))}render(){const{name:e,typeRef:t}=this.state,i=this._dataTypes.getAll().map(r=>({label:this._translate(r),value:r}));return Re(1,"div","literal-expression-properties",Re(1,"table",null,[Re(1,"tr",null,[Re(1,"td",null,this._translate("Variable name:"),0),Re(1,"td",null,jn(2,Hh,{label:this._translate("Variable name"),className:"variable-name-input",onInput:this.setVariableName,placeholder:this._translate("name"),value:e||""}),2)],4),Re(1,"tr",null,[Re(1,"td",null,this._translate("Variable type:"),0),Re(1,"td",null,Re(1,"div","dms-fill-row",jn(2,wl,{label:this._translate("Variable type"),onChange:this.setVariableType,options:i,value:t,className:"variable-type-select dms-block"}),2),2)],4),jn(2,oW)],4),2)}}class oW extends br{constructor(e,t){super(e,t),this._translate=t.injector.get("translate"),this._viewer=t.injector.get("viewer"),this._modeling=t.injector.get("modeling"),this._expressionLanguages=t.injector.get("expressionLanguages"),this.setExpressionLanguage=this.setExpressionLanguage.bind(this)}setExpressionLanguage(e){e===""?this._modeling.editExpressionLanguage(void 0):this._modeling.editExpressionLanguage(e)}_getExpressionLanguage(){const t=this._viewer.getDecision().decisionLogic;return t&&t.expressionLanguage?t.expressionLanguage.toLowerCase():this._getDefaultExpressionLanguage()}_getDefaultExpressionLanguage(){return this._expressionLanguages.getDefault().value}_shouldRender(){return this._expressionLanguages.getAll().length>1?!0:this._getExpressionLanguage()!==this._getDefaultExpressionLanguage()}render(){if(!this._shouldRender())return null;const e=this._getExpressionLanguage(),t=this._expressionLanguages.getAll();return Re(1,"tr",null,[Re(1,"td",null,this._translate("Expression language:"),0),Re(1,"td",null,Re(1,"div","dms-fill-row",jn(2,wl,{label:this._translate("Expression language"),onChange:this.setExpressionLanguage,options:t,value:e,className:"expression-language-select dms-block"}),2),2)],4)}}const aW=500;class NP{constructor(e){e.onGetComponent("viewer",aW,()=>sW)}}NP.$inject=["components"];var lW={__depends__:[gd,IP,md,lb],__init__:["literalExpressionProperties"],literalExpressionProperties:["type",NP]};let BP=class SF{constructor(e,t,i){this._commandStack=e,this._viewer=t,this._eventBus=i,i.on("viewer.init",()=>{uW(this.getHandlers(),e)})}getHandlers(){return SF._getHandlers()}static _getHandlers(){return{"element.updateProperties":qv}}getDecision(){return this._viewer.getDecision()}editDecisionName(e){const i={element:this.getDecision(),properties:{name:e}};this._commandStack.execute("element.updateProperties",i)}editDecisionId(e){const i={element:this.getDecision(),properties:{id:e}};this._commandStack.execute("element.updateProperties",i)}editLiteralExpressionText(e){const r={element:this.getDecision().decisionLogic,properties:{text:e}};this._commandStack.execute("element.updateProperties",r)}editExpressionLanguage(e){const r={element:this.getDecision().decisionLogic,properties:{expressionLanguage:e}};this._commandStack.execute("element.updateProperties",r)}editVariableName(e){const r={element:this.getDecision().variable,properties:{name:e}};this._commandStack.execute("element.updateProperties",r)}editVariableType(e){const r={element:this.getDecision().variable,properties:{typeRef:e}};this._commandStack.execute("element.updateProperties",r)}};BP.$inject=["commandStack","viewer","eventBus"];function uW(n,e){$t(n,function(t,i){e.registerHandler(i,t)})}var cW={__init__:["idChangeBehavior","modeling"],commandStack:["type",Ha],idChangeBehavior:["type",Fm],modeling:["type",BP]};let hW=class extends br{constructor(e,t){super(e,t),this._modeling=t.injector.get("modeling"),this._viewer=t.injector.get("viewer"),this._expressionLanguages=t.injector.get("expressionLanguages"),this._variableResolver=t.injector.get("variableResolver",!1),this._translate=t.injector.get("translate"),this.editLiteralExpressionText=this.editLiteralExpressionText.bind(this),this.onElementsChanged=this.onElementsChanged.bind(this);const{id:i}=this.getLiteralExpression();t.changeSupport.onElementsChanged(i,this.onElementsChanged)}getLiteralExpression(){return this._viewer.getDecision().decisionLogic}onElementsChanged(){this.forceUpdate()}editLiteralExpressionText(e){this._modeling.editLiteralExpressionText(e)}getEditor(){return this.isFeel()?dW:pW}isFeel(){return this.getExpressionLanguage()==="feel"}getExpressionLanguage(){return this.getLiteralExpression().expressionLanguage||this._expressionLanguages.getDefault().value}_getVariables(){const e=this.getLiteralExpression();return this._variableResolver&&this._variableResolver.getVariables(e)}render(){const{text:e}=this.getLiteralExpression(),t=this.getEditor(),i=this._getVariables();return jn(2,t,{label:this._translate("Literal expression editor"),className:"textarea editor",value:e,onChange:this.editLiteralExpressionText,variables:i})}},dW=class extends br{render(){return jn(2,Hv,{label:this.props.label,className:this.props.className,value:this.props.value,onInput:this.props.onChange,variables:this.props.variables})}},pW=class extends yf{render(){return Re(1,"div",this.getClassName(),this.getEditor(),0)}};class RP{constructor(e){e.onGetComponent("viewer",()=>hW)}}RP.$inject=["components"];var fW={__depends__:[gd,nc],__init__:["textarea"],textarea:["type",RP]};let mW=class AF extends TP{getModules(){return[...TP._getModules(),...AF._getModules()]}static _getModules(){return[nW,IP,lW,cW,md,P0,fW,Vx]}};class LP{constructor(e){e.onGetComponent("viewer",()=>gW),e.onGetComponent("viewer",()=>yW),e.onGetComponent("viewer",()=>vW)}}$n(LP,"$inject",["components"]);function gW(n,{injector:e}){const i=e.get("components").getComponents("header");return Re(1,"div","dmn-boxed-expression-section dmn-boxed-expression-header",i&&i.map((r,s)=>jn(2,r,null,s)),0)}function yW(n,{injector:e}){const i=e.get("components").getComponents("body");return Re(1,"div","dmn-boxed-expression-section dmn-boxed-expression-body",i&&i.map((r,s)=>jn(2,r,null,s)),0)}function vW(n,{injector:e}){const i=e.get("components").getComponents("footer");return Re(1,"div","dmn-boxed-expression-section dmn-boxed-expression-footer",i&&i.map((r,s)=>jn(2,r,null,s)),0)}class $P{constructor(e){e.onGetComponent("viewer",()=>{const t=e.getComponents("table.before")||[];return()=>Re(1,"div",null,t.map((i,r)=>jn(2,i,null,r)),0)})}}$n($P,"$inject",["components"]);var xW={__init__:["viewRenderer","tableJsSupport"],viewRenderer:["type",LP],tableJsSupport:["type",$P]};const bW=2e3;class jP{constructor(e){e.onGetComponent("viewer",bW,()=>Up)}}jP.$inject=["components"];var DW={__init__:["poweredBy"],poweredBy:["type",jP]};class VP{constructor(e){e.onGetComponent("expression",({expression:t})=>{if(Mt(t,"dmn:LiteralExpression"))return wW})}}$n(VP,"$inject",["components"]);function wW({expression:n},e){const i=e.injector.get("literalExpression").getText(n);return Re(1,"div","textarea",Re(1,"div","content",i,0),2)}class WP{getText(e){return e.get("text")}}var EW={__init__:["literalExpressionComponent"],literalExpressionComponent:["type",VP],literalExpression:["type",WP]};class HP{getParameters(e){return e.get("formalParameter")}getBody(e){return e.get("body")}getKind(e){return e.get("kind")||"FEEL"}}let CW=(gw=class{constructor(e){e.onGetComponent("expression",({expression:t})=>{if(Mt(t,"dmn:FunctionDefinition"))return SW})}},$n(gw,"$inject",["components"]),gw);function SW({expression:n},e){const t=e.injector.get("functionDefinition"),i=t.getKind(n),r=t.getParameters(n),s=t.getBody(n);return Re(1,"div","function-definition",[jn(2,TW,{kind:i}),jn(2,OW,{parameters:r}),jn(2,_W,{expression:s})],4)}const AW={FEEL:"F",Java:"J",PMML:"P"};function TW({kind:n},e){const t=e.injector.get("translate");return Re(1,"div","function-definition-kind",AW[n],0,{title:t("Function kind: {kind}",{kind:n})})}function OW({parameters:n}){return Re(1,"div","function-definition-parameters",Re(1,"div",null,[bo("("),n.reduce((e,t)=>e.concat(jn(2,kW,{parameter:t}),", "),[]).slice(0,-1),bo(")")],0),2)}function kW({parameter:n}){const{name:e,typeRef:t}=n,i=e||"<unnamed>";return Re(1,"span",null,t?`${i}: ${t}`:i,0)}function _W({expression:n},e){const t=e.components.getComponent("expression",{expression:n});return Re(1,"div","function-definition-body",jn(2,t,{expression:n}),2)}var PW={__init__:["functionDefinitionComponent"],functionDefinition:["type",HP],functionDefinitionComponent:["type",CW]};class UP extends br{constructor(t,i){super(t,i);$n(this,"onClick",()=>{this._eventBus.fire("showDrd")});const{injector:r}=i;this._translate=r.get("translate"),this._eventBus=r.get("eventBus")}render(){return Re(1,"div","view-drd",Re(1,"button","view-drd-button",this._translate("View DRD"),0,{type:"button",onClick:this.onClick}),2,null,null,t=>this.node=t)}}UP.$inject=["translate"];const FW=2e3;class zP{constructor(e,t,i){this._injector=i,e.onGetComponent("viewer",FW,()=>{if(this.canViewDrd())return UP}),t.on("showDrd",()=>{const r=i.get("_parent",!1),s=r.getDefinitions(),o=r.getView(s);r.open(o)})}canViewDrd(){const e=this._injector.get("_parent",!1);if(!e)return;const t=e.getDefinitions();return!!e.getView(t)}}zP.$inject=["components","eventBus","injector"];var MW={__init__:["viewDrd"],viewDrd:["type",zP]};function IW(n,e){const t=e.injector.get("viewer"),{name:i}=t.getRootElement();return Re(1,"div","element-properties",Re(1,"h2","element-name",i,0),2)}class qP{constructor(e){e.onGetComponent("header",()=>IW)}}qP.$inject=["components"];var NW={__init__:["elementProperties"],elementProperties:["type",qP]};const BW=100;class QP{constructor(e){e.onGetComponent("body",()=>RW),e.onGetComponent("expression",BW,()=>$W)}}$n(QP,"$inject",["components"]);function RW(n,{injector:e}){const t=e.get("components"),r=e.get("viewer").getRootElement(),s=LW(r),o=t.getComponent("expression",{expression:s});return jn(2,o,{expression:s})}function LW(n){if(Mt(n,"dmn:Decision"))return n.get("decisionLogic");if(Mt(n,"dmn:BusinessKnowledgeModel"))return n.get("encapsulatedLogic")}function $W({expression:n}){return Re(1,"div",null,Re(1,"span",null,[bo("Expression of type "),n.$type,bo(" is not supported.")],0,{style:"color:red;"}),2)}var jW={__init__:["elementLogic"],elementLogic:["type",QP]};class pw{constructor(e){this._viewer=e}getName(){const e=this.getVariable(),t=this._getElement();return(e?e.get("name"):null)||t.get("name")}getType(){const e=this.getVariable();return e?e.get("typeRef"):"Any"}_getElement(){return this._viewer.getRootElement()}getVariable(){return this._getElement().get("variable")}}$n(pw,"$inject",["viewer"]);let VW=(yw=class{constructor(e){e.onGetComponent("footer",()=>WW)}},$n(yw,"$inject",["components"]),yw);function WW(n,e){const t=e.injector.get("elementVariable"),i=e.injector.get("translate"),r=t.getName(),s=t.getType();return Re(1,"div","element-variable",[Re(1,"h2",null,bo("Result"),2),Re(1,"div","element-variable-name",[Re(1,"span","element-variable-name-label",i("Variable name"),0),Re(1,"span",null,r,0)],4),Re(1,"div","element-variable-type",[Re(1,"span","element-variable-type-label",i("Variable type"),0),Re(1,"span",null,s,0)],4)],4)}var HW={__init__:["elementVariableComponent"],elementVariable:["type",pw],elementVariableComponent:["type",VW]};class fw extends xP{constructor(e={}){const t=fw._createContainer();super(ee(e,{renderer:{container:t}})),this._container=t}open(e){const t=this.get("eventBus");return new Promise((i,r)=>{let s;try{this.getRootElement()&&(this.clear(),t.fire("renderer.unmount")),this._setRootElement(e),t.fire("import",e),t.fire("renderer.mount")}catch(o){s=o}s?(s.warnings=s.warnings||[],r(s)):i({warnings:[]})})}_init(e){let p=e,{modules:t,additionalModules:i}=p,r=Zu(p,["modules","additionalModules"]),s=t||this.getModules(),o=i||[],l=[{viewer:["value",this]}];return{modules:[...s,...o,...l],config:r}}on(e,t,i,r){return this.get("eventBus").on(e,t,i,r)}off(e,t){this.get("eventBus").off(e,t)}_emit(e,t){return this.get("eventBus").fire(e,t)}getRootElement(){return this._root}_setRootElement(e){this._root=e}attachTo(e){if(!e)throw new Error("parentNode required");this.detach(),e.appendChild(this._container),this._emit("attach",{})}detach(){const e=this._container;e.parentNode&&(this._emit("detach",{}),Li(e))}destroy(){super.destroy(),this.detach()}getModules(){return[xW,nc,DW,MW,NW,jW,PW,EW,HW]}static _createContainer(){return Es('<div class="dmn-boxed-expression-container"></div>')}}const XP="is not a registered action",UW="is already registered";let YP=class{constructor(e,t){this._actions={undo(){e.undo()},redo(){e.redo()}}}trigger(e,t){if(!this._actions[e])throw mw(e,XP);return this._actions[e](t)}register(e,t){if(typeof e=="string")return this._registerAction(e,t);$t(e,(i,r)=>{this._registerAction(r,i)})}_registerAction(e,t){if(this.isRegistered(e))throw mw(e,UW);this._actions[e]=t}unregister(e){if(!this.isRegistered(e))throw mw(e,XP);this._actions[e]=void 0}isRegistered(e){return!!this._actions[e]}};YP.$inject=["commandStack","eventBus"];function mw(n,e){return new Error(n+" "+e)}var zW={__init__:["editorActions"],editorActions:["type",YP]};function GP(n){return n.altKey?!1:n.ctrlKey||n.metaKey}function KP(n){return n.shiftKey}class ZP{constructor(e,t,i){$n(this,"_init",()=>{this._registerDefaultBindings(),this._fire("init")});$n(this,"_destroy",()=>{this._fire("destroy"),this.unbind(),this._listeners=null});$n(this,"_keyHandler",e=>{var t,i,r=this._listeners,s=e.keyCode||e.charCode||-1;for(t=0;i=r[t];t++)if(i(s,e)){e.preventDefault(),e.stopPropagation();return}});$n(this,"unbind",()=>{var e=this._node;e&&(this._fire("unbind"),zn.unbind(e,"keydown",this._keyHandler,!0)),this._node=null});this._config=e||{},this._eventBus=t,this._editorActions=i,this._listeners=[],t.on("viewer.destroy",this._destroy),t.on("viewer.init",this._init),t.on("attach",()=>{this._config.bindTo&&this.bind(e.bindTo)}),t.on("detach",this.unbind)}bind(e){this.unbind(),this._node=e,zn.bind(e,"keydown",this._keyHandler,!0),this._fire("bind")}getBinding(){return this._node}_fire(e){this._eventBus.fire("keyboard."+e,{node:this._node,listeners:this._listeners})}_registerDefaultBindings(){var e=this._listeners,t=this._editorActions;function i(s,o){if(GP(o)&&!KP(o)&&s===90)return t.trigger("undo"),!0}function r(s,o){if(GP(o)&&(s===89||s===90&&KP(o)))return t.trigger("redo"),!0}e.push(i),e.push(r)}addListener(e){this._listeners.unshift(e)}removeListener(e){this._listeners=this._listeners.filter(t=>t!==e)}}ZP.$inject=["config.keyboard","eventBus","editorActions"];var qW={__depends__:[zW],__init__:["keyboard"],keyboard:["type",ZP]};class JP extends va{constructor(t,i){super(t);$n(this,"updateName",({context:t})=>{const{element:i,properties:r}=t;this.isNameChanged(r)&&(this.isVariable(i)?this.handleVariableNameChange(i):this.isVariableContainer(i)&&this.handleVariableContainerNameChange(i))});this._modeling=i,this.postExecuted("element.updateProperties",this.updateName)}isNameChanged(t){return"name"in t}isVariable(t){const i=eF(t);return Mt(t,"dmn:InformationItem")&&i&&i.get("variable")===t}isVariableContainer(t){const i=t.get("variable");return i&&Mt(i,"dmn:InformationItem")}handleVariableNameChange(t){const i=eF(t),r=t.get("name");r!==i.get("name")&&this._modeling.updateProperties(i,{name:r})}handleVariableContainerNameChange(t){const i=t.get("variable"),r=t.get("name");i&&r!==i.get("name")&&this._modeling.updateProperties(i,{name:r})}}$n(JP,"$inject",["eventBus","modeling"]);function eF(n){return n.$parent}class tF{constructor(e,t,i){this._commandStack=e,this._viewer=t,this._eventBus=i,QW(this._getHandlers(),e)}_getHandlers(){return{"element.updateProperties":qv}}updateProperties(e,t){const i={element:e,properties:t};this._commandStack.execute("element.updateProperties",i)}}tF.$inject=["commandStack","viewer","eventBus"];function QW(n,e){$t(n,function(t,i){e.registerHandler(i,t)})}var XW={__init__:["idChangeBehavior","modeling","nameChangeBehavior"],commandStack:["type",Ha],idChangeBehavior:["type",Fm],modeling:["type",tF],nameChangeBehavior:["type",JP]};function kp(n,e){return function(t){return Tc(jn(2,YW,qi(Jt({},t),{_component:n,_selectDependencies:e})))}}class YW extends br{constructor(t,i){super(t,i);$n(this,"onChange",({elements:t})=>{this.props._selectDependencies(this.props).some(r=>t.includes(r))&&this.forceUpdate()});this._eventBus=i.injector.get("eventBus")}componentDidMount(){this._subscribe()}componentWillUnmount(){this._unsubscribe()}_subscribe(){this._eventBus.on("elements.changed",this.onChange)}_unsubscribe(){this._eventBus.off("elements.changed",this.onChange)}render(){const t=this.props._component;return Tc(jn(2,t,Jt({},this.props)))}}class GW extends br{constructor(t,i){super(t,i);$n(this,"editLiteralExpressionText",t=>{const i=this.getLiteralExpression();this._literalExpression.setText(i,t)});this._literalExpression=i.injector.get("literalExpression"),this._translate=i.injector.get("translate"),this._expressionLanguages=i.injector.get("expressionLanguages"),this._variableResolver=i.injector.get("variableResolver",!1)}getLiteralExpression(){return this.props.expression}getEditor(){return this.isFeel()?KW:ZW}isFeel(){const t=this.getLiteralExpression();return cl(t)}_getVariables(){const t=this.getLiteralExpression();return this._variableResolver&&this._variableResolver.getVariables(t)}render(){const{text:t}=this.getLiteralExpression(),i=this.getEditor(),r=this._getVariables(),s=this._translate("Literal expression");return jn(2,i,{label:s,className:"textarea editor",value:t,onChange:this.editLiteralExpressionText,variables:r})}}function KW(n){return Tc(jn(2,Hv,qi(Jt({},n),{onInput:n.onChange})))}class ZW extends yf{render(){return Re(1,"div",this.getClassName(),this.getEditor(),0)}}const JW=kp(GW,n=>[n.expression]);class nF{constructor(e){e.onGetComponent("expression",({expression:t})=>{if(Mt(t,"dmn:LiteralExpression"))return JW})}}$n(nF,"$inject",["components"]);class iF extends WP{constructor(e){super(),this._modeling=e}setText(e,t){this._modeling.updateProperties(e,{text:t})}}iF.$inject=["modeling"];var eH={__init__:["literalExpressionComponent"],literalExpressionComponent:["type",nF],literalExpression:["type",iF]};class rF extends HP{constructor(e,t){super(),this._modeling=e,this._dmnFactory=t}addParameter(e){this._modeling.updateProperties(e,{formalParameter:[...this.getParameters(e),this._dmnFactory.create("dmn:InformationItem",{name:"",typeRef:""})]})}removeParameter(e,t){this._modeling.updateProperties(e,{formalParameter:this.getParameters(e).filter(i=>i!==t)})}updateParameter(e,t){this._modeling.updateProperties(e,t)}setKind(e,t){this._modeling.updateProperties(e,{kind:t})}}$n(rF,"$inject",["modeling","dmnFactory"]);function sF({label:n,onClick:e}){return Re(1,"button","edit-button dmn-icon-edit",null,1,{"aria-label":n,type:"button",onClick:e})}class oF{constructor(e){e.onGetComponent("expression",({expression:t})=>{if(Mt(t,"dmn:FunctionDefinition"))return tH})}}$n(oF,"$inject",["components"]);const tH=kp(nH,n=>[n.expression]);function nH({expression:n},e){const t=e.injector.get("functionDefinition"),i=e.injector.get("contextMenu"),r=t.getKind(n),s=t.getParameters(n),o=t.getBody(n),l=p=>{const y=aF(p);i.open(y,{contextMenuType:"kind-editor",expression:n})},h=p=>{const y=aF(p);i.open(y,{contextMenuType:"formal-parameters-editor",expression:n})};return Re(1,"div","function-definition",[jn(2,rH,{kind:r,openEditor:l}),jn(2,sH,{parameters:s,openEditor:h}),jn(2,lH,{expression:o})],4)}const iH={FEEL:"F",Java:"J",PMML:"P"};function rH({kind:n,openEditor:e},t){const i=t.injector.get("translate");return Re(1,"div","function-definition-kind",[iH[n],jn(2,sF,{label:i("Edit function kind"),onClick:e})],0)}function sH({openEditor:n,parameters:e},t){const i=t.injector.get("translate");return Re(1,"div","function-definition-parameters",[Re(1,"div",null,[bo("("),e.reduce((r,s)=>r.concat(jn(2,oH,{parameter:s}),", "),[]).slice(0,-1),bo(")")],0),jn(2,sF,{label:i("Edit formal parameters"),onClick:n})],4)}const oH=kp(aH,n=>[n.parameter]);function aH({parameter:n}){const{name:e,typeRef:t}=n,i=e||"<unnamed>";return Re(1,"span",null,t?`${i}: ${t}`:i,0)}function lH({expression:n},e){const t=e.components.getComponent("expression",{expression:n});return Re(1,"div","function-definition-body",jn(2,t,{expression:n}),2)}function aF(n){const e=n.target.parentElement,t=e.getBoundingClientRect();return{x:t.x,y:t.y}}const uH=[{value:"FEEL",label:"FEEL"},{value:"Java",label:"Java"},{value:"PMML",label:"PMML"}];class lF{constructor(e){e.onGetComponent("context-menu",(t={})=>{if(t.contextMenuType&&t.contextMenuType==="kind-editor")return cH})}}$n(lF,"$inject",["components"]);function cH({context:{expression:n}},e){const t=e.injector.get("functionDefinition"),i=e.injector.get("translate"),r=t.getKind(n),s=o=>{t.setKind(n,o)};return Re(1,"div","context-menu-container",[Re(1,"h3",null,i("Edit function kind"),0),jn(2,wl,{label:i("Kind"),options:uH,value:r,onChange:s,noInput:!0})],4)}class uF{constructor(e){e.onGetComponent("context-menu",(t={})=>{if(t.contextMenuType&&t.contextMenuType==="formal-parameters-editor")return hH})}}$n(uF,"$inject",["components"]);const hH=kp(dH,n=>[n.context.expression]);function dH({context:{expression:n}},e){const t=e.injector.get("functionDefinition"),i=e.injector.get("translate"),r=t.getParameters(n),s=l=>{t.removeParameter(n,l)},o=()=>{t.addParameter(n)};return Re(1,"div","context-menu-container formal-parameters",[Re(1,"h3",null,i("Edit formal parameters"),0),r.length?Re(1,"table",null,[Re(1,"thead",null,Re(1,"tr",null,[Re(1,"th",null,bo("Name"),2),Re(1,"th",null,bo("Type"),2)],4),2),Re(1,"tbody",null,r.map((l,h)=>jn(2,pH,{parameter:l,remove:()=>s(l)},h)),0)],4):null,Re(1,"button","add-parameter",i("Add parameter"),0,{type:"button",onClick:o})],0)}const pH=kp(function({parameter:n,remove:e},t){const i=t.injector.get("dataTypes"),r=t.injector.get("translate"),s=t.injector.get("functionDefinition"),{name:o,typeRef:l}=n,h=w=>{s.updateParameter(n,{name:w})},p=w=>{s.updateParameter(n,{typeRef:w})},y=i.getAll().map(w=>({label:r(w),value:w}));return Re(1,"tr","function-definition-parameter",[Re(1,"td",null,jn(2,Hh,{onInput:h,value:o}),2),Re(1,"td",null,jn(2,wl,{onChange:p,value:l,options:y}),2),Re(1,"td",null,Re(1,"button","dmn-icon-trash",null,1,{type:"button",onClick:e,"aria-label":r("Remove parameter")}),2)],4)},n=>[n.parameter]);var fH={__init__:["formalParametersEditorComponent","functionDefinitionComponent","kindEditorComponent"],__depends__:[yd],formalParametersEditorComponent:["type",uF],functionDefinition:["type",rF],functionDefinitionComponent:["type",oF],kindEditorComponent:["type",lF]};const mH=kp(function(n,e){const{element:t}=n,i=e.injector.get("modeling"),r=e.injector.get("translate"),s=t.get("name"),o=l=>{i.updateProperties(t,{name:l})};return jn(2,Hh,{label:r("Element name"),className:"element-name editor",value:s,onInput:o})},n=>[n.element]);function gH(n,e){const i=e.injector.get("viewer").getRootElement();return Re(1,"div","element-properties",jn(2,mH,{element:i}),2)}class cF{constructor(e){e.onGetComponent("header",()=>gH)}}cF.$inject=["components"];var yH={__depends__:[gd],__init__:["elementProperties"],elementProperties:["type",cF]};class hF{constructor(e,t){this._eventBus=t,this._viewer=e}updateId(e,t){const i=this._viewer.getRootElement();if(e!==i)throw new Error("element !== rootElement");this._eventBus.fire("element.updateId",{element:e,newId:t}),e.id=t}}hF.$inject=["viewer","eventBus"];class dF{constructor(e){this._moddle=e}create(e,t={}){return this._moddle.create(e,t)}}$n(dF,"$inject",["moddle"]);var vH={__init__:["elementRegistry"],elementRegistry:["type",hF],dmnFactory:["type",dF]};class pF extends pw{constructor(e,t,i){super(e),this._modeling=t,this._dmnFactory=i}setType(e){const t=this.getVariable();if(!t){const i=this._getElement();this._modeling.updateProperties(i,{variable:this._dmnFactory.create("dmn:InformationItem",{name:i.get("name"),typeRef:e})});return}this._modeling.updateProperties(t,{typeRef:e})}}$n(pF,"$inject",["viewer","modeling","dmnFactory"]);const fF="dmn-boxed-expression-variable-type";class mF{constructor(e,t){const i=kp(xH,()=>[t.getVariable()]);e.onGetComponent("footer",()=>i)}}$n(mF,"$inject",["components","elementVariable"]);function xH(n,e){const t=e.injector.get("elementVariable"),i=e.injector.get("translate"),r=t.getName();return Re(1,"div","element-variable",[Re(1,"h2",null,bo("Result"),2),Re(1,"div","element-variable-name",[Re(1,"span","element-variable-name-label",i("Variable name"),0),Re(1,"span",null,r,0)],4),Re(1,"div","element-variable-type",[Re(1,"label","element-variable-type-label",bo("Result type"),2,{for:fF}),jn(2,bH)],4)],4)}function bH(n,e){const t=e.injector.get("elementVariable"),i=e.injector.get("dataTypes"),r=e.injector.get("translate"),s=t.getType(),o=h=>t.setType(h),l=i.getAll().map(h=>({label:r(h),value:h}));return jn(2,wl,{value:s,onChange:o,options:l,id:fF})}var DH={__init__:["elementVariableComponent"],elementVariable:["type",pF],elementVariableComponent:["type",mF]};class wH extends fw{getModules(){return[...super.getModules(),vH,XW,yH,fH,md,eH,qW,P0,DH,Vx]}}class EH extends Ca{_getViewProviders(){return[{id:"drd",constructor:hf,opens:"dmn:Definitions"},{id:"decisionTable",constructor:FV,opens(e){return Mt(e,"dmn:Decision")&&Mt(e.decisionLogic,"dmn:DecisionTable")}},{id:"literalExpression",constructor:mW,opens(e){return Mt(e,"dmn:Decision")&&Mt(e.decisionLogic,"dmn:LiteralExpression")}},{id:"boxedExpression",constructor:wH,opens(e){return Mt(e,"dmn:BusinessKnowledgeModel")&&Po(e)}}]}_getInitialView(e,...t){let i=super._getInitialView(e,...t);if(!i)return;const r=i.element;return Mt(r,"dmn:Definitions")&&!lC(r)&&(i=Ii(e,s=>!Mt(s.element,"dmn:Definitions"))||i),i}}return EH})},46241:function(lo,bs,dn){"use strict";dn.r(bs),dn.d(bs,{default:function(){return Jo}});function xe(J){return Array.prototype.concat.apply([],J)}var It=Object.prototype.toString,fn=Object.prototype.hasOwnProperty;function it(J){return J===void 0}function Qt(J){return J!==void 0}function yn(J){return J==null}function ii(J){return It.call(J)==="[object Array]"}function Nn(J){return It.call(J)==="[object Object]"}function Kt(J){return It.call(J)==="[object Number]"}function In(J){var Ee=It.call(J);return Ee==="[object Function]"||Ee==="[object AsyncFunction]"||Ee==="[object GeneratorFunction]"||Ee==="[object AsyncGeneratorFunction]"||Ee==="[object Proxy]"}function vn(J){return It.call(J)==="[object String]"}function gn(J){if(!ii(J))throw new Error("must supply array")}function Si(J,Ee){return fn.call(J,Ee)}function Ii(J,Ee){Ee=le(Ee);var je;return qt(J,function(Je,Ct){if(Ee(Je,Ct))return je=Je,!1}),je}function Un(J,Ee){Ee=le(Ee);var je=ii(J)?-1:void 0;return qt(J,function(Je,Ct){if(Ee(Je,Ct))return je=Ct,!1}),je}function $t(J,Ee){var je=[];return qt(J,function(Je,Ct){Ee(Je,Ct)&&je.push(Je)}),je}function qt(J,Ee){var je,Je;if(!it(J)){var Ct=ii(J)?ze:$e;for(var Nt in J)if(Si(J,Nt)&&(je=J[Nt],Je=Ee(je,Ct(Nt)),Je===!1))return je}}function mr(J,Ee){return it(J)?[]:(gn(J),Ee=le(Ee),J.filter(function(je,Je){return!Ee(je,Je)}))}function ss(J,Ee,je){return qt(J,function(Je,Ct){je=Ee(je,Je,Ct)}),je}function Dr(J,Ee){return!!ss(J,function(je,Je,Ct){return je&&Ee(Je,Ct)},!0)}function zs(J,Ee){return!!Ii(J,Ee)}function pi(J,Ee){var je=[];return qt(J,function(Je,Ct){je.push(Ee(Je,Ct))}),je}function vs(J){return J&&Object.keys(J)||[]}function uo(J){return vs(J).length}function cs(J){return pi(J,function(Ee){return Ee})}function wr(J,Ee){var je=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Ee=ci(Ee),qt(J,function(Je){var Ct=Ee(Je)||"_",Nt=je[Ct];Nt||(Nt=je[Ct]=[]),Nt.push(Je)}),je}function jr(J){J=ci(J);for(var Ee={},je=arguments.length,Je=new Array(je>1?je-1:0),Ct=1;Ct<je;Ct++)Je[Ct-1]=arguments[Ct];qt(Je,function(pn){return wr(pn,J,Ee)});var Nt=pi(Ee,function(pn,ai){return pn[0]});return Nt}var vr=null;function qs(J,Ee){Ee=ci(Ee);var je=[];return qt(J,function(Je,Ct){for(var Nt=Ee(Je,Ct),pn={d:Nt,v:Je},ai=0;ai<je.length;ai++){var zi=je[ai].d;if(Nt<zi){je.splice(ai,0,pn);return}}je.push(pn)}),pi(je,function(Je){return Je.v})}function Is(J){return function(Ee){return Dr(J,function(je,Je){return Ee[Je]===je})}}function ci(J){return In(J)?J:function(Ee){return Ee[J]}}function le(J){return In(J)?J:function(Ee){return Ee===J}}function $e(J){return J}function ze(J){return Number(J)}function ee(J,Ee){var je,Je,Ct,Nt;function pn(fr){var _o=Date.now(),Co=fr?0:Nt+Ee-_o;if(Co>0)return ai(Co);J.apply(Ct,Je),zi()}function ai(fr){je=setTimeout(pn,fr)}function zi(){je&&clearTimeout(je),je=Nt=Je=Ct=void 0}function as(){je&&pn(!0),zi()}function Pr(){Nt=Date.now();for(var fr=arguments.length,_o=new Array(fr),Co=0;Co<fr;Co++)_o[Co]=arguments[Co];Je=_o,Ct=this,je||ai(Ee)}return Pr.flush=as,Pr.cancel=zi,Pr}function Ze(J,Ee){var je=!1;return function(){je||(J.apply(void 0,arguments),je=!0,setTimeout(function(){je=!1},Ee))}}function Ie(J,Ee){return J.bind(Ee)}function Xe(J){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Xe=function(Ee){return typeof Ee}:Xe=function(Ee){return Ee&&typeof Symbol=="function"&&Ee.constructor===Symbol&&Ee!==Symbol.prototype?"symbol":typeof Ee},Xe(J)}function St(){return St=Object.assign||function(J){for(var Ee=1;Ee<arguments.length;Ee++){var je=arguments[Ee];for(var Je in je)Object.prototype.hasOwnProperty.call(je,Je)&&(J[Je]=je[Je])}return J},St.apply(this,arguments)}function Tt(J){for(var Ee=arguments.length,je=new Array(Ee>1?Ee-1:0),Je=1;Je<Ee;Je++)je[Je-1]=arguments[Je];return St.apply(void 0,[J].concat(je))}function Bn(J,Ee,je){var Je=J;return qt(Ee,function(Ct,Nt){if(typeof Ct!="number"&&typeof Ct!="string")throw new Error("illegal key type: "+Xe(Ct)+". Key should be of type number or string.");if(Ct==="constructor")throw new Error("illegal key: constructor");if(Ct==="__proto__")throw new Error("illegal key: __proto__");var pn=Ee[Nt+1],ai=Je[Ct];Qt(pn)&&yn(ai)&&(ai=Je[Ct]=isNaN(+pn)?{}:[]),it(pn)?it(je)?delete Je[Ct]:Je[Ct]=je:Je=ai}),J}function Fn(J,Ee,je){var Je=J;return qt(Ee,function(Ct){if(yn(Je))return Je=void 0,!1;Je=Je[Ct]}),it(Je)?je:Je}function Qn(J,Ee){var je={},Je=Object(J);return qt(Ee,function(Ct){Ct in Je&&(je[Ct]=J[Ct])}),je}function hi(J,Ee){var je={},Je=Object(J);return qt(Je,function(Ct,Nt){Ee.indexOf(Nt)===-1&&(je[Nt]=Ct)}),je}function Ki(J){for(var Ee=arguments.length,je=new Array(Ee>1?Ee-1:0),Je=1;Je<Ee;Je++)je[Je-1]=arguments[Je];return je.length&&qt(je,function(Ct){!Ct||!Nn(Ct)||qt(Ct,function(Nt,pn){if(pn!=="__proto__"){var ai=J[pn];Nn(Nt)?(Nn(ai)||(ai={}),J[pn]=Ki(ai,Nt)):J[pn]=Nt}})}),J}function Vn(){}Vn.prototype.get=function(J){return this.$model.properties.get(this,J)},Vn.prototype.set=function(J,Ee){this.$model.properties.set(this,J,Ee)};function fs(J,Ee){this.model=J,this.properties=Ee}fs.prototype.createType=function(J){var Ee=this.model,je=this.properties,Je=Object.create(Vn.prototype);qt(J.properties,function(pn){!pn.isMany&&pn.default!==void 0&&(Je[pn.name]=pn.default)}),je.defineModel(Je,Ee),je.defineDescriptor(Je,J);var Ct=J.ns.name;function Nt(pn){je.define(this,"$type",{value:Ct,enumerable:!0}),je.define(this,"$attrs",{value:{}}),je.define(this,"$parent",{writable:!0}),qt(pn,Ie(function(ai,zi){this.set(zi,ai)},this))}return Nt.prototype=Je,Nt.hasType=Je.$instanceOf=this.model.hasType,je.defineModel(Nt,Ee),je.defineDescriptor(Nt,J),Nt};var wo={String:!0,Boolean:!0,Integer:!0,Real:!0,Element:!0},Ao={String:function(J){return J},Boolean:function(J){return J==="true"},Integer:function(J){return parseInt(J,10)},Real:function(J){return parseFloat(J)}};function en(J,Ee){var je=Ao[J];return je?je(Ee):Ee}function fe(J){return!!wo[J]}function Fe(J){return!!Ao[J]}function Ye(J,Ee){var je=J.split(/:/),Je,Ct;if(je.length===1)Je=J,Ct=Ee;else if(je.length===2)Je=je[1],Ct=je[0];else throw new Error("expected <prefix:localName> or <localName>, got "+J);return J=(Ct?Ct+":":"")+Je,{name:J,prefix:Ct,localName:Je}}function Ve(J){this.ns=J,this.name=J.name,this.allTypes=[],this.allTypesByName={},this.properties=[],this.propertiesByName={}}Ve.prototype.build=function(){return Qn(this,["ns","name","allTypes","allTypesByName","properties","propertiesByName","bodyProperty","idProperty"])},Ve.prototype.addProperty=function(J,Ee,je){typeof Ee=="boolean"&&(je=Ee,Ee=void 0),this.addNamedProperty(J,je!==!1);var Je=this.properties;Ee!==void 0?Je.splice(Ee,0,J):Je.push(J)},Ve.prototype.replaceProperty=function(J,Ee,je){var Je=J.ns,Ct=this.properties,Nt=this.propertiesByName,pn=J.name!==Ee.name;if(J.isId){if(!Ee.isId)throw new Error("property <"+Ee.ns.name+"> must be id property to refine <"+J.ns.name+">");this.setIdProperty(Ee,!1)}if(J.isBody){if(!Ee.isBody)throw new Error("property <"+Ee.ns.name+"> must be body property to refine <"+J.ns.name+">");this.setBodyProperty(Ee,!1)}var ai=Ct.indexOf(J);if(ai===-1)throw new Error("property <"+Je.name+"> not found in property list");Ct.splice(ai,1),this.addProperty(Ee,je?void 0:ai,pn),Nt[Je.name]=Nt[Je.localName]=Ee},Ve.prototype.redefineProperty=function(J,Ee,je){var Je=J.ns.prefix,Ct=Ee.split("#"),Nt=Ye(Ct[0],Je),pn=Ye(Ct[1],Nt.prefix).name,ai=this.propertiesByName[pn];if(ai)this.replaceProperty(ai,J,je);else throw new Error("refined property <"+pn+"> not found");delete J.redefines},Ve.prototype.addNamedProperty=function(J,Ee){var je=J.ns,Je=this.propertiesByName;Ee&&(this.assertNotDefined(J,je.name),this.assertNotDefined(J,je.localName)),Je[je.name]=Je[je.localName]=J},Ve.prototype.removeNamedProperty=function(J){var Ee=J.ns,je=this.propertiesByName;delete je[Ee.name],delete je[Ee.localName]},Ve.prototype.setBodyProperty=function(J,Ee){if(Ee&&this.bodyProperty)throw new Error("body property defined multiple times (<"+this.bodyProperty.ns.name+">, <"+J.ns.name+">)");this.bodyProperty=J},Ve.prototype.setIdProperty=function(J,Ee){if(Ee&&this.idProperty)throw new Error("id property defined multiple times (<"+this.idProperty.ns.name+">, <"+J.ns.name+">)");this.idProperty=J},Ve.prototype.assertNotDefined=function(J,Ee){var je=J.name,Je=this.propertiesByName[je];if(Je)throw new Error("property <"+je+"> already defined; override of <"+Je.definedBy.ns.name+"#"+Je.ns.name+"> by <"+J.definedBy.ns.name+"#"+J.ns.name+"> not allowed without redefines")},Ve.prototype.hasProperty=function(J){return this.propertiesByName[J]},Ve.prototype.addTrait=function(J,Ee){var je=this.allTypesByName,Je=this.allTypes,Ct=J.name;Ct in je||(qt(J.properties,Ie(function(Nt){Nt=Tt({},Nt,{name:Nt.ns.localName,inherited:Ee}),Object.defineProperty(Nt,"definedBy",{value:J});var pn=Nt.replaces,ai=Nt.redefines;pn||ai?this.redefineProperty(Nt,pn||ai,pn):(Nt.isBody&&this.setBodyProperty(Nt),Nt.isId&&this.setIdProperty(Nt),this.addProperty(Nt))},this)),Je.push(J),je[Ct]=J)};function Ge(J,Ee){this.packageMap={},this.typeMap={},this.packages=[],this.properties=Ee,qt(J,Ie(this.registerPackage,this))}Ge.prototype.getPackage=function(J){return this.packageMap[J]},Ge.prototype.getPackages=function(){return this.packages},Ge.prototype.registerPackage=function(J){J=Tt({},J);var Ee=this.packageMap;Ut(Ee,J,"prefix"),Ut(Ee,J,"uri"),qt(J.types,Ie(function(je){this.registerType(je,J)},this)),Ee[J.uri]=Ee[J.prefix]=J,this.packages.push(J)},Ge.prototype.registerType=function(J,Ee){J=Tt({},J,{superClass:(J.superClass||[]).slice(),extends:(J.extends||[]).slice(),properties:(J.properties||[]).slice(),meta:Tt(J.meta||{})});var je=Ye(J.name,Ee.prefix),Je=je.name,Ct={};qt(J.properties,Ie(function(Nt){var pn=Ye(Nt.name,je.prefix),ai=pn.name;fe(Nt.type)||(Nt.type=Ye(Nt.type,pn.prefix).name),Tt(Nt,{ns:pn,name:ai}),Ct[ai]=Nt},this)),Tt(J,{ns:je,name:Je,propertiesByName:Ct}),qt(J.extends,Ie(function(Nt){var pn=this.typeMap[Nt];pn.traits=pn.traits||[],pn.traits.push(Je)},this)),this.definePackage(J,Ee),this.typeMap[Je]=J},Ge.prototype.mapTypes=function(J,Ee,je){var Je=fe(J.name)?{name:J.name}:this.typeMap[J.name],Ct=this;function Nt(ai){return pn(ai,!0)}function pn(ai,zi){var as=Ye(ai,fe(ai)?"":J.prefix);Ct.mapTypes(as,Ee,zi)}if(!Je)throw new Error("unknown type <"+J.name+">");qt(Je.superClass,je?Nt:pn),Ee(Je,!je),qt(Je.traits,Nt)},Ge.prototype.getEffectiveDescriptor=function(J){var Ee=Ye(J),je=new Ve(Ee);this.mapTypes(Ee,function(Ct,Nt){je.addTrait(Ct,Nt)});var Je=je.build();return this.definePackage(Je,Je.allTypes[Je.allTypes.length-1].$pkg),Je},Ge.prototype.definePackage=function(J,Ee){this.properties.define(J,"$pkg",{value:Ee})};function Ut(J,Ee,je){var Je=Ee[je];if(Je in J)throw new Error("package with "+je+" <"+Je+"> already defined")}function sn(J){this.model=J}sn.prototype.set=function(J,Ee,je){if(!vn(Ee)||!Ee.length)throw new TypeError("property name must be a non-empty string");var Je=this.model.getPropertyDescriptor(J,Ee),Ct=Je&&Je.name;_n(je)?Je?delete J[Ct]:delete J.$attrs[Ee]:Je?Ct in J?J[Ct]=je:Hi(J,Je,je):J.$attrs[Ee]=je},sn.prototype.get=function(J,Ee){var je=this.model.getPropertyDescriptor(J,Ee);if(!je)return J.$attrs[Ee];var Je=je.name;return!J[Je]&&je.isMany&&Hi(J,je,[]),J[Je]},sn.prototype.define=function(J,Ee,je){if(!je.writable){var Je=je.value;je=Tt({},je,{get:function(){return Je}}),delete je.value}Object.defineProperty(J,Ee,je)},sn.prototype.defineDescriptor=function(J,Ee){this.define(J,"$descriptor",{value:Ee})},sn.prototype.defineModel=function(J,Ee){this.define(J,"$model",{value:Ee})};function _n(J){return typeof J=="undefined"}function Hi(J,Ee,je){Object.defineProperty(J,Ee.name,{enumerable:!Ee.isReference,writable:!0,value:je,configurable:!0})}function Wn(J){this.properties=new sn(this),this.factory=new fs(this,this.properties),this.registry=new Ge(J,this.properties),this.typeCache={}}Wn.prototype.create=function(J,Ee){var je=this.getType(J);if(!je)throw new Error("unknown type <"+J+">");return new je(Ee)},Wn.prototype.getType=function(J){var Ee=this.typeCache,je=vn(J)?J:J.ns.name,Je=Ee[je];return Je||(J=this.registry.getEffectiveDescriptor(je),Je=Ee[je]=this.factory.createType(J)),Je},Wn.prototype.createAny=function(J,Ee,je){var Je=Ye(J),Ct={$type:J,$instanceOf:function(pn){return pn===this.$type}},Nt={name:J,isGeneric:!0,ns:{prefix:Je.prefix,localName:Je.localName,uri:Ee}};return this.properties.defineDescriptor(Ct,Nt),this.properties.defineModel(Ct,this),this.properties.define(Ct,"$parent",{enumerable:!1,writable:!0}),this.properties.define(Ct,"$instanceOf",{enumerable:!1,writable:!0}),qt(je,function(pn,ai){Nn(pn)&&pn.value!==void 0?Ct[pn.name]=pn.value:Ct[ai]=pn}),Ct},Wn.prototype.getPackage=function(J){return this.registry.getPackage(J)},Wn.prototype.getPackages=function(){return this.registry.getPackages()},Wn.prototype.getElementDescriptor=function(J){return J.$descriptor},Wn.prototype.hasType=function(J,Ee){Ee===void 0&&(Ee=J,J=this);var je=J.$model.getElementDescriptor(J);return Ee in je.allTypesByName},Wn.prototype.getPropertyDescriptor=function(J,Ee){return this.getElementDescriptor(J).propertiesByName[Ee]},Wn.prototype.getTypeDescriptor=function(J){return this.registry.typeMap[J]};var xi=String.fromCharCode,ar=Object.prototype.hasOwnProperty,di=/&#(\d+);|&#x([0-9a-f]+);|&(\w+);/ig,Ui={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'};Object.keys(Ui).forEach(function(J){Ui[J.toUpperCase()]=Ui[J]});function hr(J,Ee,je,Je){return Je?ar.call(Ui,Je)?Ui[Je]:"&"+Je+";":xi(Ee||parseInt(je,16))}function bi(J){return J.length>3&&J.indexOf("&")!==-1?J.replace(di,hr):J}var Gr="http://www.w3.org/2001/XMLSchema-instance",Zi="xsi",xr="xsi:type",ms="non-whitespace outside of root node";function Ni(J){return new Error(J)}function qr(J){return"missing namespace for prefix <"+J+">"}function Di(J){return{get:J,enumerable:!0}}function Sr(J){var Ee={},je;for(je in J)Ee[je]=J[je];return Ee}function Qi(J){return J+"$uri"}function _i(J){var Ee={},je,Je;for(je in J)Je=J[je],Ee[Je]=Je,Ee[Qi(Je)]=je;return Ee}function gr(){return{line:0,column:0}}function Zn(J){throw J}function tr(J){if(!this)return new tr(J);var Ee=J&&J.proxy,je,Je,Ct,Nt,pn=Zn,ai,zi,as,Pr,fr=gr,_o=!1,Co=!1,De=null,He=!1,ht;function vt(Ot){Ot instanceof Error||(Ot=Ni(Ot)),De=Ot,pn(Ot,fr)}function Bt(Ot){ai&&(Ot instanceof Error||(Ot=Ni(Ot)),ai(Ot,fr))}this.on=function(Ot,mt){if(typeof mt!="function")throw Ni("required args <name, cb>");switch(Ot){case"openTag":Je=mt;break;case"text":je=mt;break;case"closeTag":Ct=mt;break;case"error":pn=mt;break;case"warn":ai=mt;break;case"cdata":Nt=mt;break;case"attention":Pr=mt;break;case"question":as=mt;break;case"comment":zi=mt;break;default:throw Ni("unsupported event: "+Ot)}return this},this.ns=function(Ot){if(typeof Ot=="undefined"&&(Ot={}),typeof Ot!="object")throw Ni("required args <nsMap={}>");var mt={},on;for(on in Ot)mt[on]=Ot[on];return mt[Gr]=Zi,Co=!0,ht=mt,this},this.parse=function(Ot){if(typeof Ot!="string")throw Ni("required args <xml=string>");return De=null,zt(Ot),fr=gr,He=!1,De},this.stop=function(){He=!0};function zt(Ot){var mt=Co?[]:null,on=Co?_i(ht):null,En,kn=[],yi=0,gi=!1,Wi=!1,Xn=0,Yn=0,Ht,$r,kt,Bi,Tr,Mi,Ur,Ei,Xr,lr="",Ci=0,Or;function Gs(){if(Or!==null)return Or;var Sn,ln,Yt,ti=Co&&on.xmlns,oo=Co&&_o?[]:null,Oi=Ci,Fr=lr,_s=Fr.length,Lo,or,kr,zn,Ri,vo={},zo={},Jr,oi,Ti;e:for(;Oi<_s;Oi++)if(Jr=!1,oi=Fr.charCodeAt(Oi),!(oi===32||oi<14&&oi>8)){for((oi<65||oi>122||oi>90&&oi<97)&&oi!==95&&oi!==58&&(Bt("illegal first char attribute name"),Jr=!0),Ti=Oi+1;Ti<_s;Ti++)if(oi=Fr.charCodeAt(Ti),!(oi>96&&oi<123||oi>64&&oi<91||oi>47&&oi<59||oi===46||oi===45||oi===95)){if(oi===32||oi<14&&oi>8){Bt("missing attribute value"),Oi=Ti;continue e}if(oi===61)break;Bt("illegal attribute name char"),Jr=!0}if(Ri=Fr.substring(Oi,Ti),Ri==="xmlns:xmlns"&&(Bt("illegal declaration of xmlns"),Jr=!0),oi=Fr.charCodeAt(Ti+1),oi===34)Ti=Fr.indexOf('"',Oi=Ti+2),Ti===-1&&(Ti=Fr.indexOf("'",Oi),Ti!==-1&&(Bt("attribute value quote missmatch"),Jr=!0));else if(oi===39)Ti=Fr.indexOf("'",Oi=Ti+2),Ti===-1&&(Ti=Fr.indexOf('"',Oi),Ti!==-1&&(Bt("attribute value quote missmatch"),Jr=!0));else for(Bt("missing attribute value quotes"),Jr=!0,Ti=Ti+1;Ti<_s&&(oi=Fr.charCodeAt(Ti+1),!(oi===32||oi<14&&oi>8));Ti++);for(Ti===-1&&(Bt("missing closing quotes"),Ti=_s,Jr=!0),Jr||(kr=Fr.substring(Oi,Ti)),Oi=Ti;Ti+1<_s&&(oi=Fr.charCodeAt(Ti+1),!(oi===32||oi<14&&oi>8));Ti++)Oi===Ti&&(Bt("illegal character after attribute end"),Jr=!0);if(Oi=Ti+1,Jr)continue e;if(Ri in zo){Bt("attribute <"+Ri+"> already defined");continue}if(zo[Ri]=!0,!Co){vo[Ri]=kr;continue}if(_o){if(or=Ri==="xmlns"?"xmlns":Ri.charCodeAt(0)===120&&Ri.substr(0,6)==="xmlns:"?Ri.substr(6):null,or!==null){if(Sn=bi(kr),ln=Qi(or),zn=ht[Sn],!zn){if(or==="xmlns"||ln in on&&on[ln]!==Sn)do zn="ns"+yi++;while(typeof on[zn]!="undefined");else zn=or;ht[Sn]=zn}on[or]!==zn&&(Lo||(on=Sr(on),Lo=!0),on[or]=zn,or==="xmlns"&&(on[Qi(zn)]=Sn,ti=zn),on[ln]=Sn),vo[Ri]=kr;continue}oo.push(Ri,kr);continue}if(oi=Ri.indexOf(":"),oi===-1){vo[Ri]=kr;continue}if(!(Yt=on[Ri.substring(0,oi)])){Bt(qr(Ri.substring(0,oi)));continue}Ri=ti===Yt?Ri.substr(oi+1):Yt+Ri.substr(oi),Ri===xr&&(oi=kr.indexOf(":"),oi!==-1?(Yt=kr.substring(0,oi),Yt=on[Yt]||Yt,kr=Yt+kr.substring(oi)):kr=ti+":"+kr),vo[Ri]=kr}if(_o)for(Oi=0,_s=oo.length;Oi<_s;Oi++){if(Ri=oo[Oi++],kr=oo[Oi],oi=Ri.indexOf(":"),oi!==-1){if(!(Yt=on[Ri.substring(0,oi)])){Bt(qr(Ri.substring(0,oi)));continue}Ri=ti===Yt?Ri.substr(oi+1):Yt+Ri.substr(oi),Ri===xr&&(oi=kr.indexOf(":"),oi!==-1?(Yt=kr.substring(0,oi),Yt=on[Yt]||Yt,kr=Yt+kr.substring(oi)):kr=ti+":"+kr)}vo[Ri]=kr}return Or=vo}function sr(){for(var Sn=/(\r\n|\r|\n)/g,ln=0,Yt=0,ti=0,oo=Yn,Oi,Fr;Xn>=ti&&(Oi=Sn.exec(Ot),!(!Oi||(oo=Oi[0].length+Oi.index,oo>Xn)));)ln+=1,ti=oo;return Xn==-1?(Yt=oo,Fr=Ot.substring(Yn)):Yn===0?Fr=Ot.substring(Yn,Xn):(Yt=Xn-ti,Fr=Yn==-1?Ot.substring(Xn):Ot.substring(Xn,Yn+1)),{data:Fr,line:ln,column:Yt}}for(fr=sr,Ee&&(Xr=Object.create({},{name:Di(function(){return Ur}),originalName:Di(function(){return Ei}),attrs:Di(Gs),ns:Di(function(){return on})}));Yn!==-1;){if(Ot.charCodeAt(Yn)===60?Xn=Yn:Xn=Ot.indexOf("<",Yn),Xn===-1){if(kn.length)return vt("unexpected end of file");if(Yn===0)return vt("missing start tag");Yn<Ot.length&&Ot.substring(Yn).trim()&&Bt(ms);return}if(Yn!==Xn){if(kn.length){if(je&&(je(Ot.substring(Yn,Xn),bi,fr),He))return}else if(Ot.substring(Yn,Xn).trim()&&(Bt(ms),He))return}if(Bi=Ot.charCodeAt(Xn+1),Bi===33){if(kt=Ot.charCodeAt(Xn+2),kt===91&&Ot.substr(Xn+3,6)==="CDATA["){if(Yn=Ot.indexOf("]]>",Xn),Yn===-1)return vt("unclosed cdata");if(Nt&&(Nt(Ot.substring(Xn+9,Yn),fr),He))return;Yn+=3;continue}if(kt===45&&Ot.charCodeAt(Xn+3)===45){if(Yn=Ot.indexOf("-->",Xn),Yn===-1)return vt("unclosed comment");if(zi&&(zi(Ot.substring(Xn+4,Yn),bi,fr),He))return;Yn+=3;continue}}if(Bi===63){if(Yn=Ot.indexOf("?>",Xn),Yn===-1)return vt("unclosed question");if(as&&(as(Ot.substring(Xn,Yn+2),fr),He))return;Yn+=2;continue}for(Ht=Xn+1;;Ht++){if(Tr=Ot.charCodeAt(Ht),isNaN(Tr))return Yn=-1,vt("unclosed tag");if(Tr===34)kt=Ot.indexOf('"',Ht+1),Ht=kt!==-1?kt:Ht;else if(Tr===39)kt=Ot.indexOf("'",Ht+1),Ht=kt!==-1?kt:Ht;else if(Tr===62){Yn=Ht;break}}if(Bi===33){if(Pr&&(Pr(Ot.substring(Xn,Yn+1),bi,fr),He))return;Yn+=1;continue}if(Or={},Bi===47){if(gi=!1,Wi=!0,!kn.length)return vt("missing open tag");if(Ht=Ur=kn.pop(),kt=Xn+2+Ht.length,Ot.substring(Xn+2,kt)!==Ht)return vt("closing tag mismatch");for(;kt<Yn;kt++)if(Bi=Ot.charCodeAt(kt),!(Bi===32||Bi>8&&Bi<14))return vt("close tag")}else{if(Ot.charCodeAt(Yn-1)===47?(Ht=Ur=Ot.substring(Xn+1,Yn-1),gi=!0,Wi=!0):(Ht=Ur=Ot.substring(Xn+1,Yn),gi=!0,Wi=!1),!(Bi>96&&Bi<123||Bi>64&&Bi<91||Bi===95||Bi===58))return vt("illegal first char nodeName");for(kt=1,$r=Ht.length;kt<$r;kt++)if(Bi=Ht.charCodeAt(kt),!(Bi>96&&Bi<123||Bi>64&&Bi<91||Bi>47&&Bi<59||Bi===45||Bi===95||Bi==46)){if(Bi===32||Bi<14&&Bi>8){Ur=Ht.substring(0,kt),Or=null;break}return vt("invalid nodeName")}Wi||kn.push(Ur)}if(Co){if(En=on,gi&&(Wi||mt.push(En),Or===null&&(_o=Ht.indexOf("xmlns",kt)!==-1)&&(Ci=kt,lr=Ht,Gs(),_o=!1)),Ei=Ur,Bi=Ur.indexOf(":"),Bi!==-1){if(Mi=on[Ur.substring(0,Bi)],!Mi)return vt("missing namespace on <"+Ei+">");Ur=Ur.substr(Bi+1)}else Mi=on.xmlns;Mi&&(Ur=Mi+":"+Ur)}if(gi&&(Ci=kt,lr=Ht,Je&&(Ee?Je(Xr,bi,Wi,fr):Je(Ur,Gs,bi,Wi,fr),He)))return;if(Wi){if(Ct&&(Ct(Ee?Xr:Ur,bi,gi,fr),He))return;Co&&(gi?on=En:on=mt.pop())}Yn+=1}}}function bn(J){return J.xml&&J.xml.tagAlias==="lowerCase"}var Wr={xsi:"http://www.w3.org/2001/XMLSchema-instance",xml:"http://www.w3.org/XML/1998/namespace"},Js="xsi:type";function Hr(J){return J.xml&&J.xml.serialize}function Lr(J){return Hr(J)===Js}function Pi(J){return Hr(J)==="property"}function Qs(J){return J.charAt(0).toUpperCase()+J.slice(1)}function Pn(J,Ee){return bn(Ee)?J.prefix+":"+Qs(J.localName):J.name}function Xs(J,Ee){var je=J.name,Je=J.localName,Ct=Ee.xml&&Ee.xml.typePrefix;return Ct&&Je.indexOf(Ct)===0?J.prefix+":"+Je.slice(Ct.length):je}function Ts(J,Ee){var je=Ye(J),Je=Ee.getPackage(je.prefix);return Xs(je,Je)}function Kr(J){return new Error(J)}function hs(J){return J.$descriptor}function os(J){Tt(this,J),this.elementsById={},this.references=[],this.warnings=[],this.addReference=function(Ee){this.references.push(Ee)},this.addElement=function(Ee){if(!Ee)throw Kr("expected element");var je=this.elementsById,Je=hs(Ee),Ct=Je.idProperty,Nt;if(Ct&&(Nt=Ee.get(Ct.name),Nt)){if(!/^([a-z][\w-.]*:)?[a-z_][\w-.]*$/i.test(Nt))throw new Error("illegal ID <"+Nt+">");if(je[Nt])throw Kr("duplicate ID <"+Nt+">");je[Nt]=Ee}},this.addWarning=function(Ee){this.warnings.push(Ee)}}function js(){}js.prototype.handleEnd=function(){},js.prototype.handleText=function(){},js.prototype.handleNode=function(){};function dr(){}dr.prototype=Object.create(js.prototype),dr.prototype.handleNode=function(){return this};function Qr(){}Qr.prototype=Object.create(js.prototype),Qr.prototype.handleText=function(J){this.body=(this.body||"")+J};function gs(J,Ee){this.property=J,this.context=Ee}gs.prototype=Object.create(Qr.prototype),gs.prototype.handleNode=function(J){if(this.element)throw Kr("expected no sub nodes");return this.element=this.createReference(J),this},gs.prototype.handleEnd=function(){this.element.id=this.body},gs.prototype.createReference=function(J){return{property:this.property.ns.name,id:""}};function ei(J,Ee){this.element=Ee,this.propertyDesc=J}ei.prototype=Object.create(Qr.prototype),ei.prototype.handleEnd=function(){var J=this.body||"",Ee=this.element,je=this.propertyDesc;J=en(je.type,J),je.isMany?Ee.get(je.name).push(J):Ee.set(je.name,J)};function Rs(){}Rs.prototype=Object.create(Qr.prototype),Rs.prototype.handleNode=function(J){var Ee=this,je=this.element;return je?Ee=this.handleChild(J):(je=this.element=this.createElement(J),this.context.addElement(je)),Ee};function co(J,Ee,je){this.model=J,this.type=J.getType(Ee),this.context=je}co.prototype=Object.create(Rs.prototype),co.prototype.addReference=function(J){this.context.addReference(J)},co.prototype.handleText=function(J){var Ee=this.element,je=hs(Ee),Je=je.bodyProperty;if(!Je)throw Kr("unexpected body text <"+J+">");Qr.prototype.handleText.call(this,J)},co.prototype.handleEnd=function(){var J=this.body,Ee=this.element,je=hs(Ee),Je=je.bodyProperty;Je&&J!==void 0&&(J=en(Je.type,J),Ee.set(Je.name,J))},co.prototype.createElement=function(J){var Ee=J.attributes,je=this.type,Je=hs(je),Ct=this.context,Nt=new je({}),pn=this.model,ai;return qt(Ee,function(zi,as){var Pr=Je.propertiesByName[as],fr;Pr&&Pr.isReference?Pr.isMany?(fr=zi.split(" "),qt(fr,function(_o){Ct.addReference({element:Nt,property:Pr.ns.name,id:_o})})):Ct.addReference({element:Nt,property:Pr.ns.name,id:zi}):(Pr?zi=en(Pr.type,zi):as!=="xmlns"&&(ai=Ye(as,Je.ns.prefix),pn.getPackage(ai.prefix)&&Ct.addWarning({message:"unknown attribute <"+as+">",element:Nt,property:as,value:zi})),Nt.set(as,zi))}),Nt},co.prototype.getPropertyForNode=function(J){var Ee=J.name,je=Ye(Ee),Je=this.type,Ct=this.model,Nt=hs(Je),pn=je.name,ai=Nt.propertiesByName[pn],zi,as;if(ai&&!ai.isAttr)return Lr(ai)&&(zi=J.attributes[Js],zi)?(zi=Ts(zi,Ct),as=Ct.getType(zi),Tt({},ai,{effectiveType:hs(as).name})):ai;var Pr=Ct.getPackage(je.prefix);if(Pr){if(zi=Pn(je,Pr),as=Ct.getType(zi),ai=Ii(Nt.properties,function(fr){return!fr.isVirtual&&!fr.isReference&&!fr.isAttribute&&as.hasType(fr.type)}),ai)return Tt({},ai,{effectiveType:hs(as).name})}else if(ai=Ii(Nt.properties,function(fr){return!fr.isReference&&!fr.isAttribute&&fr.type==="Element"}),ai)return ai;throw Kr("unrecognized element <"+je.name+">")},co.prototype.toString=function(){return"ElementDescriptor["+hs(this.type).name+"]"},co.prototype.valueHandler=function(J,Ee){return new ei(J,Ee)},co.prototype.referenceHandler=function(J){return new gs(J,this.context)},co.prototype.handler=function(J){return J==="Element"?new na(this.model,J,this.context):new co(this.model,J,this.context)},co.prototype.handleChild=function(J){var Ee,je,Je,Ct;if(Ee=this.getPropertyForNode(J),Je=this.element,je=Ee.effectiveType||Ee.type,Fe(je))return this.valueHandler(Ee,Je);Ee.isReference?Ct=this.referenceHandler(Ee).handleNode(J):Ct=this.handler(je).handleNode(J);var Nt=Ct.element;return Nt!==void 0&&(Ee.isMany?Je.get(Ee.name).push(Nt):Je.set(Ee.name,Nt),Ee.isReference?(Tt(Nt,{element:Je}),this.context.addReference(Nt)):Nt.$parent=Je),Ct};function oa(J,Ee,je){co.call(this,J,Ee,je)}oa.prototype=Object.create(co.prototype),oa.prototype.createElement=function(J){var Ee=J.name,je=Ye(Ee),Je=this.model,Ct=this.type,Nt=Je.getPackage(je.prefix),pn=Nt&&Pn(je,Nt)||Ee;if(!Ct.hasType(pn))throw Kr("unexpected element <"+J.originalName+">");return co.prototype.createElement.call(this,J)};function na(J,Ee,je){this.model=J,this.context=je}na.prototype=Object.create(Rs.prototype),na.prototype.createElement=function(J){var Ee=J.name,je=Ye(Ee),Je=je.prefix,Ct=J.ns[Je+"$uri"],Nt=J.attributes;return this.model.createAny(Ee,Ct,Nt)},na.prototype.handleChild=function(J){var Ee=new na(this.model,"Element",this.context).handleNode(J),je=this.element,Je=Ee.element,Ct;return Je!==void 0&&(Ct=je.$children=je.$children||[],Ct.push(Je),Je.$parent=je),Ee},na.prototype.handleEnd=function(){this.body&&(this.element.$body=this.body)};function re(J){J instanceof Wn&&(J={model:J}),Tt(this,{lax:!1},J)}re.prototype.fromXML=function(J,Ee,je){var Je=Ee.rootHandler;Ee instanceof co?(Je=Ee,Ee={}):typeof Ee=="string"?(Je=this.handler(Ee),Ee={}):typeof Je=="string"&&(Je=this.handler(Je));var Ct=this.model,Nt=this.lax,pn=new os(Tt({},Ee,{rootHandler:Je})),ai=new tr({proxy:!0}),zi=P();Je.context=pn,zi.push(Je);function as(mt,on,En){var kn=on(),yi=kn.line,gi=kn.column,Wi=kn.data;Wi.charAt(0)==="<"&&Wi.indexOf(" ")!==-1&&(Wi=Wi.slice(0,Wi.indexOf(" "))+">");var Xn="unparsable content "+(Wi?Wi+" ":"")+`detected
	line: `+yi+`
	column: `+gi+`
	nested error: `+mt.message;if(En)return pn.addWarning({message:Xn,error:mt}),!0;throw Kr(Xn)}function Pr(mt,on){return as(mt,on,!0)}function fr(){var mt=pn.elementsById,on=pn.references,En,kn;for(En=0;kn=on[En];En++){var yi=kn.element,gi=mt[kn.id],Wi=hs(yi).propertiesByName[kn.property];if(gi||pn.addWarning({message:"unresolved reference <"+kn.id+">",element:kn.element,property:kn.property,value:kn.id}),Wi.isMany){var Xn=yi.get(Wi.name),Yn=Xn.indexOf(kn);Yn===-1&&(Yn=Xn.length),gi?Xn[Yn]=gi:Xn.splice(Yn,1)}else yi.set(Wi.name,gi)}}function _o(){zi.pop().handleEnd()}var Co=/^<\?xml /i,De=/ encoding="([^"]+)"/i,He=/^utf-8$/i;function ht(mt){if(Co.test(mt)){var on=De.exec(mt),En=on&&on[1];!En||He.test(En)||pn.addWarning({message:"unsupported document encoding <"+En+">, falling back to UTF-8"})}}function vt(mt,on){var En=zi.peek();try{zi.push(En.handleNode(mt))}catch(kn){as(kn,on,Nt)&&zi.push(new dr)}}function Bt(mt,on){try{zi.peek().handleText(mt)}catch(En){Pr(En,on)}}function zt(mt,on){mt.trim()&&Bt(mt,on)}var Ot=Ct.getPackages().reduce(function(mt,on){return mt[on.uri]=on.prefix,mt},{"http://www.w3.org/XML/1998/namespace":"xml"});return ai.ns(Ot).on("openTag",function(mt,on,En,kn){var yi=mt.attrs||{},gi=Object.keys(yi).reduce(function(Xn,Yn){var Ht=on(yi[Yn]);return Xn[Yn]=Ht,Xn},{}),Wi={name:mt.name,originalName:mt.originalName,attributes:gi,ns:mt.ns};vt(Wi,kn)}).on("question",ht).on("closeTag",_o).on("cdata",Bt).on("text",function(mt,on,En){zt(on(mt),En)}).on("error",as).on("warn",Pr),new Promise(function(mt,on){var En;try{ai.parse(J),fr()}catch(Xn){En=Xn}var kn=Je.element;!En&&!kn&&(En=Kr("failed to parse document as <"+Je.type.$descriptor.name+">"));var yi=pn.warnings,gi=pn.references,Wi=pn.elementsById;return En?(En.warnings=yi,on(En)):mt({rootElement:kn,elementsById:Wi,references:gi,warnings:yi})})},re.prototype.handler=function(J){return new oa(this.model,J)};function P(){var J=[];return Object.defineProperty(J,"peek",{value:function(){return this[this.length-1]}}),J}var V=`<?xml version="1.0" encoding="UTF-8"?>
`,Y=/<|>|'|"|&|\n\r|\n/g,te=/<|>|&/g;function we(J){var Ee={},je={},Je={},Ct=[],Nt=[];this.byUri=function(pn){return je[pn]||J&&J.byUri(pn)},this.add=function(pn,ai){je[pn.uri]=pn,ai?Ct.push(pn):Nt.push(pn),this.mapPrefix(pn.prefix,pn.uri)},this.uriByPrefix=function(pn){return Ee[pn||"xmlns"]},this.mapPrefix=function(pn,ai){Ee[pn||"xmlns"]=ai},this.getNSKey=function(pn){return pn.prefix!==void 0?pn.uri+"|"+pn.prefix:pn.uri},this.logUsed=function(pn){var ai=pn.uri,zi=this.getNSKey(pn);Je[zi]=this.byUri(ai),J&&J.logUsed(pn)},this.getUsed=function(pn){function ai(Pr){var fr=zi.getNSKey(Pr);return Je[fr]}var zi=this,as=[].concat(Ct,Nt);return as.filter(ai)}}function Ce(J){return J.charAt(0).toLowerCase()+J.slice(1)}function We(J,Ee){return bn(Ee)?Ce(J):J}function Dt(J,Ee){J.super_=Ee,J.prototype=Object.create(Ee.prototype,{constructor:{value:J,enumerable:!1,writable:!0,configurable:!0}})}function jt(J){return vn(J)?J:(J.prefix?J.prefix+":":"")+J.localName}function xn(J){return J.getUsed().filter(function(Ee){return Ee.prefix!=="xml"}).map(function(Ee){var je="xmlns"+(Ee.prefix?":"+Ee.prefix:"");return{name:je,value:Ee.uri}})}function Tn(J,Ee){return Ee.isGeneric?Tt({localName:Ee.ns.localName},J):Tt({localName:We(Ee.ns.localName,Ee.$pkg)},J)}function mi(J,Ee){return Tt({localName:Ee.ns.localName},J)}function vi(J){var Ee=J.$descriptor;return $t(Ee.properties,function(je){var Je=je.name;if(je.isVirtual||!Si(J,Je))return!1;var Ct=J[Je];return Ct===je.default||Ct===null?!1:je.isMany?Ct.length:!0})}var ws={"\n":"#10","\n\r":"#10",'"':"#34","'":"#39","<":"#60",">":"#62","&":"#38"},ho={"<":"lt",">":"gt","&":"amp"};function pr(J,Ee,je){return J=vn(J)?J:""+J,J.replace(Ee,function(Je){return"&"+je[Je]+";"})}function Fi(J){return pr(J,Y,ws)}function rt(J){return pr(J,te,ho)}function so(J){return $t(J,function(Ee){return Ee.isAttr})}function To(J){return $t(J,function(Ee){return!Ee.isAttr})}function Os(J){this.tagName=J}Os.prototype.build=function(J){return this.element=J,this},Os.prototype.serializeTo=function(J){J.appendIndent().append("<"+this.tagName+">"+this.element.id+"</"+this.tagName+">").appendNewLine()};function ds(){}ds.prototype.serializeValue=ds.prototype.serializeTo=function(J){J.append(this.escape?rt(this.value):this.value)},ds.prototype.build=function(J,Ee){return this.value=Ee,J.type==="String"&&Ee.search(te)!==-1&&(this.escape=!0),this};function Oo(J){this.tagName=J}Dt(Oo,ds),Oo.prototype.serializeTo=function(J){J.appendIndent().append("<"+this.tagName+">"),this.serializeValue(J),J.append("</"+this.tagName+">").appendNewLine()};function nr(J,Ee){this.body=[],this.attrs=[],this.parent=J,this.propertyDescriptor=Ee}nr.prototype.build=function(J){this.element=J;var Ee=J.$descriptor,je=this.propertyDescriptor,Je,Ct,Nt=Ee.isGeneric;return Nt?Je=this.parseGeneric(J):Je=this.parseNsAttributes(J),je?this.ns=this.nsPropertyTagName(je):this.ns=this.nsTagName(Ee),this.tagName=this.addTagName(this.ns),Nt||(Ct=vi(J),this.parseAttributes(so(Ct)),this.parseContainments(To(Ct))),this.parseGenericAttributes(J,Je),this},nr.prototype.nsTagName=function(J){var Ee=this.logNamespaceUsed(J.ns);return Tn(Ee,J)},nr.prototype.nsPropertyTagName=function(J){var Ee=this.logNamespaceUsed(J.ns);return mi(Ee,J)},nr.prototype.isLocalNs=function(J){return J.uri===this.ns.uri},nr.prototype.nsAttributeName=function(J){var Ee;if(vn(J)?Ee=Ye(J):Ee=J.ns,J.inherited)return{localName:Ee.localName};var je=this.logNamespaceUsed(Ee);return this.getNamespaces().logUsed(je),this.isLocalNs(je)?{localName:Ee.localName}:Tt({localName:Ee.localName},je)},nr.prototype.parseGeneric=function(J){var Ee=this,je=this.body,Je=[];return qt(J,function(Ct,Nt){var pn;Nt==="$body"?je.push(new ds().build({type:"String"},Ct)):Nt==="$children"?qt(Ct,function(ai){je.push(new nr(Ee).build(ai))}):Nt.indexOf("$")!==0&&(pn=Ee.parseNsAttribute(J,Nt,Ct),pn&&Je.push({name:Nt,value:Ct}))}),Je},nr.prototype.parseNsAttribute=function(J,Ee,je){var Je=J.$model,Ct=Ye(Ee),Nt;if(Ct.prefix==="xmlns"&&(Nt={prefix:Ct.localName,uri:je}),!Ct.prefix&&Ct.localName==="xmlns"&&(Nt={uri:je}),!Nt)return{name:Ee,value:je};if(Je&&Je.getPackage(je))this.logNamespace(Nt,!0,!0);else{var pn=this.logNamespaceUsed(Nt,!0);this.getNamespaces().logUsed(pn)}},nr.prototype.parseNsAttributes=function(J,Ee){var je=this,Je=J.$attrs,Ct=[];return qt(Je,function(Nt,pn){var ai=je.parseNsAttribute(J,pn,Nt);ai&&Ct.push(ai)}),Ct},nr.prototype.parseGenericAttributes=function(J,Ee){var je=this;qt(Ee,function(Je){if(Je.name!==Js)try{je.addAttribute(je.nsAttributeName(Je.name),Je.value)}catch(Ct){console.warn("missing namespace information for ",Je.name,"=",Je.value,"on",J,Ct)}})},nr.prototype.parseContainments=function(J){var Ee=this,je=this.body,Je=this.element;qt(J,function(Ct){var Nt=Je.get(Ct.name),pn=Ct.isReference,ai=Ct.isMany;if(ai||(Nt=[Nt]),Ct.isBody)je.push(new ds().build(Ct,Nt[0]));else if(Fe(Ct.type))qt(Nt,function(Pr){je.push(new Oo(Ee.addTagName(Ee.nsPropertyTagName(Ct))).build(Ct,Pr))});else if(pn)qt(Nt,function(Pr){je.push(new Os(Ee.addTagName(Ee.nsPropertyTagName(Ct))).build(Pr))});else{var zi=Lr(Ct),as=Pi(Ct);qt(Nt,function(Pr){var fr;zi?fr=new wi(Ee,Ct):as?fr=new nr(Ee,Ct):fr=new nr(Ee),je.push(fr.build(Pr))})}})},nr.prototype.getNamespaces=function(J){var Ee=this.namespaces,je=this.parent,Je;return Ee||(Je=je&&je.getNamespaces(),J||!Je?this.namespaces=Ee=new we(Je):Ee=Je),Ee},nr.prototype.logNamespace=function(J,Ee,je){var Je=this.getNamespaces(je),Ct=J.uri,Nt=J.prefix,pn=Je.byUri(Ct);return(!pn||je)&&Je.add(J,Ee),Je.mapPrefix(Nt,Ct),J},nr.prototype.logNamespaceUsed=function(J,Ee){var je=this.element,Je=je.$model,Ct=this.getNamespaces(Ee),Nt=J.prefix,pn=J.uri,ai,zi,as;if(!Nt&&!pn)return{localName:J.localName};if(as=Wr[Nt]||Je&&(Je.getPackage(Nt)||{}).uri,pn=pn||as||Ct.uriByPrefix(Nt),!pn)throw new Error("no namespace uri given for prefix <"+Nt+">");if(J=Ct.byUri(pn),!J){for(ai=Nt,zi=1;Ct.uriByPrefix(ai);)ai=Nt+"_"+zi++;J=this.logNamespace({prefix:ai,uri:pn},as===pn)}return Nt&&Ct.mapPrefix(Nt,pn),J},nr.prototype.parseAttributes=function(J){var Ee=this,je=this.element;qt(J,function(Je){var Ct=je.get(Je.name);if(Je.isReference)if(!Je.isMany)Ct=Ct.id;else{var Nt=[];qt(Ct,function(pn){Nt.push(pn.id)}),Ct=Nt.join(" ")}Ee.addAttribute(Ee.nsAttributeName(Je),Ct)})},nr.prototype.addTagName=function(J){var Ee=this.logNamespaceUsed(J);return this.getNamespaces().logUsed(Ee),jt(J)},nr.prototype.addAttribute=function(J,Ee){var je=this.attrs;vn(Ee)&&(Ee=Fi(Ee));var Je=Un(je,function(Nt){return Nt.name.localName===J.localName&&Nt.name.uri===J.uri&&Nt.name.prefix===J.prefix}),Ct={name:J,value:Ee};Je!==-1?je.splice(Je,1,Ct):je.push(Ct)},nr.prototype.serializeAttributes=function(J){var Ee=this.attrs,je=this.namespaces;je&&(Ee=xn(je).concat(Ee)),qt(Ee,function(Je){J.append(" ").append(jt(Je.name)).append('="').append(Je.value).append('"')})},nr.prototype.serializeTo=function(J){var Ee=this.body[0],je=Ee&&Ee.constructor!==ds;J.appendIndent().append("<"+this.tagName),this.serializeAttributes(J),J.append(Ee?">":" />"),Ee&&(je&&J.appendNewLine().indent(),qt(this.body,function(Je){Je.serializeTo(J)}),je&&J.unindent().appendIndent(),J.append("</"+this.tagName+">")),J.appendNewLine()};function wi(J,Ee){nr.call(this,J,Ee)}Dt(wi,nr),wi.prototype.parseNsAttributes=function(J){var Ee=nr.prototype.parseNsAttributes.call(this,J),je=J.$descriptor;if(je.name===this.propertyDescriptor.type)return Ee;var Je=this.typeNs=this.nsTagName(je);this.getNamespaces().logUsed(this.typeNs);var Ct=J.$model.getPackage(Je.uri),Nt=Ct.xml&&Ct.xml.typePrefix||"";return this.addAttribute(this.nsAttributeName(Js),(Je.prefix?Je.prefix+":":"")+Nt+je.ns.localName),Ee},wi.prototype.isLocalNs=function(J){return J.uri===(this.typeNs||this.ns).uri};function Mn(){this.value="",this.write=function(J){this.value+=J}}function ks(J,Ee){var je=[""];this.append=function(Je){return J.write(Je),this},this.appendNewLine=function(){return Ee&&J.write(`
`),this},this.appendIndent=function(){return Ee&&J.write(je.join("  ")),this},this.indent=function(){return je.push(""),this},this.unindent=function(){return je.pop(),this}}function jo(J){J=Tt({format:!1,preamble:!0},J||{});function Ee(je,Je){var Ct=Je||new Mn,Nt=new ks(Ct,J.format);if(J.preamble&&Nt.append(V),new nr().build(je).serializeTo(Nt),!Je)return Ct.value}return{toXML:Ee}}function Zr(J,Ee){Wn.call(this,J,Ee)}Zr.prototype=Object.create(Wn.prototype),Zr.prototype.fromXML=function(J,Ee,je){vn(Ee)||(je=Ee,Ee="dmn:Definitions");var Je=new re(Tt({model:this,lax:!0},je)),Ct=Je.handler(Ee);return Je.fromXML(J,Ct)},Zr.prototype.toXML=function(J,Ee){var je=new jo(Ee);return new Promise(function(Je,Ct){try{var Nt=je.toXML(J);return Je({xml:Nt})}catch(pn){return Ct(pn)}})};var aa="DC",ka="dc",fa="http://www.omg.org/spec/DMN/20180521/DC/",ps=[{name:"Dimension",properties:[{name:"width",isAttr:!0,type:"Real"},{name:"height",isAttr:!0,type:"Real"}]},{name:"Bounds",properties:[{name:"height",isAttr:!0,type:"Real"},{name:"width",isAttr:!0,type:"Real"},{name:"x",isAttr:!0,type:"Real"},{name:"y",isAttr:!0,type:"Real"}]},{name:"Point",properties:[{name:"x",isAttr:!0,type:"Real"},{name:"y",isAttr:!0,type:"Real"}]},{name:"Color",properties:[{name:"red",type:"UML_Standard_Profile.mdzip:eee_1045467100323_917313_65"},{name:"green",type:"UML_Standard_Profile.mdzip:eee_1045467100323_917313_65"},{name:"blue",type:"UML_Standard_Profile.mdzip:eee_1045467100323_917313_65"}]}],no=[],Eo=[{name:"AlignmentKind",literalValues:[{name:"start"},{name:"center"},{name:"end"}]}],go={name:aa,prefix:ka,uri:fa,types:ps,associations:no,enumerations:Eo},Xo="DI",Ae="di",Z="http://www.omg.org/spec/DMN/20180521/DI/",pe=[{name:"DiagramElement",isAbstract:!0,properties:[{name:"extension",type:"Extension"},{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"style",isReference:!0,type:"Style",xml:{serialize:"property"}},{name:"sharedStyle",isReference:!0,isVirtual:!0,type:"Style"}]},{name:"Diagram",superClass:["DiagramElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"documentation",isAttr:!0,type:"String"},{name:"resolution",isAttr:!0,type:"Real"}]},{name:"Shape",isAbstract:!0,properties:[{name:"bounds",type:"dc:Bounds"}],superClass:["DiagramElement"]},{name:"Edge",isAbstract:!0,properties:[{name:"waypoint",type:"dc:Point",isMany:!0,xml:{serialize:"property"}}],superClass:["DiagramElement"]},{name:"Style",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"}]},{name:"Extension",properties:[{name:"values",isMany:!0,type:"Element"}]}],Ne=[],Be=[],ut={tagAlias:"lowerCase"},Ft={name:Xo,prefix:Ae,uri:Z,types:pe,associations:Ne,enumerations:Be,xml:ut},Xt="DMN",mn="dmn",ri="https://www.omg.org/spec/DMN/20191111/MODEL/",rr=[{name:"AuthorityRequirement",superClass:["DMNElement"],properties:[{name:"requiredAuthority",type:"DMNElementReference",xml:{serialize:"property"}},{name:"requiredDecision",type:"DMNElementReference",xml:{serialize:"property"}},{name:"requiredInput",type:"DMNElementReference",xml:{serialize:"property"}}]},{name:"ItemDefinition",superClass:["NamedElement"],properties:[{name:"typeRef",type:"String"},{name:"allowedValues",type:"UnaryTests",xml:{serialize:"property"}},{name:"typeLanguage",type:"String",isAttr:!0},{name:"itemComponent",type:"ItemDefinition",isMany:!0,xml:{serialize:"property"}},{name:"functionItem",type:"FunctionItem"},{name:"isCollection",isAttr:!0,type:"Boolean"}]},{name:"Definitions",superClass:["NamedElement"],properties:[{name:"import",type:"Import",isMany:!0},{name:"itemDefinition",type:"ItemDefinition",isMany:!0},{name:"drgElement",type:"DRGElement",isMany:!0},{name:"artifact",type:"Artifact",isMany:!0},{name:"elementCollection",type:"ElementCollection",isMany:!0},{name:"businessContextElement",type:"BusinessContextElement",isMany:!0},{name:"namespace",type:"String",isAttr:!0},{name:"expressionLanguage",type:"String",isAttr:!0},{name:"typeLanguage",type:"String",isAttr:!0},{name:"exporter",isAttr:!0,type:"String"},{name:"exporterVersion",isAttr:!0,type:"String"},{name:"dmnDI",type:"dmndi:DMNDI"}]},{name:"KnowledgeSource",superClass:["DRGElement"],properties:[{name:"authorityRequirement",type:"AuthorityRequirement",isMany:!0},{name:"type",type:"String"},{name:"owner",type:"DMNElementReference",xml:{serialize:"property"}},{name:"locationURI",type:"String",isAttr:!0}]},{name:"DecisionRule",superClass:["DMNElement"],properties:[{name:"inputEntry",type:"UnaryTests",isMany:!0,xml:{serialize:"property"}},{name:"outputEntry",type:"LiteralExpression",isMany:!0,xml:{serialize:"property"}},{name:"annotationEntry",type:"RuleAnnotation",isMany:!0,xml:{serialize:"property"}}]},{name:"Expression",isAbstract:!0,superClass:["DMNElement"],properties:[{name:"typeRef",isAttr:!0,type:"String"}]},{name:"InformationItem",superClass:["NamedElement"],properties:[{name:"typeRef",isAttr:!0,type:"String"}]},{name:"Decision",superClass:["DRGElement"],properties:[{name:"question",type:"String",xml:{serialize:"property"}},{name:"allowedAnswers",type:"String",xml:{serialize:"property"}},{name:"variable",type:"InformationItem",xml:{serialize:"property"}},{name:"informationRequirement",type:"InformationRequirement",isMany:!0},{name:"knowledgeRequirement",type:"KnowledgeRequirement",isMany:!0},{name:"authorityRequirement",type:"AuthorityRequirement",isMany:!0},{name:"supportedObjective",isMany:!0,type:"DMNElementReference",xml:{serialize:"property"}},{name:"impactedPerformanceIndicator",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}},{name:"decisionMaker",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}},{name:"decisionOwner",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}},{name:"usingProcess",isMany:!0,type:"DMNElementReference",xml:{serialize:"property"}},{name:"usingTask",isMany:!0,type:"DMNElementReference",xml:{serialize:"property"}},{name:"decisionLogic",type:"Expression"}]},{name:"Invocation",superClass:["Expression"],properties:[{name:"calledFunction",type:"Expression"},{name:"binding",type:"Binding",isMany:!0}]},{name:"OrganisationalUnit",superClass:["BusinessContextElement"],properties:[{name:"decisionMade",type:"Decision",isReference:!0,isMany:!0},{name:"decisionOwned",type:"Decision",isReference:!0,isMany:!0}]},{name:"Import",superClass:["NamedElement"],properties:[{name:"importType",type:"String",isAttr:!0},{name:"locationURI",type:"String",isAttr:!0},{name:"namespace",type:"String",isAttr:!0}]},{name:"InformationRequirement",superClass:["DMNElement"],properties:[{name:"requiredDecision",type:"DMNElementReference",xml:{serialize:"property"}},{name:"requiredInput",type:"DMNElementReference",xml:{serialize:"property"}}]},{name:"ElementCollection",superClass:["NamedElement"],properties:[{name:"drgElement",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}}]},{name:"DRGElement",isAbstract:!0,superClass:["NamedElement"],properties:[]},{name:"InputData",superClass:["DRGElement"],properties:[{name:"variable",type:"InformationItem",xml:{serialize:"property"}}]},{name:"DMNElement",isAbstract:!0,properties:[{name:"description",type:"String"},{name:"extensionElements",type:"ExtensionElements"},{name:"id",type:"String",isAttr:!0,isId:!0},{name:"extensionAttribute",type:"ExtensionAttribute",isMany:!0},{name:"label",isAttr:!0,type:"String"}]},{name:"InputClause",superClass:["DMNElement"],properties:[{name:"inputExpression",type:"LiteralExpression",xml:{serialize:"property"}},{name:"inputValues",type:"UnaryTests",xml:{serialize:"property"}}]},{name:"DecisionTable",superClass:["Expression"],properties:[{name:"input",type:"InputClause",isMany:!0,xml:{serialize:"property"}},{name:"output",type:"OutputClause",isMany:!0,xml:{serialize:"property"}},{name:"annotation",type:"RuleAnnotationClause",isMany:!0,xml:{serialize:"property"}},{name:"rule",type:"DecisionRule",isMany:!0,xml:{serialize:"property"}},{name:"hitPolicy",type:"HitPolicy",isAttr:!0,default:"UNIQUE"},{name:"aggregation",type:"BuiltinAggregator",isAttr:!0},{name:"preferredOrientation",type:"DecisionTableOrientation",isAttr:!0},{name:"outputLabel",isAttr:!0,type:"String"}]},{name:"LiteralExpression",superClass:["Expression"],properties:[{name:"expressionLanguage",type:"String",isAttr:!0},{name:"text",type:"String"},{name:"importedValues",type:"ImportedValues"}]},{name:"Binding",properties:[{name:"parameter",type:"InformationItem",xml:{serialize:"property"}},{name:"bindingFormula",type:"Expression"}]},{name:"KnowledgeRequirement",superClass:["DMNElement"],properties:[{name:"requiredKnowledge",type:"DMNElementReference",xml:{serialize:"property"}}]},{name:"BusinessKnowledgeModel",superClass:["Invocable"],properties:[{name:"encapsulatedLogic",type:"FunctionDefinition",xml:{serialize:"property"}},{name:"knowledgeRequirement",type:"KnowledgeRequirement",isMany:!0},{name:"authorityRequirement",type:"AuthorityRequirement",isMany:!0}]},{name:"BusinessContextElement",isAbstract:!0,superClass:["NamedElement"],properties:[{name:"URI",type:"String",isAttr:!0}]},{name:"PerformanceIndicator",superClass:["BusinessContextElement"],properties:[{name:"impactingDecision",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}}]},{name:"FunctionDefinition",superClass:["Expression"],properties:[{name:"formalParameter",type:"InformationItem",isMany:!0,xml:{serialize:"property"}},{name:"body",type:"Expression"},{name:"kind",type:"FunctionKind",isAttr:!0}]},{name:"Context",superClass:["Expression"],properties:[{name:"contextEntry",type:"ContextEntry",isMany:!0}]},{name:"ContextEntry",superClass:["DMNElement"],properties:[{name:"variable",type:"InformationItem",xml:{serialize:"property"}},{name:"value",type:"Expression"}]},{name:"List",superClass:["Expression"],properties:[{name:"elements",isMany:!0,type:"Expression"}]},{name:"Relation",superClass:["Expression"],properties:[{name:"column",type:"InformationItem",isMany:!0,xml:{serialize:"property"}},{name:"row",type:"List",isMany:!0,xml:{serialize:"property"}}]},{name:"OutputClause",superClass:["DMNElement"],properties:[{name:"outputValues",type:"UnaryTests",xml:{serialize:"property"}},{name:"defaultOutputEntry",type:"LiteralExpression",xml:{serialize:"property"}},{name:"name",isAttr:!0,type:"String"},{name:"typeRef",isAttr:!0,type:"String"}]},{name:"UnaryTests",superClass:["Expression"],properties:[{name:"text",type:"String"},{name:"expressionLanguage",type:"String",isAttr:!0}]},{name:"NamedElement",isAbstract:!0,superClass:["DMNElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"ImportedValues",superClass:["Import"],properties:[{name:"importedElement",type:"String"},{name:"expressionLanguage",type:"String",isAttr:!0}]},{name:"DecisionService",superClass:["Invocable"],properties:[{name:"outputDecision",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}},{name:"encapsulatedDecision",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}},{name:"inputDecision",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}},{name:"inputData",type:"DMNElementReference",isMany:!0,xml:{serialize:"property"}}]},{name:"ExtensionElements",properties:[{name:"values",type:"Element",isMany:!0}]},{name:"ExtensionAttribute",properties:[{name:"value",type:"Element"},{name:"valueRef",type:"Element",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Element",isAbstract:!0,properties:[{name:"extensionAttribute",type:"ExtensionAttribute",isAttr:!0,isReference:!0},{name:"elements",type:"ExtensionElements",isAttr:!0,isReference:!0}]},{name:"Artifact",isAbstract:!0,superClass:["DMNElement"],properties:[]},{name:"Association",superClass:["Artifact"],properties:[{name:"sourceRef",type:"DMNElementReference",xml:{serialize:"property"}},{name:"targetRef",type:"DMNElementReference",xml:{serialize:"property"}},{name:"associationDirection",type:"AssociationDirection",isAttr:!0}]},{name:"TextAnnotation",superClass:["Artifact"],properties:[{name:"text",type:"String"},{name:"textFormat",isAttr:!0,type:"String",default:"text/plain"}]},{name:"RuleAnnotationClause",properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"RuleAnnotation",properties:[{name:"text",type:"String"}]},{name:"Invocable",isAbstract:!0,superClass:["DRGElement"],properties:[{name:"variable",type:"InformationItem",xml:{serialize:"property"}}]},{name:"Group",superClass:["Artifact"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"FunctionItem",superClass:["DMNElement"],properties:[{name:"parameters",isMany:!0,type:"InformationItem",xml:{serialize:"property"}},{name:"outputTypeRef",isAttr:!0,type:"String"}]},{name:"DMNElementReference",properties:[{isAttr:!0,name:"href",type:"String"}]}],Xi=[{name:"HitPolicy",literalValues:[{name:"UNIQUE"},{name:"FIRST"},{name:"PRIORITY"},{name:"ANY"},{name:"COLLECT"},{name:"RULE ORDER"},{name:"OUTPUT ORDER"}]},{name:"BuiltinAggregator",literalValues:[{name:"SUM"},{name:"COUNT"},{name:"MIN"},{name:"MAX"}]},{name:"DecisionTableOrientation",literalValues:[{name:"Rule-as-Row"},{name:"Rule-as-Column"},{name:"CrossTable"}]},{name:"AssociationDirection",literalValues:[{name:"None"},{name:"One"},{name:"Both"}]},{name:"FunctionKind",literalValues:[{name:"FEEL"},{name:"Java"},{name:"PMML"}]}],Vo=[],yo={tagAlias:"lowerCase"},Vs={name:Xt,prefix:mn,uri:ri,types:rr,enumerations:Xi,associations:Vo,xml:yo},ko="DMNDI",Uo="dmndi",la="https://www.omg.org/spec/DMN/20191111/DMNDI/",Ys=[{name:"DMNDI",properties:[{name:"diagrams",type:"DMNDiagram",isMany:!0},{name:"styles",type:"DMNStyle",isMany:!0}]},{name:"DMNStyle",superClass:["di:Style"],properties:[{name:"fillColor",type:"dc:Color",isAttr:!0},{name:"strokeColor",type:"dc:Color",isAttr:!0},{name:"fontColor",type:"dc:Color",isAttr:!0},{name:"fontSize",isAttr:!0,type:"Real"},{name:"fontFamily",isAttr:!0,type:"String"},{name:"fontItalic",isAttr:!0,type:"Boolean"},{name:"fontBold",isAttr:!0,type:"Boolean"},{name:"fontUnderline",isAttr:!0,type:"Boolean"},{name:"fontStrikeThrough",isAttr:!0,type:"Boolean"},{name:"labelHorizontalAlignment",type:"dc:AlignmentKind",isAttr:!0},{name:"labelVerticalAlignment",type:"dc:AlignmentKind",isAttr:!0}]},{name:"DMNDiagram",superClass:["di:Diagram"],properties:[{name:"dmnElementRef",type:"dmn:DMNElement",isAttr:!0,isReference:!0},{name:"size",type:"Size"},{name:"localStyle",type:"DMNStyle",isVirtual:!0},{name:"sharedStyle",type:"DMNStyle",isVirtual:!0,isReference:!0,redefines:"di:DiagramElement#sharedStyle"},{name:"diagramElements",type:"DMNDiagramElement",isMany:!0}]},{name:"DMNDiagramElement",isAbstract:!0,superClass:["di:DiagramElement"],properties:[{name:"dmnElementRef",type:"dmn:DMNElement",isAttr:!0,isReference:!0},{name:"sharedStyle",type:"DMNStyle",isVirtual:!0,isReference:!0,redefines:"di:DiagramElement#sharedStyle"},{name:"localStyle",type:"DMNStyle",isVirtual:!0},{name:"label",type:"DMNLabel"}]},{name:"DMNLabel",superClass:["di:Shape"],properties:[{name:"text",type:"Text"}]},{name:"DMNShape",superClass:["di:Shape","DMNDiagramElement"],properties:[{name:"isListedInputData",isAttr:!0,type:"Boolean"},{name:"decisionServiceDividerLine",type:"DMNDecisionServiceDividerLine"},{name:"isCollapsed",isAttr:!0,type:"Boolean"}]},{name:"DMNEdge",superClass:["di:Edge","DMNDiagramElement"],properties:[{name:"sourceElement",type:"DMNDiagramElement",isAttr:!0,isReference:!0},{name:"targetElement",type:"DMNDiagramElement",isAttr:!0,isReference:!0}]},{name:"DMNDecisionServiceDividerLine",superClass:["di:Edge"]},{name:"Text",properties:[{name:"text",isBody:!0,type:"String"}]},{name:"Size",superClass:["dc:Dimension"]}],Ai=[],ll=[],si={name:ko,prefix:Uo,uri:la,types:Ys,associations:Ai,enumerations:ll},Zo="bpmn.io DI for DMN",ma="http://bpmn.io/schema/dmn/biodi/2.0",ul="biodi",ia={tagAlias:"lowerCase"},Ro=[{name:"DecisionTable",isAbstract:!0,extends:["dmn:DecisionTable"],properties:[{name:"annotationsWidth",isAttr:!0,type:"Integer"}]},{name:"OutputClause",isAbstract:!0,extends:["dmn:OutputClause"],properties:[{name:"width",isAttr:!0,type:"Integer"}]},{name:"InputClause",isAbstract:!0,extends:["dmn:InputClause"],properties:[{name:"width",isAttr:!0,type:"Integer"}]}],La={name:Zo,uri:ma,prefix:ul,xml:ia,types:Ro},Ar={dc:go,di:Ft,dmn:Vs,dmndi:si,biodi:La};function il(J,Ee){var je=Tt({},Ar,J);return new Zr(je,Ee)}var Jo=il},11333:function(lo,bs,dn){lo=dn.nmd(lo);(function(xe,It){lo.exports=It()})(this,function(){"use strict";var xe;function It(){return xe.apply(null,arguments)}function fn(C){xe=C}function it(C){return C instanceof Array||Object.prototype.toString.call(C)==="[object Array]"}function Qt(C){return C!=null&&Object.prototype.toString.call(C)==="[object Object]"}function yn(C,R){return Object.prototype.hasOwnProperty.call(C,R)}function ii(C){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(C).length===0;var R;for(R in C)if(yn(C,R))return!1;return!0}function Nn(C){return C===void 0}function Kt(C){return typeof C=="number"||Object.prototype.toString.call(C)==="[object Number]"}function In(C){return C instanceof Date||Object.prototype.toString.call(C)==="[object Date]"}function vn(C,R){var G=[],oe,Se=C.length;for(oe=0;oe<Se;++oe)G.push(R(C[oe],oe));return G}function gn(C,R){for(var G in R)yn(R,G)&&(C[G]=R[G]);return yn(R,"toString")&&(C.toString=R.toString),yn(R,"valueOf")&&(C.valueOf=R.valueOf),C}function Si(C,R,G,oe){return Xr(C,R,G,oe,!0).utc()}function Ii(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function Un(C){return C._pf==null&&(C._pf=Ii()),C._pf}var $t;Array.prototype.some?$t=Array.prototype.some:$t=function(C){var R=Object(this),G=R.length>>>0,oe;for(oe=0;oe<G;oe++)if(oe in R&&C.call(this,R[oe],oe,R))return!0;return!1};function qt(C){var R=null,G=!1,oe=C._d&&!isNaN(C._d.getTime());if(oe&&(R=Un(C),G=$t.call(R.parsedDateParts,function(Se){return Se!=null}),oe=R.overflow<0&&!R.empty&&!R.invalidEra&&!R.invalidMonth&&!R.invalidWeekday&&!R.weekdayMismatch&&!R.nullInput&&!R.invalidFormat&&!R.userInvalidated&&(!R.meridiem||R.meridiem&&G),C._strict&&(oe=oe&&R.charsLeftOver===0&&R.unusedTokens.length===0&&R.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(C))C._isValid=oe;else return oe;return C._isValid}function mr(C){var R=Si(NaN);return C!=null?gn(Un(R),C):Un(R).userInvalidated=!0,R}var ss=It.momentProperties=[],Dr=!1;function zs(C,R){var G,oe,Se,xt=ss.length;if(Nn(R._isAMomentObject)||(C._isAMomentObject=R._isAMomentObject),Nn(R._i)||(C._i=R._i),Nn(R._f)||(C._f=R._f),Nn(R._l)||(C._l=R._l),Nn(R._strict)||(C._strict=R._strict),Nn(R._tzm)||(C._tzm=R._tzm),Nn(R._isUTC)||(C._isUTC=R._isUTC),Nn(R._offset)||(C._offset=R._offset),Nn(R._pf)||(C._pf=Un(R)),Nn(R._locale)||(C._locale=R._locale),xt>0)for(G=0;G<xt;G++)oe=ss[G],Se=R[oe],Nn(Se)||(C[oe]=Se);return C}function pi(C){zs(this,C),this._d=new Date(C._d!=null?C._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),Dr===!1&&(Dr=!0,It.updateOffset(this),Dr=!1)}function vs(C){return C instanceof pi||C!=null&&C._isAMomentObject!=null}function uo(C){It.suppressDeprecationWarnings===!1&&typeof console!="undefined"&&console.warn&&console.warn("Deprecation warning: "+C)}function cs(C,R){var G=!0;return gn(function(){if(It.deprecationHandler!=null&&It.deprecationHandler(null,C),G){var oe=[],Se,xt,E,u=arguments.length;for(xt=0;xt<u;xt++){if(Se="",typeof arguments[xt]=="object"){Se+=`
[`+xt+"] ";for(E in arguments[0])yn(arguments[0],E)&&(Se+=E+": "+arguments[0][E]+", ");Se=Se.slice(0,-2)}else Se=arguments[xt];oe.push(Se)}uo(C+`
Arguments: `+Array.prototype.slice.call(oe).join("")+`
`+new Error().stack),G=!1}return R.apply(this,arguments)},R)}var wr={};function jr(C,R){It.deprecationHandler!=null&&It.deprecationHandler(C,R),wr[C]||(uo(R),wr[C]=!0)}It.suppressDeprecationWarnings=!1,It.deprecationHandler=null;function vr(C){return typeof Function!="undefined"&&C instanceof Function||Object.prototype.toString.call(C)==="[object Function]"}function qs(C){var R,G;for(G in C)yn(C,G)&&(R=C[G],vr(R)?this[G]=R:this["_"+G]=R);this._config=C,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function Is(C,R){var G=gn({},C),oe;for(oe in R)yn(R,oe)&&(Qt(C[oe])&&Qt(R[oe])?(G[oe]={},gn(G[oe],C[oe]),gn(G[oe],R[oe])):R[oe]!=null?G[oe]=R[oe]:delete G[oe]);for(oe in C)yn(C,oe)&&!yn(R,oe)&&Qt(C[oe])&&(G[oe]=gn({},G[oe]));return G}function ci(C){C!=null&&this.set(C)}var le;Object.keys?le=Object.keys:le=function(C){var R,G=[];for(R in C)yn(C,R)&&G.push(R);return G};var $e={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function ze(C,R,G){var oe=this._calendar[C]||this._calendar.sameElse;return vr(oe)?oe.call(R,G):oe}function ee(C,R,G){var oe=""+Math.abs(C),Se=R-oe.length,xt=C>=0;return(xt?G?"+":"":"-")+Math.pow(10,Math.max(0,Se)).toString().substr(1)+oe}var Ze=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Ie=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Xe={},St={};function Tt(C,R,G,oe){var Se=oe;typeof oe=="string"&&(Se=function(){return this[oe]()}),C&&(St[C]=Se),R&&(St[R[0]]=function(){return ee(Se.apply(this,arguments),R[1],R[2])}),G&&(St[G]=function(){return this.localeData().ordinal(Se.apply(this,arguments),C)})}function Bn(C){return C.match(/\[[\s\S]/)?C.replace(/^\[|\]$/g,""):C.replace(/\\/g,"")}function Fn(C){var R=C.match(Ze),G,oe;for(G=0,oe=R.length;G<oe;G++)St[R[G]]?R[G]=St[R[G]]:R[G]=Bn(R[G]);return function(Se){var xt="",E;for(E=0;E<oe;E++)xt+=vr(R[E])?R[E].call(Se,C):R[E];return xt}}function Qn(C,R){return C.isValid()?(R=hi(R,C.localeData()),Xe[R]=Xe[R]||Fn(R),Xe[R](C)):C.localeData().invalidDate()}function hi(C,R){var G=5;function oe(Se){return R.longDateFormat(Se)||Se}for(Ie.lastIndex=0;G>=0&&Ie.test(C);)C=C.replace(Ie,oe),Ie.lastIndex=0,G-=1;return C}var Ki={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function Vn(C){var R=this._longDateFormat[C],G=this._longDateFormat[C.toUpperCase()];return R||!G?R:(this._longDateFormat[C]=G.match(Ze).map(function(oe){return oe==="MMMM"||oe==="MM"||oe==="DD"||oe==="dddd"?oe.slice(1):oe}).join(""),this._longDateFormat[C])}var fs="Invalid date";function wo(){return this._invalidDate}var Ao="%d",en=/\d{1,2}/;function fe(C){return this._ordinal.replace("%d",C)}var Fe={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function Ye(C,R,G,oe){var Se=this._relativeTime[G];return vr(Se)?Se(C,R,G,oe):Se.replace(/%d/i,C)}function Ve(C,R){var G=this._relativeTime[C>0?"future":"past"];return vr(G)?G(R):G.replace(/%s/i,R)}var Ge={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function Ut(C){return typeof C=="string"?Ge[C]||Ge[C.toLowerCase()]:void 0}function sn(C){var R={},G,oe;for(oe in C)yn(C,oe)&&(G=Ut(oe),G&&(R[G]=C[oe]));return R}var _n={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function Hi(C){var R=[],G;for(G in C)yn(C,G)&&R.push({unit:G,priority:_n[G]});return R.sort(function(oe,Se){return oe.priority-Se.priority}),R}var Wn=/\d/,xi=/\d\d/,ar=/\d{3}/,di=/\d{4}/,Ui=/[+-]?\d{6}/,hr=/\d\d?/,bi=/\d\d\d\d?/,Gr=/\d\d\d\d\d\d?/,Zi=/\d{1,3}/,xr=/\d{1,4}/,ms=/[+-]?\d{1,6}/,Ni=/\d+/,qr=/[+-]?\d+/,Di=/Z|[+-]\d\d:?\d\d/gi,Sr=/Z|[+-]\d\d(?::?\d\d)?/gi,Qi=/[+-]?\d+(\.\d{1,3})?/,_i=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,gr=/^[1-9]\d?/,Zn=/^([1-9]\d|\d)/,tr;tr={};function bn(C,R,G){tr[C]=vr(R)?R:function(oe,Se){return oe&&G?G:R}}function Wr(C,R){return yn(tr,C)?tr[C](R._strict,R._locale):new RegExp(Js(C))}function Js(C){return Hr(C.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(R,G,oe,Se,xt){return G||oe||Se||xt}))}function Hr(C){return C.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Lr(C){return C<0?Math.ceil(C)||0:Math.floor(C)}function Pi(C){var R=+C,G=0;return R!==0&&isFinite(R)&&(G=Lr(R)),G}var Qs={};function Pn(C,R){var G,oe=R,Se;for(typeof C=="string"&&(C=[C]),Kt(R)&&(oe=function(xt,E){E[R]=Pi(xt)}),Se=C.length,G=0;G<Se;G++)Qs[C[G]]=oe}function Xs(C,R){Pn(C,function(G,oe,Se,xt){Se._w=Se._w||{},R(G,Se._w,Se,xt)})}function Ts(C,R,G){R!=null&&yn(Qs,C)&&Qs[C](R,G._a,G,C)}function Kr(C){return C%4===0&&C%100!==0||C%400===0}var hs=0,os=1,js=2,dr=3,Qr=4,gs=5,ei=6,Rs=7,co=8;Tt("Y",0,0,function(){var C=this.year();return C<=9999?ee(C,4):"+"+C}),Tt(0,["YY",2],0,function(){return this.year()%100}),Tt(0,["YYYY",4],0,"year"),Tt(0,["YYYYY",5],0,"year"),Tt(0,["YYYYYY",6,!0],0,"year"),bn("Y",qr),bn("YY",hr,xi),bn("YYYY",xr,di),bn("YYYYY",ms,Ui),bn("YYYYYY",ms,Ui),Pn(["YYYYY","YYYYYY"],hs),Pn("YYYY",function(C,R){R[hs]=C.length===2?It.parseTwoDigitYear(C):Pi(C)}),Pn("YY",function(C,R){R[hs]=It.parseTwoDigitYear(C)}),Pn("Y",function(C,R){R[hs]=parseInt(C,10)});function oa(C){return Kr(C)?366:365}It.parseTwoDigitYear=function(C){return Pi(C)+(Pi(C)>68?1900:2e3)};var na=P("FullYear",!0);function re(){return Kr(this.year())}function P(C,R){return function(G){return G!=null?(Y(this,C,G),It.updateOffset(this,R),this):V(this,C)}}function V(C,R){if(!C.isValid())return NaN;var G=C._d,oe=C._isUTC;switch(R){case"Milliseconds":return oe?G.getUTCMilliseconds():G.getMilliseconds();case"Seconds":return oe?G.getUTCSeconds():G.getSeconds();case"Minutes":return oe?G.getUTCMinutes():G.getMinutes();case"Hours":return oe?G.getUTCHours():G.getHours();case"Date":return oe?G.getUTCDate():G.getDate();case"Day":return oe?G.getUTCDay():G.getDay();case"Month":return oe?G.getUTCMonth():G.getMonth();case"FullYear":return oe?G.getUTCFullYear():G.getFullYear();default:return NaN}}function Y(C,R,G){var oe,Se,xt,E,u;if(!(!C.isValid()||isNaN(G))){switch(oe=C._d,Se=C._isUTC,R){case"Milliseconds":return void(Se?oe.setUTCMilliseconds(G):oe.setMilliseconds(G));case"Seconds":return void(Se?oe.setUTCSeconds(G):oe.setSeconds(G));case"Minutes":return void(Se?oe.setUTCMinutes(G):oe.setMinutes(G));case"Hours":return void(Se?oe.setUTCHours(G):oe.setHours(G));case"Date":return void(Se?oe.setUTCDate(G):oe.setDate(G));case"FullYear":break;default:return}xt=G,E=C.month(),u=C.date(),u=u===29&&E===1&&!Kr(xt)?28:u,Se?oe.setUTCFullYear(xt,E,u):oe.setFullYear(xt,E,u)}}function te(C){return C=Ut(C),vr(this[C])?this[C]():this}function we(C,R){if(typeof C=="object"){C=sn(C);var G=Hi(C),oe,Se=G.length;for(oe=0;oe<Se;oe++)this[G[oe].unit](C[G[oe].unit])}else if(C=Ut(C),vr(this[C]))return this[C](R);return this}function Ce(C,R){return(C%R+R)%R}var We;Array.prototype.indexOf?We=Array.prototype.indexOf:We=function(C){var R;for(R=0;R<this.length;++R)if(this[R]===C)return R;return-1};function Dt(C,R){if(isNaN(C)||isNaN(R))return NaN;var G=Ce(R,12);return C+=(R-G)/12,G===1?Kr(C)?29:28:31-G%7%2}Tt("M",["MM",2],"Mo",function(){return this.month()+1}),Tt("MMM",0,0,function(C){return this.localeData().monthsShort(this,C)}),Tt("MMMM",0,0,function(C){return this.localeData().months(this,C)}),bn("M",hr,gr),bn("MM",hr,xi),bn("MMM",function(C,R){return R.monthsShortRegex(C)}),bn("MMMM",function(C,R){return R.monthsRegex(C)}),Pn(["M","MM"],function(C,R){R[os]=Pi(C)-1}),Pn(["MMM","MMMM"],function(C,R,G,oe){var Se=G._locale.monthsParse(C,oe,G._strict);Se!=null?R[os]=Se:Un(G).invalidMonth=C});var jt="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),xn="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Tn=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,mi=_i,vi=_i;function ws(C,R){return C?it(this._months)?this._months[C.month()]:this._months[(this._months.isFormat||Tn).test(R)?"format":"standalone"][C.month()]:it(this._months)?this._months:this._months.standalone}function ho(C,R){return C?it(this._monthsShort)?this._monthsShort[C.month()]:this._monthsShort[Tn.test(R)?"format":"standalone"][C.month()]:it(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function pr(C,R,G){var oe,Se,xt,E=C.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],oe=0;oe<12;++oe)xt=Si([2e3,oe]),this._shortMonthsParse[oe]=this.monthsShort(xt,"").toLocaleLowerCase(),this._longMonthsParse[oe]=this.months(xt,"").toLocaleLowerCase();return G?R==="MMM"?(Se=We.call(this._shortMonthsParse,E),Se!==-1?Se:null):(Se=We.call(this._longMonthsParse,E),Se!==-1?Se:null):R==="MMM"?(Se=We.call(this._shortMonthsParse,E),Se!==-1?Se:(Se=We.call(this._longMonthsParse,E),Se!==-1?Se:null)):(Se=We.call(this._longMonthsParse,E),Se!==-1?Se:(Se=We.call(this._shortMonthsParse,E),Se!==-1?Se:null))}function Fi(C,R,G){var oe,Se,xt;if(this._monthsParseExact)return pr.call(this,C,R,G);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),oe=0;oe<12;oe++){if(Se=Si([2e3,oe]),G&&!this._longMonthsParse[oe]&&(this._longMonthsParse[oe]=new RegExp("^"+this.months(Se,"").replace(".","")+"$","i"),this._shortMonthsParse[oe]=new RegExp("^"+this.monthsShort(Se,"").replace(".","")+"$","i")),!G&&!this._monthsParse[oe]&&(xt="^"+this.months(Se,"")+"|^"+this.monthsShort(Se,""),this._monthsParse[oe]=new RegExp(xt.replace(".",""),"i")),G&&R==="MMMM"&&this._longMonthsParse[oe].test(C))return oe;if(G&&R==="MMM"&&this._shortMonthsParse[oe].test(C))return oe;if(!G&&this._monthsParse[oe].test(C))return oe}}function rt(C,R){if(!C.isValid())return C;if(typeof R=="string"){if(/^\d+$/.test(R))R=Pi(R);else if(R=C.localeData().monthsParse(R),!Kt(R))return C}var G=R,oe=C.date();return oe=oe<29?oe:Math.min(oe,Dt(C.year(),G)),C._isUTC?C._d.setUTCMonth(G,oe):C._d.setMonth(G,oe),C}function so(C){return C!=null?(rt(this,C),It.updateOffset(this,!0),this):V(this,"Month")}function To(){return Dt(this.year(),this.month())}function Os(C){return this._monthsParseExact?(yn(this,"_monthsRegex")||Oo.call(this),C?this._monthsShortStrictRegex:this._monthsShortRegex):(yn(this,"_monthsShortRegex")||(this._monthsShortRegex=mi),this._monthsShortStrictRegex&&C?this._monthsShortStrictRegex:this._monthsShortRegex)}function ds(C){return this._monthsParseExact?(yn(this,"_monthsRegex")||Oo.call(this),C?this._monthsStrictRegex:this._monthsRegex):(yn(this,"_monthsRegex")||(this._monthsRegex=vi),this._monthsStrictRegex&&C?this._monthsStrictRegex:this._monthsRegex)}function Oo(){function C(f,b){return b.length-f.length}var R=[],G=[],oe=[],Se,xt,E,u;for(Se=0;Se<12;Se++)xt=Si([2e3,Se]),E=Hr(this.monthsShort(xt,"")),u=Hr(this.months(xt,"")),R.push(E),G.push(u),oe.push(u),oe.push(E);R.sort(C),G.sort(C),oe.sort(C),this._monthsRegex=new RegExp("^("+oe.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+G.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+R.join("|")+")","i")}function nr(C,R,G,oe,Se,xt,E){var u;return C<100&&C>=0?(u=new Date(C+400,R,G,oe,Se,xt,E),isFinite(u.getFullYear())&&u.setFullYear(C)):u=new Date(C,R,G,oe,Se,xt,E),u}function wi(C){var R,G;return C<100&&C>=0?(G=Array.prototype.slice.call(arguments),G[0]=C+400,R=new Date(Date.UTC.apply(null,G)),isFinite(R.getUTCFullYear())&&R.setUTCFullYear(C)):R=new Date(Date.UTC.apply(null,arguments)),R}function Mn(C,R,G){var oe=7+R-G,Se=(7+wi(C,0,oe).getUTCDay()-R)%7;return-Se+oe-1}function ks(C,R,G,oe,Se){var xt=(7+G-oe)%7,E=Mn(C,oe,Se),u=1+7*(R-1)+xt+E,f,b;return u<=0?(f=C-1,b=oa(f)+u):u>oa(C)?(f=C+1,b=u-oa(C)):(f=C,b=u),{year:f,dayOfYear:b}}function jo(C,R,G){var oe=Mn(C.year(),R,G),Se=Math.floor((C.dayOfYear()-oe-1)/7)+1,xt,E;return Se<1?(E=C.year()-1,xt=Se+Zr(E,R,G)):Se>Zr(C.year(),R,G)?(xt=Se-Zr(C.year(),R,G),E=C.year()+1):(E=C.year(),xt=Se),{week:xt,year:E}}function Zr(C,R,G){var oe=Mn(C,R,G),Se=Mn(C+1,R,G);return(oa(C)-oe+Se)/7}Tt("w",["ww",2],"wo","week"),Tt("W",["WW",2],"Wo","isoWeek"),bn("w",hr,gr),bn("ww",hr,xi),bn("W",hr,gr),bn("WW",hr,xi),Xs(["w","ww","W","WW"],function(C,R,G,oe){R[oe.substr(0,1)]=Pi(C)});function aa(C){return jo(C,this._week.dow,this._week.doy).week}var ka={dow:0,doy:6};function fa(){return this._week.dow}function ps(){return this._week.doy}function no(C){var R=this.localeData().week(this);return C==null?R:this.add((C-R)*7,"d")}function Eo(C){var R=jo(this,1,4).week;return C==null?R:this.add((C-R)*7,"d")}Tt("d",0,"do","day"),Tt("dd",0,0,function(C){return this.localeData().weekdaysMin(this,C)}),Tt("ddd",0,0,function(C){return this.localeData().weekdaysShort(this,C)}),Tt("dddd",0,0,function(C){return this.localeData().weekdays(this,C)}),Tt("e",0,0,"weekday"),Tt("E",0,0,"isoWeekday"),bn("d",hr),bn("e",hr),bn("E",hr),bn("dd",function(C,R){return R.weekdaysMinRegex(C)}),bn("ddd",function(C,R){return R.weekdaysShortRegex(C)}),bn("dddd",function(C,R){return R.weekdaysRegex(C)}),Xs(["dd","ddd","dddd"],function(C,R,G,oe){var Se=G._locale.weekdaysParse(C,oe,G._strict);Se!=null?R.d=Se:Un(G).invalidWeekday=C}),Xs(["d","e","E"],function(C,R,G,oe){R[oe]=Pi(C)});function go(C,R){return typeof C!="string"?C:isNaN(C)?(C=R.weekdaysParse(C),typeof C=="number"?C:null):parseInt(C,10)}function Xo(C,R){return typeof C=="string"?R.weekdaysParse(C)%7||7:isNaN(C)?null:C}function Ae(C,R){return C.slice(R,7).concat(C.slice(0,R))}var Z="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),pe="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Ne="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Be=_i,ut=_i,Ft=_i;function Xt(C,R){var G=it(this._weekdays)?this._weekdays:this._weekdays[C&&C!==!0&&this._weekdays.isFormat.test(R)?"format":"standalone"];return C===!0?Ae(G,this._week.dow):C?G[C.day()]:G}function mn(C){return C===!0?Ae(this._weekdaysShort,this._week.dow):C?this._weekdaysShort[C.day()]:this._weekdaysShort}function ri(C){return C===!0?Ae(this._weekdaysMin,this._week.dow):C?this._weekdaysMin[C.day()]:this._weekdaysMin}function rr(C,R,G){var oe,Se,xt,E=C.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],oe=0;oe<7;++oe)xt=Si([2e3,1]).day(oe),this._minWeekdaysParse[oe]=this.weekdaysMin(xt,"").toLocaleLowerCase(),this._shortWeekdaysParse[oe]=this.weekdaysShort(xt,"").toLocaleLowerCase(),this._weekdaysParse[oe]=this.weekdays(xt,"").toLocaleLowerCase();return G?R==="dddd"?(Se=We.call(this._weekdaysParse,E),Se!==-1?Se:null):R==="ddd"?(Se=We.call(this._shortWeekdaysParse,E),Se!==-1?Se:null):(Se=We.call(this._minWeekdaysParse,E),Se!==-1?Se:null):R==="dddd"?(Se=We.call(this._weekdaysParse,E),Se!==-1||(Se=We.call(this._shortWeekdaysParse,E),Se!==-1)?Se:(Se=We.call(this._minWeekdaysParse,E),Se!==-1?Se:null)):R==="ddd"?(Se=We.call(this._shortWeekdaysParse,E),Se!==-1||(Se=We.call(this._weekdaysParse,E),Se!==-1)?Se:(Se=We.call(this._minWeekdaysParse,E),Se!==-1?Se:null)):(Se=We.call(this._minWeekdaysParse,E),Se!==-1||(Se=We.call(this._weekdaysParse,E),Se!==-1)?Se:(Se=We.call(this._shortWeekdaysParse,E),Se!==-1?Se:null))}function Xi(C,R,G){var oe,Se,xt;if(this._weekdaysParseExact)return rr.call(this,C,R,G);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),oe=0;oe<7;oe++){if(Se=Si([2e3,1]).day(oe),G&&!this._fullWeekdaysParse[oe]&&(this._fullWeekdaysParse[oe]=new RegExp("^"+this.weekdays(Se,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[oe]=new RegExp("^"+this.weekdaysShort(Se,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[oe]=new RegExp("^"+this.weekdaysMin(Se,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[oe]||(xt="^"+this.weekdays(Se,"")+"|^"+this.weekdaysShort(Se,"")+"|^"+this.weekdaysMin(Se,""),this._weekdaysParse[oe]=new RegExp(xt.replace(".",""),"i")),G&&R==="dddd"&&this._fullWeekdaysParse[oe].test(C))return oe;if(G&&R==="ddd"&&this._shortWeekdaysParse[oe].test(C))return oe;if(G&&R==="dd"&&this._minWeekdaysParse[oe].test(C))return oe;if(!G&&this._weekdaysParse[oe].test(C))return oe}}function Vo(C){if(!this.isValid())return C!=null?this:NaN;var R=V(this,"Day");return C!=null?(C=go(C,this.localeData()),this.add(C-R,"d")):R}function yo(C){if(!this.isValid())return C!=null?this:NaN;var R=(this.day()+7-this.localeData()._week.dow)%7;return C==null?R:this.add(C-R,"d")}function Vs(C){if(!this.isValid())return C!=null?this:NaN;if(C!=null){var R=Xo(C,this.localeData());return this.day(this.day()%7?R:R-7)}else return this.day()||7}function ko(C){return this._weekdaysParseExact?(yn(this,"_weekdaysRegex")||Ys.call(this),C?this._weekdaysStrictRegex:this._weekdaysRegex):(yn(this,"_weekdaysRegex")||(this._weekdaysRegex=Be),this._weekdaysStrictRegex&&C?this._weekdaysStrictRegex:this._weekdaysRegex)}function Uo(C){return this._weekdaysParseExact?(yn(this,"_weekdaysRegex")||Ys.call(this),C?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(yn(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=ut),this._weekdaysShortStrictRegex&&C?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function la(C){return this._weekdaysParseExact?(yn(this,"_weekdaysRegex")||Ys.call(this),C?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(yn(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Ft),this._weekdaysMinStrictRegex&&C?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Ys(){function C(T,B){return B.length-T.length}var R=[],G=[],oe=[],Se=[],xt,E,u,f,b;for(xt=0;xt<7;xt++)E=Si([2e3,1]).day(xt),u=Hr(this.weekdaysMin(E,"")),f=Hr(this.weekdaysShort(E,"")),b=Hr(this.weekdays(E,"")),R.push(u),G.push(f),oe.push(b),Se.push(u),Se.push(f),Se.push(b);R.sort(C),G.sort(C),oe.sort(C),Se.sort(C),this._weekdaysRegex=new RegExp("^("+Se.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+oe.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+G.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+R.join("|")+")","i")}function Ai(){return this.hours()%12||12}function ll(){return this.hours()||24}Tt("H",["HH",2],0,"hour"),Tt("h",["hh",2],0,Ai),Tt("k",["kk",2],0,ll),Tt("hmm",0,0,function(){return""+Ai.apply(this)+ee(this.minutes(),2)}),Tt("hmmss",0,0,function(){return""+Ai.apply(this)+ee(this.minutes(),2)+ee(this.seconds(),2)}),Tt("Hmm",0,0,function(){return""+this.hours()+ee(this.minutes(),2)}),Tt("Hmmss",0,0,function(){return""+this.hours()+ee(this.minutes(),2)+ee(this.seconds(),2)});function si(C,R){Tt(C,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),R)})}si("a",!0),si("A",!1);function Zo(C,R){return R._meridiemParse}bn("a",Zo),bn("A",Zo),bn("H",hr,Zn),bn("h",hr,gr),bn("k",hr,gr),bn("HH",hr,xi),bn("hh",hr,xi),bn("kk",hr,xi),bn("hmm",bi),bn("hmmss",Gr),bn("Hmm",bi),bn("Hmmss",Gr),Pn(["H","HH"],dr),Pn(["k","kk"],function(C,R,G){var oe=Pi(C);R[dr]=oe===24?0:oe}),Pn(["a","A"],function(C,R,G){G._isPm=G._locale.isPM(C),G._meridiem=C}),Pn(["h","hh"],function(C,R,G){R[dr]=Pi(C),Un(G).bigHour=!0}),Pn("hmm",function(C,R,G){var oe=C.length-2;R[dr]=Pi(C.substr(0,oe)),R[Qr]=Pi(C.substr(oe)),Un(G).bigHour=!0}),Pn("hmmss",function(C,R,G){var oe=C.length-4,Se=C.length-2;R[dr]=Pi(C.substr(0,oe)),R[Qr]=Pi(C.substr(oe,2)),R[gs]=Pi(C.substr(Se)),Un(G).bigHour=!0}),Pn("Hmm",function(C,R,G){var oe=C.length-2;R[dr]=Pi(C.substr(0,oe)),R[Qr]=Pi(C.substr(oe))}),Pn("Hmmss",function(C,R,G){var oe=C.length-4,Se=C.length-2;R[dr]=Pi(C.substr(0,oe)),R[Qr]=Pi(C.substr(oe,2)),R[gs]=Pi(C.substr(Se))});function ma(C){return(C+"").toLowerCase().charAt(0)==="p"}var ul=/[ap]\.?m?\.?/i,ia=P("Hours",!0);function Ro(C,R,G){return C>11?G?"pm":"PM":G?"am":"AM"}var La={calendar:$e,longDateFormat:Ki,invalidDate:fs,ordinal:Ao,dayOfMonthOrdinalParse:en,relativeTime:Fe,months:jt,monthsShort:xn,week:ka,weekdays:Z,weekdaysMin:Ne,weekdaysShort:pe,meridiemParse:ul},Ar={},il={},Jo;function J(C,R){var G,oe=Math.min(C.length,R.length);for(G=0;G<oe;G+=1)if(C[G]!==R[G])return G;return oe}function Ee(C){return C&&C.toLowerCase().replace("_","-")}function je(C){for(var R=0,G,oe,Se,xt;R<C.length;){for(xt=Ee(C[R]).split("-"),G=xt.length,oe=Ee(C[R+1]),oe=oe?oe.split("-"):null;G>0;){if(Se=Ct(xt.slice(0,G).join("-")),Se)return Se;if(oe&&oe.length>=G&&J(xt,oe)>=G-1)break;G--}R++}return Jo}function Je(C){return!!(C&&C.match("^[^/\\\\]*$"))}function Ct(C){var R=null,G;if(Ar[C]===void 0&&lo&&lo.exports&&Je(C))try{R=Jo._abbr,G=void 0,Object(function(){var Se=new Error("Cannot find module 'undefined'");throw Se.code="MODULE_NOT_FOUND",Se}()),Nt(R)}catch(oe){Ar[C]=null}return Ar[C]}function Nt(C,R){var G;return C&&(Nn(R)?G=zi(C):G=pn(C,R),G?Jo=G:typeof console!="undefined"&&console.warn&&console.warn("Locale "+C+" not found. Did you forget to load it?")),Jo._abbr}function pn(C,R){if(R!==null){var G,oe=La;if(R.abbr=C,Ar[C]!=null)jr("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),oe=Ar[C]._config;else if(R.parentLocale!=null)if(Ar[R.parentLocale]!=null)oe=Ar[R.parentLocale]._config;else if(G=Ct(R.parentLocale),G!=null)oe=G._config;else return il[R.parentLocale]||(il[R.parentLocale]=[]),il[R.parentLocale].push({name:C,config:R}),null;return Ar[C]=new ci(Is(oe,R)),il[C]&&il[C].forEach(function(Se){pn(Se.name,Se.config)}),Nt(C),Ar[C]}else return delete Ar[C],null}function ai(C,R){if(R!=null){var G,oe,Se=La;Ar[C]!=null&&Ar[C].parentLocale!=null?Ar[C].set(Is(Ar[C]._config,R)):(oe=Ct(C),oe!=null&&(Se=oe._config),R=Is(Se,R),oe==null&&(R.abbr=C),G=new ci(R),G.parentLocale=Ar[C],Ar[C]=G),Nt(C)}else Ar[C]!=null&&(Ar[C].parentLocale!=null?(Ar[C]=Ar[C].parentLocale,C===Nt()&&Nt(C)):Ar[C]!=null&&delete Ar[C]);return Ar[C]}function zi(C){var R;if(C&&C._locale&&C._locale._abbr&&(C=C._locale._abbr),!C)return Jo;if(!it(C)){if(R=Ct(C),R)return R;C=[C]}return je(C)}function as(){return le(Ar)}function Pr(C){var R,G=C._a;return G&&Un(C).overflow===-2&&(R=G[os]<0||G[os]>11?os:G[js]<1||G[js]>Dt(G[hs],G[os])?js:G[dr]<0||G[dr]>24||G[dr]===24&&(G[Qr]!==0||G[gs]!==0||G[ei]!==0)?dr:G[Qr]<0||G[Qr]>59?Qr:G[gs]<0||G[gs]>59?gs:G[ei]<0||G[ei]>999?ei:-1,Un(C)._overflowDayOfYear&&(R<hs||R>js)&&(R=js),Un(C)._overflowWeeks&&R===-1&&(R=Rs),Un(C)._overflowWeekday&&R===-1&&(R=co),Un(C).overflow=R),C}var fr=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,_o=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Co=/Z|[+-]\d\d(?::?\d\d)?/,De=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],He=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],ht=/^\/?Date\((-?\d+)/i,vt=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Bt={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function zt(C){var R,G,oe=C._i,Se=fr.exec(oe)||_o.exec(oe),xt,E,u,f,b=De.length,T=He.length;if(Se){for(Un(C).iso=!0,R=0,G=b;R<G;R++)if(De[R][1].exec(Se[1])){E=De[R][0],xt=De[R][2]!==!1;break}if(E==null){C._isValid=!1;return}if(Se[3]){for(R=0,G=T;R<G;R++)if(He[R][1].exec(Se[3])){u=(Se[2]||" ")+He[R][0];break}if(u==null){C._isValid=!1;return}}if(!xt&&u!=null){C._isValid=!1;return}if(Se[4])if(Co.exec(Se[4]))f="Z";else{C._isValid=!1;return}C._f=E+(u||"")+(f||""),$r(C)}else C._isValid=!1}function Ot(C,R,G,oe,Se,xt){var E=[mt(C),xn.indexOf(R),parseInt(G,10),parseInt(oe,10),parseInt(Se,10)];return xt&&E.push(parseInt(xt,10)),E}function mt(C){var R=parseInt(C,10);return R<=49?2e3+R:R<=999?1900+R:R}function on(C){return C.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function En(C,R,G){if(C){var oe=pe.indexOf(C),Se=new Date(R[0],R[1],R[2]).getDay();if(oe!==Se)return Un(G).weekdayMismatch=!0,G._isValid=!1,!1}return!0}function kn(C,R,G){if(C)return Bt[C];if(R)return 0;var oe=parseInt(G,10),Se=oe%100,xt=(oe-Se)/100;return xt*60+Se}function yi(C){var R=vt.exec(on(C._i)),G;if(R){if(G=Ot(R[4],R[3],R[2],R[5],R[6],R[7]),!En(R[1],G,C))return;C._a=G,C._tzm=kn(R[8],R[9],R[10]),C._d=wi.apply(null,C._a),C._d.setUTCMinutes(C._d.getUTCMinutes()-C._tzm),Un(C).rfc2822=!0}else C._isValid=!1}function gi(C){var R=ht.exec(C._i);if(R!==null){C._d=new Date(+R[1]);return}if(zt(C),C._isValid===!1)delete C._isValid;else return;if(yi(C),C._isValid===!1)delete C._isValid;else return;C._strict?C._isValid=!1:It.createFromInputFallback(C)}It.createFromInputFallback=cs("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(C){C._d=new Date(C._i+(C._useUTC?" UTC":""))});function Wi(C,R,G){return C!=null?C:R!=null?R:G}function Xn(C){var R=new Date(It.now());return C._useUTC?[R.getUTCFullYear(),R.getUTCMonth(),R.getUTCDate()]:[R.getFullYear(),R.getMonth(),R.getDate()]}function Yn(C){var R,G,oe=[],Se,xt,E;if(!C._d){for(Se=Xn(C),C._w&&C._a[js]==null&&C._a[os]==null&&Ht(C),C._dayOfYear!=null&&(E=Wi(C._a[hs],Se[hs]),(C._dayOfYear>oa(E)||C._dayOfYear===0)&&(Un(C)._overflowDayOfYear=!0),G=wi(E,0,C._dayOfYear),C._a[os]=G.getUTCMonth(),C._a[js]=G.getUTCDate()),R=0;R<3&&C._a[R]==null;++R)C._a[R]=oe[R]=Se[R];for(;R<7;R++)C._a[R]=oe[R]=C._a[R]==null?R===2?1:0:C._a[R];C._a[dr]===24&&C._a[Qr]===0&&C._a[gs]===0&&C._a[ei]===0&&(C._nextDay=!0,C._a[dr]=0),C._d=(C._useUTC?wi:nr).apply(null,oe),xt=C._useUTC?C._d.getUTCDay():C._d.getDay(),C._tzm!=null&&C._d.setUTCMinutes(C._d.getUTCMinutes()-C._tzm),C._nextDay&&(C._a[dr]=24),C._w&&typeof C._w.d!="undefined"&&C._w.d!==xt&&(Un(C).weekdayMismatch=!0)}}function Ht(C){var R,G,oe,Se,xt,E,u,f,b;R=C._w,R.GG!=null||R.W!=null||R.E!=null?(xt=1,E=4,G=Wi(R.GG,C._a[hs],jo(lr(),1,4).year),oe=Wi(R.W,1),Se=Wi(R.E,1),(Se<1||Se>7)&&(f=!0)):(xt=C._locale._week.dow,E=C._locale._week.doy,b=jo(lr(),xt,E),G=Wi(R.gg,C._a[hs],b.year),oe=Wi(R.w,b.week),R.d!=null?(Se=R.d,(Se<0||Se>6)&&(f=!0)):R.e!=null?(Se=R.e+xt,(R.e<0||R.e>6)&&(f=!0)):Se=xt),oe<1||oe>Zr(G,xt,E)?Un(C)._overflowWeeks=!0:f!=null?Un(C)._overflowWeekday=!0:(u=ks(G,oe,Se,xt,E),C._a[hs]=u.year,C._dayOfYear=u.dayOfYear)}It.ISO_8601=function(){},It.RFC_2822=function(){};function $r(C){if(C._f===It.ISO_8601){zt(C);return}if(C._f===It.RFC_2822){yi(C);return}C._a=[],Un(C).empty=!0;var R=""+C._i,G,oe,Se,xt,E,u=R.length,f=0,b,T;for(Se=hi(C._f,C._locale).match(Ze)||[],T=Se.length,G=0;G<T;G++)xt=Se[G],oe=(R.match(Wr(xt,C))||[])[0],oe&&(E=R.substr(0,R.indexOf(oe)),E.length>0&&Un(C).unusedInput.push(E),R=R.slice(R.indexOf(oe)+oe.length),f+=oe.length),St[xt]?(oe?Un(C).empty=!1:Un(C).unusedTokens.push(xt),Ts(xt,oe,C)):C._strict&&!oe&&Un(C).unusedTokens.push(xt);Un(C).charsLeftOver=u-f,R.length>0&&Un(C).unusedInput.push(R),C._a[dr]<=12&&Un(C).bigHour===!0&&C._a[dr]>0&&(Un(C).bigHour=void 0),Un(C).parsedDateParts=C._a.slice(0),Un(C).meridiem=C._meridiem,C._a[dr]=kt(C._locale,C._a[dr],C._meridiem),b=Un(C).era,b!==null&&(C._a[hs]=C._locale.erasConvertYear(b,C._a[hs])),Yn(C),Pr(C)}function kt(C,R,G){var oe;return G==null?R:C.meridiemHour!=null?C.meridiemHour(R,G):(C.isPM!=null&&(oe=C.isPM(G),oe&&R<12&&(R+=12),!oe&&R===12&&(R=0)),R)}function Bi(C){var R,G,oe,Se,xt,E,u=!1,f=C._f.length;if(f===0){Un(C).invalidFormat=!0,C._d=new Date(NaN);return}for(Se=0;Se<f;Se++)xt=0,E=!1,R=zs({},C),C._useUTC!=null&&(R._useUTC=C._useUTC),R._f=C._f[Se],$r(R),qt(R)&&(E=!0),xt+=Un(R).charsLeftOver,xt+=Un(R).unusedTokens.length*10,Un(R).score=xt,u?xt<oe&&(oe=xt,G=R):(oe==null||xt<oe||E)&&(oe=xt,G=R,E&&(u=!0));gn(C,G||R)}function Tr(C){if(!C._d){var R=sn(C._i),G=R.day===void 0?R.date:R.day;C._a=vn([R.year,R.month,G,R.hour,R.minute,R.second,R.millisecond],function(oe){return oe&&parseInt(oe,10)}),Yn(C)}}function Mi(C){var R=new pi(Pr(Ur(C)));return R._nextDay&&(R.add(1,"d"),R._nextDay=void 0),R}function Ur(C){var R=C._i,G=C._f;return C._locale=C._locale||zi(C._l),R===null||G===void 0&&R===""?mr({nullInput:!0}):(typeof R=="string"&&(C._i=R=C._locale.preparse(R)),vs(R)?new pi(Pr(R)):(In(R)?C._d=R:it(G)?Bi(C):G?$r(C):Ei(C),qt(C)||(C._d=null),C))}function Ei(C){var R=C._i;Nn(R)?C._d=new Date(It.now()):In(R)?C._d=new Date(R.valueOf()):typeof R=="string"?gi(C):it(R)?(C._a=vn(R.slice(0),function(G){return parseInt(G,10)}),Yn(C)):Qt(R)?Tr(C):Kt(R)?C._d=new Date(R):It.createFromInputFallback(C)}function Xr(C,R,G,oe,Se){var xt={};return(R===!0||R===!1)&&(oe=R,R=void 0),(G===!0||G===!1)&&(oe=G,G=void 0),(Qt(C)&&ii(C)||it(C)&&C.length===0)&&(C=void 0),xt._isAMomentObject=!0,xt._useUTC=xt._isUTC=Se,xt._l=G,xt._i=C,xt._f=R,xt._strict=oe,Mi(xt)}function lr(C,R,G,oe){return Xr(C,R,G,oe,!1)}var Ci=cs("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var C=lr.apply(null,arguments);return this.isValid()&&C.isValid()?C<this?this:C:mr()}),Or=cs("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var C=lr.apply(null,arguments);return this.isValid()&&C.isValid()?C>this?this:C:mr()});function Gs(C,R){var G,oe;if(R.length===1&&it(R[0])&&(R=R[0]),!R.length)return lr();for(G=R[0],oe=1;oe<R.length;++oe)(!R[oe].isValid()||R[oe][C](G))&&(G=R[oe]);return G}function sr(){var C=[].slice.call(arguments,0);return Gs("isBefore",C)}function Sn(){var C=[].slice.call(arguments,0);return Gs("isAfter",C)}var ln=function(){return Date.now?Date.now():+new Date},Yt=["year","quarter","month","week","day","hour","minute","second","millisecond"];function ti(C){var R,G=!1,oe,Se=Yt.length;for(R in C)if(yn(C,R)&&!(We.call(Yt,R)!==-1&&(C[R]==null||!isNaN(C[R]))))return!1;for(oe=0;oe<Se;++oe)if(C[Yt[oe]]){if(G)return!1;parseFloat(C[Yt[oe]])!==Pi(C[Yt[oe]])&&(G=!0)}return!0}function oo(){return this._isValid}function Oi(){return $a(NaN)}function Fr(C){var R=sn(C),G=R.year||0,oe=R.quarter||0,Se=R.month||0,xt=R.week||R.isoWeek||0,E=R.day||0,u=R.hour||0,f=R.minute||0,b=R.second||0,T=R.millisecond||0;this._isValid=ti(R),this._milliseconds=+T+b*1e3+f*6e4+u*1e3*60*60,this._days=+E+xt*7,this._months=+Se+oe*3+G*12,this._data={},this._locale=zi(),this._bubble()}function _s(C){return C instanceof Fr}function Lo(C){return C<0?Math.round(-1*C)*-1:Math.round(C)}function or(C,R,G){var oe=Math.min(C.length,R.length),Se=Math.abs(C.length-R.length),xt=0,E;for(E=0;E<oe;E++)(G&&C[E]!==R[E]||!G&&Pi(C[E])!==Pi(R[E]))&&xt++;return xt+Se}function kr(C,R){Tt(C,0,0,function(){var G=this.utcOffset(),oe="+";return G<0&&(G=-G,oe="-"),oe+ee(~~(G/60),2)+R+ee(~~G%60,2)})}kr("Z",":"),kr("ZZ",""),bn("Z",Sr),bn("ZZ",Sr),Pn(["Z","ZZ"],function(C,R,G){G._useUTC=!0,G._tzm=Ri(Sr,C)});var zn=/([\+\-]|\d\d)/gi;function Ri(C,R){var G=(R||"").match(C),oe,Se,xt;return G===null?null:(oe=G[G.length-1]||[],Se=(oe+"").match(zn)||["-",0,0],xt=+(Se[1]*60)+Pi(Se[2]),xt===0?0:Se[0]==="+"?xt:-xt)}function vo(C,R){var G,oe;return R._isUTC?(G=R.clone(),oe=(vs(C)||In(C)?C.valueOf():lr(C).valueOf())-G.valueOf(),G._d.setTime(G._d.valueOf()+oe),It.updateOffset(G,!1),G):lr(C).local()}function zo(C){return-Math.round(C._d.getTimezoneOffset())}It.updateOffset=function(){};function Jr(C,R,G){var oe=this._offset||0,Se;if(!this.isValid())return C!=null?this:NaN;if(C!=null){if(typeof C=="string"){if(C=Ri(Sr,C),C===null)return this}else Math.abs(C)<16&&!G&&(C=C*60);return!this._isUTC&&R&&(Se=zo(this)),this._offset=C,this._isUTC=!0,Se!=null&&this.add(Se,"m"),oe!==C&&(!R||this._changeInProgress?Ia(this,$a(C-oe,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,It.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?oe:zo(this)}function oi(C,R){return C!=null?(typeof C!="string"&&(C=-C),this.utcOffset(C,R),this):-this.utcOffset()}function Ti(C){return this.utcOffset(0,C)}function Mo(C){return this._isUTC&&(this.utcOffset(0,C),this._isUTC=!1,C&&this.subtract(zo(this),"m")),this}function Ws(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var C=Ri(Di,this._i);C!=null?this.utcOffset(C):this.utcOffset(0,!0)}return this}function eo(C){return this.isValid()?(C=C?lr(C).utcOffset():0,(this.utcOffset()-C)%60===0):!1}function Es(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function xs(){if(!Nn(this._isDSTShifted))return this._isDSTShifted;var C={},R;return zs(C,this),C=Ur(C),C._a?(R=C._isUTC?Si(C._a):lr(C._a),this._isDSTShifted=this.isValid()&&or(C._a,R.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function Io(){return this.isValid()?!this._isUTC:!1}function Li(){return this.isValid()?this._isUTC:!1}function Qa(){return this.isValid()?this._isUTC&&this._offset===0:!1}var pu=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Ll=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function $a(C,R){var G=C,oe=null,Se,xt,E;return _s(C)?G={ms:C._milliseconds,d:C._days,M:C._months}:Kt(C)||!isNaN(+C)?(G={},R?G[R]=+C:G.milliseconds=+C):(oe=pu.exec(C))?(Se=oe[1]==="-"?-1:1,G={y:0,d:Pi(oe[js])*Se,h:Pi(oe[dr])*Se,m:Pi(oe[Qr])*Se,s:Pi(oe[gs])*Se,ms:Pi(Lo(oe[ei]*1e3))*Se}):(oe=Ll.exec(C))?(Se=oe[1]==="-"?-1:1,G={y:wa(oe[2],Se),M:wa(oe[3],Se),w:wa(oe[4],Se),d:wa(oe[5],Se),h:wa(oe[6],Se),m:wa(oe[7],Se),s:wa(oe[8],Se)}):G==null?G={}:typeof G=="object"&&("from"in G||"to"in G)&&(E=So(lr(G.from),lr(G.to)),G={},G.ms=E.milliseconds,G.M=E.months),xt=new Fr(G),_s(C)&&yn(C,"_locale")&&(xt._locale=C._locale),_s(C)&&yn(C,"_isValid")&&(xt._isValid=C._isValid),xt}$a.fn=Fr.prototype,$a.invalid=Oi;function wa(C,R){var G=C&&parseFloat(C.replace(",","."));return(isNaN(G)?0:G)*R}function Ko(C,R){var G={};return G.months=R.month()-C.month()+(R.year()-C.year())*12,C.clone().add(G.months,"M").isAfter(R)&&--G.months,G.milliseconds=+R-+C.clone().add(G.months,"M"),G}function So(C,R){var G;return C.isValid()&&R.isValid()?(R=vo(R,C),C.isBefore(R)?G=Ko(C,R):(G=Ko(R,C),G.milliseconds=-G.milliseconds,G.months=-G.months),G):{milliseconds:0,months:0}}function Ks(C,R){return function(G,oe){var Se,xt;return oe!==null&&!isNaN(+oe)&&(jr(R,"moment()."+R+"(period, number) is deprecated. Please use moment()."+R+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),xt=G,G=oe,oe=xt),Se=$a(G,oe),Ia(this,Se,C),this}}function Ia(C,R,G,oe){var Se=R._milliseconds,xt=Lo(R._days),E=Lo(R._months);C.isValid()&&(oe=oe==null?!0:oe,E&&rt(C,V(C,"Month")+E*G),xt&&Y(C,"Date",V(C,"Date")+xt*G),Se&&C._d.setTime(C._d.valueOf()+Se*G),oe&&It.updateOffset(C,xt||E))}var Xa=Ks(1,"add"),Jl=Ks(-1,"subtract");function ua(C){return typeof C=="string"||C instanceof String}function Ea(C){return vs(C)||In(C)||ua(C)||Kt(C)||$i(C)||Mt(C)||C===null||C===void 0}function Mt(C){var R=Qt(C)&&!ii(C),G=!1,oe=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],Se,xt,E=oe.length;for(Se=0;Se<E;Se+=1)xt=oe[Se],G=G||yn(C,xt);return R&&G}function $i(C){var R=it(C),G=!1;return R&&(G=C.filter(function(oe){return!Kt(oe)&&ua(C)}).length===0),R&&G}function Ir(C){var R=Qt(C)&&!ii(C),G=!1,oe=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],Se,xt;for(Se=0;Se<oe.length;Se+=1)xt=oe[Se],G=G||yn(C,xt);return R&&G}function es(C,R){var G=C.diff(R,"days",!0);return G<-6?"sameElse":G<-1?"lastWeek":G<0?"lastDay":G<1?"sameDay":G<2?"nextDay":G<7?"nextWeek":"sameElse"}function Ps(C,R){arguments.length===1&&(arguments[0]?Ea(arguments[0])?(C=arguments[0],R=void 0):Ir(arguments[0])&&(R=arguments[0],C=void 0):(C=void 0,R=void 0));var G=C||lr(),oe=vo(G,this).startOf("day"),Se=It.calendarFormat(this,oe)||"sameElse",xt=R&&(vr(R[Se])?R[Se].call(this,G):R[Se]);return this.format(xt||this.localeData().calendar(Se,this,lr(G)))}function Rn(){return new pi(this)}function Po(C,R){var G=vs(C)?C:lr(C);return this.isValid()&&G.isValid()?(R=Ut(R)||"millisecond",R==="millisecond"?this.valueOf()>G.valueOf():G.valueOf()<this.clone().startOf(R).valueOf()):!1}function Nr(C,R){var G=vs(C)?C:lr(C);return this.isValid()&&G.isValid()?(R=Ut(R)||"millisecond",R==="millisecond"?this.valueOf()<G.valueOf():this.clone().endOf(R).valueOf()<G.valueOf()):!1}function cl(C,R,G,oe){var Se=vs(C)?C:lr(C),xt=vs(R)?R:lr(R);return this.isValid()&&Se.isValid()&&xt.isValid()?(oe=oe||"()",(oe[0]==="("?this.isAfter(Se,G):!this.isBefore(Se,G))&&(oe[1]===")"?this.isBefore(xt,G):!this.isAfter(xt,G))):!1}function Ca(C,R){var G=vs(C)?C:lr(C),oe;return this.isValid()&&G.isValid()?(R=Ut(R)||"millisecond",R==="millisecond"?this.valueOf()===G.valueOf():(oe=G.valueOf(),this.clone().startOf(R).valueOf()<=oe&&oe<=this.clone().endOf(R).valueOf())):!1}function po(C,R){return this.isSame(C,R)||this.isAfter(C,R)}function fu(C,R){return this.isSame(C,R)||this.isBefore(C,R)}function eu(C,R,G){var oe,Se,xt;if(!this.isValid())return NaN;if(oe=vo(C,this),!oe.isValid())return NaN;switch(Se=(oe.utcOffset()-this.utcOffset())*6e4,R=Ut(R),R){case"year":xt=Na(this,oe)/12;break;case"month":xt=Na(this,oe);break;case"quarter":xt=Na(this,oe)/3;break;case"second":xt=(this-oe)/1e3;break;case"minute":xt=(this-oe)/6e4;break;case"hour":xt=(this-oe)/36e5;break;case"day":xt=(this-oe-Se)/864e5;break;case"week":xt=(this-oe-Se)/6048e5;break;default:xt=this-oe}return G?xt:Lr(xt)}function Na(C,R){if(C.date()<R.date())return-Na(R,C);var G=(R.year()-C.year())*12+(R.month()-C.month()),oe=C.clone().add(G,"months"),Se,xt;return R-oe<0?(Se=C.clone().add(G-1,"months"),xt=(R-oe)/(oe-Se)):(Se=C.clone().add(G+1,"months"),xt=(R-oe)/(Se-oe)),-(G+xt)||0}It.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",It.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function ja(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function tu(C){if(!this.isValid())return null;var R=C!==!0,G=R?this.clone().utc():this;return G.year()<0||G.year()>9999?Qn(G,R?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):vr(Date.prototype.toISOString)?R?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",Qn(G,"Z")):Qn(G,R?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function Du(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var C="moment",R="",G,oe,Se,xt;return this.isLocal()||(C=this.utcOffset()===0?"moment.utc":"moment.parseZone",R="Z"),G="["+C+'("]',oe=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",Se="-MM-DD[T]HH:mm:ss.SSS",xt=R+'[")]',this.format(G+oe+Se+xt)}function wu(C){C||(C=this.isUtc()?It.defaultFormatUtc:It.defaultFormat);var R=Qn(this,C);return this.localeData().postformat(R)}function qo(C,R){return this.isValid()&&(vs(C)&&C.isValid()||lr(C).isValid())?$a({to:this,from:C}).locale(this.locale()).humanize(!R):this.localeData().invalidDate()}function Ya(C){return this.from(lr(),C)}function No(C,R){return this.isValid()&&(vs(C)&&C.isValid()||lr(C).isValid())?$a({from:this,to:C}).locale(this.locale()).humanize(!R):this.localeData().invalidDate()}function $l(C){return this.to(lr(),C)}function Eu(C){var R;return C===void 0?this._locale._abbr:(R=zi(C),R!=null&&(this._locale=R),this)}var _a=cs("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(C){return C===void 0?this.localeData():this.locale(C)});function Ga(){return this._locale}var $o=1e3,Br=60*$o,ls=60*Br,Ka=(365*400+97)*24*ls;function Cl(C,R){return(C%R+R)%R}function Va(C,R,G){return C<100&&C>=0?new Date(C+400,R,G)-Ka:new Date(C,R,G).valueOf()}function Cs(C,R,G){return C<100&&C>=0?Date.UTC(C+400,R,G)-Ka:Date.UTC(C,R,G)}function Ji(C){var R,G;if(C=Ut(C),C===void 0||C==="millisecond"||!this.isValid())return this;switch(G=this._isUTC?Cs:Va,C){case"year":R=G(this.year(),0,1);break;case"quarter":R=G(this.year(),this.month()-this.month()%3,1);break;case"month":R=G(this.year(),this.month(),1);break;case"week":R=G(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":R=G(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":R=G(this.year(),this.month(),this.date());break;case"hour":R=this._d.valueOf(),R-=Cl(R+(this._isUTC?0:this.utcOffset()*Br),ls);break;case"minute":R=this._d.valueOf(),R-=Cl(R,Br);break;case"second":R=this._d.valueOf(),R-=Cl(R,$o);break}return this._d.setTime(R),It.updateOffset(this,!0),this}function nu(C){var R,G;if(C=Ut(C),C===void 0||C==="millisecond"||!this.isValid())return this;switch(G=this._isUTC?Cs:Va,C){case"year":R=G(this.year()+1,0,1)-1;break;case"quarter":R=G(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":R=G(this.year(),this.month()+1,1)-1;break;case"week":R=G(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":R=G(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":R=G(this.year(),this.month(),this.date()+1)-1;break;case"hour":R=this._d.valueOf(),R+=ls-Cl(R+(this._isUTC?0:this.utcOffset()*Br),ls)-1;break;case"minute":R=this._d.valueOf(),R+=Br-Cl(R,Br)-1;break;case"second":R=this._d.valueOf(),R+=$o-Cl(R,$o)-1;break}return this._d.setTime(R),It.updateOffset(this,!0),this}function Hs(){return this._d.valueOf()-(this._offset||0)*6e4}function yl(){return Math.floor(this.valueOf()/1e3)}function ra(){return new Date(this.valueOf())}function Cu(){var C=this;return[C.year(),C.month(),C.date(),C.hour(),C.minute(),C.second(),C.millisecond()]}function iu(){var C=this;return{years:C.year(),months:C.month(),date:C.date(),hours:C.hours(),minutes:C.minutes(),seconds:C.seconds(),milliseconds:C.milliseconds()}}function Bu(){return this.isValid()?this.toISOString():null}function ru(){return qt(this)}function jl(){return gn({},Un(this))}function Ru(){return Un(this).overflow}function Yr(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}Tt("N",0,0,"eraAbbr"),Tt("NN",0,0,"eraAbbr"),Tt("NNN",0,0,"eraAbbr"),Tt("NNNN",0,0,"eraName"),Tt("NNNNN",0,0,"eraNarrow"),Tt("y",["y",1],"yo","eraYear"),Tt("y",["yy",2],0,"eraYear"),Tt("y",["yyy",3],0,"eraYear"),Tt("y",["yyyy",4],0,"eraYear"),bn("N",On),bn("NN",On),bn("NNN",On),bn("NNNN",ui),bn("NNNNN",Yi),Pn(["N","NN","NNN","NNNN","NNNNN"],function(C,R,G,oe){var Se=G._locale.erasParse(C,oe,G._strict);Se?Un(G).era=Se:Un(G).invalidEra=C}),bn("y",Ni),bn("yy",Ni),bn("yyy",Ni),bn("yyyy",Ni),bn("yo",ji),Pn(["y","yy","yyy","yyyy"],hs),Pn(["yo"],function(C,R,G,oe){var Se;G._locale._eraYearOrdinalRegex&&(Se=C.match(G._locale._eraYearOrdinalRegex)),G._locale.eraYearOrdinalParse?R[hs]=G._locale.eraYearOrdinalParse(C,Se):R[hs]=parseInt(C,10)});function d(C,R){var G,oe,Se,xt=this._eras||zi("en")._eras;for(G=0,oe=xt.length;G<oe;++G){switch(typeof xt[G].since){case"string":Se=It(xt[G].since).startOf("day"),xt[G].since=Se.valueOf();break}switch(typeof xt[G].until){case"undefined":xt[G].until=1/0;break;case"string":Se=It(xt[G].until).startOf("day").valueOf(),xt[G].until=Se.valueOf();break}}return xt}function a(C,R,G){var oe,Se,xt=this.eras(),E,u,f;for(C=C.toUpperCase(),oe=0,Se=xt.length;oe<Se;++oe)if(E=xt[oe].name.toUpperCase(),u=xt[oe].abbr.toUpperCase(),f=xt[oe].narrow.toUpperCase(),G)switch(R){case"N":case"NN":case"NNN":if(u===C)return xt[oe];break;case"NNNN":if(E===C)return xt[oe];break;case"NNNNN":if(f===C)return xt[oe];break}else if([E,u,f].indexOf(C)>=0)return xt[oe]}function m(C,R){var G=C.since<=C.until?1:-1;return R===void 0?It(C.since).year():It(C.since).year()+(R-C.offset)*G}function S(){var C,R,G,oe=this.localeData().eras();for(C=0,R=oe.length;C<R;++C)if(G=this.clone().startOf("day").valueOf(),oe[C].since<=G&&G<=oe[C].until||oe[C].until<=G&&G<=oe[C].since)return oe[C].name;return""}function $(){var C,R,G,oe=this.localeData().eras();for(C=0,R=oe.length;C<R;++C)if(G=this.clone().startOf("day").valueOf(),oe[C].since<=G&&G<=oe[C].until||oe[C].until<=G&&G<=oe[C].since)return oe[C].narrow;return""}function ne(){var C,R,G,oe=this.localeData().eras();for(C=0,R=oe.length;C<R;++C)if(G=this.clone().startOf("day").valueOf(),oe[C].since<=G&&G<=oe[C].until||oe[C].until<=G&&G<=oe[C].since)return oe[C].abbr;return""}function ve(){var C,R,G,oe,Se=this.localeData().eras();for(C=0,R=Se.length;C<R;++C)if(G=Se[C].since<=Se[C].until?1:-1,oe=this.clone().startOf("day").valueOf(),Se[C].since<=oe&&oe<=Se[C].until||Se[C].until<=oe&&oe<=Se[C].since)return(this.year()-It(Se[C].since).year())*G+Se[C].offset;return this.year()}function qe(C){return yn(this,"_erasNameRegex")||Ls.call(this),C?this._erasNameRegex:this._erasRegex}function ct(C){return yn(this,"_erasAbbrRegex")||Ls.call(this),C?this._erasAbbrRegex:this._erasRegex}function at(C){return yn(this,"_erasNarrowRegex")||Ls.call(this),C?this._erasNarrowRegex:this._erasRegex}function On(C,R){return R.erasAbbrRegex(C)}function ui(C,R){return R.erasNameRegex(C)}function Yi(C,R){return R.erasNarrowRegex(C)}function ji(C,R){return R._eraYearOrdinalRegex||Ni}function Ls(){var C=[],R=[],G=[],oe=[],Se,xt,E,u,f,b=this.eras();for(Se=0,xt=b.length;Se<xt;++Se)E=Hr(b[Se].name),u=Hr(b[Se].abbr),f=Hr(b[Se].narrow),R.push(E),C.push(u),G.push(f),oe.push(E),oe.push(u),oe.push(f);this._erasRegex=new RegExp("^("+oe.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+R.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+C.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+G.join("|")+")","i")}Tt(0,["gg",2],0,function(){return this.weekYear()%100}),Tt(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Zs(C,R){Tt(0,[C,C.length],0,R)}Zs("gggg","weekYear"),Zs("ggggg","weekYear"),Zs("GGGG","isoWeekYear"),Zs("GGGGG","isoWeekYear"),bn("G",qr),bn("g",qr),bn("GG",hr,xi),bn("gg",hr,xi),bn("GGGG",xr,di),bn("gggg",xr,di),bn("GGGGG",ms,Ui),bn("ggggg",ms,Ui),Xs(["gggg","ggggg","GGGG","GGGGG"],function(C,R,G,oe){R[oe.substr(0,2)]=Pi(C)}),Xs(["gg","GG"],function(C,R,G,oe){R[oe]=It.parseTwoDigitYear(C)});function ea(C){return Su.call(this,C,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function sa(C){return Su.call(this,C,this.isoWeek(),this.isoWeekday(),1,4)}function Pa(){return Zr(this.year(),1,4)}function Lu(){return Zr(this.isoWeekYear(),1,4)}function Vl(){var C=this.localeData()._week;return Zr(this.year(),C.dow,C.doy)}function Ju(){var C=this.localeData()._week;return Zr(this.weekYear(),C.dow,C.doy)}function Su(C,R,G,oe,Se){var xt;return C==null?jo(this,oe,Se).year:(xt=Zr(C,oe,Se),R>xt&&(R=xt),Sc.call(this,C,R,G,oe,Se))}function Sc(C,R,G,oe,Se){var xt=ks(C,R,G,oe,Se),E=wi(xt.year,0,xt.dayOfYear);return this.year(E.getUTCFullYear()),this.month(E.getUTCMonth()),this.date(E.getUTCDate()),this}Tt("Q",0,"Qo","quarter"),bn("Q",Wn),Pn("Q",function(C,R){R[os]=(Pi(C)-1)*3});function mu(C){return C==null?Math.ceil((this.month()+1)/3):this.month((C-1)*3+this.month()%3)}Tt("D",["DD",2],"Do","date"),bn("D",hr,gr),bn("DD",hr,xi),bn("Do",function(C,R){return C?R._dayOfMonthOrdinalParse||R._ordinalParse:R._dayOfMonthOrdinalParseLenient}),Pn(["D","DD"],js),Pn("Do",function(C,R){R[js]=Pi(C.match(hr)[0])});var rl=P("Date",!0);Tt("DDD",["DDDD",3],"DDDo","dayOfYear"),bn("DDD",Zi),bn("DDDD",ar),Pn(["DDD","DDDD"],function(C,R,G){G._dayOfYear=Pi(C)});function $u(C){var R=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return C==null?R:this.add(C-R,"d")}Tt("m",["mm",2],0,"minute"),bn("m",hr,Zn),bn("mm",hr,xi),Pn(["m","mm"],Qr);var Sl=P("Minutes",!1);Tt("s",["ss",2],0,"second"),bn("s",hr,Zn),bn("ss",hr,xi),Pn(["s","ss"],gs);var ju=P("Seconds",!1);Tt("S",0,0,function(){return~~(this.millisecond()/100)}),Tt(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),Tt(0,["SSS",3],0,"millisecond"),Tt(0,["SSSS",4],0,function(){return this.millisecond()*10}),Tt(0,["SSSSS",5],0,function(){return this.millisecond()*100}),Tt(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3}),Tt(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4}),Tt(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5}),Tt(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6}),bn("S",Zi,Wn),bn("SS",Zi,xi),bn("SSS",Zi,ar);var hl,lc;for(hl="SSSS";hl.length<=9;hl+="S")bn(hl,Ni);function Za(C,R){R[ei]=Pi(("0."+C)*1e3)}for(hl="S";hl.length<=9;hl+="S")Pn(hl,Za);lc=P("Milliseconds",!1),Tt("z",0,0,"zoneAbbr"),Tt("zz",0,0,"zoneName");function gc(){return this._isUTC?"UTC":""}function uc(){return this._isUTC?"Coordinated Universal Time":""}var O=pi.prototype;O.add=Xa,O.calendar=Ps,O.clone=Rn,O.diff=eu,O.endOf=nu,O.format=wu,O.from=qo,O.fromNow=Ya,O.to=No,O.toNow=$l,O.get=te,O.invalidAt=Ru,O.isAfter=Po,O.isBefore=Nr,O.isBetween=cl,O.isSame=Ca,O.isSameOrAfter=po,O.isSameOrBefore=fu,O.isValid=ru,O.lang=_a,O.locale=Eu,O.localeData=Ga,O.max=Or,O.min=Ci,O.parsingFlags=jl,O.set=we,O.startOf=Ji,O.subtract=Jl,O.toArray=Cu,O.toObject=iu,O.toDate=ra,O.toISOString=tu,O.inspect=Du,typeof Symbol!="undefined"&&Symbol.for!=null&&(O[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),O.toJSON=Bu,O.toString=ja,O.unix=yl,O.valueOf=Hs,O.creationData=Yr,O.eraName=S,O.eraNarrow=$,O.eraAbbr=ne,O.eraYear=ve,O.year=na,O.isLeapYear=re,O.weekYear=ea,O.isoWeekYear=sa,O.quarter=O.quarters=mu,O.month=so,O.daysInMonth=To,O.week=O.weeks=no,O.isoWeek=O.isoWeeks=Eo,O.weeksInYear=Vl,O.weeksInWeekYear=Ju,O.isoWeeksInYear=Pa,O.isoWeeksInISOWeekYear=Lu,O.date=rl,O.day=O.days=Vo,O.weekday=yo,O.isoWeekday=Vs,O.dayOfYear=$u,O.hour=O.hours=ia,O.minute=O.minutes=Sl,O.second=O.seconds=ju,O.millisecond=O.milliseconds=lc,O.utcOffset=Jr,O.utc=Ti,O.local=Mo,O.parseZone=Ws,O.hasAlignedHourOffset=eo,O.isDST=Es,O.isLocal=Io,O.isUtcOffset=Li,O.isUtc=Qa,O.isUTC=Qa,O.zoneAbbr=gc,O.zoneName=uc,O.dates=cs("dates accessor is deprecated. Use date instead.",rl),O.months=cs("months accessor is deprecated. Use month instead",so),O.years=cs("years accessor is deprecated. Use year instead",na),O.zone=cs("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",oi),O.isDSTShifted=cs("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",xs);function H(C){return lr(C*1e3)}function se(){return lr.apply(null,arguments).parseZone()}function ge(C){return C}var ue=ci.prototype;ue.calendar=ze,ue.longDateFormat=Vn,ue.invalidDate=wo,ue.ordinal=fe,ue.preparse=ge,ue.postformat=ge,ue.relativeTime=Ye,ue.pastFuture=Ve,ue.set=qs,ue.eras=d,ue.erasParse=a,ue.erasConvertYear=m,ue.erasAbbrRegex=ct,ue.erasNameRegex=qe,ue.erasNarrowRegex=at,ue.months=ws,ue.monthsShort=ho,ue.monthsParse=Fi,ue.monthsRegex=ds,ue.monthsShortRegex=Os,ue.week=aa,ue.firstDayOfYear=ps,ue.firstDayOfWeek=fa,ue.weekdays=Xt,ue.weekdaysMin=ri,ue.weekdaysShort=mn,ue.weekdaysParse=Xi,ue.weekdaysRegex=ko,ue.weekdaysShortRegex=Uo,ue.weekdaysMinRegex=la,ue.isPM=ma,ue.meridiem=Ro;function be(C,R,G,oe){var Se=zi(),xt=Si().set(oe,R);return Se[G](xt,C)}function ot(C,R,G){if(Kt(C)&&(R=C,C=void 0),C=C||"",R!=null)return be(C,R,G,"month");var oe,Se=[];for(oe=0;oe<12;oe++)Se[oe]=be(C,oe,G,"month");return Se}function _t(C,R,G,oe){typeof C=="boolean"?(Kt(R)&&(G=R,R=void 0),R=R||""):(R=C,G=R,C=!1,Kt(R)&&(G=R,R=void 0),R=R||"");var Se=zi(),xt=C?Se._week.dow:0,E,u=[];if(G!=null)return be(R,(G+xt)%7,oe,"day");for(E=0;E<7;E++)u[E]=be(R,(E+xt)%7,oe,"day");return u}function Rt(C,R){return ot(C,R,"months")}function an(C,R){return ot(C,R,"monthsShort")}function Gt(C,R,G){return _t(C,R,G,"weekdays")}function Ln(C,R,G){return _t(C,R,G,"weekdaysShort")}function Dn(C,R,G){return _t(C,R,G,"weekdaysMin")}Nt("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(C){var R=C%10,G=Pi(C%100/10)===1?"th":R===1?"st":R===2?"nd":R===3?"rd":"th";return C+G}}),It.lang=cs("moment.lang is deprecated. Use moment.locale instead.",Nt),It.langData=cs("moment.langData is deprecated. Use moment.localeData instead.",zi);var nn=Math.abs;function An(){var C=this._data;return this._milliseconds=nn(this._milliseconds),this._days=nn(this._days),this._months=nn(this._months),C.milliseconds=nn(C.milliseconds),C.seconds=nn(C.seconds),C.minutes=nn(C.minutes),C.hours=nn(C.hours),C.months=nn(C.months),C.years=nn(C.years),this}function ni(C,R,G,oe){var Se=$a(R,G);return C._milliseconds+=oe*Se._milliseconds,C._days+=oe*Se._days,C._months+=oe*Se._months,C._bubble()}function er(C,R){return ni(this,C,R,1)}function yr(C,R){return ni(this,C,R,-1)}function Er(C){return C<0?Math.floor(C):Math.ceil(C)}function ys(){var C=this._milliseconds,R=this._days,G=this._months,oe=this._data,Se,xt,E,u,f;return C>=0&&R>=0&&G>=0||C<=0&&R<=0&&G<=0||(C+=Er(ao(G)+R)*864e5,R=0,G=0),oe.milliseconds=C%1e3,Se=Lr(C/1e3),oe.seconds=Se%60,xt=Lr(Se/60),oe.minutes=xt%60,E=Lr(xt/60),oe.hours=E%24,R+=Lr(E/24),f=Lr(Ns(R)),G+=f,R-=Er(ao(f)),u=Lr(G/12),G%=12,oe.days=R,oe.months=G,oe.years=u,this}function Ns(C){return C*4800/146097}function ao(C){return C*146097/4800}function Bo(C){if(!this.isValid())return NaN;var R,G,oe=this._milliseconds;if(C=Ut(C),C==="month"||C==="quarter"||C==="year")switch(R=this._days+oe/864e5,G=this._months+Ns(R),C){case"month":return G;case"quarter":return G/3;case"year":return G/12}else switch(R=this._days+Math.round(ao(this._months)),C){case"week":return R/7+oe/6048e5;case"day":return R+oe/864e5;case"hour":return R*24+oe/36e5;case"minute":return R*1440+oe/6e4;case"second":return R*86400+oe/1e3;case"millisecond":return Math.floor(R*864e5)+oe;default:throw new Error("Unknown unit "+C)}}function to(C){return function(){return this.as(C)}}var Ja=to("ms"),dl=to("s"),Al=to("m"),Fo=to("h"),ga=to("d"),Fa=to("w"),xo=to("M"),vl=to("Q"),cc=to("y"),su=Ja;function Tl(){return $a(this)}function ec(C){return C=Ut(C),this.isValid()?this[C+"s"]():NaN}function Ol(C){return function(){return this.isValid()?this._data[C]:NaN}}var gu=Ol("milliseconds"),Yc=Ol("seconds"),el=Ol("minutes"),Wl=Ol("hours"),Sa=Ol("days"),hc=Ol("months"),Ma=Ol("years");function Hl(){return Lr(this.days()/7)}var sl=Math.round,ya={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Ul(C,R,G,oe,Se){return Se.relativeTime(R||1,!!G,C,oe)}function xl(C,R,G,oe){var Se=$a(C).abs(),xt=sl(Se.as("s")),E=sl(Se.as("m")),u=sl(Se.as("h")),f=sl(Se.as("d")),b=sl(Se.as("M")),T=sl(Se.as("w")),B=sl(Se.as("y")),U=xt<=G.ss&&["s",xt]||xt<G.s&&["ss",xt]||E<=1&&["m"]||E<G.m&&["mm",E]||u<=1&&["h"]||u<G.h&&["hh",u]||f<=1&&["d"]||f<G.d&&["dd",f];return G.w!=null&&(U=U||T<=1&&["w"]||T<G.w&&["ww",T]),U=U||b<=1&&["M"]||b<G.M&&["MM",b]||B<=1&&["y"]||["yy",B],U[2]=R,U[3]=+C>0,U[4]=oe,Ul.apply(null,U)}function kl(C){return C===void 0?sl:typeof C=="function"?(sl=C,!0):!1}function Au(C,R){return ya[C]===void 0?!1:R===void 0?ya[C]:(ya[C]=R,C==="s"&&(ya.ss=R-1),!0)}function Yo(C,R){if(!this.isValid())return this.localeData().invalidDate();var G=!1,oe=ya,Se,xt;return typeof C=="object"&&(R=C,C=!1),typeof C=="boolean"&&(G=C),typeof R=="object"&&(oe=Object.assign({},ya,R),R.s!=null&&R.ss==null&&(oe.ss=R.s-1)),Se=this.localeData(),xt=xl(this,!G,oe,Se),G&&(xt=Se.pastFuture(+this,xt)),Se.postformat(xt)}var fo=Math.abs;function ta(C){return(C>0)-(C<0)||+C}function tc(){if(!this.isValid())return this.localeData().invalidDate();var C=fo(this._milliseconds)/1e3,R=fo(this._days),G=fo(this._months),oe,Se,xt,E,u=this.asSeconds(),f,b,T,B;return u?(oe=Lr(C/60),Se=Lr(oe/60),C%=60,oe%=60,xt=Lr(G/12),G%=12,E=C?C.toFixed(3).replace(/\.?0+$/,""):"",f=u<0?"-":"",b=ta(this._months)!==ta(u)?"-":"",T=ta(this._days)!==ta(u)?"-":"",B=ta(this._milliseconds)!==ta(u)?"-":"",f+"P"+(xt?b+xt+"Y":"")+(G?b+G+"M":"")+(R?T+R+"D":"")+(Se||oe||C?"T":"")+(Se?B+Se+"H":"")+(oe?B+oe+"M":"")+(C?B+E+"S":"")):"P0D"}var is=Fr.prototype;is.isValid=oo,is.abs=An,is.add=er,is.subtract=yr,is.as=Bo,is.asMilliseconds=Ja,is.asSeconds=dl,is.asMinutes=Al,is.asHours=Fo,is.asDays=ga,is.asWeeks=Fa,is.asMonths=xo,is.asQuarters=vl,is.asYears=cc,is.valueOf=su,is._bubble=ys,is.clone=Tl,is.get=ec,is.milliseconds=gu,is.seconds=Yc,is.minutes=el,is.hours=Wl,is.days=Sa,is.weeks=Hl,is.months=hc,is.years=Ma,is.humanize=Yo,is.toISOString=tc,is.toString=tc,is.toJSON=tc,is.locale=Eu,is.localeData=Ga,is.toIsoString=cs("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",tc),is.lang=_a,Tt("X",0,0,"unix"),Tt("x",0,0,"valueOf"),bn("x",qr),bn("X",Qi),Pn("X",function(C,R,G){G._d=new Date(parseFloat(C)*1e3)}),Pn("x",function(C,R,G){G._d=new Date(Pi(C))});return It.version="2.30.1",fn(lr),It.fn=O,It.min=sr,It.max=Sn,It.now=ln,It.utc=Si,It.unix=H,It.months=Rt,It.isDate=In,It.locale=Nt,It.invalid=mr,It.duration=$a,It.isMoment=vs,It.weekdays=Gt,It.parseZone=se,It.localeData=zi,It.isDuration=_s,It.monthsShort=an,It.weekdaysMin=Dn,It.defineLocale=pn,It.updateLocale=ai,It.locales=as,It.weekdaysShort=Ln,It.normalizeUnits=Ut,It.relativeTimeRounding=kl,It.relativeTimeThreshold=Au,It.calendarFormat=es,It.prototype=O,It.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},It})},61449:function(lo,bs,dn){"use strict";dn.d(bs,{AV:function(){return Kt}});var xe=dn(32552),It=dn(41691);const fn=(0,It.Gv)({String:It.pJ.string,Number:It.pJ.number,"True False":It.pJ.bool,PropertyName:It.pJ.propertyName,Null:It.pJ.null,",":It.pJ.separator,"[ ]":It.pJ.squareBracket,"{ }":It.pJ.brace}),it=xe.WQ.deserialize({version:14,states:"$bOVQPOOOOQO'#Cb'#CbOnQPO'#CeOvQPO'#CjOOQO'#Cp'#CpQOQPOOOOQO'#Cg'#CgO}QPO'#CfO!SQPO'#CrOOQO,59P,59PO![QPO,59PO!aQPO'#CuOOQO,59U,59UO!iQPO,59UOVQPO,59QOqQPO'#CkO!nQPO,59^OOQO1G.k1G.kOVQPO'#ClO!vQPO,59aOOQO1G.p1G.pOOQO1G.l1G.lOOQO,59V,59VOOQO-E6i-E6iOOQO,59W,59WOOQO-E6j-E6j",stateData:"#O~OcOS~OQSORSOSSOTSOWQO]ROePO~OVXOeUO~O[[O~PVOg^O~Oh_OVfX~OVaO~OhbO[iX~O[dO~Oh_OVfa~OhbO[ia~O",goto:"!kjPPPPPPkPPkqwPPk{!RPPP!XP!ePP!hXSOR^bQWQRf_TVQ_Q`WRg`QcZRicQTOQZRQe^RhbRYQR]R",nodeNames:"\u26A0 JsonText True False Null Number String } { Object Property PropertyName ] [ Array",maxTerm:25,nodeProps:[["isolate",-2,6,11,""],["openedBy",7,"{",12,"["],["closedBy",8,"}",13,"]"]],propSources:[fn],skippedNodes:[0],repeatNodeCount:2,tokenData:"(|~RaXY!WYZ!W]^!Wpq!Wrs!]|}$u}!O$z!Q!R%T!R![&c![!]&t!}#O&y#P#Q'O#Y#Z'T#b#c'r#h#i(Z#o#p(r#q#r(w~!]Oc~~!`Wpq!]qr!]rs!xs#O!]#O#P!}#P;'S!];'S;=`$o<%lO!]~!}Oe~~#QXrs!]!P!Q!]#O#P!]#U#V!]#Y#Z!]#b#c!]#f#g!]#h#i!]#i#j#m~#pR!Q![#y!c!i#y#T#Z#y~#|R!Q![$V!c!i$V#T#Z$V~$YR!Q![$c!c!i$c#T#Z$c~$fR!Q![!]!c!i!]#T#Z!]~$rP;=`<%l!]~$zOh~~$}Q!Q!R%T!R![&c~%YRT~!O!P%c!g!h%w#X#Y%w~%fP!Q![%i~%nRT~!Q![%i!g!h%w#X#Y%w~%zR{|&T}!O&T!Q![&Z~&WP!Q![&Z~&`PT~!Q![&Z~&hST~!O!P%c!Q![&c!g!h%w#X#Y%w~&yOg~~'OO]~~'TO[~~'WP#T#U'Z~'^P#`#a'a~'dP#g#h'g~'jP#X#Y'm~'rOR~~'uP#i#j'x~'{P#`#a(O~(RP#`#a(U~(ZOS~~(^P#f#g(a~(dP#i#j(g~(jP#X#Y(m~(rOQ~~(wOW~~(|OV~",tokenizers:[0],topRules:{JsonText:[0,1]},tokenPrec:0});var Qt=dn(99517);const yn=()=>In=>{try{JSON.parse(In.state.doc.toString())}catch(vn){if(!(vn instanceof SyntaxError))throw vn;const gn=ii(vn,In.state.doc);return[{from:gn,message:vn.message,severity:"error",to:gn}]}return[]};function ii(In,vn){let gn;return(gn=In.message.match(/at position (\d+)/))?Math.min(+gn[1],vn.length):(gn=In.message.match(/at line (\d+) column (\d+)/))?Math.min(vn.line(+gn[1]).from+ +gn[2]-1,vn.length):0}const Nn=Qt.qp.define({name:"json",parser:it.configure({props:[Qt.uj.add({Object:(0,Qt.tC)({except:/^\s*\}/}),Array:(0,Qt.tC)({except:/^\s*\]/})}),Qt.x0.add({"Object Array":Qt.Dv})]}),languageData:{closeBrackets:{brackets:["[","{",'"']},indentOnInput:/^\s*[\}\]]$/}});function Kt(){return new Qt.ri(Nn)}},99517:function(lo,bs,dn){"use strict";dn.d(bs,{Dv:function(){return Ye},Gn:function(){return ee},K0:function(){return $e},Qf:function(){return Lr},R_:function(){return os},SS:function(){return le},Um:function(){return te},c:function(){return Is},e7:function(){return Di},mi:function(){return Js},n$:function(){return re},nF:function(){return Xs},nY:function(){return en},qp:function(){return gn},qz:function(){return Si},ri:function(){return jr},tC:function(){return wo},uj:function(){return Ze},x0:function(){return Fe},y1:function(){return ci}});var xe=dn(99415),It=dn(80403),fn=dn(90586),it=dn(41691),Qt=dn(6221),yn;const ii=new xe.md;function Nn(Ae){return It.r$.define({combine:Ae?Z=>Z.concat(Ae):void 0})}const Kt=new xe.md;class In{constructor(Z,pe,Ne=[],Be=""){this.data=Z,this.name=Be,It.yy.prototype.hasOwnProperty("tree")||Object.defineProperty(It.yy.prototype,"tree",{get(){return Si(this)}}),this.parser=pe,this.extension=[wr.of(this),It.yy.languageData.of((ut,Ft,Xt)=>{let mn=vn(ut,Ft,Xt),ri=mn.type.prop(ii);if(!ri)return[];let rr=ut.facet(ri),Xi=mn.type.prop(Kt);if(Xi){let Vo=mn.resolve(Ft-mn.from,Xt);for(let yo of Xi)if(yo.test(Vo,ut)){let Vs=ut.facet(yo.facet);return yo.type=="replace"?Vs:Vs.concat(rr)}}return rr})].concat(Ne)}isActiveAt(Z,pe,Ne=-1){return vn(Z,pe,Ne).type.prop(ii)==this.data}findRegions(Z){let pe=Z.facet(wr);if((pe==null?void 0:pe.data)==this.data)return[{from:0,to:Z.doc.length}];if(!pe||!pe.allowsNesting)return[];let Ne=[],Be=(ut,Ft)=>{if(ut.prop(ii)==this.data){Ne.push({from:Ft,to:Ft+ut.length});return}let Xt=ut.prop(xe.md.mounted);if(Xt){if(Xt.tree.prop(ii)==this.data){if(Xt.overlay)for(let mn of Xt.overlay)Ne.push({from:mn.from+Ft,to:mn.to+Ft});else Ne.push({from:Ft,to:Ft+ut.length});return}else if(Xt.overlay){let mn=Ne.length;if(Be(Xt.tree,Xt.overlay[0].from+Ft),Ne.length>mn)return}}for(let mn=0;mn<ut.children.length;mn++){let ri=ut.children[mn];ri instanceof xe.mp&&Be(ri,ut.positions[mn]+Ft)}};return Be(Si(Z),0),Ne}get allowsNesting(){return!0}}In.setState=It.Py.define();function vn(Ae,Z,pe){let Ne=Ae.facet(wr),Be=Si(Ae).topNode;if(!Ne||Ne.allowsNesting)for(let ut=Be;ut;ut=ut.enter(Z,pe,xe.vj.ExcludeBuffers))ut.type.isTop&&(Be=ut);return Be}class gn extends In{constructor(Z,pe,Ne){super(Z,pe,[],Ne),this.parser=pe}static define(Z){let pe=Nn(Z.languageData);return new gn(pe,Z.parser.configure({props:[ii.add(Ne=>Ne.isTop?pe:void 0)]}),Z.name)}configure(Z,pe){return new gn(this.data,this.parser.configure(Z),pe||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function Si(Ae){let Z=Ae.field(In.state,!1);return Z?Z.tree:xe.mp.empty}function Ii(Ae,Z,pe=50){var Ne;let Be=(Ne=Ae.field(In.state,!1))===null||Ne===void 0?void 0:Ne.context;if(!Be)return null;let ut=Be.viewport;Be.updateViewport({from:0,to:Z});let Ft=Be.isDone(Z)||Be.work(pe,Z)?Be.tree:null;return Be.updateViewport(ut),Ft}function Un(Ae,Z=Ae.doc.length){var pe;return((pe=Ae.field(In.state,!1))===null||pe===void 0?void 0:pe.context.isDone(Z))||!1}function $t(Ae,Z=Ae.viewport.to,pe=100){let Ne=Ii(Ae.state,Z,pe);return Ne!=Si(Ae.state)&&Ae.dispatch({}),!!Ne}function qt(Ae){var Z;return((Z=Ae.plugin(cs))===null||Z===void 0?void 0:Z.isWorking())||!1}class mr{constructor(Z){this.doc=Z,this.cursorPos=0,this.string="",this.cursor=Z.iter()}get length(){return this.doc.length}syncTo(Z){return this.string=this.cursor.next(Z-this.cursorPos).value,this.cursorPos=Z+this.string.length,this.cursorPos-this.string.length}chunk(Z){return this.syncTo(Z),this.string}get lineChunks(){return!0}read(Z,pe){let Ne=this.cursorPos-this.string.length;return Z<Ne||pe>=this.cursorPos?this.doc.sliceString(Z,pe):this.string.slice(Z-Ne,pe-Ne)}}let ss=null;class Dr{constructor(Z,pe,Ne=[],Be,ut,Ft,Xt,mn){this.parser=Z,this.state=pe,this.fragments=Ne,this.tree=Be,this.treeLen=ut,this.viewport=Ft,this.skipped=Xt,this.scheduleOn=mn,this.parse=null,this.tempSkipped=[]}static create(Z,pe,Ne){return new Dr(Z,pe,[],xe.mp.empty,0,Ne,[],null)}startParse(){return this.parser.startParse(new mr(this.state.doc),this.fragments)}work(Z,pe){return pe!=null&&pe>=this.state.doc.length&&(pe=void 0),this.tree!=xe.mp.empty&&this.isDone(pe!=null?pe:this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var Ne;if(typeof Z=="number"){let Be=Date.now()+Z;Z=()=>Date.now()>Be}for(this.parse||(this.parse=this.startParse()),pe!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>pe)&&pe<this.state.doc.length&&this.parse.stopAt(pe);;){let Be=this.parse.advance();if(Be)if(this.fragments=this.withoutTempSkipped(xe.i9.addTree(Be,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(Ne=this.parse.stoppedAt)!==null&&Ne!==void 0?Ne:this.state.doc.length,this.tree=Be,this.parse=null,this.treeLen<(pe!=null?pe:this.state.doc.length))this.parse=this.startParse();else return!0;if(Z())return!1}})}takeTree(){let Z,pe;this.parse&&(Z=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>Z)&&this.parse.stopAt(Z),this.withContext(()=>{for(;!(pe=this.parse.advance()););}),this.treeLen=Z,this.tree=pe,this.fragments=this.withoutTempSkipped(xe.i9.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(Z){let pe=ss;ss=this;try{return Z()}finally{ss=pe}}withoutTempSkipped(Z){for(let pe;pe=this.tempSkipped.pop();)Z=zs(Z,pe.from,pe.to);return Z}changes(Z,pe){let{fragments:Ne,tree:Be,treeLen:ut,viewport:Ft,skipped:Xt}=this;if(this.takeTree(),!Z.empty){let mn=[];if(Z.iterChangedRanges((ri,rr,Xi,Vo)=>mn.push({fromA:ri,toA:rr,fromB:Xi,toB:Vo})),Ne=xe.i9.applyChanges(Ne,mn),Be=xe.mp.empty,ut=0,Ft={from:Z.mapPos(Ft.from,-1),to:Z.mapPos(Ft.to,1)},this.skipped.length){Xt=[];for(let ri of this.skipped){let rr=Z.mapPos(ri.from,1),Xi=Z.mapPos(ri.to,-1);rr<Xi&&Xt.push({from:rr,to:Xi})}}}return new Dr(this.parser,pe,Ne,Be,ut,Ft,Xt,this.scheduleOn)}updateViewport(Z){if(this.viewport.from==Z.from&&this.viewport.to==Z.to)return!1;this.viewport=Z;let pe=this.skipped.length;for(let Ne=0;Ne<this.skipped.length;Ne++){let{from:Be,to:ut}=this.skipped[Ne];Be<Z.to&&ut>Z.from&&(this.fragments=zs(this.fragments,Be,ut),this.skipped.splice(Ne--,1))}return this.skipped.length>=pe?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(Z,pe){this.skipped.push({from:Z,to:pe})}static getSkippingParser(Z){return new class extends xe._b{createParse(pe,Ne,Be){let ut=Be[0].from,Ft=Be[Be.length-1].to;return{parsedPos:ut,advance(){let mn=ss;if(mn){for(let ri of Be)mn.tempSkipped.push(ri);Z&&(mn.scheduleOn=mn.scheduleOn?Promise.all([mn.scheduleOn,Z]):Z)}return this.parsedPos=Ft,new xe.mp(xe.Jq.none,[],[],Ft-ut)},stoppedAt:null,stopAt(){}}}}}isDone(Z){Z=Math.min(Z,this.state.doc.length);let pe=this.fragments;return this.treeLen>=Z&&pe.length&&pe[0].from==0&&pe[0].to>=Z}static get(){return ss}}function zs(Ae,Z,pe){return xe.i9.applyChanges(Ae,[{fromA:Z,toA:pe,fromB:Z,toB:pe}])}class pi{constructor(Z){this.context=Z,this.tree=Z.tree}apply(Z){if(!Z.docChanged&&this.tree==this.context.tree)return this;let pe=this.context.changes(Z.changes,Z.state),Ne=this.context.treeLen==Z.startState.doc.length?void 0:Math.max(Z.changes.mapPos(this.context.treeLen),pe.viewport.to);return pe.work(20,Ne)||pe.takeTree(),new pi(pe)}static init(Z){let pe=Math.min(3e3,Z.doc.length),Ne=Dr.create(Z.facet(wr).parser,Z,{from:0,to:pe});return Ne.work(20,pe)||Ne.takeTree(),new pi(Ne)}}In.state=It.QQ.define({create:pi.init,update(Ae,Z){for(let pe of Z.effects)if(pe.is(In.setState))return pe.value;return Z.startState.facet(wr)!=Z.state.facet(wr)?pi.init(Z.state):Ae.apply(Z)}});let vs=Ae=>{let Z=setTimeout(()=>Ae(),500);return()=>clearTimeout(Z)};typeof requestIdleCallback!="undefined"&&(vs=Ae=>{let Z=-1,pe=setTimeout(()=>{Z=requestIdleCallback(Ae,{timeout:500-100})},100);return()=>Z<0?clearTimeout(pe):cancelIdleCallback(Z)});const uo=typeof navigator!="undefined"&&(!((yn=navigator.scheduling)===null||yn===void 0)&&yn.isInputPending)?()=>navigator.scheduling.isInputPending():null,cs=fn.lg.fromClass(class{constructor(Z){this.view=Z,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(Z){let pe=this.view.state.field(In.state).context;(pe.updateViewport(Z.view.viewport)||this.view.viewport.to>pe.treeLen)&&this.scheduleWork(),(Z.docChanged||Z.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(pe)}scheduleWork(){if(this.working)return;let{state:Z}=this.view,pe=Z.field(In.state);(pe.tree!=pe.context.tree||!pe.context.isDone(Z.doc.length))&&(this.working=vs(this.work))}work(Z){this.working=null;let pe=Date.now();if(this.chunkEnd<pe&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=pe+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:Ne,viewport:{to:Be}}=this.view,ut=Ne.field(In.state);if(ut.tree==ut.context.tree&&ut.context.isDone(Be+1e5))return;let Ft=Date.now()+Math.min(this.chunkBudget,100,Z&&!uo?Math.max(25,Z.timeRemaining()-5):1e9),Xt=ut.context.treeLen<Be&&Ne.doc.length>Be+1e3,mn=ut.context.work(()=>uo&&uo()||Date.now()>Ft,Be+(Xt?0:1e5));this.chunkBudget-=Date.now()-pe,(mn||this.chunkBudget<=0)&&(ut.context.takeTree(),this.view.dispatch({effects:In.setState.of(new pi(ut.context))})),this.chunkBudget>0&&!(mn&&!Xt)&&this.scheduleWork(),this.checkAsyncSchedule(ut.context)}checkAsyncSchedule(Z){Z.scheduleOn&&(this.workScheduled++,Z.scheduleOn.then(()=>this.scheduleWork()).catch(pe=>(0,fn.OO)(this.view.state,pe)).then(()=>this.workScheduled--),Z.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),wr=It.r$.define({combine(Ae){return Ae.length?Ae[0]:null},enables:Ae=>[In.state,cs,fn.tk.contentAttributes.compute([Ae],Z=>{let pe=Z.facet(Ae);return pe&&pe.name?{"data-language":pe.name}:{}})]});class jr{constructor(Z,pe=[]){this.language=Z,this.support=pe,this.extension=[Z,pe]}}class vr{constructor(Z,pe,Ne,Be,ut,Ft=void 0){this.name=Z,this.alias=pe,this.extensions=Ne,this.filename=Be,this.loadFunc=ut,this.support=Ft,this.loading=null}load(){return this.loading||(this.loading=this.loadFunc().then(Z=>this.support=Z,Z=>{throw this.loading=null,Z}))}static of(Z){let{load:pe,support:Ne}=Z;if(!pe){if(!Ne)throw new RangeError("Must pass either 'load' or 'support' to LanguageDescription.of");pe=()=>Promise.resolve(Ne)}return new vr(Z.name,(Z.alias||[]).concat(Z.name).map(Be=>Be.toLowerCase()),Z.extensions||[],Z.filename,pe,Ne)}static matchFilename(Z,pe){for(let Be of Z)if(Be.filename&&Be.filename.test(pe))return Be;let Ne=/\.([^.]+)$/.exec(pe);if(Ne){for(let Be of Z)if(Be.extensions.indexOf(Ne[1])>-1)return Be}return null}static matchLanguageName(Z,pe,Ne=!0){pe=pe.toLowerCase();for(let Be of Z)if(Be.alias.some(ut=>ut==pe))return Be;if(Ne)for(let Be of Z)for(let ut of Be.alias){let Ft=pe.indexOf(ut);if(Ft>-1&&(ut.length>2||!/\w/.test(pe[Ft-1])&&!/\w/.test(pe[Ft+ut.length])))return Be}return null}}const qs=It.r$.define(),Is=It.r$.define({combine:Ae=>{if(!Ae.length)return"  ";let Z=Ae[0];if(!Z||/\S/.test(Z)||Array.from(Z).some(pe=>pe!=Z[0]))throw new Error("Invalid indent unit: "+JSON.stringify(Ae[0]));return Z}});function ci(Ae){let Z=Ae.facet(Is);return Z.charCodeAt(0)==9?Ae.tabSize*Z.length:Z.length}function le(Ae,Z){let pe="",Ne=Ae.tabSize,Be=Ae.facet(Is)[0];if(Be=="	"){for(;Z>=Ne;)pe+="	",Z-=Ne;Be=" "}for(let ut=0;ut<Z;ut++)pe+=Be;return pe}function $e(Ae,Z){Ae instanceof It.yy&&(Ae=new ee(Ae));for(let Ne of Ae.state.facet(qs)){let Be=Ne(Ae,Z);if(Be!==void 0)return Be}let pe=Si(Ae.state);return pe.length>=Z?Ie(Ae,pe,Z):null}function ze(Ae,Z,pe){let Ne=Object.create(null),Be=new ee(Ae,{overrideIndentation:Ft=>{var Xt;return(Xt=Ne[Ft])!==null&&Xt!==void 0?Xt:-1}}),ut=[];for(let Ft=Z;Ft<=pe;){let Xt=Ae.doc.lineAt(Ft);Ft=Xt.to+1;let mn=$e(Be,Xt.from);if(mn==null)continue;/\S/.test(Xt.text)||(mn=0);let ri=/^\s*/.exec(Xt.text)[0],rr=le(Ae,mn);ri!=rr&&(Ne[Xt.from]=mn,ut.push({from:Xt.from,to:Xt.from+ri.length,insert:rr}))}return Ae.changes(ut)}class ee{constructor(Z,pe={}){this.state=Z,this.options=pe,this.unit=ci(Z)}lineAt(Z,pe=1){let Ne=this.state.doc.lineAt(Z),{simulateBreak:Be,simulateDoubleBreak:ut}=this.options;return Be!=null&&Be>=Ne.from&&Be<=Ne.to?ut&&Be==Z?{text:"",from:Z}:(pe<0?Be<Z:Be<=Z)?{text:Ne.text.slice(Be-Ne.from),from:Be}:{text:Ne.text.slice(0,Be-Ne.from),from:Ne.from}:Ne}textAfterPos(Z,pe=1){if(this.options.simulateDoubleBreak&&Z==this.options.simulateBreak)return"";let{text:Ne,from:Be}=this.lineAt(Z,pe);return Ne.slice(Z-Be,Math.min(Ne.length,Z+100-Be))}column(Z,pe=1){let{text:Ne,from:Be}=this.lineAt(Z,pe),ut=this.countColumn(Ne,Z-Be),Ft=this.options.overrideIndentation?this.options.overrideIndentation(Be):-1;return Ft>-1&&(ut+=Ft-this.countColumn(Ne,Ne.search(/\S|$/))),ut}countColumn(Z,pe=Z.length){return(0,It.IS)(Z,this.state.tabSize,pe)}lineIndent(Z,pe=1){let{text:Ne,from:Be}=this.lineAt(Z,pe),ut=this.options.overrideIndentation;if(ut){let Ft=ut(Be);if(Ft>-1)return Ft}return this.countColumn(Ne,Ne.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const Ze=new xe.md;function Ie(Ae,Z,pe){let Ne=Z.resolveStack(pe),Be=Ne.node.enterUnfinishedNodesBefore(pe);if(Be!=Ne.node){let ut=[];for(let Ft=Be;Ft!=Ne.node;Ft=Ft.parent)ut.push(Ft);for(let Ft=ut.length-1;Ft>=0;Ft--)Ne={node:ut[Ft],next:Ne}}return Xe(Ne,Ae,pe)}function Xe(Ae,Z,pe){for(let Ne=Ae;Ne;Ne=Ne.next){let Be=Tt(Ne.node);if(Be)return Be(Fn.create(Z,pe,Ne))}return 0}function St(Ae){return Ae.pos==Ae.options.simulateBreak&&Ae.options.simulateDoubleBreak}function Tt(Ae){let Z=Ae.type.prop(Ze);if(Z)return Z;let pe=Ae.firstChild,Ne;if(pe&&(Ne=pe.type.prop(xe.md.closedBy))){let Be=Ae.lastChild,ut=Be&&Ne.indexOf(Be.name)>-1;return Ft=>Vn(Ft,!0,1,void 0,ut&&!St(Ft)?Be.from:void 0)}return Ae.parent==null?Bn:null}function Bn(){return 0}class Fn extends ee{constructor(Z,pe,Ne){super(Z.state,Z.options),this.base=Z,this.pos=pe,this.context=Ne}get node(){return this.context.node}static create(Z,pe,Ne){return new Fn(Z,pe,Ne)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(Z){let pe=this.state.doc.lineAt(Z.from);for(;;){let Ne=Z.resolve(pe.from);for(;Ne.parent&&Ne.parent.from==Ne.from;)Ne=Ne.parent;if(Qn(Ne,Z))break;pe=this.state.doc.lineAt(Ne.from)}return this.lineIndent(pe.from)}continue(){return Xe(this.context.next,this.base,this.pos)}}function Qn(Ae,Z){for(let pe=Z;pe;pe=pe.parent)if(Ae==pe)return!0;return!1}function hi(Ae){let Z=Ae.node,pe=Z.childAfter(Z.from),Ne=Z.lastChild;if(!pe)return null;let Be=Ae.options.simulateBreak,ut=Ae.state.doc.lineAt(pe.from),Ft=Be==null||Be<=ut.from?ut.to:Math.min(ut.to,Be);for(let Xt=pe.to;;){let mn=Z.childAfter(Xt);if(!mn||mn==Ne)return null;if(!mn.type.isSkipped)return mn.from<Ft?pe:null;Xt=mn.to}}function Ki({closing:Ae,align:Z=!0,units:pe=1}){return Ne=>Vn(Ne,Z,pe,Ae)}function Vn(Ae,Z,pe,Ne,Be){let ut=Ae.textAfter,Ft=ut.match(/^\s*/)[0].length,Xt=Ne&&ut.slice(Ft,Ft+Ne.length)==Ne||Be==Ae.pos+Ft,mn=Z?hi(Ae):null;return mn?Xt?Ae.column(mn.from):Ae.column(mn.to):Ae.baseIndent+(Xt?0:Ae.unit*pe)}const fs=Ae=>Ae.baseIndent;function wo({except:Ae,units:Z=1}={}){return pe=>{let Ne=Ae&&Ae.test(pe.textAfter);return pe.baseIndent+(Ne?0:Z*pe.unit)}}const Ao=200;function en(){return It.yy.transactionFilter.of(Ae=>{if(!Ae.docChanged||!Ae.isUserEvent("input.type")&&!Ae.isUserEvent("input.complete"))return Ae;let Z=Ae.startState.languageDataAt("indentOnInput",Ae.startState.selection.main.head);if(!Z.length)return Ae;let pe=Ae.newDoc,{head:Ne}=Ae.newSelection.main,Be=pe.lineAt(Ne);if(Ne>Be.from+Ao)return Ae;let ut=pe.sliceString(Be.from,Ne);if(!Z.some(ri=>ri.test(ut)))return Ae;let{state:Ft}=Ae,Xt=-1,mn=[];for(let{head:ri}of Ft.selection.ranges){let rr=Ft.doc.lineAt(ri);if(rr.from==Xt)continue;Xt=rr.from;let Xi=$e(Ft,rr.from);if(Xi==null)continue;let Vo=/^\s*/.exec(rr.text)[0],yo=le(Ft,Xi);Vo!=yo&&mn.push({from:rr.from,to:rr.from+Vo.length,insert:yo})}return mn.length?[Ae,{changes:mn,sequential:!0}]:Ae})}const fe=It.r$.define(),Fe=new xe.md;function Ye(Ae){let Z=Ae.firstChild,pe=Ae.lastChild;return Z&&Z.to<pe.from?{from:Z.to,to:pe.type.isError?Ae.to:pe.from}:null}function Ve(Ae,Z,pe){let Ne=Si(Ae);if(Ne.length<pe)return null;let Be=Ne.resolveStack(pe,1),ut=null;for(let Ft=Be;Ft;Ft=Ft.next){let Xt=Ft.node;if(Xt.to<=pe||Xt.from>pe)continue;if(ut&&Xt.from<Z)break;let mn=Xt.type.prop(Fe);if(mn&&(Xt.to<Ne.length-50||Ne.length==Ae.doc.length||!Ge(Xt))){let ri=mn(Xt,Ae);ri&&ri.from<=pe&&ri.from>=Z&&ri.to>pe&&(ut=ri)}}return ut}function Ge(Ae){let Z=Ae.lastChild;return Z&&Z.to==Ae.to&&Z.type.isError}function Ut(Ae,Z,pe){for(let Ne of Ae.facet(fe)){let Be=Ne(Ae,Z,pe);if(Be)return Be}return Ve(Ae,Z,pe)}function sn(Ae,Z){let pe=Z.mapPos(Ae.from,1),Ne=Z.mapPos(Ae.to,-1);return pe>=Ne?void 0:{from:pe,to:Ne}}const _n=It.Py.define({map:sn}),Hi=It.Py.define({map:sn});function Wn(Ae){let Z=[];for(let{head:pe}of Ae.state.selection.ranges)Z.some(Ne=>Ne.from<=pe&&Ne.to>=pe)||Z.push(Ae.lineBlockAt(pe));return Z}const xi=It.QQ.define({create(){return fn.p.none},update(Ae,Z){Ae=Ae.map(Z.changes);for(let pe of Z.effects)if(pe.is(_n)&&!Ui(Ae,pe.value.from,pe.value.to)){let{preparePlaceholder:Ne}=Z.state.facet(Qi),Be=Ne?fn.p.replace({widget:new tr(Ne(Z.state,pe.value))}):Zn;Ae=Ae.update({add:[Be.range(pe.value.from,pe.value.to)]})}else pe.is(Hi)&&(Ae=Ae.update({filter:(Ne,Be)=>pe.value.from!=Ne||pe.value.to!=Be,filterFrom:pe.value.from,filterTo:pe.value.to}));if(Z.selection){let pe=!1,{head:Ne}=Z.selection.main;Ae.between(Ne,Ne,(Be,ut)=>{Be<Ne&&ut>Ne&&(pe=!0)}),pe&&(Ae=Ae.update({filterFrom:Ne,filterTo:Ne,filter:(Be,ut)=>ut<=Ne||Be>=Ne}))}return Ae},provide:Ae=>fn.tk.decorations.from(Ae),toJSON(Ae,Z){let pe=[];return Ae.between(0,Z.doc.length,(Ne,Be)=>{pe.push(Ne,Be)}),pe},fromJSON(Ae){if(!Array.isArray(Ae)||Ae.length%2)throw new RangeError("Invalid JSON for fold state");let Z=[];for(let pe=0;pe<Ae.length;){let Ne=Ae[pe++],Be=Ae[pe++];if(typeof Ne!="number"||typeof Be!="number")throw new RangeError("Invalid JSON for fold state");Z.push(Zn.range(Ne,Be))}return fn.p.set(Z,!0)}});function ar(Ae){return Ae.field(xi,!1)||RangeSet.empty}function di(Ae,Z,pe){var Ne;let Be=null;return(Ne=Ae.field(xi,!1))===null||Ne===void 0||Ne.between(Z,pe,(ut,Ft)=>{(!Be||Be.from>ut)&&(Be={from:ut,to:Ft})}),Be}function Ui(Ae,Z,pe){let Ne=!1;return Ae.between(Z,Z,(Be,ut)=>{Be==Z&&ut==pe&&(Ne=!0)}),Ne}function hr(Ae,Z){return Ae.field(xi,!1)?Z:Z.concat(It.Py.appendConfig.of(_i()))}const bi=Ae=>{for(let Z of Wn(Ae)){let pe=Ut(Ae.state,Z.from,Z.to);if(pe)return Ae.dispatch({effects:hr(Ae.state,[_n.of(pe),Zi(Ae,pe)])}),!0}return!1},Gr=Ae=>{if(!Ae.state.field(xi,!1))return!1;let Z=[];for(let pe of Wn(Ae)){let Ne=di(Ae.state,pe.from,pe.to);Ne&&Z.push(Hi.of(Ne),Zi(Ae,Ne,!1))}return Z.length&&Ae.dispatch({effects:Z}),Z.length>0};function Zi(Ae,Z,pe=!0){let Ne=Ae.state.doc.lineAt(Z.from).number,Be=Ae.state.doc.lineAt(Z.to).number;return fn.tk.announce.of(`${Ae.state.phrase(pe?"Folded lines":"Unfolded lines")} ${Ne} ${Ae.state.phrase("to")} ${Be}.`)}const xr=Ae=>{let{state:Z}=Ae,pe=[];for(let Ne=0;Ne<Z.doc.length;){let Be=Ae.lineBlockAt(Ne),ut=Ut(Z,Be.from,Be.to);ut&&pe.push(_n.of(ut)),Ne=(ut?Ae.lineBlockAt(ut.to):Be).to+1}return pe.length&&Ae.dispatch({effects:hr(Ae.state,pe)}),!!pe.length},ms=Ae=>{let Z=Ae.state.field(xi,!1);if(!Z||!Z.size)return!1;let pe=[];return Z.between(0,Ae.state.doc.length,(Ne,Be)=>{pe.push(Hi.of({from:Ne,to:Be}))}),Ae.dispatch({effects:pe}),!0};function Ni(Ae,Z){for(let pe=Z;;){let Ne=Ut(Ae.state,pe.from,pe.to);if(Ne&&Ne.to>Z.from)return Ne;if(!pe.from)return null;pe=Ae.lineBlockAt(pe.from-1)}}const qr=Ae=>{let Z=[];for(let pe of Wn(Ae)){let Ne=di(Ae.state,pe.from,pe.to);if(Ne)Z.push(Hi.of(Ne),Zi(Ae,Ne,!1));else{let Be=Ni(Ae,pe);Be&&Z.push(_n.of(Be),Zi(Ae,Be))}}return Z.length>0&&Ae.dispatch({effects:hr(Ae.state,Z)}),!!Z.length},Di=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:bi},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:Gr},{key:"Ctrl-Alt-[",run:xr},{key:"Ctrl-Alt-]",run:ms}],Sr={placeholderDOM:null,preparePlaceholder:null,placeholderText:"\u2026"},Qi=It.r$.define({combine(Ae){return(0,It.BO)(Ae,Sr)}});function _i(Ae){let Z=[xi,Hr];return Ae&&Z.push(Qi.of(Ae)),Z}function gr(Ae,Z){let{state:pe}=Ae,Ne=pe.facet(Qi),Be=Ft=>{let Xt=Ae.lineBlockAt(Ae.posAtDOM(Ft.target)),mn=di(Ae.state,Xt.from,Xt.to);mn&&Ae.dispatch({effects:Hi.of(mn)}),Ft.preventDefault()};if(Ne.placeholderDOM)return Ne.placeholderDOM(Ae,Be,Z);let ut=document.createElement("span");return ut.textContent=Ne.placeholderText,ut.setAttribute("aria-label",pe.phrase("folded code")),ut.title=pe.phrase("unfold"),ut.className="cm-foldPlaceholder",ut.onclick=Be,ut}const Zn=fn.p.replace({widget:new class extends fn.l9{toDOM(Ae){return gr(Ae,null)}}});class tr extends fn.l9{constructor(Z){super(),this.value=Z}eq(Z){return this.value==Z.value}toDOM(Z){return gr(Z,this.value)}}const bn={openText:"\u2304",closedText:"\u203A",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class Wr extends fn.SJ{constructor(Z,pe){super(),this.config=Z,this.open=pe}eq(Z){return this.config==Z.config&&this.open==Z.open}toDOM(Z){if(this.config.markerDOM)return this.config.markerDOM(this.open);let pe=document.createElement("span");return pe.textContent=this.open?this.config.openText:this.config.closedText,pe.title=Z.state.phrase(this.open?"Fold line":"Unfold line"),pe}}function Js(Ae={}){let Z=Object.assign(Object.assign({},bn),Ae),pe=new Wr(Z,!0),Ne=new Wr(Z,!1),Be=fn.lg.fromClass(class{constructor(Ft){this.from=Ft.viewport.from,this.markers=this.buildMarkers(Ft)}update(Ft){(Ft.docChanged||Ft.viewportChanged||Ft.startState.facet(wr)!=Ft.state.facet(wr)||Ft.startState.field(xi,!1)!=Ft.state.field(xi,!1)||Si(Ft.startState)!=Si(Ft.state)||Z.foldingChanged(Ft))&&(this.markers=this.buildMarkers(Ft.view))}buildMarkers(Ft){let Xt=new It.f_;for(let mn of Ft.viewportLineBlocks){let ri=di(Ft.state,mn.from,mn.to)?Ne:Ut(Ft.state,mn.from,mn.to)?pe:null;ri&&Xt.add(mn.from,mn.from,ri)}return Xt.finish()}}),{domEventHandlers:ut}=Z;return[Be,(0,fn.v5)({class:"cm-foldGutter",markers(Ft){var Xt;return((Xt=Ft.plugin(Be))===null||Xt===void 0?void 0:Xt.markers)||It.Xs.empty},initialSpacer(){return new Wr(Z,!1)},domEventHandlers:Object.assign(Object.assign({},ut),{click:(Ft,Xt,mn)=>{if(ut.click&&ut.click(Ft,Xt,mn))return!0;let ri=di(Ft.state,Xt.from,Xt.to);if(ri)return Ft.dispatch({effects:Hi.of(ri)}),!0;let rr=Ut(Ft.state,Xt.from,Xt.to);return rr?(Ft.dispatch({effects:_n.of(rr)}),!0):!1}})}),_i()]}const Hr=fn.tk.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Lr{constructor(Z,pe){this.specs=Z;let Ne;function Be(Xt){let mn=Qt.V.newName();return(Ne||(Ne=Object.create(null)))["."+mn]=Xt,mn}const ut=typeof pe.all=="string"?pe.all:pe.all?Be(pe.all):void 0,Ft=pe.scope;this.scope=Ft instanceof In?Xt=>Xt.prop(ii)==Ft.data:Ft?Xt=>Xt==Ft:void 0,this.style=(0,it.QR)(Z.map(Xt=>({tag:Xt.tag,class:Xt.class||Be(Object.assign({},Xt,{tag:null}))})),{all:ut}).style,this.module=Ne?new Qt.V(Ne):null,this.themeType=pe.themeType}static define(Z,pe){return new Lr(Z,pe||{})}}const Pi=It.r$.define(),Qs=It.r$.define({combine(Ae){return Ae.length?[Ae[0]]:null}});function Pn(Ae){let Z=Ae.facet(Pi);return Z.length?Z:Ae.facet(Qs)}function Xs(Ae,Z){let pe=[hs],Ne;return Ae instanceof Lr&&(Ae.module&&pe.push(fn.tk.styleModule.of(Ae.module)),Ne=Ae.themeType),Z!=null&&Z.fallback?pe.push(Qs.of(Ae)):Ne?pe.push(Pi.computeN([fn.tk.darkTheme],Be=>Be.facet(fn.tk.darkTheme)==(Ne=="dark")?[Ae]:[])):pe.push(Pi.of(Ae)),pe}function Ts(Ae,Z,pe){let Ne=Pn(Ae),Be=null;if(Ne){for(let ut of Ne)if(!ut.scope||pe&&ut.scope(pe)){let Ft=ut.style(Z);Ft&&(Be=Be?Be+" "+Ft:Ft)}}return Be}class Kr{constructor(Z){this.markCache=Object.create(null),this.tree=Si(Z.state),this.decorations=this.buildDeco(Z,Pn(Z.state)),this.decoratedTo=Z.viewport.to}update(Z){let pe=Si(Z.state),Ne=Pn(Z.state),Be=Ne!=Pn(Z.startState),{viewport:ut}=Z.view,Ft=Z.changes.mapPos(this.decoratedTo,1);pe.length<ut.to&&!Be&&pe.type==this.tree.type&&Ft>=ut.to?(this.decorations=this.decorations.map(Z.changes),this.decoratedTo=Ft):(pe!=this.tree||Z.viewportChanged||Be)&&(this.tree=pe,this.decorations=this.buildDeco(Z.view,Ne),this.decoratedTo=ut.to)}buildDeco(Z,pe){if(!pe||!this.tree.length)return fn.p.none;let Ne=new It.f_;for(let{from:Be,to:ut}of Z.visibleRanges)(0,it.bW)(this.tree,pe,(Ft,Xt,mn)=>{Ne.add(Ft,Xt,this.markCache[mn]||(this.markCache[mn]=fn.p.mark({class:mn})))},Be,ut);return Ne.finish()}}const hs=It.Wl.high(fn.lg.fromClass(Kr,{decorations:Ae=>Ae.decorations})),os=Lr.define([{tag:it.pJ.meta,color:"#404740"},{tag:it.pJ.link,textDecoration:"underline"},{tag:it.pJ.heading,textDecoration:"underline",fontWeight:"bold"},{tag:it.pJ.emphasis,fontStyle:"italic"},{tag:it.pJ.strong,fontWeight:"bold"},{tag:it.pJ.strikethrough,textDecoration:"line-through"},{tag:it.pJ.keyword,color:"#708"},{tag:[it.pJ.atom,it.pJ.bool,it.pJ.url,it.pJ.contentSeparator,it.pJ.labelName],color:"#219"},{tag:[it.pJ.literal,it.pJ.inserted],color:"#164"},{tag:[it.pJ.string,it.pJ.deleted],color:"#a11"},{tag:[it.pJ.regexp,it.pJ.escape,it.pJ.special(it.pJ.string)],color:"#e40"},{tag:it.pJ.definition(it.pJ.variableName),color:"#00f"},{tag:it.pJ.local(it.pJ.variableName),color:"#30a"},{tag:[it.pJ.typeName,it.pJ.namespace],color:"#085"},{tag:it.pJ.className,color:"#167"},{tag:[it.pJ.special(it.pJ.variableName),it.pJ.macroName],color:"#256"},{tag:it.pJ.definition(it.pJ.propertyName),color:"#00c"},{tag:it.pJ.comment,color:"#940"},{tag:it.pJ.invalid,color:"#f00"}]),js=fn.tk.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),dr=1e4,Qr="()[]{}",gs=It.r$.define({combine(Ae){return(0,It.BO)(Ae,{afterCursor:!0,brackets:Qr,maxScanDistance:dr,renderMatch:co})}}),ei=fn.p.mark({class:"cm-matchingBracket"}),Rs=fn.p.mark({class:"cm-nonmatchingBracket"});function co(Ae){let Z=[],pe=Ae.matched?ei:Rs;return Z.push(pe.range(Ae.start.from,Ae.start.to)),Ae.end&&Z.push(pe.range(Ae.end.from,Ae.end.to)),Z}const na=[It.QQ.define({create(){return fn.p.none},update(Ae,Z){if(!Z.docChanged&&!Z.selection)return Ae;let pe=[],Ne=Z.state.facet(gs);for(let Be of Z.state.selection.ranges){if(!Be.empty)continue;let ut=te(Z.state,Be.head,-1,Ne)||Be.head>0&&te(Z.state,Be.head-1,1,Ne)||Ne.afterCursor&&(te(Z.state,Be.head,1,Ne)||Be.head<Z.state.doc.length&&te(Z.state,Be.head+1,-1,Ne));ut&&(pe=pe.concat(Ne.renderMatch(ut,Z.state)))}return fn.p.set(pe,!0)},provide:Ae=>fn.tk.decorations.from(Ae)}),js];function re(Ae={}){return[gs.of(Ae),na]}const P=new xe.md;function V(Ae,Z,pe){let Ne=Ae.prop(Z<0?xe.md.openedBy:xe.md.closedBy);if(Ne)return Ne;if(Ae.name.length==1){let Be=pe.indexOf(Ae.name);if(Be>-1&&Be%2==(Z<0?1:0))return[pe[Be+Z]]}return null}function Y(Ae){let Z=Ae.type.prop(P);return Z?Z(Ae.node):Ae}function te(Ae,Z,pe,Ne={}){let Be=Ne.maxScanDistance||dr,ut=Ne.brackets||Qr,Ft=Si(Ae),Xt=Ft.resolveInner(Z,pe);for(let mn=Xt;mn;mn=mn.parent){let ri=V(mn.type,pe,ut);if(ri&&mn.from<mn.to){let rr=Y(mn);if(rr&&(pe>0?Z>=rr.from&&Z<rr.to:Z>rr.from&&Z<=rr.to))return we(Ae,Z,pe,mn,rr,ri,ut)}}return Ce(Ae,Z,pe,Ft,Xt.type,Be,ut)}function we(Ae,Z,pe,Ne,Be,ut,Ft){let Xt=Ne.parent,mn={from:Be.from,to:Be.to},ri=0,rr=Xt==null?void 0:Xt.cursor();if(rr&&(pe<0?rr.childBefore(Ne.from):rr.childAfter(Ne.to)))do if(pe<0?rr.to<=Ne.from:rr.from>=Ne.to){if(ri==0&&ut.indexOf(rr.type.name)>-1&&rr.from<rr.to){let Xi=Y(rr);return{start:mn,end:Xi?{from:Xi.from,to:Xi.to}:void 0,matched:!0}}else if(V(rr.type,pe,Ft))ri++;else if(V(rr.type,-pe,Ft)){if(ri==0){let Xi=Y(rr);return{start:mn,end:Xi&&Xi.from<Xi.to?{from:Xi.from,to:Xi.to}:void 0,matched:!1}}ri--}}while(pe<0?rr.prevSibling():rr.nextSibling());return{start:mn,matched:!1}}function Ce(Ae,Z,pe,Ne,Be,ut,Ft){let Xt=pe<0?Ae.sliceDoc(Z-1,Z):Ae.sliceDoc(Z,Z+1),mn=Ft.indexOf(Xt);if(mn<0||mn%2==0!=pe>0)return null;let ri={from:pe<0?Z-1:Z,to:pe>0?Z+1:Z},rr=Ae.doc.iterRange(Z,pe>0?Ae.doc.length:0),Xi=0;for(let Vo=0;!rr.next().done&&Vo<=ut;){let yo=rr.value;pe<0&&(Vo+=yo.length);let Vs=Z+Vo*pe;for(let ko=pe>0?0:yo.length-1,Uo=pe>0?yo.length:-1;ko!=Uo;ko+=pe){let la=Ft.indexOf(yo[ko]);if(!(la<0||Ne.resolveInner(Vs+ko,1).type!=Be))if(la%2==0==pe>0)Xi++;else{if(Xi==1)return{start:ri,end:{from:Vs+ko,to:Vs+ko+1},matched:la>>1==mn>>1};Xi--}}pe>0&&(Vo+=yo.length)}return rr.done?{start:ri,matched:!1}:null}function We(Ae,Z,pe,Ne=0,Be=0){Z==null&&(Z=Ae.search(/[^\s\u00a0]/),Z==-1&&(Z=Ae.length));let ut=Be;for(let Ft=Ne;Ft<Z;Ft++)Ae.charCodeAt(Ft)==9?ut+=pe-ut%pe:ut++;return ut}class Dt{constructor(Z,pe,Ne,Be){this.string=Z,this.tabSize=pe,this.indentUnit=Ne,this.overrideIndent=Be,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(Z){let pe=this.string.charAt(this.pos),Ne;if(typeof Z=="string"?Ne=pe==Z:Ne=pe&&(Z instanceof RegExp?Z.test(pe):Z(pe)),Ne)return++this.pos,pe}eatWhile(Z){let pe=this.pos;for(;this.eat(Z););return this.pos>pe}eatSpace(){let Z=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>Z}skipToEnd(){this.pos=this.string.length}skipTo(Z){let pe=this.string.indexOf(Z,this.pos);if(pe>-1)return this.pos=pe,!0}backUp(Z){this.pos-=Z}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=We(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var Z;return(Z=this.overrideIndent)!==null&&Z!==void 0?Z:We(this.string,null,this.tabSize)}match(Z,pe,Ne){if(typeof Z=="string"){let Be=Ft=>Ne?Ft.toLowerCase():Ft,ut=this.string.substr(this.pos,Z.length);return Be(ut)==Be(Z)?(pe!==!1&&(this.pos+=Z.length),!0):null}else{let Be=this.string.slice(this.pos).match(Z);return Be&&Be.index>0?null:(Be&&pe!==!1&&(this.pos+=Be[0].length),Be)}}current(){return this.string.slice(this.start,this.pos)}}function jt(Ae){return{name:Ae.name||"",token:Ae.token,blankLine:Ae.blankLine||(()=>{}),startState:Ae.startState||(()=>!0),copyState:Ae.copyState||xn,indent:Ae.indent||(()=>null),languageData:Ae.languageData||{},tokenTable:Ae.tokenTable||rt}}function xn(Ae){if(typeof Ae!="object")return Ae;let Z={};for(let pe in Ae){let Ne=Ae[pe];Z[pe]=Ne instanceof Array?Ne.slice():Ne}return Z}const Tn=new WeakMap;class mi extends null{constructor(Z){let pe=Nn(Z.languageData),Ne=jt(Z),Be,ut=new class extends Parser{createParse(Ft,Xt,mn){return new pr(Be,Ft,Xt,mn)}};super(pe,ut,[qs.of((Ft,Xt)=>this.getIndent(Ft,Xt))],Z.name),this.topNode=jo(pe),Be=this,this.streamParser=Ne,this.stateAfter=new NodeProp({perNode:!0}),this.tokenTable=Z.tokenTable?new nr(Ne.tokenTable):wi}static define(Z){return new mi(Z)}getIndent(Z,pe){let Ne=Si(Z.state),Be=Ne.resolve(pe);for(;Be&&Be.type!=this.topNode;)Be=Be.parent;if(!Be)return null;let ut,{overrideIndentation:Ft}=Z.options;Ft&&(ut=Tn.get(Z.state),ut!=null&&ut<pe-1e4&&(ut=void 0));let Xt=vi(this,Ne,0,Be.from,ut!=null?ut:pe),mn,ri;if(Xt?(ri=Xt.state,mn=Xt.pos+1):(ri=this.streamParser.startState(Z.unit),mn=0),pe-mn>1e4)return null;for(;mn<pe;){let Xi=Z.state.doc.lineAt(mn),Vo=Math.min(pe,Xi.to);if(Xi.length){let yo=Ft?Ft(Xi.from):-1,Vs=new Dt(Xi.text,Z.state.tabSize,Z.unit,yo<0?void 0:yo);for(;Vs.pos<Vo-Xi.from;)Fi(this.streamParser.token,Vs,ri)}else this.streamParser.blankLine(ri,Z.unit);if(Vo==pe)break;mn=Xi.to+1}let rr=Z.lineAt(pe);return Ft&&ut==null&&Tn.set(Z.state,rr.from),this.streamParser.indent(ri,/^\s*(.*)/.exec(rr.text)[1],Z)}get allowsNesting(){return!1}}function vi(Ae,Z,pe,Ne,Be){let ut=pe>=Ne&&pe+Z.length<=Be&&Z.prop(Ae.stateAfter);if(ut)return{state:Ae.streamParser.copyState(ut),pos:pe+Z.length};for(let Ft=Z.children.length-1;Ft>=0;Ft--){let Xt=Z.children[Ft],mn=pe+Z.positions[Ft],ri=Xt instanceof Tree&&mn<Be&&vi(Ae,Xt,mn,Ne,Be);if(ri)return ri}return null}function ws(Ae,Z,pe,Ne,Be){if(Be&&pe<=0&&Ne>=Z.length)return Z;!Be&&Z.type==Ae.topNode&&(Be=!0);for(let ut=Z.children.length-1;ut>=0;ut--){let Ft=Z.positions[ut],Xt=Z.children[ut],mn;if(Ft<Ne&&Xt instanceof Tree){if(!(mn=ws(Ae,Xt,pe-Ft,Ne-Ft,Be)))break;return Be?new Tree(Z.type,Z.children.slice(0,ut).concat(mn),Z.positions.slice(0,ut+1),Ft+mn.length):mn}}return null}function ho(Ae,Z,pe,Ne){for(let Be of Z){let ut=Be.from+(Be.openStart?25:0),Ft=Be.to-(Be.openEnd?25:0),Xt=ut<=pe&&Ft>pe&&vi(Ae,Be.tree,0-Be.offset,pe,Ft),mn;if(Xt&&(mn=ws(Ae,Be.tree,pe+Be.offset,Xt.pos+Be.offset,!1)))return{state:Xt.state,tree:mn}}return{state:Ae.streamParser.startState(Ne?ci(Ne):4),tree:Tree.empty}}class pr{constructor(Z,pe,Ne,Be){this.lang=Z,this.input=pe,this.fragments=Ne,this.ranges=Be,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=Be[Be.length-1].to;let ut=Dr.get(),Ft=Be[0].from,{state:Xt,tree:mn}=ho(Z,Ne,Ft,ut==null?void 0:ut.state);this.state=Xt,this.parsedPos=this.chunkStart=Ft+mn.length;for(let ri=0;ri<mn.children.length;ri++)this.chunks.push(mn.children[ri]),this.chunkPos.push(mn.positions[ri]);ut&&this.parsedPos<ut.viewport.from-1e5&&(this.state=this.lang.streamParser.startState(ci(ut.state)),ut.skipUntilInView(this.parsedPos,ut.viewport.from),this.parsedPos=ut.viewport.from),this.moveRangeIndex()}advance(){let Z=Dr.get(),pe=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),Ne=Math.min(pe,this.chunkStart+2048);for(Z&&(Ne=Math.min(Ne,Z.viewport.to));this.parsedPos<Ne;)this.parseLine(Z);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=pe?this.finish():Z&&this.parsedPos>=Z.viewport.to?(Z.skipUntilInView(this.parsedPos,pe),this.finish()):null}stopAt(Z){this.stoppedAt=Z}lineAfter(Z){let pe=this.input.chunk(Z);if(this.input.lineChunks)pe==`
`&&(pe="");else{let Ne=pe.indexOf(`
`);Ne>-1&&(pe=pe.slice(0,Ne))}return Z+pe.length<=this.to?pe:pe.slice(0,this.to-Z)}nextLine(){let Z=this.parsedPos,pe=this.lineAfter(Z),Ne=Z+pe.length;for(let Be=this.rangeIndex;;){let ut=this.ranges[Be].to;if(ut>=Ne||(pe=pe.slice(0,ut-(Ne-pe.length)),Be++,Be==this.ranges.length))break;let Ft=this.ranges[Be].from,Xt=this.lineAfter(Ft);pe+=Xt,Ne=Ft+Xt.length}return{line:pe,end:Ne}}skipGapsTo(Z,pe,Ne){for(;;){let Be=this.ranges[this.rangeIndex].to,ut=Z+pe;if(Ne>0?Be>ut:Be>=ut)break;let Ft=this.ranges[++this.rangeIndex].from;pe+=Ft-Be}return pe}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(Z,pe,Ne,Be,ut){if(this.ranges.length>1){ut=this.skipGapsTo(pe,ut,1),pe+=ut;let Ft=this.chunk.length;ut=this.skipGapsTo(Ne,ut,-1),Ne+=ut,Be+=this.chunk.length-Ft}return this.chunk.push(Z,pe,Ne,Be),ut}parseLine(Z){let{line:pe,end:Ne}=this.nextLine(),Be=0,{streamParser:ut}=this.lang,Ft=new Dt(pe,Z?Z.state.tabSize:4,Z?ci(Z.state):2);if(Ft.eol())ut.blankLine(this.state,Ft.indentUnit);else for(;!Ft.eol();){let Xt=Fi(ut.token,Ft,this.state);if(Xt&&(Be=this.emitToken(this.lang.tokenTable.resolve(Xt),this.parsedPos+Ft.start,this.parsedPos+Ft.pos,4,Be)),Ft.start>1e4)break}this.parsedPos=Ne,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let Z=Tree.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:To,topID:0,maxBufferLength:2048,reused:this.chunkReused});Z=new Tree(Z.type,Z.children,Z.positions,Z.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(Z),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new Tree(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function Fi(Ae,Z,pe){Z.start=Z.pos;for(let Ne=0;Ne<10;Ne++){let Be=Ae(Z,pe);if(Z.pos>Z.start)return Be}throw new Error("Stream parser failed to advance stream.")}const rt=Object.create(null),so=[xe.Jq.none],To=new xe.Lj(so),Os=[],ds=Object.create(null),Oo=Object.create(null);for(let[Ae,Z]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])Oo[Ae]=ks(rt,Z);class nr{constructor(Z){this.extra=Z,this.table=Object.assign(Object.create(null),Oo)}resolve(Z){return Z?this.table[Z]||(this.table[Z]=ks(this.extra,Z)):0}}const wi=new nr(rt);function Mn(Ae,Z){Os.indexOf(Ae)>-1||(Os.push(Ae),console.warn(Z))}function ks(Ae,Z){let pe=[];for(let Xt of Z.split(" ")){let mn=[];for(let ri of Xt.split(".")){let rr=Ae[ri]||it.pJ[ri];rr?typeof rr=="function"?mn.length?mn=mn.map(rr):Mn(ri,`Modifier ${ri} used at start of tag`):mn.length?Mn(ri,`Tag ${ri} used as modifier`):mn=Array.isArray(rr)?rr:[rr]:Mn(ri,`Unknown highlighting tag ${ri}`)}for(let ri of mn)pe.push(ri)}if(!pe.length)return 0;let Ne=Z.replace(/ /g,"_"),Be=Ne+" "+pe.map(Xt=>Xt.id),ut=ds[Be];if(ut)return ut.id;let Ft=ds[Be]=xe.Jq.define({id:so.length,name:Ne,props:[(0,it.Gv)({[Ne]:pe})]});return so.push(Ft),Ft.id}function jo(Ae){let Z=NodeType.define({id:so.length,name:"Document",props:[ii.add(()=>Ae)],top:!0});return so.push(Z),Z}function Zr(Ae){return Ae.length<=4096&&/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/.test(Ae)}function aa(Ae){for(let Z=Ae.iter();!Z.next().done;)if(Zr(Z.value))return!0;return!1}function ka(Ae){let Z=!1;return Ae.iterChanges((pe,Ne,Be,ut,Ft)=>{!Z&&aa(Ft)&&(Z=!0)}),Z}const fa=It.r$.define({combine:Ae=>Ae.some(Z=>Z)});function ps(Ae={}){let Z=[no];return Ae.alwaysIsolate&&Z.push(fa.of(!0)),Z}const no=fn.lg.fromClass(class{constructor(Ae){this.always=Ae.state.facet(fa)||Ae.textDirection!=fn.Nm.LTR||Ae.state.facet(fn.tk.perLineTextDirection),this.hasRTL=!this.always&&aa(Ae.state.doc),this.tree=Si(Ae.state),this.decorations=this.always||this.hasRTL?Eo(Ae,this.tree,this.always):fn.p.none}update(Ae){let Z=Ae.state.facet(fa)||Ae.view.textDirection!=fn.Nm.LTR||Ae.state.facet(fn.tk.perLineTextDirection);if(!Z&&!this.hasRTL&&ka(Ae.changes)&&(this.hasRTL=!0),!Z&&!this.hasRTL)return;let pe=Si(Ae.state);(Z!=this.always||pe!=this.tree||Ae.docChanged||Ae.viewportChanged)&&(this.tree=pe,this.always=Z,this.decorations=Eo(Ae.view,pe,Z))}},{provide:Ae=>{function Z(pe){var Ne,Be;return(Be=(Ne=pe.plugin(Ae))===null||Ne===void 0?void 0:Ne.decorations)!==null&&Be!==void 0?Be:fn.p.none}return[fn.tk.outerDecorations.of(Z),It.Wl.lowest(fn.tk.bidiIsolatedRanges.of(Z))]}});function Eo(Ae,Z,pe){let Ne=new It.f_,Be=Ae.visibleRanges;pe||(Be=go(Be,Ae.state.doc));for(let{from:ut,to:Ft}of Be)Z.iterate({enter:Xt=>{let mn=Xt.type.prop(xe.md.isolate);mn&&Ne.add(Xt.from,Xt.to,Xo[mn])},from:ut,to:Ft});return Ne.finish()}function go(Ae,Z){let pe=Z.iter(),Ne=0,Be=[],ut=null;for(let{from:Ft,to:Xt}of Ae)for(Ft!=Ne&&(Ne<Ft&&pe.next(Ft-Ne),Ne=Ft);;){let mn=Ne,ri=Ne+pe.value.length;if(!pe.lineBreak&&Zr(pe.value)&&(ut&&ut.to>mn-10?ut.to=Math.min(Xt,ri):Be.push(ut={from:mn,to:Math.min(Xt,ri)})),Ne>=Xt)break;Ne=ri,pe.next()}return Be}const Xo={rtl:fn.p.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"rtl"},bidiIsolate:fn.Nm.RTL}),ltr:fn.p.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"ltr"},bidiIsolate:fn.Nm.LTR}),auto:fn.p.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"auto"},bidiIsolate:null})}},80403:function(lo,bs,dn){"use strict";dn.d(bs,{BO:function(){return Js},D0:function(){return _i},Gz:function(){return na},IS:function(){return oa},Py:function(){return bi},QQ:function(){return Ki},Wl:function(){return wo},Xs:function(){return Pn},YW:function(){return Gr},as:function(){return jr},bg:function(){return pi},cp:function(){return $t},f_:function(){return Ts},gc:function(){return cs},gm:function(){return zs},jT:function(){return ee},n0:function(){return wr},nZ:function(){return vs},q6:function(){return di},r$:function(){return Xe},uU:function(){return Hr},xv:function(){return xe},yy:function(){return Wr}});class xe{lineAt(P){if(P<0||P>this.length)throw new RangeError(`Invalid position ${P} in document of length ${this.length}`);return this.lineInner(P,!1,1,0)}line(P){if(P<1||P>this.lines)throw new RangeError(`Invalid line number ${P} in ${this.lines}-line document`);return this.lineInner(P,!0,1,0)}replace(P,V,Y){[P,V]=vn(this,P,V);let te=[];return this.decompose(0,P,te,2),Y.length&&Y.decompose(0,Y.length,te,3),this.decompose(V,this.length,te,1),fn.from(te,this.length-(V-P)+Y.length)}append(P){return this.replace(this.length,this.length,P)}slice(P,V=this.length){[P,V]=vn(this,P,V);let Y=[];return this.decompose(P,V,Y,0),fn.from(Y,V-P)}eq(P){if(P==this)return!0;if(P.length!=this.length||P.lines!=this.lines)return!1;let V=this.scanIdentical(P,1),Y=this.length-this.scanIdentical(P,-1),te=new ii(this),we=new ii(P);for(let Ce=V,We=V;;){if(te.next(Ce),we.next(Ce),Ce=0,te.lineBreak!=we.lineBreak||te.done!=we.done||te.value!=we.value)return!1;if(We+=te.value.length,te.done||We>=Y)return!0}}iter(P=1){return new ii(this,P)}iterRange(P,V=this.length){return new Nn(this,P,V)}iterLines(P,V){let Y;if(P==null)Y=this.iter();else{V==null&&(V=this.lines+1);let te=this.line(P).from;Y=this.iterRange(te,Math.max(te,V==this.lines+1?this.length:V<=1?0:this.line(V-1).to))}return new Kt(Y)}toString(){return this.sliceString(0)}toJSON(){let P=[];return this.flatten(P),P}constructor(){}static of(P){if(P.length==0)throw new RangeError("A document must have at least one line");return P.length==1&&!P[0]?xe.empty:P.length<=32?new It(P):fn.from(It.split(P,[]))}}class It extends xe{constructor(P,V=it(P)){super(),this.text=P,this.length=V}get lines(){return this.text.length}get children(){return null}lineInner(P,V,Y,te){for(let we=0;;we++){let Ce=this.text[we],We=te+Ce.length;if((V?Y:We)>=P)return new In(te,We,Y,Ce);te=We+1,Y++}}decompose(P,V,Y,te){let we=P<=0&&V>=this.length?this:new It(yn(this.text,P,V),Math.min(V,this.length)-Math.max(0,P));if(te&1){let Ce=Y.pop(),We=Qt(we.text,Ce.text.slice(),0,we.length);if(We.length<=32)Y.push(new It(We,Ce.length+we.length));else{let Dt=We.length>>1;Y.push(new It(We.slice(0,Dt)),new It(We.slice(Dt)))}}else Y.push(we)}replace(P,V,Y){if(!(Y instanceof It))return super.replace(P,V,Y);[P,V]=vn(this,P,V);let te=Qt(this.text,Qt(Y.text,yn(this.text,0,P)),V),we=this.length+Y.length-(V-P);return te.length<=32?new It(te,we):fn.from(It.split(te,[]),we)}sliceString(P,V=this.length,Y=`
`){[P,V]=vn(this,P,V);let te="";for(let we=0,Ce=0;we<=V&&Ce<this.text.length;Ce++){let We=this.text[Ce],Dt=we+We.length;we>P&&Ce&&(te+=Y),P<Dt&&V>we&&(te+=We.slice(Math.max(0,P-we),V-we)),we=Dt+1}return te}flatten(P){for(let V of this.text)P.push(V)}scanIdentical(){return 0}static split(P,V){let Y=[],te=-1;for(let we of P)Y.push(we),te+=we.length+1,Y.length==32&&(V.push(new It(Y,te)),Y=[],te=-1);return te>-1&&V.push(new It(Y,te)),V}}class fn extends xe{constructor(P,V){super(),this.children=P,this.length=V,this.lines=0;for(let Y of P)this.lines+=Y.lines}lineInner(P,V,Y,te){for(let we=0;;we++){let Ce=this.children[we],We=te+Ce.length,Dt=Y+Ce.lines-1;if((V?Dt:We)>=P)return Ce.lineInner(P,V,Y,te);te=We+1,Y=Dt+1}}decompose(P,V,Y,te){for(let we=0,Ce=0;Ce<=V&&we<this.children.length;we++){let We=this.children[we],Dt=Ce+We.length;if(P<=Dt&&V>=Ce){let jt=te&((Ce<=P?1:0)|(Dt>=V?2:0));Ce>=P&&Dt<=V&&!jt?Y.push(We):We.decompose(P-Ce,V-Ce,Y,jt)}Ce=Dt+1}}replace(P,V,Y){if([P,V]=vn(this,P,V),Y.lines<this.lines)for(let te=0,we=0;te<this.children.length;te++){let Ce=this.children[te],We=we+Ce.length;if(P>=we&&V<=We){let Dt=Ce.replace(P-we,V-we,Y),jt=this.lines-Ce.lines+Dt.lines;if(Dt.lines<jt>>5-1&&Dt.lines>jt>>5+1){let xn=this.children.slice();return xn[te]=Dt,new fn(xn,this.length-(V-P)+Y.length)}return super.replace(we,We,Dt)}we=We+1}return super.replace(P,V,Y)}sliceString(P,V=this.length,Y=`
`){[P,V]=vn(this,P,V);let te="";for(let we=0,Ce=0;we<this.children.length&&Ce<=V;we++){let We=this.children[we],Dt=Ce+We.length;Ce>P&&we&&(te+=Y),P<Dt&&V>Ce&&(te+=We.sliceString(P-Ce,V-Ce,Y)),Ce=Dt+1}return te}flatten(P){for(let V of this.children)V.flatten(P)}scanIdentical(P,V){if(!(P instanceof fn))return 0;let Y=0,[te,we,Ce,We]=V>0?[0,0,this.children.length,P.children.length]:[this.children.length-1,P.children.length-1,-1,-1];for(;;te+=V,we+=V){if(te==Ce||we==We)return Y;let Dt=this.children[te],jt=P.children[we];if(Dt!=jt)return Y+Dt.scanIdentical(jt,V);Y+=Dt.length+1}}static from(P,V=P.reduce((Y,te)=>Y+te.length+1,-1)){let Y=0;for(let vi of P)Y+=vi.lines;if(Y<32){let vi=[];for(let ws of P)ws.flatten(vi);return new It(vi,V)}let te=Math.max(32,Y>>5),we=te<<1,Ce=te>>1,We=[],Dt=0,jt=-1,xn=[];function Tn(vi){let ws;if(vi.lines>we&&vi instanceof fn)for(let ho of vi.children)Tn(ho);else vi.lines>Ce&&(Dt>Ce||!Dt)?(mi(),We.push(vi)):vi instanceof It&&Dt&&(ws=xn[xn.length-1])instanceof It&&vi.lines+ws.lines<=32?(Dt+=vi.lines,jt+=vi.length+1,xn[xn.length-1]=new It(ws.text.concat(vi.text),ws.length+1+vi.length)):(Dt+vi.lines>te&&mi(),Dt+=vi.lines,jt+=vi.length+1,xn.push(vi))}function mi(){Dt!=0&&(We.push(xn.length==1?xn[0]:fn.from(xn,jt)),jt=-1,Dt=xn.length=0)}for(let vi of P)Tn(vi);return mi(),We.length==1?We[0]:new fn(We,V)}}xe.empty=new It([""],0);function it(re){let P=-1;for(let V of re)P+=V.length+1;return P}function Qt(re,P,V=0,Y=1e9){for(let te=0,we=0,Ce=!0;we<re.length&&te<=Y;we++){let We=re[we],Dt=te+We.length;Dt>=V&&(Dt>Y&&(We=We.slice(0,Y-te)),te<V&&(We=We.slice(V-te)),Ce?(P[P.length-1]+=We,Ce=!1):P.push(We)),te=Dt+1}return P}function yn(re,P,V){return Qt(re,[""],P,V)}class ii{constructor(P,V=1){this.dir=V,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[P],this.offsets=[V>0?1:(P instanceof It?P.text.length:P.children.length)<<1]}nextInner(P,V){for(this.done=this.lineBreak=!1;;){let Y=this.nodes.length-1,te=this.nodes[Y],we=this.offsets[Y],Ce=we>>1,We=te instanceof It?te.text.length:te.children.length;if(Ce==(V>0?We:0)){if(Y==0)return this.done=!0,this.value="",this;V>0&&this.offsets[Y-1]++,this.nodes.pop(),this.offsets.pop()}else if((we&1)==(V>0?0:1)){if(this.offsets[Y]+=V,P==0)return this.lineBreak=!0,this.value=`
`,this;P--}else if(te instanceof It){let Dt=te.text[Ce+(V<0?-1:0)];if(this.offsets[Y]+=V,Dt.length>Math.max(0,P))return this.value=P==0?Dt:V>0?Dt.slice(P):Dt.slice(0,Dt.length-P),this;P-=Dt.length}else{let Dt=te.children[Ce+(V<0?-1:0)];P>Dt.length?(P-=Dt.length,this.offsets[Y]+=V):(V<0&&this.offsets[Y]--,this.nodes.push(Dt),this.offsets.push(V>0?1:(Dt instanceof It?Dt.text.length:Dt.children.length)<<1))}}}next(P=0){return P<0&&(this.nextInner(-P,-this.dir),P=this.value.length),this.nextInner(P,this.dir)}}class Nn{constructor(P,V,Y){this.value="",this.done=!1,this.cursor=new ii(P,V>Y?-1:1),this.pos=V>Y?P.length:0,this.from=Math.min(V,Y),this.to=Math.max(V,Y)}nextInner(P,V){if(V<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;P+=Math.max(0,V<0?this.pos-this.to:this.from-this.pos);let Y=V<0?this.pos-this.from:this.to-this.pos;P>Y&&(P=Y),Y-=P;let{value:te}=this.cursor.next(P);return this.pos+=(te.length+P)*V,this.value=te.length<=Y?te:V<0?te.slice(te.length-Y):te.slice(0,Y),this.done=!this.value,this}next(P=0){return P<0?P=Math.max(P,this.from-this.pos):P>0&&(P=Math.min(P,this.to-this.pos)),this.nextInner(P,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class Kt{constructor(P){this.inner=P,this.afterBreak=!0,this.value="",this.done=!1}next(P=0){let{done:V,lineBreak:Y,value:te}=this.inner.next(P);return V&&this.afterBreak?(this.value="",this.afterBreak=!1):V?(this.done=!0,this.value=""):Y?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=te,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol!="undefined"&&(xe.prototype[Symbol.iterator]=function(){return this.iter()},ii.prototype[Symbol.iterator]=Nn.prototype[Symbol.iterator]=Kt.prototype[Symbol.iterator]=function(){return this});class In{constructor(P,V,Y,te){this.from=P,this.to=V,this.number=Y,this.text=te}get length(){return this.to-this.from}}function vn(re,P,V){return P=Math.max(0,Math.min(re.length,P)),[P,Math.max(P,Math.min(re.length,V))]}let gn="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(re=>re?parseInt(re,36):1);for(let re=1;re<gn.length;re++)gn[re]+=gn[re-1];function Si(re){for(let P=1;P<gn.length;P+=2)if(gn[P]>re)return gn[P-1]<=re;return!1}function Ii(re){return re>=127462&&re<=127487}const Un=8205;function $t(re,P,V=!0,Y=!0){return(V?qt:mr)(re,P,Y)}function qt(re,P,V){if(P==re.length)return P;P&&ss(re.charCodeAt(P))&&Dr(re.charCodeAt(P-1))&&P--;let Y=zs(re,P);for(P+=vs(Y);P<re.length;){let te=zs(re,P);if(Y==Un||te==Un||V&&Si(te))P+=vs(te),Y=te;else if(Ii(te)){let we=0,Ce=P-2;for(;Ce>=0&&Ii(zs(re,Ce));)we++,Ce-=2;if(we%2==0)break;P+=2}else break}return P}function mr(re,P,V){for(;P>0;){let Y=qt(re,P-2,V);if(Y<P)return Y;P--}return 0}function ss(re){return re>=56320&&re<57344}function Dr(re){return re>=55296&&re<56320}function zs(re,P){let V=re.charCodeAt(P);if(!Dr(V)||P+1==re.length)return V;let Y=re.charCodeAt(P+1);return ss(Y)?(V-55296<<10)+(Y-56320)+65536:V}function pi(re){return re<=65535?String.fromCharCode(re):(re-=65536,String.fromCharCode((re>>10)+55296,(re&1023)+56320))}function vs(re){return re<65536?1:2}const uo=/\r\n?|\n/;var cs=function(re){return re[re.Simple=0]="Simple",re[re.TrackDel=1]="TrackDel",re[re.TrackBefore=2]="TrackBefore",re[re.TrackAfter=3]="TrackAfter",re}(cs||(cs={}));class wr{constructor(P){this.sections=P}get length(){let P=0;for(let V=0;V<this.sections.length;V+=2)P+=this.sections[V];return P}get newLength(){let P=0;for(let V=0;V<this.sections.length;V+=2){let Y=this.sections[V+1];P+=Y<0?this.sections[V]:Y}return P}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(P){for(let V=0,Y=0,te=0;V<this.sections.length;){let we=this.sections[V++],Ce=this.sections[V++];Ce<0?(P(Y,te,we),te+=we):te+=Ce,Y+=we}}iterChangedRanges(P,V=!1){Is(this,P,V)}get invertedDesc(){let P=[];for(let V=0;V<this.sections.length;){let Y=this.sections[V++],te=this.sections[V++];te<0?P.push(Y,te):P.push(te,Y)}return new wr(P)}composeDesc(P){return this.empty?P:P.empty?this:le(this,P)}mapDesc(P,V=!1){return P.empty?this:ci(this,P,V)}mapPos(P,V=-1,Y=cs.Simple){let te=0,we=0;for(let Ce=0;Ce<this.sections.length;){let We=this.sections[Ce++],Dt=this.sections[Ce++],jt=te+We;if(Dt<0){if(jt>P)return we+(P-te);we+=We}else{if(Y!=cs.Simple&&jt>=P&&(Y==cs.TrackDel&&te<P&&jt>P||Y==cs.TrackBefore&&te<P||Y==cs.TrackAfter&&jt>P))return null;if(jt>P||jt==P&&V<0&&!We)return P==te||V<0?we:we+Dt;we+=Dt}te=jt}if(P>te)throw new RangeError(`Position ${P} is out of range for changeset of length ${te}`);return we}touchesRange(P,V=P){for(let Y=0,te=0;Y<this.sections.length&&te<=V;){let we=this.sections[Y++],Ce=this.sections[Y++],We=te+we;if(Ce>=0&&te<=V&&We>=P)return te<P&&We>V?"cover":!0;te=We}return!1}toString(){let P="";for(let V=0;V<this.sections.length;){let Y=this.sections[V++],te=this.sections[V++];P+=(P?" ":"")+Y+(te>=0?":"+te:"")}return P}toJSON(){return this.sections}static fromJSON(P){if(!Array.isArray(P)||P.length%2||P.some(V=>typeof V!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new wr(P)}static create(P){return new wr(P)}}class jr extends wr{constructor(P,V){super(P),this.inserted=V}apply(P){if(this.length!=P.length)throw new RangeError("Applying change set to a document with the wrong length");return Is(this,(V,Y,te,we,Ce)=>P=P.replace(te,te+(Y-V),Ce),!1),P}mapDesc(P,V=!1){return ci(this,P,V,!0)}invert(P){let V=this.sections.slice(),Y=[];for(let te=0,we=0;te<V.length;te+=2){let Ce=V[te],We=V[te+1];if(We>=0){V[te]=We,V[te+1]=Ce;let Dt=te>>1;for(;Y.length<Dt;)Y.push(xe.empty);Y.push(Ce?P.slice(we,we+Ce):xe.empty)}we+=Ce}return new jr(V,Y)}compose(P){return this.empty?P:P.empty?this:le(this,P,!0)}map(P,V=!1){return P.empty?this:ci(this,P,V,!0)}iterChanges(P,V=!1){Is(this,P,V)}get desc(){return wr.create(this.sections)}filter(P){let V=[],Y=[],te=[],we=new $e(this);e:for(let Ce=0,We=0;;){let Dt=Ce==P.length?1e9:P[Ce++];for(;We<Dt||We==Dt&&we.len==0;){if(we.done)break e;let xn=Math.min(we.len,Dt-We);vr(te,xn,-1);let Tn=we.ins==-1?-1:we.off==0?we.ins:0;vr(V,xn,Tn),Tn>0&&qs(Y,V,we.text),we.forward(xn),We+=xn}let jt=P[Ce++];for(;We<jt;){if(we.done)break e;let xn=Math.min(we.len,jt-We);vr(V,xn,-1),vr(te,xn,we.ins==-1?-1:we.off==0?we.ins:0),we.forward(xn),We+=xn}}return{changes:new jr(V,Y),filtered:wr.create(te)}}toJSON(){let P=[];for(let V=0;V<this.sections.length;V+=2){let Y=this.sections[V],te=this.sections[V+1];te<0?P.push(Y):te==0?P.push([Y]):P.push([Y].concat(this.inserted[V>>1].toJSON()))}return P}static of(P,V,Y){let te=[],we=[],Ce=0,We=null;function Dt(xn=!1){if(!xn&&!te.length)return;Ce<V&&vr(te,V-Ce,-1);let Tn=new jr(te,we);We=We?We.compose(Tn.map(We)):Tn,te=[],we=[],Ce=0}function jt(xn){if(Array.isArray(xn))for(let Tn of xn)jt(Tn);else if(xn instanceof jr){if(xn.length!=V)throw new RangeError(`Mismatched change set length (got ${xn.length}, expected ${V})`);Dt(),We=We?We.compose(xn.map(We)):xn}else{let{from:Tn,to:mi=Tn,insert:vi}=xn;if(Tn>mi||Tn<0||mi>V)throw new RangeError(`Invalid change range ${Tn} to ${mi} (in doc of length ${V})`);let ws=vi?typeof vi=="string"?xe.of(vi.split(Y||uo)):vi:xe.empty,ho=ws.length;if(Tn==mi&&ho==0)return;Tn<Ce&&Dt(),Tn>Ce&&vr(te,Tn-Ce,-1),vr(te,mi-Tn,ho),qs(we,te,ws),Ce=mi}}return jt(P),Dt(!We),We}static empty(P){return new jr(P?[P,-1]:[],[])}static fromJSON(P){if(!Array.isArray(P))throw new RangeError("Invalid JSON representation of ChangeSet");let V=[],Y=[];for(let te=0;te<P.length;te++){let we=P[te];if(typeof we=="number")V.push(we,-1);else{if(!Array.isArray(we)||typeof we[0]!="number"||we.some((Ce,We)=>We&&typeof Ce!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(we.length==1)V.push(we[0],0);else{for(;Y.length<te;)Y.push(xe.empty);Y[te]=xe.of(we.slice(1)),V.push(we[0],Y[te].length)}}}return new jr(V,Y)}static createSet(P,V){return new jr(P,V)}}function vr(re,P,V,Y=!1){if(P==0&&V<=0)return;let te=re.length-2;te>=0&&V<=0&&V==re[te+1]?re[te]+=P:P==0&&re[te]==0?re[te+1]+=V:Y?(re[te]+=P,re[te+1]+=V):re.push(P,V)}function qs(re,P,V){if(V.length==0)return;let Y=P.length-2>>1;if(Y<re.length)re[re.length-1]=re[re.length-1].append(V);else{for(;re.length<Y;)re.push(xe.empty);re.push(V)}}function Is(re,P,V){let Y=re.inserted;for(let te=0,we=0,Ce=0;Ce<re.sections.length;){let We=re.sections[Ce++],Dt=re.sections[Ce++];if(Dt<0)te+=We,we+=We;else{let jt=te,xn=we,Tn=xe.empty;for(;jt+=We,xn+=Dt,Dt&&Y&&(Tn=Tn.append(Y[Ce-2>>1])),!(V||Ce==re.sections.length||re.sections[Ce+1]<0);)We=re.sections[Ce++],Dt=re.sections[Ce++];P(te,jt,we,xn,Tn),te=jt,we=xn}}}function ci(re,P,V,Y=!1){let te=[],we=Y?[]:null,Ce=new $e(re),We=new $e(P);for(let Dt=-1;;)if(Ce.ins==-1&&We.ins==-1){let jt=Math.min(Ce.len,We.len);vr(te,jt,-1),Ce.forward(jt),We.forward(jt)}else if(We.ins>=0&&(Ce.ins<0||Dt==Ce.i||Ce.off==0&&(We.len<Ce.len||We.len==Ce.len&&!V))){let jt=We.len;for(vr(te,We.ins,-1);jt;){let xn=Math.min(Ce.len,jt);Ce.ins>=0&&Dt<Ce.i&&Ce.len<=xn&&(vr(te,0,Ce.ins),we&&qs(we,te,Ce.text),Dt=Ce.i),Ce.forward(xn),jt-=xn}We.next()}else if(Ce.ins>=0){let jt=0,xn=Ce.len;for(;xn;)if(We.ins==-1){let Tn=Math.min(xn,We.len);jt+=Tn,xn-=Tn,We.forward(Tn)}else if(We.ins==0&&We.len<xn)xn-=We.len,We.next();else break;vr(te,jt,Dt<Ce.i?Ce.ins:0),we&&Dt<Ce.i&&qs(we,te,Ce.text),Dt=Ce.i,Ce.forward(Ce.len-xn)}else{if(Ce.done&&We.done)return we?jr.createSet(te,we):wr.create(te);throw new Error("Mismatched change set lengths")}}function le(re,P,V=!1){let Y=[],te=V?[]:null,we=new $e(re),Ce=new $e(P);for(let We=!1;;){if(we.done&&Ce.done)return te?jr.createSet(Y,te):wr.create(Y);if(we.ins==0)vr(Y,we.len,0,We),we.next();else if(Ce.len==0&&!Ce.done)vr(Y,0,Ce.ins,We),te&&qs(te,Y,Ce.text),Ce.next();else{if(we.done||Ce.done)throw new Error("Mismatched change set lengths");{let Dt=Math.min(we.len2,Ce.len),jt=Y.length;if(we.ins==-1){let xn=Ce.ins==-1?-1:Ce.off?0:Ce.ins;vr(Y,Dt,xn,We),te&&xn&&qs(te,Y,Ce.text)}else Ce.ins==-1?(vr(Y,we.off?0:we.len,Dt,We),te&&qs(te,Y,we.textBit(Dt))):(vr(Y,we.off?0:we.len,Ce.off?0:Ce.ins,We),te&&!Ce.off&&qs(te,Y,Ce.text));We=(we.ins>Dt||Ce.ins>=0&&Ce.len>Dt)&&(We||Y.length>jt),we.forward2(Dt),Ce.forward(Dt)}}}}class $e{constructor(P){this.set=P,this.i=0,this.next()}next(){let{sections:P}=this.set;this.i<P.length?(this.len=P[this.i++],this.ins=P[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:P}=this.set,V=this.i-2>>1;return V>=P.length?xe.empty:P[V]}textBit(P){let{inserted:V}=this.set,Y=this.i-2>>1;return Y>=V.length&&!P?xe.empty:V[Y].slice(this.off,P==null?void 0:this.off+P)}forward(P){P==this.len?this.next():(this.len-=P,this.off+=P)}forward2(P){this.ins==-1?this.forward(P):P==this.ins?this.next():(this.ins-=P,this.off+=P)}}class ze{constructor(P,V,Y){this.from=P,this.to=V,this.flags=Y}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let P=this.flags&7;return P==7?null:P}get goalColumn(){let P=this.flags>>6;return P==16777215?void 0:P}map(P,V=-1){let Y,te;return this.empty?Y=te=P.mapPos(this.from,V):(Y=P.mapPos(this.from,1),te=P.mapPos(this.to,-1)),Y==this.from&&te==this.to?this:new ze(Y,te,this.flags)}extend(P,V=P){if(P<=this.anchor&&V>=this.anchor)return ee.range(P,V);let Y=Math.abs(P-this.anchor)>Math.abs(V-this.anchor)?P:V;return ee.range(this.anchor,Y)}eq(P,V=!1){return this.anchor==P.anchor&&this.head==P.head&&(!V||!this.empty||this.assoc==P.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(P){if(!P||typeof P.anchor!="number"||typeof P.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return ee.range(P.anchor,P.head)}static create(P,V,Y){return new ze(P,V,Y)}}class ee{constructor(P,V){this.ranges=P,this.mainIndex=V}map(P,V=-1){return P.empty?this:ee.create(this.ranges.map(Y=>Y.map(P,V)),this.mainIndex)}eq(P,V=!1){if(this.ranges.length!=P.ranges.length||this.mainIndex!=P.mainIndex)return!1;for(let Y=0;Y<this.ranges.length;Y++)if(!this.ranges[Y].eq(P.ranges[Y],V))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new ee([this.main],0)}addRange(P,V=!0){return ee.create([P].concat(this.ranges),V?0:this.mainIndex+1)}replaceRange(P,V=this.mainIndex){let Y=this.ranges.slice();return Y[V]=P,ee.create(Y,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(P=>P.toJSON()),main:this.mainIndex}}static fromJSON(P){if(!P||!Array.isArray(P.ranges)||typeof P.main!="number"||P.main>=P.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new ee(P.ranges.map(V=>ze.fromJSON(V)),P.main)}static single(P,V=P){return new ee([ee.range(P,V)],0)}static create(P,V=0){if(P.length==0)throw new RangeError("A selection needs at least one range");for(let Y=0,te=0;te<P.length;te++){let we=P[te];if(we.empty?we.from<=Y:we.from<Y)return ee.normalized(P.slice(),V);Y=we.to}return new ee(P,V)}static cursor(P,V=0,Y,te){return ze.create(P,P,(V==0?0:V<0?8:16)|(Y==null?7:Math.min(6,Y))|(te!=null?te:16777215)<<6)}static range(P,V,Y,te){let we=(Y!=null?Y:16777215)<<6|(te==null?7:Math.min(6,te));return V<P?ze.create(V,P,48|we):ze.create(P,V,(V>P?8:0)|we)}static normalized(P,V=0){let Y=P[V];P.sort((te,we)=>te.from-we.from),V=P.indexOf(Y);for(let te=1;te<P.length;te++){let we=P[te],Ce=P[te-1];if(we.empty?we.from<=Ce.to:we.from<Ce.to){let We=Ce.from,Dt=Math.max(we.to,Ce.to);te<=V&&V--,P.splice(--te,2,we.anchor>we.head?ee.range(Dt,We):ee.range(We,Dt))}}return new ee(P,V)}}function Ze(re,P){for(let V of re.ranges)if(V.to>P)throw new RangeError("Selection points outside of document")}let Ie=0;class Xe{constructor(P,V,Y,te,we){this.combine=P,this.compareInput=V,this.compare=Y,this.isStatic=te,this.id=Ie++,this.default=P([]),this.extensions=typeof we=="function"?we(this):we}get reader(){return this}static define(P={}){return new Xe(P.combine||(V=>V),P.compareInput||((V,Y)=>V===Y),P.compare||(P.combine?(V,Y)=>V===Y:St),!!P.static,P.enables)}of(P){return new Tt([],this,0,P)}compute(P,V){if(this.isStatic)throw new Error("Can't compute a static facet");return new Tt(P,this,1,V)}computeN(P,V){if(this.isStatic)throw new Error("Can't compute a static facet");return new Tt(P,this,2,V)}from(P,V){return V||(V=Y=>Y),this.compute([P],Y=>V(Y.field(P)))}}function St(re,P){return re==P||re.length==P.length&&re.every((V,Y)=>V===P[Y])}class Tt{constructor(P,V,Y,te){this.dependencies=P,this.facet=V,this.type=Y,this.value=te,this.id=Ie++}dynamicSlot(P){var V;let Y=this.value,te=this.facet.compareInput,we=this.id,Ce=P[we]>>1,We=this.type==2,Dt=!1,jt=!1,xn=[];for(let Tn of this.dependencies)Tn=="doc"?Dt=!0:Tn=="selection"?jt=!0:((V=P[Tn.id])!==null&&V!==void 0?V:1)&1||xn.push(P[Tn.id]);return{create(Tn){return Tn.values[Ce]=Y(Tn),1},update(Tn,mi){if(Dt&&mi.docChanged||jt&&(mi.docChanged||mi.selection)||Fn(Tn,xn)){let vi=Y(Tn);if(We?!Bn(vi,Tn.values[Ce],te):!te(vi,Tn.values[Ce]))return Tn.values[Ce]=vi,1}return 0},reconfigure:(Tn,mi)=>{let vi,ws=mi.config.address[we];if(ws!=null){let ho=Ge(mi,ws);if(this.dependencies.every(pr=>pr instanceof Xe?mi.facet(pr)===Tn.facet(pr):pr instanceof Ki?mi.field(pr,!1)==Tn.field(pr,!1):!0)||(We?Bn(vi=Y(Tn),ho,te):te(vi=Y(Tn),ho)))return Tn.values[Ce]=ho,0}else vi=Y(Tn);return Tn.values[Ce]=vi,1}}}}function Bn(re,P,V){if(re.length!=P.length)return!1;for(let Y=0;Y<re.length;Y++)if(!V(re[Y],P[Y]))return!1;return!0}function Fn(re,P){let V=!1;for(let Y of P)Ve(re,Y)&1&&(V=!0);return V}function Qn(re,P,V){let Y=V.map(Dt=>re[Dt.id]),te=V.map(Dt=>Dt.type),we=Y.filter(Dt=>!(Dt&1)),Ce=re[P.id]>>1;function We(Dt){let jt=[];for(let xn=0;xn<Y.length;xn++){let Tn=Ge(Dt,Y[xn]);if(te[xn]==2)for(let mi of Tn)jt.push(mi);else jt.push(Tn)}return P.combine(jt)}return{create(Dt){for(let jt of Y)Ve(Dt,jt);return Dt.values[Ce]=We(Dt),1},update(Dt,jt){if(!Fn(Dt,we))return 0;let xn=We(Dt);return P.compare(xn,Dt.values[Ce])?0:(Dt.values[Ce]=xn,1)},reconfigure(Dt,jt){let xn=Fn(Dt,Y),Tn=jt.config.facets[P.id],mi=jt.facet(P);if(Tn&&!xn&&St(V,Tn))return Dt.values[Ce]=mi,0;let vi=We(Dt);return P.compare(vi,mi)?(Dt.values[Ce]=mi,0):(Dt.values[Ce]=vi,1)}}}const hi=Xe.define({static:!0});class Ki{constructor(P,V,Y,te,we){this.id=P,this.createF=V,this.updateF=Y,this.compareF=te,this.spec=we,this.provides=void 0}static define(P){let V=new Ki(Ie++,P.create,P.update,P.compare||((Y,te)=>Y===te),P);return P.provide&&(V.provides=P.provide(V)),V}create(P){let V=P.facet(hi).find(Y=>Y.field==this);return((V==null?void 0:V.create)||this.createF)(P)}slot(P){let V=P[this.id]>>1;return{create:Y=>(Y.values[V]=this.create(Y),1),update:(Y,te)=>{let we=Y.values[V],Ce=this.updateF(we,te);return this.compareF(we,Ce)?0:(Y.values[V]=Ce,1)},reconfigure:(Y,te)=>te.config.address[this.id]!=null?(Y.values[V]=te.field(this),0):(Y.values[V]=this.create(Y),1)}}init(P){return[this,hi.of({field:this,create:P})]}get extension(){return this}}const Vn={lowest:4,low:3,default:2,high:1,highest:0};function fs(re){return P=>new Ao(P,re)}const wo={highest:fs(Vn.highest),high:fs(Vn.high),default:fs(Vn.default),low:fs(Vn.low),lowest:fs(Vn.lowest)};class Ao{constructor(P,V){this.inner=P,this.prec=V}}class en{of(P){return new fe(this,P)}reconfigure(P){return en.reconfigure.of({compartment:this,extension:P})}get(P){return P.config.compartments.get(this)}}class fe{constructor(P,V){this.compartment=P,this.inner=V}}class Fe{constructor(P,V,Y,te,we,Ce){for(this.base=P,this.compartments=V,this.dynamicSlots=Y,this.address=te,this.staticValues=we,this.facets=Ce,this.statusTemplate=[];this.statusTemplate.length<Y.length;)this.statusTemplate.push(0)}staticFacet(P){let V=this.address[P.id];return V==null?P.default:this.staticValues[V>>1]}static resolve(P,V,Y){let te=[],we=Object.create(null),Ce=new Map;for(let mi of Ye(P,V,Ce))mi instanceof Ki?te.push(mi):(we[mi.facet.id]||(we[mi.facet.id]=[])).push(mi);let We=Object.create(null),Dt=[],jt=[];for(let mi of te)We[mi.id]=jt.length<<1,jt.push(vi=>mi.slot(vi));let xn=Y==null?void 0:Y.config.facets;for(let mi in we){let vi=we[mi],ws=vi[0].facet,ho=xn&&xn[mi]||[];if(vi.every(pr=>pr.type==0))if(We[ws.id]=Dt.length<<1|1,St(ho,vi))Dt.push(Y.facet(ws));else{let pr=ws.combine(vi.map(Fi=>Fi.value));Dt.push(Y&&ws.compare(pr,Y.facet(ws))?Y.facet(ws):pr)}else{for(let pr of vi)pr.type==0?(We[pr.id]=Dt.length<<1|1,Dt.push(pr.value)):(We[pr.id]=jt.length<<1,jt.push(Fi=>pr.dynamicSlot(Fi)));We[ws.id]=jt.length<<1,jt.push(pr=>Qn(pr,ws,vi))}}let Tn=jt.map(mi=>mi(We));return new Fe(P,Ce,Tn,We,Dt,we)}}function Ye(re,P,V){let Y=[[],[],[],[],[]],te=new Map;function we(Ce,We){let Dt=te.get(Ce);if(Dt!=null){if(Dt<=We)return;let jt=Y[Dt].indexOf(Ce);jt>-1&&Y[Dt].splice(jt,1),Ce instanceof fe&&V.delete(Ce.compartment)}if(te.set(Ce,We),Array.isArray(Ce))for(let jt of Ce)we(jt,We);else if(Ce instanceof fe){if(V.has(Ce.compartment))throw new RangeError("Duplicate use of compartment in extensions");let jt=P.get(Ce.compartment)||Ce.inner;V.set(Ce.compartment,jt),we(jt,We)}else if(Ce instanceof Ao)we(Ce.inner,Ce.prec);else if(Ce instanceof Ki)Y[We].push(Ce),Ce.provides&&we(Ce.provides,We);else if(Ce instanceof Tt)Y[We].push(Ce),Ce.facet.extensions&&we(Ce.facet.extensions,Vn.default);else{let jt=Ce.extension;if(!jt)throw new Error(`Unrecognized extension value in extension set (${Ce}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);we(jt,We)}}return we(re,Vn.default),Y.reduce((Ce,We)=>Ce.concat(We))}function Ve(re,P){if(P&1)return 2;let V=P>>1,Y=re.status[V];if(Y==4)throw new Error("Cyclic dependency between fields and/or facets");if(Y&2)return Y;re.status[V]=4;let te=re.computeSlot(re,re.config.dynamicSlots[V]);return re.status[V]=2|te}function Ge(re,P){return P&1?re.config.staticValues[P>>1]:re.values[P>>1]}const Ut=Xe.define(),sn=Xe.define({combine:re=>re.some(P=>P),static:!0}),_n=Xe.define({combine:re=>re.length?re[0]:void 0,static:!0}),Hi=Xe.define(),Wn=Xe.define(),xi=Xe.define(),ar=Xe.define({combine:re=>re.length?re[0]:!1});class di{constructor(P,V){this.type=P,this.value=V}static define(){return new Ui}}class Ui{of(P){return new di(this,P)}}class hr{constructor(P){this.map=P}of(P){return new bi(this,P)}}class bi{constructor(P,V){this.type=P,this.value=V}map(P){let V=this.type.map(this.value,P);return V===void 0?void 0:V==this.value?this:new bi(this.type,V)}is(P){return this.type==P}static define(P={}){return new hr(P.map||(V=>V))}static mapEffects(P,V){if(!P.length)return P;let Y=[];for(let te of P){let we=te.map(V);we&&Y.push(we)}return Y}}bi.reconfigure=bi.define(),bi.appendConfig=bi.define();class Gr{constructor(P,V,Y,te,we,Ce){this.startState=P,this.changes=V,this.selection=Y,this.effects=te,this.annotations=we,this.scrollIntoView=Ce,this._doc=null,this._state=null,Y&&Ze(Y,V.newLength),we.some(We=>We.type==Gr.time)||(this.annotations=we.concat(Gr.time.of(Date.now())))}static create(P,V,Y,te,we,Ce){return new Gr(P,V,Y,te,we,Ce)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(P){for(let V of this.annotations)if(V.type==P)return V.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(P){let V=this.annotation(Gr.userEvent);return!!(V&&(V==P||V.length>P.length&&V.slice(0,P.length)==P&&V[P.length]=="."))}}Gr.time=di.define(),Gr.userEvent=di.define(),Gr.addToHistory=di.define(),Gr.remote=di.define();function Zi(re,P){let V=[];for(let Y=0,te=0;;){let we,Ce;if(Y<re.length&&(te==P.length||P[te]>=re[Y]))we=re[Y++],Ce=re[Y++];else if(te<P.length)we=P[te++],Ce=P[te++];else return V;!V.length||V[V.length-1]<we?V.push(we,Ce):V[V.length-1]<Ce&&(V[V.length-1]=Ce)}}function xr(re,P,V){var Y;let te,we,Ce;return V?(te=P.changes,we=jr.empty(P.changes.length),Ce=re.changes.compose(P.changes)):(te=P.changes.map(re.changes),we=re.changes.mapDesc(P.changes,!0),Ce=re.changes.compose(te)),{changes:Ce,selection:P.selection?P.selection.map(we):(Y=re.selection)===null||Y===void 0?void 0:Y.map(te),effects:bi.mapEffects(re.effects,te).concat(bi.mapEffects(P.effects,we)),annotations:re.annotations.length?re.annotations.concat(P.annotations):P.annotations,scrollIntoView:re.scrollIntoView||P.scrollIntoView}}function ms(re,P,V){let Y=P.selection,te=Qi(P.annotations);return P.userEvent&&(te=te.concat(Gr.userEvent.of(P.userEvent))),{changes:P.changes instanceof jr?P.changes:jr.of(P.changes||[],V,re.facet(_n)),selection:Y&&(Y instanceof ee?Y:ee.single(Y.anchor,Y.head)),effects:Qi(P.effects),annotations:te,scrollIntoView:!!P.scrollIntoView}}function Ni(re,P,V){let Y=ms(re,P.length?P[0]:{},re.doc.length);P.length&&P[0].filter===!1&&(V=!1);for(let we=1;we<P.length;we++){P[we].filter===!1&&(V=!1);let Ce=!!P[we].sequential;Y=xr(Y,ms(re,P[we],Ce?Y.changes.newLength:re.doc.length),Ce)}let te=Gr.create(re,Y.changes,Y.selection,Y.effects,Y.annotations,Y.scrollIntoView);return Di(V?qr(te):te)}function qr(re){let P=re.startState,V=!0;for(let te of P.facet(Hi)){let we=te(re);if(we===!1){V=!1;break}Array.isArray(we)&&(V=V===!0?we:Zi(V,we))}if(V!==!0){let te,we;if(V===!1)we=re.changes.invertedDesc,te=jr.empty(P.doc.length);else{let Ce=re.changes.filter(V);te=Ce.changes,we=Ce.filtered.mapDesc(Ce.changes).invertedDesc}re=Gr.create(P,te,re.selection&&re.selection.map(we),bi.mapEffects(re.effects,we),re.annotations,re.scrollIntoView)}let Y=P.facet(Wn);for(let te=Y.length-1;te>=0;te--){let we=Y[te](re);we instanceof Gr?re=we:Array.isArray(we)&&we.length==1&&we[0]instanceof Gr?re=we[0]:re=Ni(P,Qi(we),!1)}return re}function Di(re){let P=re.startState,V=P.facet(xi),Y=re;for(let te=V.length-1;te>=0;te--){let we=V[te](re);we&&Object.keys(we).length&&(Y=xr(Y,ms(P,we,re.changes.newLength),!0))}return Y==re?re:Gr.create(P,re.changes,re.selection,Y.effects,Y.annotations,Y.scrollIntoView)}const Sr=[];function Qi(re){return re==null?Sr:Array.isArray(re)?re:[re]}var _i=function(re){return re[re.Word=0]="Word",re[re.Space=1]="Space",re[re.Other=2]="Other",re}(_i||(_i={}));const gr=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Zn;try{Zn=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(re){}function tr(re){if(Zn)return Zn.test(re);for(let P=0;P<re.length;P++){let V=re[P];if(/\w/.test(V)||V>"\x80"&&(V.toUpperCase()!=V.toLowerCase()||gr.test(V)))return!0}return!1}function bn(re){return P=>{if(!/\S/.test(P))return _i.Space;if(tr(P))return _i.Word;for(let V=0;V<re.length;V++)if(P.indexOf(re[V])>-1)return _i.Word;return _i.Other}}class Wr{constructor(P,V,Y,te,we,Ce){this.config=P,this.doc=V,this.selection=Y,this.values=te,this.status=P.statusTemplate.slice(),this.computeSlot=we,Ce&&(Ce._state=this);for(let We=0;We<this.config.dynamicSlots.length;We++)Ve(this,We<<1);this.computeSlot=null}field(P,V=!0){let Y=this.config.address[P.id];if(Y==null){if(V)throw new RangeError("Field is not present in this state");return}return Ve(this,Y),Ge(this,Y)}update(...P){return Ni(this,P,!0)}applyTransaction(P){let V=this.config,{base:Y,compartments:te}=V;for(let We of P.effects)We.is(en.reconfigure)?(V&&(te=new Map,V.compartments.forEach((Dt,jt)=>te.set(jt,Dt)),V=null),te.set(We.value.compartment,We.value.extension)):We.is(bi.reconfigure)?(V=null,Y=We.value):We.is(bi.appendConfig)&&(V=null,Y=Qi(Y).concat(We.value));let we;V?we=P.startState.values.slice():(V=Fe.resolve(Y,te,this),we=new Wr(V,this.doc,this.selection,V.dynamicSlots.map(()=>null),(Dt,jt)=>jt.reconfigure(Dt,this),null).values);let Ce=P.startState.facet(sn)?P.newSelection:P.newSelection.asSingle();new Wr(V,P.newDoc,Ce,we,(We,Dt)=>Dt.update(We,P),P)}replaceSelection(P){return typeof P=="string"&&(P=this.toText(P)),this.changeByRange(V=>({changes:{from:V.from,to:V.to,insert:P},range:ee.cursor(V.from+P.length)}))}changeByRange(P){let V=this.selection,Y=P(V.ranges[0]),te=this.changes(Y.changes),we=[Y.range],Ce=Qi(Y.effects);for(let We=1;We<V.ranges.length;We++){let Dt=P(V.ranges[We]),jt=this.changes(Dt.changes),xn=jt.map(te);for(let mi=0;mi<We;mi++)we[mi]=we[mi].map(xn);let Tn=te.mapDesc(jt,!0);we.push(Dt.range.map(Tn)),te=te.compose(xn),Ce=bi.mapEffects(Ce,xn).concat(bi.mapEffects(Qi(Dt.effects),Tn))}return{changes:te,selection:ee.create(we,V.mainIndex),effects:Ce}}changes(P=[]){return P instanceof jr?P:jr.of(P,this.doc.length,this.facet(Wr.lineSeparator))}toText(P){return xe.of(P.split(this.facet(Wr.lineSeparator)||uo))}sliceDoc(P=0,V=this.doc.length){return this.doc.sliceString(P,V,this.lineBreak)}facet(P){let V=this.config.address[P.id];return V==null?P.default:(Ve(this,V),Ge(this,V))}toJSON(P){let V={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(P)for(let Y in P){let te=P[Y];te instanceof Ki&&this.config.address[te.id]!=null&&(V[Y]=te.spec.toJSON(this.field(P[Y]),this))}return V}static fromJSON(P,V={},Y){if(!P||typeof P.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let te=[];if(Y){for(let we in Y)if(Object.prototype.hasOwnProperty.call(P,we)){let Ce=Y[we],We=P[we];te.push(Ce.init(Dt=>Ce.spec.fromJSON(We,Dt)))}}return Wr.create({doc:P.doc,selection:ee.fromJSON(P.selection),extensions:V.extensions?te.concat([V.extensions]):te})}static create(P={}){let V=Fe.resolve(P.extensions||[],new Map),Y=P.doc instanceof xe?P.doc:xe.of((P.doc||"").split(V.staticFacet(Wr.lineSeparator)||uo)),te=P.selection?P.selection instanceof ee?P.selection:ee.single(P.selection.anchor,P.selection.head):ee.single(0);return Ze(te,Y.length),V.staticFacet(sn)||(te=te.asSingle()),new Wr(V,Y,te,V.dynamicSlots.map(()=>null),(we,Ce)=>Ce.create(we),null)}get tabSize(){return this.facet(Wr.tabSize)}get lineBreak(){return this.facet(Wr.lineSeparator)||`
`}get readOnly(){return this.facet(ar)}phrase(P,...V){for(let Y of this.facet(Wr.phrases))if(Object.prototype.hasOwnProperty.call(Y,P)){P=Y[P];break}return V.length&&(P=P.replace(/\$(\$|\d*)/g,(Y,te)=>{if(te=="$")return"$";let we=+(te||1);return!we||we>V.length?Y:V[we-1]})),P}languageDataAt(P,V,Y=-1){let te=[];for(let we of this.facet(Ut))for(let Ce of we(this,V,Y))Object.prototype.hasOwnProperty.call(Ce,P)&&te.push(Ce[P]);return te}charCategorizer(P){return bn(this.languageDataAt("wordChars",P).join(""))}wordAt(P){let{text:V,from:Y,length:te}=this.doc.lineAt(P),we=this.charCategorizer(P),Ce=P-Y,We=P-Y;for(;Ce>0;){let Dt=$t(V,Ce,!1);if(we(V.slice(Dt,Ce))!=_i.Word)break;Ce=Dt}for(;We<te;){let Dt=$t(V,We);if(we(V.slice(We,Dt))!=_i.Word)break;We=Dt}return Ce==We?null:ee.range(Ce+Y,We+Y)}}Wr.allowMultipleSelections=sn,Wr.tabSize=Xe.define({combine:re=>re.length?re[0]:4}),Wr.lineSeparator=_n,Wr.readOnly=ar,Wr.phrases=Xe.define({compare(re,P){let V=Object.keys(re),Y=Object.keys(P);return V.length==Y.length&&V.every(te=>re[te]==P[te])}}),Wr.languageData=Ut,Wr.changeFilter=Hi,Wr.transactionFilter=Wn,Wr.transactionExtender=xi,en.reconfigure=bi.define();function Js(re,P,V={}){let Y={};for(let te of re)for(let we of Object.keys(te)){let Ce=te[we],We=Y[we];if(We===void 0)Y[we]=Ce;else if(!(We===Ce||Ce===void 0))if(Object.hasOwnProperty.call(V,we))Y[we]=V[we](We,Ce);else throw new Error("Config merge conflict for field "+we)}for(let te in P)Y[te]===void 0&&(Y[te]=P[te]);return Y}class Hr{eq(P){return this==P}range(P,V=P){return Lr.create(P,V,this)}}Hr.prototype.startSide=Hr.prototype.endSide=0,Hr.prototype.point=!1,Hr.prototype.mapMode=cs.TrackDel;class Lr{constructor(P,V,Y){this.from=P,this.to=V,this.value=Y}static create(P,V,Y){return new Lr(P,V,Y)}}function Pi(re,P){return re.from-P.from||re.value.startSide-P.value.startSide}class Qs{constructor(P,V,Y,te){this.from=P,this.to=V,this.value=Y,this.maxPoint=te}get length(){return this.to[this.to.length-1]}findIndex(P,V,Y,te=0){let we=Y?this.to:this.from;for(let Ce=te,We=we.length;;){if(Ce==We)return Ce;let Dt=Ce+We>>1,jt=we[Dt]-P||(Y?this.value[Dt].endSide:this.value[Dt].startSide)-V;if(Dt==Ce)return jt>=0?Ce:We;jt>=0?We=Dt:Ce=Dt+1}}between(P,V,Y,te){for(let we=this.findIndex(V,-1e9,!0),Ce=this.findIndex(Y,1e9,!1,we);we<Ce;we++)if(te(this.from[we]+P,this.to[we]+P,this.value[we])===!1)return!1}map(P,V){let Y=[],te=[],we=[],Ce=-1,We=-1;for(let Dt=0;Dt<this.value.length;Dt++){let jt=this.value[Dt],xn=this.from[Dt]+P,Tn=this.to[Dt]+P,mi,vi;if(xn==Tn){let ws=V.mapPos(xn,jt.startSide,jt.mapMode);if(ws==null||(mi=vi=ws,jt.startSide!=jt.endSide&&(vi=V.mapPos(xn,jt.endSide),vi<mi)))continue}else if(mi=V.mapPos(xn,jt.startSide),vi=V.mapPos(Tn,jt.endSide),mi>vi||mi==vi&&jt.startSide>0&&jt.endSide<=0)continue;(vi-mi||jt.endSide-jt.startSide)<0||(Ce<0&&(Ce=mi),jt.point&&(We=Math.max(We,vi-mi)),Y.push(jt),te.push(mi-Ce),we.push(vi-Ce))}return{mapped:Y.length?new Qs(te,we,Y,We):null,pos:Ce}}}class Pn{constructor(P,V,Y,te){this.chunkPos=P,this.chunk=V,this.nextLayer=Y,this.maxPoint=te}static create(P,V,Y,te){return new Pn(P,V,Y,te)}get length(){let P=this.chunk.length-1;return P<0?0:Math.max(this.chunkEnd(P),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let P=this.nextLayer.size;for(let V of this.chunk)P+=V.value.length;return P}chunkEnd(P){return this.chunkPos[P]+this.chunk[P].length}update(P){let{add:V=[],sort:Y=!1,filterFrom:te=0,filterTo:we=this.length}=P,Ce=P.filter;if(V.length==0&&!Ce)return this;if(Y&&(V=V.slice().sort(Pi)),this.isEmpty)return V.length?Pn.of(V):this;let We=new hs(this,null,-1).goto(0),Dt=0,jt=[],xn=new Ts;for(;We.value||Dt<V.length;)if(Dt<V.length&&(We.from-V[Dt].from||We.startSide-V[Dt].value.startSide)>=0){let Tn=V[Dt++];xn.addInner(Tn.from,Tn.to,Tn.value)||jt.push(Tn)}else We.rangeIndex==1&&We.chunkIndex<this.chunk.length&&(Dt==V.length||this.chunkEnd(We.chunkIndex)<V[Dt].from)&&(!Ce||te>this.chunkEnd(We.chunkIndex)||we<this.chunkPos[We.chunkIndex])&&xn.addChunk(this.chunkPos[We.chunkIndex],this.chunk[We.chunkIndex])?We.nextChunk():((!Ce||te>We.to||we<We.from||Ce(We.from,We.to,We.value))&&(xn.addInner(We.from,We.to,We.value)||jt.push(Lr.create(We.from,We.to,We.value))),We.next());return xn.finishInner(this.nextLayer.isEmpty&&!jt.length?Pn.empty:this.nextLayer.update({add:jt,filter:Ce,filterFrom:te,filterTo:we}))}map(P){if(P.empty||this.isEmpty)return this;let V=[],Y=[],te=-1;for(let Ce=0;Ce<this.chunk.length;Ce++){let We=this.chunkPos[Ce],Dt=this.chunk[Ce],jt=P.touchesRange(We,We+Dt.length);if(jt===!1)te=Math.max(te,Dt.maxPoint),V.push(Dt),Y.push(P.mapPos(We));else if(jt===!0){let{mapped:xn,pos:Tn}=Dt.map(We,P);xn&&(te=Math.max(te,xn.maxPoint),V.push(xn),Y.push(Tn))}}let we=this.nextLayer.map(P);return V.length==0?we:new Pn(Y,V,we||Pn.empty,te)}between(P,V,Y){if(!this.isEmpty){for(let te=0;te<this.chunk.length;te++){let we=this.chunkPos[te],Ce=this.chunk[te];if(V>=we&&P<=we+Ce.length&&Ce.between(we,P-we,V-we,Y)===!1)return}this.nextLayer.between(P,V,Y)}}iter(P=0){return os.from([this]).goto(P)}get isEmpty(){return this.nextLayer==this}static iter(P,V=0){return os.from(P).goto(V)}static compare(P,V,Y,te,we=-1){let Ce=P.filter(Tn=>Tn.maxPoint>0||!Tn.isEmpty&&Tn.maxPoint>=we),We=V.filter(Tn=>Tn.maxPoint>0||!Tn.isEmpty&&Tn.maxPoint>=we),Dt=Kr(Ce,We,Y),jt=new dr(Ce,Dt,we),xn=new dr(We,Dt,we);Y.iterGaps((Tn,mi,vi)=>Qr(jt,Tn,xn,mi,vi,te)),Y.empty&&Y.length==0&&Qr(jt,0,xn,0,0,te)}static eq(P,V,Y=0,te){te==null&&(te=1e9-1);let we=P.filter(xn=>!xn.isEmpty&&V.indexOf(xn)<0),Ce=V.filter(xn=>!xn.isEmpty&&P.indexOf(xn)<0);if(we.length!=Ce.length)return!1;if(!we.length)return!0;let We=Kr(we,Ce),Dt=new dr(we,We,0).goto(Y),jt=new dr(Ce,We,0).goto(Y);for(;;){if(Dt.to!=jt.to||!gs(Dt.active,jt.active)||Dt.point&&(!jt.point||!Dt.point.eq(jt.point)))return!1;if(Dt.to>te)return!0;Dt.next(),jt.next()}}static spans(P,V,Y,te,we=-1){let Ce=new dr(P,null,we).goto(V),We=V,Dt=Ce.openStart;for(;;){let jt=Math.min(Ce.to,Y);if(Ce.point){let xn=Ce.activeForPoint(Ce.to),Tn=Ce.pointFrom<V?xn.length+1:Ce.point.startSide<0?xn.length:Math.min(xn.length,Dt);te.point(We,jt,Ce.point,xn,Tn,Ce.pointRank),Dt=Math.min(Ce.openEnd(jt),xn.length)}else jt>We&&(te.span(We,jt,Ce.active,Dt),Dt=Ce.openEnd(jt));if(Ce.to>Y)return Dt+(Ce.point&&Ce.to>Y?1:0);We=Ce.to,Ce.next()}}static of(P,V=!1){let Y=new Ts;for(let te of P instanceof Lr?[P]:V?Xs(P):P)Y.add(te.from,te.to,te.value);return Y.finish()}static join(P){if(!P.length)return Pn.empty;let V=P[P.length-1];for(let Y=P.length-2;Y>=0;Y--)for(let te=P[Y];te!=Pn.empty;te=te.nextLayer)V=new Pn(te.chunkPos,te.chunk,V,Math.max(te.maxPoint,V.maxPoint));return V}}Pn.empty=new Pn([],[],null,-1);function Xs(re){if(re.length>1)for(let P=re[0],V=1;V<re.length;V++){let Y=re[V];if(Pi(P,Y)>0)return re.slice().sort(Pi);P=Y}return re}Pn.empty.nextLayer=Pn.empty;class Ts{finishChunk(P){this.chunks.push(new Qs(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,P&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(P,V,Y){this.addInner(P,V,Y)||(this.nextLayer||(this.nextLayer=new Ts)).add(P,V,Y)}addInner(P,V,Y){let te=P-this.lastTo||Y.startSide-this.last.endSide;if(te<=0&&(P-this.lastFrom||Y.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return te<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=P),this.from.push(P-this.chunkStart),this.to.push(V-this.chunkStart),this.last=Y,this.lastFrom=P,this.lastTo=V,this.value.push(Y),Y.point&&(this.maxPoint=Math.max(this.maxPoint,V-P)),!0)}addChunk(P,V){if((P-this.lastTo||V.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,V.maxPoint),this.chunks.push(V),this.chunkPos.push(P);let Y=V.value.length-1;return this.last=V.value[Y],this.lastFrom=V.from[Y]+P,this.lastTo=V.to[Y]+P,!0}finish(){return this.finishInner(Pn.empty)}finishInner(P){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return P;let V=Pn.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(P):P,this.setMaxPoint);return this.from=null,V}}function Kr(re,P,V){let Y=new Map;for(let we of re)for(let Ce=0;Ce<we.chunk.length;Ce++)we.chunk[Ce].maxPoint<=0&&Y.set(we.chunk[Ce],we.chunkPos[Ce]);let te=new Set;for(let we of P)for(let Ce=0;Ce<we.chunk.length;Ce++){let We=Y.get(we.chunk[Ce]);We!=null&&(V?V.mapPos(We):We)==we.chunkPos[Ce]&&!(V!=null&&V.touchesRange(We,We+we.chunk[Ce].length))&&te.add(we.chunk[Ce])}return te}class hs{constructor(P,V,Y,te=0){this.layer=P,this.skip=V,this.minPoint=Y,this.rank=te}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(P,V=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(P,V,!1),this}gotoInner(P,V,Y){for(;this.chunkIndex<this.layer.chunk.length;){let te=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(te)||this.layer.chunkEnd(this.chunkIndex)<P||te.maxPoint<this.minPoint))break;this.chunkIndex++,Y=!1}if(this.chunkIndex<this.layer.chunk.length){let te=this.layer.chunk[this.chunkIndex].findIndex(P-this.layer.chunkPos[this.chunkIndex],V,!0);(!Y||this.rangeIndex<te)&&this.setRangeIndex(te)}this.next()}forward(P,V){(this.to-P||this.endSide-V)<0&&this.gotoInner(P,V,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let P=this.layer.chunkPos[this.chunkIndex],V=this.layer.chunk[this.chunkIndex],Y=P+V.from[this.rangeIndex];if(this.from=Y,this.to=P+V.to[this.rangeIndex],this.value=V.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(P){if(P==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=P}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(P){return this.from-P.from||this.startSide-P.startSide||this.rank-P.rank||this.to-P.to||this.endSide-P.endSide}}class os{constructor(P){this.heap=P}static from(P,V=null,Y=-1){let te=[];for(let we=0;we<P.length;we++)for(let Ce=P[we];!Ce.isEmpty;Ce=Ce.nextLayer)Ce.maxPoint>=Y&&te.push(new hs(Ce,V,Y,we));return te.length==1?te[0]:new os(te)}get startSide(){return this.value?this.value.startSide:0}goto(P,V=-1e9){for(let Y of this.heap)Y.goto(P,V);for(let Y=this.heap.length>>1;Y>=0;Y--)js(this.heap,Y);return this.next(),this}forward(P,V){for(let Y of this.heap)Y.forward(P,V);for(let Y=this.heap.length>>1;Y>=0;Y--)js(this.heap,Y);(this.to-P||this.value.endSide-V)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let P=this.heap[0];this.from=P.from,this.to=P.to,this.value=P.value,this.rank=P.rank,P.value&&P.next(),js(this.heap,0)}}}function js(re,P){for(let V=re[P];;){let Y=(P<<1)+1;if(Y>=re.length)break;let te=re[Y];if(Y+1<re.length&&te.compare(re[Y+1])>=0&&(te=re[Y+1],Y++),V.compare(te)<0)break;re[Y]=V,re[P]=te,P=Y}}class dr{constructor(P,V,Y){this.minPoint=Y,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=os.from(P,V,Y)}goto(P,V=-1e9){return this.cursor.goto(P,V),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=P,this.endSide=V,this.openStart=-1,this.next(),this}forward(P,V){for(;this.minActive>-1&&(this.activeTo[this.minActive]-P||this.active[this.minActive].endSide-V)<0;)this.removeActive(this.minActive);this.cursor.forward(P,V)}removeActive(P){ei(this.active,P),ei(this.activeTo,P),ei(this.activeRank,P),this.minActive=co(this.active,this.activeTo)}addActive(P){let V=0,{value:Y,to:te,rank:we}=this.cursor;for(;V<this.activeRank.length&&(we-this.activeRank[V]||te-this.activeTo[V])>0;)V++;Rs(this.active,V,Y),Rs(this.activeTo,V,te),Rs(this.activeRank,V,we),P&&Rs(P,V,this.cursor.from),this.minActive=co(this.active,this.activeTo)}next(){let P=this.to,V=this.point;this.point=null;let Y=this.openStart<0?[]:null;for(;;){let te=this.minActive;if(te>-1&&(this.activeTo[te]-this.cursor.from||this.active[te].endSide-this.cursor.startSide)<0){if(this.activeTo[te]>P){this.to=this.activeTo[te],this.endSide=this.active[te].endSide;break}this.removeActive(te),Y&&ei(Y,te)}else if(this.cursor.value)if(this.cursor.from>P){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let we=this.cursor.value;if(!we.point)this.addActive(Y),this.cursor.next();else if(V&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=we,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=we.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(Y){this.openStart=0;for(let te=Y.length-1;te>=0&&Y[te]<P;te--)this.openStart++}}activeForPoint(P){if(!this.active.length)return this.active;let V=[];for(let Y=this.active.length-1;Y>=0&&!(this.activeRank[Y]<this.pointRank);Y--)(this.activeTo[Y]>P||this.activeTo[Y]==P&&this.active[Y].endSide>=this.point.endSide)&&V.push(this.active[Y]);return V.reverse()}openEnd(P){let V=0;for(let Y=this.activeTo.length-1;Y>=0&&this.activeTo[Y]>P;Y--)V++;return V}}function Qr(re,P,V,Y,te,we){re.goto(P),V.goto(Y);let Ce=Y+te,We=Y,Dt=Y-P;for(;;){let jt=re.to+Dt-V.to||re.endSide-V.endSide,xn=jt<0?re.to+Dt:V.to,Tn=Math.min(xn,Ce);if(re.point||V.point?re.point&&V.point&&(re.point==V.point||re.point.eq(V.point))&&gs(re.activeForPoint(re.to),V.activeForPoint(V.to))||we.comparePoint(We,Tn,re.point,V.point):Tn>We&&!gs(re.active,V.active)&&we.compareRange(We,Tn,re.active,V.active),xn>Ce)break;We=xn,jt<=0&&re.next(),jt>=0&&V.next()}}function gs(re,P){if(re.length!=P.length)return!1;for(let V=0;V<re.length;V++)if(re[V]!=P[V]&&!re[V].eq(P[V]))return!1;return!0}function ei(re,P){for(let V=P,Y=re.length-1;V<Y;V++)re[V]=re[V+1];re.pop()}function Rs(re,P,V){for(let Y=re.length-1;Y>=P;Y--)re[Y+1]=re[Y];re[P]=V}function co(re,P){let V=-1,Y=1e9;for(let te=0;te<P.length;te++)(P[te]-Y||re[te].endSide-re[V].endSide)<0&&(V=te,Y=P[te]);return V}function oa(re,P,V=re.length){let Y=0;for(let te=0;te<V;)re.charCodeAt(te)==9?(Y+=P-Y%P,te++):(Y++,te=$t(re,te));return Y}function na(re,P,V,Y){for(let te=0,we=0;;){if(we>=P)return te;if(te==re.length)break;we+=re.charCodeAt(te)==9?V-we%V:1,te=$t(re,te)}return Y===!0?-1:re.length}},90586:function(lo,bs,dn){"use strict";dn.d(bs,{p:function(){return Qi},Nm:function(){return Pi},tk:function(){return Nr},SJ:function(){return xo},lg:function(){return ds},l9:function(){return Di},S2:function(){return uc},Uw:function(){return Hs},qr:function(){return a},Sd:function(){return dl},gB:function(){return Er},v5:function(){return Tl},ZO:function(){return Vl},HQ:function(){return ta},AE:function(){return ui},bF:function(){return yr},$f:function(){return Du},Eu:function(){return kl},OO:function(){return rt},W$:function(){return mu},Zs:function(){return lc},$1:function(){return Ya},mH:function(){return Fa},hJ:function(){return an}});for(var xe=dn(80403),It=dn(6221),fn={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},it={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Qt=typeof navigator!="undefined"&&/Mac/.test(navigator.platform),yn=typeof navigator!="undefined"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),ii=0;ii<10;ii++)fn[48+ii]=fn[96+ii]=String(ii);for(var ii=1;ii<=24;ii++)fn[ii+111]="F"+ii;for(var ii=65;ii<=90;ii++)fn[ii]=String.fromCharCode(ii+32),it[ii]=String.fromCharCode(ii);for(var Nn in fn)it.hasOwnProperty(Nn)||(it[Nn]=fn[Nn]);function Kt(E){var u=Qt&&E.metaKey&&E.shiftKey&&!E.ctrlKey&&!E.altKey||yn&&E.shiftKey&&E.key&&E.key.length==1||E.key=="Unidentified",f=!u&&E.key||(E.shiftKey?it:fn)[E.keyCode]||E.key||"Unidentified";return f=="Esc"&&(f="Escape"),f=="Del"&&(f="Delete"),f=="Left"&&(f="ArrowLeft"),f=="Up"&&(f="ArrowUp"),f=="Right"&&(f="ArrowRight"),f=="Down"&&(f="ArrowDown"),f}function In(E){let u;return E.nodeType==11?u=E.getSelection?E:E.ownerDocument:u=E,u.getSelection()}function vn(E,u){return u?E==u||E.contains(u.nodeType!=1?u.parentNode:u):!1}function gn(E){let u=E.activeElement;for(;u&&u.shadowRoot;)u=u.shadowRoot.activeElement;return u}function Si(E,u){if(!u.anchorNode)return!1;try{return vn(E,u.anchorNode)}catch(f){return!1}}function Ii(E){return E.nodeType==3?qs(E,0,E.nodeValue.length).getClientRects():E.nodeType==1?E.getClientRects():[]}function Un(E,u,f,b){return f?mr(E,u,f,b,-1)||mr(E,u,f,b,1):!1}function $t(E){for(var u=0;;u++)if(E=E.previousSibling,!E)return u}function qt(E){return E.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(E.nodeName)}function mr(E,u,f,b,T){for(;;){if(E==f&&u==b)return!0;if(u==(T<0?0:ss(E))){if(E.nodeName=="DIV")return!1;let B=E.parentNode;if(!B||B.nodeType!=1)return!1;u=$t(E)+(T<0?0:1),E=B}else if(E.nodeType==1){if(E=E.childNodes[u+(T<0?-1:0)],E.nodeType==1&&E.contentEditable=="false")return!1;u=T<0?ss(E):0}else return!1}}function ss(E){return E.nodeType==3?E.nodeValue.length:E.childNodes.length}function Dr(E,u){let f=u?E.left:E.right;return{left:f,right:f,top:E.top,bottom:E.bottom}}function zs(E){let u=E.visualViewport;return u?{left:0,right:u.width,top:0,bottom:u.height}:{left:0,right:E.innerWidth,top:0,bottom:E.innerHeight}}function pi(E,u){let f=u.width/E.offsetWidth,b=u.height/E.offsetHeight;return(f>.995&&f<1.005||!isFinite(f)||Math.abs(u.width-E.offsetWidth)<1)&&(f=1),(b>.995&&b<1.005||!isFinite(b)||Math.abs(u.height-E.offsetHeight)<1)&&(b=1),{scaleX:f,scaleY:b}}function vs(E,u,f,b,T,B,U,ie){let ce=E.ownerDocument,_e=ce.defaultView||window;for(let Oe=E,lt=!1;Oe&&!lt;)if(Oe.nodeType==1){let gt,wt=Oe==ce.body,rn=1,Cn=1;if(wt)gt=zs(_e);else{if(/^(fixed|sticky)$/.test(getComputedStyle(Oe).position)&&(lt=!0),Oe.scrollHeight<=Oe.clientHeight&&Oe.scrollWidth<=Oe.clientWidth){Oe=Oe.assignedSlot||Oe.parentNode;continue}let Rr=Oe.getBoundingClientRect();({scaleX:rn,scaleY:Cn}=pi(Oe,Rr)),gt={left:Rr.left,right:Rr.left+Oe.clientWidth*rn,top:Rr.top,bottom:Rr.top+Oe.clientHeight*Cn}}let un=0,Hn=0;if(T=="nearest")u.top<gt.top?(Hn=-(gt.top-u.top+U),f>0&&u.bottom>gt.bottom+Hn&&(Hn=u.bottom-gt.bottom+Hn+U)):u.bottom>gt.bottom&&(Hn=u.bottom-gt.bottom+U,f<0&&u.top-Hn<gt.top&&(Hn=-(gt.top+Hn-u.top+U)));else{let Rr=u.bottom-u.top,Fs=gt.bottom-gt.top;Hn=(T=="center"&&Rr<=Fs?u.top+Rr/2-Fs/2:T=="start"||T=="center"&&f<0?u.top-U:u.bottom-Fs+U)-gt.top}if(b=="nearest"?u.left<gt.left?(un=-(gt.left-u.left+B),f>0&&u.right>gt.right+un&&(un=u.right-gt.right+un+B)):u.right>gt.right&&(un=u.right-gt.right+B,f<0&&u.left<gt.left+un&&(un=-(gt.left+un-u.left+B))):un=(b=="center"?u.left+(u.right-u.left)/2-(gt.right-gt.left)/2:b=="start"==ie?u.left-B:u.right-(gt.right-gt.left)+B)-gt.left,un||Hn)if(wt)_e.scrollBy(un,Hn);else{let Rr=0,Fs=0;if(Hn){let Vr=Oe.scrollTop;Oe.scrollTop+=Hn/Cn,Fs=(Oe.scrollTop-Vr)*Cn}if(un){let Vr=Oe.scrollLeft;Oe.scrollLeft+=un/rn,Rr=(Oe.scrollLeft-Vr)*rn}u={left:u.left-Rr,top:u.top-Fs,right:u.right-Rr,bottom:u.bottom-Fs},Rr&&Math.abs(Rr-un)<1&&(b="nearest"),Fs&&Math.abs(Fs-Hn)<1&&(T="nearest")}if(wt)break;Oe=Oe.assignedSlot||Oe.parentNode}else if(Oe.nodeType==11)Oe=Oe.host;else break}function uo(E){let u=E.ownerDocument;for(let f=E.parentNode;f&&f!=u.body;)if(f.nodeType==1){if(f.scrollHeight>f.clientHeight||f.scrollWidth>f.clientWidth)return f;f=f.assignedSlot||f.parentNode}else if(f.nodeType==11)f=f.host;else break;return null}class cs{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(u){return this.anchorNode==u.anchorNode&&this.anchorOffset==u.anchorOffset&&this.focusNode==u.focusNode&&this.focusOffset==u.focusOffset}setRange(u){let{anchorNode:f,focusNode:b}=u;this.set(f,Math.min(u.anchorOffset,f?ss(f):0),b,Math.min(u.focusOffset,b?ss(b):0))}set(u,f,b,T){this.anchorNode=u,this.anchorOffset=f,this.focusNode=b,this.focusOffset=T}}let wr=null;function jr(E){if(E.setActive)return E.setActive();if(wr)return E.focus(wr);let u=[];for(let f=E;f&&(u.push(f,f.scrollTop,f.scrollLeft),f!=f.ownerDocument);f=f.parentNode);if(E.focus(wr==null?{get preventScroll(){return wr={preventScroll:!0},!0}}:void 0),!wr){wr=!1;for(let f=0;f<u.length;){let b=u[f++],T=u[f++],B=u[f++];b.scrollTop!=T&&(b.scrollTop=T),b.scrollLeft!=B&&(b.scrollLeft=B)}}}let vr;function qs(E,u,f=u){let b=vr||(vr=document.createRange());return b.setEnd(E,f),b.setStart(E,u),b}function Is(E,u,f,b){let T={key:u,code:u,keyCode:f,which:f,cancelable:!0};b&&({altKey:T.altKey,ctrlKey:T.ctrlKey,shiftKey:T.shiftKey,metaKey:T.metaKey}=b);let B=new KeyboardEvent("keydown",T);B.synthetic=!0,E.dispatchEvent(B);let U=new KeyboardEvent("keyup",T);return U.synthetic=!0,E.dispatchEvent(U),B.defaultPrevented||U.defaultPrevented}function ci(E){for(;E;){if(E&&(E.nodeType==9||E.nodeType==11&&E.host))return E;E=E.assignedSlot||E.parentNode}return null}function le(E){for(;E.attributes.length;)E.removeAttributeNode(E.attributes[0])}function $e(E,u){let f=u.focusNode,b=u.focusOffset;if(!f||u.anchorNode!=f||u.anchorOffset!=b)return!1;for(b=Math.min(b,ss(f));;)if(b){if(f.nodeType!=1)return!1;let T=f.childNodes[b-1];T.contentEditable=="false"?b--:(f=T,b=ss(f))}else{if(f==E)return!0;b=$t(f),f=f.parentNode}}function ze(E){return E.scrollTop>Math.max(1,E.scrollHeight-E.clientHeight-4)}function ee(E,u){for(let f=E,b=u;;){if(f.nodeType==3&&b>0)return{node:f,offset:b};if(f.nodeType==1&&b>0){if(f.contentEditable=="false")return null;f=f.childNodes[b-1],b=ss(f)}else if(f.parentNode&&!qt(f))b=$t(f),f=f.parentNode;else return null}}function Ze(E,u){for(let f=E,b=u;;){if(f.nodeType==3&&b<f.nodeValue.length)return{node:f,offset:b};if(f.nodeType==1&&b<f.childNodes.length){if(f.contentEditable=="false")return null;f=f.childNodes[b],b=0}else if(f.parentNode&&!qt(f))b=$t(f)+1,f=f.parentNode;else return null}}class Ie{constructor(u,f,b=!0){this.node=u,this.offset=f,this.precise=b}static before(u,f){return new Ie(u.parentNode,$t(u),f)}static after(u,f){return new Ie(u.parentNode,$t(u)+1,f)}}const Xe=[];class St{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(u){let f=this.posAtStart;for(let b of this.children){if(b==u)return f;f+=b.length+b.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(u){return this.posBefore(u)+u.length}sync(u,f){if(this.flags&2){let b=this.dom,T=null,B;for(let U of this.children){if(U.flags&7){if(!U.dom&&(B=T?T.nextSibling:b.firstChild)){let ie=St.get(B);(!ie||!ie.parent&&ie.canReuseDOM(U))&&U.reuseDOM(B)}U.sync(u,f),U.flags&=-8}if(B=T?T.nextSibling:b.firstChild,f&&!f.written&&f.node==b&&B!=U.dom&&(f.written=!0),U.dom.parentNode==b)for(;B&&B!=U.dom;)B=Tt(B);else b.insertBefore(U.dom,B);T=U.dom}for(B=T?T.nextSibling:b.firstChild,B&&f&&f.node==b&&(f.written=!0);B;)B=Tt(B)}else if(this.flags&1)for(let b of this.children)b.flags&7&&(b.sync(u,f),b.flags&=-8)}reuseDOM(u){}localPosFromDOM(u,f){let b;if(u==this.dom)b=this.dom.childNodes[f];else{let T=ss(u)==0?0:f==0?-1:1;for(;;){let B=u.parentNode;if(B==this.dom)break;T==0&&B.firstChild!=B.lastChild&&(u==B.firstChild?T=-1:T=1),u=B}T<0?b=u:b=u.nextSibling}if(b==this.dom.firstChild)return 0;for(;b&&!St.get(b);)b=b.nextSibling;if(!b)return this.length;for(let T=0,B=0;;T++){let U=this.children[T];if(U.dom==b)return B;B+=U.length+U.breakAfter}}domBoundsAround(u,f,b=0){let T=-1,B=-1,U=-1,ie=-1;for(let ce=0,_e=b,Oe=b;ce<this.children.length;ce++){let lt=this.children[ce],gt=_e+lt.length;if(_e<u&&gt>f)return lt.domBoundsAround(u,f,_e);if(gt>=u&&T==-1&&(T=ce,B=_e),_e>f&&lt.dom.parentNode==this.dom){U=ce,ie=Oe;break}Oe=gt,_e=gt+lt.breakAfter}return{from:B,to:ie<0?b+this.length:ie,startDOM:(T?this.children[T-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:U<this.children.length&&U>=0?this.children[U].dom:null}}markDirty(u=!1){this.flags|=2,this.markParentsDirty(u)}markParentsDirty(u){for(let f=this.parent;f;f=f.parent){if(u&&(f.flags|=2),f.flags&1)return;f.flags|=1,u=!1}}setParent(u){this.parent!=u&&(this.parent=u,this.flags&7&&this.markParentsDirty(!0))}setDOM(u){this.dom!=u&&(this.dom&&(this.dom.cmView=null),this.dom=u,u.cmView=this)}get rootView(){for(let u=this;;){let f=u.parent;if(!f)return u;u=f}}replaceChildren(u,f,b=Xe){this.markDirty();for(let T=u;T<f;T++){let B=this.children[T];B.parent==this&&b.indexOf(B)<0&&B.destroy()}this.children.splice(u,f-u,...b);for(let T=0;T<b.length;T++)b[T].setParent(this)}ignoreMutation(u){return!1}ignoreEvent(u){return!1}childCursor(u=this.length){return new Bn(this.children,u,this.children.length)}childPos(u,f=1){return this.childCursor().findPos(u,f)}toString(){let u=this.constructor.name.replace("View","");return u+(this.children.length?"("+this.children.join()+")":this.length?"["+(u=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(u){return u.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(u,f,b,T,B,U){return!1}become(u){return!1}canReuseDOM(u){return u.constructor==this.constructor&&!((this.flags|u.flags)&8)}getSide(){return 0}destroy(){for(let u of this.children)u.parent==this&&u.destroy();this.parent=null}}St.prototype.breakAfter=0;function Tt(E){let u=E.nextSibling;return E.parentNode.removeChild(E),u}class Bn{constructor(u,f,b){this.children=u,this.pos=f,this.i=b,this.off=0}findPos(u,f=1){for(;;){if(u>this.pos||u==this.pos&&(f>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=u-this.pos,this;let b=this.children[--this.i];this.pos-=b.length+b.breakAfter}}}function Fn(E,u,f,b,T,B,U,ie,ce){let{children:_e}=E,Oe=_e.length?_e[u]:null,lt=B.length?B[B.length-1]:null,gt=lt?lt.breakAfter:U;if(!(u==b&&Oe&&!U&&!gt&&B.length<2&&Oe.merge(f,T,B.length?lt:null,f==0,ie,ce))){if(b<_e.length){let wt=_e[b];wt&&(T<wt.length||wt.breakAfter&&(lt!=null&&lt.breakAfter))?(u==b&&(wt=wt.split(T),T=0),!gt&&lt&&wt.merge(0,T,lt,!0,0,ce)?B[B.length-1]=wt:((T||wt.children.length&&!wt.children[0].length)&&wt.merge(0,T,null,!1,0,ce),B.push(wt))):wt!=null&&wt.breakAfter&&(lt?lt.breakAfter=1:U=1),b++}for(Oe&&(Oe.breakAfter=U,f>0&&(!U&&B.length&&Oe.merge(f,Oe.length,B[0],!1,ie,0)?Oe.breakAfter=B.shift().breakAfter:(f<Oe.length||Oe.children.length&&Oe.children[Oe.children.length-1].length==0)&&Oe.merge(f,Oe.length,null,!1,ie,0),u++));u<b&&B.length;)if(_e[b-1].become(B[B.length-1]))b--,B.pop(),ce=B.length?0:ie;else if(_e[u].become(B[0]))u++,B.shift(),ie=B.length?0:ce;else break;!B.length&&u&&b<_e.length&&!_e[u-1].breakAfter&&_e[b].merge(0,0,_e[u-1],!1,ie,ce)&&u--,(u<b||B.length)&&E.replaceChildren(u,b,B)}}function Qn(E,u,f,b,T,B){let U=E.childCursor(),{i:ie,off:ce}=U.findPos(f,1),{i:_e,off:Oe}=U.findPos(u,-1),lt=u-f;for(let gt of b)lt+=gt.length;E.length+=lt,Fn(E,_e,Oe,ie,ce,b,0,T,B)}let hi=typeof navigator!="undefined"?navigator:{userAgent:"",vendor:"",platform:""},Ki=typeof document!="undefined"?document:{documentElement:{style:{}}};const Vn=/Edge\/(\d+)/.exec(hi.userAgent),fs=/MSIE \d/.test(hi.userAgent),wo=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(hi.userAgent),Ao=!!(fs||wo||Vn),en=!Ao&&/gecko\/(\d+)/i.test(hi.userAgent),fe=!Ao&&/Chrome\/(\d+)/.exec(hi.userAgent),Fe="webkitFontSmoothing"in Ki.documentElement.style,Ye=!Ao&&/Apple Computer/.test(hi.vendor),Ve=Ye&&(/Mobile\/\w+/.test(hi.userAgent)||hi.maxTouchPoints>2);var Ge={mac:Ve||/Mac/.test(hi.platform),windows:/Win/.test(hi.platform),linux:/Linux|X11/.test(hi.platform),ie:Ao,ie_version:fs?Ki.documentMode||6:wo?+wo[1]:Vn?+Vn[1]:0,gecko:en,gecko_version:en?+(/Firefox\/(\d+)/.exec(hi.userAgent)||[0,0])[1]:0,chrome:!!fe,chrome_version:fe?+fe[1]:0,ios:Ve,android:/Android\b/.test(hi.userAgent),webkit:Fe,safari:Ye,webkit_version:Fe?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:Ki.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const Ut=256;class sn extends St{constructor(u){super(),this.text=u}get length(){return this.text.length}createDOM(u){this.setDOM(u||document.createTextNode(this.text))}sync(u,f){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(f&&f.node==this.dom&&(f.written=!0),this.dom.nodeValue=this.text)}reuseDOM(u){u.nodeType==3&&this.createDOM(u)}merge(u,f,b){return this.flags&8||b&&(!(b instanceof sn)||this.length-(f-u)+b.length>Ut||b.flags&8)?!1:(this.text=this.text.slice(0,u)+(b?b.text:"")+this.text.slice(f),this.markDirty(),!0)}split(u){let f=new sn(this.text.slice(u));return this.text=this.text.slice(0,u),this.markDirty(),f.flags|=this.flags&8,f}localPosFromDOM(u,f){return u==this.dom?f:f?this.text.length:0}domAtPos(u){return new Ie(this.dom,u)}domBoundsAround(u,f,b){return{from:b,to:b+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(u,f){return Hi(this.dom,u,f)}}class _n extends St{constructor(u,f=[],b=0){super(),this.mark=u,this.children=f,this.length=b;for(let T of f)T.setParent(this)}setAttrs(u){if(le(u),this.mark.class&&(u.className=this.mark.class),this.mark.attrs)for(let f in this.mark.attrs)u.setAttribute(f,this.mark.attrs[f]);return u}canReuseDOM(u){return super.canReuseDOM(u)&&!((this.flags|u.flags)&8)}reuseDOM(u){u.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(u),this.flags|=6)}sync(u,f){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(u,f)}merge(u,f,b,T,B,U){return b&&(!(b instanceof _n&&b.mark.eq(this.mark))||u&&B<=0||f<this.length&&U<=0)?!1:(Qn(this,u,f,b?b.children.slice():[],B-1,U-1),this.markDirty(),!0)}split(u){let f=[],b=0,T=-1,B=0;for(let ie of this.children){let ce=b+ie.length;ce>u&&f.push(b<u?ie.split(u-b):ie),T<0&&b>=u&&(T=B),b=ce,B++}let U=this.length-u;return this.length=u,T>-1&&(this.children.length=T,this.markDirty()),new _n(this.mark,f,U)}domAtPos(u){return ar(this,u)}coordsAt(u,f){return Ui(this,u,f)}}function Hi(E,u,f){let b=E.nodeValue.length;u>b&&(u=b);let T=u,B=u,U=0;u==0&&f<0||u==b&&f>=0?Ge.chrome||Ge.gecko||(u?(T--,U=1):B<b&&(B++,U=-1)):f<0?T--:B<b&&B++;let ie=qs(E,T,B).getClientRects();if(!ie.length)return null;let ce=ie[(U?U<0:f>=0)?0:ie.length-1];return Ge.safari&&!U&&ce.width==0&&(ce=Array.prototype.find.call(ie,_e=>_e.width)||ce),U?Dr(ce,U<0):ce||null}class Wn extends St{static create(u,f,b){return new Wn(u,f,b)}constructor(u,f,b){super(),this.widget=u,this.length=f,this.side=b,this.prevWidget=null}split(u){let f=Wn.create(this.widget,this.length-u,this.side);return this.length-=u,f}sync(u){(!this.dom||!this.widget.updateDOM(this.dom,u))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(u)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(u,f,b,T,B,U){return b&&(!(b instanceof Wn)||!this.widget.compare(b.widget)||u>0&&B<=0||f<this.length&&U<=0)?!1:(this.length=u+(b?b.length:0)+(this.length-f),!0)}become(u){return u instanceof Wn&&u.side==this.side&&this.widget.constructor==u.widget.constructor?(this.widget.compare(u.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=u.widget,this.length=u.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(u){return this.widget.ignoreEvent(u)}get overrideDOMText(){if(this.length==0)return xe.xv.empty;let u=this;for(;u.parent;)u=u.parent;let{view:f}=u,b=f&&f.state.doc,T=this.posAtStart;return b?b.slice(T,T+this.length):xe.xv.empty}domAtPos(u){return(this.length?u==0:this.side>0)?Ie.before(this.dom):Ie.after(this.dom,u==this.length)}domBoundsAround(){return null}coordsAt(u,f){let b=this.widget.coordsAt(this.dom,u,f);if(b)return b;let T=this.dom.getClientRects(),B=null;if(!T.length)return null;let U=this.side?this.side<0:u>0;for(let ie=U?T.length-1:0;B=T[ie],!(u>0?ie==0:ie==T.length-1||B.top<B.bottom);ie+=U?-1:1);return Dr(B,!U)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class xi extends St{constructor(u){super(),this.side=u}get length(){return 0}merge(){return!1}become(u){return u instanceof xi&&u.side==this.side}split(){return new xi(this.side)}sync(){if(!this.dom){let u=document.createElement("img");u.className="cm-widgetBuffer",u.setAttribute("aria-hidden","true"),this.setDOM(u)}}getSide(){return this.side}domAtPos(u){return this.side>0?Ie.before(this.dom):Ie.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(u){return this.dom.getBoundingClientRect()}get overrideDOMText(){return xe.xv.empty}get isHidden(){return!0}}sn.prototype.children=Wn.prototype.children=xi.prototype.children=Xe;function ar(E,u){let f=E.dom,{children:b}=E,T=0;for(let B=0;T<b.length;T++){let U=b[T],ie=B+U.length;if(!(ie==B&&U.getSide()<=0)){if(u>B&&u<ie&&U.dom.parentNode==f)return U.domAtPos(u-B);if(u<=B)break;B=ie}}for(let B=T;B>0;B--){let U=b[B-1];if(U.dom.parentNode==f)return U.domAtPos(U.length)}for(let B=T;B<b.length;B++){let U=b[B];if(U.dom.parentNode==f)return U.domAtPos(0)}return new Ie(f,0)}function di(E,u,f){let b,{children:T}=E;f>0&&u instanceof _n&&T.length&&(b=T[T.length-1])instanceof _n&&b.mark.eq(u.mark)?di(b,u.children[0],f-1):(T.push(u),u.setParent(E)),E.length+=u.length}function Ui(E,u,f){let b=null,T=-1,B=null,U=-1;function ie(_e,Oe){for(let lt=0,gt=0;lt<_e.children.length&&gt<=Oe;lt++){let wt=_e.children[lt],rn=gt+wt.length;rn>=Oe&&(wt.children.length?ie(wt,Oe-gt):(!B||B.isHidden&&f>0)&&(rn>Oe||gt==rn&&wt.getSide()>0)?(B=wt,U=Oe-gt):(gt<Oe||gt==rn&&wt.getSide()<0&&!wt.isHidden)&&(b=wt,T=Oe-gt)),gt=rn}}ie(E,u);let ce=(f<0?b:B)||b||B;return ce?ce.coordsAt(Math.max(0,ce==b?T:U),f):hr(E)}function hr(E){let u=E.dom.lastChild;if(!u)return E.dom.getBoundingClientRect();let f=Ii(u);return f[f.length-1]||null}function bi(E,u){for(let f in E)f=="class"&&u.class?u.class+=" "+E.class:f=="style"&&u.style?u.style+=";"+E.style:u[f]=E[f];return u}const Gr=Object.create(null);function Zi(E,u,f){if(E==u)return!0;E||(E=Gr),u||(u=Gr);let b=Object.keys(E),T=Object.keys(u);if(b.length-(f&&b.indexOf(f)>-1?1:0)!=T.length-(f&&T.indexOf(f)>-1?1:0))return!1;for(let B of b)if(B!=f&&(T.indexOf(B)==-1||E[B]!==u[B]))return!1;return!0}function xr(E,u,f){let b=!1;if(u)for(let T in u)f&&T in f||(b=!0,T=="style"?E.style.cssText="":E.removeAttribute(T));if(f)for(let T in f)u&&u[T]==f[T]||(b=!0,T=="style"?E.style.cssText=f[T]:E.setAttribute(T,f[T]));return b}function ms(E){let u=Object.create(null);for(let f=0;f<E.attributes.length;f++){let b=E.attributes[f];u[b.name]=b.value}return u}class Ni extends St{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(u,f,b,T,B,U){if(b){if(!(b instanceof Ni))return!1;this.dom||b.transferDOM(this)}return T&&this.setDeco(b?b.attrs:null),Qn(this,u,f,b?b.children.slice():[],B,U),!0}split(u){let f=new Ni;if(f.breakAfter=this.breakAfter,this.length==0)return f;let{i:b,off:T}=this.childPos(u);T&&(f.append(this.children[b].split(T),0),this.children[b].merge(T,this.children[b].length,null,!1,0,0),b++);for(let B=b;B<this.children.length;B++)f.append(this.children[B],0);for(;b>0&&this.children[b-1].length==0;)this.children[--b].destroy();return this.children.length=b,this.markDirty(),this.length=u,f}transferDOM(u){this.dom&&(this.markDirty(),u.setDOM(this.dom),u.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(u){Zi(this.attrs,u)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=u)}append(u,f){di(this,u,f)}addLineDeco(u){let f=u.spec.attributes,b=u.spec.class;f&&(this.attrs=bi(f,this.attrs||{})),b&&(this.attrs=bi({class:b},this.attrs||{}))}domAtPos(u){return ar(this,u)}reuseDOM(u){u.nodeName=="DIV"&&(this.setDOM(u),this.flags|=6)}sync(u,f){var b;this.dom?this.flags&4&&(le(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(xr(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(u,f);let T=this.dom.lastChild;for(;T&&St.get(T)instanceof _n;)T=T.lastChild;if(!T||!this.length||T.nodeName!="BR"&&((b=St.get(T))===null||b===void 0?void 0:b.isEditable)==!1&&(!Ge.ios||!this.children.some(B=>B instanceof sn))){let B=document.createElement("BR");B.cmIgnore=!0,this.dom.appendChild(B)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let u=0,f;for(let b of this.children){if(!(b instanceof sn)||/[^ -~]/.test(b.text))return null;let T=Ii(b.dom);if(T.length!=1)return null;u+=T[0].width,f=T[0].height}return u?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:u/this.length,textHeight:f}:null}coordsAt(u,f){let b=Ui(this,u,f);if(!this.children.length&&b&&this.parent){let{heightOracle:T}=this.parent.view.viewState,B=b.bottom-b.top;if(Math.abs(B-T.lineHeight)<2&&T.textHeight<B){let U=(B-T.textHeight)/2;return{top:b.top+U,bottom:b.bottom-U,left:b.left,right:b.left}}}return b}become(u){return!1}covers(){return!0}static find(u,f){for(let b=0,T=0;b<u.children.length;b++){let B=u.children[b],U=T+B.length;if(U>=f){if(B instanceof Ni)return B;if(U>f)break}T=U+B.breakAfter}return null}}class qr extends St{constructor(u,f,b){super(),this.widget=u,this.length=f,this.deco=b,this.breakAfter=0,this.prevWidget=null}merge(u,f,b,T,B,U){return b&&(!(b instanceof qr)||!this.widget.compare(b.widget)||u>0&&B<=0||f<this.length&&U<=0)?!1:(this.length=u+(b?b.length:0)+(this.length-f),!0)}domAtPos(u){return u==0?Ie.before(this.dom):Ie.after(this.dom,u==this.length)}split(u){let f=this.length-u;this.length=u;let b=new qr(this.widget,f,this.deco);return b.breakAfter=this.breakAfter,b}get children(){return Xe}sync(u){(!this.dom||!this.widget.updateDOM(this.dom,u))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(u)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):xe.xv.empty}domBoundsAround(){return null}become(u){return u instanceof qr&&u.widget.constructor==this.widget.constructor?(u.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=u.widget,this.length=u.length,this.deco=u.deco,this.breakAfter=u.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(u){return this.widget.ignoreEvent(u)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(u,f){return this.widget.coordsAt(this.dom,u,f)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(u){let{startSide:f,endSide:b}=this.deco;return f==b?!1:u<0?f<0:b>0}}class Di{eq(u){return!1}updateDOM(u,f){return!1}compare(u){return this==u||this.constructor==u.constructor&&this.eq(u)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(u){return!0}coordsAt(u,f,b){return null}get isHidden(){return!1}get editable(){return!1}destroy(u){}}var Sr=function(E){return E[E.Text=0]="Text",E[E.WidgetBefore=1]="WidgetBefore",E[E.WidgetAfter=2]="WidgetAfter",E[E.WidgetRange=3]="WidgetRange",E}(Sr||(Sr={}));class Qi extends xe.uU{constructor(u,f,b,T){super(),this.startSide=u,this.endSide=f,this.widget=b,this.spec=T}get heightRelevant(){return!1}static mark(u){return new _i(u)}static widget(u){let f=Math.max(-1e4,Math.min(1e4,u.side||0)),b=!!u.block;return f+=b&&!u.inlineOrder?f>0?3e8:-4e8:f>0?1e8:-1e8,new Zn(u,f,f,b,u.widget||null,!1)}static replace(u){let f=!!u.block,b,T;if(u.isBlockGap)b=-5e8,T=4e8;else{let{start:B,end:U}=tr(u,f);b=(B?f?-3e8:-1:5e8)-1,T=(U?f?2e8:1:-6e8)+1}return new Zn(u,b,T,f,u.widget||null,!0)}static line(u){return new gr(u)}static set(u,f=!1){return xe.Xs.of(u,f)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Qi.none=xe.Xs.empty;class _i extends Qi{constructor(u){let{start:f,end:b}=tr(u);super(f?-1:5e8,b?1:-6e8,null,u),this.tagName=u.tagName||"span",this.class=u.class||"",this.attrs=u.attributes||null}eq(u){var f,b;return this==u||u instanceof _i&&this.tagName==u.tagName&&(this.class||((f=this.attrs)===null||f===void 0?void 0:f.class))==(u.class||((b=u.attrs)===null||b===void 0?void 0:b.class))&&Zi(this.attrs,u.attrs,"class")}range(u,f=u){if(u>=f)throw new RangeError("Mark decorations may not be empty");return super.range(u,f)}}_i.prototype.point=!1;class gr extends Qi{constructor(u){super(-2e8,-2e8,null,u)}eq(u){return u instanceof gr&&this.spec.class==u.spec.class&&Zi(this.spec.attributes,u.spec.attributes)}range(u,f=u){if(f!=u)throw new RangeError("Line decoration ranges must be zero-length");return super.range(u,f)}}gr.prototype.mapMode=xe.gc.TrackBefore,gr.prototype.point=!0;class Zn extends Qi{constructor(u,f,b,T,B,U){super(f,b,B,u),this.block=T,this.isReplace=U,this.mapMode=T?f<=0?xe.gc.TrackBefore:xe.gc.TrackAfter:xe.gc.TrackDel}get type(){return this.startSide!=this.endSide?Sr.WidgetRange:this.startSide<=0?Sr.WidgetBefore:Sr.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(u){return u instanceof Zn&&bn(this.widget,u.widget)&&this.block==u.block&&this.startSide==u.startSide&&this.endSide==u.endSide}range(u,f=u){if(this.isReplace&&(u>f||u==f&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&f!=u)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(u,f)}}Zn.prototype.point=!0;function tr(E,u=!1){let{inclusiveStart:f,inclusiveEnd:b}=E;return f==null&&(f=E.inclusive),b==null&&(b=E.inclusive),{start:f!=null?f:u,end:b!=null?b:u}}function bn(E,u){return E==u||!!(E&&u&&E.compare(u))}function Wr(E,u,f,b=0){let T=f.length-1;T>=0&&f[T]+b>=E?f[T]=Math.max(f[T],u):f.push(E,u)}class Js{constructor(u,f,b,T){this.doc=u,this.pos=f,this.end=b,this.disallowBlockEffectsFor=T,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=u.iter(),this.skip=f}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let u=this.content[this.content.length-1];return!(u.breakAfter||u instanceof qr&&u.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new Ni),this.atCursorPos=!0),this.curLine}flushBuffer(u=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Hr(new xi(-1),u),u.length),this.pendingBuffer=0)}addBlockWidget(u){this.flushBuffer(),this.curLine=null,this.content.push(u)}finish(u){this.pendingBuffer&&u<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(u&&this.content.length&&this.content[this.content.length-1]instanceof qr)&&this.getLine()}buildText(u,f,b){for(;u>0;){if(this.textOff==this.text.length){let{value:B,lineBreak:U,done:ie}=this.cursor.next(this.skip);if(this.skip=0,ie)throw new Error("Ran out of text content when drawing inline views");if(U){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,u--;continue}else this.text=B,this.textOff=0}let T=Math.min(this.text.length-this.textOff,u,512);this.flushBuffer(f.slice(f.length-b)),this.getLine().append(Hr(new sn(this.text.slice(this.textOff,this.textOff+T)),f),b),this.atCursorPos=!0,this.textOff+=T,u-=T,b=0}}span(u,f,b,T){this.buildText(f-u,b,T),this.pos=f,this.openStart<0&&(this.openStart=T)}point(u,f,b,T,B,U){if(this.disallowBlockEffectsFor[U]&&b instanceof Zn){if(b.block)throw new RangeError("Block decorations may not be specified via plugins");if(f>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let ie=f-u;if(b instanceof Zn)if(b.block)b.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new qr(b.widget||Lr.block,ie,b));else{let ce=Wn.create(b.widget||Lr.inline,ie,ie?0:b.startSide),_e=this.atCursorPos&&!ce.isEditable&&B<=T.length&&(u<f||b.startSide>0),Oe=!ce.isEditable&&(u<f||B>T.length||b.startSide<=0),lt=this.getLine();this.pendingBuffer==2&&!_e&&!ce.isEditable&&(this.pendingBuffer=0),this.flushBuffer(T),_e&&(lt.append(Hr(new xi(1),T),B),B=T.length+Math.max(0,B-T.length)),lt.append(Hr(ce,T),B),this.atCursorPos=Oe,this.pendingBuffer=Oe?u<f||B>T.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=T.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(b);ie&&(this.textOff+ie<=this.text.length?this.textOff+=ie:(this.skip+=ie-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=f),this.openStart<0&&(this.openStart=B)}static build(u,f,b,T,B){let U=new Js(u,f,b,B);return U.openEnd=xe.Xs.spans(T,f,b,U),U.openStart<0&&(U.openStart=U.openEnd),U.finish(U.openEnd),U}}function Hr(E,u){for(let f of u)E=new _n(f,[E],E.length);return E}class Lr extends Di{constructor(u){super(),this.tag=u}eq(u){return u.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(u){return u.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Lr.inline=new Lr("span"),Lr.block=new Lr("div");var Pi=function(E){return E[E.LTR=0]="LTR",E[E.RTL=1]="RTL",E}(Pi||(Pi={}));const Qs=Pi.LTR,Pn=Pi.RTL;function Xs(E){let u=[];for(let f=0;f<E.length;f++)u.push(1<<+E[f]);return u}const Ts=Xs("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),Kr=Xs("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),hs=Object.create(null),os=[];for(let E of["()","[]","{}"]){let u=E.charCodeAt(0),f=E.charCodeAt(1);hs[u]=f,hs[f]=-u}function js(E){return E<=247?Ts[E]:1424<=E&&E<=1524?2:1536<=E&&E<=1785?Kr[E-1536]:1774<=E&&E<=2220?4:8192<=E&&E<=8204?256:64336<=E&&E<=65023?4:1}const dr=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Qr{get dir(){return this.level%2?Pn:Qs}constructor(u,f,b){this.from=u,this.to=f,this.level=b}side(u,f){return this.dir==f==u?this.to:this.from}forward(u,f){return u==(this.dir==f)}static find(u,f,b,T){let B=-1;for(let U=0;U<u.length;U++){let ie=u[U];if(ie.from<=f&&ie.to>=f){if(ie.level==b)return U;(B<0||(T!=0?T<0?ie.from<f:ie.to>f:u[B].level>ie.level))&&(B=U)}}if(B<0)throw new RangeError("Index out of range");return B}}function gs(E,u){if(E.length!=u.length)return!1;for(let f=0;f<E.length;f++){let b=E[f],T=u[f];if(b.from!=T.from||b.to!=T.to||b.direction!=T.direction||!gs(b.inner,T.inner))return!1}return!0}const ei=[];function Rs(E,u,f,b,T){for(let B=0;B<=b.length;B++){let U=B?b[B-1].to:u,ie=B<b.length?b[B].from:f,ce=B?256:T;for(let _e=U,Oe=ce,lt=ce;_e<ie;_e++){let gt=js(E.charCodeAt(_e));gt==512?gt=Oe:gt==8&&lt==4&&(gt=16),ei[_e]=gt==4?2:gt,gt&7&&(lt=gt),Oe=gt}for(let _e=U,Oe=ce,lt=ce;_e<ie;_e++){let gt=ei[_e];if(gt==128)_e<ie-1&&Oe==ei[_e+1]&&Oe&24?gt=ei[_e]=Oe:ei[_e]=256;else if(gt==64){let wt=_e+1;for(;wt<ie&&ei[wt]==64;)wt++;let rn=_e&&Oe==8||wt<f&&ei[wt]==8?lt==1?1:8:256;for(let Cn=_e;Cn<wt;Cn++)ei[Cn]=rn;_e=wt-1}else gt==8&&lt==1&&(ei[_e]=1);Oe=gt,gt&7&&(lt=gt)}}}function co(E,u,f,b,T){let B=T==1?2:1;for(let U=0,ie=0,ce=0;U<=b.length;U++){let _e=U?b[U-1].to:u,Oe=U<b.length?b[U].from:f;for(let lt=_e,gt,wt,rn;lt<Oe;lt++)if(wt=hs[gt=E.charCodeAt(lt)])if(wt<0){for(let Cn=ie-3;Cn>=0;Cn-=3)if(os[Cn+1]==-wt){let un=os[Cn+2],Hn=un&2?T:un&4?un&1?B:T:0;Hn&&(ei[lt]=ei[os[Cn]]=Hn),ie=Cn;break}}else{if(os.length==189)break;os[ie++]=lt,os[ie++]=gt,os[ie++]=ce}else if((rn=ei[lt])==2||rn==1){let Cn=rn==T;ce=Cn?0:1;for(let un=ie-3;un>=0;un-=3){let Hn=os[un+2];if(Hn&2)break;if(Cn)os[un+2]|=2;else{if(Hn&4)break;os[un+2]|=4}}}}}function oa(E,u,f,b){for(let T=0,B=b;T<=f.length;T++){let U=T?f[T-1].to:E,ie=T<f.length?f[T].from:u;for(let ce=U;ce<ie;){let _e=ei[ce];if(_e==256){let Oe=ce+1;for(;;)if(Oe==ie){if(T==f.length)break;Oe=f[T++].to,ie=T<f.length?f[T].from:u}else if(ei[Oe]==256)Oe++;else break;let lt=B==1,gt=(Oe<u?ei[Oe]:b)==1,wt=lt==gt?lt?1:2:b;for(let rn=Oe,Cn=T,un=Cn?f[Cn-1].to:E;rn>ce;)rn==un&&(rn=f[--Cn].from,un=Cn?f[Cn-1].to:E),ei[--rn]=wt;ce=Oe}else B=_e,ce++}}}function na(E,u,f,b,T,B,U){let ie=b%2?2:1;if(b%2==T%2)for(let ce=u,_e=0;ce<f;){let Oe=!0,lt=!1;if(_e==B.length||ce<B[_e].from){let Cn=ei[ce];Cn!=ie&&(Oe=!1,lt=Cn==16)}let gt=!Oe&&ie==1?[]:null,wt=Oe?b:b+1,rn=ce;e:for(;;)if(_e<B.length&&rn==B[_e].from){if(lt)break e;let Cn=B[_e];if(!Oe)for(let un=Cn.to,Hn=_e+1;;){if(un==f)break e;if(Hn<B.length&&B[Hn].from==un)un=B[Hn++].to;else{if(ei[un]==ie)break e;break}}if(_e++,gt)gt.push(Cn);else{Cn.from>ce&&U.push(new Qr(ce,Cn.from,wt));let un=Cn.direction==Qs!=!(wt%2);re(E,un?b+1:b,T,Cn.inner,Cn.from,Cn.to,U),ce=Cn.to}rn=Cn.to}else{if(rn==f||(Oe?ei[rn]!=ie:ei[rn]==ie))break;rn++}gt?na(E,ce,rn,b+1,T,gt,U):ce<rn&&U.push(new Qr(ce,rn,wt)),ce=rn}else for(let ce=f,_e=B.length;ce>u;){let Oe=!0,lt=!1;if(!_e||ce>B[_e-1].to){let Cn=ei[ce-1];Cn!=ie&&(Oe=!1,lt=Cn==16)}let gt=!Oe&&ie==1?[]:null,wt=Oe?b:b+1,rn=ce;e:for(;;)if(_e&&rn==B[_e-1].to){if(lt)break e;let Cn=B[--_e];if(!Oe)for(let un=Cn.from,Hn=_e;;){if(un==u)break e;if(Hn&&B[Hn-1].to==un)un=B[--Hn].from;else{if(ei[un-1]==ie)break e;break}}if(gt)gt.push(Cn);else{Cn.to<ce&&U.push(new Qr(Cn.to,ce,wt));let un=Cn.direction==Qs!=!(wt%2);re(E,un?b+1:b,T,Cn.inner,Cn.from,Cn.to,U),ce=Cn.from}rn=Cn.from}else{if(rn==u||(Oe?ei[rn-1]!=ie:ei[rn-1]==ie))break;rn--}gt?na(E,rn,ce,b+1,T,gt,U):rn<ce&&U.push(new Qr(rn,ce,wt)),ce=rn}}function re(E,u,f,b,T,B,U){let ie=u%2?2:1;Rs(E,T,B,b,ie),co(E,T,B,b,ie),oa(T,B,b,ie),na(E,T,B,u,f,b,U)}function P(E,u,f){if(!E)return[new Qr(0,0,u==Pn?1:0)];if(u==Qs&&!f.length&&!dr.test(E))return V(E.length);if(f.length)for(;E.length>ei.length;)ei[ei.length]=256;let b=[],T=u==Qs?0:1;return re(E,T,T,f,0,E.length,b),b}function V(E){return[new Qr(0,E,0)]}let Y="";function te(E,u,f,b,T){var B;let U=b.head-E.from,ie=Qr.find(u,U,(B=b.bidiLevel)!==null&&B!==void 0?B:-1,b.assoc),ce=u[ie],_e=ce.side(T,f);if(U==_e){let gt=ie+=T?1:-1;if(gt<0||gt>=u.length)return null;ce=u[ie=gt],U=ce.side(!T,f),_e=ce.side(T,f)}let Oe=(0,xe.cp)(E.text,U,ce.forward(T,f));(Oe<ce.from||Oe>ce.to)&&(Oe=_e),Y=E.text.slice(Math.min(U,Oe),Math.max(U,Oe));let lt=ie==(T?u.length-1:0)?null:u[ie+(T?1:-1)];return lt&&Oe==_e&&lt.level+(T?0:1)<ce.level?xe.jT.cursor(lt.side(!T,f)+E.from,lt.forward(T,f)?1:-1,lt.level):xe.jT.cursor(Oe+E.from,ce.forward(T,f)?-1:1,ce.level)}function we(E,u,f){for(let b=u;b<f;b++){let T=js(E.charCodeAt(b));if(T==1)return Qs;if(T==2||T==4)return Pn}return Qs}const Ce=xe.r$.define(),We=xe.r$.define(),Dt=xe.r$.define(),jt=xe.r$.define(),xn=xe.r$.define(),Tn=xe.r$.define(),mi=xe.r$.define(),vi=xe.r$.define({combine:E=>E.some(u=>u)}),ws=xe.r$.define({combine:E=>E.some(u=>u)}),ho=xe.r$.define();class pr{constructor(u,f="nearest",b="nearest",T=5,B=5,U=!1){this.range=u,this.y=f,this.x=b,this.yMargin=T,this.xMargin=B,this.isSnapshot=U}map(u){return u.empty?this:new pr(this.range.map(u),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(u){return this.range.to<=u.doc.length?this:new pr(xe.jT.cursor(u.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const Fi=xe.Py.define({map:(E,u)=>E.map(u)});function rt(E,u,f){let b=E.facet(jt);b.length?b[0](u):window.onerror?window.onerror(String(u),f,void 0,void 0,u):f?console.error(f+":",u):console.error(u)}const so=xe.r$.define({combine:E=>E.length?E[0]:!0});let To=0;const Os=xe.r$.define();class ds{constructor(u,f,b,T,B){this.id=u,this.create=f,this.domEventHandlers=b,this.domEventObservers=T,this.extension=B(this)}static define(u,f){const{eventHandlers:b,eventObservers:T,provide:B,decorations:U}=f||{};return new ds(To++,u,b,T,ie=>{let ce=[Os.of(ie)];return U&&ce.push(Mn.of(_e=>{let Oe=_e.plugin(ie);return Oe?U(Oe):Qi.none})),B&&ce.push(B(ie)),ce})}static fromClass(u,f){return ds.define(b=>new u(b),f)}}class Oo{constructor(u){this.spec=u,this.mustUpdate=null,this.value=null}update(u){if(this.value){if(this.mustUpdate){let f=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(f)}catch(b){if(rt(f.state,b,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(T){}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(u)}catch(f){rt(u.state,f,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(u){var f;if(!((f=this.value)===null||f===void 0)&&f.destroy)try{this.value.destroy()}catch(b){rt(u.state,b,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const nr=xe.r$.define(),wi=xe.r$.define(),Mn=xe.r$.define(),ks=xe.r$.define(),jo=xe.r$.define(),Zr=xe.r$.define();function aa(E,u){let f=E.state.facet(Zr);if(!f.length)return f;let b=f.map(B=>B instanceof Function?B(E):B),T=[];return xe.Xs.spans(b,u.from,u.to,{point(){},span(B,U,ie,ce){let _e=B-u.from,Oe=U-u.from,lt=T;for(let gt=ie.length-1;gt>=0;gt--,ce--){let wt=ie[gt].spec.bidiIsolate,rn;if(wt==null&&(wt=we(u.text,_e,Oe)),ce>0&&lt.length&&(rn=lt[lt.length-1]).to==_e&&rn.direction==wt)rn.to=Oe,lt=rn.inner;else{let Cn={from:_e,to:Oe,direction:wt,inner:[]};lt.push(Cn),lt=Cn.inner}}}}),T}const ka=xe.r$.define();function fa(E){let u=0,f=0,b=0,T=0;for(let B of E.state.facet(ka)){let U=B(E);U&&(U.left!=null&&(u=Math.max(u,U.left)),U.right!=null&&(f=Math.max(f,U.right)),U.top!=null&&(b=Math.max(b,U.top)),U.bottom!=null&&(T=Math.max(T,U.bottom)))}return{left:u,right:f,top:b,bottom:T}}const ps=xe.r$.define();class no{constructor(u,f,b,T){this.fromA=u,this.toA=f,this.fromB=b,this.toB=T}join(u){return new no(Math.min(this.fromA,u.fromA),Math.max(this.toA,u.toA),Math.min(this.fromB,u.fromB),Math.max(this.toB,u.toB))}addToSet(u){let f=u.length,b=this;for(;f>0;f--){let T=u[f-1];if(!(T.fromA>b.toA)){if(T.toA<b.fromA)break;b=b.join(T),u.splice(f-1,1)}}return u.splice(f,0,b),u}static extendWithRanges(u,f){if(f.length==0)return u;let b=[];for(let T=0,B=0,U=0,ie=0;;T++){let ce=T==u.length?null:u[T],_e=U-ie,Oe=ce?ce.fromB:1e9;for(;B<f.length&&f[B]<Oe;){let lt=f[B],gt=f[B+1],wt=Math.max(ie,lt),rn=Math.min(Oe,gt);if(wt<=rn&&new no(wt+_e,rn+_e,wt,rn).addToSet(b),gt>Oe)break;B+=2}if(!ce)return b;new no(ce.fromA,ce.toA,ce.fromB,ce.toB).addToSet(b),U=ce.toA,ie=ce.toB}}}class Eo{constructor(u,f,b){this.view=u,this.state=f,this.transactions=b,this.flags=0,this.startState=u.state,this.changes=xe.as.empty(this.startState.doc.length);for(let B of b)this.changes=this.changes.compose(B.changes);let T=[];this.changes.iterChangedRanges((B,U,ie,ce)=>T.push(new no(B,U,ie,ce))),this.changedRanges=T}static create(u,f,b){return new Eo(u,f,b)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(u=>u.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class go extends St{get length(){return this.view.state.doc.length}constructor(u){super(),this.view=u,this.decorations=[],this.dynamicDecorationMap=[],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(u.contentDOM),this.children=[new Ni],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new no(0,0,0,u.state.doc.length)],0,null)}update(u){var f;let b=u.changedRanges;this.minWidth>0&&b.length&&(b.every(({fromA:_e,toA:Oe})=>Oe<this.minWidthFrom||_e>this.minWidthTo)?(this.minWidthFrom=u.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=u.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0);let T=-1;this.view.inputState.composing>=0&&(!((f=this.domChanged)===null||f===void 0)&&f.newSel?T=this.domChanged.newSel.head:!Xt(u.changes,this.hasComposition)&&!u.selectionSet&&(T=u.state.selection.main.head));let B=T>-1?pe(this.view,u.changes,T):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:_e,to:Oe}=this.hasComposition;b=new no(_e,Oe,u.changes.mapPos(_e,-1),u.changes.mapPos(Oe,1)).addToSet(b.slice())}this.hasComposition=B?{from:B.range.fromB,to:B.range.toB}:null,(Ge.ie||Ge.chrome)&&!B&&u&&u.state.doc.lines!=u.startState.doc.lines&&(this.forceSelection=!0);let U=this.decorations,ie=this.updateDeco(),ce=ut(U,ie,u.changes);return b=no.extendWithRanges(b,ce),!(this.flags&7)&&b.length==0?!1:(this.updateInner(b,u.startState.doc.length,B),u.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(u,f,b){this.view.viewState.mustMeasureContent=!0,this.updateChildren(u,f,b);let{observer:T}=this.view;T.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let U=Ge.chrome||Ge.ios?{node:T.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,U),this.flags&=-8,U&&(U.written||T.selectionRange.focusNode!=U.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(U=>U.flags&=-9);let B=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let U of this.children)U instanceof qr&&U.widget instanceof Ae&&B.push(U.dom);T.updateGaps(B)}updateChildren(u,f,b){let T=b?b.range.addToSet(u.slice()):u,B=this.childCursor(f);for(let U=T.length-1;;U--){let ie=U>=0?T[U]:null;if(!ie)break;let{fromA:ce,toA:_e,fromB:Oe,toB:lt}=ie,gt,wt,rn,Cn;if(b&&b.range.fromB<lt&&b.range.toB>Oe){let Vr=Js.build(this.view.state.doc,Oe,b.range.fromB,this.decorations,this.dynamicDecorationMap),Ds=Js.build(this.view.state.doc,b.range.toB,lt,this.decorations,this.dynamicDecorationMap);wt=Vr.breakAtStart,rn=Vr.openStart,Cn=Ds.openEnd;let us=this.compositionView(b);Ds.breakAtStart?us.breakAfter=1:Ds.content.length&&us.merge(us.length,us.length,Ds.content[0],!1,Ds.openStart,0)&&(us.breakAfter=Ds.content[0].breakAfter,Ds.content.shift()),Vr.content.length&&us.merge(0,0,Vr.content[Vr.content.length-1],!0,0,Vr.openEnd)&&Vr.content.pop(),gt=Vr.content.concat(us).concat(Ds.content)}else({content:gt,breakAtStart:wt,openStart:rn,openEnd:Cn}=Js.build(this.view.state.doc,Oe,lt,this.decorations,this.dynamicDecorationMap));let{i:un,off:Hn}=B.findPos(_e,1),{i:Rr,off:Fs}=B.findPos(ce,-1);Fn(this,Rr,Fs,un,Hn,gt,wt,rn,Cn)}b&&this.fixCompositionDOM(b)}compositionView(u){let f=new sn(u.text.nodeValue);f.flags|=8;for(let{deco:T}of u.marks)f=new _n(T,[f],f.length);let b=new Ni;return b.append(f,0),b}fixCompositionDOM(u){let f=(B,U)=>{U.flags|=8|(U.children.some(ce=>ce.flags&7)?1:0),this.markedForComposition.add(U);let ie=St.get(B);ie&&ie!=U&&(ie.dom=null),U.setDOM(B)},b=this.childPos(u.range.fromB,1),T=this.children[b.i];f(u.line,T);for(let B=u.marks.length-1;B>=-1;B--)b=T.childPos(b.off,1),T=T.children[b.i],f(B>=0?u.marks[B].node:u.text,T)}updateSelection(u=!1,f=!1){(u||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let b=this.view.root.activeElement,T=b==this.dom,B=!T&&Si(this.dom,this.view.observer.selectionRange)&&!(b&&this.dom.contains(b));if(!(T||f||B))return;let U=this.forceSelection;this.forceSelection=!1;let ie=this.view.state.selection.main,ce=this.moveToLine(this.domAtPos(ie.anchor)),_e=ie.empty?ce:this.moveToLine(this.domAtPos(ie.head));if(Ge.gecko&&ie.empty&&!this.hasComposition&&Xo(ce)){let lt=document.createTextNode("");this.view.observer.ignore(()=>ce.node.insertBefore(lt,ce.node.childNodes[ce.offset]||null)),ce=_e=new Ie(lt,0),U=!0}let Oe=this.view.observer.selectionRange;(U||!Oe.focusNode||(!Un(ce.node,ce.offset,Oe.anchorNode,Oe.anchorOffset)||!Un(_e.node,_e.offset,Oe.focusNode,Oe.focusOffset))&&!this.suppressWidgetCursorChange(Oe,ie))&&(this.view.observer.ignore(()=>{Ge.android&&Ge.chrome&&this.dom.contains(Oe.focusNode)&&Ft(Oe.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let lt=In(this.view.root);if(lt)if(ie.empty){if(Ge.gecko){let gt=Ne(ce.node,ce.offset);if(gt&&gt!=3){let wt=(gt==1?ee:Ze)(ce.node,ce.offset);wt&&(ce=new Ie(wt.node,wt.offset))}}lt.collapse(ce.node,ce.offset),ie.bidiLevel!=null&&lt.caretBidiLevel!==void 0&&(lt.caretBidiLevel=ie.bidiLevel)}else if(lt.extend){lt.collapse(ce.node,ce.offset);try{lt.extend(_e.node,_e.offset)}catch(gt){}}else{let gt=document.createRange();ie.anchor>ie.head&&([ce,_e]=[_e,ce]),gt.setEnd(_e.node,_e.offset),gt.setStart(ce.node,ce.offset),lt.removeAllRanges(),lt.addRange(gt)}B&&this.view.root.activeElement==this.dom&&(this.dom.blur(),b&&b.focus())}),this.view.observer.setSelectionRange(ce,_e)),this.impreciseAnchor=ce.precise?null:new Ie(Oe.anchorNode,Oe.anchorOffset),this.impreciseHead=_e.precise?null:new Ie(Oe.focusNode,Oe.focusOffset)}suppressWidgetCursorChange(u,f){return this.hasComposition&&f.empty&&Un(u.focusNode,u.focusOffset,u.anchorNode,u.anchorOffset)&&this.posFromDOM(u.focusNode,u.focusOffset)==f.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:u}=this,f=u.state.selection.main,b=In(u.root),{anchorNode:T,anchorOffset:B}=u.observer.selectionRange;if(!b||!f.empty||!f.assoc||!b.modify)return;let U=Ni.find(this,f.head);if(!U)return;let ie=U.posAtStart;if(f.head==ie||f.head==ie+U.length)return;let ce=this.coordsAt(f.head,-1),_e=this.coordsAt(f.head,1);if(!ce||!_e||ce.bottom>_e.top)return;let Oe=this.domAtPos(f.head+f.assoc);b.collapse(Oe.node,Oe.offset),b.modify("move",f.assoc<0?"forward":"backward","lineboundary"),u.observer.readSelectionRange();let lt=u.observer.selectionRange;u.docView.posFromDOM(lt.anchorNode,lt.anchorOffset)!=f.from&&b.collapse(T,B)}moveToLine(u){let f=this.dom,b;if(u.node!=f)return u;for(let T=u.offset;!b&&T<f.childNodes.length;T++){let B=St.get(f.childNodes[T]);B instanceof Ni&&(b=B.domAtPos(0))}for(let T=u.offset-1;!b&&T>=0;T--){let B=St.get(f.childNodes[T]);B instanceof Ni&&(b=B.domAtPos(B.length))}return b?new Ie(b.node,b.offset,!0):u}nearest(u){for(let f=u;f;){let b=St.get(f);if(b&&b.rootView==this)return b;f=f.parentNode}return null}posFromDOM(u,f){let b=this.nearest(u);if(!b)throw new RangeError("Trying to find position for a DOM position outside of the document");return b.localPosFromDOM(u,f)+b.posAtStart}domAtPos(u){let{i:f,off:b}=this.childCursor().findPos(u,-1);for(;f<this.children.length-1;){let T=this.children[f];if(b<T.length||T instanceof Ni)break;f++,b=0}return this.children[f].domAtPos(b)}coordsAt(u,f){let b=null,T=0;for(let B=this.length,U=this.children.length-1;U>=0;U--){let ie=this.children[U],ce=B-ie.breakAfter,_e=ce-ie.length;if(ce<u)break;_e<=u&&(_e<u||ie.covers(-1))&&(ce>u||ie.covers(1))&&(!b||ie instanceof Ni&&!(b instanceof Ni&&f>=0))&&(b=ie,T=_e),B=_e}return b?b.coordsAt(u-T,f):null}coordsForChar(u){let{i:f,off:b}=this.childPos(u,1),T=this.children[f];if(!(T instanceof Ni))return null;for(;T.children.length;){let{i:ie,off:ce}=T.childPos(b,1);for(;;ie++){if(ie==T.children.length)return null;if((T=T.children[ie]).length)break}b=ce}if(!(T instanceof sn))return null;let B=(0,xe.cp)(T.text,b);if(B==b)return null;let U=qs(T.dom,b,B).getClientRects();for(let ie=0;ie<U.length;ie++){let ce=U[ie];if(ie==U.length-1||ce.top<ce.bottom&&ce.left<ce.right)return ce}return null}measureVisibleLineHeights(u){let f=[],{from:b,to:T}=u,B=this.view.contentDOM.clientWidth,U=B>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,ie=-1,ce=this.view.textDirection==Pi.LTR;for(let _e=0,Oe=0;Oe<this.children.length;Oe++){let lt=this.children[Oe],gt=_e+lt.length;if(gt>T)break;if(_e>=b){let wt=lt.dom.getBoundingClientRect();if(f.push(wt.height),U){let rn=lt.dom.lastChild,Cn=rn?Ii(rn):[];if(Cn.length){let un=Cn[Cn.length-1],Hn=ce?un.right-wt.left:wt.right-un.left;Hn>ie&&(ie=Hn,this.minWidth=B,this.minWidthFrom=_e,this.minWidthTo=gt)}}}_e=gt+lt.breakAfter}return f}textDirectionAt(u){let{i:f}=this.childPos(u,1);return getComputedStyle(this.children[f].dom).direction=="rtl"?Pi.RTL:Pi.LTR}measureTextSize(){for(let B of this.children)if(B instanceof Ni){let U=B.measureTextSize();if(U)return U}let u=document.createElement("div"),f,b,T;return u.className="cm-line",u.style.width="99999px",u.style.position="absolute",u.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(u);let B=Ii(u.firstChild)[0];f=u.getBoundingClientRect().height,b=B?B.width/27:7,T=B?B.height:f,u.remove()}),{lineHeight:f,charWidth:b,textHeight:T}}childCursor(u=this.length){let f=this.children.length;return f&&(u-=this.children[--f].length),new Bn(this.children,u,f)}computeBlockGapDeco(){let u=[],f=this.view.viewState;for(let b=0,T=0;;T++){let B=T==f.viewports.length?null:f.viewports[T],U=B?B.from-1:this.length;if(U>b){let ie=(f.lineBlockAt(U).bottom-f.lineBlockAt(b).top)/this.view.scaleY;u.push(Qi.replace({widget:new Ae(ie),block:!0,inclusive:!0,isBlockGap:!0}).range(b,U))}if(!B)break;b=B.to+1}return Qi.set(u)}updateDeco(){let u=0,f=this.view.state.facet(Mn).map(B=>(this.dynamicDecorationMap[u++]=typeof B=="function")?B(this.view):B),b=!1,T=this.view.state.facet(ks).map((B,U)=>{let ie=typeof B=="function";return ie&&(b=!0),ie?B(this.view):B});for(T.length&&(this.dynamicDecorationMap[u++]=b,f.push(xe.Xs.join(T))),this.decorations=[...f,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];u<this.decorations.length;)this.dynamicDecorationMap[u++]=!1;return this.decorations}scrollIntoView(u){if(u.isSnapshot){let _e=this.view.viewState.lineBlockAt(u.range.head);this.view.scrollDOM.scrollTop=_e.top-u.yMargin,this.view.scrollDOM.scrollLeft=u.xMargin;return}for(let _e of this.view.state.facet(ho))try{if(_e(this.view,u.range,u))return!0}catch(Oe){rt(this.view.state,Oe,"scroll handler")}let{range:f}=u,b=this.coordsAt(f.head,f.empty?f.assoc:f.head>f.anchor?-1:1),T;if(!b)return;!f.empty&&(T=this.coordsAt(f.anchor,f.anchor>f.head?-1:1))&&(b={left:Math.min(b.left,T.left),top:Math.min(b.top,T.top),right:Math.max(b.right,T.right),bottom:Math.max(b.bottom,T.bottom)});let B=fa(this.view),U={left:b.left-B.left,top:b.top-B.top,right:b.right+B.right,bottom:b.bottom+B.bottom},{offsetWidth:ie,offsetHeight:ce}=this.view.scrollDOM;vs(this.view.scrollDOM,U,f.head<f.anchor?-1:1,u.x,u.y,Math.max(Math.min(u.xMargin,ie),-ie),Math.max(Math.min(u.yMargin,ce),-ce),this.view.textDirection==Pi.LTR)}}function Xo(E){return E.node.nodeType==1&&E.node.firstChild&&(E.offset==0||E.node.childNodes[E.offset-1].contentEditable=="false")&&(E.offset==E.node.childNodes.length||E.node.childNodes[E.offset].contentEditable=="false")}class Ae extends Di{constructor(u){super(),this.height=u}toDOM(){let u=document.createElement("div");return u.className="cm-gap",this.updateDOM(u),u}eq(u){return u.height==this.height}updateDOM(u){return u.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}function Z(E,u){let f=E.observer.selectionRange;if(!f.focusNode)return null;let b=ee(f.focusNode,f.focusOffset),T=Ze(f.focusNode,f.focusOffset),B=b||T;if(T&&b&&T.node!=b.node){let ie=St.get(T.node);if(!ie||ie instanceof sn&&ie.text!=T.node.nodeValue)B=T;else if(E.docView.lastCompositionAfterCursor){let ce=St.get(b.node);!ce||ce instanceof sn&&ce.text!=b.node.nodeValue||(B=T)}}if(E.docView.lastCompositionAfterCursor=B!=b,!B)return null;let U=u-B.offset;return{from:U,to:U+B.node.nodeValue.length,node:B.node}}function pe(E,u,f){let b=Z(E,f);if(!b)return null;let{node:T,from:B,to:U}=b,ie=T.nodeValue;if(/[\n\r]/.test(ie)||E.state.doc.sliceString(b.from,b.to)!=ie)return null;let ce=u.invertedDesc,_e=new no(ce.mapPos(B),ce.mapPos(U),B,U),Oe=[];for(let lt=T.parentNode;;lt=lt.parentNode){let gt=St.get(lt);if(gt instanceof _n)Oe.push({node:lt,deco:gt.mark});else{if(gt instanceof Ni||lt.nodeName=="DIV"&&lt.parentNode==E.contentDOM)return{range:_e,text:T,marks:Oe,line:lt};if(lt!=E.contentDOM)Oe.push({node:lt,deco:new _i({inclusive:!0,attributes:ms(lt),tagName:lt.tagName.toLowerCase()})});else return null}}}function Ne(E,u){return E.nodeType!=1?0:(u&&E.childNodes[u-1].contentEditable=="false"?1:0)|(u<E.childNodes.length&&E.childNodes[u].contentEditable=="false"?2:0)}let Be=class{constructor(){this.changes=[]}compareRange(u,f){Wr(u,f,this.changes)}comparePoint(u,f){Wr(u,f,this.changes)}};function ut(E,u,f){let b=new Be;return xe.Xs.compare(E,u,f,b),b.changes}function Ft(E,u){for(let f=E;f&&f!=u;f=f.assignedSlot||f.parentNode)if(f.nodeType==1&&f.contentEditable=="false")return!0;return!1}function Xt(E,u){let f=!1;return u&&E.iterChangedRanges((b,T)=>{b<u.to&&T>u.from&&(f=!0)}),f}function mn(E,u,f=1){let b=E.charCategorizer(u),T=E.doc.lineAt(u),B=u-T.from;if(T.length==0)return xe.jT.cursor(u);B==0?f=1:B==T.length&&(f=-1);let U=B,ie=B;f<0?U=(0,xe.cp)(T.text,B,!1):ie=(0,xe.cp)(T.text,B);let ce=b(T.text.slice(U,ie));for(;U>0;){let _e=(0,xe.cp)(T.text,U,!1);if(b(T.text.slice(_e,U))!=ce)break;U=_e}for(;ie<T.length;){let _e=(0,xe.cp)(T.text,ie);if(b(T.text.slice(ie,_e))!=ce)break;ie=_e}return xe.jT.range(U+T.from,ie+T.from)}function ri(E,u){return u.left>E?u.left-E:Math.max(0,E-u.right)}function rr(E,u){return u.top>E?u.top-E:Math.max(0,E-u.bottom)}function Xi(E,u){return E.top<u.bottom-1&&E.bottom>u.top+1}function Vo(E,u){return u<E.top?{top:u,left:E.left,right:E.right,bottom:E.bottom}:E}function yo(E,u){return u>E.bottom?{top:E.top,left:E.left,right:E.right,bottom:u}:E}function Vs(E,u,f){let b,T,B,U,ie=!1,ce,_e,Oe,lt;for(let rn=E.firstChild;rn;rn=rn.nextSibling){let Cn=Ii(rn);for(let un=0;un<Cn.length;un++){let Hn=Cn[un];T&&Xi(T,Hn)&&(Hn=Vo(yo(Hn,T.bottom),T.top));let Rr=ri(u,Hn),Fs=rr(f,Hn);if(Rr==0&&Fs==0)return rn.nodeType==3?ko(rn,u,f):Vs(rn,u,f);if(!b||U>Fs||U==Fs&&B>Rr){b=rn,T=Hn,B=Rr,U=Fs;let Vr=Fs?f<Hn.top?-1:1:Rr?u<Hn.left?-1:1:0;ie=!Vr||(Vr>0?un<Cn.length-1:un>0)}Rr==0?f>Hn.bottom&&(!Oe||Oe.bottom<Hn.bottom)?(ce=rn,Oe=Hn):f<Hn.top&&(!lt||lt.top>Hn.top)&&(_e=rn,lt=Hn):Oe&&Xi(Oe,Hn)?Oe=yo(Oe,Hn.bottom):lt&&Xi(lt,Hn)&&(lt=Vo(lt,Hn.top))}}if(Oe&&Oe.bottom>=f?(b=ce,T=Oe):lt&&lt.top<=f&&(b=_e,T=lt),!b)return{node:E,offset:0};let gt=Math.max(T.left,Math.min(T.right,u));if(b.nodeType==3)return ko(b,gt,f);if(ie&&b.contentEditable!="false")return Vs(b,gt,f);let wt=Array.prototype.indexOf.call(E.childNodes,b)+(u>=(T.left+T.right)/2?1:0);return{node:E,offset:wt}}function ko(E,u,f){let b=E.nodeValue.length,T=-1,B=1e9,U=0;for(let ie=0;ie<b;ie++){let ce=qs(E,ie,ie+1).getClientRects();for(let _e=0;_e<ce.length;_e++){let Oe=ce[_e];if(Oe.top==Oe.bottom)continue;U||(U=u-Oe.left);let lt=(Oe.top>f?Oe.top-f:f-Oe.bottom)-1;if(Oe.left-1<=u&&Oe.right+1>=u&&lt<B){let gt=u>=(Oe.left+Oe.right)/2,wt=gt;if((Ge.chrome||Ge.gecko)&&qs(E,ie).getBoundingClientRect().left==Oe.right&&(wt=!gt),lt<=0)return{node:E,offset:ie+(wt?1:0)};T=ie+(wt?1:0),B=lt}}}return{node:E,offset:T>-1?T:U>0?E.nodeValue.length:0}}function Uo(E,u,f,b=-1){var T,B;let U=E.contentDOM.getBoundingClientRect(),ie=U.top+E.viewState.paddingTop,ce,{docHeight:_e}=E.viewState,{x:Oe,y:lt}=u,gt=lt-ie;if(gt<0)return 0;if(gt>_e)return E.state.doc.length;for(let Vr=E.viewState.heightOracle.textHeight/2,Ds=!1;ce=E.elementAtHeight(gt),ce.type!=Sr.Text;)for(;gt=b>0?ce.bottom+Vr:ce.top-Vr,!(gt>=0&&gt<=_e);){if(Ds)return f?null:0;Ds=!0,b=-b}lt=ie+gt;let wt=ce.from;if(wt<E.viewport.from)return E.viewport.from==0?0:f?null:la(E,U,ce,Oe,lt);if(wt>E.viewport.to)return E.viewport.to==E.state.doc.length?E.state.doc.length:f?null:la(E,U,ce,Oe,lt);let rn=E.dom.ownerDocument,Cn=E.root.elementFromPoint?E.root:rn,un=Cn.elementFromPoint(Oe,lt);un&&!E.contentDOM.contains(un)&&(un=null),un||(Oe=Math.max(U.left+1,Math.min(U.right-1,Oe)),un=Cn.elementFromPoint(Oe,lt),un&&!E.contentDOM.contains(un)&&(un=null));let Hn,Rr=-1;if(un&&((T=E.docView.nearest(un))===null||T===void 0?void 0:T.isEditable)!=!1){if(rn.caretPositionFromPoint){let Vr=rn.caretPositionFromPoint(Oe,lt);Vr&&({offsetNode:Hn,offset:Rr}=Vr)}else if(rn.caretRangeFromPoint){let Vr=rn.caretRangeFromPoint(Oe,lt);Vr&&({startContainer:Hn,startOffset:Rr}=Vr,(!E.contentDOM.contains(Hn)||Ge.safari&&Ys(Hn,Rr,Oe)||Ge.chrome&&Ai(Hn,Rr,Oe))&&(Hn=void 0))}}if(!Hn||!E.docView.dom.contains(Hn)){let Vr=Ni.find(E.docView,wt);if(!Vr)return gt>ce.top+ce.height/2?ce.to:ce.from;({node:Hn,offset:Rr}=Vs(Vr.dom,Oe,lt))}let Fs=E.docView.nearest(Hn);if(!Fs)return null;if(Fs.isWidget&&((B=Fs.dom)===null||B===void 0?void 0:B.nodeType)==1){let Vr=Fs.dom.getBoundingClientRect();return u.y<Vr.top||u.y<=Vr.bottom&&u.x<=(Vr.left+Vr.right)/2?Fs.posAtStart:Fs.posAtEnd}else return Fs.localPosFromDOM(Hn,Rr)+Fs.posAtStart}function la(E,u,f,b,T){let B=Math.round((b-u.left)*E.defaultCharacterWidth);if(E.lineWrapping&&f.height>E.defaultLineHeight*1.5){let ie=E.viewState.heightOracle.textHeight,ce=Math.floor((T-f.top-(E.defaultLineHeight-ie)*.5)/ie);B+=ce*E.viewState.heightOracle.lineLength}let U=E.state.sliceDoc(f.from,f.to);return f.from+(0,xe.Gz)(U,B,E.state.tabSize)}function Ys(E,u,f){let b;if(E.nodeType!=3||u!=(b=E.nodeValue.length))return!1;for(let T=E.nextSibling;T;T=T.nextSibling)if(T.nodeType!=1||T.nodeName!="BR")return!1;return qs(E,b-1,b).getBoundingClientRect().left>f}function Ai(E,u,f){if(u!=0)return!1;for(let T=E;;){let B=T.parentNode;if(!B||B.nodeType!=1||B.firstChild!=T)return!1;if(B.classList.contains("cm-line"))break;T=B}let b=E.nodeType==1?E.getBoundingClientRect():qs(E,0,Math.max(E.nodeValue.length,1)).getBoundingClientRect();return f-b.left>5}function ll(E,u){let f=E.lineBlockAt(u);if(Array.isArray(f.type)){for(let b of f.type)if(b.to>u||b.to==u&&(b.to==f.to||b.type==Sr.Text))return b}return f}function si(E,u,f,b){let T=ll(E,u.head),B=!b||T.type!=Sr.Text||!(E.lineWrapping||T.widgetLineBreaks)?null:E.coordsAtPos(u.assoc<0&&u.head>T.from?u.head-1:u.head);if(B){let U=E.dom.getBoundingClientRect(),ie=E.textDirectionAt(T.from),ce=E.posAtCoords({x:f==(ie==Pi.LTR)?U.right-1:U.left+1,y:(B.top+B.bottom)/2});if(ce!=null)return xe.jT.cursor(ce,f?-1:1)}return xe.jT.cursor(f?T.to:T.from,f?-1:1)}function Zo(E,u,f,b){let T=E.state.doc.lineAt(u.head),B=E.bidiSpans(T),U=E.textDirectionAt(T.from);for(let ie=u,ce=null;;){let _e=te(T,B,U,ie,f),Oe=Y;if(!_e){if(T.number==(f?E.state.doc.lines:1))return ie;Oe=`
`,T=E.state.doc.line(T.number+(f?1:-1)),B=E.bidiSpans(T),_e=E.visualLineSide(T,!f)}if(ce){if(!ce(Oe))return ie}else{if(!b)return _e;ce=b(Oe)}ie=_e}}function ma(E,u,f){let b=E.state.charCategorizer(u),T=b(f);return B=>{let U=b(B);return T==xe.D0.Space&&(T=U),T==U}}function ul(E,u,f,b){let T=u.head,B=f?1:-1;if(T==(f?E.state.doc.length:0))return xe.jT.cursor(T,u.assoc);let U=u.goalColumn,ie,ce=E.contentDOM.getBoundingClientRect(),_e=E.coordsAtPos(T,u.assoc||-1),Oe=E.documentTop;if(_e)U==null&&(U=_e.left-ce.left),ie=B<0?_e.top:_e.bottom;else{let wt=E.viewState.lineBlockAt(T);U==null&&(U=Math.min(ce.right-ce.left,E.defaultCharacterWidth*(T-wt.from))),ie=(B<0?wt.top:wt.bottom)+Oe}let lt=ce.left+U,gt=b!=null?b:E.viewState.heightOracle.textHeight>>1;for(let wt=0;;wt+=10){let rn=ie+(gt+wt)*B,Cn=Uo(E,{x:lt,y:rn},!1,B);if(rn<ce.top||rn>ce.bottom||(B<0?Cn<T:Cn>T)){let un=E.docView.coordsForChar(Cn),Hn=!un||rn<un.top?-1:1;return xe.jT.cursor(Cn,Hn,void 0,U)}}}function ia(E,u,f){for(;;){let b=0;for(let T of E)T.between(u-1,u+1,(B,U,ie)=>{if(u>B&&u<U){let ce=b||f||(u-B<U-u?-1:1);u=ce<0?B:U,b=ce}});if(!b)return u}}function Ro(E,u,f){let b=ia(E.state.facet(jo).map(T=>T(E)),f.from,u.head>f.from?-1:1);return b==f.from?f:xe.jT.cursor(b,b<f.from?1:-1)}class La{setSelectionOrigin(u){this.lastSelectionOrigin=u,this.lastSelectionTime=Date.now()}constructor(u){this.view=u,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=u.hasFocus,Ge.safari&&u.contentDOM.addEventListener("input",()=>null),Ge.gecko&&Mi(u.contentDOM.ownerDocument)}handleEvent(u){!as(this.view,u)||this.ignoreDuringComposition(u)||u.type=="keydown"&&this.keydown(u)||this.runHandlers(u.type,u)}runHandlers(u,f){let b=this.handlers[u];if(b){for(let T of b.observers)T(this.view,f);for(let T of b.handlers){if(f.defaultPrevented)break;if(T(this.view,f)){f.preventDefault();break}}}}ensureHandlers(u){let f=il(u),b=this.handlers,T=this.view.contentDOM;for(let B in f)if(B!="scroll"){let U=!f[B].handlers.length,ie=b[B];ie&&U!=!ie.handlers.length&&(T.removeEventListener(B,this.handleEvent),ie=null),ie||T.addEventListener(B,this.handleEvent,{passive:U})}for(let B in b)B!="scroll"&&!f[B]&&T.removeEventListener(B,this.handleEvent);this.handlers=f}keydown(u){if(this.lastKeyCode=u.keyCode,this.lastKeyTime=Date.now(),u.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(u.keyCode!=27&&Ee.indexOf(u.keyCode)<0&&(this.view.inputState.lastEscPress=0),Ge.android&&Ge.chrome&&!u.synthetic&&(u.keyCode==13||u.keyCode==8))return this.view.observer.delayAndroidKey(u.key,u.keyCode),!0;let f;return Ge.ios&&!u.synthetic&&!u.altKey&&!u.metaKey&&((f=Jo.find(b=>b.keyCode==u.keyCode))&&!u.ctrlKey||J.indexOf(u.key)>-1&&u.ctrlKey&&!u.shiftKey)?(this.pendingIOSKey=f||u,setTimeout(()=>this.flushIOSKey(),250),!0):(u.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(u){let f=this.pendingIOSKey;return!f||f.key=="Enter"&&u&&u.from<u.to&&/^\S+$/.test(u.insert.toString())?!1:(this.pendingIOSKey=void 0,Is(this.view.contentDOM,f.key,f.keyCode,f instanceof KeyboardEvent?f:void 0))}ignoreDuringComposition(u){return/^key/.test(u.type)?this.composing>0?!0:Ge.safari&&!Ge.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(u){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=u}update(u){this.mouseSelection&&this.mouseSelection.update(u),this.draggedContent&&u.docChanged&&(this.draggedContent=this.draggedContent.map(u.changes)),u.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function Ar(E,u){return(f,b)=>{try{return u.call(E,b,f)}catch(T){rt(f.state,T)}}}function il(E){let u=Object.create(null);function f(b){return u[b]||(u[b]={observers:[],handlers:[]})}for(let b of E){let T=b.spec;if(T&&T.domEventHandlers)for(let B in T.domEventHandlers){let U=T.domEventHandlers[B];U&&f(B).handlers.push(Ar(b.value,U))}if(T&&T.domEventObservers)for(let B in T.domEventObservers){let U=T.domEventObservers[B];U&&f(B).observers.push(Ar(b.value,U))}}for(let b in Pr)f(b).handlers.push(Pr[b]);for(let b in fr)f(b).observers.push(fr[b]);return u}const Jo=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],J="dthko",Ee=[16,17,18,20,91,92,224,225],je=6;function Je(E){return Math.max(0,E)*.7+8}function Ct(E,u){return Math.max(Math.abs(E.clientX-u.clientX),Math.abs(E.clientY-u.clientY))}class Nt{constructor(u,f,b,T){this.view=u,this.startEvent=f,this.style=b,this.mustSelect=T,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=f,this.scrollParent=uo(u.contentDOM),this.atoms=u.state.facet(jo).map(U=>U(u));let B=u.contentDOM.ownerDocument;B.addEventListener("mousemove",this.move=this.move.bind(this)),B.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=f.shiftKey,this.multiple=u.state.facet(xe.yy.allowMultipleSelections)&&pn(u,f),this.dragging=zi(u,f)&&kn(f)==1?null:!1}start(u){this.dragging===!1&&this.select(u)}move(u){var f;if(u.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&Ct(this.startEvent,u)<10)return;this.select(this.lastEvent=u);let b=0,T=0,B=((f=this.scrollParent)===null||f===void 0?void 0:f.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight},U=fa(this.view);u.clientX-U.left<=B.left+je?b=-Je(B.left-u.clientX):u.clientX+U.right>=B.right-je&&(b=Je(u.clientX-B.right)),u.clientY-U.top<=B.top+je?T=-Je(B.top-u.clientY):u.clientY+U.bottom>=B.bottom-je&&(T=Je(u.clientY-B.bottom)),this.setScrollSpeed(b,T)}up(u){this.dragging==null&&this.select(this.lastEvent),this.dragging||u.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let u=this.view.contentDOM.ownerDocument;u.removeEventListener("mousemove",this.move),u.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(u,f){this.scrollSpeed={x:u,y:f},u||f?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(u){let f=null;for(let b=0;b<u.ranges.length;b++){let T=u.ranges[b],B=null;if(T.empty){let U=ia(this.atoms,T.from,0);U!=T.from&&(B=xe.jT.cursor(U,-1))}else{let U=ia(this.atoms,T.from,-1),ie=ia(this.atoms,T.to,1);(U!=T.from||ie!=T.to)&&(B=xe.jT.range(T.from==T.anchor?U:ie,T.from==T.head?U:ie))}B&&(f||(f=u.ranges.slice()),f[b]=B)}return f?xe.jT.create(f,u.mainIndex):u}select(u){let{view:f}=this,b=this.skipAtoms(this.style.get(u,this.extend,this.multiple));(this.mustSelect||!b.eq(f.state.selection,this.dragging===!1))&&this.view.dispatch({selection:b,userEvent:"select.pointer"}),this.mustSelect=!1}update(u){this.style.update(u)&&setTimeout(()=>this.select(this.lastEvent),20)}}function pn(E,u){let f=E.state.facet(Ce);return f.length?f[0](u):Ge.mac?u.metaKey:u.ctrlKey}function ai(E,u){let f=E.state.facet(We);return f.length?f[0](u):Ge.mac?!u.altKey:!u.ctrlKey}function zi(E,u){let{main:f}=E.state.selection;if(f.empty)return!1;let b=In(E.root);if(!b||b.rangeCount==0)return!0;let T=b.getRangeAt(0).getClientRects();for(let B=0;B<T.length;B++){let U=T[B];if(U.left<=u.clientX&&U.right>=u.clientX&&U.top<=u.clientY&&U.bottom>=u.clientY)return!0}return!1}function as(E,u){if(!u.bubbles)return!0;if(u.defaultPrevented)return!1;for(let f=u.target,b;f!=E.contentDOM;f=f.parentNode)if(!f||f.nodeType==11||(b=St.get(f))&&b.ignoreEvent(u))return!1;return!0}const Pr=Object.create(null),fr=Object.create(null),_o=Ge.ie&&Ge.ie_version<15||Ge.ios&&Ge.webkit_version<604;function Co(E){let u=E.dom.parentNode;if(!u)return;let f=u.appendChild(document.createElement("textarea"));f.style.cssText="position: fixed; left: -10000px; top: 10px",f.focus(),setTimeout(()=>{E.focus(),f.remove(),De(E,f.value)},50)}function De(E,u){let{state:f}=E,b,T=1,B=f.toText(u),U=B.lines==f.selection.ranges.length;if(Ht!=null&&f.selection.ranges.every(ce=>ce.empty)&&Ht==B.toString()){let ce=-1;b=f.changeByRange(_e=>{let Oe=f.doc.lineAt(_e.from);if(Oe.from==ce)return{range:_e};ce=Oe.from;let lt=f.toText((U?B.line(T++).text:u)+f.lineBreak);return{changes:{from:Oe.from,insert:lt},range:xe.jT.cursor(_e.from+lt.length)}})}else U?b=f.changeByRange(ce=>{let _e=B.line(T++);return{changes:{from:ce.from,to:ce.to,insert:_e.text},range:xe.jT.cursor(ce.from+_e.length)}}):b=f.replaceSelection(B);E.dispatch(b,{userEvent:"input.paste",scrollIntoView:!0})}fr.scroll=E=>{E.inputState.lastScrollTop=E.scrollDOM.scrollTop,E.inputState.lastScrollLeft=E.scrollDOM.scrollLeft},Pr.keydown=(E,u)=>(E.inputState.setSelectionOrigin("select"),u.keyCode==27&&(E.inputState.lastEscPress=Date.now()),!1),fr.touchstart=(E,u)=>{E.inputState.lastTouchTime=Date.now(),E.inputState.setSelectionOrigin("select.pointer")},fr.touchmove=E=>{E.inputState.setSelectionOrigin("select.pointer")},Pr.mousedown=(E,u)=>{if(E.observer.flush(),E.inputState.lastTouchTime>Date.now()-2e3)return!1;let f=null;for(let b of E.state.facet(Dt))if(f=b(E,u),f)break;if(!f&&u.button==0&&(f=yi(E,u)),f){let b=!E.hasFocus;E.inputState.startMouseSelection(new Nt(E,u,f,b)),b&&E.observer.ignore(()=>jr(E.contentDOM));let T=E.inputState.mouseSelection;if(T)return T.start(u),T.dragging===!1}return!1};function He(E,u,f,b){if(b==1)return xe.jT.cursor(u,f);if(b==2)return mn(E.state,u,f);{let T=Ni.find(E.docView,u),B=E.state.doc.lineAt(T?T.posAtEnd:u),U=T?T.posAtStart:B.from,ie=T?T.posAtEnd:B.to;return ie<E.state.doc.length&&ie==B.to&&ie++,xe.jT.range(U,ie)}}let ht=(E,u)=>E>=u.top&&E<=u.bottom,vt=(E,u,f)=>ht(u,f)&&E>=f.left&&E<=f.right;function Bt(E,u,f,b){let T=Ni.find(E.docView,u);if(!T)return 1;let B=u-T.posAtStart;if(B==0)return 1;if(B==T.length)return-1;let U=T.coordsAt(B,-1);if(U&&vt(f,b,U))return-1;let ie=T.coordsAt(B,1);return ie&&vt(f,b,ie)?1:U&&ht(b,U)?-1:1}function zt(E,u){let f=E.posAtCoords({x:u.clientX,y:u.clientY},!1);return{pos:f,bias:Bt(E,f,u.clientX,u.clientY)}}const Ot=Ge.ie&&Ge.ie_version<=11;let mt=null,on=0,En=0;function kn(E){if(!Ot)return E.detail;let u=mt,f=En;return mt=E,En=Date.now(),on=!u||f>Date.now()-400&&Math.abs(u.clientX-E.clientX)<2&&Math.abs(u.clientY-E.clientY)<2?(on+1)%3:1}function yi(E,u){let f=zt(E,u),b=kn(u),T=E.state.selection;return{update(B){B.docChanged&&(f.pos=B.changes.mapPos(f.pos),T=T.map(B.changes))},get(B,U,ie){let ce=zt(E,B),_e,Oe=He(E,ce.pos,ce.bias,b);if(f.pos!=ce.pos&&!U){let lt=He(E,f.pos,f.bias,b),gt=Math.min(lt.from,Oe.from),wt=Math.max(lt.to,Oe.to);Oe=gt<Oe.from?xe.jT.range(gt,wt):xe.jT.range(wt,gt)}return U?T.replaceRange(T.main.extend(Oe.from,Oe.to)):ie&&b==1&&T.ranges.length>1&&(_e=gi(T,ce.pos))?_e:ie?T.addRange(Oe):xe.jT.create([Oe])}}}function gi(E,u){for(let f=0;f<E.ranges.length;f++){let{from:b,to:T}=E.ranges[f];if(b<=u&&T>=u)return xe.jT.create(E.ranges.slice(0,f).concat(E.ranges.slice(f+1)),E.mainIndex==f?0:E.mainIndex-(E.mainIndex>f?1:0))}return null}Pr.dragstart=(E,u)=>{let{selection:{main:f}}=E.state;if(u.target.draggable){let T=E.docView.nearest(u.target);if(T&&T.isWidget){let B=T.posAtStart,U=B+T.length;(B>=f.to||U<=f.from)&&(f=xe.jT.range(B,U))}}let{inputState:b}=E;return b.mouseSelection&&(b.mouseSelection.dragging=!0),b.draggedContent=f,u.dataTransfer&&(u.dataTransfer.setData("Text",E.state.sliceDoc(f.from,f.to)),u.dataTransfer.effectAllowed="copyMove"),!1},Pr.dragend=E=>(E.inputState.draggedContent=null,!1);function Wi(E,u,f,b){if(!f)return;let T=E.posAtCoords({x:u.clientX,y:u.clientY},!1),{draggedContent:B}=E.inputState,U=b&&B&&ai(E,u)?{from:B.from,to:B.to}:null,ie={from:T,insert:f},ce=E.state.changes(U?[U,ie]:ie);E.focus(),E.dispatch({changes:ce,selection:{anchor:ce.mapPos(T,-1),head:ce.mapPos(T,1)},userEvent:U?"move.drop":"input.drop"}),E.inputState.draggedContent=null}Pr.drop=(E,u)=>{if(!u.dataTransfer)return!1;if(E.state.readOnly)return!0;let f=u.dataTransfer.files;if(f&&f.length){let b=Array(f.length),T=0,B=()=>{++T==f.length&&Wi(E,u,b.filter(U=>U!=null).join(E.state.lineBreak),!1)};for(let U=0;U<f.length;U++){let ie=new FileReader;ie.onerror=B,ie.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(ie.result)||(b[U]=ie.result),B()},ie.readAsText(f[U])}return!0}else{let b=u.dataTransfer.getData("Text");if(b)return Wi(E,u,b,!0),!0}return!1},Pr.paste=(E,u)=>{if(E.state.readOnly)return!0;E.observer.flush();let f=_o?null:u.clipboardData;return f?(De(E,f.getData("text/plain")||f.getData("text/uri-list")),!0):(Co(E),!1)};function Xn(E,u){let f=E.dom.parentNode;if(!f)return;let b=f.appendChild(document.createElement("textarea"));b.style.cssText="position: fixed; left: -10000px; top: 10px",b.value=u,b.focus(),b.selectionEnd=u.length,b.selectionStart=0,setTimeout(()=>{b.remove(),E.focus()},50)}function Yn(E){let u=[],f=[],b=!1;for(let T of E.selection.ranges)T.empty||(u.push(E.sliceDoc(T.from,T.to)),f.push(T));if(!u.length){let T=-1;for(let{from:B}of E.selection.ranges){let U=E.doc.lineAt(B);U.number>T&&(u.push(U.text),f.push({from:U.from,to:Math.min(E.doc.length,U.to+1)})),T=U.number}b=!0}return{text:u.join(E.lineBreak),ranges:f,linewise:b}}let Ht=null;Pr.copy=Pr.cut=(E,u)=>{let{text:f,ranges:b,linewise:T}=Yn(E.state);if(!f&&!T)return!1;Ht=T?f:null,u.type=="cut"&&!E.state.readOnly&&E.dispatch({changes:b,scrollIntoView:!0,userEvent:"delete.cut"});let B=_o?null:u.clipboardData;return B?(B.clearData(),B.setData("text/plain",f),!0):(Xn(E,f),!1)};const $r=xe.q6.define();function kt(E,u){let f=[];for(let b of E.facet(mi)){let T=b(E,u);T&&f.push(T)}return f?E.update({effects:f,annotations:$r.of(!0)}):null}function Bi(E){setTimeout(()=>{let u=E.hasFocus;if(u!=E.inputState.notifiedFocused){let f=kt(E.state,u);f?E.dispatch(f):E.update([])}},10)}fr.focus=E=>{E.inputState.lastFocusTime=Date.now(),!E.scrollDOM.scrollTop&&(E.inputState.lastScrollTop||E.inputState.lastScrollLeft)&&(E.scrollDOM.scrollTop=E.inputState.lastScrollTop,E.scrollDOM.scrollLeft=E.inputState.lastScrollLeft),Bi(E)},fr.blur=E=>{E.observer.clearSelectionRange(),Bi(E)},fr.compositionstart=fr.compositionupdate=E=>{E.inputState.compositionFirstChange==null&&(E.inputState.compositionFirstChange=!0),E.inputState.composing<0&&(E.inputState.composing=0)},fr.compositionend=E=>{E.inputState.composing=-1,E.inputState.compositionEndedAt=Date.now(),E.inputState.compositionPendingKey=!0,E.inputState.compositionPendingChange=E.observer.pendingRecords().length>0,E.inputState.compositionFirstChange=null,Ge.chrome&&Ge.android?E.observer.flushSoon():E.inputState.compositionPendingChange?Promise.resolve().then(()=>E.observer.flush()):setTimeout(()=>{E.inputState.composing<0&&E.docView.hasComposition&&E.update([])},50)},fr.contextmenu=E=>{E.inputState.lastContextMenu=Date.now()},Pr.beforeinput=(E,u)=>{var f;let b;if(Ge.chrome&&Ge.android&&(b=Jo.find(T=>T.inputType==u.inputType))&&(E.observer.delayAndroidKey(b.key,b.keyCode),b.key=="Backspace"||b.key=="Delete")){let T=((f=window.visualViewport)===null||f===void 0?void 0:f.height)||0;setTimeout(()=>{var B;(((B=window.visualViewport)===null||B===void 0?void 0:B.height)||0)>T+10&&E.hasFocus&&(E.contentDOM.blur(),E.focus())},100)}return Ge.ios&&u.inputType=="deleteContentForward"&&E.observer.flushSoon(),Ge.safari&&u.inputType=="insertText"&&E.inputState.composing>=0&&setTimeout(()=>fr.compositionend(E,u),20),!1};const Tr=new Set;function Mi(E){Tr.has(E)||(Tr.add(E),E.addEventListener("copy",()=>{}),E.addEventListener("cut",()=>{}))}const Ur=["pre-wrap","normal","pre-line","break-spaces"];class Ei{constructor(u){this.lineWrapping=u,this.doc=xe.xv.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}heightForGap(u,f){let b=this.doc.lineAt(f).number-this.doc.lineAt(u).number+1;return this.lineWrapping&&(b+=Math.max(0,Math.ceil((f-u-b*this.lineLength*.5)/this.lineLength))),this.lineHeight*b}heightForLine(u){return this.lineWrapping?(1+Math.max(0,Math.ceil((u-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(u){return this.doc=u,this}mustRefreshForWrapping(u){return Ur.indexOf(u)>-1!=this.lineWrapping}mustRefreshForHeights(u){let f=!1;for(let b=0;b<u.length;b++){let T=u[b];T<0?b++:this.heightSamples[Math.floor(T*10)]||(f=!0,this.heightSamples[Math.floor(T*10)]=!0)}return f}refresh(u,f,b,T,B,U){let ie=Ur.indexOf(u)>-1,ce=Math.round(f)!=Math.round(this.lineHeight)||this.lineWrapping!=ie;if(this.lineWrapping=ie,this.lineHeight=f,this.charWidth=b,this.textHeight=T,this.lineLength=B,ce){this.heightSamples={};for(let _e=0;_e<U.length;_e++){let Oe=U[_e];Oe<0?_e++:this.heightSamples[Math.floor(Oe*10)]=!0}}return ce}}class Xr{constructor(u,f){this.from=u,this.heights=f,this.index=0}get more(){return this.index<this.heights.length}}class lr{constructor(u,f,b,T,B){this.from=u,this.length=f,this.top=b,this.height=T,this._content=B}get type(){return typeof this._content=="number"?Sr.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Zn?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(u){let f=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(u._content)?u._content:[u]);return new lr(this.from,this.length+u.length,this.top,this.height+u.height,f)}}var Ci=function(E){return E[E.ByPos=0]="ByPos",E[E.ByHeight=1]="ByHeight",E[E.ByPosNoHeight=2]="ByPosNoHeight",E}(Ci||(Ci={}));const Or=.001;class Gs{constructor(u,f,b=2){this.length=u,this.height=f,this.flags=b}get outdated(){return(this.flags&2)>0}set outdated(u){this.flags=(u?2:0)|this.flags&-3}setHeight(u,f){this.height!=f&&(Math.abs(this.height-f)>Or&&(u.heightChanged=!0),this.height=f)}replace(u,f,b){return Gs.of(b)}decomposeLeft(u,f){f.push(this)}decomposeRight(u,f){f.push(this)}applyChanges(u,f,b,T){let B=this,U=b.doc;for(let ie=T.length-1;ie>=0;ie--){let{fromA:ce,toA:_e,fromB:Oe,toB:lt}=T[ie],gt=B.lineAt(ce,Ci.ByPosNoHeight,b.setDoc(f),0,0),wt=gt.to>=_e?gt:B.lineAt(_e,Ci.ByPosNoHeight,b,0,0);for(lt+=wt.to-_e,_e=wt.to;ie>0&&gt.from<=T[ie-1].toA;)ce=T[ie-1].fromA,Oe=T[ie-1].fromB,ie--,ce<gt.from&&(gt=B.lineAt(ce,Ci.ByPosNoHeight,b,0,0));Oe+=gt.from-ce,ce=gt.from;let rn=Oi.build(b.setDoc(U),u,Oe,lt);B=B.replace(ce,_e,rn)}return B.updateHeight(b,0)}static empty(){return new Sn(0,0)}static of(u){if(u.length==1)return u[0];let f=0,b=u.length,T=0,B=0;for(;;)if(f==b)if(T>B*2){let ie=u[f-1];ie.break?u.splice(--f,1,ie.left,null,ie.right):u.splice(--f,1,ie.left,ie.right),b+=1+ie.break,T-=ie.size}else if(B>T*2){let ie=u[b];ie.break?u.splice(b,1,ie.left,null,ie.right):u.splice(b,1,ie.left,ie.right),b+=2+ie.break,B-=ie.size}else break;else if(T<B){let ie=u[f++];ie&&(T+=ie.size)}else{let ie=u[--b];ie&&(B+=ie.size)}let U=0;return u[f-1]==null?(U=1,f--):u[f]==null&&(U=1,b++),new Yt(Gs.of(u.slice(0,f)),U,Gs.of(u.slice(b)))}}Gs.prototype.size=1;class sr extends Gs{constructor(u,f,b){super(u,f),this.deco=b}blockAt(u,f,b,T){return new lr(T,this.length,b,this.height,this.deco||0)}lineAt(u,f,b,T,B){return this.blockAt(0,b,T,B)}forEachLine(u,f,b,T,B,U){u<=B+this.length&&f>=B&&U(this.blockAt(0,b,T,B))}updateHeight(u,f=0,b=!1,T){return T&&T.from<=f&&T.more&&this.setHeight(u,T.heights[T.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Sn extends sr{constructor(u,f){super(u,f,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(u,f,b,T){return new lr(T,this.length,b,this.height,this.breaks)}replace(u,f,b){let T=b[0];return b.length==1&&(T instanceof Sn||T instanceof ln&&T.flags&4)&&Math.abs(this.length-T.length)<10?(T instanceof ln?T=new Sn(T.length,this.height):T.height=this.height,this.outdated||(T.outdated=!1),T):Gs.of(b)}updateHeight(u,f=0,b=!1,T){return T&&T.from<=f&&T.more?this.setHeight(u,T.heights[T.index++]):(b||this.outdated)&&this.setHeight(u,Math.max(this.widgetHeight,u.heightForLine(this.length-this.collapsed))+this.breaks*u.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class ln extends Gs{constructor(u){super(u,0)}heightMetrics(u,f){let b=u.doc.lineAt(f).number,T=u.doc.lineAt(f+this.length).number,B=T-b+1,U,ie=0;if(u.lineWrapping){let ce=Math.min(this.height,u.lineHeight*B);U=ce/B,this.length>B+1&&(ie=(this.height-ce)/(this.length-B-1))}else U=this.height/B;return{firstLine:b,lastLine:T,perLine:U,perChar:ie}}blockAt(u,f,b,T){let{firstLine:B,lastLine:U,perLine:ie,perChar:ce}=this.heightMetrics(f,T);if(f.lineWrapping){let _e=T+(u<f.lineHeight?0:Math.round(Math.max(0,Math.min(1,(u-b)/this.height))*this.length)),Oe=f.doc.lineAt(_e),lt=ie+Oe.length*ce,gt=Math.max(b,u-lt/2);return new lr(Oe.from,Oe.length,gt,lt,0)}else{let _e=Math.max(0,Math.min(U-B,Math.floor((u-b)/ie))),{from:Oe,length:lt}=f.doc.line(B+_e);return new lr(Oe,lt,b+ie*_e,ie,0)}}lineAt(u,f,b,T,B){if(f==Ci.ByHeight)return this.blockAt(u,b,T,B);if(f==Ci.ByPosNoHeight){let{from:wt,to:rn}=b.doc.lineAt(u);return new lr(wt,rn-wt,0,0,0)}let{firstLine:U,perLine:ie,perChar:ce}=this.heightMetrics(b,B),_e=b.doc.lineAt(u),Oe=ie+_e.length*ce,lt=_e.number-U,gt=T+ie*lt+ce*(_e.from-B-lt);return new lr(_e.from,_e.length,Math.max(T,Math.min(gt,T+this.height-Oe)),Oe,0)}forEachLine(u,f,b,T,B,U){u=Math.max(u,B),f=Math.min(f,B+this.length);let{firstLine:ie,perLine:ce,perChar:_e}=this.heightMetrics(b,B);for(let Oe=u,lt=T;Oe<=f;){let gt=b.doc.lineAt(Oe);if(Oe==u){let rn=gt.number-ie;lt+=ce*rn+_e*(u-B-rn)}let wt=ce+_e*gt.length;U(new lr(gt.from,gt.length,lt,wt,0)),lt+=wt,Oe=gt.to+1}}replace(u,f,b){let T=this.length-f;if(T>0){let B=b[b.length-1];B instanceof ln?b[b.length-1]=new ln(B.length+T):b.push(null,new ln(T-1))}if(u>0){let B=b[0];B instanceof ln?b[0]=new ln(u+B.length):b.unshift(new ln(u-1),null)}return Gs.of(b)}decomposeLeft(u,f){f.push(new ln(u-1),null)}decomposeRight(u,f){f.push(null,new ln(this.length-u-1))}updateHeight(u,f=0,b=!1,T){let B=f+this.length;if(T&&T.from<=f+this.length&&T.more){let U=[],ie=Math.max(f,T.from),ce=-1;for(T.from>f&&U.push(new ln(T.from-f-1).updateHeight(u,f));ie<=B&&T.more;){let Oe=u.doc.lineAt(ie).length;U.length&&U.push(null);let lt=T.heights[T.index++];ce==-1?ce=lt:Math.abs(lt-ce)>=Or&&(ce=-2);let gt=new Sn(Oe,lt);gt.outdated=!1,U.push(gt),ie+=Oe+1}ie<=B&&U.push(null,new ln(B-ie).updateHeight(u,ie));let _e=Gs.of(U);return(ce<0||Math.abs(_e.height-this.height)>=Or||Math.abs(ce-this.heightMetrics(u,f).perLine)>=Or)&&(u.heightChanged=!0),_e}else(b||this.outdated)&&(this.setHeight(u,u.heightForGap(f,f+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class Yt extends Gs{constructor(u,f,b){super(u.length+f+b.length,u.height+b.height,f|(u.outdated||b.outdated?2:0)),this.left=u,this.right=b,this.size=u.size+b.size}get break(){return this.flags&1}blockAt(u,f,b,T){let B=b+this.left.height;return u<B?this.left.blockAt(u,f,b,T):this.right.blockAt(u,f,B,T+this.left.length+this.break)}lineAt(u,f,b,T,B){let U=T+this.left.height,ie=B+this.left.length+this.break,ce=f==Ci.ByHeight?u<U:u<ie,_e=ce?this.left.lineAt(u,f,b,T,B):this.right.lineAt(u,f,b,U,ie);if(this.break||(ce?_e.to<ie:_e.from>ie))return _e;let Oe=f==Ci.ByPosNoHeight?Ci.ByPosNoHeight:Ci.ByPos;return ce?_e.join(this.right.lineAt(ie,Oe,b,U,ie)):this.left.lineAt(ie,Oe,b,T,B).join(_e)}forEachLine(u,f,b,T,B,U){let ie=T+this.left.height,ce=B+this.left.length+this.break;if(this.break)u<ce&&this.left.forEachLine(u,f,b,T,B,U),f>=ce&&this.right.forEachLine(u,f,b,ie,ce,U);else{let _e=this.lineAt(ce,Ci.ByPos,b,T,B);u<_e.from&&this.left.forEachLine(u,_e.from-1,b,T,B,U),_e.to>=u&&_e.from<=f&&U(_e),f>_e.to&&this.right.forEachLine(_e.to+1,f,b,ie,ce,U)}}replace(u,f,b){let T=this.left.length+this.break;if(f<T)return this.balanced(this.left.replace(u,f,b),this.right);if(u>this.left.length)return this.balanced(this.left,this.right.replace(u-T,f-T,b));let B=[];u>0&&this.decomposeLeft(u,B);let U=B.length;for(let ie of b)B.push(ie);if(u>0&&ti(B,U-1),f<this.length){let ie=B.length;this.decomposeRight(f,B),ti(B,ie)}return Gs.of(B)}decomposeLeft(u,f){let b=this.left.length;if(u<=b)return this.left.decomposeLeft(u,f);f.push(this.left),this.break&&(b++,u>=b&&f.push(null)),u>b&&this.right.decomposeLeft(u-b,f)}decomposeRight(u,f){let b=this.left.length,T=b+this.break;if(u>=T)return this.right.decomposeRight(u-T,f);u<b&&this.left.decomposeRight(u,f),this.break&&u<T&&f.push(null),f.push(this.right)}balanced(u,f){return u.size>2*f.size||f.size>2*u.size?Gs.of(this.break?[u,null,f]:[u,f]):(this.left=u,this.right=f,this.height=u.height+f.height,this.outdated=u.outdated||f.outdated,this.size=u.size+f.size,this.length=u.length+this.break+f.length,this)}updateHeight(u,f=0,b=!1,T){let{left:B,right:U}=this,ie=f+B.length+this.break,ce=null;return T&&T.from<=f+B.length&&T.more?ce=B=B.updateHeight(u,f,b,T):B.updateHeight(u,f,b),T&&T.from<=ie+U.length&&T.more?ce=U=U.updateHeight(u,ie,b,T):U.updateHeight(u,ie,b),ce?this.balanced(B,U):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function ti(E,u){let f,b;E[u]==null&&(f=E[u-1])instanceof ln&&(b=E[u+1])instanceof ln&&E.splice(u-1,3,new ln(f.length+1+b.length))}const oo=5;class Oi{constructor(u,f){this.pos=u,this.oracle=f,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=u}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(u,f){if(this.lineStart>-1){let b=Math.min(f,this.lineEnd),T=this.nodes[this.nodes.length-1];T instanceof Sn?T.length+=b-this.pos:(b>this.pos||!this.isCovered)&&this.nodes.push(new Sn(b-this.pos,-1)),this.writtenTo=b,f>b&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=f}point(u,f,b){if(u<f||b.heightRelevant){let T=b.widget?b.widget.estimatedHeight:0,B=b.widget?b.widget.lineBreaks:0;T<0&&(T=this.oracle.lineHeight);let U=f-u;b.block?this.addBlock(new sr(U,T,b)):(U||B||T>=oo)&&this.addLineDeco(T,B,U)}else f>u&&this.span(u,f);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:u,to:f}=this.oracle.doc.lineAt(this.pos);this.lineStart=u,this.lineEnd=f,this.writtenTo<u&&((this.writtenTo<u-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,u-1)),this.nodes.push(null)),this.pos>u&&this.nodes.push(new Sn(this.pos-u,-1)),this.writtenTo=this.pos}blankContent(u,f){let b=new ln(f-u);return this.oracle.doc.lineAt(u).to==f&&(b.flags|=4),b}ensureLine(){this.enterLine();let u=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(u instanceof Sn)return u;let f=new Sn(0,-1);return this.nodes.push(f),f}addBlock(u){this.enterLine();let f=u.deco;f&&f.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(u),this.writtenTo=this.pos=this.pos+u.length,f&&f.endSide>0&&(this.covering=u)}addLineDeco(u,f,b){let T=this.ensureLine();T.length+=b,T.collapsed+=b,T.widgetHeight=Math.max(T.widgetHeight,u),T.breaks+=f,this.writtenTo=this.pos=this.pos+b}finish(u){let f=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(f instanceof Sn)&&!this.isCovered?this.nodes.push(new Sn(0,-1)):(this.writtenTo<this.pos||f==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let b=u;for(let T of this.nodes)T instanceof Sn&&T.updateHeight(this.oracle,b),b+=T?T.length:1;return this.nodes}static build(u,f,b,T){let B=new Oi(b,u);return xe.Xs.spans(f,b,T,B,0),B.finish(b)}}function Fr(E,u,f){let b=new _s;return xe.Xs.compare(E,u,f,b,0),b.changes}class _s{constructor(){this.changes=[]}compareRange(){}comparePoint(u,f,b,T){(u<f||b&&b.heightRelevant||T&&T.heightRelevant)&&Wr(u,f,this.changes,5)}}function Lo(E,u){let f=E.getBoundingClientRect(),b=E.ownerDocument,T=b.defaultView||window,B=Math.max(0,f.left),U=Math.min(T.innerWidth,f.right),ie=Math.max(0,f.top),ce=Math.min(T.innerHeight,f.bottom);for(let _e=E.parentNode;_e&&_e!=b.body;)if(_e.nodeType==1){let Oe=_e,lt=window.getComputedStyle(Oe);if((Oe.scrollHeight>Oe.clientHeight||Oe.scrollWidth>Oe.clientWidth)&&lt.overflow!="visible"){let gt=Oe.getBoundingClientRect();B=Math.max(B,gt.left),U=Math.min(U,gt.right),ie=Math.max(ie,gt.top),ce=_e==E.parentNode?gt.bottom:Math.min(ce,gt.bottom)}_e=lt.position=="absolute"||lt.position=="fixed"?Oe.offsetParent:Oe.parentNode}else if(_e.nodeType==11)_e=_e.host;else break;return{left:B-f.left,right:Math.max(B,U)-f.left,top:ie-(f.top+u),bottom:Math.max(ie,ce)-(f.top+u)}}function or(E,u){let f=E.getBoundingClientRect();return{left:0,right:f.right-f.left,top:u,bottom:f.bottom-(f.top+u)}}class kr{constructor(u,f,b){this.from=u,this.to=f,this.size=b}static same(u,f){if(u.length!=f.length)return!1;for(let b=0;b<u.length;b++){let T=u[b],B=f[b];if(T.from!=B.from||T.to!=B.to||T.size!=B.size)return!1}return!0}draw(u,f){return Qi.replace({widget:new zn(this.size*(f?u.scaleY:u.scaleX),f)}).range(this.from,this.to)}}class zn extends Di{constructor(u,f){super(),this.size=u,this.vertical=f}eq(u){return u.size==this.size&&u.vertical==this.vertical}toDOM(){let u=document.createElement("div");return this.vertical?u.style.height=this.size+"px":(u.style.width=this.size+"px",u.style.height="2px",u.style.display="inline-block"),u}get estimatedHeight(){return this.vertical?this.size:-1}}class Ri{constructor(u){this.state=u,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=Mo,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Pi.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let f=u.facet(wi).some(b=>typeof b!="function"&&b.class=="cm-lineWrapping");this.heightOracle=new Ei(f),this.stateDeco=u.facet(Mn).filter(b=>typeof b!="function"),this.heightMap=Gs.empty().applyChanges(this.stateDeco,xe.xv.empty,this.heightOracle.setDoc(u.doc),[new no(0,0,0,u.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Qi.set(this.lineGaps.map(b=>b.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let u=[this.viewport],{main:f}=this.state.selection;for(let b=0;b<=1;b++){let T=b?f.head:f.anchor;if(!u.some(({from:B,to:U})=>T>=B&&T<=U)){let{from:B,to:U}=this.lineBlockAt(T);u.push(new vo(B,U))}}this.viewports=u.sort((b,T)=>b.from-T.from),this.scaler=this.heightMap.height<=7e6?Mo:new Ws(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,u=>{this.viewportLines.push(this.scaler.scale==1?u:eo(u,this.scaler))})}update(u,f=null){this.state=u.state;let b=this.stateDeco;this.stateDeco=this.state.facet(Mn).filter(Oe=>typeof Oe!="function");let T=u.changedRanges,B=no.extendWithRanges(T,Fr(b,this.stateDeco,u?u.changes:xe.as.empty(this.state.doc.length))),U=this.heightMap.height,ie=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);this.heightMap=this.heightMap.applyChanges(this.stateDeco,u.startState.doc,this.heightOracle.setDoc(this.state.doc),B),this.heightMap.height!=U&&(u.flags|=2),ie?(this.scrollAnchorPos=u.changes.mapPos(ie.from,-1),this.scrollAnchorHeight=ie.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let ce=B.length?this.mapViewport(this.viewport,u.changes):this.viewport;(f&&(f.range.head<ce.from||f.range.head>ce.to)||!this.viewportIsAppropriate(ce))&&(ce=this.getViewport(0,f));let _e=!u.changes.empty||u.flags&2||ce.from!=this.viewport.from||ce.to!=this.viewport.to;this.viewport=ce,this.updateForViewport(),_e&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,u.changes))),u.flags|=this.computeVisibleRanges(),f&&(this.scrollTarget=f),!this.mustEnforceCursorAssoc&&u.selectionSet&&u.view.lineWrapping&&u.state.selection.main.empty&&u.state.selection.main.assoc&&!u.state.facet(ws)&&(this.mustEnforceCursorAssoc=!0)}measure(u){let f=u.contentDOM,b=window.getComputedStyle(f),T=this.heightOracle,B=b.whiteSpace;this.defaultTextDirection=b.direction=="rtl"?Pi.RTL:Pi.LTR;let U=this.heightOracle.mustRefreshForWrapping(B),ie=f.getBoundingClientRect(),ce=U||this.mustMeasureContent||this.contentDOMHeight!=ie.height;this.contentDOMHeight=ie.height,this.mustMeasureContent=!1;let _e=0,Oe=0;if(ie.width&&ie.height){let{scaleX:Vr,scaleY:Ds}=pi(f,ie);(Vr>.005&&Math.abs(this.scaleX-Vr)>.005||Ds>.005&&Math.abs(this.scaleY-Ds)>.005)&&(this.scaleX=Vr,this.scaleY=Ds,_e|=8,U=ce=!0)}let lt=(parseInt(b.paddingTop)||0)*this.scaleY,gt=(parseInt(b.paddingBottom)||0)*this.scaleY;(this.paddingTop!=lt||this.paddingBottom!=gt)&&(this.paddingTop=lt,this.paddingBottom=gt,_e|=10),this.editorWidth!=u.scrollDOM.clientWidth&&(T.lineWrapping&&(ce=!0),this.editorWidth=u.scrollDOM.clientWidth,_e|=8);let wt=u.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=wt&&(this.scrollAnchorHeight=-1,this.scrollTop=wt),this.scrolledToBottom=ze(u.scrollDOM);let rn=(this.printing?or:Lo)(f,this.paddingTop),Cn=rn.top-this.pixelViewport.top,un=rn.bottom-this.pixelViewport.bottom;this.pixelViewport=rn;let Hn=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(Hn!=this.inView&&(this.inView=Hn,Hn&&(ce=!0)),!this.inView&&!this.scrollTarget)return 0;let Rr=ie.width;if((this.contentDOMWidth!=Rr||this.editorHeight!=u.scrollDOM.clientHeight)&&(this.contentDOMWidth=ie.width,this.editorHeight=u.scrollDOM.clientHeight,_e|=8),ce){let Vr=u.docView.measureVisibleLineHeights(this.viewport);if(T.mustRefreshForHeights(Vr)&&(U=!0),U||T.lineWrapping&&Math.abs(Rr-this.contentDOMWidth)>T.charWidth){let{lineHeight:Ds,charWidth:us,textHeight:Aa}=u.docView.measureTextSize();U=Ds>0&&T.refresh(B,Ds,us,Aa,Rr/us,Vr),U&&(u.docView.minWidth=0,_e|=8)}Cn>0&&un>0?Oe=Math.max(Cn,un):Cn<0&&un<0&&(Oe=Math.min(Cn,un)),T.heightChanged=!1;for(let Ds of this.viewports){let us=Ds.from==this.viewport.from?Vr:u.docView.measureVisibleLineHeights(Ds);this.heightMap=(U?Gs.empty().applyChanges(this.stateDeco,xe.xv.empty,this.heightOracle,[new no(0,0,0,u.state.doc.length)]):this.heightMap).updateHeight(T,0,U,new Xr(Ds.from,us))}T.heightChanged&&(_e|=2)}let Fs=!this.viewportIsAppropriate(this.viewport,Oe)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return Fs&&(this.viewport=this.getViewport(Oe,this.scrollTarget)),this.updateForViewport(),(_e&2||Fs)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(U?[]:this.lineGaps,u)),_e|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,u.docView.enforceCursorAssoc()),_e}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(u,f){let b=.5-Math.max(-.5,Math.min(.5,u/1e3/2)),T=this.heightMap,B=this.heightOracle,{visibleTop:U,visibleBottom:ie}=this,ce=new vo(T.lineAt(U-b*1e3,Ci.ByHeight,B,0,0).from,T.lineAt(ie+(1-b)*1e3,Ci.ByHeight,B,0,0).to);if(f){let{head:_e}=f.range;if(_e<ce.from||_e>ce.to){let Oe=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),lt=T.lineAt(_e,Ci.ByPos,B,0,0),gt;f.y=="center"?gt=(lt.top+lt.bottom)/2-Oe/2:f.y=="start"||f.y=="nearest"&&_e<ce.from?gt=lt.top:gt=lt.bottom-Oe,ce=new vo(T.lineAt(gt-1e3/2,Ci.ByHeight,B,0,0).from,T.lineAt(gt+Oe+1e3/2,Ci.ByHeight,B,0,0).to)}}return ce}mapViewport(u,f){let b=f.mapPos(u.from,-1),T=f.mapPos(u.to,1);return new vo(this.heightMap.lineAt(b,Ci.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(T,Ci.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:u,to:f},b=0){if(!this.inView)return!0;let{top:T}=this.heightMap.lineAt(u,Ci.ByPos,this.heightOracle,0,0),{bottom:B}=this.heightMap.lineAt(f,Ci.ByPos,this.heightOracle,0,0),{visibleTop:U,visibleBottom:ie}=this;return(u==0||T<=U-Math.max(10,Math.min(-b,250)))&&(f==this.state.doc.length||B>=ie+Math.max(10,Math.min(b,250)))&&T>U-2*1e3&&B<ie+2*1e3}mapLineGaps(u,f){if(!u.length||f.empty)return u;let b=[];for(let T of u)f.touchesRange(T.from,T.to)||b.push(new kr(f.mapPos(T.from),f.mapPos(T.to),T.size));return b}ensureLineGaps(u,f){let b=this.heightOracle.lineWrapping,T=b?1e4:2e3,B=T>>1,U=T<<1;if(this.defaultTextDirection!=Pi.LTR&&!b)return[];let ie=[],ce=(_e,Oe,lt,gt)=>{if(Oe-_e<B)return;let wt=this.state.selection.main,rn=[wt.from];wt.empty||rn.push(wt.to);for(let un of rn)if(un>_e&&un<Oe){ce(_e,un-10,lt,gt),ce(un+10,Oe,lt,gt);return}let Cn=Ti(u,un=>un.from>=lt.from&&un.to<=lt.to&&Math.abs(un.from-_e)<B&&Math.abs(un.to-Oe)<B&&!rn.some(Hn=>un.from<Hn&&un.to>Hn));if(!Cn){if(Oe<lt.to&&f&&b&&f.visibleRanges.some(un=>un.from<=Oe&&un.to>=Oe)){let un=f.moveToLineBoundary(xe.jT.cursor(Oe),!1,!0).head;un>_e&&(Oe=un)}Cn=new kr(_e,Oe,this.gapSize(lt,_e,Oe,gt))}ie.push(Cn)};for(let _e of this.viewportLines){if(_e.length<U)continue;let Oe=zo(_e.from,_e.to,this.stateDeco);if(Oe.total<U)continue;let lt=this.scrollTarget?this.scrollTarget.range.head:null,gt,wt;if(b){let rn=T/this.heightOracle.lineLength*this.heightOracle.lineHeight,Cn,un;if(lt!=null){let Hn=oi(Oe,lt),Rr=((this.visibleBottom-this.visibleTop)/2+rn)/_e.height;Cn=Hn-Rr,un=Hn+Rr}else Cn=(this.visibleTop-_e.top-rn)/_e.height,un=(this.visibleBottom-_e.top+rn)/_e.height;gt=Jr(Oe,Cn),wt=Jr(Oe,un)}else{let rn=Oe.total*this.heightOracle.charWidth,Cn=T*this.heightOracle.charWidth,un,Hn;if(lt!=null){let Rr=oi(Oe,lt),Fs=((this.pixelViewport.right-this.pixelViewport.left)/2+Cn)/rn;un=Rr-Fs,Hn=Rr+Fs}else un=(this.pixelViewport.left-Cn)/rn,Hn=(this.pixelViewport.right+Cn)/rn;gt=Jr(Oe,un),wt=Jr(Oe,Hn)}gt>_e.from&&ce(_e.from,gt,_e,Oe),wt<_e.to&&ce(wt,_e.to,_e,Oe)}return ie}gapSize(u,f,b,T){let B=oi(T,b)-oi(T,f);return this.heightOracle.lineWrapping?u.height*B:T.total*this.heightOracle.charWidth*B}updateLineGaps(u){kr.same(u,this.lineGaps)||(this.lineGaps=u,this.lineGapDeco=Qi.set(u.map(f=>f.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(){let u=this.stateDeco;this.lineGaps.length&&(u=u.concat(this.lineGapDeco));let f=[];xe.Xs.spans(u,this.viewport.from,this.viewport.to,{span(T,B){f.push({from:T,to:B})},point(){}},20);let b=f.length!=this.visibleRanges.length||this.visibleRanges.some((T,B)=>T.from!=f[B].from||T.to!=f[B].to);return this.visibleRanges=f,b?4:0}lineBlockAt(u){return u>=this.viewport.from&&u<=this.viewport.to&&this.viewportLines.find(f=>f.from<=u&&f.to>=u)||eo(this.heightMap.lineAt(u,Ci.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(u){return eo(this.heightMap.lineAt(this.scaler.fromDOM(u),Ci.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(u){let f=this.lineBlockAtHeight(u+8);return f.from>=this.viewport.from||this.viewportLines[0].top-u>200?f:this.viewportLines[0]}elementAtHeight(u){return eo(this.heightMap.blockAt(this.scaler.fromDOM(u),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class vo{constructor(u,f){this.from=u,this.to=f}}function zo(E,u,f){let b=[],T=E,B=0;return xe.Xs.spans(f,E,u,{span(){},point(U,ie){U>T&&(b.push({from:T,to:U}),B+=U-T),T=ie}},20),T<u&&(b.push({from:T,to:u}),B+=u-T),{total:B,ranges:b}}function Jr({total:E,ranges:u},f){if(f<=0)return u[0].from;if(f>=1)return u[u.length-1].to;let b=Math.floor(E*f);for(let T=0;;T++){let{from:B,to:U}=u[T],ie=U-B;if(b<=ie)return B+b;b-=ie}}function oi(E,u){let f=0;for(let{from:b,to:T}of E.ranges){if(u<=T){f+=u-b;break}f+=T-b}return f/E.total}function Ti(E,u){for(let f of E)if(u(f))return f}const Mo={toDOM(E){return E},fromDOM(E){return E},scale:1};class Ws{constructor(u,f,b){let T=0,B=0,U=0;this.viewports=b.map(({from:ie,to:ce})=>{let _e=f.lineAt(ie,Ci.ByPos,u,0,0).top,Oe=f.lineAt(ce,Ci.ByPos,u,0,0).bottom;return T+=Oe-_e,{from:ie,to:ce,top:_e,bottom:Oe,domTop:0,domBottom:0}}),this.scale=(7e6-T)/(f.height-T);for(let ie of this.viewports)ie.domTop=U+(ie.top-B)*this.scale,U=ie.domBottom=ie.domTop+(ie.bottom-ie.top),B=ie.bottom}toDOM(u){for(let f=0,b=0,T=0;;f++){let B=f<this.viewports.length?this.viewports[f]:null;if(!B||u<B.top)return T+(u-b)*this.scale;if(u<=B.bottom)return B.domTop+(u-B.top);b=B.bottom,T=B.domBottom}}fromDOM(u){for(let f=0,b=0,T=0;;f++){let B=f<this.viewports.length?this.viewports[f]:null;if(!B||u<B.domTop)return b+(u-T)/this.scale;if(u<=B.domBottom)return B.top+(u-B.domTop);b=B.bottom,T=B.domBottom}}}function eo(E,u){if(u.scale==1)return E;let f=u.toDOM(E.top),b=u.toDOM(E.bottom);return new lr(E.from,E.length,f,b-f,Array.isArray(E._content)?E._content.map(T=>eo(T,u)):E._content)}const Es=xe.r$.define({combine:E=>E.join(" ")}),xs=xe.r$.define({combine:E=>E.indexOf(!0)>-1}),Io=It.V.newName(),Li=It.V.newName(),Qa=It.V.newName(),pu={"&light":"."+Li,"&dark":"."+Qa};function Ll(E,u,f){return new It.V(u,{finish(b){return/&/.test(b)?b.replace(/&\w*/,T=>{if(T=="&")return E;if(!f||!f[T])throw new RangeError(`Unsupported selector: ${T}`);return f[T]}):E+" "+b}})}const $a=Ll("."+Io,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},pu),wa="\uFFFF";class Ko{constructor(u,f){this.points=u,this.text="",this.lineSeparator=f.facet(xe.yy.lineSeparator)}append(u){this.text+=u}lineBreak(){this.text+=wa}readRange(u,f){if(!u)return this;let b=u.parentNode;for(let T=u;;){this.findPointBefore(b,T);let B=this.text.length;this.readNode(T);let U=T.nextSibling;if(U==f)break;let ie=St.get(T),ce=St.get(U);(ie&&ce?ie.breakAfter:(ie?ie.breakAfter:qt(T))||qt(U)&&(T.nodeName!="BR"||T.cmIgnore)&&this.text.length>B)&&this.lineBreak(),T=U}return this.findPointBefore(b,f),this}readTextNode(u){let f=u.nodeValue;for(let b of this.points)b.node==u&&(b.pos=this.text.length+Math.min(b.offset,f.length));for(let b=0,T=this.lineSeparator?null:/\r\n?|\n/g;;){let B=-1,U=1,ie;if(this.lineSeparator?(B=f.indexOf(this.lineSeparator,b),U=this.lineSeparator.length):(ie=T.exec(f))&&(B=ie.index,U=ie[0].length),this.append(f.slice(b,B<0?f.length:B)),B<0)break;if(this.lineBreak(),U>1)for(let ce of this.points)ce.node==u&&ce.pos>this.text.length&&(ce.pos-=U-1);b=B+U}}readNode(u){if(u.cmIgnore)return;let f=St.get(u),b=f&&f.overrideDOMText;if(b!=null){this.findPointInside(u,b.length);for(let T=b.iter();!T.next().done;)T.lineBreak?this.lineBreak():this.append(T.value)}else u.nodeType==3?this.readTextNode(u):u.nodeName=="BR"?u.nextSibling&&this.lineBreak():u.nodeType==1&&this.readRange(u.firstChild,null)}findPointBefore(u,f){for(let b of this.points)b.node==u&&u.childNodes[b.offset]==f&&(b.pos=this.text.length)}findPointInside(u,f){for(let b of this.points)(u.nodeType==3?b.node==u:u.contains(b.node))&&(b.pos=this.text.length+(So(u,b.node,b.offset)?f:0))}}function So(E,u,f){for(;;){if(!u||f<ss(u))return!1;if(u==E)return!0;f=$t(u)+1,u=u.parentNode}}class Ks{constructor(u,f){this.node=u,this.offset=f,this.pos=-1}}class Ia{constructor(u,f,b,T){this.typeOver=T,this.bounds=null,this.text="";let{impreciseHead:B,impreciseAnchor:U}=u.docView;if(u.state.readOnly&&f>-1)this.newSel=null;else if(f>-1&&(this.bounds=u.docView.domBoundsAround(f,b,0))){let ie=B||U?[]:Ea(u),ce=new Ko(ie,u.state);ce.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=ce.text,this.newSel=Mt(ie,this.bounds.from)}else{let ie=u.observer.selectionRange,ce=B&&B.node==ie.focusNode&&B.offset==ie.focusOffset||!vn(u.contentDOM,ie.focusNode)?u.state.selection.main.head:u.docView.posFromDOM(ie.focusNode,ie.focusOffset),_e=U&&U.node==ie.anchorNode&&U.offset==ie.anchorOffset||!vn(u.contentDOM,ie.anchorNode)?u.state.selection.main.anchor:u.docView.posFromDOM(ie.anchorNode,ie.anchorOffset),Oe=u.viewport;if((Ge.ios||Ge.chrome)&&u.state.selection.main.empty&&ce!=_e&&(Oe.from>0||Oe.to<u.state.doc.length)){let lt=Math.min(ce,_e),gt=Math.max(ce,_e),wt=Oe.from-lt,rn=Oe.to-gt;(wt==0||wt==1||lt==0)&&(rn==0||rn==-1||gt==u.state.doc.length)&&(ce=0,_e=u.state.doc.length)}this.newSel=xe.jT.single(_e,ce)}}}function Xa(E,u){let f,{newSel:b}=u,T=E.state.selection.main,B=E.inputState.lastKeyTime>Date.now()-100?E.inputState.lastKeyCode:-1;if(u.bounds){let{from:U,to:ie}=u.bounds,ce=T.from,_e=null;(B===8||Ge.android&&u.text.length<ie-U)&&(ce=T.to,_e="end");let Oe=ua(E.state.doc.sliceString(U,ie,wa),u.text,ce-U,_e);Oe&&(Ge.chrome&&B==13&&Oe.toB==Oe.from+2&&u.text.slice(Oe.from,Oe.toB)==wa+wa&&Oe.toB--,f={from:U+Oe.from,to:U+Oe.toA,insert:xe.xv.of(u.text.slice(Oe.from,Oe.toB).split(wa))})}else b&&(!E.hasFocus&&E.state.facet(so)||b.main.eq(T))&&(b=null);if(!f&&!b)return!1;if(!f&&u.typeOver&&!T.empty&&b&&b.main.empty?f={from:T.from,to:T.to,insert:E.state.doc.slice(T.from,T.to)}:f&&f.from>=T.from&&f.to<=T.to&&(f.from!=T.from||f.to!=T.to)&&T.to-T.from-(f.to-f.from)<=4?f={from:T.from,to:T.to,insert:E.state.doc.slice(T.from,f.from).append(f.insert).append(E.state.doc.slice(f.to,T.to))}:(Ge.mac||Ge.android)&&f&&f.from==f.to&&f.from==T.head-1&&/^\. ?$/.test(f.insert.toString())&&E.contentDOM.getAttribute("autocorrect")=="off"?(b&&f.insert.length==2&&(b=xe.jT.single(b.main.anchor-1,b.main.head-1)),f={from:T.from,to:T.to,insert:xe.xv.of([" "])}):Ge.chrome&&f&&f.from==f.to&&f.from==T.head&&f.insert.toString()==`
 `&&E.lineWrapping&&(b&&(b=xe.jT.single(b.main.anchor-1,b.main.head-1)),f={from:T.from,to:T.to,insert:xe.xv.of([" "])}),f){if(Ge.ios&&E.inputState.flushIOSKey(f)||Ge.android&&(f.to==T.to&&(f.from==T.from||f.from==T.from-1&&E.state.sliceDoc(f.from,T.from)==" ")&&f.insert.length==1&&f.insert.lines==2&&Is(E.contentDOM,"Enter",13)||(f.from==T.from-1&&f.to==T.to&&f.insert.length==0||B==8&&f.insert.length<f.to-f.from&&f.to>T.head)&&Is(E.contentDOM,"Backspace",8)||f.from==T.from&&f.to==T.to+1&&f.insert.length==0&&Is(E.contentDOM,"Delete",46)))return!0;let U=f.insert.toString();E.inputState.composing>=0&&E.inputState.composing++;let ie,ce=()=>ie||(ie=Jl(E,f,b));return E.state.facet(Tn).some(_e=>_e(E,f.from,f.to,U,ce))||E.dispatch(ce()),!0}else if(b&&!b.main.eq(T)){let U=!1,ie="select";return E.inputState.lastSelectionTime>Date.now()-50&&(E.inputState.lastSelectionOrigin=="select"&&(U=!0),ie=E.inputState.lastSelectionOrigin),E.dispatch({selection:b,scrollIntoView:U,userEvent:ie}),!0}else return!1}function Jl(E,u,f){let b,T=E.state,B=T.selection.main;if(u.from>=B.from&&u.to<=B.to&&u.to-u.from>=(B.to-B.from)/3&&(!f||f.main.empty&&f.main.from==u.from+u.insert.length)&&E.inputState.composing<0){let ie=B.from<u.from?T.sliceDoc(B.from,u.from):"",ce=B.to>u.to?T.sliceDoc(u.to,B.to):"";b=T.replaceSelection(E.state.toText(ie+u.insert.sliceString(0,void 0,E.state.lineBreak)+ce))}else{let ie=T.changes(u),ce=f&&f.main.to<=ie.newLength?f.main:void 0;if(T.selection.ranges.length>1&&E.inputState.composing>=0&&u.to<=B.to&&u.to>=B.to-10){let _e=E.state.sliceDoc(u.from,u.to),Oe,lt=f&&Z(E,f.main.head);if(lt){let rn=u.insert.length-(u.to-u.from);Oe={from:lt.from,to:lt.to-rn}}else Oe=E.state.doc.lineAt(B.head);let gt=B.to-u.to,wt=B.to-B.from;b=T.changeByRange(rn=>{if(rn.from==B.from&&rn.to==B.to)return{changes:ie,range:ce||rn.map(ie)};let Cn=rn.to-gt,un=Cn-_e.length;if(rn.to-rn.from!=wt||E.state.sliceDoc(un,Cn)!=_e||rn.to>=Oe.from&&rn.from<=Oe.to)return{range:rn};let Hn=T.changes({from:un,to:Cn,insert:u.insert}),Rr=rn.to-B.to;return{changes:Hn,range:ce?xe.jT.range(Math.max(0,ce.anchor+Rr),Math.max(0,ce.head+Rr)):rn.map(Hn)}})}else b={changes:ie,selection:ce&&T.selection.replaceRange(ce)}}let U="input.type";return(E.composing||E.inputState.compositionPendingChange&&E.inputState.compositionEndedAt>Date.now()-50)&&(E.inputState.compositionPendingChange=!1,U+=".compose",E.inputState.compositionFirstChange&&(U+=".start",E.inputState.compositionFirstChange=!1)),T.update(b,{userEvent:U,scrollIntoView:!0})}function ua(E,u,f,b){let T=Math.min(E.length,u.length),B=0;for(;B<T&&E.charCodeAt(B)==u.charCodeAt(B);)B++;if(B==T&&E.length==u.length)return null;let U=E.length,ie=u.length;for(;U>0&&ie>0&&E.charCodeAt(U-1)==u.charCodeAt(ie-1);)U--,ie--;if(b=="end"){let ce=Math.max(0,B-Math.min(U,ie));f-=U+ce-B}if(U<B&&E.length<u.length){let ce=f<=B&&f>=U?B-f:0;B-=ce,ie=B+(ie-U),U=B}else if(ie<B){let ce=f<=B&&f>=ie?B-f:0;B-=ce,U=B+(U-ie),ie=B}return{from:B,toA:U,toB:ie}}function Ea(E){let u=[];if(E.root.activeElement!=E.contentDOM)return u;let{anchorNode:f,anchorOffset:b,focusNode:T,focusOffset:B}=E.observer.selectionRange;return f&&(u.push(new Ks(f,b)),(T!=f||B!=b)&&u.push(new Ks(T,B))),u}function Mt(E,u){if(E.length==0)return null;let f=E[0].pos,b=E.length==2?E[1].pos:f;return f>-1&&b>-1?xe.jT.single(f+u,b+u):null}const $i={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Ir=Ge.ie&&Ge.ie_version<=11;class es{constructor(u){this.view=u,this.active=!1,this.selectionRange=new cs,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=u.contentDOM,this.observer=new MutationObserver(f=>{for(let b of f)this.queue.push(b);(Ge.ie&&Ge.ie_version<=11||Ge.ios&&u.composing)&&f.some(b=>b.type=="childList"&&b.removedNodes.length||b.type=="characterData"&&b.oldValue.length>b.target.nodeValue.length)?this.flushSoon():this.flush()}),Ir&&(this.onCharData=f=>{this.queue.push({target:f.target,type:"characterData",oldValue:f.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var f;((f=this.view.docView)===null||f===void 0?void 0:f.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(u.scrollDOM)),this.addWindowListeners(this.win=u.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(f=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),f.length>0&&f[f.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(f=>{f.length>0&&f[f.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(u){this.view.inputState.runHandlers("scroll",u),this.intersecting&&this.view.measure()}onScroll(u){this.intersecting&&this.flush(!1),this.onScrollChanged(u)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(u){u.type=="change"&&!u.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(u){if(this.gapIntersection&&(u.length!=this.gaps.length||this.gaps.some((f,b)=>f!=u[b]))){this.gapIntersection.disconnect();for(let f of u)this.gapIntersection.observe(f);this.gaps=u}}onSelectionChange(u){let f=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:b}=this,T=this.selectionRange;if(b.state.facet(so)?b.root.activeElement!=this.dom:!Si(b.dom,T))return;let B=T.anchorNode&&b.docView.nearest(T.anchorNode);if(B&&B.ignoreEvent(u)){f||(this.selectionChanged=!1);return}(Ge.ie&&Ge.ie_version<=11||Ge.android&&Ge.chrome)&&!b.state.selection.main.empty&&T.focusNode&&Un(T.focusNode,T.focusOffset,T.anchorNode,T.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:u}=this,f=In(u.root);if(!f)return!1;let b=Ge.safari&&u.root.nodeType==11&&gn(this.dom.ownerDocument)==this.dom&&Po(this.view,f)||f;if(!b||this.selectionRange.eq(b))return!1;let T=Si(this.dom,b);return T&&!this.selectionChanged&&u.inputState.lastFocusTime>Date.now()-200&&u.inputState.lastTouchTime<Date.now()-300&&$e(this.dom,b)?(this.view.inputState.lastFocusTime=0,u.docView.updateSelection(),!1):(this.selectionRange.setRange(b),T&&(this.selectionChanged=!0),!0)}setSelectionRange(u,f){this.selectionRange.set(u.node,u.offset,f.node,f.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let u=0,f=null;for(let b=this.dom;b;)if(b.nodeType==1)!f&&u<this.scrollTargets.length&&this.scrollTargets[u]==b?u++:f||(f=this.scrollTargets.slice(0,u)),f&&f.push(b),b=b.assignedSlot||b.parentNode;else if(b.nodeType==11)b=b.host;else break;if(u<this.scrollTargets.length&&!f&&(f=this.scrollTargets.slice(0,u)),f){for(let b of this.scrollTargets)b.removeEventListener("scroll",this.onScroll);for(let b of this.scrollTargets=f)b.addEventListener("scroll",this.onScroll)}}ignore(u){if(!this.active)return u();try{return this.stop(),u()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,$i),Ir&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Ir&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(u,f){var b;if(!this.delayedAndroidKey){let T=()=>{let B=this.delayedAndroidKey;B&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=B.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&B.force&&Is(this.dom,B.key,B.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(T)}(!this.delayedAndroidKey||u=="Enter")&&(this.delayedAndroidKey={key:u,keyCode:f,force:this.lastChange<Date.now()-50||!!(!((b=this.delayedAndroidKey)===null||b===void 0)&&b.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let u of this.observer.takeRecords())this.queue.push(u);return this.queue}processRecords(){let u=this.pendingRecords();u.length&&(this.queue=[]);let f=-1,b=-1,T=!1;for(let B of u){let U=this.readMutation(B);U&&(U.typeOver&&(T=!0),f==-1?{from:f,to:b}=U:(f=Math.min(U.from,f),b=Math.max(U.to,b)))}return{from:f,to:b,typeOver:T}}readChange(){let{from:u,to:f,typeOver:b}=this.processRecords(),T=this.selectionChanged&&Si(this.dom,this.selectionRange);if(u<0&&!T)return null;u>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let B=new Ia(this.view,u,f,b);return this.view.docView.domChanged={newSel:B.newSel?B.newSel.main:null},B}flush(u=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;u&&this.readSelectionRange();let f=this.readChange();if(!f)return this.view.requestMeasure(),!1;let b=this.view.state,T=Xa(this.view,f);return this.view.state==b&&this.view.update([]),T}readMutation(u){let f=this.view.docView.nearest(u.target);if(!f||f.ignoreMutation(u))return null;if(f.markDirty(u.type=="attributes"),u.type=="attributes"&&(f.flags|=4),u.type=="childList"){let b=Ps(f,u.previousSibling||u.target.previousSibling,-1),T=Ps(f,u.nextSibling||u.target.nextSibling,1);return{from:b?f.posAfter(b):f.posAtStart,to:T?f.posBefore(T):f.posAtEnd,typeOver:!1}}else return u.type=="characterData"?{from:f.posAtStart,to:f.posAtEnd,typeOver:u.target.nodeValue==u.oldValue}:null}setWindow(u){u!=this.win&&(this.removeWindowListeners(this.win),this.win=u,this.addWindowListeners(this.win))}addWindowListeners(u){u.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener("change",this.onPrint):u.addEventListener("beforeprint",this.onPrint),u.addEventListener("scroll",this.onScroll),u.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(u){u.removeEventListener("scroll",this.onScroll),u.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener("change",this.onPrint):u.removeEventListener("beforeprint",this.onPrint),u.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var u,f,b;this.stop(),(u=this.intersection)===null||u===void 0||u.disconnect(),(f=this.gapIntersection)===null||f===void 0||f.disconnect(),(b=this.resizeScroll)===null||b===void 0||b.disconnect();for(let T of this.scrollTargets)T.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function Ps(E,u,f){for(;u;){let b=St.get(u);if(b&&b.parent==E)return b;let T=u.parentNode;u=T!=E.dom?T:f>0?u.nextSibling:u.previousSibling}return null}function Rn(E,u){let f=u.startContainer,b=u.startOffset,T=u.endContainer,B=u.endOffset,U=E.docView.domAtPos(E.state.selection.main.anchor);return Un(U.node,U.offset,T,B)&&([f,b,T,B]=[T,B,f,b]),{anchorNode:f,anchorOffset:b,focusNode:T,focusOffset:B}}function Po(E,u){if(u.getComposedRanges){let T=u.getComposedRanges(E.root)[0];if(T)return Rn(E,T)}let f=null;function b(T){T.preventDefault(),T.stopImmediatePropagation(),f=T.getTargetRanges()[0]}return E.contentDOM.addEventListener("beforeinput",b,!0),E.dom.ownerDocument.execCommand("indent"),E.contentDOM.removeEventListener("beforeinput",b,!0),f?Rn(E,f):null}class Nr{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(u={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),u.parent&&u.parent.appendChild(this.dom);let{dispatch:f}=u;this.dispatchTransactions=u.dispatchTransactions||f&&(b=>b.forEach(T=>f(T,this)))||(b=>this.update(b)),this.dispatch=this.dispatch.bind(this),this._root=u.root||ci(u.parent)||document,this.viewState=new Ri(u.state||xe.yy.create(u)),u.scrollTo&&u.scrollTo.is(Fi)&&(this.viewState.scrollTarget=u.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Os).map(b=>new Oo(b));for(let b of this.plugins)b.update(this);this.observer=new es(this),this.inputState=new La(this),this.inputState.ensureHandlers(this.plugins),this.docView=new go(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure()}dispatch(...u){let f=u.length==1&&u[0]instanceof xe.YW?u:u.length==1&&Array.isArray(u[0])?u[0]:[this.state.update(...u)];this.dispatchTransactions(f,this)}update(u){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let f=!1,b=!1,T,B=this.state;for(let gt of u){if(gt.startState!=B)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");B=gt.state}if(this.destroyed){this.viewState.state=B;return}let U=this.hasFocus,ie=0,ce=null;u.some(gt=>gt.annotation($r))?(this.inputState.notifiedFocused=U,ie=1):U!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=U,ce=kt(B,U),ce||(ie=1));let _e=this.observer.delayedAndroidKey,Oe=null;if(_e?(this.observer.clearDelayedAndroidKey(),Oe=this.observer.readChange(),(Oe&&!this.state.doc.eq(B.doc)||!this.state.selection.eq(B.selection))&&(Oe=null)):this.observer.clear(),B.facet(xe.yy.phrases)!=this.state.facet(xe.yy.phrases))return this.setState(B);T=Eo.create(this,B,u),T.flags|=ie;let lt=this.viewState.scrollTarget;try{this.updateState=2;for(let gt of u){if(lt&&(lt=lt.map(gt.changes)),gt.scrollIntoView){let{main:wt}=gt.state.selection;lt=new pr(wt.empty?wt:xe.jT.cursor(wt.head,wt.head>wt.anchor?-1:1))}for(let wt of gt.effects)wt.is(Fi)&&(lt=wt.value.clip(this.state))}this.viewState.update(T,lt),this.bidiCache=po.update(this.bidiCache,T.changes),T.empty||(this.updatePlugins(T),this.inputState.update(T)),f=this.docView.update(T),this.state.facet(ps)!=this.styleModules&&this.mountStyles(),b=this.updateAttrs(),this.showAnnouncements(u),this.docView.updateSelection(f,u.some(gt=>gt.isUserEvent("select.pointer")))}finally{this.updateState=0}if(T.startState.facet(Es)!=T.state.facet(Es)&&(this.viewState.mustMeasureContent=!0),(f||b||lt||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),f&&this.docViewUpdate(),!T.empty)for(let gt of this.state.facet(xn))try{gt(T)}catch(wt){rt(this.state,wt,"update listener")}(ce||Oe)&&Promise.resolve().then(()=>{ce&&this.state==ce.startState&&this.dispatch(ce),Oe&&!Xa(this,Oe)&&_e.force&&Is(this.contentDOM,_e.key,_e.keyCode)})}setState(u){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=u;return}this.updateState=2;let f=this.hasFocus;try{for(let b of this.plugins)b.destroy(this);this.viewState=new Ri(u),this.plugins=u.facet(Os).map(b=>new Oo(b)),this.pluginMap.clear();for(let b of this.plugins)b.update(this);this.docView.destroy(),this.docView=new go(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}f&&this.focus(),this.requestMeasure()}updatePlugins(u){let f=u.startState.facet(Os),b=u.state.facet(Os);if(f!=b){let T=[];for(let B of b){let U=f.indexOf(B);if(U<0)T.push(new Oo(B));else{let ie=this.plugins[U];ie.mustUpdate=u,T.push(ie)}}for(let B of this.plugins)B.mustUpdate!=u&&B.destroy(this);this.plugins=T,this.pluginMap.clear()}else for(let T of this.plugins)T.mustUpdate=u;for(let T=0;T<this.plugins.length;T++)this.plugins[T].update(this);f!=b&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let u of this.plugins){let f=u.value;if(f&&f.docViewUpdate)try{f.docViewUpdate(this)}catch(b){rt(this.state,b,"doc view update listener")}}}measure(u=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,u&&this.observer.forceFlush();let f=null,b=this.scrollDOM,T=b.scrollTop*this.scaleY,{scrollAnchorPos:B,scrollAnchorHeight:U}=this.viewState;Math.abs(T-this.viewState.scrollTop)>1&&(U=-1),this.viewState.scrollAnchorHeight=-1;try{for(let ie=0;;ie++){if(U<0)if(ze(b))B=-1,U=this.viewState.heightMap.height;else{let wt=this.viewState.scrollAnchorAt(T);B=wt.from,U=wt.top}this.updateState=1;let ce=this.viewState.measure(this);if(!ce&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(ie>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let _e=[];ce&4||([this.measureRequests,_e]=[_e,this.measureRequests]);let Oe=_e.map(wt=>{try{return wt.read(this)}catch(rn){return rt(this.state,rn),Ca}}),lt=Eo.create(this,this.state,[]),gt=!1;lt.flags|=ce,f?f.flags|=ce:f=lt,this.updateState=2,lt.empty||(this.updatePlugins(lt),this.inputState.update(lt),this.updateAttrs(),gt=this.docView.update(lt),gt&&this.docViewUpdate());for(let wt=0;wt<_e.length;wt++)if(Oe[wt]!=Ca)try{let rn=_e[wt];rn.write&&rn.write(Oe[wt],this)}catch(rn){rt(this.state,rn)}if(gt&&this.docView.updateSelection(!0),!lt.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,U=-1;continue}else{let rn=(B<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(B).top)-U;if(rn>1||rn<-1){T=T+rn,b.scrollTop=T/this.scaleY,U=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(f&&!f.empty)for(let ie of this.state.facet(xn))ie(f)}get themeClasses(){return Io+" "+(this.state.facet(xs)?Qa:Li)+" "+this.state.facet(Es)}updateAttrs(){let u=fu(this,nr,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),f={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(so)?"true":"false",class:"cm-content",style:`${Ge.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(f["aria-readonly"]="true"),fu(this,wi,f);let b=this.observer.ignore(()=>{let T=xr(this.contentDOM,this.contentAttrs,f),B=xr(this.dom,this.editorAttrs,u);return T||B});return this.editorAttrs=u,this.contentAttrs=f,b}showAnnouncements(u){let f=!0;for(let b of u)for(let T of b.effects)if(T.is(Nr.announce)){f&&(this.announceDOM.textContent=""),f=!1;let B=this.announceDOM.appendChild(document.createElement("div"));B.textContent=T.value}}mountStyles(){this.styleModules=this.state.facet(ps);let u=this.state.facet(Nr.cspNonce);It.V.mount(this.root,this.styleModules.concat($a).reverse(),u?{nonce:u}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(u){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),u){if(this.measureRequests.indexOf(u)>-1)return;if(u.key!=null){for(let f=0;f<this.measureRequests.length;f++)if(this.measureRequests[f].key===u.key){this.measureRequests[f]=u;return}}this.measureRequests.push(u)}}plugin(u){let f=this.pluginMap.get(u);return(f===void 0||f&&f.spec!=u)&&this.pluginMap.set(u,f=this.plugins.find(b=>b.spec==u)||null),f&&f.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(u){return this.readMeasured(),this.viewState.elementAtHeight(u)}lineBlockAtHeight(u){return this.readMeasured(),this.viewState.lineBlockAtHeight(u)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(u){return this.viewState.lineBlockAt(u)}get contentHeight(){return this.viewState.contentHeight}moveByChar(u,f,b){return Ro(this,u,Zo(this,u,f,b))}moveByGroup(u,f){return Ro(this,u,Zo(this,u,f,b=>ma(this,u.head,b)))}visualLineSide(u,f){let b=this.bidiSpans(u),T=this.textDirectionAt(u.from),B=b[f?b.length-1:0];return xe.jT.cursor(B.side(f,T)+u.from,B.forward(!f,T)?1:-1)}moveToLineBoundary(u,f,b=!0){return si(this,u,f,b)}moveVertically(u,f,b){return Ro(this,u,ul(this,u,f,b))}domAtPos(u){return this.docView.domAtPos(u)}posAtDOM(u,f=0){return this.docView.posFromDOM(u,f)}posAtCoords(u,f=!0){return this.readMeasured(),Uo(this,u,f)}coordsAtPos(u,f=1){this.readMeasured();let b=this.docView.coordsAt(u,f);if(!b||b.left==b.right)return b;let T=this.state.doc.lineAt(u),B=this.bidiSpans(T),U=B[Qr.find(B,u-T.from,-1,f)];return Dr(b,U.dir==Pi.LTR==f>0)}coordsForChar(u){return this.readMeasured(),this.docView.coordsForChar(u)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(u){return!this.state.facet(vi)||u<this.viewport.from||u>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(u))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(u){if(u.length>cl)return V(u.length);let f=this.textDirectionAt(u.from),b;for(let B of this.bidiCache)if(B.from==u.from&&B.dir==f&&(B.fresh||gs(B.isolates,b=aa(this,u))))return B.order;b||(b=aa(this,u));let T=P(u.text,f,b);return this.bidiCache.push(new po(u.from,u.to,f,b,!0,T)),T}get hasFocus(){var u;return(this.dom.ownerDocument.hasFocus()||Ge.safari&&((u=this.inputState)===null||u===void 0?void 0:u.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{jr(this.contentDOM),this.docView.updateSelection()})}setRoot(u){this._root!=u&&(this._root=u,this.observer.setWindow((u.nodeType==9?u:u.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let u of this.plugins)u.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(u,f={}){return Fi.of(new pr(typeof u=="number"?xe.jT.cursor(u):u,f.y,f.x,f.yMargin,f.xMargin))}scrollSnapshot(){let{scrollTop:u,scrollLeft:f}=this.scrollDOM,b=this.viewState.scrollAnchorAt(u);return Fi.of(new pr(xe.jT.cursor(b.from),"start","start",b.top-u,f,!0))}static domEventHandlers(u){return ds.define(()=>({}),{eventHandlers:u})}static domEventObservers(u){return ds.define(()=>({}),{eventObservers:u})}static theme(u,f){let b=It.V.newName(),T=[Es.of(b),ps.of(Ll(`.${b}`,u))];return f&&f.dark&&T.push(xs.of(!0)),T}static baseTheme(u){return xe.Wl.lowest(ps.of(Ll("."+Io,u,pu)))}static findFromDOM(u){var f;let b=u.querySelector(".cm-content"),T=b&&St.get(b)||St.get(u);return((f=T==null?void 0:T.rootView)===null||f===void 0?void 0:f.view)||null}}Nr.styleModule=ps,Nr.inputHandler=Tn,Nr.scrollHandler=ho,Nr.focusChangeEffect=mi,Nr.perLineTextDirection=vi,Nr.exceptionSink=jt,Nr.updateListener=xn,Nr.editable=so,Nr.mouseSelectionStyle=Dt,Nr.dragMovesSelection=We,Nr.clickAddsSelectionRange=Ce,Nr.decorations=Mn,Nr.outerDecorations=ks,Nr.atomicRanges=jo,Nr.bidiIsolatedRanges=Zr,Nr.scrollMargins=ka,Nr.darkTheme=xs,Nr.cspNonce=xe.r$.define({combine:E=>E.length?E[0]:""}),Nr.contentAttributes=wi,Nr.editorAttributes=nr,Nr.lineWrapping=Nr.contentAttributes.of({class:"cm-lineWrapping"}),Nr.announce=xe.Py.define();const cl=4096,Ca={};class po{constructor(u,f,b,T,B,U){this.from=u,this.to=f,this.dir=b,this.isolates=T,this.fresh=B,this.order=U}static update(u,f){if(f.empty&&!u.some(B=>B.fresh))return u;let b=[],T=u.length?u[u.length-1].dir:Pi.LTR;for(let B=Math.max(0,u.length-10);B<u.length;B++){let U=u[B];U.dir==T&&!f.touchesRange(U.from,U.to)&&b.push(new po(f.mapPos(U.from,1),f.mapPos(U.to,-1),U.dir,U.isolates,!1,U.order))}return b}}function fu(E,u,f){for(let b=E.state.facet(u),T=b.length-1;T>=0;T--){let B=b[T],U=typeof B=="function"?B(E):B;U&&bi(U,f)}return f}const eu=Ge.mac?"mac":Ge.windows?"win":Ge.linux?"linux":"key";function Na(E,u){const f=E.split(/-(?!$)/);let b=f[f.length-1];b=="Space"&&(b=" ");let T,B,U,ie;for(let ce=0;ce<f.length-1;++ce){const _e=f[ce];if(/^(cmd|meta|m)$/i.test(_e))ie=!0;else if(/^a(lt)?$/i.test(_e))T=!0;else if(/^(c|ctrl|control)$/i.test(_e))B=!0;else if(/^s(hift)?$/i.test(_e))U=!0;else if(/^mod$/i.test(_e))u=="mac"?ie=!0:B=!0;else throw new Error("Unrecognized modifier name: "+_e)}return T&&(b="Alt-"+b),B&&(b="Ctrl-"+b),ie&&(b="Meta-"+b),U&&(b="Shift-"+b),b}function ja(E,u,f){return u.altKey&&(E="Alt-"+E),u.ctrlKey&&(E="Ctrl-"+E),u.metaKey&&(E="Meta-"+E),f!==!1&&u.shiftKey&&(E="Shift-"+E),E}const tu=xe.Wl.default(Nr.domEventHandlers({keydown(E,u){return _a(qo(u.state),E,u,"editor")}})),Du=xe.r$.define({enables:tu}),wu=new WeakMap;function qo(E){let u=E.facet(Du),f=wu.get(u);return f||wu.set(u,f=Eu(u.reduce((b,T)=>b.concat(T),[]))),f}function Ya(E,u,f){return _a(qo(E.state),u,E,f)}let No=null;const $l=4e3;function Eu(E,u=eu){let f=Object.create(null),b=Object.create(null),T=(U,ie)=>{let ce=b[U];if(ce==null)b[U]=ie;else if(ce!=ie)throw new Error("Key binding "+U+" is used both as a regular binding and as a multi-stroke prefix")},B=(U,ie,ce,_e,Oe)=>{var lt,gt;let wt=f[U]||(f[U]=Object.create(null)),rn=ie.split(/ (?!$)/).map(Hn=>Na(Hn,u));for(let Hn=1;Hn<rn.length;Hn++){let Rr=rn.slice(0,Hn).join(" ");T(Rr,!0),wt[Rr]||(wt[Rr]={preventDefault:!0,stopPropagation:!1,run:[Fs=>{let Vr=No={view:Fs,prefix:Rr,scope:U};return setTimeout(()=>{No==Vr&&(No=null)},$l),!0}]})}let Cn=rn.join(" ");T(Cn,!1);let un=wt[Cn]||(wt[Cn]={preventDefault:!1,stopPropagation:!1,run:((gt=(lt=wt._any)===null||lt===void 0?void 0:lt.run)===null||gt===void 0?void 0:gt.slice())||[]});ce&&un.run.push(ce),_e&&(un.preventDefault=!0),Oe&&(un.stopPropagation=!0)};for(let U of E){let ie=U.scope?U.scope.split(" "):["editor"];if(U.any)for(let _e of ie){let Oe=f[_e]||(f[_e]=Object.create(null));Oe._any||(Oe._any={preventDefault:!1,stopPropagation:!1,run:[]});for(let lt in Oe)Oe[lt].run.push(U.any)}let ce=U[u]||U.key;if(ce)for(let _e of ie)B(_e,ce,U.run,U.preventDefault,U.stopPropagation),U.shift&&B(_e,"Shift-"+ce,U.shift,U.preventDefault,U.stopPropagation)}return f}function _a(E,u,f,b){let T=Kt(u),B=(0,xe.gm)(T,0),U=(0,xe.nZ)(B)==T.length&&T!=" ",ie="",ce=!1,_e=!1,Oe=!1;No&&No.view==f&&No.scope==b&&(ie=No.prefix+" ",Ee.indexOf(u.keyCode)<0&&(_e=!0,No=null));let lt=new Set,gt=un=>{if(un){for(let Hn of un.run)if(!lt.has(Hn)&&(lt.add(Hn),Hn(f,u)))return un.stopPropagation&&(Oe=!0),!0;un.preventDefault&&(un.stopPropagation&&(Oe=!0),_e=!0)}return!1},wt=E[b],rn,Cn;return wt&&(gt(wt[ie+ja(T,u,!U)])?ce=!0:U&&(u.altKey||u.metaKey||u.ctrlKey)&&!(Ge.windows&&u.ctrlKey&&u.altKey)&&(rn=fn[u.keyCode])&&rn!=T?(gt(wt[ie+ja(rn,u,!0)])||u.shiftKey&&(Cn=it[u.keyCode])!=T&&Cn!=rn&&gt(wt[ie+ja(Cn,u,!1)]))&&(ce=!0):U&&u.shiftKey&&gt(wt[ie+ja(T,u,!0)])&&(ce=!0),!ce&&gt(wt._any)&&(ce=!0)),_e&&(ce=!0),ce&&Oe&&u.stopPropagation(),ce}class Ga{constructor(u,f,b,T,B){this.className=u,this.left=f,this.top=b,this.width=T,this.height=B}draw(){let u=document.createElement("div");return u.className=this.className,this.adjust(u),u}update(u,f){return f.className!=this.className?!1:(this.adjust(u),!0)}adjust(u){u.style.left=this.left+"px",u.style.top=this.top+"px",this.width!=null&&(u.style.width=this.width+"px"),u.style.height=this.height+"px"}eq(u){return this.left==u.left&&this.top==u.top&&this.width==u.width&&this.height==u.height&&this.className==u.className}static forRange(u,f,b){if(b.empty){let T=u.coordsAtPos(b.head,b.assoc||1);if(!T)return[];let B=$o(u);return[new Ga(f,T.left-B.left,T.top-B.top,null,T.bottom-T.top)]}else return ls(u,f,b)}}function $o(E){let u=E.scrollDOM.getBoundingClientRect();return{left:(E.textDirection==Pi.LTR?u.left:u.right-E.scrollDOM.clientWidth*E.scaleX)-E.scrollDOM.scrollLeft*E.scaleX,top:u.top-E.scrollDOM.scrollTop*E.scaleY}}function Br(E,u,f){let b=xe.jT.cursor(u);return{from:Math.max(f.from,E.moveToLineBoundary(b,!1,!0).from),to:Math.min(f.to,E.moveToLineBoundary(b,!0,!0).from),type:Sr.Text}}function ls(E,u,f){if(f.to<=E.viewport.from||f.from>=E.viewport.to)return[];let b=Math.max(f.from,E.viewport.from),T=Math.min(f.to,E.viewport.to),B=E.textDirection==Pi.LTR,U=E.contentDOM,ie=U.getBoundingClientRect(),ce=$o(E),_e=U.querySelector(".cm-line"),Oe=_e&&window.getComputedStyle(_e),lt=ie.left+(Oe?parseInt(Oe.paddingLeft)+Math.min(0,parseInt(Oe.textIndent)):0),gt=ie.right-(Oe?parseInt(Oe.paddingRight):0),wt=ll(E,b),rn=ll(E,T),Cn=wt.type==Sr.Text?wt:null,un=rn.type==Sr.Text?rn:null;if(Cn&&(E.lineWrapping||wt.widgetLineBreaks)&&(Cn=Br(E,b,Cn)),un&&(E.lineWrapping||rn.widgetLineBreaks)&&(un=Br(E,T,un)),Cn&&un&&Cn.from==un.from)return Rr(Fs(f.from,f.to,Cn));{let Ds=Cn?Fs(f.from,null,Cn):Vr(wt,!1),us=un?Fs(null,f.to,un):Vr(rn,!0),Aa=[];return(Cn||wt).to<(un||rn).from-(Cn&&un?1:0)||wt.widgetLineBreaks>1&&Ds.bottom+E.defaultLineHeight/2<us.top?Aa.push(Hn(lt,Ds.bottom,gt,us.top)):Ds.bottom<us.top&&E.elementAtHeight((Ds.bottom+us.top)/2).type==Sr.Text&&(Ds.bottom=us.top=(Ds.bottom+us.top)/2),Rr(Ds).concat(Aa).concat(Rr(us))}function Hn(Ds,us,Aa,Wa){return new Ga(u,Ds-ce.left,us-ce.top-.01,Aa-Ds,Wa-us+.01)}function Rr({top:Ds,bottom:us,horizontal:Aa}){let Wa=[];for(let _l=0;_l<Aa.length;_l+=2)Wa.push(Hn(Aa[_l],Ds,Aa[_l+1],us));return Wa}function Fs(Ds,us,Aa){let Wa=1e9,_l=-1e9,Vu=[];function Bc(bl,Wu,zl,vu,Ac){let Tu=E.coordsAtPos(bl,bl==Aa.to?-2:2),tl=E.coordsAtPos(zl,zl==Aa.from?2:-2);!Tu||!tl||(Wa=Math.min(Tu.top,tl.top,Wa),_l=Math.max(Tu.bottom,tl.bottom,_l),Ac==Pi.LTR?Vu.push(B&&Wu?lt:Tu.left,B&&vu?gt:tl.right):Vu.push(!B&&vu?lt:tl.left,!B&&Wu?gt:Tu.right))}let yu=Ds!=null?Ds:Aa.from,ou=us!=null?us:Aa.to;for(let bl of E.visibleRanges)if(bl.to>yu&&bl.from<ou)for(let Wu=Math.max(bl.from,yu),zl=Math.min(bl.to,ou);;){let vu=E.state.doc.lineAt(Wu);for(let Ac of E.bidiSpans(vu)){let Tu=Ac.from+vu.from,tl=Ac.to+vu.from;if(Tu>=zl)break;tl>Wu&&Bc(Math.max(Tu,Wu),Ds==null&&Tu<=yu,Math.min(tl,zl),us==null&&tl>=ou,Ac.dir)}if(Wu=vu.to+1,Wu>=zl)break}return Vu.length==0&&Bc(yu,Ds==null,ou,us==null,E.textDirection),{top:Wa,bottom:_l,horizontal:Vu}}function Vr(Ds,us){let Aa=ie.top+(us?Ds.top:Ds.bottom);return{top:Aa,bottom:Aa,horizontal:[]}}}function Ka(E,u){return E.constructor==u.constructor&&E.eq(u)}class Cl{constructor(u,f){this.view=u,this.layer=f,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=u.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),f.above&&this.dom.classList.add("cm-layer-above"),f.class&&this.dom.classList.add(f.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(u.state),u.requestMeasure(this.measureReq),f.mount&&f.mount(this.dom,u)}update(u){u.startState.facet(Va)!=u.state.facet(Va)&&this.setOrder(u.state),(this.layer.update(u,this.dom)||u.geometryChanged)&&(this.scale(),u.view.requestMeasure(this.measureReq))}docViewUpdate(u){this.layer.updateOnDocViewUpdate!==!1&&u.requestMeasure(this.measureReq)}setOrder(u){let f=0,b=u.facet(Va);for(;f<b.length&&b[f]!=this.layer;)f++;this.dom.style.zIndex=String((this.layer.above?150:-1)-f)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:u,scaleY:f}=this.view;(u!=this.scaleX||f!=this.scaleY)&&(this.scaleX=u,this.scaleY=f,this.dom.style.transform=`scale(${1/u}, ${1/f})`)}draw(u){if(u.length!=this.drawn.length||u.some((f,b)=>!Ka(f,this.drawn[b]))){let f=this.dom.firstChild,b=0;for(let T of u)T.update&&f&&T.constructor&&this.drawn[b].constructor&&T.update(f,this.drawn[b])?(f=f.nextSibling,b++):this.dom.insertBefore(T.draw(),f);for(;f;){let T=f.nextSibling;f.remove(),f=T}this.drawn=u}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const Va=xe.r$.define();function Cs(E){return[ds.define(u=>new Cl(u,E)),Va.of(E)]}const Ji=!Ge.ios,nu=xe.r$.define({combine(E){return(0,xe.BO)(E,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(u,f)=>Math.min(u,f),drawRangeCursor:(u,f)=>u||f})}});function Hs(E={}){return[nu.of(E),Cu,Bu,jl,ws.of(!0)]}function yl(E){return E.facet(nu)}function ra(E){return E.startState.facet(nu)!=E.state.facet(nu)}const Cu=Cs({above:!0,markers(E){let{state:u}=E,f=u.facet(nu),b=[];for(let T of u.selection.ranges){let B=T==u.selection.main;if(T.empty?!B||Ji:f.drawRangeCursor){let U=B?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",ie=T.empty?T:xe.jT.cursor(T.head,T.head>T.anchor?-1:1);for(let ce of Ga.forRange(E,U,ie))b.push(ce)}}return b},update(E,u){E.transactions.some(b=>b.selection)&&(u.style.animationName=u.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let f=ra(E);return f&&iu(E.state,u),E.docChanged||E.selectionSet||f},mount(E,u){iu(u.state,E)},class:"cm-cursorLayer"});function iu(E,u){u.style.animationDuration=E.facet(nu).cursorBlinkRate+"ms"}const Bu=Cs({above:!1,markers(E){return E.state.selection.ranges.map(u=>u.empty?[]:Ga.forRange(E,"cm-selectionBackground",u)).reduce((u,f)=>u.concat(f))},update(E,u){return E.docChanged||E.selectionSet||E.viewportChanged||ra(E)},class:"cm-selectionLayer"}),ru={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};Ji&&(ru[".cm-line"].caretColor="transparent !important",ru[".cm-content"]={caretColor:"transparent !important"});const jl=xe.Wl.highest(Nr.theme(ru)),Ru=xe.Py.define({map(E,u){return E==null?null:u.mapPos(E)}}),Yr=xe.QQ.define({create(){return null},update(E,u){return E!=null&&(E=u.changes.mapPos(E)),u.effects.reduce((f,b)=>b.is(Ru)?b.value:f,E)}}),d=ds.fromClass(class{constructor(E){this.view=E,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(E){var u;let f=E.state.field(Yr);f==null?this.cursor!=null&&((u=this.cursor)===null||u===void 0||u.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(E.startState.field(Yr)!=f||E.docChanged||E.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:E}=this,u=E.state.field(Yr),f=u!=null&&E.coordsAtPos(u);if(!f)return null;let b=E.scrollDOM.getBoundingClientRect();return{left:f.left-b.left+E.scrollDOM.scrollLeft*E.scaleX,top:f.top-b.top+E.scrollDOM.scrollTop*E.scaleY,height:f.bottom-f.top}}drawCursor(E){if(this.cursor){let{scaleX:u,scaleY:f}=this.view;E?(this.cursor.style.left=E.left/u+"px",this.cursor.style.top=E.top/f+"px",this.cursor.style.height=E.height/f+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(E){this.view.state.field(Yr)!=E&&this.view.dispatch({effects:Ru.of(E)})}},{eventObservers:{dragover(E){this.setDropPos(this.view.posAtCoords({x:E.clientX,y:E.clientY}))},dragleave(E){(E.target==this.view.contentDOM||!this.view.contentDOM.contains(E.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function a(){return[Yr,d]}function m(E,u,f,b,T){u.lastIndex=0;for(let B=E.iterRange(f,b),U=f,ie;!B.next().done;U+=B.value.length)if(!B.lineBreak)for(;ie=u.exec(B.value);)T(U+ie.index,ie)}function S(E,u){let f=E.visibleRanges;if(f.length==1&&f[0].from==E.viewport.from&&f[0].to==E.viewport.to)return f;let b=[];for(let{from:T,to:B}of f)T=Math.max(E.state.doc.lineAt(T).from,T-u),B=Math.min(E.state.doc.lineAt(B).to,B+u),b.length&&b[b.length-1].to>=T?b[b.length-1].to=B:b.push({from:T,to:B});return b}class ${constructor(u){const{regexp:f,decoration:b,decorate:T,boundary:B,maxLength:U=1e3}=u;if(!f.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=f,T)this.addMatch=(ie,ce,_e,Oe)=>T(Oe,_e,_e+ie[0].length,ie,ce);else if(typeof b=="function")this.addMatch=(ie,ce,_e,Oe)=>{let lt=b(ie,ce,_e);lt&&Oe(_e,_e+ie[0].length,lt)};else if(b)this.addMatch=(ie,ce,_e,Oe)=>Oe(_e,_e+ie[0].length,b);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=B,this.maxLength=U}createDeco(u){let f=new xe.f_,b=f.add.bind(f);for(let{from:T,to:B}of S(u,this.maxLength))m(u.state.doc,this.regexp,T,B,(U,ie)=>this.addMatch(ie,u,U,b));return f.finish()}updateDeco(u,f){let b=1e9,T=-1;return u.docChanged&&u.changes.iterChanges((B,U,ie,ce)=>{ce>u.view.viewport.from&&ie<u.view.viewport.to&&(b=Math.min(ie,b),T=Math.max(ce,T))}),u.viewportChanged||T-b>1e3?this.createDeco(u.view):T>-1?this.updateRange(u.view,f.map(u.changes),b,T):f}updateRange(u,f,b,T){for(let B of u.visibleRanges){let U=Math.max(B.from,b),ie=Math.min(B.to,T);if(ie>U){let ce=u.state.doc.lineAt(U),_e=ce.to<ie?u.state.doc.lineAt(ie):ce,Oe=Math.max(B.from,ce.from),lt=Math.min(B.to,_e.to);if(this.boundary){for(;U>ce.from;U--)if(this.boundary.test(ce.text[U-1-ce.from])){Oe=U;break}for(;ie<_e.to;ie++)if(this.boundary.test(_e.text[ie-_e.from])){lt=ie;break}}let gt=[],wt,rn=(Cn,un,Hn)=>gt.push(Hn.range(Cn,un));if(ce==_e)for(this.regexp.lastIndex=Oe-ce.from;(wt=this.regexp.exec(ce.text))&&wt.index<lt-ce.from;)this.addMatch(wt,u,wt.index+ce.from,rn);else m(u.state.doc,this.regexp,Oe,lt,(Cn,un)=>this.addMatch(un,u,Cn,rn));f=f.update({filterFrom:Oe,filterTo:lt,filter:(Cn,un)=>Cn<Oe||un>lt,add:gt})}}return f}}const ne=/x/.unicode!=null?"gu":"g",ve=new RegExp(`[\0-\b
-\x7F-\x9F\xAD\u061C\u200B\u200E\u200F\u2028\u2029\u202D\u202E\u2066\u2067\u2069\uFEFF\uFFF9-\uFFFC]`,ne),qe={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let ct=null;function at(){var E;if(ct==null&&typeof document!="undefined"&&document.body){let u=document.body.style;ct=((E=u.tabSize)!==null&&E!==void 0?E:u.MozTabSize)!=null}return ct||!1}const On=xe.r$.define({combine(E){let u=(0,xe.BO)(E,{render:null,specialChars:ve,addSpecialChars:null});return(u.replaceTabs=!at())&&(u.specialChars=new RegExp("	|"+u.specialChars.source,ne)),u.addSpecialChars&&(u.specialChars=new RegExp(u.specialChars.source+"|"+u.addSpecialChars.source,ne)),u}});function ui(E={}){return[On.of(E),ji()]}let Yi=null;function ji(){return Yi||(Yi=ds.fromClass(class{constructor(E){this.view=E,this.decorations=Qi.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(E.state.facet(On)),this.decorations=this.decorator.createDeco(E)}makeDecorator(E){return new $({regexp:E.specialChars,decoration:(u,f,b)=>{let{doc:T}=f.state,B=(0,xe.gm)(u[0],0);if(B==9){let U=T.lineAt(b),ie=f.state.tabSize,ce=(0,xe.IS)(U.text,ie,b-U.from);return Qi.replace({widget:new sa((ie-ce%ie)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[B]||(this.decorationCache[B]=Qi.replace({widget:new ea(E,B)}))},boundary:E.replaceTabs?void 0:/[^]/})}update(E){let u=E.state.facet(On);E.startState.facet(On)!=u?(this.decorator=this.makeDecorator(u),this.decorations=this.decorator.createDeco(E.view)):this.decorations=this.decorator.updateDeco(E,this.decorations)}},{decorations:E=>E.decorations}))}const Ls="\u2022";function Zs(E){return E>=32?Ls:E==10?"\u2424":String.fromCharCode(9216+E)}class ea extends Di{constructor(u,f){super(),this.options=u,this.code=f}eq(u){return u.code==this.code}toDOM(u){let f=Zs(this.code),b=u.state.phrase("Control character")+" "+(qe[this.code]||"0x"+this.code.toString(16)),T=this.options.render&&this.options.render(this.code,b,f);if(T)return T;let B=document.createElement("span");return B.textContent=f,B.title=b,B.setAttribute("aria-label",b),B.className="cm-specialChar",B}ignoreEvent(){return!1}}class sa extends Di{constructor(u){super(),this.width=u}eq(u){return u.width==this.width}toDOM(){let u=document.createElement("span");return u.textContent="	",u.className="cm-tab",u.style.width=this.width+"px",u}ignoreEvent(){return!1}}const Pa=null;function Lu(){return[Pa,wi.of(E=>{var u;return((u=E.plugin(Pa))===null||u===void 0?void 0:u.attrs)||null})]}function Vl(){return Su}const Ju=Qi.line({class:"cm-activeLine"}),Su=ds.fromClass(class{constructor(E){this.decorations=this.getDeco(E)}update(E){(E.docChanged||E.selectionSet)&&(this.decorations=this.getDeco(E.view))}getDeco(E){let u=-1,f=[];for(let b of E.state.selection.ranges){let T=E.lineBlockAt(b.head);T.from>u&&(f.push(Ju.range(T.from)),u=T.from)}return Qi.set(f)}},{decorations:E=>E.decorations});class Sc extends Di{constructor(u){super(),this.content=u}toDOM(){let u=document.createElement("span");return u.className="cm-placeholder",u.style.pointerEvents="none",u.appendChild(typeof this.content=="string"?document.createTextNode(this.content):this.content),typeof this.content=="string"?u.setAttribute("aria-label","placeholder "+this.content):u.setAttribute("aria-hidden","true"),u}coordsAt(u){let f=u.firstChild?Ii(u.firstChild):[];if(!f.length)return null;let b=window.getComputedStyle(u.parentNode),T=Dr(f[0],b.direction!="rtl"),B=parseInt(b.lineHeight);return T.bottom-T.top>B*1.5?{left:T.left,right:T.right,top:T.top,bottom:T.top+B}:T}ignoreEvent(){return!1}}function mu(E){return ds.fromClass(class{constructor(u){this.view=u,this.placeholder=E?Qi.set([Qi.widget({widget:new Sc(E),side:1}).range(0)]):Qi.none}get decorations(){return this.view.state.doc.length?Qi.none:this.placeholder}},{decorations:u=>u.decorations})}const rl=2e3;function $u(E,u,f){let b=Math.min(u.line,f.line),T=Math.max(u.line,f.line),B=[];if(u.off>rl||f.off>rl||u.col<0||f.col<0){let U=Math.min(u.off,f.off),ie=Math.max(u.off,f.off);for(let ce=b;ce<=T;ce++){let _e=E.doc.line(ce);_e.length<=ie&&B.push(xe.jT.range(_e.from+U,_e.to+ie))}}else{let U=Math.min(u.col,f.col),ie=Math.max(u.col,f.col);for(let ce=b;ce<=T;ce++){let _e=E.doc.line(ce),Oe=(0,xe.Gz)(_e.text,U,E.tabSize,!0);if(Oe<0)B.push(xe.jT.cursor(_e.to));else{let lt=(0,xe.Gz)(_e.text,ie,E.tabSize);B.push(xe.jT.range(_e.from+Oe,_e.from+lt))}}}return B}function Sl(E,u){let f=E.coordsAtPos(E.viewport.from);return f?Math.round(Math.abs((f.left-u)/E.defaultCharacterWidth)):-1}function ju(E,u){let f=E.posAtCoords({x:u.clientX,y:u.clientY},!1),b=E.state.doc.lineAt(f),T=f-b.from,B=T>rl?-1:T==b.length?Sl(E,u.clientX):(0,xe.IS)(b.text,E.state.tabSize,f-b.from);return{line:b.number,col:B,off:T}}function hl(E,u){let f=ju(E,u),b=E.state.selection;return f?{update(T){if(T.docChanged){let B=T.changes.mapPos(T.startState.doc.line(f.line).from),U=T.state.doc.lineAt(B);f={line:U.number,col:f.col,off:Math.min(f.off,U.length)},b=b.map(T.changes)}},get(T,B,U){let ie=ju(E,T);if(!ie)return b;let ce=$u(E.state,f,ie);return ce.length?U?xe.jT.create(ce.concat(b.ranges)):xe.jT.create(ce):b}}:null}function lc(E){let u=(E==null?void 0:E.eventFilter)||(f=>f.altKey&&f.button==0);return Nr.mouseSelectionStyle.of((f,b)=>u(b)?hl(f,b):null)}const Za={Alt:[18,E=>!!E.altKey],Control:[17,E=>!!E.ctrlKey],Shift:[16,E=>!!E.shiftKey],Meta:[91,E=>!!E.metaKey]},gc={style:"cursor: crosshair"};function uc(E={}){let[u,f]=Za[E.key||"Alt"],b=ds.fromClass(class{constructor(T){this.view=T,this.isDown=!1}set(T){this.isDown!=T&&(this.isDown=T,this.view.update([]))}},{eventObservers:{keydown(T){this.set(T.keyCode==u||f(T))},keyup(T){(T.keyCode==u||!f(T))&&this.set(!1)},mousemove(T){this.set(f(T))}}});return[b,Nr.contentAttributes.of(T=>{var B;return!((B=T.plugin(b))===null||B===void 0)&&B.isDown?gc:null})]}const O="-10000px";class H{constructor(u,f,b,T){this.facet=f,this.createTooltipView=b,this.removeTooltipView=T,this.input=u.state.facet(f),this.tooltips=this.input.filter(U=>U);let B=null;this.tooltipViews=this.tooltips.map(U=>B=b(U,B))}update(u,f){var b;let T=u.state.facet(this.facet),B=T.filter(ce=>ce);if(T===this.input){for(let ce of this.tooltipViews)ce.update&&ce.update(u);return!1}let U=[],ie=f?[]:null;for(let ce=0;ce<B.length;ce++){let _e=B[ce],Oe=-1;if(_e){for(let lt=0;lt<this.tooltips.length;lt++){let gt=this.tooltips[lt];gt&&gt.create==_e.create&&(Oe=lt)}if(Oe<0)U[ce]=this.createTooltipView(_e,ce?U[ce-1]:null),ie&&(ie[ce]=!!_e.above);else{let lt=U[ce]=this.tooltipViews[Oe];ie&&(ie[ce]=f[Oe]),lt.update&&lt.update(u)}}}for(let ce of this.tooltipViews)U.indexOf(ce)<0&&(this.removeTooltipView(ce),(b=ce.destroy)===null||b===void 0||b.call(ce));return f&&(ie.forEach((ce,_e)=>f[_e]=ce),f.length=ie.length),this.input=T,this.tooltips=B,this.tooltipViews=U,!0}}function se(E={}){return ue.of(E)}function ge(E){let{win:u}=E;return{top:0,left:0,bottom:u.innerHeight,right:u.innerWidth}}const ue=xe.r$.define({combine:E=>{var u,f,b;return{position:Ge.ios?"absolute":((u=E.find(T=>T.position))===null||u===void 0?void 0:u.position)||"fixed",parent:((f=E.find(T=>T.parent))===null||f===void 0?void 0:f.parent)||null,tooltipSpace:((b=E.find(T=>T.tooltipSpace))===null||b===void 0?void 0:b.tooltipSpace)||ge}}}),be=new WeakMap,ot=ds.fromClass(class{constructor(E){this.view=E,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let u=E.state.facet(ue);this.position=u.position,this.parent=u.parent,this.classes=E.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new H(E,an,(f,b)=>this.createTooltip(f,b),f=>{this.resizeObserver&&this.resizeObserver.unobserve(f.dom),f.dom.remove()}),this.above=this.manager.tooltips.map(f=>!!f.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(f=>{Date.now()>this.lastTransaction-50&&f.length>0&&f[f.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),E.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let E of this.manager.tooltipViews)this.intersectionObserver.observe(E.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(E){E.transactions.length&&(this.lastTransaction=Date.now());let u=this.manager.update(E,this.above);u&&this.observeIntersection();let f=u||E.geometryChanged,b=E.state.facet(ue);if(b.position!=this.position&&!this.madeAbsolute){this.position=b.position;for(let T of this.manager.tooltipViews)T.dom.style.position=this.position;f=!0}if(b.parent!=this.parent){this.parent&&this.container.remove(),this.parent=b.parent,this.createContainer();for(let T of this.manager.tooltipViews)this.container.appendChild(T.dom);f=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);f&&this.maybeMeasure()}createTooltip(E,u){let f=E.create(this.view),b=u?u.dom:null;if(f.dom.classList.add("cm-tooltip"),E.arrow&&!f.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let T=document.createElement("div");T.className="cm-tooltip-arrow",f.dom.appendChild(T)}return f.dom.style.position=this.position,f.dom.style.top=O,f.dom.style.left="0px",this.container.insertBefore(f.dom,b),f.mount&&f.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(f.dom),f}destroy(){var E,u,f;this.view.win.removeEventListener("resize",this.measureSoon);for(let b of this.manager.tooltipViews)b.dom.remove(),(E=b.destroy)===null||E===void 0||E.call(b);this.parent&&this.container.remove(),(u=this.resizeObserver)===null||u===void 0||u.disconnect(),(f=this.intersectionObserver)===null||f===void 0||f.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let E=this.view.dom.getBoundingClientRect(),u=1,f=1,b=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:T}=this.manager.tooltipViews[0];if(Ge.gecko)b=T.offsetParent!=this.container.ownerDocument.body;else if(T.style.top==O&&T.style.left=="0px"){let B=T.getBoundingClientRect();b=Math.abs(B.top+1e4)>1||Math.abs(B.left)>1}}if(b||this.position=="absolute")if(this.parent){let T=this.parent.getBoundingClientRect();T.width&&T.height&&(u=T.width/this.parent.offsetWidth,f=T.height/this.parent.offsetHeight)}else({scaleX:u,scaleY:f}=this.view.viewState);return{editor:E,parent:this.parent?this.container.getBoundingClientRect():E,pos:this.manager.tooltips.map((T,B)=>{let U=this.manager.tooltipViews[B];return U.getCoords?U.getCoords(T.pos):this.view.coordsAtPos(T.pos)}),size:this.manager.tooltipViews.map(({dom:T})=>T.getBoundingClientRect()),space:this.view.state.facet(ue).tooltipSpace(this.view),scaleX:u,scaleY:f,makeAbsolute:b}}writeMeasure(E){var u;if(E.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let ie of this.manager.tooltipViews)ie.dom.style.position="absolute"}let{editor:f,space:b,scaleX:T,scaleY:B}=E,U=[];for(let ie=0;ie<this.manager.tooltips.length;ie++){let ce=this.manager.tooltips[ie],_e=this.manager.tooltipViews[ie],{dom:Oe}=_e,lt=E.pos[ie],gt=E.size[ie];if(!lt||lt.bottom<=Math.max(f.top,b.top)||lt.top>=Math.min(f.bottom,b.bottom)||lt.right<Math.max(f.left,b.left)-.1||lt.left>Math.min(f.right,b.right)+.1){Oe.style.top=O;continue}let wt=ce.arrow?_e.dom.querySelector(".cm-tooltip-arrow"):null,rn=wt?7:0,Cn=gt.right-gt.left,un=(u=be.get(_e))!==null&&u!==void 0?u:gt.bottom-gt.top,Hn=_e.offset||Rt,Rr=this.view.textDirection==Pi.LTR,Fs=gt.width>b.right-b.left?Rr?b.left:b.right-gt.width:Rr?Math.min(lt.left-(wt?14:0)+Hn.x,b.right-Cn):Math.max(b.left,lt.left-Cn+(wt?14:0)-Hn.x),Vr=this.above[ie];!ce.strictSide&&(Vr?lt.top-(gt.bottom-gt.top)-Hn.y<b.top:lt.bottom+(gt.bottom-gt.top)+Hn.y>b.bottom)&&Vr==b.bottom-lt.bottom>lt.top-b.top&&(Vr=this.above[ie]=!Vr);let Ds=(Vr?lt.top-b.top:b.bottom-lt.bottom)-rn;if(Ds<un&&_e.resize!==!1){if(Ds<this.view.defaultLineHeight){Oe.style.top=O;continue}be.set(_e,un),Oe.style.height=(un=Ds)/B+"px"}else Oe.style.height&&(Oe.style.height="");let us=Vr?lt.top-un-rn-Hn.y:lt.bottom+rn+Hn.y,Aa=Fs+Cn;if(_e.overlap!==!0)for(let Wa of U)Wa.left<Aa&&Wa.right>Fs&&Wa.top<us+un&&Wa.bottom>us&&(us=Vr?Wa.top-un-2-rn:Wa.bottom+rn+2);if(this.position=="absolute"?(Oe.style.top=(us-E.parent.top)/B+"px",Oe.style.left=(Fs-E.parent.left)/T+"px"):(Oe.style.top=us/B+"px",Oe.style.left=Fs/T+"px"),wt){let Wa=lt.left+(Rr?Hn.x:-Hn.x)-(Fs+14-7);wt.style.left=Wa/T+"px"}_e.overlap!==!0&&U.push({left:Fs,top:us,right:Aa,bottom:us+un}),Oe.classList.toggle("cm-tooltip-above",Vr),Oe.classList.toggle("cm-tooltip-below",!Vr),_e.positioned&&_e.positioned(E.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let E of this.manager.tooltipViews)E.dom.style.top=O}},{eventObservers:{scroll(){this.maybeMeasure()}}}),_t=Nr.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),Rt={x:0,y:0},an=xe.r$.define({enables:[ot,_t]}),Gt=xe.r$.define({combine:E=>E.reduce((u,f)=>u.concat(f),[])});class Ln{static create(u){return new Ln(u)}constructor(u){this.view=u,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new H(u,Gt,(f,b)=>this.createHostedView(f,b),f=>f.dom.remove())}createHostedView(u,f){let b=u.create(this.view);return b.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(b.dom,f?f.dom.nextSibling:this.dom.firstChild),this.mounted&&b.mount&&b.mount(this.view),b}mount(u){for(let f of this.manager.tooltipViews)f.mount&&f.mount(u);this.mounted=!0}positioned(u){for(let f of this.manager.tooltipViews)f.positioned&&f.positioned(u)}update(u){this.manager.update(u)}destroy(){var u;for(let f of this.manager.tooltipViews)(u=f.destroy)===null||u===void 0||u.call(f)}passProp(u){let f;for(let b of this.manager.tooltipViews){let T=b[u];if(T!==void 0){if(f===void 0)f=T;else if(f!==T)return}}return f}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const Dn=an.compute([Gt],E=>{let u=E.facet(Gt);return u.length===0?null:{pos:Math.min(...u.map(f=>f.pos)),end:Math.max(...u.map(f=>{var b;return(b=f.end)!==null&&b!==void 0?b:f.pos})),create:Ln.create,above:u[0].above,arrow:u.some(f=>f.arrow)}});class nn{constructor(u,f,b,T,B){this.view=u,this.source=f,this.field=b,this.setHover=T,this.hoverTime=B,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:u.dom,time:0},this.checkHover=this.checkHover.bind(this),u.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),u.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let u=Date.now()-this.lastMove.time;u<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-u):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:u,lastMove:f}=this,b=u.docView.nearest(f.target);if(!b)return;let T,B=1;if(b instanceof Wn)T=b.posAtStart;else{if(T=u.posAtCoords(f),T==null)return;let ie=u.coordsAtPos(T);if(!ie||f.y<ie.top||f.y>ie.bottom||f.x<ie.left-u.defaultCharacterWidth||f.x>ie.right+u.defaultCharacterWidth)return;let ce=u.bidiSpans(u.state.doc.lineAt(T)).find(Oe=>Oe.from<=T&&Oe.to>=T),_e=ce&&ce.dir==Pi.RTL?-1:1;B=f.x<ie.left?-_e:_e}let U=this.source(u,T,B);if(U!=null&&U.then){let ie=this.pending={pos:T};U.then(ce=>{this.pending==ie&&(this.pending=null,ce&&!(Array.isArray(ce)&&!ce.length)&&u.dispatch({effects:this.setHover.of(Array.isArray(ce)?ce:[ce])}))},ce=>rt(u.state,ce,"hover tooltip"))}else U&&!(Array.isArray(U)&&!U.length)&&u.dispatch({effects:this.setHover.of(Array.isArray(U)?U:[U])})}get tooltip(){let u=this.view.plugin(ot),f=u?u.manager.tooltips.findIndex(b=>b.create==Ln.create):-1;return f>-1?u.manager.tooltipViews[f]:null}mousemove(u){var f,b;this.lastMove={x:u.clientX,y:u.clientY,target:u.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:T,tooltip:B}=this;if(T.length&&B&&!ni(B.dom,u)||this.pending){let{pos:U}=T[0]||this.pending,ie=(b=(f=T[0])===null||f===void 0?void 0:f.end)!==null&&b!==void 0?b:U;(U==ie?this.view.posAtCoords(this.lastMove)!=U:!er(this.view,U,ie,u.clientX,u.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(u){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:f}=this;if(f.length){let{tooltip:b}=this;b&&b.dom.contains(u.relatedTarget)?this.watchTooltipLeave(b.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(u){let f=b=>{u.removeEventListener("mouseleave",f),this.active.length&&!this.view.dom.contains(b.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};u.addEventListener("mouseleave",f)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const An=4;function ni(E,u){let f=E.getBoundingClientRect();return u.clientX>=f.left-An&&u.clientX<=f.right+An&&u.clientY>=f.top-An&&u.clientY<=f.bottom+An}function er(E,u,f,b,T,B){let U=E.scrollDOM.getBoundingClientRect(),ie=E.documentTop+E.documentPadding.top+E.contentHeight;if(U.left>b||U.right<b||U.top>T||Math.min(U.bottom,ie)<T)return!1;let ce=E.posAtCoords({x:b,y:T},!1);return ce>=u&&ce<=f}function yr(E,u={}){let f=xe.Py.define(),b=xe.QQ.define({create(){return[]},update(T,B){if(T.length&&(u.hideOnChange&&(B.docChanged||B.selection)?T=[]:u.hideOn&&(T=T.filter(U=>!u.hideOn(B,U))),B.docChanged)){let U=[];for(let ie of T){let ce=B.changes.mapPos(ie.pos,-1,xe.gc.TrackDel);if(ce!=null){let _e=Object.assign(Object.create(null),ie);_e.pos=ce,_e.end!=null&&(_e.end=B.changes.mapPos(_e.end)),U.push(_e)}}T=U}for(let U of B.effects)U.is(f)&&(T=U.value),U.is(Ns)&&(T=[]);return T},provide:T=>Gt.from(T)});return[b,ds.define(T=>new nn(T,E,b,f,u.hoverTime||300)),Dn]}function Er(E,u){let f=E.plugin(ot);if(!f)return null;let b=f.manager.tooltips.indexOf(u);return b<0?null:f.manager.tooltipViews[b]}function ys(E){return E.facet(Gt).some(u=>u)}const Ns=xe.Py.define(),ao=null;function Bo(E){let u=E.plugin(ot);u&&u.maybeMeasure()}const to=xe.r$.define({combine(E){let u,f;for(let b of E)u=u||b.topContainer,f=f||b.bottomContainer;return{topContainer:u,bottomContainer:f}}});function Ja(E){return E?[to.of(E)]:[]}function dl(E,u){let f=E.plugin(Al),b=f?f.specs.indexOf(u):-1;return b>-1?f.panels[b]:null}const Al=ds.fromClass(class{constructor(E){this.input=E.state.facet(Fa),this.specs=this.input.filter(f=>f),this.panels=this.specs.map(f=>f(E));let u=E.state.facet(to);this.top=new Fo(E,!0,u.topContainer),this.bottom=new Fo(E,!1,u.bottomContainer),this.top.sync(this.panels.filter(f=>f.top)),this.bottom.sync(this.panels.filter(f=>!f.top));for(let f of this.panels)f.dom.classList.add("cm-panel"),f.mount&&f.mount()}update(E){let u=E.state.facet(to);this.top.container!=u.topContainer&&(this.top.sync([]),this.top=new Fo(E.view,!0,u.topContainer)),this.bottom.container!=u.bottomContainer&&(this.bottom.sync([]),this.bottom=new Fo(E.view,!1,u.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let f=E.state.facet(Fa);if(f!=this.input){let b=f.filter(ce=>ce),T=[],B=[],U=[],ie=[];for(let ce of b){let _e=this.specs.indexOf(ce),Oe;_e<0?(Oe=ce(E.view),ie.push(Oe)):(Oe=this.panels[_e],Oe.update&&Oe.update(E)),T.push(Oe),(Oe.top?B:U).push(Oe)}this.specs=b,this.panels=T,this.top.sync(B),this.bottom.sync(U);for(let ce of ie)ce.dom.classList.add("cm-panel"),ce.mount&&ce.mount()}else for(let b of this.panels)b.update&&b.update(E)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:E=>Nr.scrollMargins.of(u=>{let f=u.plugin(E);return f&&{top:f.top.scrollMargin(),bottom:f.bottom.scrollMargin()}})});class Fo{constructor(u,f,b){this.view=u,this.top=f,this.container=b,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(u){for(let f of this.panels)f.destroy&&u.indexOf(f)<0&&f.destroy();this.panels=u,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let f=this.container||this.view.dom;f.insertBefore(this.dom,this.top?f.firstChild:null)}let u=this.dom.firstChild;for(let f of this.panels)if(f.dom.parentNode==this.dom){for(;u!=f.dom;)u=ga(u);u=u.nextSibling}else this.dom.insertBefore(f.dom,u);for(;u;)u=ga(u)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let u of this.classes.split(" "))u&&this.container.classList.remove(u);for(let u of(this.classes=this.view.themeClasses).split(" "))u&&this.container.classList.add(u)}}}function ga(E){let u=E.nextSibling;return E.remove(),u}const Fa=xe.r$.define({enables:Al});class xo extends xe.uU{compare(u){return this==u||this.constructor==u.constructor&&this.eq(u)}eq(u){return!1}destroy(u){}}xo.prototype.elementClass="",xo.prototype.toDOM=void 0,xo.prototype.mapMode=xe.gc.TrackBefore,xo.prototype.startSide=xo.prototype.endSide=-1,xo.prototype.point=!0;const vl=xe.r$.define(),cc={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>xe.Xs.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},su=xe.r$.define();function Tl(E){return[Ol(),su.of(Object.assign(Object.assign({},cc),E))]}const ec=xe.r$.define({combine:E=>E.some(u=>u)});function Ol(E){let u=[gu];return E&&E.fixed===!1&&u.push(ec.of(!0)),u}const gu=ds.fromClass(class{constructor(E){this.view=E,this.prevViewport=E.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=E.state.facet(su).map(u=>new Sa(E,u));for(let u of this.gutters)this.dom.appendChild(u.dom);this.fixed=!E.state.facet(ec),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),E.scrollDOM.insertBefore(this.dom,E.contentDOM)}update(E){if(this.updateGutters(E)){let u=this.prevViewport,f=E.view.viewport,b=Math.min(u.to,f.to)-Math.max(u.from,f.from);this.syncGutters(b<(f.to-f.from)*.8)}E.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(ec)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=E.view.viewport}syncGutters(E){let u=this.dom.nextSibling;E&&this.dom.remove();let f=xe.Xs.iter(this.view.state.facet(vl),this.view.viewport.from),b=[],T=this.gutters.map(B=>new Wl(B,this.view.viewport,-this.view.documentPadding.top));for(let B of this.view.viewportLineBlocks)if(b.length&&(b=[]),Array.isArray(B.type)){let U=!0;for(let ie of B.type)if(ie.type==Sr.Text&&U){el(f,b,ie.from);for(let ce of T)ce.line(this.view,ie,b);U=!1}else if(ie.widget)for(let ce of T)ce.widget(this.view,ie)}else if(B.type==Sr.Text){el(f,b,B.from);for(let U of T)U.line(this.view,B,b)}else if(B.widget)for(let U of T)U.widget(this.view,B);for(let B of T)B.finish();E&&this.view.scrollDOM.insertBefore(this.dom,u)}updateGutters(E){let u=E.startState.facet(su),f=E.state.facet(su),b=E.docChanged||E.heightChanged||E.viewportChanged||!xe.Xs.eq(E.startState.facet(vl),E.state.facet(vl),E.view.viewport.from,E.view.viewport.to);if(u==f)for(let T of this.gutters)T.update(E)&&(b=!0);else{b=!0;let T=[];for(let B of f){let U=u.indexOf(B);U<0?T.push(new Sa(this.view,B)):(this.gutters[U].update(E),T.push(this.gutters[U]))}for(let B of this.gutters)B.dom.remove(),T.indexOf(B)<0&&B.destroy();for(let B of T)this.dom.appendChild(B.dom);this.gutters=T}return b}destroy(){for(let E of this.gutters)E.destroy();this.dom.remove()}},{provide:E=>Nr.scrollMargins.of(u=>{let f=u.plugin(E);return!f||f.gutters.length==0||!f.fixed?null:u.textDirection==Pi.LTR?{left:f.dom.offsetWidth*u.scaleX}:{right:f.dom.offsetWidth*u.scaleX}})});function Yc(E){return Array.isArray(E)?E:[E]}function el(E,u,f){for(;E.value&&E.from<=f;)E.from==f&&u.push(E.value),E.next()}class Wl{constructor(u,f,b){this.gutter=u,this.height=b,this.i=0,this.cursor=xe.Xs.iter(u.markers,f.from)}addElement(u,f,b){let{gutter:T}=this,B=(f.top-this.height)/u.scaleY,U=f.height/u.scaleY;if(this.i==T.elements.length){let ie=new hc(u,U,B,b);T.elements.push(ie),T.dom.appendChild(ie.dom)}else T.elements[this.i].update(u,U,B,b);this.height=f.bottom,this.i++}line(u,f,b){let T=[];el(this.cursor,T,f.from),b.length&&(T=T.concat(b));let B=this.gutter.config.lineMarker(u,f,T);B&&T.unshift(B);let U=this.gutter;T.length==0&&!U.config.renderEmptyElements||this.addElement(u,f,T)}widget(u,f){let b=this.gutter.config.widgetMarker(u,f.widget,f);b&&this.addElement(u,f,[b])}finish(){let u=this.gutter;for(;u.elements.length>this.i;){let f=u.elements.pop();u.dom.removeChild(f.dom),f.destroy()}}}class Sa{constructor(u,f){this.view=u,this.config=f,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let b in f.domEventHandlers)this.dom.addEventListener(b,T=>{let B=T.target,U;if(B!=this.dom&&this.dom.contains(B)){for(;B.parentNode!=this.dom;)B=B.parentNode;let ce=B.getBoundingClientRect();U=(ce.top+ce.bottom)/2}else U=T.clientY;let ie=u.lineBlockAtHeight(U-u.documentTop);f.domEventHandlers[b](u,ie,T)&&T.preventDefault()});this.markers=Yc(f.markers(u)),f.initialSpacer&&(this.spacer=new hc(u,0,0,[f.initialSpacer(u)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(u){let f=this.markers;if(this.markers=Yc(this.config.markers(u.view)),this.spacer&&this.config.updateSpacer){let T=this.config.updateSpacer(this.spacer.markers[0],u);T!=this.spacer.markers[0]&&this.spacer.update(u.view,0,0,[T])}let b=u.view.viewport;return!xe.Xs.eq(this.markers,f,b.from,b.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(u):!1)}destroy(){for(let u of this.elements)u.destroy()}}class hc{constructor(u,f,b,T){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(u,f,b,T)}update(u,f,b,T){this.height!=f&&(this.height=f,this.dom.style.height=f+"px"),this.above!=b&&(this.dom.style.marginTop=(this.above=b)?b+"px":""),Ma(this.markers,T)||this.setMarkers(u,T)}setMarkers(u,f){let b="cm-gutterElement",T=this.dom.firstChild;for(let B=0,U=0;;){let ie=U,ce=B<f.length?f[B++]:null,_e=!1;if(ce){let Oe=ce.elementClass;Oe&&(b+=" "+Oe);for(let lt=U;lt<this.markers.length;lt++)if(this.markers[lt].compare(ce)){ie=lt,_e=!0;break}}else ie=this.markers.length;for(;U<ie;){let Oe=this.markers[U++];if(Oe.toDOM){Oe.destroy(T);let lt=T.nextSibling;T.remove(),T=lt}}if(!ce)break;ce.toDOM&&(_e?T=T.nextSibling:this.dom.insertBefore(ce.toDOM(u),T)),_e&&U++}this.dom.className=b,this.markers=f}destroy(){this.setMarkers(null,[])}}function Ma(E,u){if(E.length!=u.length)return!1;for(let f=0;f<E.length;f++)if(!E[f].compare(u[f]))return!1;return!0}const Hl=xe.r$.define(),sl=xe.r$.define({combine(E){return(0,xe.BO)(E,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(u,f){let b=Object.assign({},u);for(let T in f){let B=b[T],U=f[T];b[T]=B?(ie,ce,_e)=>B(ie,ce,_e)||U(ie,ce,_e):U}return b}})}});class ya extends xo{constructor(u){super(),this.number=u}eq(u){return this.number==u.number}toDOM(){return document.createTextNode(this.number)}}function Ul(E,u){return E.state.facet(sl).formatNumber(u,E.state)}const xl=su.compute([sl],E=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(u){return u.state.facet(Hl)},lineMarker(u,f,b){return b.some(T=>T.toDOM)?null:new ya(Ul(u,u.state.doc.lineAt(f.from).number))},widgetMarker:()=>null,lineMarkerChange:u=>u.startState.facet(sl)!=u.state.facet(sl),initialSpacer(u){return new ya(Ul(u,Au(u.state.doc.lines)))},updateSpacer(u,f){let b=Ul(f.view,Au(f.view.state.doc.lines));return b==u.number?u:new ya(b)},domEventHandlers:E.facet(sl).domEventHandlers}));function kl(E={}){return[sl.of(E),Ol(),xl]}function Au(E){let u=9;for(;u<E;)u=u*10+9;return u}const Yo=new class extends xo{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},fo=vl.compute(["selection"],E=>{let u=[],f=-1;for(let b of E.selection.ranges){let T=E.doc.lineAt(b.head).from;T>f&&(f=T,u.push(Yo.range(T)))}return xe.Xs.of(u)});function ta(){return fo}const tc=new Map;function is(E){let u=tc.get(E);return u||tc.set(E,u=Qi.mark({attributes:E==="	"?{class:"cm-highlightTab"}:{class:"cm-highlightSpace","data-display":E.replace(/ /g,"\xB7")}})),u}function C(E){return ds.define(u=>({decorations:E.createDeco(u),update(f){this.decorations=E.updateDeco(f,this.decorations)}}),{decorations:u=>u.decorations})}const R=C(new $({regexp:/\t| +/g,decoration:E=>is(E[0]),boundary:/\S/}));function G(){return R}const oe=C(new $({regexp:/\s+$/g,decoration:Qi.mark({class:"cm-trailingSpace"}),boundary:/\S/}));function Se(){return oe}const xt={HeightMap:Gs,HeightOracle:Ei,MeasuredHeights:Xr,QueryType:Ci,ChangedRange:no,computeOrder:P,moveVisually:te}},99415:function(lo,bs,dn){"use strict";dn.d(bs,{Jq:function(){return ii},L3:function(){return xe},Lj:function(){return Nn},_b:function(){return ze},i9:function(){return $e},md:function(){return it},mp:function(){return gn},vj:function(){return vn}});const xe=1024;let It=0;class fn{constructor(fe,Fe){this.from=fe,this.to=Fe}}class it{constructor(fe={}){this.id=It++,this.perNode=!!fe.perNode,this.deserialize=fe.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(fe){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof fe!="function"&&(fe=ii.match(fe)),Fe=>{let Ye=fe(Fe);return Ye===void 0?null:[this,Ye]}}}it.closedBy=new it({deserialize:en=>en.split(" ")}),it.openedBy=new it({deserialize:en=>en.split(" ")}),it.group=new it({deserialize:en=>en.split(" ")}),it.isolate=new it({deserialize:en=>{if(en&&en!="rtl"&&en!="ltr"&&en!="auto")throw new RangeError("Invalid value for isolate: "+en);return en||"auto"}}),it.contextHash=new it({perNode:!0}),it.lookAhead=new it({perNode:!0}),it.mounted=new it({perNode:!0});class Qt{constructor(fe,Fe,Ye){this.tree=fe,this.overlay=Fe,this.parser=Ye}static get(fe){return fe&&fe.props&&fe.props[it.mounted.id]}}const yn=Object.create(null);class ii{constructor(fe,Fe,Ye,Ve=0){this.name=fe,this.props=Fe,this.id=Ye,this.flags=Ve}static define(fe){let Fe=fe.props&&fe.props.length?Object.create(null):yn,Ye=(fe.top?1:0)|(fe.skipped?2:0)|(fe.error?4:0)|(fe.name==null?8:0),Ve=new ii(fe.name||"",Fe,fe.id,Ye);if(fe.props){for(let Ge of fe.props)if(Array.isArray(Ge)||(Ge=Ge(Ve)),Ge){if(Ge[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");Fe[Ge[0].id]=Ge[1]}}return Ve}prop(fe){return this.props[fe.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(fe){if(typeof fe=="string"){if(this.name==fe)return!0;let Fe=this.prop(it.group);return Fe?Fe.indexOf(fe)>-1:!1}return this.id==fe}static match(fe){let Fe=Object.create(null);for(let Ye in fe)for(let Ve of Ye.split(" "))Fe[Ve]=fe[Ye];return Ye=>{for(let Ve=Ye.prop(it.group),Ge=-1;Ge<(Ve?Ve.length:0);Ge++){let Ut=Fe[Ge<0?Ye.name:Ve[Ge]];if(Ut)return Ut}}}}ii.none=new ii("",Object.create(null),0,8);class Nn{constructor(fe){this.types=fe;for(let Fe=0;Fe<fe.length;Fe++)if(fe[Fe].id!=Fe)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...fe){let Fe=[];for(let Ye of this.types){let Ve=null;for(let Ge of fe){let Ut=Ge(Ye);Ut&&(Ve||(Ve=Object.assign({},Ye.props)),Ve[Ut[0].id]=Ut[1])}Fe.push(Ve?new ii(Ye.name,Ve,Ye.id,Ye.flags):Ye)}return new Nn(Fe)}}const Kt=new WeakMap,In=new WeakMap;var vn;(function(en){en[en.ExcludeBuffers=1]="ExcludeBuffers",en[en.IncludeAnonymous=2]="IncludeAnonymous",en[en.IgnoreMounts=4]="IgnoreMounts",en[en.IgnoreOverlays=8]="IgnoreOverlays"})(vn||(vn={}));class gn{constructor(fe,Fe,Ye,Ve,Ge){if(this.type=fe,this.children=Fe,this.positions=Ye,this.length=Ve,this.props=null,Ge&&Ge.length){this.props=Object.create(null);for(let[Ut,sn]of Ge)this.props[typeof Ut=="number"?Ut:Ut.id]=sn}}toString(){let fe=Qt.get(this);if(fe&&!fe.overlay)return fe.tree.toString();let Fe="";for(let Ye of this.children){let Ve=Ye.toString();Ve&&(Fe&&(Fe+=","),Fe+=Ve)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(Fe.length?"("+Fe+")":""):Fe}cursor(fe=0){return new wr(this.topNode,fe)}cursorAt(fe,Fe=0,Ye=0){let Ve=Kt.get(this)||this.topNode,Ge=new wr(Ve);return Ge.moveTo(fe,Fe),Kt.set(this,Ge._tree),Ge}get topNode(){return new mr(this,0,0,null)}resolve(fe,Fe=0){let Ye=$t(Kt.get(this)||this.topNode,fe,Fe,!1);return Kt.set(this,Ye),Ye}resolveInner(fe,Fe=0){let Ye=$t(In.get(this)||this.topNode,fe,Fe,!0);return In.set(this,Ye),Ye}resolveStack(fe,Fe=0){return cs(this,fe,Fe)}iterate(fe){let{enter:Fe,leave:Ye,from:Ve=0,to:Ge=this.length}=fe,Ut=fe.mode||0,sn=(Ut&vn.IncludeAnonymous)>0;for(let _n=this.cursor(Ut|vn.IncludeAnonymous);;){let Hi=!1;if(_n.from<=Ge&&_n.to>=Ve&&(!sn&&_n.type.isAnonymous||Fe(_n)!==!1)){if(_n.firstChild())continue;Hi=!0}for(;Hi&&Ye&&(sn||!_n.type.isAnonymous)&&Ye(_n),!_n.nextSibling();){if(!_n.parent())return;Hi=!0}}}prop(fe){return fe.perNode?this.props?this.props[fe.id]:void 0:this.type.prop(fe)}get propValues(){let fe=[];if(this.props)for(let Fe in this.props)fe.push([+Fe,this.props[Fe]]);return fe}balance(fe={}){return this.children.length<=8?this:ci(ii.none,this.children,this.positions,0,this.children.length,0,this.length,(Fe,Ye,Ve)=>new gn(this.type,Fe,Ye,Ve,this.propValues),fe.makeTree||((Fe,Ye,Ve)=>new gn(ii.none,Fe,Ye,Ve)))}static build(fe){return vr(fe)}}gn.empty=new gn(ii.none,[],[],0);class Si{constructor(fe,Fe){this.buffer=fe,this.index=Fe}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Si(this.buffer,this.index)}}class Ii{constructor(fe,Fe,Ye){this.buffer=fe,this.length=Fe,this.set=Ye}get type(){return ii.none}toString(){let fe=[];for(let Fe=0;Fe<this.buffer.length;)fe.push(this.childString(Fe)),Fe=this.buffer[Fe+3];return fe.join(",")}childString(fe){let Fe=this.buffer[fe],Ye=this.buffer[fe+3],Ve=this.set.types[Fe],Ge=Ve.name;if(/\W/.test(Ge)&&!Ve.isError&&(Ge=JSON.stringify(Ge)),fe+=4,Ye==fe)return Ge;let Ut=[];for(;fe<Ye;)Ut.push(this.childString(fe)),fe=this.buffer[fe+3];return Ge+"("+Ut.join(",")+")"}findChild(fe,Fe,Ye,Ve,Ge){let{buffer:Ut}=this,sn=-1;for(let _n=fe;_n!=Fe&&!(Un(Ge,Ve,Ut[_n+1],Ut[_n+2])&&(sn=_n,Ye>0));_n=Ut[_n+3]);return sn}slice(fe,Fe,Ye){let Ve=this.buffer,Ge=new Uint16Array(Fe-fe),Ut=0;for(let sn=fe,_n=0;sn<Fe;){Ge[_n++]=Ve[sn++],Ge[_n++]=Ve[sn++]-Ye;let Hi=Ge[_n++]=Ve[sn++]-Ye;Ge[_n++]=Ve[sn++]-fe,Ut=Math.max(Ut,Hi)}return new Ii(Ge,Ut,this.set)}}function Un(en,fe,Fe,Ye){switch(en){case-2:return Fe<fe;case-1:return Ye>=fe&&Fe<fe;case 0:return Fe<fe&&Ye>fe;case 1:return Fe<=fe&&Ye>fe;case 2:return Ye>fe;case 4:return!0}}function $t(en,fe,Fe,Ye){for(var Ve;en.from==en.to||(Fe<1?en.from>=fe:en.from>fe)||(Fe>-1?en.to<=fe:en.to<fe);){let Ut=!Ye&&en instanceof mr&&en.index<0?null:en.parent;if(!Ut)return en;en=Ut}let Ge=Ye?0:vn.IgnoreOverlays;if(Ye)for(let Ut=en,sn=Ut.parent;sn;Ut=sn,sn=Ut.parent)Ut instanceof mr&&Ut.index<0&&((Ve=sn.enter(fe,Fe,Ge))===null||Ve===void 0?void 0:Ve.from)!=Ut.from&&(en=sn);for(;;){let Ut=en.enter(fe,Fe,Ge);if(!Ut)return en;en=Ut}}class qt{cursor(fe=0){return new wr(this,fe)}getChild(fe,Fe=null,Ye=null){let Ve=ss(this,fe,Fe,Ye);return Ve.length?Ve[0]:null}getChildren(fe,Fe=null,Ye=null){return ss(this,fe,Fe,Ye)}resolve(fe,Fe=0){return $t(this,fe,Fe,!1)}resolveInner(fe,Fe=0){return $t(this,fe,Fe,!0)}matchContext(fe){return Dr(this,fe)}enterUnfinishedNodesBefore(fe){let Fe=this.childBefore(fe),Ye=this;for(;Fe;){let Ve=Fe.lastChild;if(!Ve||Ve.to!=Fe.to)break;Ve.type.isError&&Ve.from==Ve.to?(Ye=Fe,Fe=Ve.prevSibling):Fe=Ve}return Ye}get node(){return this}get next(){return this.parent}}class mr extends qt{constructor(fe,Fe,Ye,Ve){super(),this._tree=fe,this.from=Fe,this.index=Ye,this._parent=Ve}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(fe,Fe,Ye,Ve,Ge=0){for(let Ut=this;;){for(let{children:sn,positions:_n}=Ut._tree,Hi=Fe>0?sn.length:-1;fe!=Hi;fe+=Fe){let Wn=sn[fe],xi=_n[fe]+Ut.from;if(Un(Ve,Ye,xi,xi+Wn.length)){if(Wn instanceof Ii){if(Ge&vn.ExcludeBuffers)continue;let ar=Wn.findChild(0,Wn.buffer.length,Fe,Ye-xi,Ve);if(ar>-1)return new pi(new zs(Ut,Wn,fe,xi),null,ar)}else if(Ge&vn.IncludeAnonymous||!Wn.type.isAnonymous||jr(Wn)){let ar;if(!(Ge&vn.IgnoreMounts)&&(ar=Qt.get(Wn))&&!ar.overlay)return new mr(ar.tree,xi,fe,Ut);let di=new mr(Wn,xi,fe,Ut);return Ge&vn.IncludeAnonymous||!di.type.isAnonymous?di:di.nextChild(Fe<0?Wn.children.length-1:0,Fe,Ye,Ve)}}}if(Ge&vn.IncludeAnonymous||!Ut.type.isAnonymous||(Ut.index>=0?fe=Ut.index+Fe:fe=Fe<0?-1:Ut._parent._tree.children.length,Ut=Ut._parent,!Ut))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(fe){return this.nextChild(0,1,fe,2)}childBefore(fe){return this.nextChild(this._tree.children.length-1,-1,fe,-2)}enter(fe,Fe,Ye=0){let Ve;if(!(Ye&vn.IgnoreOverlays)&&(Ve=Qt.get(this._tree))&&Ve.overlay){let Ge=fe-this.from;for(let{from:Ut,to:sn}of Ve.overlay)if((Fe>0?Ut<=Ge:Ut<Ge)&&(Fe<0?sn>=Ge:sn>Ge))return new mr(Ve.tree,Ve.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,fe,Fe,Ye)}nextSignificantParent(){let fe=this;for(;fe.type.isAnonymous&&fe._parent;)fe=fe._parent;return fe}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function ss(en,fe,Fe,Ye){let Ve=en.cursor(),Ge=[];if(!Ve.firstChild())return Ge;if(Fe!=null){for(let Ut=!1;!Ut;)if(Ut=Ve.type.is(Fe),!Ve.nextSibling())return Ge}for(;;){if(Ye!=null&&Ve.type.is(Ye))return Ge;if(Ve.type.is(fe)&&Ge.push(Ve.node),!Ve.nextSibling())return Ye==null?Ge:[]}}function Dr(en,fe,Fe=fe.length-1){for(let Ye=en.parent;Fe>=0;Ye=Ye.parent){if(!Ye)return!1;if(!Ye.type.isAnonymous){if(fe[Fe]&&fe[Fe]!=Ye.name)return!1;Fe--}}return!0}class zs{constructor(fe,Fe,Ye,Ve){this.parent=fe,this.buffer=Fe,this.index=Ye,this.start=Ve}}class pi extends qt{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(fe,Fe,Ye){super(),this.context=fe,this._parent=Fe,this.index=Ye,this.type=fe.buffer.set.types[fe.buffer.buffer[Ye]]}child(fe,Fe,Ye){let{buffer:Ve}=this.context,Ge=Ve.findChild(this.index+4,Ve.buffer[this.index+3],fe,Fe-this.context.start,Ye);return Ge<0?null:new pi(this.context,this,Ge)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(fe){return this.child(1,fe,2)}childBefore(fe){return this.child(-1,fe,-2)}enter(fe,Fe,Ye=0){if(Ye&vn.ExcludeBuffers)return null;let{buffer:Ve}=this.context,Ge=Ve.findChild(this.index+4,Ve.buffer[this.index+3],Fe>0?1:-1,fe-this.context.start,Fe);return Ge<0?null:new pi(this.context,this,Ge)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(fe){return this._parent?null:this.context.parent.nextChild(this.context.index+fe,fe,0,4)}get nextSibling(){let{buffer:fe}=this.context,Fe=fe.buffer[this.index+3];return Fe<(this._parent?fe.buffer[this._parent.index+3]:fe.buffer.length)?new pi(this.context,this._parent,Fe):this.externalSibling(1)}get prevSibling(){let{buffer:fe}=this.context,Fe=this._parent?this._parent.index+4:0;return this.index==Fe?this.externalSibling(-1):new pi(this.context,this._parent,fe.findChild(Fe,this.index,-1,0,4))}get tree(){return null}toTree(){let fe=[],Fe=[],{buffer:Ye}=this.context,Ve=this.index+4,Ge=Ye.buffer[this.index+3];if(Ge>Ve){let Ut=Ye.buffer[this.index+1];fe.push(Ye.slice(Ve,Ge,Ut)),Fe.push(0)}return new gn(this.type,fe,Fe,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function vs(en){if(!en.length)return null;let fe=0,Fe=en[0];for(let Ge=1;Ge<en.length;Ge++){let Ut=en[Ge];(Ut.from>Fe.from||Ut.to<Fe.to)&&(Fe=Ut,fe=Ge)}let Ye=Fe instanceof mr&&Fe.index<0?null:Fe.parent,Ve=en.slice();return Ye?Ve[fe]=Ye:Ve.splice(fe,1),new uo(Ve,Fe)}class uo{constructor(fe,Fe){this.heads=fe,this.node=Fe}get next(){return vs(this.heads)}}function cs(en,fe,Fe){let Ye=en.resolveInner(fe,Fe),Ve=null;for(let Ge=Ye instanceof mr?Ye:Ye.context.parent;Ge;Ge=Ge.parent)if(Ge.index<0){let Ut=Ge.parent;(Ve||(Ve=[Ye])).push(Ut.resolve(fe,Fe)),Ge=Ut}else{let Ut=Qt.get(Ge.tree);if(Ut&&Ut.overlay&&Ut.overlay[0].from<=fe&&Ut.overlay[Ut.overlay.length-1].to>=fe){let sn=new mr(Ut.tree,Ut.overlay[0].from+Ge.from,-1,Ge);(Ve||(Ve=[Ye])).push($t(sn,fe,Fe,!1))}}return Ve?vs(Ve):Ye}class wr{get name(){return this.type.name}constructor(fe,Fe=0){if(this.mode=Fe,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,fe instanceof mr)this.yieldNode(fe);else{this._tree=fe.context.parent,this.buffer=fe.context;for(let Ye=fe._parent;Ye;Ye=Ye._parent)this.stack.unshift(Ye.index);this.bufferNode=fe,this.yieldBuf(fe.index)}}yieldNode(fe){return fe?(this._tree=fe,this.type=fe.type,this.from=fe.from,this.to=fe.to,!0):!1}yieldBuf(fe,Fe){this.index=fe;let{start:Ye,buffer:Ve}=this.buffer;return this.type=Fe||Ve.set.types[Ve.buffer[fe]],this.from=Ye+Ve.buffer[fe+1],this.to=Ye+Ve.buffer[fe+2],!0}yield(fe){return fe?fe instanceof mr?(this.buffer=null,this.yieldNode(fe)):(this.buffer=fe.context,this.yieldBuf(fe.index,fe.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(fe,Fe,Ye){if(!this.buffer)return this.yield(this._tree.nextChild(fe<0?this._tree._tree.children.length-1:0,fe,Fe,Ye,this.mode));let{buffer:Ve}=this.buffer,Ge=Ve.findChild(this.index+4,Ve.buffer[this.index+3],fe,Fe-this.buffer.start,Ye);return Ge<0?!1:(this.stack.push(this.index),this.yieldBuf(Ge))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(fe){return this.enterChild(1,fe,2)}childBefore(fe){return this.enterChild(-1,fe,-2)}enter(fe,Fe,Ye=this.mode){return this.buffer?Ye&vn.ExcludeBuffers?!1:this.enterChild(1,fe,Fe):this.yield(this._tree.enter(fe,Fe,Ye))}parent(){if(!this.buffer)return this.yieldNode(this.mode&vn.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let fe=this.mode&vn.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(fe)}sibling(fe){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+fe,fe,0,4,this.mode)):!1;let{buffer:Fe}=this.buffer,Ye=this.stack.length-1;if(fe<0){let Ve=Ye<0?0:this.stack[Ye]+4;if(this.index!=Ve)return this.yieldBuf(Fe.findChild(Ve,this.index,-1,0,4))}else{let Ve=Fe.buffer[this.index+3];if(Ve<(Ye<0?Fe.buffer.length:Fe.buffer[this.stack[Ye]+3]))return this.yieldBuf(Ve)}return Ye<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+fe,fe,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(fe){let Fe,Ye,{buffer:Ve}=this;if(Ve){if(fe>0){if(this.index<Ve.buffer.buffer.length)return!1}else for(let Ge=0;Ge<this.index;Ge++)if(Ve.buffer.buffer[Ge+3]<this.index)return!1;({index:Fe,parent:Ye}=Ve)}else({index:Fe,_parent:Ye}=this._tree);for(;Ye;{index:Fe,_parent:Ye}=Ye)if(Fe>-1)for(let Ge=Fe+fe,Ut=fe<0?-1:Ye._tree.children.length;Ge!=Ut;Ge+=fe){let sn=Ye._tree.children[Ge];if(this.mode&vn.IncludeAnonymous||sn instanceof Ii||!sn.type.isAnonymous||jr(sn))return!1}return!0}move(fe,Fe){if(Fe&&this.enterChild(fe,0,4))return!0;for(;;){if(this.sibling(fe))return!0;if(this.atLastNode(fe)||!this.parent())return!1}}next(fe=!0){return this.move(1,fe)}prev(fe=!0){return this.move(-1,fe)}moveTo(fe,Fe=0){for(;(this.from==this.to||(Fe<1?this.from>=fe:this.from>fe)||(Fe>-1?this.to<=fe:this.to<fe))&&this.parent(););for(;this.enterChild(1,fe,Fe););return this}get node(){if(!this.buffer)return this._tree;let fe=this.bufferNode,Fe=null,Ye=0;if(fe&&fe.context==this.buffer)e:for(let Ve=this.index,Ge=this.stack.length;Ge>=0;){for(let Ut=fe;Ut;Ut=Ut._parent)if(Ut.index==Ve){if(Ve==this.index)return Ut;Fe=Ut,Ye=Ge+1;break e}Ve=this.stack[--Ge]}for(let Ve=Ye;Ve<this.stack.length;Ve++)Fe=new pi(this.buffer,Fe,this.stack[Ve]);return this.bufferNode=new pi(this.buffer,Fe,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(fe,Fe){for(let Ye=0;;){let Ve=!1;if(this.type.isAnonymous||fe(this)!==!1){if(this.firstChild()){Ye++;continue}this.type.isAnonymous||(Ve=!0)}for(;Ve&&Fe&&Fe(this),Ve=this.type.isAnonymous,!this.nextSibling();){if(!Ye)return;this.parent(),Ye--,Ve=!0}}}matchContext(fe){if(!this.buffer)return Dr(this.node,fe);let{buffer:Fe}=this.buffer,{types:Ye}=Fe.set;for(let Ve=fe.length-1,Ge=this.stack.length-1;Ve>=0;Ge--){if(Ge<0)return Dr(this.node,fe,Ve);let Ut=Ye[Fe.buffer[this.stack[Ge]]];if(!Ut.isAnonymous){if(fe[Ve]&&fe[Ve]!=Ut.name)return!1;Ve--}}return!0}}function jr(en){return en.children.some(fe=>fe instanceof Ii||!fe.type.isAnonymous||jr(fe))}function vr(en){var fe;let{buffer:Fe,nodeSet:Ye,maxBufferLength:Ve=xe,reused:Ge=[],minRepeatType:Ut=Ye.types.length}=en,sn=Array.isArray(Fe)?new Si(Fe,Fe.length):Fe,_n=Ye.types,Hi=0,Wn=0;function xi(Ni,qr,Di,Sr,Qi,_i){let{id:gr,start:Zn,end:tr,size:bn}=sn,Wr=Wn;for(;bn<0;)if(sn.next(),bn==-1){let Qs=Ge[gr];Di.push(Qs),Sr.push(Zn-Ni);return}else if(bn==-3){Hi=gr;return}else if(bn==-4){Wn=gr;return}else throw new RangeError(`Unrecognized record size: ${bn}`);let Js=_n[gr],Hr,Lr,Pi=Zn-Ni;if(tr-Zn<=Ve&&(Lr=bi(sn.pos-qr,Qi))){let Qs=new Uint16Array(Lr.size-Lr.skip),Pn=sn.pos-Lr.size,Xs=Qs.length;for(;sn.pos>Pn;)Xs=Gr(Lr.start,Qs,Xs);Hr=new Ii(Qs,tr-Lr.start,Ye),Pi=Lr.start-Ni}else{let Qs=sn.pos-bn;sn.next();let Pn=[],Xs=[],Ts=gr>=Ut?gr:-1,Kr=0,hs=tr;for(;sn.pos>Qs;)Ts>=0&&sn.id==Ts&&sn.size>=0?(sn.end<=hs-Ve&&(Ui(Pn,Xs,Zn,Kr,sn.end,hs,Ts,Wr),Kr=Pn.length,hs=sn.end),sn.next()):_i>2500?ar(Zn,Qs,Pn,Xs):xi(Zn,Qs,Pn,Xs,Ts,_i+1);if(Ts>=0&&Kr>0&&Kr<Pn.length&&Ui(Pn,Xs,Zn,Kr,Zn,hs,Ts,Wr),Pn.reverse(),Xs.reverse(),Ts>-1&&Kr>0){let os=di(Js);Hr=ci(Js,Pn,Xs,0,Pn.length,0,tr-Zn,os,os)}else Hr=hr(Js,Pn,Xs,tr-Zn,Wr-tr)}Di.push(Hr),Sr.push(Pi)}function ar(Ni,qr,Di,Sr){let Qi=[],_i=0,gr=-1;for(;sn.pos>qr;){let{id:Zn,start:tr,end:bn,size:Wr}=sn;if(Wr>4)sn.next();else{if(gr>-1&&tr<gr)break;gr<0&&(gr=bn-Ve),Qi.push(Zn,tr,bn),_i++,sn.next()}}if(_i){let Zn=new Uint16Array(_i*4),tr=Qi[Qi.length-2];for(let bn=Qi.length-3,Wr=0;bn>=0;bn-=3)Zn[Wr++]=Qi[bn],Zn[Wr++]=Qi[bn+1]-tr,Zn[Wr++]=Qi[bn+2]-tr,Zn[Wr++]=Wr;Di.push(new Ii(Zn,Qi[2]-tr,Ye)),Sr.push(tr-Ni)}}function di(Ni){return(qr,Di,Sr)=>{let Qi=0,_i=qr.length-1,gr,Zn;if(_i>=0&&(gr=qr[_i])instanceof gn){if(!_i&&gr.type==Ni&&gr.length==Sr)return gr;(Zn=gr.prop(it.lookAhead))&&(Qi=Di[_i]+gr.length+Zn)}return hr(Ni,qr,Di,Sr,Qi)}}function Ui(Ni,qr,Di,Sr,Qi,_i,gr,Zn){let tr=[],bn=[];for(;Ni.length>Sr;)tr.push(Ni.pop()),bn.push(qr.pop()+Di-Qi);Ni.push(hr(Ye.types[gr],tr,bn,_i-Qi,Zn-_i)),qr.push(Qi-Di)}function hr(Ni,qr,Di,Sr,Qi=0,_i){if(Hi){let gr=[it.contextHash,Hi];_i=_i?[gr].concat(_i):[gr]}if(Qi>25){let gr=[it.lookAhead,Qi];_i=_i?[gr].concat(_i):[gr]}return new gn(Ni,qr,Di,Sr,_i)}function bi(Ni,qr){let Di=sn.fork(),Sr=0,Qi=0,_i=0,gr=Di.end-Ve,Zn={size:0,start:0,skip:0};e:for(let tr=Di.pos-Ni;Di.pos>tr;){let bn=Di.size;if(Di.id==qr&&bn>=0){Zn.size=Sr,Zn.start=Qi,Zn.skip=_i,_i+=4,Sr+=4,Di.next();continue}let Wr=Di.pos-bn;if(bn<0||Wr<tr||Di.start<gr)break;let Js=Di.id>=Ut?4:0,Hr=Di.start;for(Di.next();Di.pos>Wr;){if(Di.size<0)if(Di.size==-3)Js+=4;else break e;else Di.id>=Ut&&(Js+=4);Di.next()}Qi=Hr,Sr+=bn,_i+=Js}return(qr<0||Sr==Ni)&&(Zn.size=Sr,Zn.start=Qi,Zn.skip=_i),Zn.size>4?Zn:void 0}function Gr(Ni,qr,Di){let{id:Sr,start:Qi,end:_i,size:gr}=sn;if(sn.next(),gr>=0&&Sr<Ut){let Zn=Di;if(gr>4){let tr=sn.pos-(gr-4);for(;sn.pos>tr;)Di=Gr(Ni,qr,Di)}qr[--Di]=Zn,qr[--Di]=_i-Ni,qr[--Di]=Qi-Ni,qr[--Di]=Sr}else gr==-3?Hi=Sr:gr==-4&&(Wn=Sr);return Di}let Zi=[],xr=[];for(;sn.pos>0;)xi(en.start||0,en.bufferStart||0,Zi,xr,-1,0);let ms=(fe=en.length)!==null&&fe!==void 0?fe:Zi.length?xr[0]+Zi[0].length:0;return new gn(_n[en.topID],Zi.reverse(),xr.reverse(),ms)}const qs=new WeakMap;function Is(en,fe){if(!en.isAnonymous||fe instanceof Ii||fe.type!=en)return 1;let Fe=qs.get(fe);if(Fe==null){Fe=1;for(let Ye of fe.children){if(Ye.type!=en||!(Ye instanceof gn)){Fe=1;break}Fe+=Is(en,Ye)}qs.set(fe,Fe)}return Fe}function ci(en,fe,Fe,Ye,Ve,Ge,Ut,sn,_n){let Hi=0;for(let Ui=Ye;Ui<Ve;Ui++)Hi+=Is(en,fe[Ui]);let Wn=Math.ceil(Hi*1.5/8),xi=[],ar=[];function di(Ui,hr,bi,Gr,Zi){for(let xr=bi;xr<Gr;){let ms=xr,Ni=hr[xr],qr=Is(en,Ui[xr]);for(xr++;xr<Gr;xr++){let Di=Is(en,Ui[xr]);if(qr+Di>=Wn)break;qr+=Di}if(xr==ms+1){if(qr>Wn){let Di=Ui[ms];di(Di.children,Di.positions,0,Di.children.length,hr[ms]+Zi);continue}xi.push(Ui[ms])}else{let Di=hr[xr-1]+Ui[xr-1].length-Ni;xi.push(ci(en,Ui,hr,ms,xr,Ni,Di,null,_n))}ar.push(Ni+Zi-Ge)}}return di(fe,Fe,Ye,Ve,0),(sn||_n)(xi,ar,Ut)}class le{constructor(){this.map=new WeakMap}setBuffer(fe,Fe,Ye){let Ve=this.map.get(fe);Ve||this.map.set(fe,Ve=new Map),Ve.set(Fe,Ye)}getBuffer(fe,Fe){let Ye=this.map.get(fe);return Ye&&Ye.get(Fe)}set(fe,Fe){fe instanceof pi?this.setBuffer(fe.context.buffer,fe.index,Fe):fe instanceof mr&&this.map.set(fe.tree,Fe)}get(fe){return fe instanceof pi?this.getBuffer(fe.context.buffer,fe.index):fe instanceof mr?this.map.get(fe.tree):void 0}cursorSet(fe,Fe){fe.buffer?this.setBuffer(fe.buffer.buffer,fe.index,Fe):this.map.set(fe.tree,Fe)}cursorGet(fe){return fe.buffer?this.getBuffer(fe.buffer.buffer,fe.index):this.map.get(fe.tree)}}class $e{constructor(fe,Fe,Ye,Ve,Ge=!1,Ut=!1){this.from=fe,this.to=Fe,this.tree=Ye,this.offset=Ve,this.open=(Ge?1:0)|(Ut?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(fe,Fe=[],Ye=!1){let Ve=[new $e(0,fe.length,fe,0,!1,Ye)];for(let Ge of Fe)Ge.to>fe.length&&Ve.push(Ge);return Ve}static applyChanges(fe,Fe,Ye=128){if(!Fe.length)return fe;let Ve=[],Ge=1,Ut=fe.length?fe[0]:null;for(let sn=0,_n=0,Hi=0;;sn++){let Wn=sn<Fe.length?Fe[sn]:null,xi=Wn?Wn.fromA:1e9;if(xi-_n>=Ye)for(;Ut&&Ut.from<xi;){let ar=Ut;if(_n>=ar.from||xi<=ar.to||Hi){let di=Math.max(ar.from,_n)-Hi,Ui=Math.min(ar.to,xi)-Hi;ar=di>=Ui?null:new $e(di,Ui,ar.tree,ar.offset+Hi,sn>0,!!Wn)}if(ar&&Ve.push(ar),Ut.to>xi)break;Ut=Ge<fe.length?fe[Ge++]:null}if(!Wn)break;_n=Wn.toA,Hi=Wn.toA-Wn.toB}return Ve}}class ze{startParse(fe,Fe,Ye){return typeof fe=="string"&&(fe=new ee(fe)),Ye=Ye?Ye.length?Ye.map(Ve=>new fn(Ve.from,Ve.to)):[new fn(0,0)]:[new fn(0,fe.length)],this.createParse(fe,Fe||[],Ye)}parse(fe,Fe,Ye){let Ve=this.startParse(fe,Fe,Ye);for(;;){let Ge=Ve.advance();if(Ge)return Ge}}}class ee{constructor(fe){this.string=fe}get length(){return this.string.length}chunk(fe){return this.string.slice(fe)}get lineChunks(){return!1}read(fe,Fe){return this.string.slice(fe,Fe)}}function Ze(en){return(fe,Fe,Ye,Ve)=>new Bn(fe,en,Fe,Ye,Ve)}class Ie{constructor(fe,Fe,Ye,Ve,Ge){this.parser=fe,this.parse=Fe,this.overlay=Ye,this.target=Ve,this.from=Ge}}function Xe(en){if(!en.length||en.some(fe=>fe.from>=fe.to))throw new RangeError("Invalid inner parse ranges given: "+JSON.stringify(en))}class St{constructor(fe,Fe,Ye,Ve,Ge,Ut,sn){this.parser=fe,this.predicate=Fe,this.mounts=Ye,this.index=Ve,this.start=Ge,this.target=Ut,this.prev=sn,this.depth=0,this.ranges=[]}}const Tt=new it({perNode:!0});class Bn{constructor(fe,Fe,Ye,Ve,Ge){this.nest=Fe,this.input=Ye,this.fragments=Ve,this.ranges=Ge,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=fe}advance(){if(this.baseParse){let Ye=this.baseParse.advance();if(!Ye)return null;if(this.baseParse=null,this.baseTree=Ye,this.startInner(),this.stoppedAt!=null)for(let Ve of this.inner)Ve.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let Ye=this.baseTree;return this.stoppedAt!=null&&(Ye=new gn(Ye.type,Ye.children,Ye.positions,Ye.length,Ye.propValues.concat([[Tt,this.stoppedAt]]))),Ye}let fe=this.inner[this.innerDone],Fe=fe.parse.advance();if(Fe){this.innerDone++;let Ye=Object.assign(Object.create(null),fe.target.props);Ye[it.mounted.id]=new Qt(Fe,fe.overlay,fe.parser),fe.target.props=Ye}return null}get parsedPos(){if(this.baseParse)return 0;let fe=this.input.length;for(let Fe=this.innerDone;Fe<this.inner.length;Fe++)this.inner[Fe].from<fe&&(fe=Math.min(fe,this.inner[Fe].parse.parsedPos));return fe}stopAt(fe){if(this.stoppedAt=fe,this.baseParse)this.baseParse.stopAt(fe);else for(let Fe=this.innerDone;Fe<this.inner.length;Fe++)this.inner[Fe].parse.stopAt(fe)}startInner(){let fe=new Vn(this.fragments),Fe=null,Ye=null,Ve=new wr(new mr(this.baseTree,this.ranges[0].from,0,null),vn.IncludeAnonymous|vn.IgnoreMounts);e:for(let Ge,Ut;;){let sn=!0,_n;if(this.stoppedAt!=null&&Ve.from>=this.stoppedAt)sn=!1;else if(fe.hasNode(Ve)){if(Fe){let Hi=Fe.mounts.find(Wn=>Wn.frag.from<=Ve.from&&Wn.frag.to>=Ve.to&&Wn.mount.overlay);if(Hi)for(let Wn of Hi.mount.overlay){let xi=Wn.from+Hi.pos,ar=Wn.to+Hi.pos;xi>=Ve.from&&ar<=Ve.to&&!Fe.ranges.some(di=>di.from<ar&&di.to>xi)&&Fe.ranges.push({from:xi,to:ar})}}sn=!1}else if(Ye&&(Ut=Fn(Ye.ranges,Ve.from,Ve.to)))sn=Ut!=2;else if(!Ve.type.isAnonymous&&(Ge=this.nest(Ve,this.input))&&(Ve.from<Ve.to||!Ge.overlay)){Ve.tree||hi(Ve);let Hi=fe.findMounts(Ve.from,Ge.parser);if(typeof Ge.overlay=="function")Fe=new St(Ge.parser,Ge.overlay,Hi,this.inner.length,Ve.from,Ve.tree,Fe);else{let Wn=fs(this.ranges,Ge.overlay||(Ve.from<Ve.to?[new fn(Ve.from,Ve.to)]:[]));Wn.length&&Xe(Wn),(Wn.length||!Ge.overlay)&&this.inner.push(new Ie(Ge.parser,Wn.length?Ge.parser.startParse(this.input,Ao(Hi,Wn),Wn):Ge.parser.startParse(""),Ge.overlay?Ge.overlay.map(xi=>new fn(xi.from-Ve.from,xi.to-Ve.from)):null,Ve.tree,Wn.length?Wn[0].from:Ve.from)),Ge.overlay?Wn.length&&(Ye={ranges:Wn,depth:0,prev:Ye}):sn=!1}}else Fe&&(_n=Fe.predicate(Ve))&&(_n===!0&&(_n=new fn(Ve.from,Ve.to)),_n.from<_n.to&&Fe.ranges.push(_n));if(sn&&Ve.firstChild())Fe&&Fe.depth++,Ye&&Ye.depth++;else for(;!Ve.nextSibling();){if(!Ve.parent())break e;if(Fe&&!--Fe.depth){let Hi=fs(this.ranges,Fe.ranges);Hi.length&&(Xe(Hi),this.inner.splice(Fe.index,0,new Ie(Fe.parser,Fe.parser.startParse(this.input,Ao(Fe.mounts,Hi),Hi),Fe.ranges.map(Wn=>new fn(Wn.from-Fe.start,Wn.to-Fe.start)),Fe.target,Hi[0].from))),Fe=Fe.prev}Ye&&!--Ye.depth&&(Ye=Ye.prev)}}}}function Fn(en,fe,Fe){for(let Ye of en){if(Ye.from>=Fe)break;if(Ye.to>fe)return Ye.from<=fe&&Ye.to>=Fe?2:1}return 0}function Qn(en,fe,Fe,Ye,Ve,Ge){if(fe<Fe){let Ut=en.buffer[fe+1];Ye.push(en.slice(fe,Fe,Ut)),Ve.push(Ut-Ge)}}function hi(en){let{node:fe}=en,Fe=[],Ye=fe.context.buffer;do Fe.push(en.index),en.parent();while(!en.tree);let Ve=en.tree,Ge=Ve.children.indexOf(Ye),Ut=Ve.children[Ge],sn=Ut.buffer,_n=[Ge];function Hi(Wn,xi,ar,di,Ui,hr){let bi=Fe[hr],Gr=[],Zi=[];Qn(Ut,Wn,bi,Gr,Zi,di);let xr=sn[bi+1],ms=sn[bi+2];_n.push(Gr.length);let Ni=hr?Hi(bi+4,sn[bi+3],Ut.set.types[sn[bi]],xr,ms-xr,hr-1):fe.toTree();return Gr.push(Ni),Zi.push(xr-di),Qn(Ut,sn[bi+3],xi,Gr,Zi,di),new gn(ar,Gr,Zi,Ui)}Ve.children[Ge]=Hi(0,sn.length,ii.none,0,Ut.length,Fe.length-1);for(let Wn of _n){let xi=en.tree.children[Wn],ar=en.tree.positions[Wn];en.yield(new mr(xi,ar+en.from,Wn,en._tree))}}class Ki{constructor(fe,Fe){this.offset=Fe,this.done=!1,this.cursor=fe.cursor(vn.IncludeAnonymous|vn.IgnoreMounts)}moveTo(fe){let{cursor:Fe}=this,Ye=fe-this.offset;for(;!this.done&&Fe.from<Ye;)Fe.to>=fe&&Fe.enter(Ye,1,vn.IgnoreOverlays|vn.ExcludeBuffers)||Fe.next(!1)||(this.done=!0)}hasNode(fe){if(this.moveTo(fe.from),!this.done&&this.cursor.from+this.offset==fe.from&&this.cursor.tree)for(let Fe=this.cursor.tree;;){if(Fe==fe.tree)return!0;if(Fe.children.length&&Fe.positions[0]==0&&Fe.children[0]instanceof gn)Fe=Fe.children[0];else break}return!1}}class Vn{constructor(fe){var Fe;if(this.fragments=fe,this.curTo=0,this.fragI=0,fe.length){let Ye=this.curFrag=fe[0];this.curTo=(Fe=Ye.tree.prop(Tt))!==null&&Fe!==void 0?Fe:Ye.to,this.inner=new Ki(Ye.tree,-Ye.offset)}else this.curFrag=this.inner=null}hasNode(fe){for(;this.curFrag&&fe.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=fe.from&&this.curTo>=fe.to&&this.inner.hasNode(fe)}nextFrag(){var fe;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let Fe=this.curFrag=this.fragments[this.fragI];this.curTo=(fe=Fe.tree.prop(Tt))!==null&&fe!==void 0?fe:Fe.to,this.inner=new Ki(Fe.tree,-Fe.offset)}}findMounts(fe,Fe){var Ye;let Ve=[];if(this.inner){this.inner.cursor.moveTo(fe,1);for(let Ge=this.inner.cursor.node;Ge;Ge=Ge.parent){let Ut=(Ye=Ge.tree)===null||Ye===void 0?void 0:Ye.prop(it.mounted);if(Ut&&Ut.parser==Fe)for(let sn=this.fragI;sn<this.fragments.length;sn++){let _n=this.fragments[sn];if(_n.from>=Ge.to)break;_n.tree==this.curFrag.tree&&Ve.push({frag:_n,pos:Ge.from-_n.offset,mount:Ut})}}}return Ve}}function fs(en,fe){let Fe=null,Ye=fe;for(let Ve=1,Ge=0;Ve<en.length;Ve++){let Ut=en[Ve-1].to,sn=en[Ve].from;for(;Ge<Ye.length;Ge++){let _n=Ye[Ge];if(_n.from>=sn)break;_n.to<=Ut||(Fe||(Ye=Fe=fe.slice()),_n.from<Ut?(Fe[Ge]=new fn(_n.from,Ut),_n.to>sn&&Fe.splice(Ge+1,0,new fn(sn,_n.to))):_n.to>sn?Fe[Ge--]=new fn(sn,_n.to):Fe.splice(Ge--,1))}}return Ye}function wo(en,fe,Fe,Ye){let Ve=0,Ge=0,Ut=!1,sn=!1,_n=-1e9,Hi=[];for(;;){let Wn=Ve==en.length?1e9:Ut?en[Ve].to:en[Ve].from,xi=Ge==fe.length?1e9:sn?fe[Ge].to:fe[Ge].from;if(Ut!=sn){let ar=Math.max(_n,Fe),di=Math.min(Wn,xi,Ye);ar<di&&Hi.push(new fn(ar,di))}if(_n=Math.min(Wn,xi),_n==1e9)break;Wn==_n&&(Ut?(Ut=!1,Ve++):Ut=!0),xi==_n&&(sn?(sn=!1,Ge++):sn=!0)}return Hi}function Ao(en,fe){let Fe=[];for(let{pos:Ye,mount:Ve,frag:Ge}of en){let Ut=Ye+(Ve.overlay?Ve.overlay[0].from:0),sn=Ut+Ve.tree.length,_n=Math.max(Ge.from,Ut),Hi=Math.min(Ge.to,sn);if(Ve.overlay){let Wn=Ve.overlay.map(ar=>new fn(ar.from+Ye,ar.to+Ye)),xi=wo(fe,Wn,_n,Hi);for(let ar=0,di=_n;;ar++){let Ui=ar==xi.length,hr=Ui?Hi:xi[ar].from;if(hr>di&&Fe.push(new $e(di,hr,Ve.tree,-Ut,Ge.from>=di||Ge.openStart,Ge.to<=hr||Ge.openEnd)),Ui)break;di=xi[ar].to}}else Fe.push(new $e(_n,Hi,Ve.tree,-Ut,Ge.from>=Ut||Ge.openStart,Ge.to<=sn||Ge.openEnd))}return Fe}},41691:function(lo,bs,dn){"use strict";dn.d(bs,{Gv:function(){return Nn},QR:function(){return vn},bW:function(){return Si},pJ:function(){return le}});var xe=dn(99415);let It=0;class fn{constructor(ee,Ze,Ie){this.set=ee,this.base=Ze,this.modified=Ie,this.id=It++}static define(ee){if(ee!=null&&ee.base)throw new Error("Can not derive from a modified tag");let Ze=new fn([],null,[]);if(Ze.set.push(Ze),ee)for(let Ie of ee.set)Ze.set.push(Ie);return Ze}static defineModifier(){let ee=new Qt;return Ze=>Ze.modified.indexOf(ee)>-1?Ze:Qt.get(Ze.base||Ze,Ze.modified.concat(ee).sort((Ie,Xe)=>Ie.id-Xe.id))}}let it=0;class Qt{constructor(){this.instances=[],this.id=it++}static get(ee,Ze){if(!Ze.length)return ee;let Ie=Ze[0].instances.find(Bn=>Bn.base==ee&&yn(Ze,Bn.modified));if(Ie)return Ie;let Xe=[],St=new fn(Xe,ee,Ze);for(let Bn of Ze)Bn.instances.push(St);let Tt=ii(Ze);for(let Bn of ee.set)if(!Bn.modified.length)for(let Fn of Tt)Xe.push(Qt.get(Bn,Fn));return St}}function yn(ze,ee){return ze.length==ee.length&&ze.every((Ze,Ie)=>Ze==ee[Ie])}function ii(ze){let ee=[[]];for(let Ze=0;Ze<ze.length;Ze++)for(let Ie=0,Xe=ee.length;Ie<Xe;Ie++)ee.push(ee[Ie].concat(ze[Ze]));return ee.sort((Ze,Ie)=>Ie.length-Ze.length)}function Nn(ze){let ee=Object.create(null);for(let Ze in ze){let Ie=ze[Ze];Array.isArray(Ie)||(Ie=[Ie]);for(let Xe of Ze.split(" "))if(Xe){let St=[],Tt=2,Bn=Xe;for(let Ki=0;;){if(Bn=="..."&&Ki>0&&Ki+3==Xe.length){Tt=1;break}let Vn=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(Bn);if(!Vn)throw new RangeError("Invalid path: "+Xe);if(St.push(Vn[0]=="*"?"":Vn[0][0]=='"'?JSON.parse(Vn[0]):Vn[0]),Ki+=Vn[0].length,Ki==Xe.length)break;let fs=Xe[Ki++];if(Ki==Xe.length&&fs=="!"){Tt=0;break}if(fs!="/")throw new RangeError("Invalid path: "+Xe);Bn=Xe.slice(Ki)}let Fn=St.length-1,Qn=St[Fn];if(!Qn)throw new RangeError("Invalid path: "+Xe);let hi=new In(Ie,Tt,Fn>0?St.slice(0,Fn):null);ee[Qn]=hi.sort(ee[Qn])}}return Kt.add(ee)}const Kt=new xe.md;class In{constructor(ee,Ze,Ie,Xe){this.tags=ee,this.mode=Ze,this.context=Ie,this.next=Xe}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(ee){return!ee||ee.depth<this.depth?(this.next=ee,this):(ee.next=this.sort(ee.next),ee)}get depth(){return this.context?this.context.length:0}}In.empty=new In([],2,null);function vn(ze,ee){let Ze=Object.create(null);for(let St of ze)if(!Array.isArray(St.tag))Ze[St.tag.id]=St.class;else for(let Tt of St.tag)Ze[Tt.id]=St.class;let{scope:Ie,all:Xe=null}=ee||{};return{style:St=>{let Tt=Xe;for(let Bn of St)for(let Fn of Bn.set){let Qn=Ze[Fn.id];if(Qn){Tt=Tt?Tt+" "+Qn:Qn;break}}return Tt},scope:Ie}}function gn(ze,ee){let Ze=null;for(let Ie of ze){let Xe=Ie.style(ee);Xe&&(Ze=Ze?Ze+" "+Xe:Xe)}return Ze}function Si(ze,ee,Ze,Ie=0,Xe=ze.length){let St=new Un(Ie,Array.isArray(ee)?ee:[ee],Ze);St.highlightRange(ze.cursor(),Ie,Xe,"",St.highlighters),St.flush(Xe)}function Ii(ze,ee,Ze,Ie,Xe,St=0,Tt=ze.length){let Bn=St;function Fn(Qn,hi){if(!(Qn<=Bn)){for(let Ki=ze.slice(Bn,Qn),Vn=0;;){let fs=Ki.indexOf(`
`,Vn),wo=fs<0?Ki.length:fs;if(wo>Vn&&Ie(Ki.slice(Vn,wo),hi),fs<0)break;Xe(),Vn=fs+1}Bn=Qn}}Si(ee,Ze,(Qn,hi,Ki)=>{Fn(Qn,""),Fn(hi,Ki)},St,Tt),Fn(Tt,"")}class Un{constructor(ee,Ze,Ie){this.at=ee,this.highlighters=Ze,this.span=Ie,this.class=""}startSpan(ee,Ze){Ze!=this.class&&(this.flush(ee),ee>this.at&&(this.at=ee),this.class=Ze)}flush(ee){ee>this.at&&this.class&&this.span(this.at,ee,this.class)}highlightRange(ee,Ze,Ie,Xe,St){let{type:Tt,from:Bn,to:Fn}=ee;if(Bn>=Ie||Fn<=Ze)return;Tt.isTop&&(St=this.highlighters.filter(fs=>!fs.scope||fs.scope(Tt)));let Qn=Xe,hi=$t(ee)||In.empty,Ki=gn(St,hi.tags);if(Ki&&(Qn&&(Qn+=" "),Qn+=Ki,hi.mode==1&&(Xe+=(Xe?" ":"")+Ki)),this.startSpan(Math.max(Ze,Bn),Qn),hi.opaque)return;let Vn=ee.tree&&ee.tree.prop(xe.md.mounted);if(Vn&&Vn.overlay){let fs=ee.node.enter(Vn.overlay[0].from+Bn,1),wo=this.highlighters.filter(en=>!en.scope||en.scope(Vn.tree.type)),Ao=ee.firstChild();for(let en=0,fe=Bn;;en++){let Fe=en<Vn.overlay.length?Vn.overlay[en]:null,Ye=Fe?Fe.from+Bn:Fn,Ve=Math.max(Ze,fe),Ge=Math.min(Ie,Ye);if(Ve<Ge&&Ao)for(;ee.from<Ge&&(this.highlightRange(ee,Ve,Ge,Xe,St),this.startSpan(Math.min(Ge,ee.to),Qn),!(ee.to>=Ye||!ee.nextSibling())););if(!Fe||Ye>Ie)break;fe=Fe.to+Bn,fe>Ze&&(this.highlightRange(fs.cursor(),Math.max(Ze,Fe.from+Bn),Math.min(Ie,fe),"",wo),this.startSpan(Math.min(Ie,fe),Qn))}Ao&&ee.parent()}else if(ee.firstChild()){Vn&&(Xe="");do if(!(ee.to<=Ze)){if(ee.from>=Ie)break;this.highlightRange(ee,Ze,Ie,Xe,St),this.startSpan(Math.min(Ie,ee.to),Qn)}while(ee.nextSibling());ee.parent()}}}function $t(ze){let ee=ze.type.prop(Kt);for(;ee&&ee.context&&!ze.matchContext(ee.context);)ee=ee.next;return ee||null}const qt=fn.define,mr=qt(),ss=qt(),Dr=qt(ss),zs=qt(ss),pi=qt(),vs=qt(pi),uo=qt(pi),cs=qt(),wr=qt(cs),jr=qt(),vr=qt(),qs=qt(),Is=qt(qs),ci=qt(),le={comment:mr,lineComment:qt(mr),blockComment:qt(mr),docComment:qt(mr),name:ss,variableName:qt(ss),typeName:Dr,tagName:qt(Dr),propertyName:zs,attributeName:qt(zs),className:qt(ss),labelName:qt(ss),namespace:qt(ss),macroName:qt(ss),literal:pi,string:vs,docString:qt(vs),character:qt(vs),attributeValue:qt(vs),number:uo,integer:qt(uo),float:qt(uo),bool:qt(pi),regexp:qt(pi),escape:qt(pi),color:qt(pi),url:qt(pi),keyword:jr,self:qt(jr),null:qt(jr),atom:qt(jr),unit:qt(jr),modifier:qt(jr),operatorKeyword:qt(jr),controlKeyword:qt(jr),definitionKeyword:qt(jr),moduleKeyword:qt(jr),operator:vr,derefOperator:qt(vr),arithmeticOperator:qt(vr),logicOperator:qt(vr),bitwiseOperator:qt(vr),compareOperator:qt(vr),updateOperator:qt(vr),definitionOperator:qt(vr),typeOperator:qt(vr),controlOperator:qt(vr),punctuation:qs,separator:qt(qs),bracket:Is,angleBracket:qt(Is),squareBracket:qt(Is),paren:qt(Is),brace:qt(Is),content:cs,heading:wr,heading1:qt(wr),heading2:qt(wr),heading3:qt(wr),heading4:qt(wr),heading5:qt(wr),heading6:qt(wr),contentSeparator:qt(cs),list:qt(cs),quote:qt(cs),emphasis:qt(cs),strong:qt(cs),link:qt(cs),monospace:qt(cs),strikethrough:qt(cs),inserted:qt(),deleted:qt(),changed:qt(),invalid:qt(),meta:ci,documentMeta:qt(ci),annotation:qt(ci),processingInstruction:qt(ci),definition:fn.defineModifier(),constant:fn.defineModifier(),function:fn.defineModifier(),standard:fn.defineModifier(),local:fn.defineModifier(),special:fn.defineModifier()},$e=vn([{tag:le.link,class:"tok-link"},{tag:le.heading,class:"tok-heading"},{tag:le.emphasis,class:"tok-emphasis"},{tag:le.strong,class:"tok-strong"},{tag:le.keyword,class:"tok-keyword"},{tag:le.atom,class:"tok-atom"},{tag:le.bool,class:"tok-bool"},{tag:le.url,class:"tok-url"},{tag:le.labelName,class:"tok-labelName"},{tag:le.inserted,class:"tok-inserted"},{tag:le.deleted,class:"tok-deleted"},{tag:le.literal,class:"tok-literal"},{tag:le.string,class:"tok-string"},{tag:le.number,class:"tok-number"},{tag:[le.regexp,le.escape,le.special(le.string)],class:"tok-string2"},{tag:le.variableName,class:"tok-variableName"},{tag:le.local(le.variableName),class:"tok-variableName tok-local"},{tag:le.definition(le.variableName),class:"tok-variableName tok-definition"},{tag:le.special(le.variableName),class:"tok-variableName2"},{tag:le.definition(le.propertyName),class:"tok-propertyName tok-definition"},{tag:le.typeName,class:"tok-typeName"},{tag:le.namespace,class:"tok-namespace"},{tag:le.className,class:"tok-className"},{tag:le.macroName,class:"tok-macroName"},{tag:le.propertyName,class:"tok-propertyName"},{tag:le.operator,class:"tok-operator"},{tag:le.comment,class:"tok-comment"},{tag:le.meta,class:"tok-meta"},{tag:le.invalid,class:"tok-invalid"},{tag:le.punctuation,class:"tok-punctuation"}])},32552:function(lo,bs,dn){"use strict";dn.d(bs,{IK:function(){return wr},Jq:function(){return Si},WQ:function(){return jr}});var xe=dn(99415),It=dn(14224);class fn{constructor(le,$e,ze,ee,Ze,Ie,Xe,St,Tt,Bn=0,Fn){this.p=le,this.stack=$e,this.state=ze,this.reducePos=ee,this.pos=Ze,this.score=Ie,this.buffer=Xe,this.bufferBase=St,this.curContext=Tt,this.lookAhead=Bn,this.parent=Fn}toString(){return`[${this.stack.filter((le,$e)=>$e%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(le,$e,ze=0){let ee=le.parser.context;return new fn(le,[],$e,ze,ze,0,[],0,ee?new it(ee,ee.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(le,$e){this.stack.push(this.state,$e,this.bufferBase+this.buffer.length),this.state=le}reduce(le){var $e;let ze=le>>19,ee=le&65535,{parser:Ze}=this.p,Ie=Ze.dynamicPrecedence(ee);if(Ie&&(this.score+=Ie),ze==0){this.pushState(Ze.getGoto(this.state,ee,!0),this.reducePos),ee<Ze.minRepeatTerm&&this.storeNode(ee,this.reducePos,this.reducePos,4,!0),this.reduceContext(ee,this.reducePos);return}let Xe=this.stack.length-(ze-1)*3-(le&262144?6:0),St=Xe?this.stack[Xe-2]:this.p.ranges[0].from,Tt=this.reducePos-St;Tt>=2e3&&!(!(($e=this.p.parser.nodeSet.types[ee])===null||$e===void 0)&&$e.isAnonymous)&&(St==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=Tt):this.p.lastBigReductionSize<Tt&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=St,this.p.lastBigReductionSize=Tt));let Bn=Xe?this.stack[Xe-1]:0,Fn=this.bufferBase+this.buffer.length-Bn;if(ee<Ze.minRepeatTerm||le&131072){let Qn=Ze.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(ee,St,Qn,Fn+4,!0)}if(le&262144)this.state=this.stack[Xe];else{let Qn=this.stack[Xe-3];this.state=Ze.getGoto(Qn,ee,!0)}for(;this.stack.length>Xe;)this.stack.pop();this.reduceContext(ee,St)}storeNode(le,$e,ze,ee=4,Ze=!1){if(le==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let Ie=this,Xe=this.buffer.length;if(Xe==0&&Ie.parent&&(Xe=Ie.bufferBase-Ie.parent.bufferBase,Ie=Ie.parent),Xe>0&&Ie.buffer[Xe-4]==0&&Ie.buffer[Xe-1]>-1){if($e==ze)return;if(Ie.buffer[Xe-2]>=$e){Ie.buffer[Xe-2]=ze;return}}}if(!Ze||this.pos==ze)this.buffer.push(le,$e,ze,ee);else{let Ie=this.buffer.length;if(Ie>0&&this.buffer[Ie-4]!=0)for(;Ie>0&&this.buffer[Ie-2]>ze;)this.buffer[Ie]=this.buffer[Ie-4],this.buffer[Ie+1]=this.buffer[Ie-3],this.buffer[Ie+2]=this.buffer[Ie-2],this.buffer[Ie+3]=this.buffer[Ie-1],Ie-=4,ee>4&&(ee-=4);this.buffer[Ie]=le,this.buffer[Ie+1]=$e,this.buffer[Ie+2]=ze,this.buffer[Ie+3]=ee}}shift(le,$e,ze,ee){if(le&131072)this.pushState(le&65535,this.pos);else if(le&262144)this.pos=ee,this.shiftContext($e,ze),$e<=this.p.parser.maxNode&&this.buffer.push($e,ze,ee,4);else{let Ze=le,{parser:Ie}=this.p;(ee>this.pos||$e<=Ie.maxNode)&&(this.pos=ee,Ie.stateFlag(Ze,1)||(this.reducePos=ee)),this.pushState(Ze,ze),this.shiftContext($e,ze),$e<=Ie.maxNode&&this.buffer.push($e,ze,ee,4)}}apply(le,$e,ze,ee){le&65536?this.reduce(le):this.shift(le,$e,ze,ee)}useNode(le,$e){let ze=this.p.reused.length-1;(ze<0||this.p.reused[ze]!=le)&&(this.p.reused.push(le),ze++);let ee=this.pos;this.reducePos=this.pos=ee+le.length,this.pushState($e,ee),this.buffer.push(ze,ee,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,le,this,this.p.stream.reset(this.pos-le.length)))}split(){let le=this,$e=le.buffer.length;for(;$e>0&&le.buffer[$e-2]>le.reducePos;)$e-=4;let ze=le.buffer.slice($e),ee=le.bufferBase+$e;for(;le&&ee==le.bufferBase;)le=le.parent;return new fn(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,ze,ee,this.curContext,this.lookAhead,le)}recoverByDelete(le,$e){let ze=le<=this.p.parser.maxNode;ze&&this.storeNode(le,this.pos,$e,4),this.storeNode(0,this.pos,$e,ze?8:4),this.pos=this.reducePos=$e,this.score-=190}canShift(le){for(let $e=new Qt(this);;){let ze=this.p.parser.stateSlot($e.state,4)||this.p.parser.hasAction($e.state,le);if(ze==0)return!1;if(!(ze&65536))return!0;$e.reduce(ze)}}recoverByInsert(le){if(this.stack.length>=300)return[];let $e=this.p.parser.nextStates(this.state);if($e.length>8||this.stack.length>=120){let ee=[];for(let Ze=0,Ie;Ze<$e.length;Ze+=2)(Ie=$e[Ze+1])!=this.state&&this.p.parser.hasAction(Ie,le)&&ee.push($e[Ze],Ie);if(this.stack.length<120)for(let Ze=0;ee.length<8&&Ze<$e.length;Ze+=2){let Ie=$e[Ze+1];ee.some((Xe,St)=>St&1&&Xe==Ie)||ee.push($e[Ze],Ie)}$e=ee}let ze=[];for(let ee=0;ee<$e.length&&ze.length<4;ee+=2){let Ze=$e[ee+1];if(Ze==this.state)continue;let Ie=this.split();Ie.pushState(Ze,this.pos),Ie.storeNode(0,Ie.pos,Ie.pos,4,!0),Ie.shiftContext($e[ee],this.pos),Ie.reducePos=this.pos,Ie.score-=200,ze.push(Ie)}return ze}forceReduce(){let{parser:le}=this.p,$e=le.stateSlot(this.state,5);if(!($e&65536))return!1;if(!le.validAction(this.state,$e)){let ze=$e>>19,ee=$e&65535,Ze=this.stack.length-ze*3;if(Ze<0||le.getGoto(this.stack[Ze],ee,!1)<0){let Ie=this.findForcedReduction();if(Ie==null)return!1;$e=Ie}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce($e),!0}findForcedReduction(){let{parser:le}=this.p,$e=[],ze=(ee,Ze)=>{if(!$e.includes(ee))return $e.push(ee),le.allActions(ee,Ie=>{if(!(Ie&393216))if(Ie&65536){let Xe=(Ie>>19)-Ze;if(Xe>1){let St=Ie&65535,Tt=this.stack.length-Xe*3;if(Tt>=0&&le.getGoto(this.stack[Tt],St,!1)>=0)return Xe<<19|65536|St}}else{let Xe=ze(Ie,Ze+1);if(Xe!=null)return Xe}})};return ze(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:le}=this.p;return le.data[le.stateSlot(this.state,1)]==65535&&!le.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(le){if(this.state!=le.state||this.stack.length!=le.stack.length)return!1;for(let $e=0;$e<this.stack.length;$e+=3)if(this.stack[$e]!=le.stack[$e])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(le){return this.p.parser.dialect.flags[le]}shiftContext(le,$e){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,le,this,this.p.stream.reset($e)))}reduceContext(le,$e){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,le,this,this.p.stream.reset($e)))}emitContext(){let le=this.buffer.length-1;(le<0||this.buffer[le]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let le=this.buffer.length-1;(le<0||this.buffer[le]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(le){if(le!=this.curContext.context){let $e=new it(this.curContext.tracker,le);$e.hash!=this.curContext.hash&&this.emitContext(),this.curContext=$e}}setLookAhead(le){le>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=le)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class it{constructor(le,$e){this.tracker=le,this.context=$e,this.hash=le.strict?le.hash($e):0}}class Qt{constructor(le){this.start=le,this.state=le.state,this.stack=le.stack,this.base=this.stack.length}reduce(le){let $e=le&65535,ze=le>>19;ze==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(ze-1)*3;let ee=this.start.p.parser.getGoto(this.stack[this.base-3],$e,!0);this.state=ee}}class yn{constructor(le,$e,ze){this.stack=le,this.pos=$e,this.index=ze,this.buffer=le.buffer,this.index==0&&this.maybeNext()}static create(le,$e=le.bufferBase+le.buffer.length){return new yn(le,$e,$e-le.bufferBase)}maybeNext(){let le=this.stack.parent;le!=null&&(this.index=this.stack.bufferBase-le.bufferBase,this.stack=le,this.buffer=le.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new yn(this.stack,this.pos,this.index)}}function ii(ci,le=Uint16Array){if(typeof ci!="string")return ci;let $e=null;for(let ze=0,ee=0;ze<ci.length;){let Ze=0;for(;;){let Ie=ci.charCodeAt(ze++),Xe=!1;if(Ie==126){Ze=65535;break}Ie>=92&&Ie--,Ie>=34&&Ie--;let St=Ie-32;if(St>=46&&(St-=46,Xe=!0),Ze+=St,Xe)break;Ze*=46}$e?$e[ee++]=Ze:$e=new le(Ze)}return $e}class Nn{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const Kt=new Nn;class In{constructor(le,$e){this.input=le,this.ranges=$e,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=Kt,this.rangeIndex=0,this.pos=this.chunkPos=$e[0].from,this.range=$e[0],this.end=$e[$e.length-1].to,this.readNext()}resolveOffset(le,$e){let ze=this.range,ee=this.rangeIndex,Ze=this.pos+le;for(;Ze<ze.from;){if(!ee)return null;let Ie=this.ranges[--ee];Ze-=ze.from-Ie.to,ze=Ie}for(;$e<0?Ze>ze.to:Ze>=ze.to;){if(ee==this.ranges.length-1)return null;let Ie=this.ranges[++ee];Ze+=Ie.from-ze.to,ze=Ie}return Ze}clipPos(le){if(le>=this.range.from&&le<this.range.to)return le;for(let $e of this.ranges)if($e.to>le)return Math.max(le,$e.from);return this.end}peek(le){let $e=this.chunkOff+le,ze,ee;if($e>=0&&$e<this.chunk.length)ze=this.pos+le,ee=this.chunk.charCodeAt($e);else{let Ze=this.resolveOffset(le,1);if(Ze==null)return-1;if(ze=Ze,ze>=this.chunk2Pos&&ze<this.chunk2Pos+this.chunk2.length)ee=this.chunk2.charCodeAt(ze-this.chunk2Pos);else{let Ie=this.rangeIndex,Xe=this.range;for(;Xe.to<=ze;)Xe=this.ranges[++Ie];this.chunk2=this.input.chunk(this.chunk2Pos=ze),ze+this.chunk2.length>Xe.to&&(this.chunk2=this.chunk2.slice(0,Xe.to-ze)),ee=this.chunk2.charCodeAt(0)}}return ze>=this.token.lookAhead&&(this.token.lookAhead=ze+1),ee}acceptToken(le,$e=0){let ze=$e?this.resolveOffset($e,-1):this.pos;if(ze==null||ze<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=le,this.token.end=ze}acceptTokenTo(le,$e){this.token.value=le,this.token.end=$e}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:le,chunkPos:$e}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=le,this.chunk2Pos=$e,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let le=this.input.chunk(this.pos),$e=this.pos+le.length;this.chunk=$e>this.range.to?le.slice(0,this.range.to-this.pos):le,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(le=1){for(this.chunkOff+=le;this.pos+le>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();le-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=le,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(le,$e){if($e?(this.token=$e,$e.start=le,$e.lookAhead=le+1,$e.value=$e.extended=-1):this.token=Kt,this.pos!=le){if(this.pos=le,le==this.end)return this.setDone(),this;for(;le<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;le>=this.range.to;)this.range=this.ranges[++this.rangeIndex];le>=this.chunkPos&&le<this.chunkPos+this.chunk.length?this.chunkOff=le-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(le,$e){if(le>=this.chunkPos&&$e<=this.chunkPos+this.chunk.length)return this.chunk.slice(le-this.chunkPos,$e-this.chunkPos);if(le>=this.chunk2Pos&&$e<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(le-this.chunk2Pos,$e-this.chunk2Pos);if(le>=this.range.from&&$e<=this.range.to)return this.input.read(le,$e);let ze="";for(let ee of this.ranges){if(ee.from>=$e)break;ee.to>le&&(ze+=this.input.read(Math.max(ee.from,le),Math.min(ee.to,$e)))}return ze}}class vn{constructor(le,$e){this.data=le,this.id=$e}token(le,$e){let{parser:ze}=$e.p;Ii(this.data,le,$e,this.id,ze.data,ze.tokenPrecTable)}}vn.prototype.contextual=vn.prototype.fallback=vn.prototype.extend=!1;class gn{constructor(le,$e,ze){this.precTable=$e,this.elseToken=ze,this.data=typeof le=="string"?ii(le):le}token(le,$e){let ze=le.pos,ee=0;for(;;){let Ze=le.next<0,Ie=le.resolveOffset(1,1);if(Ii(this.data,le,$e,0,this.data,this.precTable),le.token.value>-1)break;if(this.elseToken==null)return;if(Ze||ee++,Ie==null)break;le.reset(Ie,le.token)}ee&&(le.reset(ze,le.token),le.acceptToken(this.elseToken,ee))}}gn.prototype.contextual=vn.prototype.fallback=vn.prototype.extend=!1;class Si{constructor(le,$e={}){this.token=le,this.contextual=!!$e.contextual,this.fallback=!!$e.fallback,this.extend=!!$e.extend}}function Ii(ci,le,$e,ze,ee,Ze){let Ie=0,Xe=1<<ze,{dialect:St}=$e.p.parser;e:for(;Xe&ci[Ie];){let Tt=ci[Ie+1];for(let hi=Ie+3;hi<Tt;hi+=2)if((ci[hi+1]&Xe)>0){let Ki=ci[hi];if(St.allows(Ki)&&(le.token.value==-1||le.token.value==Ki||$t(Ki,le.token.value,ee,Ze))){le.acceptToken(Ki);break}}let Bn=le.next,Fn=0,Qn=ci[Ie+2];if(le.next<0&&Qn>Fn&&ci[Tt+Qn*3-3]==65535){Ie=ci[Tt+Qn*3-1];continue e}for(;Fn<Qn;){let hi=Fn+Qn>>1,Ki=Tt+hi+(hi<<1),Vn=ci[Ki],fs=ci[Ki+1]||65536;if(Bn<Vn)Qn=hi;else if(Bn>=fs)Fn=hi+1;else{Ie=ci[Ki+2],le.advance();continue e}}break}}function Un(ci,le,$e){for(let ze=le,ee;(ee=ci[ze])!=65535;ze++)if(ee==$e)return ze-le;return-1}function $t(ci,le,$e,ze){let ee=Un($e,ze,le);return ee<0||Un($e,ze,ci)<ee}const qt=typeof It!="undefined"&&{NODE_ENV:"production",PUBLIC_PATH:"/"}&&/\bparse\b/.test({NODE_ENV:"production",PUBLIC_PATH:"/"}.LOG);let mr=null;function ss(ci,le,$e){let ze=ci.cursor(xe.vj.IncludeAnonymous);for(ze.moveTo(le);;)if(!($e<0?ze.childBefore(le):ze.childAfter(le)))for(;;){if(($e<0?ze.to<le:ze.from>le)&&!ze.type.isError)return $e<0?Math.max(0,Math.min(ze.to-1,le-25)):Math.min(ci.length,Math.max(ze.from+1,le+25));if($e<0?ze.prevSibling():ze.nextSibling())break;if(!ze.parent())return $e<0?0:ci.length}}class Dr{constructor(le,$e){this.fragments=le,this.nodeSet=$e,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let le=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(le){for(this.safeFrom=le.openStart?ss(le.tree,le.from+le.offset,1)-le.offset:le.from,this.safeTo=le.openEnd?ss(le.tree,le.to+le.offset,-1)-le.offset:le.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(le.tree),this.start.push(-le.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(le){if(le<this.nextStart)return null;for(;this.fragment&&this.safeTo<=le;)this.nextFragment();if(!this.fragment)return null;for(;;){let $e=this.trees.length-1;if($e<0)return this.nextFragment(),null;let ze=this.trees[$e],ee=this.index[$e];if(ee==ze.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let Ze=ze.children[ee],Ie=this.start[$e]+ze.positions[ee];if(Ie>le)return this.nextStart=Ie,null;if(Ze instanceof xe.mp){if(Ie==le){if(Ie<this.safeFrom)return null;let Xe=Ie+Ze.length;if(Xe<=this.safeTo){let St=Ze.prop(xe.md.lookAhead);if(!St||Xe+St<this.fragment.to)return Ze}}this.index[$e]++,Ie+Ze.length>=Math.max(this.safeFrom,le)&&(this.trees.push(Ze),this.start.push(Ie),this.index.push(0))}else this.index[$e]++,this.nextStart=Ie+Ze.length}}}class zs{constructor(le,$e){this.stream=$e,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=le.tokenizers.map(ze=>new Nn)}getActions(le){let $e=0,ze=null,{parser:ee}=le.p,{tokenizers:Ze}=ee,Ie=ee.stateSlot(le.state,3),Xe=le.curContext?le.curContext.hash:0,St=0;for(let Tt=0;Tt<Ze.length;Tt++){if(!(1<<Tt&Ie))continue;let Bn=Ze[Tt],Fn=this.tokens[Tt];if(!(ze&&!Bn.fallback)&&((Bn.contextual||Fn.start!=le.pos||Fn.mask!=Ie||Fn.context!=Xe)&&(this.updateCachedToken(Fn,Bn,le),Fn.mask=Ie,Fn.context=Xe),Fn.lookAhead>Fn.end+25&&(St=Math.max(Fn.lookAhead,St)),Fn.value!=0)){let Qn=$e;if(Fn.extended>-1&&($e=this.addActions(le,Fn.extended,Fn.end,$e)),$e=this.addActions(le,Fn.value,Fn.end,$e),!Bn.extend&&(ze=Fn,$e>Qn))break}}for(;this.actions.length>$e;)this.actions.pop();return St&&le.setLookAhead(St),!ze&&le.pos==this.stream.end&&(ze=new Nn,ze.value=le.p.parser.eofTerm,ze.start=ze.end=le.pos,$e=this.addActions(le,ze.value,ze.end,$e)),this.mainToken=ze,this.actions}getMainToken(le){if(this.mainToken)return this.mainToken;let $e=new Nn,{pos:ze,p:ee}=le;return $e.start=ze,$e.end=Math.min(ze+1,ee.stream.end),$e.value=ze==ee.stream.end?ee.parser.eofTerm:0,$e}updateCachedToken(le,$e,ze){let ee=this.stream.clipPos(ze.pos);if($e.token(this.stream.reset(ee,le),ze),le.value>-1){let{parser:Ze}=ze.p;for(let Ie=0;Ie<Ze.specialized.length;Ie++)if(Ze.specialized[Ie]==le.value){let Xe=Ze.specializers[Ie](this.stream.read(le.start,le.end),ze);if(Xe>=0&&ze.p.parser.dialect.allows(Xe>>1)){Xe&1?le.extended=Xe>>1:le.value=Xe>>1;break}}}else le.value=0,le.end=this.stream.clipPos(ee+1)}putAction(le,$e,ze,ee){for(let Ze=0;Ze<ee;Ze+=3)if(this.actions[Ze]==le)return ee;return this.actions[ee++]=le,this.actions[ee++]=$e,this.actions[ee++]=ze,ee}addActions(le,$e,ze,ee){let{state:Ze}=le,{parser:Ie}=le.p,{data:Xe}=Ie;for(let St=0;St<2;St++)for(let Tt=Ie.stateSlot(Ze,St?2:1);;Tt+=3){if(Xe[Tt]==65535)if(Xe[Tt+1]==1)Tt=vr(Xe,Tt+2);else{ee==0&&Xe[Tt+1]==2&&(ee=this.putAction(vr(Xe,Tt+2),$e,ze,ee));break}Xe[Tt]==$e&&(ee=this.putAction(vr(Xe,Tt+1),$e,ze,ee))}return ee}}class pi{constructor(le,$e,ze,ee){this.parser=le,this.input=$e,this.ranges=ee,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new In($e,ee),this.tokens=new zs(le,this.stream),this.topTerm=le.top[1];let{from:Ze}=ee[0];this.stacks=[fn.start(this,le.top[0],Ze)],this.fragments=ze.length&&this.stream.end-Ze>le.bufferLength*4?new Dr(ze,le.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let le=this.stacks,$e=this.minStackPos,ze=this.stacks=[],ee,Ze;if(this.bigReductionCount>300&&le.length==1){let[Ie]=le;for(;Ie.forceReduce()&&Ie.stack.length&&Ie.stack[Ie.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let Ie=0;Ie<le.length;Ie++){let Xe=le[Ie];for(;;){if(this.tokens.mainToken=null,Xe.pos>$e)ze.push(Xe);else{if(this.advanceStack(Xe,ze,le))continue;{ee||(ee=[],Ze=[]),ee.push(Xe);let St=this.tokens.getMainToken(Xe);Ze.push(St.value,St.end)}}break}}if(!ze.length){let Ie=ee&&qs(ee);if(Ie)return qt&&console.log("Finish with "+this.stackID(Ie)),this.stackToTree(Ie);if(this.parser.strict)throw qt&&ee&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+$e);this.recovering||(this.recovering=5)}if(this.recovering&&ee){let Ie=this.stoppedAt!=null&&ee[0].pos>this.stoppedAt?ee[0]:this.runRecovery(ee,Ze,ze);if(Ie)return qt&&console.log("Force-finish "+this.stackID(Ie)),this.stackToTree(Ie.forceAll())}if(this.recovering){let Ie=this.recovering==1?1:this.recovering*3;if(ze.length>Ie)for(ze.sort((Xe,St)=>St.score-Xe.score);ze.length>Ie;)ze.pop();ze.some(Xe=>Xe.reducePos>$e)&&this.recovering--}else if(ze.length>1){e:for(let Ie=0;Ie<ze.length-1;Ie++){let Xe=ze[Ie];for(let St=Ie+1;St<ze.length;St++){let Tt=ze[St];if(Xe.sameState(Tt)||Xe.buffer.length>500&&Tt.buffer.length>500)if((Xe.score-Tt.score||Xe.buffer.length-Tt.buffer.length)>0)ze.splice(St--,1);else{ze.splice(Ie--,1);continue e}}}ze.length>12&&ze.splice(12,ze.length-12)}this.minStackPos=ze[0].pos;for(let Ie=1;Ie<ze.length;Ie++)ze[Ie].pos<this.minStackPos&&(this.minStackPos=ze[Ie].pos);return null}stopAt(le){if(this.stoppedAt!=null&&this.stoppedAt<le)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=le}advanceStack(le,$e,ze){let ee=le.pos,{parser:Ze}=this,Ie=qt?this.stackID(le)+" -> ":"";if(this.stoppedAt!=null&&ee>this.stoppedAt)return le.forceReduce()?le:null;if(this.fragments){let Tt=le.curContext&&le.curContext.tracker.strict,Bn=Tt?le.curContext.hash:0;for(let Fn=this.fragments.nodeAt(ee);Fn;){let Qn=this.parser.nodeSet.types[Fn.type.id]==Fn.type?Ze.getGoto(le.state,Fn.type.id):-1;if(Qn>-1&&Fn.length&&(!Tt||(Fn.prop(xe.md.contextHash)||0)==Bn))return le.useNode(Fn,Qn),qt&&console.log(Ie+this.stackID(le)+` (via reuse of ${Ze.getName(Fn.type.id)})`),!0;if(!(Fn instanceof xe.mp)||Fn.children.length==0||Fn.positions[0]>0)break;let hi=Fn.children[0];if(hi instanceof xe.mp&&Fn.positions[0]==0)Fn=hi;else break}}let Xe=Ze.stateSlot(le.state,4);if(Xe>0)return le.reduce(Xe),qt&&console.log(Ie+this.stackID(le)+` (via always-reduce ${Ze.getName(Xe&65535)})`),!0;if(le.stack.length>=8400)for(;le.stack.length>6e3&&le.forceReduce(););let St=this.tokens.getActions(le);for(let Tt=0;Tt<St.length;){let Bn=St[Tt++],Fn=St[Tt++],Qn=St[Tt++],hi=Tt==St.length||!ze,Ki=hi?le:le.split(),Vn=this.tokens.mainToken;if(Ki.apply(Bn,Fn,Vn?Vn.start:Ki.pos,Qn),qt&&console.log(Ie+this.stackID(Ki)+` (via ${Bn&65536?`reduce of ${Ze.getName(Bn&65535)}`:"shift"} for ${Ze.getName(Fn)} @ ${ee}${Ki==le?"":", split"})`),hi)return!0;Ki.pos>ee?$e.push(Ki):ze.push(Ki)}return!1}advanceFully(le,$e){let ze=le.pos;for(;;){if(!this.advanceStack(le,null,null))return!1;if(le.pos>ze)return vs(le,$e),!0}}runRecovery(le,$e,ze){let ee=null,Ze=!1;for(let Ie=0;Ie<le.length;Ie++){let Xe=le[Ie],St=$e[Ie<<1],Tt=$e[(Ie<<1)+1],Bn=qt?this.stackID(Xe)+" -> ":"";if(Xe.deadEnd&&(Ze||(Ze=!0,Xe.restart(),qt&&console.log(Bn+this.stackID(Xe)+" (restarted)"),this.advanceFully(Xe,ze))))continue;let Fn=Xe.split(),Qn=Bn;for(let hi=0;Fn.forceReduce()&&hi<10&&(qt&&console.log(Qn+this.stackID(Fn)+" (via force-reduce)"),!this.advanceFully(Fn,ze));hi++)qt&&(Qn=this.stackID(Fn)+" -> ");for(let hi of Xe.recoverByInsert(St))qt&&console.log(Bn+this.stackID(hi)+" (via recover-insert)"),this.advanceFully(hi,ze);this.stream.end>Xe.pos?(Tt==Xe.pos&&(Tt++,St=0),Xe.recoverByDelete(St,Tt),qt&&console.log(Bn+this.stackID(Xe)+` (via recover-delete ${this.parser.getName(St)})`),vs(Xe,ze)):(!ee||ee.score<Xe.score)&&(ee=Xe)}return ee}stackToTree(le){return le.close(),xe.mp.build({buffer:yn.create(le),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:le.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(le){let $e=(mr||(mr=new WeakMap)).get(le);return $e||mr.set(le,$e=String.fromCodePoint(this.nextStackID++)),$e+le}}function vs(ci,le){for(let $e=0;$e<le.length;$e++){let ze=le[$e];if(ze.pos==ci.pos&&ze.sameState(ci)){le[$e].score<ci.score&&(le[$e]=ci);return}}le.push(ci)}class uo{constructor(le,$e,ze){this.source=le,this.flags=$e,this.disabled=ze}allows(le){return!this.disabled||this.disabled[le]==0}}const cs=ci=>ci;class wr{constructor(le){this.start=le.start,this.shift=le.shift||cs,this.reduce=le.reduce||cs,this.reuse=le.reuse||cs,this.hash=le.hash||(()=>0),this.strict=le.strict!==!1}}class jr extends xe._b{constructor(le){if(super(),this.wrappers=[],le.version!=14)throw new RangeError(`Parser version (${le.version}) doesn't match runtime version (14)`);let $e=le.nodeNames.split(" ");this.minRepeatTerm=$e.length;for(let Xe=0;Xe<le.repeatNodeCount;Xe++)$e.push("");let ze=Object.keys(le.topRules).map(Xe=>le.topRules[Xe][1]),ee=[];for(let Xe=0;Xe<$e.length;Xe++)ee.push([]);function Ze(Xe,St,Tt){ee[Xe].push([St,St.deserialize(String(Tt))])}if(le.nodeProps)for(let Xe of le.nodeProps){let St=Xe[0];typeof St=="string"&&(St=xe.md[St]);for(let Tt=1;Tt<Xe.length;){let Bn=Xe[Tt++];if(Bn>=0)Ze(Bn,St,Xe[Tt++]);else{let Fn=Xe[Tt+-Bn];for(let Qn=-Bn;Qn>0;Qn--)Ze(Xe[Tt++],St,Fn);Tt++}}}this.nodeSet=new xe.Lj($e.map((Xe,St)=>xe.Jq.define({name:St>=this.minRepeatTerm?void 0:Xe,id:St,props:ee[St],top:ze.indexOf(St)>-1,error:St==0,skipped:le.skippedNodes&&le.skippedNodes.indexOf(St)>-1}))),le.propSources&&(this.nodeSet=this.nodeSet.extend(...le.propSources)),this.strict=!1,this.bufferLength=xe.L3;let Ie=ii(le.tokenData);this.context=le.context,this.specializerSpecs=le.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let Xe=0;Xe<this.specializerSpecs.length;Xe++)this.specialized[Xe]=this.specializerSpecs[Xe].term;this.specializers=this.specializerSpecs.map(Is),this.states=ii(le.states,Uint32Array),this.data=ii(le.stateData),this.goto=ii(le.goto),this.maxTerm=le.maxTerm,this.tokenizers=le.tokenizers.map(Xe=>typeof Xe=="number"?new vn(Ie,Xe):Xe),this.topRules=le.topRules,this.dialects=le.dialects||{},this.dynamicPrecedences=le.dynamicPrecedences||null,this.tokenPrecTable=le.tokenPrec,this.termNames=le.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(le,$e,ze){let ee=new pi(this,le,$e,ze);for(let Ze of this.wrappers)ee=Ze(ee,le,$e,ze);return ee}getGoto(le,$e,ze=!1){let ee=this.goto;if($e>=ee[0])return-1;for(let Ze=ee[$e+1];;){let Ie=ee[Ze++],Xe=Ie&1,St=ee[Ze++];if(Xe&&ze)return St;for(let Tt=Ze+(Ie>>1);Ze<Tt;Ze++)if(ee[Ze]==le)return St;if(Xe)return-1}}hasAction(le,$e){let ze=this.data;for(let ee=0;ee<2;ee++)for(let Ze=this.stateSlot(le,ee?2:1),Ie;;Ze+=3){if((Ie=ze[Ze])==65535)if(ze[Ze+1]==1)Ie=ze[Ze=vr(ze,Ze+2)];else{if(ze[Ze+1]==2)return vr(ze,Ze+2);break}if(Ie==$e||Ie==0)return vr(ze,Ze+1)}return 0}stateSlot(le,$e){return this.states[le*6+$e]}stateFlag(le,$e){return(this.stateSlot(le,0)&$e)>0}validAction(le,$e){return!!this.allActions(le,ze=>ze==$e?!0:null)}allActions(le,$e){let ze=this.stateSlot(le,4),ee=ze?$e(ze):void 0;for(let Ze=this.stateSlot(le,1);ee==null;Ze+=3){if(this.data[Ze]==65535)if(this.data[Ze+1]==1)Ze=vr(this.data,Ze+2);else break;ee=$e(vr(this.data,Ze+1))}return ee}nextStates(le){let $e=[];for(let ze=this.stateSlot(le,1);;ze+=3){if(this.data[ze]==65535)if(this.data[ze+1]==1)ze=vr(this.data,ze+2);else break;if(!(this.data[ze+2]&1)){let ee=this.data[ze+1];$e.some((Ze,Ie)=>Ie&1&&Ze==ee)||$e.push(this.data[ze],ee)}}return $e}configure(le){let $e=Object.assign(Object.create(jr.prototype),this);if(le.props&&($e.nodeSet=this.nodeSet.extend(...le.props)),le.top){let ze=this.topRules[le.top];if(!ze)throw new RangeError(`Invalid top rule name ${le.top}`);$e.top=ze}return le.tokenizers&&($e.tokenizers=this.tokenizers.map(ze=>{let ee=le.tokenizers.find(Ze=>Ze.from==ze);return ee?ee.to:ze})),le.specializers&&($e.specializers=this.specializers.slice(),$e.specializerSpecs=this.specializerSpecs.map((ze,ee)=>{let Ze=le.specializers.find(Xe=>Xe.from==ze.external);if(!Ze)return ze;let Ie=Object.assign(Object.assign({},ze),{external:Ze.to});return $e.specializers[ee]=Is(Ie),Ie})),le.contextTracker&&($e.context=le.contextTracker),le.dialect&&($e.dialect=this.parseDialect(le.dialect)),le.strict!=null&&($e.strict=le.strict),le.wrap&&($e.wrappers=$e.wrappers.concat(le.wrap)),le.bufferLength!=null&&($e.bufferLength=le.bufferLength),$e}hasWrappers(){return this.wrappers.length>0}getName(le){return this.termNames?this.termNames[le]:String(le<=this.maxNode&&this.nodeSet.types[le].name||le)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(le){let $e=this.dynamicPrecedences;return $e==null?0:$e[le]||0}parseDialect(le){let $e=Object.keys(this.dialects),ze=$e.map(()=>!1);if(le)for(let Ze of le.split(" ")){let Ie=$e.indexOf(Ze);Ie>=0&&(ze[Ie]=!0)}let ee=null;for(let Ze=0;Ze<$e.length;Ze++)if(!ze[Ze])for(let Ie=this.dialects[$e[Ze]],Xe;(Xe=this.data[Ie++])!=65535;)(ee||(ee=new Uint8Array(this.maxTerm+1)))[Xe]=1;return new uo(le,ze,ee)}static deserialize(le){return new jr(le)}}function vr(ci,le){return ci[le]|ci[le+1]<<16}function qs(ci){let le=null;for(let $e of ci){let ze=$e.p.stoppedAt;($e.pos==$e.p.stream.end||ze!=null&&$e.pos>ze)&&$e.p.parser.stateFlag($e.state,2)&&(!le||le.score<$e.score)&&(le=$e)}return le}function Is(ci){if(ci.external){let le=ci.extend?1:0;return($e,ze)=>ci.external($e,ze)<<1|le}return ci.get}},95949:function(lo,bs,dn){"use strict";dn.d(bs,{ku:function(){return Aa}});class xe extends Error{}class It extends xe{constructor(v){super(`Invalid DateTime: ${v.toMessage()}`)}}class fn extends xe{constructor(v){super(`Invalid Interval: ${v.toMessage()}`)}}class it extends xe{constructor(v){super(`Invalid Duration: ${v.toMessage()}`)}}class Qt extends xe{}class yn extends xe{constructor(v){super(`Invalid unit ${v}`)}}class ii extends xe{}class Nn extends xe{constructor(){super("Zone is an abstract class")}}const Kt="numeric",In="short",vn="long",gn={year:Kt,month:Kt,day:Kt},Si={year:Kt,month:In,day:Kt},Ii={year:Kt,month:In,day:Kt,weekday:In},Un={year:Kt,month:vn,day:Kt},$t={year:Kt,month:vn,day:Kt,weekday:vn},qt={hour:Kt,minute:Kt},mr={hour:Kt,minute:Kt,second:Kt},ss={hour:Kt,minute:Kt,second:Kt,timeZoneName:In},Dr={hour:Kt,minute:Kt,second:Kt,timeZoneName:vn},zs={hour:Kt,minute:Kt,hourCycle:"h23"},pi={hour:Kt,minute:Kt,second:Kt,hourCycle:"h23"},vs={hour:Kt,minute:Kt,second:Kt,hourCycle:"h23",timeZoneName:In},uo={hour:Kt,minute:Kt,second:Kt,hourCycle:"h23",timeZoneName:vn},cs={year:Kt,month:Kt,day:Kt,hour:Kt,minute:Kt},wr={year:Kt,month:Kt,day:Kt,hour:Kt,minute:Kt,second:Kt},jr={year:Kt,month:In,day:Kt,hour:Kt,minute:Kt},vr={year:Kt,month:In,day:Kt,hour:Kt,minute:Kt,second:Kt},qs={year:Kt,month:In,day:Kt,weekday:In,hour:Kt,minute:Kt},Is={year:Kt,month:vn,day:Kt,hour:Kt,minute:Kt,timeZoneName:In},ci={year:Kt,month:vn,day:Kt,hour:Kt,minute:Kt,second:Kt,timeZoneName:In},le={year:Kt,month:vn,day:Kt,weekday:vn,hour:Kt,minute:Kt,timeZoneName:vn},$e={year:Kt,month:vn,day:Kt,weekday:vn,hour:Kt,minute:Kt,second:Kt,timeZoneName:vn};class ze{get type(){throw new Nn}get name(){throw new Nn}get ianaName(){return this.name}get isUniversal(){throw new Nn}offsetName(v,_){throw new Nn}formatOffset(v,_){throw new Nn}offset(v){throw new Nn}equals(v){throw new Nn}get isValid(){throw new Nn}}let ee=null;class Ze extends ze{static get instance(){return ee===null&&(ee=new Ze),ee}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(v,{format:_,locale:N}){return Os(v,_,N)}formatOffset(v,_){return wi(this.offset(v),_)}offset(v){return-new Date(v).getTimezoneOffset()}equals(v){return v.type==="system"}get isValid(){return!0}}let Ie={};function Xe(A){return Ie[A]||(Ie[A]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:A,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),Ie[A]}const St={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function Tt(A,v){const _=A.format(v).replace(/\u200E/g,""),N=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(_),[,q,de,Pe,tt,At,tn,Cr]=N;return[Pe,q,de,tt,At,tn,Cr]}function Bn(A,v){const _=A.formatToParts(v),N=[];for(let q=0;q<_.length;q++){const{type:de,value:Pe}=_[q],tt=St[de];de==="era"?N[tt]=Pe:ei(tt)||(N[tt]=parseInt(Pe,10))}return N}let Fn={};class Qn extends ze{static create(v){return Fn[v]||(Fn[v]=new Qn(v)),Fn[v]}static resetCache(){Fn={},Ie={}}static isValidSpecifier(v){return this.isValidZone(v)}static isValidZone(v){if(!v)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:v}).format(),!0}catch(_){return!1}}constructor(v){super(),this.zoneName=v,this.valid=Qn.isValidZone(v)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(v,{format:_,locale:N}){return Os(v,_,N,this.name)}formatOffset(v,_){return wi(this.offset(v),_)}offset(v){const _=new Date(v);if(isNaN(_))return NaN;const N=Xe(this.name);let[q,de,Pe,tt,At,tn,Cr]=N.formatToParts?Bn(N,_):Tt(N,_);tt==="BC"&&(q=-Math.abs(q)+1);const rs=Fi({year:q,month:de,day:Pe,hour:At===24?0:At,minute:tn,second:Cr,millisecond:0});let ir=+_;const mo=ir%1e3;return ir-=mo>=0?mo:1e3+mo,(rs-ir)/(60*1e3)}equals(v){return v.type==="iana"&&v.name===this.name}get isValid(){return this.valid}}let hi={};function Ki(A,v={}){const _=JSON.stringify([A,v]);let N=hi[_];return N||(N=new Intl.ListFormat(A,v),hi[_]=N),N}let Vn={};function fs(A,v={}){const _=JSON.stringify([A,v]);let N=Vn[_];return N||(N=new Intl.DateTimeFormat(A,v),Vn[_]=N),N}let wo={};function Ao(A,v={}){const _=JSON.stringify([A,v]);let N=wo[_];return N||(N=new Intl.NumberFormat(A,v),wo[_]=N),N}let en={};function fe(A,v={}){const Pe=v,{base:_}=Pe,N=Zu(Pe,["base"]),q=JSON.stringify([A,N]);let de=en[q];return de||(de=new Intl.RelativeTimeFormat(A,v),en[q]=de),de}let Fe=null;function Ye(){return Fe||(Fe=new Intl.DateTimeFormat().resolvedOptions().locale,Fe)}let Ve={};function Ge(A){let v=Ve[A];if(!v){const _=new Intl.Locale(A);v="getWeekInfo"in _?_.getWeekInfo():_.weekInfo,Ve[A]=v}return v}function Ut(A){const v=A.indexOf("-x-");v!==-1&&(A=A.substring(0,v));const _=A.indexOf("-u-");if(_===-1)return[A];{let N,q;try{N=fs(A).resolvedOptions(),q=A}catch(tt){const At=A.substring(0,_);N=fs(At).resolvedOptions(),q=At}const{numberingSystem:de,calendar:Pe}=N;return[q,de,Pe]}}function sn(A,v,_){return(_||v)&&(A.includes("-u-")||(A+="-u"),_&&(A+=`-ca-${_}`),v&&(A+=`-nu-${v}`)),A}function _n(A){const v=[];for(let _=1;_<=12;_++){const N=ls.utc(2009,_,1);v.push(A(N))}return v}function Hi(A){const v=[];for(let _=1;_<=7;_++){const N=ls.utc(2016,11,13+_);v.push(A(N))}return v}function Wn(A,v,_,N){const q=A.listingMode();return q==="error"?null:q==="en"?_(v):N(v)}function xi(A){return A.numberingSystem&&A.numberingSystem!=="latn"?!1:A.numberingSystem==="latn"||!A.locale||A.locale.startsWith("en")||new Intl.DateTimeFormat(A.intl).resolvedOptions().numberingSystem==="latn"}class ar{constructor(v,_,N){this.padTo=N.padTo||0,this.floor=N.floor||!1;const tt=N,{padTo:q,floor:de}=tt,Pe=Zu(tt,["padTo","floor"]);if(!_||Object.keys(Pe).length>0){const At=Jt({useGrouping:!1},N);N.padTo>0&&(At.minimumIntegerDigits=N.padTo),this.inf=Ao(v,At)}}format(v){if(this.inf){const _=this.floor?Math.floor(v):v;return this.inf.format(_)}else{const _=this.floor?Math.floor(v):vi(v,3);return jt(_,this.padTo)}}}class di{constructor(v,_,N){this.opts=N,this.originalZone=void 0;let q;if(this.opts.timeZone)this.dt=v;else if(v.zone.type==="fixed"){const Pe=-1*(v.offset/60),tt=Pe>=0?`Etc/GMT+${Pe}`:`Etc/GMT${Pe}`;v.offset!==0&&Qn.create(tt).valid?(q=tt,this.dt=v):(q="UTC",this.dt=v.offset===0?v:v.setZone("UTC").plus({minutes:v.offset}),this.originalZone=v.zone)}else v.zone.type==="system"?this.dt=v:v.zone.type==="iana"?(this.dt=v,q=v.zone.name):(q="UTC",this.dt=v.setZone("UTC").plus({minutes:v.offset}),this.originalZone=v.zone);const de=Jt({},this.opts);de.timeZone=de.timeZone||q,this.dtf=fs(_,de)}format(){return this.originalZone?this.formatToParts().map(({value:v})=>v).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const v=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?v.map(_=>{if(_.type==="timeZoneName"){const N=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return qi(Jt({},_),{value:N})}else return _}):v}resolvedOptions(){return this.dtf.resolvedOptions()}}class Ui{constructor(v,_,N){this.opts=Jt({style:"long"},N),!_&&re()&&(this.rtf=fe(v,N))}format(v,_){return this.rtf?this.rtf.format(v,_):Xt(_,v,this.opts.numeric,this.opts.style!=="long")}formatToParts(v,_){return this.rtf?this.rtf.formatToParts(v,_):[]}}const hr={firstDay:1,minimalDays:4,weekend:[6,7]};class bi{static fromOpts(v){return bi.create(v.locale,v.numberingSystem,v.outputCalendar,v.weekSettings,v.defaultToEN)}static create(v,_,N,q,de=!1){const Pe=v||tr.defaultLocale,tt=Pe||(de?"en-US":Ye()),At=_||tr.defaultNumberingSystem,tn=N||tr.defaultOutputCalendar,Cr=Ce(q)||tr.defaultWeekSettings;return new bi(tt,At,tn,Cr,Pe)}static resetCache(){Fe=null,Vn={},wo={},en={}}static fromObject({locale:v,numberingSystem:_,outputCalendar:N,weekSettings:q}={}){return bi.create(v,_,N,q)}constructor(v,_,N,q,de){const[Pe,tt,At]=Ut(v);this.locale=Pe,this.numberingSystem=_||tt||null,this.outputCalendar=N||At||null,this.weekSettings=q,this.intl=sn(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=de,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=xi(this)),this.fastNumbersCached}listingMode(){const v=this.isEnglish(),_=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return v&&_?"en":"intl"}clone(v){return!v||Object.getOwnPropertyNames(v).length===0?this:bi.create(v.locale||this.specifiedLocale,v.numberingSystem||this.numberingSystem,v.outputCalendar||this.outputCalendar,Ce(v.weekSettings)||this.weekSettings,v.defaultToEN||!1)}redefaultToEN(v={}){return this.clone(qi(Jt({},v),{defaultToEN:!0}))}redefaultToSystem(v={}){return this.clone(qi(Jt({},v),{defaultToEN:!1}))}months(v,_=!1){return Wn(this,v,ka,()=>{const N=_?{month:v,day:"numeric"}:{month:v},q=_?"format":"standalone";return this.monthsCache[q][v]||(this.monthsCache[q][v]=_n(de=>this.extract(de,N,"month"))),this.monthsCache[q][v]})}weekdays(v,_=!1){return Wn(this,v,Eo,()=>{const N=_?{weekday:v,year:"numeric",month:"long",day:"numeric"}:{weekday:v},q=_?"format":"standalone";return this.weekdaysCache[q][v]||(this.weekdaysCache[q][v]=Hi(de=>this.extract(de,N,"weekday"))),this.weekdaysCache[q][v]})}meridiems(){return Wn(this,void 0,()=>go,()=>{if(!this.meridiemCache){const v={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[ls.utc(2016,11,13,9),ls.utc(2016,11,13,19)].map(_=>this.extract(_,v,"dayperiod"))}return this.meridiemCache})}eras(v){return Wn(this,v,pe,()=>{const _={era:v};return this.eraCache[v]||(this.eraCache[v]=[ls.utc(-40,1,1),ls.utc(2017,1,1)].map(N=>this.extract(N,_,"era"))),this.eraCache[v]})}extract(v,_,N){const q=this.dtFormatter(v,_),de=q.formatToParts(),Pe=de.find(tt=>tt.type.toLowerCase()===N);return Pe?Pe.value:null}numberFormatter(v={}){return new ar(this.intl,v.forceSimple||this.fastNumbers,v)}dtFormatter(v,_={}){return new di(v,this.intl,_)}relFormatter(v={}){return new Ui(this.intl,this.isEnglish(),v)}listFormatter(v={}){return Ki(this.intl,v)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:P()?Ge(this.locale):hr}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(v){return this.locale===v.locale&&this.numberingSystem===v.numberingSystem&&this.outputCalendar===v.outputCalendar}}let Gr=null;class Zi extends ze{static get utcInstance(){return Gr===null&&(Gr=new Zi(0)),Gr}static instance(v){return v===0?Zi.utcInstance:new Zi(v)}static parseSpecifier(v){if(v){const _=v.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(_)return new Zi(ds(_[1],_[2]))}return null}constructor(v){super(),this.fixed=v}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${wi(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${wi(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(v,_){return wi(this.fixed,_)}get isUniversal(){return!0}offset(){return this.fixed}equals(v){return v.type==="fixed"&&v.fixed===this.fixed}get isValid(){return!0}}class xr extends ze{constructor(v){super(),this.zoneName=v}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function ms(A,v){let _;if(ei(A)||A===null)return v;if(A instanceof ze)return A;if(oa(A)){const N=A.toLowerCase();return N==="default"?v:N==="local"||N==="system"?Ze.instance:N==="utc"||N==="gmt"?Zi.utcInstance:Zi.parseSpecifier(N)||Qn.create(A)}else return Rs(A)?Zi.instance(A):typeof A=="object"&&"offset"in A&&typeof A.offset=="function"?A:new xr(A)}let Ni=()=>Date.now(),qr="system",Di=null,Sr=null,Qi=null,_i=60,gr,Zn=null;class tr{static get now(){return Ni}static set now(v){Ni=v}static set defaultZone(v){qr=v}static get defaultZone(){return ms(qr,Ze.instance)}static get defaultLocale(){return Di}static set defaultLocale(v){Di=v}static get defaultNumberingSystem(){return Sr}static set defaultNumberingSystem(v){Sr=v}static get defaultOutputCalendar(){return Qi}static set defaultOutputCalendar(v){Qi=v}static get defaultWeekSettings(){return Zn}static set defaultWeekSettings(v){Zn=Ce(v)}static get twoDigitCutoffYear(){return _i}static set twoDigitCutoffYear(v){_i=v%100}static get throwOnInvalid(){return gr}static set throwOnInvalid(v){gr=v}static resetCaches(){bi.resetCache(),Qn.resetCache()}}class bn{constructor(v,_){this.reason=v,this.explanation=_}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const Wr=[0,31,59,90,120,151,181,212,243,273,304,334],Js=[0,31,60,91,121,152,182,213,244,274,305,335];function Hr(A,v){return new bn("unit out of range",`you specified ${v} (of type ${typeof v}) as a ${A}, which is invalid`)}function Lr(A,v,_){const N=new Date(Date.UTC(A,v-1,_));A<100&&A>=0&&N.setUTCFullYear(N.getUTCFullYear()-1900);const q=N.getUTCDay();return q===0?7:q}function Pi(A,v,_){return _+(ws(A)?Js:Wr)[v-1]}function Qs(A,v){const _=ws(A)?Js:Wr,N=_.findIndex(de=>de<v),q=v-_[N];return{month:N+1,day:q}}function Pn(A,v){return(A-v+7)%7+1}function Xs(A,v=4,_=1){const{year:N,month:q,day:de}=A,Pe=Pi(N,q,de),tt=Pn(Lr(N,q,de),_);let At=Math.floor((Pe-tt+14-v)/7),tn;return At<1?(tn=N-1,At=so(tn,v,_)):At>so(N,v,_)?(tn=N+1,At=1):tn=N,Jt({weekYear:tn,weekNumber:At,weekday:tt},Mn(A))}function Ts(A,v=4,_=1){const{weekYear:N,weekNumber:q,weekday:de}=A,Pe=Pn(Lr(N,1,v),_),tt=ho(N);let At=q*7+de-Pe-7+v,tn;At<1?(tn=N-1,At+=ho(tn)):At>tt?(tn=N+1,At-=ho(N)):tn=N;const{month:Cr,day:Jn}=Qs(tn,At);return Jt({year:tn,month:Cr,day:Jn},Mn(A))}function Kr(A){const{year:v,month:_,day:N}=A,q=Pi(v,_,N);return Jt({year:v,ordinal:q},Mn(A))}function hs(A){const{year:v,ordinal:_}=A,{month:N,day:q}=Qs(v,_);return Jt({year:v,month:N,day:q},Mn(A))}function os(A,v){if(!ei(A.localWeekday)||!ei(A.localWeekNumber)||!ei(A.localWeekYear)){if(!ei(A.weekday)||!ei(A.weekNumber)||!ei(A.weekYear))throw new Qt("Cannot mix locale-based week fields with ISO-based week fields");return ei(A.localWeekday)||(A.weekday=A.localWeekday),ei(A.localWeekNumber)||(A.weekNumber=A.localWeekNumber),ei(A.localWeekYear)||(A.weekYear=A.localWeekYear),delete A.localWeekday,delete A.localWeekNumber,delete A.localWeekYear,{minDaysInFirstWeek:v.getMinDaysInFirstWeek(),startOfWeek:v.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function js(A,v=4,_=1){const N=co(A.weekYear),q=We(A.weekNumber,1,so(A.weekYear,v,_)),de=We(A.weekday,1,7);return N?q?de?!1:Hr("weekday",A.weekday):Hr("week",A.weekNumber):Hr("weekYear",A.weekYear)}function dr(A){const v=co(A.year),_=We(A.ordinal,1,ho(A.year));return v?_?!1:Hr("ordinal",A.ordinal):Hr("year",A.year)}function Qr(A){const v=co(A.year),_=We(A.month,1,12),N=We(A.day,1,pr(A.year,A.month));return v?_?N?!1:Hr("day",A.day):Hr("month",A.month):Hr("year",A.year)}function gs(A){const{hour:v,minute:_,second:N,millisecond:q}=A,de=We(v,0,23)||v===24&&_===0&&N===0&&q===0,Pe=We(_,0,59),tt=We(N,0,59),At=We(q,0,999);return de?Pe?tt?At?!1:Hr("millisecond",q):Hr("second",N):Hr("minute",_):Hr("hour",v)}function ei(A){return typeof A=="undefined"}function Rs(A){return typeof A=="number"}function co(A){return typeof A=="number"&&A%1===0}function oa(A){return typeof A=="string"}function na(A){return Object.prototype.toString.call(A)==="[object Date]"}function re(){try{return typeof Intl!="undefined"&&!!Intl.RelativeTimeFormat}catch(A){return!1}}function P(){try{return typeof Intl!="undefined"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch(A){return!1}}function V(A){return Array.isArray(A)?A:[A]}function Y(A,v,_){if(A.length!==0)return A.reduce((N,q)=>{const de=[v(q),q];return N&&_(N[0],de[0])===N[0]?N:de},null)[1]}function te(A,v){return v.reduce((_,N)=>(_[N]=A[N],_),{})}function we(A,v){return Object.prototype.hasOwnProperty.call(A,v)}function Ce(A){if(A==null)return null;if(typeof A!="object")throw new ii("Week settings must be an object");if(!We(A.firstDay,1,7)||!We(A.minimalDays,1,7)||!Array.isArray(A.weekend)||A.weekend.some(v=>!We(v,1,7)))throw new ii("Invalid week settings");return{firstDay:A.firstDay,minimalDays:A.minimalDays,weekend:Array.from(A.weekend)}}function We(A,v,_){return co(A)&&A>=v&&A<=_}function Dt(A,v){return A-v*Math.floor(A/v)}function jt(A,v=2){const _=A<0;let N;return _?N="-"+(""+-A).padStart(v,"0"):N=(""+A).padStart(v,"0"),N}function xn(A){if(!(ei(A)||A===null||A===""))return parseInt(A,10)}function Tn(A){if(!(ei(A)||A===null||A===""))return parseFloat(A)}function mi(A){if(!(ei(A)||A===null||A==="")){const v=parseFloat("0."+A)*1e3;return Math.floor(v)}}function vi(A,v,_=!1){const N=bF(10,v);return(_?Math.trunc:Math.round)(A*N)/N}function ws(A){return A%4===0&&(A%100!==0||A%400===0)}function ho(A){return ws(A)?366:365}function pr(A,v){const _=Dt(v-1,12)+1,N=A+(v-_)/12;return _===2?ws(N)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][_-1]}function Fi(A){let v=Date.UTC(A.year,A.month-1,A.day,A.hour,A.minute,A.second,A.millisecond);return A.year<100&&A.year>=0&&(v=new Date(v),v.setUTCFullYear(A.year,A.month-1,A.day)),+v}function rt(A,v,_){return-Pn(Lr(A,1,v),_)+v-1}function so(A,v=4,_=1){const N=rt(A,v,_),q=rt(A+1,v,_);return(ho(A)-N+q)/7}function To(A){return A>99?A:A>tr.twoDigitCutoffYear?1900+A:2e3+A}function Os(A,v,_,N=null){const q=new Date(A),de={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};N&&(de.timeZone=N);const Pe=Jt({timeZoneName:v},de),tt=new Intl.DateTimeFormat(_,Pe).formatToParts(q).find(At=>At.type.toLowerCase()==="timezonename");return tt?tt.value:null}function ds(A,v){let _=parseInt(A,10);Number.isNaN(_)&&(_=0);const N=parseInt(v,10)||0,q=_<0||Object.is(_,-0)?-N:N;return _*60+q}function Oo(A){const v=Number(A);if(typeof A=="boolean"||A===""||Number.isNaN(v))throw new ii(`Invalid unit value ${A}`);return v}function nr(A,v){const _={};for(const N in A)if(we(A,N)){const q=A[N];if(q==null)continue;_[v(N)]=Oo(q)}return _}function wi(A,v){const _=Math.trunc(Math.abs(A/60)),N=Math.trunc(Math.abs(A%60)),q=A>=0?"+":"-";switch(v){case"short":return`${q}${jt(_,2)}:${jt(N,2)}`;case"narrow":return`${q}${_}${N>0?`:${N}`:""}`;case"techie":return`${q}${jt(_,2)}${jt(N,2)}`;default:throw new RangeError(`Value format ${v} is out of range for property format`)}}function Mn(A){return te(A,["hour","minute","second","millisecond"])}function ks(A){return JSON.stringify(A,Object.keys(A).sort())}const jo=["January","February","March","April","May","June","July","August","September","October","November","December"],Zr=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],aa=["J","F","M","A","M","J","J","A","S","O","N","D"];function ka(A){switch(A){case"narrow":return[...aa];case"short":return[...Zr];case"long":return[...jo];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const fa=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],ps=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],no=["M","T","W","T","F","S","S"];function Eo(A){switch(A){case"narrow":return[...no];case"short":return[...ps];case"long":return[...fa];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const go=["AM","PM"],Xo=["Before Christ","Anno Domini"],Ae=["BC","AD"],Z=["B","A"];function pe(A){switch(A){case"narrow":return[...Z];case"short":return[...Ae];case"long":return[...Xo];default:return null}}function Ne(A){return go[A.hour<12?0:1]}function Be(A,v){return Eo(v)[A.weekday-1]}function ut(A,v){return ka(v)[A.month-1]}function Ft(A,v){return pe(v)[A.year<0?0:1]}function Xt(A,v,_="always",N=!1){const q={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},de=["hours","minutes","seconds"].indexOf(A)===-1;if(_==="auto"&&de){const Jn=A==="days";switch(v){case 1:return Jn?"tomorrow":`next ${q[A][0]}`;case-1:return Jn?"yesterday":`last ${q[A][0]}`;case 0:return Jn?"today":`this ${q[A][0]}`;default:}}const Pe=Object.is(v,-0)||v<0,tt=Math.abs(v),At=tt===1,tn=q[A],Cr=N?At?tn[1]:tn[2]||tn[1]:At?q[A][0]:A;return Pe?`${tt} ${Cr} ago`:`in ${tt} ${Cr}`}function mn(A){const v=pick(A,["weekday","era","year","month","day","hour","minute","second","timeZoneName","hourCycle"]),_=ks(v),N="EEEE, LLLL d, yyyy, h:mm a";switch(_){case ks(Formats.DATE_SHORT):return"M/d/yyyy";case ks(Formats.DATE_MED):return"LLL d, yyyy";case ks(Formats.DATE_MED_WITH_WEEKDAY):return"EEE, LLL d, yyyy";case ks(Formats.DATE_FULL):return"LLLL d, yyyy";case ks(Formats.DATE_HUGE):return"EEEE, LLLL d, yyyy";case ks(Formats.TIME_SIMPLE):return"h:mm a";case ks(Formats.TIME_WITH_SECONDS):return"h:mm:ss a";case ks(Formats.TIME_WITH_SHORT_OFFSET):return"h:mm a";case ks(Formats.TIME_WITH_LONG_OFFSET):return"h:mm a";case ks(Formats.TIME_24_SIMPLE):return"HH:mm";case ks(Formats.TIME_24_WITH_SECONDS):return"HH:mm:ss";case ks(Formats.TIME_24_WITH_SHORT_OFFSET):return"HH:mm";case ks(Formats.TIME_24_WITH_LONG_OFFSET):return"HH:mm";case ks(Formats.DATETIME_SHORT):return"M/d/yyyy, h:mm a";case ks(Formats.DATETIME_MED):return"LLL d, yyyy, h:mm a";case ks(Formats.DATETIME_FULL):return"LLLL d, yyyy, h:mm a";case ks(Formats.DATETIME_HUGE):return N;case ks(Formats.DATETIME_SHORT_WITH_SECONDS):return"M/d/yyyy, h:mm:ss a";case ks(Formats.DATETIME_MED_WITH_SECONDS):return"LLL d, yyyy, h:mm:ss a";case ks(Formats.DATETIME_MED_WITH_WEEKDAY):return"EEE, d LLL yyyy, h:mm a";case ks(Formats.DATETIME_FULL_WITH_SECONDS):return"LLLL d, yyyy, h:mm:ss a";case ks(Formats.DATETIME_HUGE_WITH_SECONDS):return"EEEE, LLLL d, yyyy, h:mm:ss a";default:return N}}function ri(A,v){let _="";for(const N of A)N.literal?_+=N.val:_+=v(N.val);return _}const rr={D:gn,DD:Si,DDD:Un,DDDD:$t,t:qt,tt:mr,ttt:ss,tttt:Dr,T:zs,TT:pi,TTT:vs,TTTT:uo,f:cs,ff:jr,fff:Is,ffff:le,F:wr,FF:vr,FFF:ci,FFFF:$e};class Xi{static create(v,_={}){return new Xi(v,_)}static parseFormat(v){let _=null,N="",q=!1;const de=[];for(let Pe=0;Pe<v.length;Pe++){const tt=v.charAt(Pe);tt==="'"?(N.length>0&&de.push({literal:q||/^\s+$/.test(N),val:N}),_=null,N="",q=!q):q||tt===_?N+=tt:(N.length>0&&de.push({literal:/^\s+$/.test(N),val:N}),N=tt,_=tt)}return N.length>0&&de.push({literal:q||/^\s+$/.test(N),val:N}),de}static macroTokenToFormatOpts(v){return rr[v]}constructor(v,_){this.opts=_,this.loc=v,this.systemLoc=null}formatWithSystemDefault(v,_){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(v,Jt(Jt({},this.opts),_)).format()}dtFormatter(v,_={}){return this.loc.dtFormatter(v,Jt(Jt({},this.opts),_))}formatDateTime(v,_){return this.dtFormatter(v,_).format()}formatDateTimeParts(v,_){return this.dtFormatter(v,_).formatToParts()}formatInterval(v,_){return this.dtFormatter(v.start,_).dtf.formatRange(v.start.toJSDate(),v.end.toJSDate())}resolvedOptions(v,_){return this.dtFormatter(v,_).resolvedOptions()}num(v,_=0){if(this.opts.forceSimple)return jt(v,_);const N=Jt({},this.opts);return _>0&&(N.padTo=_),this.loc.numberFormatter(N).format(v)}formatDateTimeFromString(v,_){const N=this.loc.listingMode()==="en",q=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",de=(ir,mo)=>this.loc.extract(v,ir,mo),Pe=ir=>v.isOffsetFixed&&v.offset===0&&ir.allowZ?"Z":v.isValid?v.zone.formatOffset(v.ts,ir.format):"",tt=()=>N?Ne(v):de({hour:"numeric",hourCycle:"h12"},"dayperiod"),At=(ir,mo)=>N?ut(v,ir):de(mo?{month:ir}:{month:ir,day:"numeric"},"month"),tn=(ir,mo)=>N?Be(v,ir):de(mo?{weekday:ir}:{weekday:ir,month:"long",day:"numeric"},"weekday"),Cr=ir=>{const mo=Xi.macroTokenToFormatOpts(ir);return mo?this.formatWithSystemDefault(v,mo):ir},Jn=ir=>N?Ft(v,ir):de({era:ir},"era"),rs=ir=>{switch(ir){case"S":return this.num(v.millisecond);case"u":case"SSS":return this.num(v.millisecond,3);case"s":return this.num(v.second);case"ss":return this.num(v.second,2);case"uu":return this.num(Math.floor(v.millisecond/10),2);case"uuu":return this.num(Math.floor(v.millisecond/100));case"m":return this.num(v.minute);case"mm":return this.num(v.minute,2);case"h":return this.num(v.hour%12===0?12:v.hour%12);case"hh":return this.num(v.hour%12===0?12:v.hour%12,2);case"H":return this.num(v.hour);case"HH":return this.num(v.hour,2);case"Z":return Pe({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return Pe({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return Pe({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return v.zone.offsetName(v.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return v.zone.offsetName(v.ts,{format:"long",locale:this.loc.locale});case"z":return v.zoneName;case"a":return tt();case"d":return q?de({day:"numeric"},"day"):this.num(v.day);case"dd":return q?de({day:"2-digit"},"day"):this.num(v.day,2);case"c":return this.num(v.weekday);case"ccc":return tn("short",!0);case"cccc":return tn("long",!0);case"ccccc":return tn("narrow",!0);case"E":return this.num(v.weekday);case"EEE":return tn("short",!1);case"EEEE":return tn("long",!1);case"EEEEE":return tn("narrow",!1);case"L":return q?de({month:"numeric",day:"numeric"},"month"):this.num(v.month);case"LL":return q?de({month:"2-digit",day:"numeric"},"month"):this.num(v.month,2);case"LLL":return At("short",!0);case"LLLL":return At("long",!0);case"LLLLL":return At("narrow",!0);case"M":return q?de({month:"numeric"},"month"):this.num(v.month);case"MM":return q?de({month:"2-digit"},"month"):this.num(v.month,2);case"MMM":return At("short",!1);case"MMMM":return At("long",!1);case"MMMMM":return At("narrow",!1);case"y":return q?de({year:"numeric"},"year"):this.num(v.year);case"yy":return q?de({year:"2-digit"},"year"):this.num(v.year.toString().slice(-2),2);case"yyyy":return q?de({year:"numeric"},"year"):this.num(v.year,4);case"yyyyyy":return q?de({year:"numeric"},"year"):this.num(v.year,6);case"G":return Jn("short");case"GG":return Jn("long");case"GGGGG":return Jn("narrow");case"kk":return this.num(v.weekYear.toString().slice(-2),2);case"kkkk":return this.num(v.weekYear,4);case"W":return this.num(v.weekNumber);case"WW":return this.num(v.weekNumber,2);case"n":return this.num(v.localWeekNumber);case"nn":return this.num(v.localWeekNumber,2);case"ii":return this.num(v.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(v.localWeekYear,4);case"o":return this.num(v.ordinal);case"ooo":return this.num(v.ordinal,3);case"q":return this.num(v.quarter);case"qq":return this.num(v.quarter,2);case"X":return this.num(Math.floor(v.ts/1e3));case"x":return this.num(v.ts);default:return Cr(ir)}};return ri(Xi.parseFormat(_),rs)}formatDurationFromString(v,_){const N=At=>{switch(At[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},q=At=>tn=>{const Cr=N(tn);return Cr?this.num(At.get(Cr),tn.length):tn},de=Xi.parseFormat(_),Pe=de.reduce((At,{literal:tn,val:Cr})=>tn?At:At.concat(Cr),[]),tt=v.shiftTo(...Pe.map(N).filter(At=>At));return ri(de,q(tt))}}const Vo=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function yo(...A){const v=A.reduce((_,N)=>_+N.source,"");return RegExp(`^${v}$`)}function Vs(...A){return v=>A.reduce(([_,N,q],de)=>{const[Pe,tt,At]=de(v,q);return[Jt(Jt({},_),Pe),tt||N,At]},[{},null,1]).slice(0,2)}function ko(A,...v){if(A==null)return[null,null];for(const[_,N]of v){const q=_.exec(A);if(q)return N(q)}return[null,null]}function Uo(...A){return(v,_)=>{const N={};let q;for(q=0;q<A.length;q++)N[A[q]]=xn(v[_+q]);return[N,null,_+q]}}const la=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,Ys=`(?:${la.source}?(?:\\[(${Vo.source})\\])?)?`,Ai=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,ll=RegExp(`${Ai.source}${Ys}`),si=RegExp(`(?:T${ll.source})?`),Zo=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,ma=/(\d{4})-?W(\d\d)(?:-?(\d))?/,ul=/(\d{4})-?(\d{3})/,ia=Uo("weekYear","weekNumber","weekDay"),Ro=Uo("year","ordinal"),La=/(\d{4})-(\d\d)-(\d\d)/,Ar=RegExp(`${Ai.source} ?(?:${la.source}|(${Vo.source}))?`),il=RegExp(`(?: ${Ar.source})?`);function Jo(A,v,_){const N=A[v];return ei(N)?_:xn(N)}function J(A,v){return[{year:Jo(A,v),month:Jo(A,v+1,1),day:Jo(A,v+2,1)},null,v+3]}function Ee(A,v){return[{hours:Jo(A,v,0),minutes:Jo(A,v+1,0),seconds:Jo(A,v+2,0),milliseconds:mi(A[v+3])},null,v+4]}function je(A,v){const _=!A[v]&&!A[v+1],N=ds(A[v+1],A[v+2]),q=_?null:Zi.instance(N);return[{},q,v+3]}function Je(A,v){const _=A[v]?Qn.create(A[v]):null;return[{},_,v+1]}const Ct=RegExp(`^T?${Ai.source}$`),Nt=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function pn(A){const[v,_,N,q,de,Pe,tt,At,tn]=A,Cr=v[0]==="-",Jn=At&&At[0]==="-",rs=(ir,mo=!1)=>ir!==void 0&&(mo||ir&&Cr)?-ir:ir;return[{years:rs(Tn(_)),months:rs(Tn(N)),weeks:rs(Tn(q)),days:rs(Tn(de)),hours:rs(Tn(Pe)),minutes:rs(Tn(tt)),seconds:rs(Tn(At),At==="-0"),milliseconds:rs(mi(tn),Jn)}]}const ai={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function zi(A,v,_,N,q,de,Pe){const tt={year:v.length===2?To(xn(v)):xn(v),month:Zr.indexOf(_)+1,day:xn(N),hour:xn(q),minute:xn(de)};return Pe&&(tt.second=xn(Pe)),A&&(tt.weekday=A.length>3?fa.indexOf(A)+1:ps.indexOf(A)+1),tt}const as=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function Pr(A){const[,v,_,N,q,de,Pe,tt,At,tn,Cr,Jn]=A,rs=zi(v,q,N,_,de,Pe,tt);let ir;return At?ir=ai[At]:tn?ir=0:ir=ds(Cr,Jn),[rs,new Zi(ir)]}function fr(A){return A.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const _o=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,Co=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,De=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function He(A){const[,v,_,N,q,de,Pe,tt]=A;return[zi(v,q,N,_,de,Pe,tt),Zi.utcInstance]}function ht(A){const[,v,_,N,q,de,Pe,tt]=A;return[zi(v,tt,_,N,q,de,Pe),Zi.utcInstance]}const vt=yo(Zo,si),Bt=yo(ma,si),zt=yo(ul,si),Ot=yo(ll),mt=Vs(J,Ee,je,Je),on=Vs(ia,Ee,je,Je),En=Vs(Ro,Ee,je,Je),kn=Vs(Ee,je,Je);function yi(A){return ko(A,[vt,mt],[Bt,on],[zt,En],[Ot,kn])}function gi(A){return ko(fr(A),[as,Pr])}function Wi(A){return ko(A,[_o,He],[Co,He],[De,ht])}function Xn(A){return ko(A,[Nt,pn])}const Yn=Vs(Ee);function Ht(A){return ko(A,[Ct,Yn])}const $r=yo(La,il),kt=yo(Ar),Bi=Vs(Ee,je,Je);function Tr(A){return ko(A,[$r,mt],[kt,Bi])}const Mi="Invalid Duration",Ur={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},Ei=Jt({years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3}},Ur),Xr=146097/400,lr=146097/4800,Ci=Jt({years:{quarters:4,months:12,weeks:Xr/7,days:Xr,hours:Xr*24,minutes:Xr*24*60,seconds:Xr*24*60*60,milliseconds:Xr*24*60*60*1e3},quarters:{months:3,weeks:Xr/28,days:Xr/4,hours:Xr*24/4,minutes:Xr*24*60/4,seconds:Xr*24*60*60/4,milliseconds:Xr*24*60*60*1e3/4},months:{weeks:lr/7,days:lr,hours:lr*24,minutes:lr*24*60,seconds:lr*24*60*60,milliseconds:lr*24*60*60*1e3}},Ur),Or=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],Gs=Or.slice(0).reverse();function sr(A,v,_=!1){const N={values:_?v.values:Jt(Jt({},A.values),v.values||{}),loc:A.loc.clone(v.loc),conversionAccuracy:v.conversionAccuracy||A.conversionAccuracy,matrix:v.matrix||A.matrix};return new ti(N)}function Sn(A,v){var N;let _=(N=v.milliseconds)!=null?N:0;for(const q of Gs.slice(1))v[q]&&(_+=v[q]*A[q].milliseconds);return _}function ln(A,v){const _=Sn(A,v)<0?-1:1;Or.reduceRight((N,q)=>{if(ei(v[q]))return N;if(N){const de=v[N]*_,Pe=A[q][N],tt=Math.floor(de/Pe);v[q]+=tt*_,v[N]-=tt*Pe*_}return q},null),Or.reduce((N,q)=>{if(ei(v[q]))return N;if(N){const de=v[N]%1;v[N]-=de,v[q]+=de*A[N][q]}return q},null)}function Yt(A){const v={};for(const[_,N]of Object.entries(A))N!==0&&(v[_]=N);return v}class ti{constructor(v){const _=v.conversionAccuracy==="longterm"||!1;let N=_?Ci:Ei;v.matrix&&(N=v.matrix),this.values=v.values,this.loc=v.loc||bi.create(),this.conversionAccuracy=_?"longterm":"casual",this.invalid=v.invalid||null,this.matrix=N,this.isLuxonDuration=!0}static fromMillis(v,_){return ti.fromObject({milliseconds:v},_)}static fromObject(v,_={}){if(v==null||typeof v!="object")throw new ii(`Duration.fromObject: argument expected to be an object, got ${v===null?"null":typeof v}`);return new ti({values:nr(v,ti.normalizeUnit),loc:bi.fromObject(_),conversionAccuracy:_.conversionAccuracy,matrix:_.matrix})}static fromDurationLike(v){if(Rs(v))return ti.fromMillis(v);if(ti.isDuration(v))return v;if(typeof v=="object")return ti.fromObject(v);throw new ii(`Unknown duration argument ${v} of type ${typeof v}`)}static fromISO(v,_){const[N]=Xn(v);return N?ti.fromObject(N,_):ti.invalid("unparsable",`the input "${v}" can't be parsed as ISO 8601`)}static fromISOTime(v,_){const[N]=Ht(v);return N?ti.fromObject(N,_):ti.invalid("unparsable",`the input "${v}" can't be parsed as ISO 8601`)}static invalid(v,_=null){if(!v)throw new ii("need to specify a reason the Duration is invalid");const N=v instanceof bn?v:new bn(v,_);if(tr.throwOnInvalid)throw new it(N);return new ti({invalid:N})}static normalizeUnit(v){const _={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[v&&v.toLowerCase()];if(!_)throw new yn(v);return _}static isDuration(v){return v&&v.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(v,_={}){const N=qi(Jt({},_),{floor:_.round!==!1&&_.floor!==!1});return this.isValid?Xi.create(this.loc,N).formatDurationFromString(this,v):Mi}toHuman(v={}){if(!this.isValid)return Mi;const _=Or.map(N=>{const q=this.values[N];return ei(q)?null:this.loc.numberFormatter(qi(Jt({style:"unit",unitDisplay:"long"},v),{unit:N.slice(0,-1)})).format(q)}).filter(N=>N);return this.loc.listFormatter(Jt({type:"conjunction",style:v.listStyle||"narrow"},v)).format(_)}toObject(){return this.isValid?Jt({},this.values):{}}toISO(){if(!this.isValid)return null;let v="P";return this.years!==0&&(v+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(v+=this.months+this.quarters*3+"M"),this.weeks!==0&&(v+=this.weeks+"W"),this.days!==0&&(v+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(v+="T"),this.hours!==0&&(v+=this.hours+"H"),this.minutes!==0&&(v+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(v+=vi(this.seconds+this.milliseconds/1e3,3)+"S"),v==="P"&&(v+="T0S"),v}toISOTime(v={}){if(!this.isValid)return null;const _=this.toMillis();return _<0||_>=864e5?null:(v=qi(Jt({suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended"},v),{includeOffset:!1}),ls.fromMillis(_,{zone:"UTC"}).toISOTime(v))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?Sn(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(v){if(!this.isValid)return this;const _=ti.fromDurationLike(v),N={};for(const q of Or)(we(_.values,q)||we(this.values,q))&&(N[q]=_.get(q)+this.get(q));return sr(this,{values:N},!0)}minus(v){if(!this.isValid)return this;const _=ti.fromDurationLike(v);return this.plus(_.negate())}mapUnits(v){if(!this.isValid)return this;const _={};for(const N of Object.keys(this.values))_[N]=Oo(v(this.values[N],N));return sr(this,{values:_},!0)}get(v){return this[ti.normalizeUnit(v)]}set(v){if(!this.isValid)return this;const _=Jt(Jt({},this.values),nr(v,ti.normalizeUnit));return sr(this,{values:_})}reconfigure({locale:v,numberingSystem:_,conversionAccuracy:N,matrix:q}={}){const Pe={loc:this.loc.clone({locale:v,numberingSystem:_}),matrix:q,conversionAccuracy:N};return sr(this,Pe)}as(v){return this.isValid?this.shiftTo(v).get(v):NaN}normalize(){if(!this.isValid)return this;const v=this.toObject();return ln(this.matrix,v),sr(this,{values:v},!0)}rescale(){if(!this.isValid)return this;const v=Yt(this.normalize().shiftToAll().toObject());return sr(this,{values:v},!0)}shiftTo(...v){if(!this.isValid)return this;if(v.length===0)return this;v=v.map(Pe=>ti.normalizeUnit(Pe));const _={},N={},q=this.toObject();let de;for(const Pe of Or)if(v.indexOf(Pe)>=0){de=Pe;let tt=0;for(const tn in N)tt+=this.matrix[tn][Pe]*N[tn],N[tn]=0;Rs(q[Pe])&&(tt+=q[Pe]);const At=Math.trunc(tt);_[Pe]=At,N[Pe]=(tt*1e3-At*1e3)/1e3}else Rs(q[Pe])&&(N[Pe]=q[Pe]);for(const Pe in N)N[Pe]!==0&&(_[de]+=Pe===de?N[Pe]:N[Pe]/this.matrix[de][Pe]);return ln(this.matrix,_),sr(this,{values:_},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const v={};for(const _ of Object.keys(this.values))v[_]=this.values[_]===0?0:-this.values[_];return sr(this,{values:v},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(v){if(!this.isValid||!v.isValid||!this.loc.equals(v.loc))return!1;function _(N,q){return N===void 0||N===0?q===void 0||q===0:N===q}for(const N of Or)if(!_(this.values[N],v.values[N]))return!1;return!0}}const oo="Invalid Interval";function Oi(A,v){return!A||!A.isValid?Fr.invalid("missing or invalid start"):!v||!v.isValid?Fr.invalid("missing or invalid end"):v<A?Fr.invalid("end before start",`The end of an interval must be after its start, but you had start=${A.toISO()} and end=${v.toISO()}`):null}class Fr{constructor(v){this.s=v.start,this.e=v.end,this.invalid=v.invalid||null,this.isLuxonInterval=!0}static invalid(v,_=null){if(!v)throw new ii("need to specify a reason the Interval is invalid");const N=v instanceof bn?v:new bn(v,_);if(tr.throwOnInvalid)throw new fn(N);return new Fr({invalid:N})}static fromDateTimes(v,_){const N=Ka(v),q=Ka(_),de=Oi(N,q);return de==null?new Fr({start:N,end:q}):de}static after(v,_){const N=ti.fromDurationLike(_),q=Ka(v);return Fr.fromDateTimes(q,q.plus(N))}static before(v,_){const N=ti.fromDurationLike(_),q=Ka(v);return Fr.fromDateTimes(q.minus(N),q)}static fromISO(v,_){const[N,q]=(v||"").split("/",2);if(N&&q){let de,Pe;try{de=ls.fromISO(N,_),Pe=de.isValid}catch(tn){Pe=!1}let tt,At;try{tt=ls.fromISO(q,_),At=tt.isValid}catch(tn){At=!1}if(Pe&&At)return Fr.fromDateTimes(de,tt);if(Pe){const tn=ti.fromISO(q,_);if(tn.isValid)return Fr.after(de,tn)}else if(At){const tn=ti.fromISO(N,_);if(tn.isValid)return Fr.before(tt,tn)}}return Fr.invalid("unparsable",`the input "${v}" can't be parsed as ISO 8601`)}static isInterval(v){return v&&v.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(v="milliseconds"){return this.isValid?this.toDuration(v).get(v):NaN}count(v="milliseconds",_){if(!this.isValid)return NaN;const N=this.start.startOf(v,_);let q;return _!=null&&_.useLocaleWeeks?q=this.end.reconfigure({locale:N.locale}):q=this.end,q=q.startOf(v,_),Math.floor(q.diff(N,v).get(v))+(q.valueOf()!==this.end.valueOf())}hasSame(v){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,v):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(v){return this.isValid?this.s>v:!1}isBefore(v){return this.isValid?this.e<=v:!1}contains(v){return this.isValid?this.s<=v&&this.e>v:!1}set({start:v,end:_}={}){return this.isValid?Fr.fromDateTimes(v||this.s,_||this.e):this}splitAt(...v){if(!this.isValid)return[];const _=v.map(Ka).filter(Pe=>this.contains(Pe)).sort((Pe,tt)=>Pe.toMillis()-tt.toMillis()),N=[];let{s:q}=this,de=0;for(;q<this.e;){const Pe=_[de]||this.e,tt=+Pe>+this.e?this.e:Pe;N.push(Fr.fromDateTimes(q,tt)),q=tt,de+=1}return N}splitBy(v){const _=ti.fromDurationLike(v);if(!this.isValid||!_.isValid||_.as("milliseconds")===0)return[];let{s:N}=this,q=1,de;const Pe=[];for(;N<this.e;){const tt=this.start.plus(_.mapUnits(At=>At*q));de=+tt>+this.e?this.e:tt,Pe.push(Fr.fromDateTimes(N,de)),N=de,q+=1}return Pe}divideEqually(v){return this.isValid?this.splitBy(this.length()/v).slice(0,v):[]}overlaps(v){return this.e>v.s&&this.s<v.e}abutsStart(v){return this.isValid?+this.e==+v.s:!1}abutsEnd(v){return this.isValid?+v.e==+this.s:!1}engulfs(v){return this.isValid?this.s<=v.s&&this.e>=v.e:!1}equals(v){return!this.isValid||!v.isValid?!1:this.s.equals(v.s)&&this.e.equals(v.e)}intersection(v){if(!this.isValid)return this;const _=this.s>v.s?this.s:v.s,N=this.e<v.e?this.e:v.e;return _>=N?null:Fr.fromDateTimes(_,N)}union(v){if(!this.isValid)return this;const _=this.s<v.s?this.s:v.s,N=this.e>v.e?this.e:v.e;return Fr.fromDateTimes(_,N)}static merge(v){const[_,N]=v.sort((q,de)=>q.s-de.s).reduce(([q,de],Pe)=>de?de.overlaps(Pe)||de.abutsStart(Pe)?[q,de.union(Pe)]:[q.concat([de]),Pe]:[q,Pe],[[],null]);return N&&_.push(N),_}static xor(v){let _=null,N=0;const q=[],de=v.map(At=>[{time:At.s,type:"s"},{time:At.e,type:"e"}]),Pe=Array.prototype.concat(...de),tt=Pe.sort((At,tn)=>At.time-tn.time);for(const At of tt)N+=At.type==="s"?1:-1,N===1?_=At.time:(_&&+_!=+At.time&&q.push(Fr.fromDateTimes(_,At.time)),_=null);return Fr.merge(q)}difference(...v){return Fr.xor([this].concat(v)).map(_=>this.intersection(_)).filter(_=>_&&!_.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:oo}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(v=gn,_={}){return this.isValid?Xi.create(this.s.loc.clone(_),v).formatInterval(this):oo}toISO(v){return this.isValid?`${this.s.toISO(v)}/${this.e.toISO(v)}`:oo}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:oo}toISOTime(v){return this.isValid?`${this.s.toISOTime(v)}/${this.e.toISOTime(v)}`:oo}toFormat(v,{separator:_=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(v)}${_}${this.e.toFormat(v)}`:oo}toDuration(v,_){return this.isValid?this.e.diff(this.s,v,_):ti.invalid(this.invalidReason)}mapEndpoints(v){return Fr.fromDateTimes(v(this.s),v(this.e))}}class _s{static hasDST(v=tr.defaultZone){const _=ls.now().setZone(v).set({month:12});return!v.isUniversal&&_.offset!==_.set({month:6}).offset}static isValidIANAZone(v){return Qn.isValidZone(v)}static normalizeZone(v){return ms(v,tr.defaultZone)}static getStartOfWeek({locale:v=null,locObj:_=null}={}){return(_||bi.create(v)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:v=null,locObj:_=null}={}){return(_||bi.create(v)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:v=null,locObj:_=null}={}){return(_||bi.create(v)).getWeekendDays().slice()}static months(v="long",{locale:_=null,numberingSystem:N=null,locObj:q=null,outputCalendar:de="gregory"}={}){return(q||bi.create(_,N,de)).months(v)}static monthsFormat(v="long",{locale:_=null,numberingSystem:N=null,locObj:q=null,outputCalendar:de="gregory"}={}){return(q||bi.create(_,N,de)).months(v,!0)}static weekdays(v="long",{locale:_=null,numberingSystem:N=null,locObj:q=null}={}){return(q||bi.create(_,N,null)).weekdays(v)}static weekdaysFormat(v="long",{locale:_=null,numberingSystem:N=null,locObj:q=null}={}){return(q||bi.create(_,N,null)).weekdays(v,!0)}static meridiems({locale:v=null}={}){return bi.create(v).meridiems()}static eras(v="short",{locale:_=null}={}){return bi.create(_,null,"gregory").eras(v)}static features(){return{relative:re(),localeWeek:P()}}}function Lo(A,v){const _=q=>q.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),N=_(v)-_(A);return Math.floor(ti.fromMillis(N).as("days"))}function or(A,v,_){const N=[["years",(At,tn)=>tn.year-At.year],["quarters",(At,tn)=>tn.quarter-At.quarter+(tn.year-At.year)*4],["months",(At,tn)=>tn.month-At.month+(tn.year-At.year)*12],["weeks",(At,tn)=>{const Cr=Lo(At,tn);return(Cr-Cr%7)/7}],["days",Lo]],q={},de=A;let Pe,tt;for(const[At,tn]of N)_.indexOf(At)>=0&&(Pe=At,q[At]=tn(A,v),tt=de.plus(q),tt>v?(q[At]--,A=de.plus(q),A>v&&(tt=A,q[At]--,A=de.plus(q))):A=tt);return[A,q,tt,Pe]}function kr(A,v,_,N){let[q,de,Pe,tt]=or(A,v,_);const At=v-q,tn=_.filter(Jn=>["hours","minutes","seconds","milliseconds"].indexOf(Jn)>=0);tn.length===0&&(Pe<v&&(Pe=q.plus({[tt]:1})),Pe!==q&&(de[tt]=(de[tt]||0)+At/(Pe-q)));const Cr=ti.fromObject(de,N);return tn.length>0?ti.fromMillis(At,N).shiftTo(...tn).plus(Cr):Cr}const zn={arab:"[\u0660-\u0669]",arabext:"[\u06F0-\u06F9]",bali:"[\u1B50-\u1B59]",beng:"[\u09E6-\u09EF]",deva:"[\u0966-\u096F]",fullwide:"[\uFF10-\uFF19]",gujr:"[\u0AE6-\u0AEF]",hanidec:"[\u3007|\u4E00|\u4E8C|\u4E09|\u56DB|\u4E94|\u516D|\u4E03|\u516B|\u4E5D]",khmr:"[\u17E0-\u17E9]",knda:"[\u0CE6-\u0CEF]",laoo:"[\u0ED0-\u0ED9]",limb:"[\u1946-\u194F]",mlym:"[\u0D66-\u0D6F]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0B66-\u0B6F]",tamldec:"[\u0BE6-\u0BEF]",telu:"[\u0C66-\u0C6F]",thai:"[\u0E50-\u0E59]",tibt:"[\u0F20-\u0F29]",latn:"\\d"},Ri={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},vo=zn.hanidec.replace(/[\[|\]]/g,"").split("");function zo(A){let v=parseInt(A,10);if(isNaN(v)){v="";for(let _=0;_<A.length;_++){const N=A.charCodeAt(_);if(A[_].search(zn.hanidec)!==-1)v+=vo.indexOf(A[_]);else for(const q in Ri){const[de,Pe]=Ri[q];N>=de&&N<=Pe&&(v+=N-de)}}return parseInt(v,10)}else return v}function Jr({numberingSystem:A},v=""){return new RegExp(`${zn[A||"latn"]}${v}`)}const oi="missing Intl.DateTimeFormat.formatToParts support";function Ti(A,v=_=>_){return{regex:A,deser:([_])=>v(zo(_))}}const Ws=`[ ${String.fromCharCode(160)}]`,eo=new RegExp(Ws,"g");function Es(A){return A.replace(/\./g,"\\.?").replace(eo,Ws)}function xs(A){return A.replace(/\./g,"").replace(eo," ").toLowerCase()}function Io(A,v){return A===null?null:{regex:RegExp(A.map(Es).join("|")),deser:([_])=>A.findIndex(N=>xs(_)===xs(N))+v}}function Li(A,v){return{regex:A,deser:([,_,N])=>ds(_,N),groups:v}}function Qa(A){return{regex:A,deser:([v])=>v}}function pu(A){return A.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function Ll(A,v){const _=Jr(v),N=Jr(v,"{2}"),q=Jr(v,"{3}"),de=Jr(v,"{4}"),Pe=Jr(v,"{6}"),tt=Jr(v,"{1,2}"),At=Jr(v,"{1,3}"),tn=Jr(v,"{1,6}"),Cr=Jr(v,"{1,9}"),Jn=Jr(v,"{2,4}"),rs=Jr(v,"{4,6}"),ir=Ba=>({regex:RegExp(pu(Ba.val)),deser:([Ou])=>Ou,literal:!0}),Pl=(Ba=>{if(A.literal)return ir(Ba);switch(Ba.val){case"G":return Io(v.eras("short"),0);case"GG":return Io(v.eras("long"),0);case"y":return Ti(tn);case"yy":return Ti(Jn,To);case"yyyy":return Ti(de);case"yyyyy":return Ti(rs);case"yyyyyy":return Ti(Pe);case"M":return Ti(tt);case"MM":return Ti(N);case"MMM":return Io(v.months("short",!0),1);case"MMMM":return Io(v.months("long",!0),1);case"L":return Ti(tt);case"LL":return Ti(N);case"LLL":return Io(v.months("short",!1),1);case"LLLL":return Io(v.months("long",!1),1);case"d":return Ti(tt);case"dd":return Ti(N);case"o":return Ti(At);case"ooo":return Ti(q);case"HH":return Ti(N);case"H":return Ti(tt);case"hh":return Ti(N);case"h":return Ti(tt);case"mm":return Ti(N);case"m":return Ti(tt);case"q":return Ti(tt);case"qq":return Ti(N);case"s":return Ti(tt);case"ss":return Ti(N);case"S":return Ti(At);case"SSS":return Ti(q);case"u":return Qa(Cr);case"uu":return Qa(tt);case"uuu":return Ti(_);case"a":return Io(v.meridiems(),0);case"kkkk":return Ti(de);case"kk":return Ti(Jn,To);case"W":return Ti(tt);case"WW":return Ti(N);case"E":case"c":return Ti(_);case"EEE":return Io(v.weekdays("short",!1),1);case"EEEE":return Io(v.weekdays("long",!1),1);case"ccc":return Io(v.weekdays("short",!0),1);case"cccc":return Io(v.weekdays("long",!0),1);case"Z":case"ZZ":return Li(new RegExp(`([+-]${tt.source})(?::(${N.source}))?`),2);case"ZZZ":return Li(new RegExp(`([+-]${tt.source})(${N.source})?`),2);case"z":return Qa(/[a-z_+-/]{1,256}?/i);case" ":return Qa(/[^\S\n\r]/);default:return ir(Ba)}})(A)||{invalidReason:oi};return Pl.token=A,Pl}const $a={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function wa(A,v,_){const{type:N,value:q}=A;if(N==="literal"){const At=/^\s+$/.test(q);return{literal:!At,val:At?" ":q}}const de=v[N];let Pe=N;N==="hour"&&(v.hour12!=null?Pe=v.hour12?"hour12":"hour24":v.hourCycle!=null?v.hourCycle==="h11"||v.hourCycle==="h12"?Pe="hour12":Pe="hour24":Pe=_.hour12?"hour12":"hour24");let tt=$a[Pe];if(typeof tt=="object"&&(tt=tt[de]),tt)return{literal:!1,val:tt}}function Ko(A){return[`^${A.map(_=>_.regex).reduce((_,N)=>`${_}(${N.source})`,"")}$`,A]}function So(A,v,_){const N=A.match(v);if(N){const q={};let de=1;for(const Pe in _)if(we(_,Pe)){const tt=_[Pe],At=tt.groups?tt.groups+1:1;!tt.literal&&tt.token&&(q[tt.token.val[0]]=tt.deser(N.slice(de,de+At))),de+=At}return[N,q]}else return[N,{}]}function Ks(A){const v=de=>{switch(de){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let _=null,N;return ei(A.z)||(_=Qn.create(A.z)),ei(A.Z)||(_||(_=new Zi(A.Z)),N=A.Z),ei(A.q)||(A.M=(A.q-1)*3+1),ei(A.h)||(A.h<12&&A.a===1?A.h+=12:A.h===12&&A.a===0&&(A.h=0)),A.G===0&&A.y&&(A.y=-A.y),ei(A.u)||(A.S=mi(A.u)),[Object.keys(A).reduce((de,Pe)=>{const tt=v(Pe);return tt&&(de[tt]=A[Pe]),de},{}),_,N]}let Ia=null;function Xa(){return Ia||(Ia=ls.fromMillis(1555555555555)),Ia}function Jl(A,v){if(A.literal)return A;const _=Xi.macroTokenToFormatOpts(A.val),N=$i(_,v);return N==null||N.includes(void 0)?A:N}function ua(A,v){return Array.prototype.concat(...A.map(_=>Jl(_,v)))}function Ea(A,v,_){const N=ua(Xi.parseFormat(_),A),q=N.map(Pe=>Ll(Pe,A)),de=q.find(Pe=>Pe.invalidReason);if(de)return{input:v,tokens:N,invalidReason:de.invalidReason};{const[Pe,tt]=Ko(q),At=RegExp(Pe,"i"),[tn,Cr]=So(v,At,tt),[Jn,rs,ir]=Cr?Ks(Cr):[null,null,void 0];if(we(Cr,"a")&&we(Cr,"H"))throw new Qt("Can't include meridiem when specifying 24-hour format");return{input:v,tokens:N,regex:At,rawMatches:tn,matches:Cr,result:Jn,zone:rs,specificOffset:ir}}}function Mt(A,v,_){const{result:N,zone:q,specificOffset:de,invalidReason:Pe}=Ea(A,v,_);return[N,q,de,Pe]}function $i(A,v){if(!A)return null;const N=Xi.create(v,A).dtFormatter(Xa()),q=N.formatToParts(),de=N.resolvedOptions();return q.map(Pe=>wa(Pe,A,de))}const Ir="Invalid DateTime",es=864e13;function Ps(A){return new bn("unsupported zone",`the zone "${A.name}" is not supported`)}function Rn(A){return A.weekData===null&&(A.weekData=Xs(A.c)),A.weekData}function Po(A){return A.localWeekData===null&&(A.localWeekData=Xs(A.c,A.loc.getMinDaysInFirstWeek(),A.loc.getStartOfWeek())),A.localWeekData}function Nr(A,v){const _={ts:A.ts,zone:A.zone,c:A.c,o:A.o,loc:A.loc,invalid:A.invalid};return new ls(qi(Jt(Jt({},_),v),{old:_}))}function cl(A,v,_){let N=A-v*60*1e3;const q=_.offset(N);if(v===q)return[N,v];N-=(q-v)*60*1e3;const de=_.offset(N);return q===de?[N,q]:[A-Math.min(q,de)*60*1e3,Math.max(q,de)]}function Ca(A,v){A+=v*60*1e3;const _=new Date(A);return{year:_.getUTCFullYear(),month:_.getUTCMonth()+1,day:_.getUTCDate(),hour:_.getUTCHours(),minute:_.getUTCMinutes(),second:_.getUTCSeconds(),millisecond:_.getUTCMilliseconds()}}function po(A,v,_){return cl(Fi(A),v,_)}function fu(A,v){const _=A.o,N=A.c.year+Math.trunc(v.years),q=A.c.month+Math.trunc(v.months)+Math.trunc(v.quarters)*3,de=qi(Jt({},A.c),{year:N,month:q,day:Math.min(A.c.day,pr(N,q))+Math.trunc(v.days)+Math.trunc(v.weeks)*7}),Pe=ti.fromObject({years:v.years-Math.trunc(v.years),quarters:v.quarters-Math.trunc(v.quarters),months:v.months-Math.trunc(v.months),weeks:v.weeks-Math.trunc(v.weeks),days:v.days-Math.trunc(v.days),hours:v.hours,minutes:v.minutes,seconds:v.seconds,milliseconds:v.milliseconds}).as("milliseconds"),tt=Fi(de);let[At,tn]=cl(tt,_,A.zone);return Pe!==0&&(At+=Pe,tn=A.zone.offset(At)),{ts:At,o:tn}}function eu(A,v,_,N,q,de){const{setZone:Pe,zone:tt}=_;if(A&&Object.keys(A).length!==0||v){const At=v||tt,tn=ls.fromObject(A,qi(Jt({},_),{zone:At,specificOffset:de}));return Pe?tn:tn.setZone(tt)}else return ls.invalid(new bn("unparsable",`the input "${q}" can't be parsed as ${N}`))}function Na(A,v,_=!0){return A.isValid?Xi.create(bi.create("en-US"),{allowZ:_,forceSimple:!0}).formatDateTimeFromString(A,v):null}function ja(A,v){const _=A.c.year>9999||A.c.year<0;let N="";return _&&A.c.year>=0&&(N+="+"),N+=jt(A.c.year,_?6:4),v?(N+="-",N+=jt(A.c.month),N+="-",N+=jt(A.c.day)):(N+=jt(A.c.month),N+=jt(A.c.day)),N}function tu(A,v,_,N,q,de){let Pe=jt(A.c.hour);return v?(Pe+=":",Pe+=jt(A.c.minute),(A.c.millisecond!==0||A.c.second!==0||!_)&&(Pe+=":")):Pe+=jt(A.c.minute),(A.c.millisecond!==0||A.c.second!==0||!_)&&(Pe+=jt(A.c.second),(A.c.millisecond!==0||!N)&&(Pe+=".",Pe+=jt(A.c.millisecond,3))),q&&(A.isOffsetFixed&&A.offset===0&&!de?Pe+="Z":A.o<0?(Pe+="-",Pe+=jt(Math.trunc(-A.o/60)),Pe+=":",Pe+=jt(Math.trunc(-A.o%60))):(Pe+="+",Pe+=jt(Math.trunc(A.o/60)),Pe+=":",Pe+=jt(Math.trunc(A.o%60)))),de&&(Pe+="["+A.zone.ianaName+"]"),Pe}const Du={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},wu={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},qo={ordinal:1,hour:0,minute:0,second:0,millisecond:0},Ya=["year","month","day","hour","minute","second","millisecond"],No=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],$l=["year","ordinal","hour","minute","second","millisecond"];function Eu(A){const v={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[A.toLowerCase()];if(!v)throw new yn(A);return v}function _a(A){switch(A.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return Eu(A)}}function Ga(A,v){const _=ms(v.zone,tr.defaultZone),N=bi.fromObject(v),q=tr.now();let de,Pe;if(ei(A.year))de=q;else{for(const tn of Ya)ei(A[tn])&&(A[tn]=Du[tn]);const tt=Qr(A)||gs(A);if(tt)return ls.invalid(tt);const At=_.offset(q);[de,Pe]=po(A,At,_)}return new ls({ts:de,zone:_,loc:N,o:Pe})}function $o(A,v,_){const N=ei(_.round)?!0:_.round,q=(Pe,tt)=>(Pe=vi(Pe,N||_.calendary?0:2,!0),v.loc.clone(_).relFormatter(_).format(Pe,tt)),de=Pe=>_.calendary?v.hasSame(A,Pe)?0:v.startOf(Pe).diff(A.startOf(Pe),Pe).get(Pe):v.diff(A,Pe).get(Pe);if(_.unit)return q(de(_.unit),_.unit);for(const Pe of _.units){const tt=de(Pe);if(Math.abs(tt)>=1)return q(tt,Pe)}return q(A>v?-0:0,_.units[_.units.length-1])}function Br(A){let v={},_;return A.length>0&&typeof A[A.length-1]=="object"?(v=A[A.length-1],_=Array.from(A).slice(0,A.length-1)):_=Array.from(A),[v,_]}class ls{constructor(v){const _=v.zone||tr.defaultZone;let N=v.invalid||(Number.isNaN(v.ts)?new bn("invalid input"):null)||(_.isValid?null:Ps(_));this.ts=ei(v.ts)?tr.now():v.ts;let q=null,de=null;if(!N)if(v.old&&v.old.ts===this.ts&&v.old.zone.equals(_))[q,de]=[v.old.c,v.old.o];else{const tt=_.offset(this.ts);q=Ca(this.ts,tt),N=Number.isNaN(q.year)?new bn("invalid input"):null,q=N?null:q,de=N?null:tt}this._zone=_,this.loc=v.loc||bi.create(),this.invalid=N,this.weekData=null,this.localWeekData=null,this.c=q,this.o=de,this.isLuxonDateTime=!0}static now(){return new ls({})}static local(){const[v,_]=Br(arguments),[N,q,de,Pe,tt,At,tn]=_;return Ga({year:N,month:q,day:de,hour:Pe,minute:tt,second:At,millisecond:tn},v)}static utc(){const[v,_]=Br(arguments),[N,q,de,Pe,tt,At,tn]=_;return v.zone=Zi.utcInstance,Ga({year:N,month:q,day:de,hour:Pe,minute:tt,second:At,millisecond:tn},v)}static fromJSDate(v,_={}){const N=na(v)?v.valueOf():NaN;if(Number.isNaN(N))return ls.invalid("invalid input");const q=ms(_.zone,tr.defaultZone);return q.isValid?new ls({ts:N,zone:q,loc:bi.fromObject(_)}):ls.invalid(Ps(q))}static fromMillis(v,_={}){if(Rs(v))return v<-es||v>es?ls.invalid("Timestamp out of range"):new ls({ts:v,zone:ms(_.zone,tr.defaultZone),loc:bi.fromObject(_)});throw new ii(`fromMillis requires a numerical input, but received a ${typeof v} with value ${v}`)}static fromSeconds(v,_={}){if(Rs(v))return new ls({ts:v*1e3,zone:ms(_.zone,tr.defaultZone),loc:bi.fromObject(_)});throw new ii("fromSeconds requires a numerical input")}static fromObject(v,_={}){v=v||{};const N=ms(_.zone,tr.defaultZone);if(!N.isValid)return ls.invalid(Ps(N));const q=bi.fromObject(_),de=nr(v,_a),{minDaysInFirstWeek:Pe,startOfWeek:tt}=os(de,q),At=tr.now(),tn=ei(_.specificOffset)?N.offset(At):_.specificOffset,Cr=!ei(de.ordinal),Jn=!ei(de.year),rs=!ei(de.month)||!ei(de.day),ir=Jn||rs,mo=de.weekYear||de.weekNumber;if((ir||Cr)&&mo)throw new Qt("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(rs&&Cr)throw new Qt("Can't mix ordinal dates with month/day");const Pl=mo||de.weekday&&!ir;let Ba,Ou,ku=Ca(At,tn);Pl?(Ba=No,Ou=wu,ku=Xs(ku,Pe,tt)):Cr?(Ba=$l,Ou=qo,ku=Kr(ku)):(Ba=Ya,Ou=Du);let dh=!1;for(const ph of Ba){const Pp=de[ph];ei(Pp)?dh?de[ph]=Ou[ph]:de[ph]=ku[ph]:dh=!0}const Re=Pl?js(de,Pe,tt):Cr?dr(de):Qr(de),jn=Re||gs(de);if(jn)return ls.invalid(jn);const bo=Pl?Ts(de,Pe,tt):Cr?hs(de):de,[Tc,lu]=po(bo,tn,N),Gc=new ls({ts:Tc,zone:N,o:lu,loc:q});return de.weekday&&ir&&v.weekday!==Gc.weekday?ls.invalid("mismatched weekday",`you can't specify both a weekday of ${de.weekday} and a date of ${Gc.toISO()}`):Gc}static fromISO(v,_={}){const[N,q]=yi(v);return eu(N,q,_,"ISO 8601",v)}static fromRFC2822(v,_={}){const[N,q]=gi(v);return eu(N,q,_,"RFC 2822",v)}static fromHTTP(v,_={}){const[N,q]=Wi(v);return eu(N,q,_,"HTTP",_)}static fromFormat(v,_,N={}){if(ei(v)||ei(_))throw new ii("fromFormat requires an input string and a format");const{locale:q=null,numberingSystem:de=null}=N,Pe=bi.fromOpts({locale:q,numberingSystem:de,defaultToEN:!0}),[tt,At,tn,Cr]=Mt(Pe,v,_);return Cr?ls.invalid(Cr):eu(tt,At,N,`format ${_}`,v,tn)}static fromString(v,_,N={}){return ls.fromFormat(v,_,N)}static fromSQL(v,_={}){const[N,q]=Tr(v);return eu(N,q,_,"SQL",v)}static invalid(v,_=null){if(!v)throw new ii("need to specify a reason the DateTime is invalid");const N=v instanceof bn?v:new bn(v,_);if(tr.throwOnInvalid)throw new It(N);return new ls({invalid:N})}static isDateTime(v){return v&&v.isLuxonDateTime||!1}static parseFormatForOpts(v,_={}){const N=$i(v,bi.fromObject(_));return N?N.map(q=>q?q.val:null).join(""):null}static expandFormat(v,_={}){return ua(Xi.parseFormat(v),bi.fromObject(_)).map(q=>q.val).join("")}get(v){return this[v]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Rn(this).weekYear:NaN}get weekNumber(){return this.isValid?Rn(this).weekNumber:NaN}get weekday(){return this.isValid?Rn(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?Po(this).weekday:NaN}get localWeekNumber(){return this.isValid?Po(this).weekNumber:NaN}get localWeekYear(){return this.isValid?Po(this).weekYear:NaN}get ordinal(){return this.isValid?Kr(this.c).ordinal:NaN}get monthShort(){return this.isValid?_s.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?_s.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?_s.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?_s.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const v=864e5,_=6e4,N=Fi(this.c),q=this.zone.offset(N-v),de=this.zone.offset(N+v),Pe=this.zone.offset(N-q*_),tt=this.zone.offset(N-de*_);if(Pe===tt)return[this];const At=N-Pe*_,tn=N-tt*_,Cr=Ca(At,Pe),Jn=Ca(tn,tt);return Cr.hour===Jn.hour&&Cr.minute===Jn.minute&&Cr.second===Jn.second&&Cr.millisecond===Jn.millisecond?[Nr(this,{ts:At}),Nr(this,{ts:tn})]:[this]}get isInLeapYear(){return ws(this.year)}get daysInMonth(){return pr(this.year,this.month)}get daysInYear(){return this.isValid?ho(this.year):NaN}get weeksInWeekYear(){return this.isValid?so(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?so(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(v={}){const{locale:_,numberingSystem:N,calendar:q}=Xi.create(this.loc.clone(v),v).resolvedOptions(this);return{locale:_,numberingSystem:N,outputCalendar:q}}toUTC(v=0,_={}){return this.setZone(Zi.instance(v),_)}toLocal(){return this.setZone(tr.defaultZone)}setZone(v,{keepLocalTime:_=!1,keepCalendarTime:N=!1}={}){if(v=ms(v,tr.defaultZone),v.equals(this.zone))return this;if(v.isValid){let q=this.ts;if(_||N){const de=v.offset(this.ts),Pe=this.toObject();[q]=po(Pe,de,v)}return Nr(this,{ts:q,zone:v})}else return ls.invalid(Ps(v))}reconfigure({locale:v,numberingSystem:_,outputCalendar:N}={}){const q=this.loc.clone({locale:v,numberingSystem:_,outputCalendar:N});return Nr(this,{loc:q})}setLocale(v){return this.reconfigure({locale:v})}set(v){if(!this.isValid)return this;const _=nr(v,_a),{minDaysInFirstWeek:N,startOfWeek:q}=os(_,this.loc),de=!ei(_.weekYear)||!ei(_.weekNumber)||!ei(_.weekday),Pe=!ei(_.ordinal),tt=!ei(_.year),At=!ei(_.month)||!ei(_.day),tn=tt||At,Cr=_.weekYear||_.weekNumber;if((tn||Pe)&&Cr)throw new Qt("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(At&&Pe)throw new Qt("Can't mix ordinal dates with month/day");let Jn;de?Jn=Ts(Jt(Jt({},Xs(this.c,N,q)),_),N,q):ei(_.ordinal)?(Jn=Jt(Jt({},this.toObject()),_),ei(_.day)&&(Jn.day=Math.min(pr(Jn.year,Jn.month),Jn.day))):Jn=hs(Jt(Jt({},Kr(this.c)),_));const[rs,ir]=po(Jn,this.o,this.zone);return Nr(this,{ts:rs,o:ir})}plus(v){if(!this.isValid)return this;const _=ti.fromDurationLike(v);return Nr(this,fu(this,_))}minus(v){if(!this.isValid)return this;const _=ti.fromDurationLike(v).negate();return Nr(this,fu(this,_))}startOf(v,{useLocaleWeeks:_=!1}={}){if(!this.isValid)return this;const N={},q=ti.normalizeUnit(v);switch(q){case"years":N.month=1;case"quarters":case"months":N.day=1;case"weeks":case"days":N.hour=0;case"hours":N.minute=0;case"minutes":N.second=0;case"seconds":N.millisecond=0;break;case"milliseconds":break}if(q==="weeks")if(_){const de=this.loc.getStartOfWeek(),{weekday:Pe}=this;Pe<de&&(N.weekNumber=this.weekNumber-1),N.weekday=de}else N.weekday=1;if(q==="quarters"){const de=Math.ceil(this.month/3);N.month=(de-1)*3+1}return this.set(N)}endOf(v,_){return this.isValid?this.plus({[v]:1}).startOf(v,_).minus(1):this}toFormat(v,_={}){return this.isValid?Xi.create(this.loc.redefaultToEN(_)).formatDateTimeFromString(this,v):Ir}toLocaleString(v=gn,_={}){return this.isValid?Xi.create(this.loc.clone(_),v).formatDateTime(this):Ir}toLocaleParts(v={}){return this.isValid?Xi.create(this.loc.clone(v),v).formatDateTimeParts(this):[]}toISO({format:v="extended",suppressSeconds:_=!1,suppressMilliseconds:N=!1,includeOffset:q=!0,extendedZone:de=!1}={}){if(!this.isValid)return null;const Pe=v==="extended";let tt=ja(this,Pe);return tt+="T",tt+=tu(this,Pe,_,N,q,de),tt}toISODate({format:v="extended"}={}){return this.isValid?ja(this,v==="extended"):null}toISOWeekDate(){return Na(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:v=!1,suppressSeconds:_=!1,includeOffset:N=!0,includePrefix:q=!1,extendedZone:de=!1,format:Pe="extended"}={}){return this.isValid?(q?"T":"")+tu(this,Pe==="extended",_,v,N,de):null}toRFC2822(){return Na(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Na(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?ja(this,!0):null}toSQLTime({includeOffset:v=!0,includeZone:_=!1,includeOffsetSpace:N=!0}={}){let q="HH:mm:ss.SSS";return(_||v)&&(N&&(q+=" "),_?q+="z":v&&(q+="ZZ")),Na(this,q,!0)}toSQL(v={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(v)}`:null}toString(){return this.isValid?this.toISO():Ir}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(v={}){if(!this.isValid)return{};const _=Jt({},this.c);return v.includeConfig&&(_.outputCalendar=this.outputCalendar,_.numberingSystem=this.loc.numberingSystem,_.locale=this.loc.locale),_}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(v,_="milliseconds",N={}){if(!this.isValid||!v.isValid)return ti.invalid("created by diffing an invalid DateTime");const q=Jt({locale:this.locale,numberingSystem:this.numberingSystem},N),de=V(_).map(ti.normalizeUnit),Pe=v.valueOf()>this.valueOf(),tt=Pe?this:v,At=Pe?v:this,tn=kr(tt,At,de,q);return Pe?tn.negate():tn}diffNow(v="milliseconds",_={}){return this.diff(ls.now(),v,_)}until(v){return this.isValid?Fr.fromDateTimes(this,v):this}hasSame(v,_,N){if(!this.isValid)return!1;const q=v.valueOf(),de=this.setZone(v.zone,{keepLocalTime:!0});return de.startOf(_,N)<=q&&q<=de.endOf(_,N)}equals(v){return this.isValid&&v.isValid&&this.valueOf()===v.valueOf()&&this.zone.equals(v.zone)&&this.loc.equals(v.loc)}toRelative(v={}){if(!this.isValid)return null;const _=v.base||ls.fromObject({},{zone:this.zone}),N=v.padding?this<_?-v.padding:v.padding:0;let q=["years","months","days","hours","minutes","seconds"],de=v.unit;return Array.isArray(v.unit)&&(q=v.unit,de=void 0),$o(_,this.plus(N),qi(Jt({},v),{numeric:"always",units:q,unit:de}))}toRelativeCalendar(v={}){return this.isValid?$o(v.base||ls.fromObject({},{zone:this.zone}),this,qi(Jt({},v),{numeric:"auto",units:["years","months","days"],calendary:!0})):null}static min(...v){if(!v.every(ls.isDateTime))throw new ii("min requires all arguments be DateTimes");return Y(v,_=>_.valueOf(),Math.min)}static max(...v){if(!v.every(ls.isDateTime))throw new ii("max requires all arguments be DateTimes");return Y(v,_=>_.valueOf(),Math.max)}static fromFormatExplain(v,_,N={}){const{locale:q=null,numberingSystem:de=null}=N,Pe=bi.fromOpts({locale:q,numberingSystem:de,defaultToEN:!0});return Ea(Pe,v,_)}static fromStringExplain(v,_,N={}){return ls.fromFormatExplain(v,_,N)}static get DATE_SHORT(){return gn}static get DATE_MED(){return Si}static get DATE_MED_WITH_WEEKDAY(){return Ii}static get DATE_FULL(){return Un}static get DATE_HUGE(){return $t}static get TIME_SIMPLE(){return qt}static get TIME_WITH_SECONDS(){return mr}static get TIME_WITH_SHORT_OFFSET(){return ss}static get TIME_WITH_LONG_OFFSET(){return Dr}static get TIME_24_SIMPLE(){return zs}static get TIME_24_WITH_SECONDS(){return pi}static get TIME_24_WITH_SHORT_OFFSET(){return vs}static get TIME_24_WITH_LONG_OFFSET(){return uo}static get DATETIME_SHORT(){return cs}static get DATETIME_SHORT_WITH_SECONDS(){return wr}static get DATETIME_MED(){return jr}static get DATETIME_MED_WITH_SECONDS(){return vr}static get DATETIME_MED_WITH_WEEKDAY(){return qs}static get DATETIME_FULL(){return Is}static get DATETIME_FULL_WITH_SECONDS(){return ci}static get DATETIME_HUGE(){return le}static get DATETIME_HUGE_WITH_SECONDS(){return $e}}function Ka(A){if(ls.isDateTime(A))return A;if(A&&A.valueOf&&Rs(A.valueOf()))return ls.fromJSDate(A);if(A&&typeof A=="object")return ls.fromObject(A);throw new ii(`Unknown datetime argument: ${A}, of type ${typeof A}`)}const Cl="3.4.4";var Va=dn(32552),Cs=dn(41691),Ji=dn(14224);const nu=120,Hs=121,yl=122,ra=123,Cu=127,iu=4,Bu=130,ru=7,jl=8,Ru=9,Yr=10,d=138,a=19,m=139,S=23,$=140,ne=27,ve=37,qe=41,ct=144,at=145,On=146,ui=147,Yi=47,ji=67,Ls=152,Zs=69,ea=153,sa=71,Pa=154,Lu=75,Vl=159,Ju=78,Su=79,Sc=80,mu=165,rl=88,$u=89,Sl=167,ju=96,hl=169,lc=97,Za=99,gc=100,uc=typeof Ji!="undefined"&&{NODE_ENV:"production",PUBLIC_PATH:"/"}&&/\bfparse(:dbg)?\b/.test({NODE_ENV:"production",PUBLIC_PATH:"/"}.LOG),O=typeof Ji!="undefined"&&{NODE_ENV:"production",PUBLIC_PATH:"/"}&&/\bfparse:dbg\b/.test({NODE_ENV:"production",PUBLIC_PATH:"/"}.LOG),H=typeof Ji!="undefined"&&{NODE_ENV:"production",PUBLIC_PATH:"/"}&&/\bcontext\b/.test({NODE_ENV:"production",PUBLIC_PATH:"/"}.LOG),se=[9,11,12,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],ge=ot(`
\r`),ue="*".charCodeAt(0),be=ot("'./-+*^");function ot(A){return Array.from(A).map(v=>v.charCodeAt(0))}function _t(A){return A===63||A>=65&&A<=90||A===95||A>=97&&A<=122||A>=192&&A<=214||A>=216&&A<=246||A>=248&&A<=767||A>=880&&A<=893||A>=895&&A<=8191||A>=8204&&A<=8205||A>=8304&&A<=8591||A>=11264&&A<=12271||A>=12289&&A<=55295||A>=63744&&A<=64975||A>=65008&&A<=65533||A>=55296&&A<=56319||A>=56320&&A<=57343}function Rt(A){return be.includes(A)}function an(A){return A>=48&&A<=57||A===183||A>=768&&A<=879||A>=8255&&A<=8256}function Gt(A){return se.includes(A)}function Ln(A,v){return v.concat(A.split(/\n/g).join(`
`+v))}function Dn(A,v=0){const _=A.peek(v);return _===ue&&A.peek(v+1)===ue?{offset:2,token:"**"}:Rt(_)?{offset:1,token:String.fromCharCode(_)}:null}function nn(A,v=0,_=!1){for(let N=!1,q=[],de=0;;de++){const Pe=A.peek(v+de);if(_t(Pe)||(N||_)&&an(Pe))N||(N=!0),q.push(Pe);else return q.length?{token:String.fromCharCode(...q),offset:de}:null}}function An(A,v){for(let _=!1,N=0;;N++){let q=A.peek(v+N);if(Gt(q))_||(_=!0);else return _?{token:" ",offset:N}:null}}function ni(A,v){const _=v.contextKeys(),N=v.tokens;for(let q=0,de=[],Pe=null;;){const tt=N.length+de.length>0,At=de.length>0,tn=nn(A,q,tt)||tt&&Dn(A,q)||At&&An(A,q);if(!tn)return Pe;const{token:Cr,offset:Jn}=tn;if(q+=Jn,Cr===" ")continue;de=[...de,Cr];const rs=[...N,...de].join(" ");if(_.some(ir=>ir===rs)){const ir=de[0];Pe={token:ir,offset:ir.length,term:yl}}if(!_.some(ir=>ir.startsWith(rs))){if(dl.some(ir=>ir===rs)){const ir=de[0];Pe={token:ir,offset:ir.length,term:Hs}}if(!dl.some(ir=>ir.startsWith(rs)))return Pe}}}const er={[Hs]:"identifier",[yl]:"nameIdentifier"},yr=new Va.Jq((A,v)=>{O&&console.log("%s: T <identifier | nameIdentifier>",A.pos);const _=ni(A,v.context),N=v.context.tokens,q=_||nn(A,0,N.length>0);q&&(A.advance(q.offset),A.acceptToken(_?_.term:Hs),uc&&console.log("%s: MATCH <%s> <%s>",A.pos,_?er[_.term]:"identifier",q.token))},{contextual:!0}),Er=new Va.Jq((A,v)=>{O&&console.log("%s: T <propertyIdentifier>",A.pos);const _=v.context.tokens,N=nn(A,0,_.length>0);N&&(A.advance(N.offset),A.acceptToken(nu),uc&&console.log("%s: MATCH <propertyIdentifier> <%s>",A.pos,N.token))}),ys=new Va.Jq((A,v)=>{O&&console.log("%s: T <insertSemi>",A.pos);let _,N=!1;for(_=0;;_++){const q=A.peek(_);if(!se.includes(q)){ge.includes(q)&&(N=!0);break}}if(N){const q=nn(A,_+1);if(An(A,_+1)||q&&/^(then|else|return|satisfies)$/.test(q.token))return;uc&&console.log("%s: MATCH <insertSemi>",A.pos),A.acceptToken(ra)}}),Ns={[Pa]:"FunctionInvocation",[ea]:"FilterExpression",[Ls]:"PathExpression"},ao={[hl]:"Context",[Sl]:"FunctionDefinition",[Bu]:"ForExpression",[mu]:"List",[m]:"IfExpression",[$]:"QuantifiedExpression"},Bo={[ju]:"Context",[$u]:"FunctionDefinition",[iu]:"ForExpression",[rl]:"List",[a]:"IfExpression",[S]:"QuantifiedExpression",[ji]:"PathExpression",[sa]:"FunctionInvocation",[Zs]:"FilterExpression",[qe]:"ArithmeticExpression"};class to{constructor(v){this.fn=v}get(v){return this.fn(v)}static of(v){return new to(v)}}const dl=Object.keys({"date and time":1,date:1,time:1,duration:1});class Al{constructor(v={}){this.value=v}getKeys(){return Object.keys(this.value)}get(v){const _=this.value[v],N=this.constructor;return N.isAtomic(_)?_:N.of(_)}set(v,_){return this.constructor.of(qi(Jt({},this.value),{[v]:_}))}static isAtomic(v){return!v||v instanceof this||v instanceof to||typeof v!="object"}static of(...v){const _=q=>!q||typeof q!="object"?{}:q instanceof this?q.value:Jt({},q),N=v.reduce((q,de)=>Jt(Jt({},q),_(de)),{});return new this(N)}}class Fo{constructor({name:v="Expressions",tokens:_=[],children:N=[],parent:q=null,context:de=null,value:Pe=null,raw:tt=null}={}){this.name=v,this.tokens=_,this.children=N,this.parent=q,this.context=de,this.value=Pe,this.raw=tt}enterScope(v){const _=this.of({name:v,parent:this});return H&&console.log("[%s] enter",_.path,_.context),_}exitScope(v){return this.parent?(H&&console.log(`[%s] exit %o
%s`,this.path,this.context,Ln(v,"  ")),this.parent.pushChild(this)):(H&&console.log(`[%s] NO exit %o
%s`,this.path,this.context,Ln(v,"  ")),this)}token(v){return H&&console.log("[%s] token <%s> + <%s>",this.path,this.tokens.join(" "),v),this.assign({tokens:[...this.tokens,v]})}literal(v){return H&&console.log("[%s] literal %o",this.path,v),this.pushChild(this.of({name:"Literal",value:v}))}computedValue(){for(let v=this;;v=Tl(v.children)){if(!v)return null;if(v.value)return v.value}}contextKeys(){return this.context.getKeys().map(ga)}get path(){var v,_;return((_=(v=this.parent)==null?void 0:v.path)==null?void 0:_.concat(" > ",this.name))||this.name}get(v){const _=[v,v&&ga(v)],N=this.context.getKeys().find(de=>_.includes(ga(de)));if(typeof N=="undefined")return;const q=this.context.get(N);return q instanceof to?q.get(this):q}resolveName(){const v=this.tokens.join(" "),_=[],N=this.assign({tokens:_}),q=this.of({name:"VariableName",parent:N,value:this.get(v),raw:v});return H&&console.log("[%s] resolve name <%s=%s>",q.path,v,this.get(v)),N.pushChild(q)}pushChild(v){if(!v)return this;const _=this.assign({children:[...this.children,v]});return v.parent=_,_}pushChildren(v){let _=this;for(const N of v)_=_.pushChild(N);return _}declareName(){if(this.tokens.length===0)throw Error("no tokens to declare name");const v=this.tokens.join(" ");return H&&console.log("[%s] declareName <%s>",this.path,v),this.assign({tokens:[]}).pushChild(this.of({name:"Name",value:v}))}define(v,_){if(typeof v!="string")return H&&console.log("[%s] no define <%s=%s>",this.path,v,_),this;H&&console.log("[%s] define <%s=%s>",this.path,v,_);const N=this.context.set(v,_);return this.assign({context:N})}assign(v={}){return Fo.of(Jt(Jt({},this),v))}of(v={}){const _={context:this.context,parent:this.parent};return Fo.of(Jt(Jt({},_),v))}static of(v){const{name:_,tokens:N=[],children:q=[],parent:de=null,context:Pe,value:tt,raw:At}=v;if(!Pe)throw new Error("must provide <context>");return new Fo({name:_,tokens:[...N],children:[...q],context:Pe,parent:de,value:tt,raw:At})}}function ga(A){return A.replace(/\s*([./\-'+]|\*\*?)\s*/g," $1 ").replace(/\s{2,}/g," ").trim()}function Fa(A,v,_){const N=A.children.filter(tn=>tn.name!==v),q=A.children.filter(tn=>tn.name===v),de=N[0],Pe=N[Math.max(1,N.length-1)],tt=de==null?void 0:de.computedValue(),At=(Pe==null?void 0:Pe.computedValue())||null;return A.assign({children:q}).enterScope(v).pushChildren(N).exitScope(_).define(tt,At)}function xo(A={},v=Al){const _=Fo.of({context:v.of(A)});return new Va.IK({start:_,reduce(N,q,de,Pe){if(q===a){const[Jn,rs]=N.children.slice(-2);N=N.assign({value:v.of(Jn==null?void 0:Jn.computedValue(),rs==null?void 0:rs.computedValue())})}if(q===rl&&(N=N.assign({value:v.of(...N.children.map(Jn=>Jn==null?void 0:Jn.computedValue()))})),q===Zs){const[Jn,rs]=N.children.slice(-2);N=N.assign({value:Jn==null?void 0:Jn.computedValue()})}if(q===sa){const[Jn,...rs]=N.children;(Jn==null?void 0:Jn.raw)==="get value"&&(N=cc(N,rs))}const tt=ao[q];if(tt)return N.enterScope(tt);const At=Ns[q];if(At){const{children:Jn,context:rs}=N,ir=Jn.slice(0,-1),mo=Tl(Jn);let Pl=null;return q===Ls&&(Pl=v.of(mo==null?void 0:mo.computedValue())),q===ea&&(Pl=v.of(rs,mo==null?void 0:mo.computedValue()).set("item",mo==null?void 0:mo.computedValue())),N.assign({children:ir}).enterScope(At).pushChild(mo).assign({context:Pl||rs})}const tn=Pe.read(Pe.pos,de.pos);if(Bo[q])return N.exitScope(tn);if(q===lc){const Jn=N.children.filter(mo=>mo.name!=="ContextEntry"),rs=Jn[0],ir=Tl(Jn);return Fa(N,"ContextEntry",tn).assign({value:v.of(N.value).set(rs==null?void 0:rs.computedValue(),ir==null?void 0:ir.computedValue())})}if(q===ru||q===ne)return Fa(N,"InExpression",tn);if(q===d)return N.define("partial",to.of(Jn=>{var rs;return(rs=Tl(Jn.children))==null?void 0:rs.computedValue()}));if(q===Lu){const Jn=Tl(N.children).computedValue();return N.define(Jn,1)}if(q===ct||q===at||q===On){const Jn=N.children.slice(0,-1),rs=Tl(N.children);return N.assign({children:Jn}).enterScope("ArithmeticExpression").pushChild(rs)}if(q===ui)return N.enterScope("ArithmeticExpression");if(q===Ru||q===Yr||q===gc)return N.token(tn);if(q===Su)return N.literal(tn.replace(/^"|"$/g,""));if(q===Sc)return N.literal(tn==="true");if(q===Ju)return N.literal(parseFloat(tn));if(q===Vl)return N.literal(null);if(q===Yi)return N.resolveName();if(q===jl||q===Za)return N.declareName();if((q===Cu||q===ve)&&N.tokens.length>0)throw new Error("uncleared name");if(q===Cu){let Jn=N;for(;Jn.parent;)Jn=Jn.exitScope(tn);return Jn}return N}})}const vl=xo({});function cc(A,v){if(!v.length)return A.assign({value:null});if(v[0].name==="Name"&&(v=su(v,["m","key"])),v.length!==2)return A.assign({value:null});const[_,N]=v,q=N==null?void 0:N.computedValue(),de=_==null?void 0:_.computedValue();return!de||typeof de!="object"||typeof q!="string"?A.assign({value:null}):A.assign({value:[ga(q),q].reduce((Pe,tt)=>de.get(tt)||Pe,null)})}function su(A,v){const _={};for(let N=0;N<A.length;N+=2){const[q,de]=A.slice(N,N+2);_[q.value]=de}return v.map(N=>_[N])}function Tl(A){return A[A.length-1]}const ec=(0,Cs.Gv)({StringLiteral:Cs.pJ.string,NumericLiteral:Cs.pJ.number,BooleanLiteral:Cs.pJ.bool,"AtLiteral!":Cs.pJ.special(Cs.pJ.string),CompareOp:Cs.pJ.compareOperator,ArithOp:Cs.pJ.arithmeticOperator,"for if then else some every satisfies between return":Cs.pJ.controlKeyword,"in instance of and or":Cs.pJ.operatorKeyword,function:Cs.pJ.definitionKeyword,as:Cs.pJ.keyword,"Type/...":Cs.pJ.typeName,Wildcard:Cs.pJ.special(Cs.pJ.variableName),null:Cs.pJ.null,LineComment:Cs.pJ.lineComment,BlockComment:Cs.pJ.blockComment,'VariableName! "?"':Cs.pJ.variableName,"DateTimeConstructor! SpecialFunctionName!":Cs.pJ.function(Cs.pJ.special(Cs.pJ.variableName)),"List Interval":Cs.pJ.list,Context:Cs.pJ.definition(Cs.pJ.literal),"Name!":Cs.pJ.definition(Cs.pJ.variableName),"Key/Name! ContextEntryType/Name!":Cs.pJ.definition(Cs.pJ.propertyName),"PathExpression/VariableName!":Cs.pJ.function(Cs.pJ.propertyName),"FormalParameter/ParameterName!":Cs.pJ.function(Cs.pJ.definition(Cs.pJ.variableName)),"( )":Cs.pJ.paren,"[ ]":Cs.pJ.squareBracket,"{ }":Cs.pJ.brace,".":Cs.pJ.derefOperator,", ;":Cs.pJ.separator,"..":Cs.pJ.punctuation}),Ol={__proto__:null,for:10,in:32,return:36,if:40,then:42,else:44,some:48,every:50,satisfies:56,or:60,and:64,between:72,instance:86,of:89,days:99,time:101,duration:103,years:105,months:107,date:109,list:115,context:121,function:128,null:154,true:326,false:326,"?":168,external:184,not:209},gu=Va.WQ.deserialize({version:14,states:"CpO`QYOOO`QYOOO$gQYOOOOQU'#Ce'#CeO$qQYO'#C`O%zQYO'#FPOOQQ'#Fe'#FeO&UQYO'#FeO`QYO'#DVOOQU'#Em'#EmO'rQ^O'#D]OOQO'#Fl'#FlO)oQWO'#DuOOQQ'#D|'#D|OOQQ'#D}'#D}OOQQ'#EO'#EOO)tOWO'#ERO)oQWO'#EPOOQQ'#EP'#EPOOQQ'#Fr'#FrOOQQ'#Fp'#FpOOQQ'#Fw'#FwOOQQ'#ET'#ETO`QYO'#EVOOQQ'#FR'#FRO)yQ^O'#FRO+pQYO'#EWO+wQWO'#EXOOQP'#F{'#F{O+|QXO'#E`OOQQ'#Fx'#FxOOQQ'#FQ'#FQQOQWOOOOQQ'#FS'#FSOOQQ'#F]'#F]O`QYO'#CoOOQQ'#F^'#F^O$qQYO'#CsO,XQYO'#DvOOQQ'#Fq'#FqO,^QYO'#EQOOQO'#EQ'#EQO`QYO'#EUO`QYO'#ETOOQO'#Fy'#FyQ,fQWOOO,kQYO'#DRO-bQWO'#FaOOQO'#DT'#DTO-mQYO'#FeO-tQWOOO.kQYO'#CdO.xQYO'#FUOOQQ'#Cc'#CcO.}QYO'#FTOOQQ'#Cb'#CbO/VQYO,58zO`QYO,59iOOQQ'#Fb'#FbOOQQ'#Fc'#FcOOQQ'#Fd'#FdO`QYO,59qO`QYO,59qO`QYO,59qOOQQ'#Fj'#FjO$qQYO,5:]OOQQ'#Fk'#FkO`QYO,5:_O`QYO,59eO`QYO,59gO`QYO,59iO0uQYO,59iO0|QYO,59rOOQQ,5:h,5:hO1RQYO,59qOOQU-E8k-E8kO2uQYO'#FmOOQQ,5:a,5:aOOQQ,5:m,5:mOOQQ,5:k,5:kO2|QYO,5:qOOQQ,5;m,5;mO3WQYO,5:pO3eQWO,5:rO3jQYO,5:sOOQP'#Ed'#EdO4aQXO'#EcOOQO'#Eb'#EbO4hQWO'#EaO4mQWO'#F|O4uQWO,5:zO4zQYO,59ZO.xQYO'#F`OOQQ'#Cw'#CwO5RQYO'#F_OOQQ'#Cv'#CvO5ZQYO,59_O5`QYO,5:bO5eQYO,5:lO3PQYO,5:pO5jQYO,5:oO`QYO'#EvQ,fQWOOO`QYO'#ElO6aQWO,5;{O`QYOOOOQR'#Cf'#CfOOQQ'#Ei'#EiO7ZQYO,59OO`QYO,5;pOOQQ'#FX'#FXO$qQYO'#EjO7kQYO,5;oO`QYO1G.fOOQQ'#F['#F[O8bQYO1G/TO;XQYO1G/]O;cQYO1G/]O;mQYO1G/]OOQQ1G/w1G/wO=aQYO1G/yO=hQYO1G/PO>qQYO1G/RO?zQYO1G/TO`QYO1G/TOOQQ1G/T1G/TO@bQYO1G/^O@|Q^O'#CdOB`QYO'#FoOOQO'#Dy'#DyOBjQWO'#DxOBoQWO'#FnOOQO'#Dw'#DwOOQO'#Dz'#DzOBwQWO,5<XOOQQ1G0]1G0]O`QYO1G0[O`QYO'#ErOB|QWO,5<ZOOQQ1G0^1G0^OCXQWO'#EZOCdQWO'#FzOOQO'#EY'#EYOClQWO1G0_OOQP'#Et'#EtOCqQXO,5:}O`QYO,5:{OCxQXO'#EuODQQWO,5<hOOQQ1G0f1G0fO`QYO1G.uO`QYO,5;zO$qQYO'#EkODYQYO,5;yO`QYO1G.yODbQYO1G/|OOQO1G0W1G0WOOQO,5;b,5;bOOQO-E8t-E8tOOQO,5;W,5;WOOQO-E8j-E8jODgQWOOOOQQ-E8g-E8gODlQYO'#CmOOQQ1G1[1G1[OOQQ,5;U,5;UOOQQ-E8h-E8hODyQYO7+$QOOQQ7+%e7+%eO`QYO7+$oOEpQYO,5:qOE}QWO7+$oOFSQYO'#D[OOQQ'#DZ'#DZOGvQYO'#D^OG{QYO'#D^OHQQYO'#D^OHVQ`O'#DfOH[Q`O'#DiOHaQ`O'#DmOOQQ7+$x7+$xO`QYO,5:dO$qQYO'#EqOHfQWO,5<YOOQQ1G1s1G1sOIlQYO7+%vOIyQYO,5;^OOQO-E8p-E8pO@bQYO,5:uO$qQYO'#EsOJWQWO,5<fOJ`QYO7+%yOOQP-E8r-E8rOJgQYO1G0gOOQO,5;a,5;aOOQO-E8s-E8sOJqQYO7+$aOJxQYO1G1fOOQQ,5;V,5;VOOQQ-E8i-E8iOKSQYO7+$eOOQO7+%h7+%hO`QYO,59XOKyQYO<<HZOOQQ<<HZ<<HZO$qQYO'#EnOMSQYO,59vONvQYO,59xON{QYO,59xO! QQYO,59xO! VQYO,5:QO$qQYO,5:TO! qQbO,5:XO! xQYO1G0OOOQO,5;],5;]OOQO-E8o-E8oO!!SQYO<<IbOOQQ<<Ib<<IbOOQO1G0a1G0aOOQO,5;_,5;_OOQO-E8q-E8qO!%OQYO'#E]OOQQ<<Ie<<IeO`QYO<<IeO`QYO<<G{O!%uQYO1G.sOOQQ,5;Y,5;YOOQQ-E8l-E8lO!&PQYO1G/dOOQQ1G/d1G/dO!&UQbO'#D]O!&gQ`O'#D[O!&rQ`O1G/lO!&wQWO'#DlO!&|Q`O'#FfOOQO'#Dk'#DkO!'UQ`O1G/oOOQO'#Dp'#DpO!'ZQ`O'#FhOOQO'#Do'#DoO!'cQ`O1G/sOOQQAN?PAN?PO!'hQYOAN=gOOQQ7+%O7+%OO!(_Q`O,59vOOQQ7+%W7+%WO! VQYO,5:WO$qQYO'#EoO!(jQ`O,5<QOOQQ7+%Z7+%ZO! VQYO'#EpO!(rQ`O,5<SO!(zQ`O7+%_OOQO1G/r1G/rOOQO,5;Z,5;ZOOQO-E8m-E8mOOQO,5;[,5;[OOQO-E8n-E8nO@bQYO<<HyOOQQAN>eAN>eO$qQYO'#EnO! VQYO<<HyO!)PQ`O7+%_O!)UQ`O1G/sO! qQbO,5:XO!)ZQ`O'#Dm",stateData:"!)h~O#qOS#rOSPOSQOS~OTqOZVO[UOdrOhtOitOs{OvgO!SyO!TyO!UvO!WxO!b|O!fzO!heO!owO!vhO#RlO#mRO#nRO$g]O$h^O$i_O$j`O~OTqO[UOdrOhtOitOs{OvgO!SyO!TyO!UvO!WxO!b|O!fzO!heO!owO!vhO#RlO#mRO#nRO$g]O$h^O$i_O$j`O~OZ!RO#[!SO~P!|O#mRO#nRO~OZ![O[![O]!]O^!]O_!^O`!iOn!fOp!gOr!ZOs!ZOt!hO{!jO!h!dO#y!bOv$`X~O#k#sX$q#sX~P$yO$g!kOT$XXZ$XX[$XXd$XXh$XXi$XXs$XXv$XX!S$XX!T$XX!U$XX!W$XX!b$XX!f$XX!h$XX!o$XX!v$XX#R$XX#m$XX#n$XX$h$XX$i$XX$j$XX~O#mRO#nROZ!PX[!PX]!PX^!PX_!PX`!PXn!PXp!PXr!PXs!PXt!PXv!PX{!PX!h!PX#k!PX#o!PX#y!PX$q!PX#}!PXx!PX#|!PX!f!PXe!PXb!PX#Q!PXf!PXl!PX~Ov!nO~O$h^O~O#o!sOZ#uX[#uX]#uX^#uX_#uX`#uXn#uXp#uXr#uXs#uXt#uXv#uX{#uX!h#uX#k#uX#y#uX$q#uX#}#uXx#uX#|#uX!f#uXe#uXb#uX#Q#uXf#uXl#uX~O!f$cP~P`Ov!vO~O#l!wO$h^O#Q$pP~Op#TO~Op#UOv!tX~O$q#XO~O#kuX#}uX$quXxuX#|uX!fuXeuXbuX#QuXfuXluX~P$yO#}#ZO#k$TXx$TX~O#k#ZX~P&UOv#]O~OZ#^O[#^O]#^O^#^O_#^O#mRO#nRO#y#^O#z#^O$ZWX~O`WXxWX#}WX~P-yO`#bO~O#}#cOb#wX~Ob#fO~OTqOZVO[UOdrOhtOitOs{O!SyO!TyO!UvO!WxO!b|O!fzO!heO!owO!vhO#RlO#mRO#nRO$g]O$h^O$i_O$j`O~Ov#pO~P/[O|#rO~O{!jO!h!dO#y!bOZya[ya]ya^ya_ya`yanyapyaryasyatyav$`X#kya$qya#}yaxya#|ya!fyaeyabya#Qyafyalya~Ox$cP~P`Ox#{O#|#|O~P$yO#|#|O#}#}O!f$cX~P$yO!f$PO~O#mRO#nROx$nP~OZ#^O[#^O]#^O^#^O_#^O#l!wO#y#^O#z#^O~O$Z#VX~P3uO$Z$WO~O#}$XO#Q$pX~O#Q$ZO~Oe$[O~P$yO#}$^Ol$RX~Ol$`O~O!V$aO~O!S$bO~O#k!wa$q!wa#}!wax!wa#|!wa!f!wae!wab!wa#Q!waf!wal!wa~P$yO#}#ZO#k$Tax$Ta~OZ#^O[#^O]#^O^#^O_#^O#mRO#nRO#y#^O#z#^O~O`Wa$ZWaxWa#}Wa~P6lO#}#cOb#wa~OZ![O[![O]!]O^!]O_!^O{!jO!h!dO#y!bOv$`X~O`qinqipqirqisqitqi#kqi$qqi#}qixqi#|qi!fqieqibqi#Qqifqilqi~P7sO_!^O{!jO!h!dO#y!bOZyi[yi`yinyipyiryisyityiv$`X#kyi$qyi#}yixyi#|yi!fyieyibyi#Qyifyilyi~O]!]O^!]O~P9kO]yi^yi~P9kO{!jO!h!dO#y!bOZyi[yi]yi^yi_yi`yinyipyiryisyityiv$`X#kyi$qyi#}yixyi#|yi!fyieyibyi#Qyifyilyi~O!f$nO~P$yO`!iOp!gOr!ZOs!ZOt!hOnmi#kmi$qmi#}mixmi#|mi!fmiemibmi#Qmifmilmi~P7sO`!iOr!ZOs!ZOt!hOnoipoi#koi$qoi#}oixoi#|oi!foieoiboi#Qoifoiloi~P7sO`!iOn!fOp$oOr!ZOs!ZOt!hO~P7sO!R$tO!U$uO!W$vO!Z$wO!^$xO!b$yO#mRO#nRO~OZ#aX[#aX]#aX^#aX_#aX`#aXn#aXp#aXr#aXs#aXt#aXv#aXx#aX{#aX!h#aX#m#aX#n#aX#o#aX#y#aX#}#aX~P-yO#}#}Ox$cX~P$yO$Z${O~O#}$|Ox$bX~Ox%OO~O#}#}O!f$cax$ca~O$Z%SOx!}X#}!}X~O#}%TOx$nX~Ox%VO~O$Z#Va~P3uO#l!wO$h^O~O#}$XO#Q$pa~O#}$^Ol$Ra~O!T%aO~OxpO~O#|%bObaX#}aX~P$yO#kSq$qSq#}SqxSq#|Sq!fSqeSqbSq#QSqfSqlSq~P$yOx#{O#|#|O#}uX~P$yOx%dO~O#y%eOZ!OX[!OX]!OX^!OX_!OX`!OXn!OXp!OXr!OXs!OXt!OXv!OX{!OX!h!OX#k!OX$q!OX#}!OXx!OX#|!OX!f!OXe!OXb!OX#Q!OXf!OXl!OX~Op%gO~Op%hO~Op%iO~O![%jO~O![%kO~O![%lO~O#}$|Ox$ba~OZ![O[![O]!]O^!]O_!^O`!iOn!fOp!gOr!ZOs!ZOt!hO{!jO#y!bOv$`X~Ox%qO!f%qO!h%pO~PHnO!f#fa#}#fax#fa~P$yO#}%TOx$na~O#O%wO~P`O#Q#Ti#}#Ti~P$yOf%xO~P$yOl$Si#}$Si~P$yO#kgq$qgq#}gqxgq#|gq!fgqegqbgq#Qgqfgqlgq~P$yO`qynqypqyrqysqytqy#kqy$qqy#}qyxqy#|qy!fqyeqybqy#Qqyfqylqy~P7sO#y%eOZ!Oa[!Oa]!Oa^!Oa_!Oa`!Oan!Oap!Oar!Oas!Oat!Oav!Oa{!Oa!h!Oa#k!Oa$q!Oa#}!Oax!Oa#|!Oa!f!Oae!Oab!Oa#Q!Oaf!Oal!Oa~O!S%|O~O!V%|O~O!S%}O~O!R$tO!U$uO!W$vO!Z$wO!^$xO!b&sO#mRO#nRO~O!X$[P~P! VOx!li#}!li~P$yOT$_XZ$_X[$_X]!xy^!xy_!xy`!xyd$_Xh$_Xi$_Xn!xyp!xyr!xys$_Xt!xyv$_X{!xy!S$_X!T$_X!U$_X!W$_X!b$_X!f$_X!h$_X!o$_X!v$_X#R$_X#k!xy#m$_X#n$_X#y!xy$g$_X$h$_X$i$_X$j$_X$q!xy#}!xyx!xy#|!xye!xyb!xy#Q!xyf!xyl!xy~O#k#PX$q#PX#}#PXx#PX#|#PX!f#PXe#PXb#PX#Q#PXf#PXl#PX~P$yObai#}ai~P$yO!T&]O~O#mRO#nRO!X!PX#y!PX#}!PX~O#y&nO!X!OX#}!OX~O!X&_O~O$Z&`O~O#}&aO!X$YX~O!X&cO~O#}&dO!X$[X~O!X&fO~O#kc!R$qc!R#}c!Rxc!R#|c!R!fc!Rec!Rbc!R#Qc!Rfc!Rlc!R~P$yO#y&nO!X!Oa#}!Oa~O#}&aO!X$Ya~O#}&dO!X$[a~O$]&lO~O$]&oO~O!X&pO~O![&rO~OQP_^$g]#y~",goto:"Du$qPPPP$rP%k%n%t&W'qPPPPPP'zP$rPPP$rPP'}(QP$rP$rP$rPPP(WP(cP$r$rPP(l)R)^)RPPPPPPP)RPP)RP*k*n)RP*t*z$rP$rP$r+R+z+},T+zP,]-U,],].U.}P$r/v$r0o0o1h1kP1qPP0o1w1}.Q2RPP2ZP2^2e2k2q2w4S4^4d4j4p4w4}5T5ZPPPPPPPP5a5j7q8j9c9fPP9jPP9p9s:l;e;h;l;q<`=O=o>hP>kP>o?b@T@|ASAV$rA]A]PPPPBU7qB}CvCyDr!mhOPQWgjsz{!Z!_!`!a!e!f!g!h!i!n#X#Z#]#a#e#p#|#}$W$[$]$`$o${%V%b%w%xR!YSQ!WSR$k#cS!US#cS#Ou$^W#u!n!v$|%TT&R%k&a#WXOPQWYgjsz{!Z!_!`!a!c!e!f!g!h!i#X#Z#]#a#e#p#r#|#}$W$[$]$`$o${%S%V%b%e%j%l%w%x&O&`&d&l&n&o&rb!TSu!v#c$^$|%T%k&aU#_!T#`#sR#s!nU#_!T#`#sT$U!x$VR$j#aR#SuQ#QuR%^$^U!PQ#]#pQ#q!iR$e#ZQpQQ$g#]R$q#pQ$z#rQ%r%SQ&Q%jU&V%l&d&rQ&g&`T&m&l&oc$s#r%S%j%l&`&d&l&o&r!liOPQWgjsz{!Z!_!`!a!e!f!g!h!i!n#X#Z#]#a#e#p#|#}$W$[$]$`$o${%V%b%w%xQ#k!cU$r#r%S&lS%z%e&n]&P%j%l&`&d&o&rR&U%kQ&S%kR&h&aQ&Y%lR&q&rS&W%l&rR&j&d!mZOPQWgjsz{!Z!_!`!a!e!f!g!h!i!n#X#Z#]#a#e#p#|#}$W$[$]$`$o${%V%b%w%xR#z!nQ#w!nR%n$|S#v!n$|T$Q!v%T!mcOPQWgjsz{!Z!_!`!a!e!f!g!h!i!n#X#Z#]#a#e#p#|#}$W$[$]$`$o${%V%b%w%x!lcOPQWgjsz{!Z!_!`!a!e!f!g!h!i!n#X#Z#]#a#e#p#|#}$W$[$]$`$o${%V%b%w%xQ!p`T!ym$X!maOPQWgjsz{!Z!_!`!a!e!f!g!h!i!n#X#Z#]#a#e#p#|#}$W$[$]$`$o${%V%b%w%x!mbOPQWgjsz{!Z!_!`!a!e!f!g!h!i!n#X#Z#]#a#e#p#|#}$W$[$]$`$o${%V%b%w%x!mfOPQWgjsz{!Z!_!`!a!e!f!g!h!i!n#X#Z#]#a#e#p#|#}$W$[$]$`$o${%V%b%w%x!mnOPQWgjsz{!Z!_!`!a!e!f!g!h!i!n#X#Z#]#a#e#p#|#}$W$[$]$`$o${%V%b%w%xR$T!vQ$R!vR%s%TQ%v%VR&Z%wQ!{mR%Y$XT!zm$XS!xm$XT$U!x$VRpQS#`!T#sR$h#`Q#d!WR$l#dQ$_#QR%_$_Q#[!PR$f#[!vYOPQWgjsz{!Z!_!`!a!c!e!f!g!h!i!n#X#Z#]#a#e#p#r#|#}$W$[$]$`$o${%S%V%b%e%w%x&lS!mY&O_&O%j%l&`&d&n&o&rQ%f$rS%{%f&^R&^&PQ&b&SR&i&bQ&e&WR&k&eQ$}#wR%o$}S$O!t#tR%R$OQ%U$RR%t%UQ$V!xR%W$VQ$Y!{R%Z$YQ#Y}R$d#YQpOQ}PR$c#XUTOP#XW!OQ!i#Z#]Q!lWQ!rgQ!tjQ!}sQ#VzQ#W{Q#g!ZQ#h!_Q#i!`Q#j!aQ#l!eQ#m!fQ#n!gQ#o!hQ#t!nQ$i#aQ$m#eQ$p#pQ%P#|Q%Q#}Q%X$WQ%[$[Q%]$]Q%`$`Q%c$oQ%m${S%u%V%wQ%y%bR&[%x!moOPQWgjsz{!Z!_!`!a!e!f!g!h!i!n#X#Z#]#a#e#p#|#}$W$[$]$`$o${%V%b%w%x!mSOPQWgjsz{!Z!_!`!a!e!f!g!h!i!n#X#Z#]#a#e#p#|#}$W$[$]$`$o${%V%b%w%xR!XST!VS#cQ#a!UR$]#OR#e!Y!msOPQWgjsz{!Z!_!`!a!e!f!g!h!i!n#X#Z#]#a#e#p#|#}$W$[$]$`$o${%V%b%w%x!muOPQWgjsz{!Z!_!`!a!e!f!g!h!i!n#X#Z#]#a#e#p#|#}$W$[$]$`$o${%V%b%w%xR#RuT#Pu$^V!QQ#]#p!X!_T!O!r!t!}#V#W#g#l#m#n#o#t$i$m$p%P%Q%X%[%]%`%c%m%u%y&[!Z!`T!O!r!t!}#V#W#g#h#l#m#n#o#t$i$m$p%P%Q%X%[%]%`%c%m%u%y&[!]!aT!O!r!t!}#V#W#g#h#i#l#m#n#o#t$i$m$p%P%Q%X%[%]%`%c%m%u%y&[!mWOPQWgjsz{!Z!_!`!a!e!f!g!h!i!n#X#Z#]#a#e#p#|#}$W$[$]$`$o${%V%b%w%xR&T%kT&X%l&r!a!cT!O!l!r!t!}#V#W#g#h#i#j#l#m#n#o#t$i$m$p%P%Q%X%[%]%`%c%m%u%y&[!a!eT!O!l!r!t!}#V#W#g#h#i#j#l#m#n#o#t$i$m$p%P%Q%X%[%]%`%c%m%u%y&[!m[OPQWgjsz{!Z!_!`!a!e!f!g!h!i!n#X#Z#]#a#e#p#|#}$W$[$]$`$o${%V%b%w%xQ!o[R!qaR#x!nQ!ujR#y!n!mdOPQWgjsz{!Z!_!`!a!e!f!g!h!i!n#X#Z#]#a#e#p#|#}$W$[$]$`$o${%V%b%w%x!mjOPQWgjsz{!Z!_!`!a!e!f!g!h!i!n#X#Z#]#a#e#p#|#}$W$[$]$`$o${%V%b%w%x!mkOPQWgjsz{!Z!_!`!a!e!f!g!h!i!n#X#Z#]#a#e#p#|#}$W$[$]$`$o${%V%b%w%xR$S!v!mmOPQWgjsz{!Z!_!`!a!e!f!g!h!i!n#X#Z#]#a#e#p#|#}$W$[$]$`$o${%V%b%w%xR!|m",nodeNames:"\u26A0 LineComment BlockComment Expression ForExpression for InExpressions InExpression Name Identifier Identifier ArithOp ArithOp ArithOp ArithOp ArithOp in IterationContext return IfExpression if then else QuantifiedExpression some every InExpressions InExpression satisfies Disjunction or Conjunction and Comparison CompareOp CompareOp between PositiveUnaryTest ( PositiveUnaryTests ) ArithmeticExpression InstanceOfExpression instance of Type QualifiedName VariableName SpecialType days time duration years months date > ListType list < ContextType context ContextEntryTypes ContextEntryType FunctionType function ArgumentTypes ArgumentType PathExpression ] FilterExpression [ FunctionInvocation SpecialFunctionName NamedParameters NamedParameter ParameterName PositionalParameters null NumericLiteral StringLiteral BooleanLiteral DateTimeLiteral DateTimeConstructor AtLiteral ? SimplePositiveUnaryTest Interval ParenthesizedExpression List FunctionDefinition FormalParameters FormalParameter external FunctionBody } { Context ContextEntry Key Name Identifier Expressions UnaryTests Wildcard not",maxTerm:171,context:vl,nodeProps:[["closedBy",38,")",70,"]",95,"}"],["openedBy",40,"(",68,"[",94,"{"],["group",-5,77,78,79,80,81,"Literal"]],propSources:[ec],skippedNodes:[0,1,2],repeatNodeCount:14,tokenData:"+l~RuXY#fYZ$ZZ[#f]^$Zpq#fqr$`rs$kwx&cxy&hyz&mz{&r{|'P|}'U}!O'Z!O!P'h!P!Q(Q!Q![){![!]*^!]!^*c!^!_*h!_!`$f!`!a*w!b!c+R!}#O+W#P#Q+]#Q#R&z#o#p+b#q#r+g$f$g#f#BY#BZ#f$IS$I_#f$I|$I}$Z$I}$JO$Z$JT$JU#f$KV$KW#f&FU&FV#f?HT?HU#f~#kY#q~XY#fZ[#fpq#f$f$g#f#BY#BZ#f$IS$I_#f$JT$JU#f$KV$KW#f&FU&FV#f?HT?HU#f~$`O#r~~$cP!_!`$f~$kOr~~$pW$h~OY$kZr$krs%Ys#O$k#O#P%_#P;'S$k;'S;=`&]<%lO$k~%_O$h~~%bRO;'S$k;'S;=`%k;=`O$k~%pX$h~OY$kZr$krs%Ys#O$k#O#P%_#P;'S$k;'S;=`&];=`<%l$k<%lO$k~&`P;=`<%l$k~&hO#z~~&mOv~~&rOx~~&wP^~z{&z~'PO_~~'UO[~~'ZO#}~R'`PZP!`!a'cQ'hO$]Q~'mQ#y~!O!P's!Q!['x~'xO#|~~'}P$g~!Q!['x~(VQ]~z{(]!P!Q)d~(`TOz(]z{(o{;'S(];'S;=`)^<%lO(]~(rVOz(]z{(o{!P(]!P!Q)X!Q;'S(];'S;=`)^<%lO(]~)^OQ~~)aP;=`<%l(]~)iSP~OY)dZ;'S)d;'S;=`)u<%lO)d~)xP;=`<%l)d~*QQ$g~!O!P*W!Q![){~*ZP!Q!['x~*cO$Z~~*hO$q~R*oP![QsP!_!`*rP*wOsPR+OP!XQsP!_!`*r~+WO$j~~+]O!h~~+bO!f~~+gO#R~~+lO#Q~",tokenizers:[Er,yr,ys,0,1],topRules:{Expression:[0,3],Expressions:[1,101],UnaryTests:[2,102]},dynamicPrecedences:{31:-1,71:-1,73:-1},specialized:[{term:121,get:A=>Ol[A]||-1}],tokenPrec:2500});function Yc(A){return Object.getPrototypeOf(A)===Object.prototype}function el(A){return ls.isDateTime(A)}function Wl(A){return ti.isDuration(A)}function Sa(A){return Array.isArray(A)}function hc(A){return typeof A=="boolean"}function Ma(A){return A==null?"nil":hc(A)?"boolean":Ul(A)?"number":xl(A)?"string":Yc(A)?"context":Sa(A)?"list":Wl(A)?"duration":el(A)?A.year===1900&&A.month===1&&A.day===1?"time":A.hour===0&&A.minute===0&&A.second===0&&A.millisecond===0&&A.zone===Zi.utcInstance?"date":"date time":A instanceof ya?"range":A instanceof Au?"function":"literal"}function Hl(A,v){return Ma(A)===v}function sl(A,v){if(el(A)){if(v==="time")return A.set({year:1900,month:1,day:1});if(v==="date")return A.setZone("utc",{keepLocalTime:!0}).startOf("day");if(v==="date time")return A}return null}class ya{constructor(v){Object.assign(this,v)}}function Ul(A){return typeof A=="number"}function xl(A){return typeof A=="string"}function kl(A,v,_=!1){if(A===null&&v!==null||A!==null&&v===null)return!1;Sa(A)&&A.length<2&&(A=A[0]),Sa(v)&&v.length<2&&(v=v[0]);const N=Ma(A),q=Ma(v),de=["date time","time","date"];if(de.includes(N))return!de.includes(q)||N==="time"&&q!=="time"||q==="time"&&N!=="time"?null:_||A.zone===Ze.instance||v.zone===Ze.instance?A.equals(v):A.toUTC().valueOf()===v.toUTC().valueOf();if(N!==q)return null;if(N==="nil")return!0;if(N==="list")return A.length!==v.length?!1:A.every((Pe,tt)=>kl(Pe,v[tt]));if(N==="duration")return Math.abs(A.as("days"))>180?Math.trunc(A.minus(v).as("months"))===0:Math.trunc(A.minus(v).as("seconds"))===0;if(N==="context"){const Pe=Object.entries(A),tt=Object.entries(v);return Pe.length!==tt.length?!1:Pe.every(([At,tn])=>At in v&&kl(tn,v[At]))}return N==="range"?[[A.start,v.start],[A.end,v.end],[A["start included"],v["start included"]],[A["end included"],v["end included"]]].every(([Pe,tt])=>Pe===tt):A==v?!0:N===q?!1:null}class Au{constructor(v,_){this.fn=v,this.parameterNames=_}invoke(v){let _;if(Sa(v)){if(_=v,_.length>this.parameterNames.length){const N=this.parameterNames[this.parameterNames.length-1];if(!N||!N.startsWith("..."))return null}}else{if(Object.keys(v).some(N=>!this.parameterNames.includes(N)&&!this.parameterNames.includes(`...${N}`)))return null;_=this.parameterNames.reduce((N,q)=>{if(q.startsWith("...")){q=q.slice(3);const de=v[q];return de?[...N,...Sa(de)?de:[de]]:N}return[...N,v[q]]},[])}return this.fn.call(null,..._)}}function Yo(A){if(Array.isArray(A.$args))return A.$args;const v=A.toString(),_=/^(?:[^(]*\s*)?\(([^)]+)?\)/.exec(v);if(!_)throw new Error("failed to parse params: "+v);const[N,q]=_;return q?q.split(",").map(de=>de.trim()):[]}function fo(A){return new Error(`not implemented: ${A}`)}function ta(A,v){if(["nil","boolean","number","string"].includes(Ma(v)))return;if(A in v)return v[A];const _=ga(A);if(_ in v)return v[_];const N=Object.entries(v).find(([q])=>_===ga(q));if(N)return N[1]}function tc(A){return typeof A=="number"?ti.fromMillis(A):ti.fromISO(A)}function is(A=null,v=null,_=null){if(v){if(A)throw new Error("<str> and <time> provided");return is(`1900-01-01T${v}`,null)}if(typeof A=="string"){if(A.startsWith("-"))throw fo("negative date");if(!A.includes("T"))return is(A+"T00:00:00",null,_||Zi.utcInstance);if(A.includes("@")){if(_)throw new Error("<zone> already provided");const[N,q]=A.split("@");return is(N,null,_s.normalizeZone(q))}return ls.fromISO(A.toUpperCase(),{setZone:!0,zone:_})}return ls.now()}const C={number:u(function(A,v,_){if(arguments.length!==3)return null;v&&(A=A.split(v).join("")),_&&_!=="."&&(A=A.split(".").join("#").split(_).join("."));const N=+A;return isNaN(N)?null:N},["string","string?","string?"],["from","grouping separator","decimal separator"]),string:u(function(A){return A===null?null:_e(A)},["any"]),date:u(function(A,v,_,N){!N&&!Ul(A)&&(N=A,A=null);let q;return xl(N)&&(q=is(N)),el(N)&&(q=N),A&&(q=is().setZone("utc").set({year:A,month:v,day:_})),q&&un(q.setZone("utc").startOf("day"))||null},["any?","number?","number?","any?"]),"date and time":u(function(A,v,_){let N;if(el(A)&&el(v)){const q=A.toLocal();N=v.set({year:q.year,month:q.month,day:q.day})}return xl(A)&&(_=A,A=null),xl(_)&&(N=is(_,null,_.includes("@")?null:Ze.instance)),N&&un(N)||null},["any?","time?","string?"],["date","time","from"]),time:u(function(A,v,_,N,q){let de;if(N)throw fo("time(..., offset)");return(xl(A)||el(A))&&(q=A,A=null),xl(q)&&(de=is(null,q)),el(q)&&(de=q.set({year:1900,month:1,day:1})),Ul(A)&&(de=is().set({hour:A,minute:v,second:_}).set({year:1900,month:1,day:1,millisecond:0})),de&&un(de)||null},["any?","number?","number?","any?","any?"]),duration:u(function(A){return un(tc(A))},["string"]),"years and months duration":u(function(A,v){return un(v.diff(A,["years","months"]))},["date","date"]),"@":u(function(A){let v;return/^-?P/.test(A)?v=tc(A):/^[\d]{1,2}:[\d]{1,2}:[\d]{1,2}/.test(A)?v=is(null,A):v=is(A),v&&un(v)||null},["string"]),now:u(function(){return is()},[]),today:u(function(){return is().startOf("day")},[]),not:u(function(A){return Hl(A,"boolean")?!A:null},["any"]),substring:u(function(A,v,_){const N=v<0?A.length+v:v-1,q=Array.from(A);return(typeof _!="undefined"?q.slice(N,N+_):q.slice(N)).join("")},["string","number","number?"],["string","start position","length"]),"string length":u(function(A){return Oe(A)},["string"]),"upper case":u(function(A){return A.toUpperCase()},["string"]),"lower case":u(function(A){return A.toLowerCase()},["string"]),"substring before":u(function(A,v){const _=A.indexOf(v);return _===-1?"":A.substring(0,_)},["string","string"]),"substring after":u(function(A,v){const _=A.indexOf(v);return _===-1?"":A.substring(_+v.length)},["string","string"]),replace:u(function(A,v,_,N){return A.replace(new RegExp(v,"ug"+(N||"").replace(/[x]/g,"")),_.replace(/\$0/g,"$$&"))},["string","string","string","string?"]),contains:u(function(A,v){return A.includes(v)},["string","string"]),matches:u(function(A,v,_){throw fo("matches")},["string","string","string?"]),"starts with":u(function(A,v){return A.startsWith(v)},["string","string"]),"ends with":u(function(A,v){return A.endsWith(v)},["string","string"]),split:u(function(A,v){return A.split(new RegExp(v,"u"))},["string","string"]),"string join":u(function(A,v){return A.some(_=>!xl(_)&&_!==null)?null:A.filter(_=>_!==null).join(v||"")},["list","string?"]),"list contains":u(function(A,v){return A.some(_=>G(_,v))},["list","any?"]),"list replace":u(function(A,v,_,N){const q=v||N;return["number","function"].includes(Ma(q))?wt(A,v||N,_):null},["list","any?","any","function?"]),count:u(function(A){return A.length},["list"]),min:E(function(...A){return A.reduce((v,_)=>v===null?_:Math.min(v,_),null)},"number"),max:E(function(...A){return A.reduce((v,_)=>v===null?_:Math.max(v,_),null)},"number"),sum:E(function(...A){return T(A)},"number"),mean:E(function(...A){const v=T(A);return v===null?v:v/A.length},"number"),all:E(function(...A){let v=!1;for(const _ of A){if(_===!1)return!1;typeof _!="boolean"&&(v=!0)}return v?null:!0},"any?"),any:E(function(...A){let v=!1;for(const _ of A){if(_===!0)return!0;typeof _!="boolean"&&(v=!0)}return v?null:!1},"any?"),sublist:u(function(A,v,_){const N=v<0?A.length+v:v-1;return typeof _!="undefined"?A.slice(N,N+_):A.slice(N)},["list","number","number?"]),append:u(function(A,...v){return A.concat(v)},["list","any?"]),concatenate:u(function(...A){return A.reduce((v,_)=>v.concat(_),[])},["any"]),"insert before":u(function(A,v,_){return A.slice(0,v-1).concat([_],A.slice(v-1))},["list","number","any?"]),remove:u(function(A,v){return A.slice(0,v-1).concat(A.slice(v))},["list","number"]),reverse:u(function(A){return A.slice().reverse()},["list"]),"index of":u(function(A,v){return A.reduce(function(_,N,q){return G(N,v)&&_.push(q+1),_},[])},["list","any"]),union:E(function(...A){return A.reduce((v,_)=>_.reduce((N,q)=>(N.some(de=>kl(q,de))||N.push(q),N),v),[])},"list"),"distinct values":u(function(A){return A.reduce((v,_)=>(v.some(N=>kl(_,N))||v.push(_),v),[])},["list"]),flatten:u(function(A){return B(A)},["list"]),product:E(function(...A){return A.length===0?null:A.reduce((v,_)=>v*_,1)},"number"),median:E(function(...A){return A.length===0?null:rn(A)},"number"),stddev:E(function(...A){return A.length<2?null:gt(A)},"number"),mode:E(function(...A){return Cn(A)},"number"),decimal:u(function(A,v){if(!v)return lt(A);const _=Math.pow(10,v);return lt(A*_)/_},["number","number"]),floor:u(function(A,v=0){if(v===null)return null;const _=Math.pow(10,v);return Math.floor(A*_)/_},["number","number?"]),ceiling:u(function(A,v=0){if(v===null)return null;const _=Math.pow(10,v);return Math.ceil(A*_)/_},["number","number?"]),abs:u(function(A){return typeof A!="number"?null:Math.abs(A)},["number"]),"round up":u(function(A,v){throw fo("round up")},["number","number"]),"round down":u(function(A,v){throw fo("round down")},["number","number"]),"round half up":u(function(A,v){throw fo("round half up")},["number","number"]),"round half down":u(function(A,v){throw fo("round half down")},["number","number"]),modulo:u(function(A,v){if(!v)return null;const _=1e9;return Math.round((A%v+v)%v*_)/_},["number","number"]),sqrt:u(function(A){return A<0?null:Math.sqrt(A)},["number"]),log:u(function(A){return A<=0?null:Math.log(A)},["number"]),exp:u(function(A){return Math.exp(A)},["number"]),odd:u(function(A){return Math.abs(A)%2===1},["number"]),even:u(function(A){return Math.abs(A)%2===0},["number"]),is:u(function(A,v){return typeof A=="undefined"||typeof v=="undefined"?!1:kl(A,v,!0)},["any?","any?"]),before:u(function(A,v){return b(A,v)},["any","any"]),after:u(function(A,v){return b(v,A)},["any","any"]),meets:u(function(A,v){return f(A,v)},["range","range"]),"met by":u(function(A,v){return f(v,A)},["range","range"]),overlaps:u(function(A,v){return!b(A,v)&&!b(v,A)},["range","range"]),"overlaps before":u(function(){throw fo("overlaps before")},["any?"]),"overlaps after":u(function(){throw fo("overlaps after")},["any?"]),finishes:u(function(){throw fo("finishes")},["any?"]),"finished by":u(function(){throw fo("finished by")},["any?"]),includes:u(function(){throw fo("includes")},["any?"]),during:u(function(){throw fo("during")},["any?"]),starts:u(function(){throw fo("starts")},["any?"]),"started by":u(function(){throw fo("started by")},["any?"]),coincides:u(function(){throw fo("coincides")},["any?"]),"day of year":u(function(A){return A.ordinal},["date time"]),"day of week":u(function(A){return A.weekdayLong},["date time"]),"month of year":u(function(A){return A.monthLong},["date time"]),"week of year":u(function(A){return A.weekNumber},["date time"]),sort:u(function(A,v){return Array.from(A).sort((_,N)=>v.invoke([_,N])?-1:1)},["list","function"]),"get value":u(function(A,v){return ta(v,A)||null},["context","string"]),"get entries":u(function(A){return arguments.length!==1||Array.isArray(A)?null:Object.entries(A).map(([v,_])=>({key:v,value:_}))},["context"]),context:E(function(...A){const v=A.reduce((_,N)=>{if(_===oe||!["key","value"].every(de=>de in N))return oe;const q=N.key;return q===null||q in _?oe:Object.assign(Object.assign({},_),{[N.key]:N.value})},{});return v===oe?null:v},"context"),"context merge":E(function(...A){return Object.assign({},...A)},"context"),"context put":u(function(A,v,_,N){return typeof v=="undefined"&&typeof N=="undefined"?null:R(A,v||[N],_)},["context","list?","any","string?"],["context","keys","value","key"])};function R(A,v,_){const[N,...q]=v;return Ma(N)!=="string"||Ma(A)==="nil"||q.length&&(_=R(A[N],q,_),_===null)?null:Object.assign(Object.assign({},A),{[N]:_})}function G(A,v){return A===v}const oe={};function Se(A){const v=A.endsWith("?"),_=v?A.substring(0,A.length-1):A;return function(N){const q=Array.isArray(N);if(_==="list")return q||v&&typeof N=="undefined"?N:N===null?oe:[N];_!=="any"&&q&&N.length===1&&(N=N[0]);const de=Ma(N);return _==="any"||_===de?v||typeof N!="undefined"?N:oe:de==="nil"?v?N:oe:sl(N,_)||oe}}function xt(A){const v=A.map(Se);return function(_){for(;_.length<A.length;)_.push(void 0);return _.reduce((N,q,de)=>{if(N===!1)return N;const Pe=v[de],tt=Pe?Pe(q):q;return tt===oe?!1:(N.push(tt),N)},[])}}function E(A,v,_=null){const N=Se(v),q=function(...de){return de.length===0||(Array.isArray(de[0])&&de.length===1&&(de=de[0]),!de.every(Pe=>N(Pe)!==oe))?null:A(...de)};return q.$args=_||Yo(A),q}function u(A,v,_=null){const N=xt(v);_=_||Yo(A);const q=function(...de){const Pe=N(de);return Pe?A(...Pe):null};return q.$args=_,q}function f(A,v){return[A.end===v.start,A["end included"]===!0,v["start included"]===!0].every(_=>_)}function b(A,v){return A instanceof ya&&v instanceof ya?A.end<v.start||(!A["end included"]||!v["start included"])&&A.end==v.start:A instanceof ya?A.end<v||!A["end included"]&&A.end===v:v instanceof ya?v.start>A||!v["start included"]&&v.start===A:A<v}function T(A){return A.reduce((v,_)=>v===null?_:v+_,null)}function B([A,...v]){return A!==void 0?[...Array.isArray(A)?B(A):[A],...B(v)]:[]}function U(A){return typeof A=="string"&&/\W/.test(A)?_e(A,!0):A}function ie(A){return _e(A,!0)}function ce(A){return A.replace(/("|\\)/g,"\\$1")}function _e(A,v=!1){var _,N,q,de;const Pe=Ma(A);if(Pe==="nil")return"null";if(Pe==="string")return v?`"${ce(A)}"`:A;if(Pe==="boolean"||Pe==="number")return String(A);if(Pe==="list")return"["+A.map(ie).join(", ")+"]";if(Pe==="context")return"{"+Object.entries(A).map(([tt,At])=>U(tt)+": "+ie(At)).join(", ")+"}";if(Pe==="duration")return A.shiftTo("years","months","days","hours","minutes","seconds").normalize().toISO();if(Pe==="date time")return A.zone===Ze.instance?A.toISO({suppressMilliseconds:!0,includeOffset:!1}):!((_=A.zone)===null||_===void 0)&&_.zoneName?A.toISO({suppressMilliseconds:!0,includeOffset:!1})+"@"+((N=A.zone)===null||N===void 0?void 0:N.zoneName):A.toISO({suppressMilliseconds:!0});if(Pe==="date")return A.toISODate();if(Pe==="range")return"<range>";if(Pe==="time")return A.zone===Ze.instance?A.toISOTime({suppressMilliseconds:!0,includeOffset:!1}):!((q=A.zone)===null||q===void 0)&&q.zoneName?A.toISOTime({suppressMilliseconds:!0,includeOffset:!1})+"@"+((de=A.zone)===null||de===void 0?void 0:de.zoneName):A.toISOTime({suppressMilliseconds:!0});if(Pe==="function")return"<function>";throw fo("string("+Pe+")")}function Oe(A){return A.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length}function lt(A){const v=Math.trunc(A);return A-v>.5?v+1:v}function gt(A){const v=A.length,_=A.reduce((N,q)=>N+q)/v;return Math.sqrt(A.map(N=>Math.pow(N-_,2)).reduce((N,q)=>N+q)/(v-1))}function wt(A,v,_){return Ul(v)?[...A.slice(0,v-1),_,...A.slice(v)]:A.map((N,q)=>v.invoke([N,_])?_:N)}function rn(A){const v=A.length,_=A.slice().sort(),N=v/2-1,q=Math.ceil(N);return N===q?(_[q]+_[q+1])/2:_[q]}function Cn(A){if(A.length<2)return A;const v={};for(const N of A)v[N]=(v[N]||0)+1;const _=Object.entries(v).sort((N,q)=>q[1]-N[1]);return _.filter(N=>N[1]===_[0][1]).map(N=>+N[0])}function un(A){return A.isValid?A:null}function Hn(A,v={}){return gu.configure({top:"Expression",contextTracker:xo(v)}).parse(A)}function Rr(A,v={}){return gu.configure({top:"UnaryTests",contextTracker:xo(v)}).parse(A)}class Fs extends Error{constructor(v,_){super(v),Object.assign(this,_)}}class Vr{_buildExecutionTree(v,_){const N={args:[],nodeInput:_},q=[N];return v.iterate({enter(de){const{isError:Pe,isSkipped:tt}=de.type,{from:At,to:tn}=de;if(Pe){const{from:Jn,to:rs,message:ir}=ca(de);throw new Fs(ir,{input:_.slice(Jn,rs),position:{from:Jn,to:rs}})}if(tt)return!1;const Cr=_.slice(At,tn);q.push({nodeInput:Cr,args:[]})},leave(de){if(de.type.isSkipped)return;const{nodeInput:Pe,args:tt}=q.pop(),At=q[q.length-1],tn=Wa(de,Pe,tt);At.args.push(tn)}}),N.args[N.args.length-1]}evaluate(v,_={}){const N=Hn(v,_),q=this._buildExecutionTree(N,v);return{parseTree:N,root:q}}unaryTest(v,_={}){const N=Rr(v,_),q=this._buildExecutionTree(N,v);return{parseTree:N,root:q}}}const Ds=new Vr;function us(A,v={}){const _=v["?"]!==void 0?v["?"]:null,{root:N}=Ds.unaryTest(A,v);return N(v)(_)}function Aa(A,v={}){const{root:_}=Ds.evaluate(A,v);return _(v)}function Wa(A,v,_){switch(A.name){case"ArithOp":return N=>{const q=(de,Pe=["number"])=>(tt,At)=>{const tn=tt(N),Cr=At(N);if(Sa(tn)||Sa(Cr))return null;const Jn=Ma(tn),rs=Ma(Cr),ir=["date","time","date time","duration"];if(ir.includes(Jn)){if(!ir.includes(rs))return null}else if(Jn!==rs||!Pe.includes(Jn))return null;return de(tn,Cr)};switch(v){case"+":return q((de,Pe)=>Hl(de,"time")&&Wl(Pe)?de.plus(Pe).set({year:1900,month:1,day:1}):el(de)&&el(Pe)?null:el(de)&&Wl(Pe)||Wl(de)&&Wl(Pe)?de.plus(Pe):de+Pe,["string","number","date","time","duration","date time"]);case"-":return q((de,Pe)=>Hl(de,"time")&&Wl(Pe)?de.minus(Pe).set({year:1900,month:1,day:1}):el(de)&&el(Pe)?de.diff(Pe):el(de)&&Wl(Pe)||Wl(de)&&Wl(Pe)?de.minus(Pe):de-Pe,["number","date","time","duration","date time"]);case"*":return q((de,Pe)=>de*Pe);case"/":return q((de,Pe)=>Pe?de/Pe:null);case"**":case"^":return q((de,Pe)=>Math.pow(de,Pe))}};case"CompareOp":return Pt(()=>{switch(v){case">":return N=>zl(N,null,!1,!1);case">=":return N=>zl(N,null,!0,!1);case"<":return N=>zl(null,N,!1,!1);case"<=":return N=>zl(null,N,!1,!0);case"=":return N=>q=>kl(q,N);case"!=":return N=>q=>!kl(q,N)}},Gi("boolean"));case"Wildcard":return N=>!0;case"null":return N=>null;case"Disjunction":return Pt(N=>{const q=_[0](N),de=_[2](N),Pe=[[!0,!0,!0],[!0,!1,!0],[!0,null,!0],[!1,!0,!0],[!1,!1,!1],[!1,null,null],[null,!0,!0],[null,!1,null],[null,null,null]],tt=typeof q=="boolean"?q:null,At=typeof de=="boolean"?de:null;return Pe.find(tn=>tn[0]===tt&&tn[1]===At)[2]},Gi("boolean"));case"Conjunction":return Pt(N=>{const q=_[0](N),de=_[2](N),Pe=[[!0,!0,!0],[!0,!1,!1],[!0,null,null],[!1,!0,!1],[!1,!1,!1],[!1,null,!1],[null,!0,null],[null,!1,!1],[null,null,null]],tt=typeof q=="boolean"?q:null,At=typeof de=="boolean"?de:null;return Pe.find(tn=>tn[0]===tt&&tn[1]===At)[2]},Gi("boolean"));case"Context":return N=>_.slice(1,-1).reduce((q,de)=>{const[Pe,tt]=de(Object.assign(Object.assign({},N),q));return Object.assign(Object.assign({},q),{[Pe]:tt})},{});case"FunctionBody":return _[0];case"FormalParameters":return _;case"FormalParameter":return _[0];case"ParameterName":return _.join(" ");case"FunctionDefinition":return N=>{const q=_[2],de=_[4];return ts((...Pe)=>{const tt=q.reduce((At,tn,Cr)=>(At[tn]=Pe[Cr],At),Object.assign({},N));return de(tt)},q)};case"ContextEntry":return N=>{const q=typeof _[0]=="function"?_[0](N):_[0],de=_[1](N);return[q,de]};case"Key":return _[0];case"Identifier":return v;case"SpecialFunctionName":return N=>_l(v);case"Name":return v.replace(/\s{2,}/g," ");case"VariableName":return N=>{const q=_.join(" "),de=ta(q,N);return typeof de!="undefined"?de:_l(q)||null};case"QualifiedName":return N=>_.reduce((q,de)=>de(q),N);case"?":return N=>ta("?",N);case"IterationContext":return N=>{const q=_[0](N),de=_[1]&&_[1](N);return de?zl(q,de):q};case"Type":return _[0];case"InExpressions":return N=>{const q=_.map(de=>de(N));return q.some(de=>Ma(de)!=="list")?null:Te(q).map(de=>(Sa(de)||(de=[de]),Object.assign({},N,...de)))};case"InExpression":return N=>Vu(N,_[0],_[2]);case"SpecialType":throw fo("SpecialType");case"InstanceOfExpression":return Pt(N=>{const q=_[0](N),de=_[3](N);return q instanceof de},Gi("boolean"));case"every":return Pt(N=>(q,de)=>{const Pe=q(N);return Ma(Pe)!=="list"?Pe:Pe.every(tt=>Gn(de(tt)))},Gi("boolean"));case"some":return Pt(N=>(q,de)=>{const Pe=q(N);return Ma(Pe)!=="list"?Pe:Pe.some(tt=>Gn(de(tt)))},Gi("boolean"));case"NumericLiteral":return Pt(N=>v.includes(".")?parseFloat(v):parseInt(v),"number");case"BooleanLiteral":return Pt(N=>v==="true","boolean");case"StringLiteral":return Pt(N=>io(v),"string");case"PositionalParameters":return N=>_.map(q=>q(N));case"NamedParameter":return N=>{const q=_[0],de=_[1](N);return[q,de]};case"NamedParameters":return N=>_.reduce((q,de)=>{const[Pe,tt]=de(N);return q[Pe]=tt,q},{});case"DateTimeConstructor":return N=>_l(v);case"DateTimeLiteral":return N=>{if(_.length===1)return _[0](N);{const q=ts(_[0](N));if(!q)return null;const de=_[2](N);return q.invoke(de)}};case"AtLiteral":return N=>{const q=ts(_l("@"));return q?q.invoke([_[0](N)]):null};case"FunctionInvocation":return N=>{const q=ts(_[0](N));if(!q)return null;const de=_[2](N);return q.invoke(de)};case"IfExpression":return function(){const N=_[1],q=_[3],de=_[5],Pe=nt(q,de);return Pt(tt=>Gn(N(tt))?q(tt):de?de(tt):null,Pe)}();case"Parameters":return _.length===3?_[1]:N=>[];case"Comparison":return N=>{const q=_[1];if(q==="in")return Bc(_[0](N),(_[3]||_[2])(N));if(q==="between"){const At=_[2](N),tn=_[4](N);return At===null||tn===null?null:zl(At,tn).includes(_[0](N))}const de=_[0](N),Pe=_[2](N),tt=q()(Pe);return yu(tt,de)};case"QuantifiedExpression":return N=>{const q=_[0](N),de=_[1],Pe=_[3];return q(de,Pe)};case"ForExpression":return N=>{const q=_[_.length-1],de=_[1](N);if(Ma(de)!=="list")return de;const Pe=[];for(const tt of de)Pe.push(q(Object.assign(Object.assign({},tt),{partial:Pe})));return Pe};case"ArithmeticExpression":return function(){if(_.length===3){const[N,q,de]=_;return Pt(Pe=>q(Pe)(N,de),nt(N,de))}if(_.length===2){const[N,q]=_;return Pt(de=>N(de)(()=>0,q),q.type)}}();case"PositiveUnaryTest":return _[0];case"ParenthesizedExpression":return _[1];case"PathExpression":return N=>{const q=_[0](N),de=_[1];return Sa(q)?q.map(de):de(q)};case"FilterExpression":return N=>{const q=_[0](N),de=_[2],Pe=Sa(q)?q:[q];if(q===null)return null;if(typeof de.type=="undefined")try{const tt=de(N);Ul(tt)&&(de.type="number")}catch(tt){}if(de.type==="number"){const tt=de(N),At=Pe[tt<0?Pe.length+tt:tt-1];return typeof At=="undefined"?null:At}if(de.type==="boolean")return de(N)?Pe:[];if(de.type==="string"){const tt=de(N);return Pe.filter(At=>At===tt)}return Pe.map(tt=>{const At=Object.assign(Object.assign(Object.assign({},N),{item:tt}),tt);let tn=de(At);return typeof tn=="function"&&(tn=tn(tt)),tn instanceof ya&&(tn=tn.includes(tt)),tn===!0?tt:tn}).filter(Gn)};case"SimplePositiveUnaryTest":return Pt(N=>_.length===1?_[0](N):_[0](N)(_[1](N)),"test");case"List":return N=>_.slice(1,-1).map(q=>q(N));case"Interval":return Pt(N=>{const q=_[1](N),de=_[2](N),Pe=q!==null&&_[0]==="[",tt=de!==null&&_[3]==="]";return zl(q,de,Pe,tt)},Gi("boolean"));case"PositiveUnaryTests":case"Expressions":return N=>_.map(q=>q(N));case"Expression":return N=>_[0](N);case"UnaryTests":return N=>(q=null)=>{const de=_[0]==="not",tt=(de?_.slice(2,-1):_).map(At=>At(N)).flat(1).map(At=>Sa(At)?At.includes(q):At===null?null:typeof At=="boolean"?At:yu(At,q)).reduce(Wt,void 0);return tt===null?null:de?!tt:tt};default:return A.name}}function _l(A,v){return ta(A,C)}function Vu(A,v,_){const N=_(A);return["list","range"].includes(Ma(N))?N.map(q=>({[v]:q})):null}function Bc(A,v){if(!Sa(v)){if(Ma(v)==="nil")return null;v=[v]}return v.some(_=>yu(_,A))}function yu(A,v){return typeof A=="function"?A(v):A instanceof ya?A.includes(v):kl(A,v)}const ou=Array.from("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ");function bl(A,v){return v.some(_=>Ma(_)===A)&&v.every(_=>_===null||Ma(_)===A)}const Wu=new ya({start:null,end:null,"start included":!1,"end included":!1,map(){return[]},includes(){return null}});function zl(A,v,_=!0,N=!0){if(bl("string",[A,v]))return L(A,v,_,N);if(bl("number",[A,v]))return z(A,v,_,N);if(bl("duration",[A,v]))return K(A,v,_,N);if(bl("time",[A,v])||bl("date time",[A,v])||bl("date",[A,v]))return me(A,v,_,N);if(A===null&&v===null)return Wu;throw new Error(`unsupported range: ${A}..${v}`)}function vu(){return()=>{throw new Error("unsupported range operation: map")}}function Ac(A){return v=>A.map(v)}function Tu(A){return v=>A.includes(v)}function tl(A,v,_,N){const q=A>v?-1:1;return de=>{const Pe=[];for(let tt=A;!(!(tt===0&&!_)&&(tt===v&&!N||(Pe.push(de(tt)),tt===v)));tt+=q);return Pe}}function k(A,v){return v?_=>A<=_:_=>A<_}function D(A,v){return v?_=>A>=_:_=>A>_}function M(A,v,_,N,q=de=>de){let de=[];return A===null&&v===null?()=>null:(A!==null&&v!==null?A>v?de=[k(v,N),D(A,_)]:de=[k(A,_),D(v,N)]:v!==null?de=[D(v,N)]:A!==null&&(de=[k(A,_)]),Pe=>Pe===null?null:de.every(tt=>tt(q(Pe))))}function L(A,v,_=!0,N=!0){if(A!==null&&!ou.includes(A))throw new Error("illegal range start: "+A);if(v!==null&&!ou.includes(v))throw new Error("illegal range end: "+v);let q;if(A!==null&&v!==null){let tt=ou.indexOf(A),At=ou.indexOf(v);const tn=tt>At?-1:1;_===!1&&(tt+=tn),N===!1&&(At-=tn),q=ou.slice(tt,At+1)}const de=q?Ac(q):vu(),Pe=q?Tu(q):M(A,v,_,N);return new ya({start:A,end:v,"start included":_,"end included":N,map:de,includes:Pe})}function z(A,v,_,N){const q=A!==null&&v!==null?tl(A,v,_,N):vu(),de=M(A,v,_,N);return new ya({start:A,end:v,"start included":_,"end included":N,map:q,includes:de})}function K(A,v,_,N){const q=tt=>tt?ti.fromDurationLike(tt).toMillis():null,de=vu(),Pe=M(q(A),q(v),_,N,q);return new ya({start:A,end:v,"start included":_,"end included":N,map:de,includes:Pe})}function me(A,v,_,N){const q=vu(),de=M(A,v,_,N);return new ya({start:A,end:v,"start included":_,"end included":N,map:q,includes:de})}function Te(A){if(A.some(N=>Ma(N)==="nil"))return null;const v=(N,q)=>[].concat(...N.map(de=>q.map(Pe=>[].concat(de,Pe)))),_=(N,q,...de)=>q?_(v(N,q),...de):N||[];return _(...A)}function nt(A,v){return!v||A.type===v.type?A.type:"any"}function Pt(A,v){return Object.assign(A,{type:v,toString(){return`TaggedFunction[${v}] ${Function.prototype.toString.call(A)}`}})}function Wt(A,v){return A||v}function Gn(A){return A!==!1&&A!==null}function Gi(A){return`Test<${A}>`}function ts(A,v=null){return A?A instanceof Au?A:A instanceof ya?new Au(_=>A.includes(_),["value"]):typeof A!="function"?null:new Au(A,v||Yo(A)):null}function io(A){return A.startsWith('"')&&(A=A.slice(1)),A.endsWith('"')&&(A=A.slice(0,-1)),A.replace(/(\\")|(\\\\)|(\\u[a-fA-F0-9]{5,6})|((?:\\u[a-fA-F0-9]{1,4})+)/ig,function(v,..._){const[N,q,de,Pe]=_;if(N)return'"';if(q)return"\\";const tt=/\\u([a-fA-F0-9]+)/ig;if(de){const At=tt.exec(de);return String.fromCodePoint(parseInt(At[1],16))}if(Pe){const At=[];let tn;for(;(tn=tt.exec(v))!==null;)At.push(parseInt(tn[1],16));return String.fromCharCode(...At)}throw new Error("illegal match")})}function ca(A){const v=A.node,_=v.parent;if(v.from!==v.to)return{from:v.from,to:v.to,message:`Unrecognized token in <${_.name}>`};const N=au(v);if(N)return{from:v.from,to:N.to,message:`Unrecognized token <${N.name}> in <${_.name}>`};{const q=_.enterUnfinishedNodesBefore(A.to);return{from:v.from,to:v.to,message:`Incomplete <${(q||_).name}>`}}}function au(A){const v=A.node;let _,N=v;do{if(_=N.nextSibling,_)return _;N=N.parent}while(N);return null}},28942:function(lo,bs,dn){"use strict";dn.d(bs,{Z:function(){return na}});var xe=Object.create,It=Object.defineProperty,fn=Object.getOwnPropertyDescriptor,it=Object.getOwnPropertyNames,Qt=Object.getPrototypeOf,yn=Object.prototype.hasOwnProperty,ii=(re,P)=>()=>(P||re((P={exports:{}}).exports,P),P.exports),Nn=(re,P)=>{for(var V in P)It(re,V,{get:P[V],enumerable:!0})},Kt=(re,P,V,Y)=>{if(P&&typeof P=="object"||typeof P=="function")for(let te of it(P))!yn.call(re,te)&&te!==V&&It(re,te,{get:()=>P[te],enumerable:!(Y=fn(P,te))||Y.enumerable});return re},In=(re,P,V)=>(V=re!=null?xe(Qt(re)):{},Kt(P||!re||!re.__esModule?It(V,"default",{value:re,enumerable:!0}):V,re)),vn=ii(re=>{"use strict";Object.defineProperty(re,"__esModule",{value:!0});function P(d,a){if(d==null)return{};var m={},S=Object.keys(d),$,ne;for(ne=0;ne<S.length;ne++)$=S[ne],!(a.indexOf($)>=0)&&(m[$]=d[$]);return m}var V=class{constructor(d,a,m){this.line=void 0,this.column=void 0,this.index=void 0,this.line=d,this.column=a,this.index=m}},Y=class{constructor(d,a){this.start=void 0,this.end=void 0,this.filename=void 0,this.identifierName=void 0,this.start=d,this.end=a}};function te(d,a){let{line:m,column:S,index:$}=d;return new V(m,S+a,$+a)}var we="BABEL_PARSER_SOURCETYPE_MODULE_REQUIRED",Ce={ImportMetaOutsideModule:{message:`import.meta may appear only with 'sourceType: "module"'`,code:we},ImportOutsideModule:{message:`'import' and 'export' may appear only with 'sourceType: "module"'`,code:we}},We={ArrayPattern:"array destructuring pattern",AssignmentExpression:"assignment expression",AssignmentPattern:"assignment expression",ArrowFunctionExpression:"arrow function expression",ConditionalExpression:"conditional expression",CatchClause:"catch clause",ForOfStatement:"for-of statement",ForInStatement:"for-in statement",ForStatement:"for-loop",FormalParameters:"function parameter list",Identifier:"identifier",ImportSpecifier:"import specifier",ImportDefaultSpecifier:"import default specifier",ImportNamespaceSpecifier:"import namespace specifier",ObjectPattern:"object destructuring pattern",ParenthesizedExpression:"parenthesized expression",RestElement:"rest element",UpdateExpression:{true:"prefix operation",false:"postfix operation"},VariableDeclarator:"variable declaration",YieldExpression:"yield expression"},Dt=({type:d,prefix:a})=>d==="UpdateExpression"?We.UpdateExpression[String(a)]:We[d],jt={AccessorIsGenerator:({kind:d})=>`A ${d}ter cannot be a generator.`,ArgumentsInClass:"'arguments' is only allowed in functions and class methods.",AsyncFunctionInSingleStatementContext:"Async functions can only be declared at the top level or inside a block.",AwaitBindingIdentifier:"Can not use 'await' as identifier inside an async function.",AwaitBindingIdentifierInStaticBlock:"Can not use 'await' as identifier inside a static block.",AwaitExpressionFormalParameter:"'await' is not allowed in async function parameters.",AwaitUsingNotInAsyncContext:"'await using' is only allowed within async functions and at the top levels of modules.",AwaitNotInAsyncContext:"'await' is only allowed within async functions and at the top levels of modules.",AwaitNotInAsyncFunction:"'await' is only allowed within async functions.",BadGetterArity:"A 'get' accessor must not have any formal parameters.",BadSetterArity:"A 'set' accessor must have exactly one formal parameter.",BadSetterRestParameter:"A 'set' accessor function argument must not be a rest parameter.",ConstructorClassField:"Classes may not have a field named 'constructor'.",ConstructorClassPrivateField:"Classes may not have a private field named '#constructor'.",ConstructorIsAccessor:"Class constructor may not be an accessor.",ConstructorIsAsync:"Constructor can't be an async function.",ConstructorIsGenerator:"Constructor can't be a generator.",DeclarationMissingInitializer:({kind:d})=>`Missing initializer in ${d} declaration.`,DecoratorArgumentsOutsideParentheses:"Decorator arguments must be moved inside parentheses: use '@(decorator(args))' instead of '@(decorator)(args)'.",DecoratorBeforeExport:"Decorators must be placed *before* the 'export' keyword. Remove the 'decoratorsBeforeExport: true' option to use the 'export @decorator class {}' syntax.",DecoratorsBeforeAfterExport:"Decorators can be placed *either* before or after the 'export' keyword, but not in both locations at the same time.",DecoratorConstructor:"Decorators can't be used with a constructor. Did you mean '@dec class { ... }'?",DecoratorExportClass:"Decorators must be placed *after* the 'export' keyword. Remove the 'decoratorsBeforeExport: false' option to use the '@decorator export class {}' syntax.",DecoratorSemicolon:"Decorators must not be followed by a semicolon.",DecoratorStaticBlock:"Decorators can't be used with a static block.",DeferImportRequiresNamespace:'Only `import defer * as x from "./module"` is valid.',DeletePrivateField:"Deleting a private field is not allowed.",DestructureNamedImport:"ES2015 named imports do not destructure. Use another statement for destructuring after the import.",DuplicateConstructor:"Duplicate constructor in the same class.",DuplicateDefaultExport:"Only one default export allowed per module.",DuplicateExport:({exportName:d})=>`\`${d}\` has already been exported. Exported identifiers must be unique.`,DuplicateProto:"Redefinition of __proto__ property.",DuplicateRegExpFlags:"Duplicate regular expression flag.",DynamicImportPhaseRequiresImportExpressions:({phase:d})=>`'import.${d}(...)' can only be parsed when using the 'createImportExpressions' option.`,ElementAfterRest:"Rest element must be last element.",EscapedCharNotAnIdentifier:"Invalid Unicode escape.",ExportBindingIsString:({localName:d,exportName:a})=>`A string literal cannot be used as an exported binding without \`from\`.
- Did you mean \`export { '${d}' as '${a}' } from 'some-module'\`?`,ExportDefaultFromAsIdentifier:"'from' is not allowed as an identifier after 'export default'.",ForInOfLoopInitializer:({type:d})=>`'${d==="ForInStatement"?"for-in":"for-of"}' loop variable declaration may not have an initializer.`,ForInUsing:"For-in loop may not start with 'using' declaration.",ForOfAsync:"The left-hand side of a for-of loop may not be 'async'.",ForOfLet:"The left-hand side of a for-of loop may not start with 'let'.",GeneratorInSingleStatementContext:"Generators can only be declared at the top level or inside a block.",IllegalBreakContinue:({type:d})=>`Unsyntactic ${d==="BreakStatement"?"break":"continue"}.`,IllegalLanguageModeDirective:"Illegal 'use strict' directive in function with non-simple parameter list.",IllegalReturn:"'return' outside of function.",ImportAttributesUseAssert:"The `assert` keyword in import attributes is deprecated and it has been replaced by the `with` keyword. You can enable the `deprecatedAssertSyntax: true` option in the import attributes plugin to suppress this error.",ImportBindingIsString:({importName:d})=>`A string literal cannot be used as an imported binding.
- Did you mean \`import { "${d}" as foo }\`?`,ImportCallArgumentTrailingComma:"Trailing comma is disallowed inside import(...) arguments.",ImportCallArity:({maxArgumentCount:d})=>`\`import()\` requires exactly ${d===1?"one argument":"one or two arguments"}.`,ImportCallNotNewExpression:"Cannot use new with import(...).",ImportCallSpreadArgument:"`...` is not allowed in `import()`.",ImportJSONBindingNotDefault:"A JSON module can only be imported with `default`.",ImportReflectionHasAssertion:"`import module x` cannot have assertions.",ImportReflectionNotBinding:'Only `import module x from "./module"` is valid.',IncompatibleRegExpUVFlags:"The 'u' and 'v' regular expression flags cannot be enabled at the same time.",InvalidBigIntLiteral:"Invalid BigIntLiteral.",InvalidCodePoint:"Code point out of bounds.",InvalidCoverInitializedName:"Invalid shorthand property initializer.",InvalidDecimal:"Invalid decimal.",InvalidDigit:({radix:d})=>`Expected number in radix ${d}.`,InvalidEscapeSequence:"Bad character escape sequence.",InvalidEscapeSequenceTemplate:"Invalid escape sequence in template.",InvalidEscapedReservedWord:({reservedWord:d})=>`Escape sequence in keyword ${d}.`,InvalidIdentifier:({identifierName:d})=>`Invalid identifier ${d}.`,InvalidLhs:({ancestor:d})=>`Invalid left-hand side in ${Dt(d)}.`,InvalidLhsBinding:({ancestor:d})=>`Binding invalid left-hand side in ${Dt(d)}.`,InvalidLhsOptionalChaining:({ancestor:d})=>`Invalid optional chaining in the left-hand side of ${Dt(d)}.`,InvalidNumber:"Invalid number.",InvalidOrMissingExponent:"Floating-point numbers require a valid exponent after the 'e'.",InvalidOrUnexpectedToken:({unexpected:d})=>`Unexpected character '${d}'.`,InvalidParenthesizedAssignment:"Invalid parenthesized assignment pattern.",InvalidPrivateFieldResolution:({identifierName:d})=>`Private name #${d} is not defined.`,InvalidPropertyBindingPattern:"Binding member expression.",InvalidRecordProperty:"Only properties and spread elements are allowed in record definitions.",InvalidRestAssignmentPattern:"Invalid rest operator's argument.",LabelRedeclaration:({labelName:d})=>`Label '${d}' is already declared.`,LetInLexicalBinding:"'let' is disallowed as a lexically bound name.",LineTerminatorBeforeArrow:"No line break is allowed before '=>'.",MalformedRegExpFlags:"Invalid regular expression flag.",MissingClassName:"A class name is required.",MissingEqInAssignment:"Only '=' operator can be used for specifying default value.",MissingSemicolon:"Missing semicolon.",MissingPlugin:({missingPlugin:d})=>`This experimental syntax requires enabling the parser plugin: ${d.map(a=>JSON.stringify(a)).join(", ")}.`,MissingOneOfPlugins:({missingPlugin:d})=>`This experimental syntax requires enabling one of the following parser plugin(s): ${d.map(a=>JSON.stringify(a)).join(", ")}.`,MissingUnicodeEscape:"Expecting Unicode escape sequence \\uXXXX.",MixingCoalesceWithLogical:"Nullish coalescing operator(??) requires parens when mixing with logical operators.",ModuleAttributeDifferentFromType:"The only accepted module attribute is `type`.",ModuleAttributeInvalidValue:"Only string literals are allowed as module attribute values.",ModuleAttributesWithDuplicateKeys:({key:d})=>`Duplicate key "${d}" is not allowed in module attributes.`,ModuleExportNameHasLoneSurrogate:({surrogateCharCode:d})=>`An export name cannot include a lone surrogate, found '\\u${d.toString(16)}'.`,ModuleExportUndefined:({localName:d})=>`Export '${d}' is not defined.`,MultipleDefaultsInSwitch:"Multiple default clauses.",NewlineAfterThrow:"Illegal newline after throw.",NoCatchOrFinally:"Missing catch or finally clause.",NumberIdentifier:"Identifier directly after number.",NumericSeparatorInEscapeSequence:"Numeric separators are not allowed inside unicode escape sequences or hex escape sequences.",ObsoleteAwaitStar:"'await*' has been removed from the async functions proposal. Use Promise.all() instead.",OptionalChainingNoNew:"Constructors in/after an Optional Chain are not allowed.",OptionalChainingNoTemplate:"Tagged Template Literals are not allowed in optionalChain.",OverrideOnConstructor:"'override' modifier cannot appear on a constructor declaration.",ParamDupe:"Argument name clash.",PatternHasAccessor:"Object pattern can't contain getter or setter.",PatternHasMethod:"Object pattern can't contain methods.",PrivateInExpectedIn:({identifierName:d})=>`Private names are only allowed in property accesses (\`obj.#${d}\`) or in \`in\` expressions (\`#${d} in obj\`).`,PrivateNameRedeclaration:({identifierName:d})=>`Duplicate private name #${d}.`,RecordExpressionBarIncorrectEndSyntaxType:"Record expressions ending with '|}' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'bar'.",RecordExpressionBarIncorrectStartSyntaxType:"Record expressions starting with '{|' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'bar'.",RecordExpressionHashIncorrectStartSyntaxType:"Record expressions starting with '#{' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'hash'.",RecordNoProto:"'__proto__' is not allowed in Record expressions.",RestTrailingComma:"Unexpected trailing comma after rest element.",SloppyFunction:"In non-strict mode code, functions can only be declared at top level or inside a block.",SloppyFunctionAnnexB:"In non-strict mode code, functions can only be declared at top level, inside a block, or as the body of an if statement.",SourcePhaseImportRequiresDefault:'Only `import source x from "./module"` is valid.',StaticPrototype:"Classes may not have static property named prototype.",SuperNotAllowed:"`super()` is only valid inside a class constructor of a subclass. Maybe a typo in the method name ('constructor') or not extending another class?",SuperPrivateField:"Private fields can't be accessed on super.",TrailingDecorator:"Decorators must be attached to a class element.",TupleExpressionBarIncorrectEndSyntaxType:"Tuple expressions ending with '|]' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'bar'.",TupleExpressionBarIncorrectStartSyntaxType:"Tuple expressions starting with '[|' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'bar'.",TupleExpressionHashIncorrectStartSyntaxType:"Tuple expressions starting with '#[' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'hash'.",UnexpectedArgumentPlaceholder:"Unexpected argument placeholder.",UnexpectedAwaitAfterPipelineBody:'Unexpected "await" after pipeline body; await must have parentheses in minimal proposal.',UnexpectedDigitAfterHash:"Unexpected digit after hash token.",UnexpectedImportExport:"'import' and 'export' may only appear at the top level.",UnexpectedKeyword:({keyword:d})=>`Unexpected keyword '${d}'.`,UnexpectedLeadingDecorator:"Leading decorators must be attached to a class declaration.",UnexpectedLexicalDeclaration:"Lexical declaration cannot appear in a single-statement context.",UnexpectedNewTarget:"`new.target` can only be used in functions or class properties.",UnexpectedNumericSeparator:"A numeric separator is only allowed between two digits.",UnexpectedPrivateField:"Unexpected private name.",UnexpectedReservedWord:({reservedWord:d})=>`Unexpected reserved word '${d}'.`,UnexpectedSuper:"'super' is only allowed in object methods and classes.",UnexpectedToken:({expected:d,unexpected:a})=>`Unexpected token${a?` '${a}'.`:""}${d?`, expected "${d}"`:""}`,UnexpectedTokenUnaryExponentiation:"Illegal expression. Wrap left hand side or entire exponentiation in parentheses.",UnexpectedUsingDeclaration:"Using declaration cannot appear in the top level when source type is `script`.",UnsupportedBind:"Binding should be performed on object property.",UnsupportedDecoratorExport:"A decorated export must export a class declaration.",UnsupportedDefaultExport:"Only expressions, functions or classes are allowed as the `default` export.",UnsupportedImport:"`import` can only be used in `import()` or `import.meta`.",UnsupportedMetaProperty:({target:d,onlyValidPropertyName:a})=>`The only valid meta property for ${d} is ${d}.${a}.`,UnsupportedParameterDecorator:"Decorators cannot be used to decorate parameters.",UnsupportedPropertyDecorator:"Decorators cannot be used to decorate object literal properties.",UnsupportedSuper:"'super' can only be used with function calls (i.e. super()) or in property accesses (i.e. super.prop or super[prop]).",UnterminatedComment:"Unterminated comment.",UnterminatedRegExp:"Unterminated regular expression.",UnterminatedString:"Unterminated string constant.",UnterminatedTemplate:"Unterminated template.",UsingDeclarationHasBindingPattern:"Using declaration cannot have destructuring patterns.",VarRedeclaration:({identifierName:d})=>`Identifier '${d}' has already been declared.`,YieldBindingIdentifier:"Can not use 'yield' as identifier inside a generator.",YieldInParameter:"Yield expression is not allowed in formal parameters.",ZeroDigitNumericSeparator:"Numeric separator can not be used after leading 0."},xn={StrictDelete:"Deleting local variable in strict mode.",StrictEvalArguments:({referenceName:d})=>`Assigning to '${d}' in strict mode.`,StrictEvalArgumentsBinding:({bindingName:d})=>`Binding '${d}' in strict mode.`,StrictFunction:"In strict mode code, functions can only be declared at top level or inside a block.",StrictNumericEscape:"The only valid numeric escape in strict mode is '\\0'.",StrictOctalLiteral:"Legacy octal literals are not allowed in strict mode.",StrictWith:"'with' in strict mode."},Tn=new Set(["ArrowFunctionExpression","AssignmentExpression","ConditionalExpression","YieldExpression"]),mi={PipeBodyIsTighter:"Unexpected yield after pipeline body; any yield expression acting as Hack-style pipe body must be parenthesized due to its loose operator precedence.",PipeTopicRequiresHackPipes:'Topic reference is used, but the pipelineOperator plugin was not passed a "proposal": "hack" or "smart" option.',PipeTopicUnbound:"Topic reference is unbound; it must be inside a pipe body.",PipeTopicUnconfiguredToken:({token:d})=>`Invalid topic token ${d}. In order to use ${d} as a topic reference, the pipelineOperator plugin must be configured with { "proposal": "hack", "topicToken": "${d}" }.`,PipeTopicUnused:"Hack-style pipe body does not contain a topic reference; Hack-style pipes must use topic at least once.",PipeUnparenthesizedBody:({type:d})=>`Hack-style pipe body cannot be an unparenthesized ${Dt({type:d})}; please wrap it in parentheses.`,PipelineBodyNoArrow:'Unexpected arrow "=>" after pipeline body; arrow function in pipeline body must be parenthesized.',PipelineBodySequenceExpression:"Pipeline body may not be a comma-separated sequence expression.",PipelineHeadSequenceExpression:"Pipeline head should not be a comma-separated sequence expression.",PipelineTopicUnused:"Pipeline is in topic style but does not use topic reference.",PrimaryTopicNotAllowed:"Topic reference was used in a lexical context without topic binding.",PrimaryTopicRequiresSmartPipeline:'Topic reference is used, but the pipelineOperator plugin was not passed a "proposal": "hack" or "smart" option.'},vi=["toMessage"],ws=["message"];function ho(d,a,m){Object.defineProperty(d,a,{enumerable:!1,configurable:!0,value:m})}function pr(d){let{toMessage:a}=d,m=P(d,vi);return function S($,ne){let ve=new SyntaxError;return Object.assign(ve,m,{loc:$,pos:$.index}),"missingPlugin"in ne&&Object.assign(ve,{missingPlugin:ne.missingPlugin}),ho(ve,"clone",function(qe={}){var ct;let{line:at,column:On,index:ui}=(ct=qe.loc)!=null?ct:$;return S(new V(at,On,ui),Object.assign({},ne,qe.details))}),ho(ve,"details",ne),Object.defineProperty(ve,"message",{configurable:!0,get(){let qe=`${a(ne)} (${$.line}:${$.column})`;return this.message=qe,qe},set(qe){Object.defineProperty(this,"message",{value:qe,writable:!0})}}),ve}}function Fi(d,a){if(Array.isArray(d))return S=>Fi(S,d[0]);let m={};for(let S of Object.keys(d)){let $=d[S],ne=typeof $=="string"?{message:()=>$}:typeof $=="function"?{message:$}:$,{message:ve}=ne,qe=P(ne,ws),ct=typeof ve=="string"?()=>ve:ve;m[S]=pr(Object.assign({code:"BABEL_PARSER_SYNTAX_ERROR",reasonCode:S,toMessage:ct},a?{syntaxPlugin:a}:{},qe))}return m}var rt=Object.assign({},Fi(Ce),Fi(jt),Fi(xn),Fi`pipelineOperator`(mi)),{defineProperty:so}=Object,To=(d,a)=>so(d,a,{enumerable:!1,value:d[a]});function Os(d){return d.loc.start&&To(d.loc.start,"index"),d.loc.end&&To(d.loc.end,"index"),d}var ds=d=>class extends d{parse(){let a=Os(super.parse());return this.options.tokens&&(a.tokens=a.tokens.map(Os)),a}parseRegExpLiteral({pattern:a,flags:m}){let S=null;try{S=new RegExp(a,m)}catch(ne){}let $=this.estreeParseLiteral(S);return $.regex={pattern:a,flags:m},$}parseBigIntLiteral(a){let m;try{m=BigInt(a)}catch($){m=null}let S=this.estreeParseLiteral(m);return S.bigint=String(S.value||a),S}parseDecimalLiteral(a){let m=this.estreeParseLiteral(null);return m.decimal=String(m.value||a),m}estreeParseLiteral(a){return this.parseLiteral(a,"Literal")}parseStringLiteral(a){return this.estreeParseLiteral(a)}parseNumericLiteral(a){return this.estreeParseLiteral(a)}parseNullLiteral(){return this.estreeParseLiteral(null)}parseBooleanLiteral(a){return this.estreeParseLiteral(a)}directiveToStmt(a){let m=a.value;delete a.value,m.type="Literal",m.raw=m.extra.raw,m.value=m.extra.expressionValue;let S=a;return S.type="ExpressionStatement",S.expression=m,S.directive=m.extra.rawValue,delete m.extra,S}initFunction(a,m){super.initFunction(a,m),a.expression=!1}checkDeclaration(a){a!=null&&this.isObjectProperty(a)?this.checkDeclaration(a.value):super.checkDeclaration(a)}getObjectOrClassMethodParams(a){return a.value.params}isValidDirective(a){var m;return a.type==="ExpressionStatement"&&a.expression.type==="Literal"&&typeof a.expression.value=="string"&&!((m=a.expression.extra)!=null&&m.parenthesized)}parseBlockBody(a,m,S,$,ne){super.parseBlockBody(a,m,S,$,ne);let ve=a.directives.map(qe=>this.directiveToStmt(qe));a.body=ve.concat(a.body),delete a.directives}pushClassMethod(a,m,S,$,ne,ve){this.parseMethod(m,S,$,ne,ve,"ClassMethod",!0),m.typeParameters&&(m.value.typeParameters=m.typeParameters,delete m.typeParameters),a.body.push(m)}parsePrivateName(){let a=super.parsePrivateName();return this.getPluginOption("estree","classFeatures")?this.convertPrivateNameToPrivateIdentifier(a):a}convertPrivateNameToPrivateIdentifier(a){let m=super.getPrivateNameSV(a);return a=a,delete a.id,a.name=m,a.type="PrivateIdentifier",a}isPrivateName(a){return this.getPluginOption("estree","classFeatures")?a.type==="PrivateIdentifier":super.isPrivateName(a)}getPrivateNameSV(a){return this.getPluginOption("estree","classFeatures")?a.name:super.getPrivateNameSV(a)}parseLiteral(a,m){let S=super.parseLiteral(a,m);return S.raw=S.extra.raw,delete S.extra,S}parseFunctionBody(a,m,S=!1){super.parseFunctionBody(a,m,S),a.expression=a.body.type!=="BlockStatement"}parseMethod(a,m,S,$,ne,ve,qe=!1){let ct=this.startNode();return ct.kind=a.kind,ct=super.parseMethod(ct,m,S,$,ne,ve,qe),ct.type="FunctionExpression",delete ct.kind,a.value=ct,ve==="ClassPrivateMethod"&&(a.computed=!1),this.finishNode(a,"MethodDefinition")}parseClassProperty(...a){let m=super.parseClassProperty(...a);return this.getPluginOption("estree","classFeatures")&&(m.type="PropertyDefinition"),m}parseClassPrivateProperty(...a){let m=super.parseClassPrivateProperty(...a);return this.getPluginOption("estree","classFeatures")&&(m.type="PropertyDefinition",m.computed=!1),m}parseObjectMethod(a,m,S,$,ne){let ve=super.parseObjectMethod(a,m,S,$,ne);return ve&&(ve.type="Property",ve.kind==="method"&&(ve.kind="init"),ve.shorthand=!1),ve}parseObjectProperty(a,m,S,$){let ne=super.parseObjectProperty(a,m,S,$);return ne&&(ne.kind="init",ne.type="Property"),ne}isValidLVal(a,m,S){return a==="Property"?"value":super.isValidLVal(a,m,S)}isAssignable(a,m){return a!=null&&this.isObjectProperty(a)?this.isAssignable(a.value,m):super.isAssignable(a,m)}toAssignable(a,m=!1){if(a!=null&&this.isObjectProperty(a)){let{key:S,value:$}=a;this.isPrivateName(S)&&this.classScope.usePrivateName(this.getPrivateNameSV(S),S.loc.start),this.toAssignable($,m)}else super.toAssignable(a,m)}toAssignableObjectExpressionProp(a,m,S){a.kind==="get"||a.kind==="set"?this.raise(rt.PatternHasAccessor,a.key):a.method?this.raise(rt.PatternHasMethod,a.key):super.toAssignableObjectExpressionProp(a,m,S)}finishCallExpression(a,m){let S=super.finishCallExpression(a,m);if(S.callee.type==="Import"){if(S.type="ImportExpression",S.source=S.arguments[0],this.hasPlugin("importAttributes")||this.hasPlugin("importAssertions")){var $,ne;S.options=($=S.arguments[1])!=null?$:null,S.attributes=(ne=S.arguments[1])!=null?ne:null}delete S.arguments,delete S.callee}return S}toReferencedArguments(a){a.type!=="ImportExpression"&&super.toReferencedArguments(a)}parseExport(a,m){let S=this.state.lastTokStartLoc,$=super.parseExport(a,m);switch($.type){case"ExportAllDeclaration":$.exported=null;break;case"ExportNamedDeclaration":$.specifiers.length===1&&$.specifiers[0].type==="ExportNamespaceSpecifier"&&($.type="ExportAllDeclaration",$.exported=$.specifiers[0].exported,delete $.specifiers);case"ExportDefaultDeclaration":{var ne;let{declaration:ve}=$;(ve==null?void 0:ve.type)==="ClassDeclaration"&&((ne=ve.decorators)==null?void 0:ne.length)>0&&ve.start===$.start&&this.resetStartLocation($,S)}break}return $}parseSubscript(a,m,S,$){let ne=super.parseSubscript(a,m,S,$);if($.optionalChainMember){if((ne.type==="OptionalMemberExpression"||ne.type==="OptionalCallExpression")&&(ne.type=ne.type.substring(8)),$.stop){let ve=this.startNodeAtNode(ne);return ve.expression=ne,this.finishNode(ve,"ChainExpression")}}else(ne.type==="MemberExpression"||ne.type==="CallExpression")&&(ne.optional=!1);return ne}isOptionalMemberExpression(a){return a.type==="ChainExpression"?a.expression.type==="MemberExpression":super.isOptionalMemberExpression(a)}hasPropertyAsPrivateName(a){return a.type==="ChainExpression"&&(a=a.expression),super.hasPropertyAsPrivateName(a)}isObjectProperty(a){return a.type==="Property"&&a.kind==="init"&&!a.method}isObjectMethod(a){return a.method||a.kind==="get"||a.kind==="set"}finishNodeAt(a,m,S){return Os(super.finishNodeAt(a,m,S))}resetStartLocation(a,m){super.resetStartLocation(a,m),Os(a)}resetEndLocation(a,m=this.state.lastTokEndLoc){super.resetEndLocation(a,m),Os(a)}},Oo=class{constructor(d,a){this.token=void 0,this.preserveSpace=void 0,this.token=d,this.preserveSpace=!!a}},nr={brace:new Oo("{"),j_oTag:new Oo("<tag"),j_cTag:new Oo("</tag"),j_expr:new Oo("<tag>...</tag>",!0)};nr.template=new Oo("`",!0);var wi=!0,Mn=!0,ks=!0,jo=!0,Zr=!0,aa=!0,ka=class{constructor(d,a={}){this.label=void 0,this.keyword=void 0,this.beforeExpr=void 0,this.startsExpr=void 0,this.rightAssociative=void 0,this.isLoop=void 0,this.isAssign=void 0,this.prefix=void 0,this.postfix=void 0,this.binop=void 0,this.label=d,this.keyword=a.keyword,this.beforeExpr=!!a.beforeExpr,this.startsExpr=!!a.startsExpr,this.rightAssociative=!!a.rightAssociative,this.isLoop=!!a.isLoop,this.isAssign=!!a.isAssign,this.prefix=!!a.prefix,this.postfix=!!a.postfix,this.binop=a.binop!=null?a.binop:null,this.updateContext=null}},fa=new Map;function ps(d,a={}){a.keyword=d;let m=Be(d,a);return fa.set(d,m),m}function no(d,a){return Be(d,{beforeExpr:wi,binop:a})}var Eo=-1,go=[],Xo=[],Ae=[],Z=[],pe=[],Ne=[];function Be(d,a={}){var m,S,$,ne;return++Eo,Xo.push(d),Ae.push((m=a.binop)!=null?m:-1),Z.push((S=a.beforeExpr)!=null?S:!1),pe.push(($=a.startsExpr)!=null?$:!1),Ne.push((ne=a.prefix)!=null?ne:!1),go.push(new ka(d,a)),Eo}function ut(d,a={}){var m,S,$,ne;return++Eo,fa.set(d,Eo),Xo.push(d),Ae.push((m=a.binop)!=null?m:-1),Z.push((S=a.beforeExpr)!=null?S:!1),pe.push(($=a.startsExpr)!=null?$:!1),Ne.push((ne=a.prefix)!=null?ne:!1),go.push(new ka("name",a)),Eo}var Ft={bracketL:Be("[",{beforeExpr:wi,startsExpr:Mn}),bracketHashL:Be("#[",{beforeExpr:wi,startsExpr:Mn}),bracketBarL:Be("[|",{beforeExpr:wi,startsExpr:Mn}),bracketR:Be("]"),bracketBarR:Be("|]"),braceL:Be("{",{beforeExpr:wi,startsExpr:Mn}),braceBarL:Be("{|",{beforeExpr:wi,startsExpr:Mn}),braceHashL:Be("#{",{beforeExpr:wi,startsExpr:Mn}),braceR:Be("}"),braceBarR:Be("|}"),parenL:Be("(",{beforeExpr:wi,startsExpr:Mn}),parenR:Be(")"),comma:Be(",",{beforeExpr:wi}),semi:Be(";",{beforeExpr:wi}),colon:Be(":",{beforeExpr:wi}),doubleColon:Be("::",{beforeExpr:wi}),dot:Be("."),question:Be("?",{beforeExpr:wi}),questionDot:Be("?."),arrow:Be("=>",{beforeExpr:wi}),template:Be("template"),ellipsis:Be("...",{beforeExpr:wi}),backQuote:Be("`",{startsExpr:Mn}),dollarBraceL:Be("${",{beforeExpr:wi,startsExpr:Mn}),templateTail:Be("...`",{startsExpr:Mn}),templateNonTail:Be("...${",{beforeExpr:wi,startsExpr:Mn}),at:Be("@"),hash:Be("#",{startsExpr:Mn}),interpreterDirective:Be("#!..."),eq:Be("=",{beforeExpr:wi,isAssign:jo}),assign:Be("_=",{beforeExpr:wi,isAssign:jo}),slashAssign:Be("_=",{beforeExpr:wi,isAssign:jo}),xorAssign:Be("_=",{beforeExpr:wi,isAssign:jo}),moduloAssign:Be("_=",{beforeExpr:wi,isAssign:jo}),incDec:Be("++/--",{prefix:Zr,postfix:aa,startsExpr:Mn}),bang:Be("!",{beforeExpr:wi,prefix:Zr,startsExpr:Mn}),tilde:Be("~",{beforeExpr:wi,prefix:Zr,startsExpr:Mn}),doubleCaret:Be("^^",{startsExpr:Mn}),doubleAt:Be("@@",{startsExpr:Mn}),pipeline:no("|>",0),nullishCoalescing:no("??",1),logicalOR:no("||",1),logicalAND:no("&&",2),bitwiseOR:no("|",3),bitwiseXOR:no("^",4),bitwiseAND:no("&",5),equality:no("==/!=/===/!==",6),lt:no("</>/<=/>=",7),gt:no("</>/<=/>=",7),relational:no("</>/<=/>=",7),bitShift:no("<</>>/>>>",8),bitShiftL:no("<</>>/>>>",8),bitShiftR:no("<</>>/>>>",8),plusMin:Be("+/-",{beforeExpr:wi,binop:9,prefix:Zr,startsExpr:Mn}),modulo:Be("%",{binop:10,startsExpr:Mn}),star:Be("*",{binop:10}),slash:no("/",10),exponent:Be("**",{beforeExpr:wi,binop:11,rightAssociative:!0}),_in:ps("in",{beforeExpr:wi,binop:7}),_instanceof:ps("instanceof",{beforeExpr:wi,binop:7}),_break:ps("break"),_case:ps("case",{beforeExpr:wi}),_catch:ps("catch"),_continue:ps("continue"),_debugger:ps("debugger"),_default:ps("default",{beforeExpr:wi}),_else:ps("else",{beforeExpr:wi}),_finally:ps("finally"),_function:ps("function",{startsExpr:Mn}),_if:ps("if"),_return:ps("return",{beforeExpr:wi}),_switch:ps("switch"),_throw:ps("throw",{beforeExpr:wi,prefix:Zr,startsExpr:Mn}),_try:ps("try"),_var:ps("var"),_const:ps("const"),_with:ps("with"),_new:ps("new",{beforeExpr:wi,startsExpr:Mn}),_this:ps("this",{startsExpr:Mn}),_super:ps("super",{startsExpr:Mn}),_class:ps("class",{startsExpr:Mn}),_extends:ps("extends",{beforeExpr:wi}),_export:ps("export"),_import:ps("import",{startsExpr:Mn}),_null:ps("null",{startsExpr:Mn}),_true:ps("true",{startsExpr:Mn}),_false:ps("false",{startsExpr:Mn}),_typeof:ps("typeof",{beforeExpr:wi,prefix:Zr,startsExpr:Mn}),_void:ps("void",{beforeExpr:wi,prefix:Zr,startsExpr:Mn}),_delete:ps("delete",{beforeExpr:wi,prefix:Zr,startsExpr:Mn}),_do:ps("do",{isLoop:ks,beforeExpr:wi}),_for:ps("for",{isLoop:ks}),_while:ps("while",{isLoop:ks}),_as:ut("as",{startsExpr:Mn}),_assert:ut("assert",{startsExpr:Mn}),_async:ut("async",{startsExpr:Mn}),_await:ut("await",{startsExpr:Mn}),_defer:ut("defer",{startsExpr:Mn}),_from:ut("from",{startsExpr:Mn}),_get:ut("get",{startsExpr:Mn}),_let:ut("let",{startsExpr:Mn}),_meta:ut("meta",{startsExpr:Mn}),_of:ut("of",{startsExpr:Mn}),_sent:ut("sent",{startsExpr:Mn}),_set:ut("set",{startsExpr:Mn}),_source:ut("source",{startsExpr:Mn}),_static:ut("static",{startsExpr:Mn}),_using:ut("using",{startsExpr:Mn}),_yield:ut("yield",{startsExpr:Mn}),_asserts:ut("asserts",{startsExpr:Mn}),_checks:ut("checks",{startsExpr:Mn}),_exports:ut("exports",{startsExpr:Mn}),_global:ut("global",{startsExpr:Mn}),_implements:ut("implements",{startsExpr:Mn}),_intrinsic:ut("intrinsic",{startsExpr:Mn}),_infer:ut("infer",{startsExpr:Mn}),_is:ut("is",{startsExpr:Mn}),_mixins:ut("mixins",{startsExpr:Mn}),_proto:ut("proto",{startsExpr:Mn}),_require:ut("require",{startsExpr:Mn}),_satisfies:ut("satisfies",{startsExpr:Mn}),_keyof:ut("keyof",{startsExpr:Mn}),_readonly:ut("readonly",{startsExpr:Mn}),_unique:ut("unique",{startsExpr:Mn}),_abstract:ut("abstract",{startsExpr:Mn}),_declare:ut("declare",{startsExpr:Mn}),_enum:ut("enum",{startsExpr:Mn}),_module:ut("module",{startsExpr:Mn}),_namespace:ut("namespace",{startsExpr:Mn}),_interface:ut("interface",{startsExpr:Mn}),_type:ut("type",{startsExpr:Mn}),_opaque:ut("opaque",{startsExpr:Mn}),name:Be("name",{startsExpr:Mn}),string:Be("string",{startsExpr:Mn}),num:Be("num",{startsExpr:Mn}),bigint:Be("bigint",{startsExpr:Mn}),decimal:Be("decimal",{startsExpr:Mn}),regexp:Be("regexp",{startsExpr:Mn}),privateName:Be("#name",{startsExpr:Mn}),eof:Be("eof"),jsxName:Be("jsxName"),jsxText:Be("jsxText",{beforeExpr:!0}),jsxTagStart:Be("jsxTagStart",{startsExpr:!0}),jsxTagEnd:Be("jsxTagEnd"),placeholder:Be("%%",{startsExpr:!0})};function Xt(d){return d>=93&&d<=132}function mn(d){return d<=92}function ri(d){return d>=58&&d<=132}function rr(d){return d>=58&&d<=136}function Xi(d){return Z[d]}function Vo(d){return pe[d]}function yo(d){return d>=29&&d<=33}function Vs(d){return d>=129&&d<=131}function ko(d){return d>=90&&d<=92}function Uo(d){return d>=58&&d<=92}function la(d){return d>=39&&d<=59}function Ys(d){return d===34}function Ai(d){return Ne[d]}function ll(d){return d>=121&&d<=123}function si(d){return d>=124&&d<=130}function Zo(d){return Xo[d]}function ma(d){return Ae[d]}function ul(d){return d===57}function ia(d){return d>=24&&d<=25}function Ro(d){return go[d]}go[8].updateContext=d=>{d.pop()},go[5].updateContext=go[7].updateContext=go[23].updateContext=d=>{d.push(nr.brace)},go[22].updateContext=d=>{d[d.length-1]===nr.template?d.pop():d.push(nr.template)},go[142].updateContext=d=>{d.push(nr.j_expr,nr.j_oTag)};var La="\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC",Ar="\u200C\u200D\xB7\u0300-\u036F\u0387\u0483-\u0487\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u0669\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u06F0-\u06F9\u0711\u0730-\u074A\u07A6-\u07B0\u07C0-\u07C9\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0966-\u096F\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09E6-\u09EF\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A66-\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AE6-\u0AEF\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B66-\u0B6F\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0BE6-\u0BEF\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CE6-\u0CEF\u0CF3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D66-\u0D6F\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0E50-\u0E59\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0ED0-\u0ED9\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1040-\u1049\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F-\u109D\u135D-\u135F\u1369-\u1371\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u17E0-\u17E9\u180B-\u180D\u180F-\u1819\u18A9\u1920-\u192B\u1930-\u193B\u1946-\u194F\u19D0-\u19DA\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AB0-\u1ABD\u1ABF-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BB0-\u1BB9\u1BE6-\u1BF3\u1C24-\u1C37\u1C40-\u1C49\u1C50-\u1C59\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u200C\u200D\u203F\u2040\u2054\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\u30FB\uA620-\uA629\uA66F\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F1\uA8FF-\uA909\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9D0-\uA9D9\uA9E5\uA9F0-\uA9F9\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA50-\uAA59\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uABF0-\uABF9\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFF10-\uFF19\uFF3F\uFF65",il=new RegExp("["+La+"]"),Jo=new RegExp("["+La+Ar+"]");La=Ar=null;var J=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],Ee=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239];function je(d,a){let m=65536;for(let S=0,$=a.length;S<$;S+=2){if(m+=a[S],m>d)return!1;if(m+=a[S+1],m>=d)return!0}return!1}function Je(d){return d<65?d===36:d<=90?!0:d<97?d===95:d<=122?!0:d<=65535?d>=170&&il.test(String.fromCharCode(d)):je(d,J)}function Ct(d){return d<48?d===36:d<58?!0:d<65?!1:d<=90?!0:d<97?d===95:d<=122?!0:d<=65535?d>=170&&Jo.test(String.fromCharCode(d)):je(d,J)||je(d,Ee)}var Nt={keyword:["break","case","catch","continue","debugger","default","do","else","finally","for","function","if","return","switch","throw","try","var","const","while","with","new","this","super","class","extends","export","import","null","true","false","in","instanceof","typeof","void","delete"],strict:["implements","interface","let","package","private","protected","public","static","yield"],strictBind:["eval","arguments"]},pn=new Set(Nt.keyword),ai=new Set(Nt.strict),zi=new Set(Nt.strictBind);function as(d,a){return a&&d==="await"||d==="enum"}function Pr(d,a){return as(d,a)||ai.has(d)}function fr(d){return zi.has(d)}function _o(d,a){return Pr(d,a)||fr(d)}function Co(d){return pn.has(d)}function De(d,a,m){return d===64&&a===64&&Je(m)}var He=new Set(["break","case","catch","continue","debugger","default","do","else","finally","for","function","if","return","switch","throw","try","var","const","while","with","new","this","super","class","extends","export","import","null","true","false","in","instanceof","typeof","void","delete","implements","interface","let","package","private","protected","public","static","yield","eval","arguments","enum","await"]);function ht(d){return He.has(d)}var vt=class{constructor(d){this.flags=0,this.names=new Map,this.firstLexicalName="",this.flags=d}},Bt=class{constructor(d,a){this.parser=void 0,this.scopeStack=[],this.inModule=void 0,this.undefinedExports=new Map,this.parser=d,this.inModule=a}get inTopLevel(){return(this.currentScope().flags&1)>0}get inFunction(){return(this.currentVarScopeFlags()&2)>0}get allowSuper(){return(this.currentThisScopeFlags()&16)>0}get allowDirectSuper(){return(this.currentThisScopeFlags()&32)>0}get inClass(){return(this.currentThisScopeFlags()&64)>0}get inClassAndNotInNonArrowFunction(){let d=this.currentThisScopeFlags();return(d&64)>0&&(d&2)===0}get inStaticBlock(){for(let d=this.scopeStack.length-1;;d--){let{flags:a}=this.scopeStack[d];if(a&128)return!0;if(a&451)return!1}}get inNonArrowFunction(){return(this.currentThisScopeFlags()&2)>0}get treatFunctionsAsVar(){return this.treatFunctionsAsVarInScope(this.currentScope())}createScope(d){return new vt(d)}enter(d){this.scopeStack.push(this.createScope(d))}exit(){return this.scopeStack.pop().flags}treatFunctionsAsVarInScope(d){return!!(d.flags&130||!this.parser.inModule&&d.flags&1)}declareName(d,a,m){let S=this.currentScope();if(a&8||a&16){this.checkRedeclarationInScope(S,d,a,m);let $=S.names.get(d)||0;a&16?$=$|4:(S.firstLexicalName||(S.firstLexicalName=d),$=$|2),S.names.set(d,$),a&8&&this.maybeExportDefined(S,d)}else if(a&4)for(let $=this.scopeStack.length-1;$>=0&&(S=this.scopeStack[$],this.checkRedeclarationInScope(S,d,a,m),S.names.set(d,(S.names.get(d)||0)|1),this.maybeExportDefined(S,d),!(S.flags&387));--$);this.parser.inModule&&S.flags&1&&this.undefinedExports.delete(d)}maybeExportDefined(d,a){this.parser.inModule&&d.flags&1&&this.undefinedExports.delete(a)}checkRedeclarationInScope(d,a,m,S){this.isRedeclaredInScope(d,a,m)&&this.parser.raise(rt.VarRedeclaration,S,{identifierName:a})}isRedeclaredInScope(d,a,m){if(!(m&1))return!1;if(m&8)return d.names.has(a);let S=d.names.get(a);return m&16?(S&2)>0||!this.treatFunctionsAsVarInScope(d)&&(S&1)>0:(S&2)>0&&!(d.flags&8&&d.firstLexicalName===a)||!this.treatFunctionsAsVarInScope(d)&&(S&4)>0}checkLocalExport(d){let{name:a}=d;this.scopeStack[0].names.has(a)||this.undefinedExports.set(a,d.loc.start)}currentScope(){return this.scopeStack[this.scopeStack.length-1]}currentVarScopeFlags(){for(let d=this.scopeStack.length-1;;d--){let{flags:a}=this.scopeStack[d];if(a&387)return a}}currentThisScopeFlags(){for(let d=this.scopeStack.length-1;;d--){let{flags:a}=this.scopeStack[d];if(a&451&&!(a&4))return a}}},zt=class extends vt{constructor(...d){super(...d),this.declareFunctions=new Set}},Ot=class extends Bt{createScope(d){return new zt(d)}declareName(d,a,m){let S=this.currentScope();if(a&2048){this.checkRedeclarationInScope(S,d,a,m),this.maybeExportDefined(S,d),S.declareFunctions.add(d);return}super.declareName(d,a,m)}isRedeclaredInScope(d,a,m){if(super.isRedeclaredInScope(d,a,m))return!0;if(m&2048&&!d.declareFunctions.has(a)){let S=d.names.get(a);return(S&4)>0||(S&2)>0}return!1}checkLocalExport(d){this.scopeStack[0].declareFunctions.has(d.name)||super.checkLocalExport(d)}},mt=class{constructor(){this.sawUnambiguousESM=!1,this.ambiguousScriptDifferentAst=!1}hasPlugin(d){if(typeof d=="string")return this.plugins.has(d);{let[a,m]=d;if(!this.hasPlugin(a))return!1;let S=this.plugins.get(a);for(let $ of Object.keys(m))if((S==null?void 0:S[$])!==m[$])return!1;return!0}}getPluginOption(d,a){var m;return(m=this.plugins.get(d))==null?void 0:m[a]}};function on(d,a){d.trailingComments===void 0?d.trailingComments=a:d.trailingComments.unshift(...a)}function En(d,a){d.leadingComments===void 0?d.leadingComments=a:d.leadingComments.unshift(...a)}function kn(d,a){d.innerComments===void 0?d.innerComments=a:d.innerComments.unshift(...a)}function yi(d,a,m){let S=null,$=a.length;for(;S===null&&$>0;)S=a[--$];S===null||S.start>m.start?kn(d,m.comments):on(S,m.comments)}var gi=class extends mt{addComment(d){this.filename&&(d.loc.filename=this.filename);let{commentsLen:a}=this.state;this.comments.length!=a&&(this.comments.length=a),this.comments.push(d),this.state.commentsLen++}processComment(d){let{commentStack:a}=this.state,m=a.length;if(m===0)return;let S=m-1,$=a[S];$.start===d.end&&($.leadingNode=d,S--);let{start:ne}=d;for(;S>=0;S--){let ve=a[S],qe=ve.end;if(qe>ne)ve.containingNode=d,this.finalizeComment(ve),a.splice(S,1);else{qe===ne&&(ve.trailingNode=d);break}}}finalizeComment(d){let{comments:a}=d;if(d.leadingNode!==null||d.trailingNode!==null)d.leadingNode!==null&&on(d.leadingNode,a),d.trailingNode!==null&&En(d.trailingNode,a);else{let{containingNode:m,start:S}=d;if(this.input.charCodeAt(S-1)===44)switch(m.type){case"ObjectExpression":case"ObjectPattern":case"RecordExpression":yi(m,m.properties,d);break;case"CallExpression":case"OptionalCallExpression":yi(m,m.arguments,d);break;case"FunctionDeclaration":case"FunctionExpression":case"ArrowFunctionExpression":case"ObjectMethod":case"ClassMethod":case"ClassPrivateMethod":yi(m,m.params,d);break;case"ArrayExpression":case"ArrayPattern":case"TupleExpression":yi(m,m.elements,d);break;case"ExportNamedDeclaration":case"ImportDeclaration":yi(m,m.specifiers,d);break;default:kn(m,a)}else kn(m,a)}}finalizeRemainingComments(){let{commentStack:d}=this.state;for(let a=d.length-1;a>=0;a--)this.finalizeComment(d[a]);this.state.commentStack=[]}resetPreviousNodeTrailingComments(d){let{commentStack:a}=this.state,{length:m}=a;if(m===0)return;let S=a[m-1];S.leadingNode===d&&(S.leadingNode=null)}resetPreviousIdentifierLeadingComments(d){let{commentStack:a}=this.state,{length:m}=a;m!==0&&(a[m-1].trailingNode===d?a[m-1].trailingNode=null:m>=2&&a[m-2].trailingNode===d&&(a[m-2].trailingNode=null))}takeSurroundingComments(d,a,m){let{commentStack:S}=this.state,$=S.length;if($===0)return;let ne=$-1;for(;ne>=0;ne--){let ve=S[ne],qe=ve.end;if(ve.start===m)ve.leadingNode=d;else if(qe===a)ve.trailingNode=d;else if(qe<a)break}}},Wi=/\r\n?|[\n\u2028\u2029]/,Xn=new RegExp(Wi.source,"g");function Yn(d){switch(d){case 10:case 13:case 8232:case 8233:return!0;default:return!1}}var Ht=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,$r=/(?:[^\S\n\r\u2028\u2029]|\/\/.*|\/\*.*?\*\/)*/g,kt=new RegExp("(?=("+$r.source+"))\\1"+/(?=[\n\r\u2028\u2029]|\/\*(?!.*?\*\/)|$)/.source,"y");function Bi(d){switch(d){case 9:case 11:case 12:case 32:case 160:case 5760:case 8192:case 8193:case 8194:case 8195:case 8196:case 8197:case 8198:case 8199:case 8200:case 8201:case 8202:case 8239:case 8287:case 12288:case 65279:return!0;default:return!1}}var Tr=class TF{constructor(){this.flags=1024,this.curLine=void 0,this.lineStart=void 0,this.startLoc=void 0,this.endLoc=void 0,this.errors=[],this.potentialArrowAt=-1,this.noArrowAt=[],this.noArrowParamsConversionAt=[],this.topicContext={maxNumOfResolvableTopics:0,maxTopicIndex:null},this.labels=[],this.commentsLen=0,this.commentStack=[],this.pos=0,this.type=139,this.value=null,this.start=0,this.end=0,this.lastTokEndLoc=null,this.lastTokStartLoc=null,this.context=[nr.brace],this.firstInvalidTemplateEscapePos=null,this.strictErrors=new Map,this.tokensLength=0}get strict(){return(this.flags&1)>0}set strict(a){a?this.flags|=1:this.flags&=-2}init({strictMode:a,sourceType:m,startLine:S,startColumn:$}){this.strict=a===!1?!1:a===!0?!0:m==="module",this.curLine=S,this.lineStart=-$,this.startLoc=this.endLoc=new V(S,$,0)}get maybeInArrowParameters(){return(this.flags&2)>0}set maybeInArrowParameters(a){a?this.flags|=2:this.flags&=-3}get inType(){return(this.flags&4)>0}set inType(a){a?this.flags|=4:this.flags&=-5}get noAnonFunctionType(){return(this.flags&8)>0}set noAnonFunctionType(a){a?this.flags|=8:this.flags&=-9}get hasFlowComment(){return(this.flags&16)>0}set hasFlowComment(a){a?this.flags|=16:this.flags&=-17}get isAmbientContext(){return(this.flags&32)>0}set isAmbientContext(a){a?this.flags|=32:this.flags&=-33}get inAbstractClass(){return(this.flags&64)>0}set inAbstractClass(a){a?this.flags|=64:this.flags&=-65}get inDisallowConditionalTypesContext(){return(this.flags&128)>0}set inDisallowConditionalTypesContext(a){a?this.flags|=128:this.flags&=-129}get soloAwait(){return(this.flags&256)>0}set soloAwait(a){a?this.flags|=256:this.flags&=-257}get inFSharpPipelineDirectBody(){return(this.flags&512)>0}set inFSharpPipelineDirectBody(a){a?this.flags|=512:this.flags&=-513}get canStartJSXElement(){return(this.flags&1024)>0}set canStartJSXElement(a){a?this.flags|=1024:this.flags&=-1025}get containsEsc(){return(this.flags&2048)>0}set containsEsc(a){a?this.flags|=2048:this.flags&=-2049}curPosition(){return new V(this.curLine,this.pos-this.lineStart,this.pos)}clone(){let a=new TF;return a.flags=this.flags,a.curLine=this.curLine,a.lineStart=this.lineStart,a.startLoc=this.startLoc,a.endLoc=this.endLoc,a.errors=this.errors.slice(),a.potentialArrowAt=this.potentialArrowAt,a.noArrowAt=this.noArrowAt.slice(),a.noArrowParamsConversionAt=this.noArrowParamsConversionAt.slice(),a.topicContext=this.topicContext,a.labels=this.labels.slice(),a.commentsLen=this.commentsLen,a.commentStack=this.commentStack.slice(),a.pos=this.pos,a.type=this.type,a.value=this.value,a.start=this.start,a.end=this.end,a.lastTokEndLoc=this.lastTokEndLoc,a.lastTokStartLoc=this.lastTokStartLoc,a.context=this.context.slice(),a.firstInvalidTemplateEscapePos=this.firstInvalidTemplateEscapePos,a.strictErrors=this.strictErrors,a.tokensLength=this.tokensLength,a}},Mi=function(d){return d>=48&&d<=57},Ur={decBinOct:new Set([46,66,69,79,95,98,101,111]),hex:new Set([46,88,95,120])},Ei={bin:d=>d===48||d===49,oct:d=>d>=48&&d<=55,dec:d=>d>=48&&d<=57,hex:d=>d>=48&&d<=57||d>=65&&d<=70||d>=97&&d<=102};function Xr(d,a,m,S,$,ne){let ve=m,qe=S,ct=$,at="",On=null,ui=m,{length:Yi}=a;for(;;){if(m>=Yi){ne.unterminated(ve,qe,ct),at+=a.slice(ui,m);break}let ji=a.charCodeAt(m);if(lr(d,ji,a,m)){at+=a.slice(ui,m);break}if(ji===92){at+=a.slice(ui,m);let Ls=Ci(a,m,S,$,d==="template",ne);Ls.ch===null&&!On?On={pos:m,lineStart:S,curLine:$}:at+=Ls.ch,{pos:m,lineStart:S,curLine:$}=Ls,ui=m}else ji===8232||ji===8233?(++m,++$,S=m):ji===10||ji===13?d==="template"?(at+=a.slice(ui,m)+`
`,++m,ji===13&&a.charCodeAt(m)===10&&++m,++$,ui=S=m):ne.unterminated(ve,qe,ct):++m}return{pos:m,str:at,firstInvalidLoc:On,lineStart:S,curLine:$,containsInvalid:!!On}}function lr(d,a,m,S){return d==="template"?a===96||a===36&&m.charCodeAt(S+1)===123:a===(d==="double"?34:39)}function Ci(d,a,m,S,$,ne){let ve=!$;a++;let qe=at=>({pos:a,ch:at,lineStart:m,curLine:S}),ct=d.charCodeAt(a++);switch(ct){case 110:return qe(`
`);case 114:return qe("\r");case 120:{let at;return{code:at,pos:a}=Or(d,a,m,S,2,!1,ve,ne),qe(at===null?null:String.fromCharCode(at))}case 117:{let at;return{code:at,pos:a}=sr(d,a,m,S,ve,ne),qe(at===null?null:String.fromCodePoint(at))}case 116:return qe("	");case 98:return qe("\b");case 118:return qe("\v");case 102:return qe("\f");case 13:d.charCodeAt(a)===10&&++a;case 10:m=a,++S;case 8232:case 8233:return qe("");case 56:case 57:if($)return qe(null);ne.strictNumericEscape(a-1,m,S);default:if(ct>=48&&ct<=55){let at=a-1,On=d.slice(at,a+2).match(/^[0-7]+/)[0],ui=parseInt(On,8);ui>255&&(On=On.slice(0,-1),ui=parseInt(On,8)),a+=On.length-1;let Yi=d.charCodeAt(a);if(On!=="0"||Yi===56||Yi===57){if($)return qe(null);ne.strictNumericEscape(at,m,S)}return qe(String.fromCharCode(ui))}return qe(String.fromCharCode(ct))}}function Or(d,a,m,S,$,ne,ve,qe){let ct=a,at;return{n:at,pos:a}=Gs(d,a,m,S,16,$,ne,!1,qe,!ve),at===null&&(ve?qe.invalidEscapeSequence(ct,m,S):a=ct-1),{code:at,pos:a}}function Gs(d,a,m,S,$,ne,ve,qe,ct,at){let On=a,ui=$===16?Ur.hex:Ur.decBinOct,Yi=$===16?Ei.hex:$===10?Ei.dec:$===8?Ei.oct:Ei.bin,ji=!1,Ls=0;for(let Zs=0,ea=ne!=null?ne:1/0;Zs<ea;++Zs){let sa=d.charCodeAt(a),Pa;if(sa===95&&qe!=="bail"){let Lu=d.charCodeAt(a-1),Vl=d.charCodeAt(a+1);if(qe){if(Number.isNaN(Vl)||!Yi(Vl)||ui.has(Lu)||ui.has(Vl)){if(at)return{n:null,pos:a};ct.unexpectedNumericSeparator(a,m,S)}}else{if(at)return{n:null,pos:a};ct.numericSeparatorInEscapeSequence(a,m,S)}++a;continue}if(sa>=97?Pa=sa-97+10:sa>=65?Pa=sa-65+10:Mi(sa)?Pa=sa-48:Pa=1/0,Pa>=$){if(Pa<=9&&at)return{n:null,pos:a};if(Pa<=9&&ct.invalidDigit(a,m,S,$))Pa=0;else if(ve)Pa=0,ji=!0;else break}++a,Ls=Ls*$+Pa}return a===On||ne!=null&&a-On!==ne||ji?{n:null,pos:a}:{n:Ls,pos:a}}function sr(d,a,m,S,$,ne){let ve=d.charCodeAt(a),qe;if(ve===123){if(++a,{code:qe,pos:a}=Or(d,a,m,S,d.indexOf("}",a)-a,!0,$,ne),++a,qe!==null&&qe>1114111)if($)ne.invalidCodePoint(a,m,S);else return{code:null,pos:a}}else({code:qe,pos:a}=Or(d,a,m,S,4,!1,$,ne));return{code:qe,pos:a}}function Sn(d,a,m){return new V(m,d-a,d)}var ln=new Set([103,109,115,105,121,117,100,118]),Yt=class{constructor(d){this.type=d.type,this.value=d.value,this.start=d.start,this.end=d.end,this.loc=new Y(d.startLoc,d.endLoc)}},ti=class extends gi{constructor(d,a){super(),this.isLookahead=void 0,this.tokens=[],this.errorHandlers_readInt={invalidDigit:(m,S,$,ne)=>this.options.errorRecovery?(this.raise(rt.InvalidDigit,Sn(m,S,$),{radix:ne}),!0):!1,numericSeparatorInEscapeSequence:this.errorBuilder(rt.NumericSeparatorInEscapeSequence),unexpectedNumericSeparator:this.errorBuilder(rt.UnexpectedNumericSeparator)},this.errorHandlers_readCodePoint=Object.assign({},this.errorHandlers_readInt,{invalidEscapeSequence:this.errorBuilder(rt.InvalidEscapeSequence),invalidCodePoint:this.errorBuilder(rt.InvalidCodePoint)}),this.errorHandlers_readStringContents_string=Object.assign({},this.errorHandlers_readCodePoint,{strictNumericEscape:(m,S,$)=>{this.recordStrictModeErrors(rt.StrictNumericEscape,Sn(m,S,$))},unterminated:(m,S,$)=>{throw this.raise(rt.UnterminatedString,Sn(m-1,S,$))}}),this.errorHandlers_readStringContents_template=Object.assign({},this.errorHandlers_readCodePoint,{strictNumericEscape:this.errorBuilder(rt.StrictNumericEscape),unterminated:(m,S,$)=>{throw this.raise(rt.UnterminatedTemplate,Sn(m,S,$))}}),this.state=new Tr,this.state.init(d),this.input=a,this.length=a.length,this.comments=[],this.isLookahead=!1}pushToken(d){this.tokens.length=this.state.tokensLength,this.tokens.push(d),++this.state.tokensLength}next(){this.checkKeywordEscapes(),this.options.tokens&&this.pushToken(new Yt(this.state)),this.state.lastTokEndLoc=this.state.endLoc,this.state.lastTokStartLoc=this.state.startLoc,this.nextToken()}eat(d){return this.match(d)?(this.next(),!0):!1}match(d){return this.state.type===d}createLookaheadState(d){return{pos:d.pos,value:null,type:d.type,start:d.start,end:d.end,context:[this.curContext()],inType:d.inType,startLoc:d.startLoc,lastTokEndLoc:d.lastTokEndLoc,curLine:d.curLine,lineStart:d.lineStart,curPosition:d.curPosition}}lookahead(){let d=this.state;this.state=this.createLookaheadState(d),this.isLookahead=!0,this.nextToken(),this.isLookahead=!1;let a=this.state;return this.state=d,a}nextTokenStart(){return this.nextTokenStartSince(this.state.pos)}nextTokenStartSince(d){return Ht.lastIndex=d,Ht.test(this.input)?Ht.lastIndex:d}lookaheadCharCode(){return this.input.charCodeAt(this.nextTokenStart())}nextTokenInLineStart(){return this.nextTokenInLineStartSince(this.state.pos)}nextTokenInLineStartSince(d){return $r.lastIndex=d,$r.test(this.input)?$r.lastIndex:d}lookaheadInLineCharCode(){return this.input.charCodeAt(this.nextTokenInLineStart())}codePointAtPos(d){let a=this.input.charCodeAt(d);if((a&64512)===55296&&++d<this.input.length){let m=this.input.charCodeAt(d);(m&64512)===56320&&(a=65536+((a&1023)<<10)+(m&1023))}return a}setStrict(d){this.state.strict=d,d&&(this.state.strictErrors.forEach(([a,m])=>this.raise(a,m)),this.state.strictErrors.clear())}curContext(){return this.state.context[this.state.context.length-1]}nextToken(){if(this.skipSpace(),this.state.start=this.state.pos,this.isLookahead||(this.state.startLoc=this.state.curPosition()),this.state.pos>=this.length){this.finishToken(139);return}this.getTokenFromCode(this.codePointAtPos(this.state.pos))}skipBlockComment(d){let a;this.isLookahead||(a=this.state.curPosition());let m=this.state.pos,S=this.input.indexOf(d,m+2);if(S===-1)throw this.raise(rt.UnterminatedComment,this.state.curPosition());for(this.state.pos=S+d.length,Xn.lastIndex=m+2;Xn.test(this.input)&&Xn.lastIndex<=S;)++this.state.curLine,this.state.lineStart=Xn.lastIndex;if(this.isLookahead)return;let $={type:"CommentBlock",value:this.input.slice(m+2,S),start:m,end:S+d.length,loc:new Y(a,this.state.curPosition())};return this.options.tokens&&this.pushToken($),$}skipLineComment(d){let a=this.state.pos,m;this.isLookahead||(m=this.state.curPosition());let S=this.input.charCodeAt(this.state.pos+=d);if(this.state.pos<this.length)for(;!Yn(S)&&++this.state.pos<this.length;)S=this.input.charCodeAt(this.state.pos);if(this.isLookahead)return;let $=this.state.pos,ne={type:"CommentLine",value:this.input.slice(a+d,$),start:a,end:$,loc:new Y(m,this.state.curPosition())};return this.options.tokens&&this.pushToken(ne),ne}skipSpace(){let d=this.state.pos,a=[];e:for(;this.state.pos<this.length;){let m=this.input.charCodeAt(this.state.pos);switch(m){case 32:case 160:case 9:++this.state.pos;break;case 13:this.input.charCodeAt(this.state.pos+1)===10&&++this.state.pos;case 10:case 8232:case 8233:++this.state.pos,++this.state.curLine,this.state.lineStart=this.state.pos;break;case 47:switch(this.input.charCodeAt(this.state.pos+1)){case 42:{let S=this.skipBlockComment("*/");S!==void 0&&(this.addComment(S),this.options.attachComment&&a.push(S));break}case 47:{let S=this.skipLineComment(2);S!==void 0&&(this.addComment(S),this.options.attachComment&&a.push(S));break}default:break e}break;default:if(Bi(m))++this.state.pos;else if(m===45&&!this.inModule&&this.options.annexB){let S=this.state.pos;if(this.input.charCodeAt(S+1)===45&&this.input.charCodeAt(S+2)===62&&(d===0||this.state.lineStart>d)){let $=this.skipLineComment(3);$!==void 0&&(this.addComment($),this.options.attachComment&&a.push($))}else break e}else if(m===60&&!this.inModule&&this.options.annexB){let S=this.state.pos;if(this.input.charCodeAt(S+1)===33&&this.input.charCodeAt(S+2)===45&&this.input.charCodeAt(S+3)===45){let $=this.skipLineComment(4);$!==void 0&&(this.addComment($),this.options.attachComment&&a.push($))}else break e}else break e}}if(a.length>0){let m=this.state.pos,S={start:d,end:m,comments:a,leadingNode:null,trailingNode:null,containingNode:null};this.state.commentStack.push(S)}}finishToken(d,a){this.state.end=this.state.pos,this.state.endLoc=this.state.curPosition();let m=this.state.type;this.state.type=d,this.state.value=a,this.isLookahead||this.updateContext(m)}replaceToken(d){this.state.type=d,this.updateContext()}readToken_numberSign(){if(this.state.pos===0&&this.readToken_interpreter())return;let d=this.state.pos+1,a=this.codePointAtPos(d);if(a>=48&&a<=57)throw this.raise(rt.UnexpectedDigitAfterHash,this.state.curPosition());if(a===123||a===91&&this.hasPlugin("recordAndTuple")){if(this.expectPlugin("recordAndTuple"),this.getPluginOption("recordAndTuple","syntaxType")==="bar")throw this.raise(a===123?rt.RecordExpressionHashIncorrectStartSyntaxType:rt.TupleExpressionHashIncorrectStartSyntaxType,this.state.curPosition());this.state.pos+=2,a===123?this.finishToken(7):this.finishToken(1)}else Je(a)?(++this.state.pos,this.finishToken(138,this.readWord1(a))):a===92?(++this.state.pos,this.finishToken(138,this.readWord1())):this.finishOp(27,1)}readToken_dot(){let d=this.input.charCodeAt(this.state.pos+1);if(d>=48&&d<=57){this.readNumber(!0);return}d===46&&this.input.charCodeAt(this.state.pos+2)===46?(this.state.pos+=3,this.finishToken(21)):(++this.state.pos,this.finishToken(16))}readToken_slash(){this.input.charCodeAt(this.state.pos+1)===61?this.finishOp(31,2):this.finishOp(56,1)}readToken_interpreter(){if(this.state.pos!==0||this.length<2)return!1;let d=this.input.charCodeAt(this.state.pos+1);if(d!==33)return!1;let a=this.state.pos;for(this.state.pos+=1;!Yn(d)&&++this.state.pos<this.length;)d=this.input.charCodeAt(this.state.pos);let m=this.input.slice(a+2,this.state.pos);return this.finishToken(28,m),!0}readToken_mult_modulo(d){let a=d===42?55:54,m=1,S=this.input.charCodeAt(this.state.pos+1);d===42&&S===42&&(m++,S=this.input.charCodeAt(this.state.pos+2),a=57),S===61&&!this.state.inType&&(m++,a=d===37?33:30),this.finishOp(a,m)}readToken_pipe_amp(d){let a=this.input.charCodeAt(this.state.pos+1);if(a===d){this.input.charCodeAt(this.state.pos+2)===61?this.finishOp(30,3):this.finishOp(d===124?41:42,2);return}if(d===124){if(a===62){this.finishOp(39,2);return}if(this.hasPlugin("recordAndTuple")&&a===125){if(this.getPluginOption("recordAndTuple","syntaxType")!=="bar")throw this.raise(rt.RecordExpressionBarIncorrectEndSyntaxType,this.state.curPosition());this.state.pos+=2,this.finishToken(9);return}if(this.hasPlugin("recordAndTuple")&&a===93){if(this.getPluginOption("recordAndTuple","syntaxType")!=="bar")throw this.raise(rt.TupleExpressionBarIncorrectEndSyntaxType,this.state.curPosition());this.state.pos+=2,this.finishToken(4);return}}if(a===61){this.finishOp(30,2);return}this.finishOp(d===124?43:45,1)}readToken_caret(){let d=this.input.charCodeAt(this.state.pos+1);d===61&&!this.state.inType?this.finishOp(32,2):d===94&&this.hasPlugin(["pipelineOperator",{proposal:"hack",topicToken:"^^"}])?(this.finishOp(37,2),this.input.codePointAt(this.state.pos)===94&&this.unexpected()):this.finishOp(44,1)}readToken_atSign(){this.input.charCodeAt(this.state.pos+1)===64&&this.hasPlugin(["pipelineOperator",{proposal:"hack",topicToken:"@@"}])?this.finishOp(38,2):this.finishOp(26,1)}readToken_plus_min(d){let a=this.input.charCodeAt(this.state.pos+1);if(a===d){this.finishOp(34,2);return}a===61?this.finishOp(30,2):this.finishOp(53,1)}readToken_lt(){let{pos:d}=this.state,a=this.input.charCodeAt(d+1);if(a===60){if(this.input.charCodeAt(d+2)===61){this.finishOp(30,3);return}this.finishOp(51,2);return}if(a===61){this.finishOp(49,2);return}this.finishOp(47,1)}readToken_gt(){let{pos:d}=this.state,a=this.input.charCodeAt(d+1);if(a===62){let m=this.input.charCodeAt(d+2)===62?3:2;if(this.input.charCodeAt(d+m)===61){this.finishOp(30,m+1);return}this.finishOp(52,m);return}if(a===61){this.finishOp(49,2);return}this.finishOp(48,1)}readToken_eq_excl(d){let a=this.input.charCodeAt(this.state.pos+1);if(a===61){this.finishOp(46,this.input.charCodeAt(this.state.pos+2)===61?3:2);return}if(d===61&&a===62){this.state.pos+=2,this.finishToken(19);return}this.finishOp(d===61?29:35,1)}readToken_question(){let d=this.input.charCodeAt(this.state.pos+1),a=this.input.charCodeAt(this.state.pos+2);d===63?a===61?this.finishOp(30,3):this.finishOp(40,2):d===46&&!(a>=48&&a<=57)?(this.state.pos+=2,this.finishToken(18)):(++this.state.pos,this.finishToken(17))}getTokenFromCode(d){switch(d){case 46:this.readToken_dot();return;case 40:++this.state.pos,this.finishToken(10);return;case 41:++this.state.pos,this.finishToken(11);return;case 59:++this.state.pos,this.finishToken(13);return;case 44:++this.state.pos,this.finishToken(12);return;case 91:if(this.hasPlugin("recordAndTuple")&&this.input.charCodeAt(this.state.pos+1)===124){if(this.getPluginOption("recordAndTuple","syntaxType")!=="bar")throw this.raise(rt.TupleExpressionBarIncorrectStartSyntaxType,this.state.curPosition());this.state.pos+=2,this.finishToken(2)}else++this.state.pos,this.finishToken(0);return;case 93:++this.state.pos,this.finishToken(3);return;case 123:if(this.hasPlugin("recordAndTuple")&&this.input.charCodeAt(this.state.pos+1)===124){if(this.getPluginOption("recordAndTuple","syntaxType")!=="bar")throw this.raise(rt.RecordExpressionBarIncorrectStartSyntaxType,this.state.curPosition());this.state.pos+=2,this.finishToken(6)}else++this.state.pos,this.finishToken(5);return;case 125:++this.state.pos,this.finishToken(8);return;case 58:this.hasPlugin("functionBind")&&this.input.charCodeAt(this.state.pos+1)===58?this.finishOp(15,2):(++this.state.pos,this.finishToken(14));return;case 63:this.readToken_question();return;case 96:this.readTemplateToken();return;case 48:{let a=this.input.charCodeAt(this.state.pos+1);if(a===120||a===88){this.readRadixNumber(16);return}if(a===111||a===79){this.readRadixNumber(8);return}if(a===98||a===66){this.readRadixNumber(2);return}}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:this.readNumber(!1);return;case 34:case 39:this.readString(d);return;case 47:this.readToken_slash();return;case 37:case 42:this.readToken_mult_modulo(d);return;case 124:case 38:this.readToken_pipe_amp(d);return;case 94:this.readToken_caret();return;case 43:case 45:this.readToken_plus_min(d);return;case 60:this.readToken_lt();return;case 62:this.readToken_gt();return;case 61:case 33:this.readToken_eq_excl(d);return;case 126:this.finishOp(36,1);return;case 64:this.readToken_atSign();return;case 35:this.readToken_numberSign();return;case 92:this.readWord();return;default:if(Je(d)){this.readWord(d);return}}throw this.raise(rt.InvalidOrUnexpectedToken,this.state.curPosition(),{unexpected:String.fromCodePoint(d)})}finishOp(d,a){let m=this.input.slice(this.state.pos,this.state.pos+a);this.state.pos+=a,this.finishToken(d,m)}readRegexp(){let d=this.state.startLoc,a=this.state.start+1,m,S,{pos:$}=this.state;for(;;++$){if($>=this.length)throw this.raise(rt.UnterminatedRegExp,te(d,1));let ct=this.input.charCodeAt($);if(Yn(ct))throw this.raise(rt.UnterminatedRegExp,te(d,1));if(m)m=!1;else{if(ct===91)S=!0;else if(ct===93&&S)S=!1;else if(ct===47&&!S)break;m=ct===92}}let ne=this.input.slice(a,$);++$;let ve="",qe=()=>te(d,$+2-a);for(;$<this.length;){let ct=this.codePointAtPos($),at=String.fromCharCode(ct);if(ln.has(ct))ct===118?ve.includes("u")&&this.raise(rt.IncompatibleRegExpUVFlags,qe()):ct===117&&ve.includes("v")&&this.raise(rt.IncompatibleRegExpUVFlags,qe()),ve.includes(at)&&this.raise(rt.DuplicateRegExpFlags,qe());else if(Ct(ct)||ct===92)this.raise(rt.MalformedRegExpFlags,qe());else break;++$,ve+=at}this.state.pos=$,this.finishToken(137,{pattern:ne,flags:ve})}readInt(d,a,m=!1,S=!0){let{n:$,pos:ne}=Gs(this.input,this.state.pos,this.state.lineStart,this.state.curLine,d,a,m,S,this.errorHandlers_readInt,!1);return this.state.pos=ne,$}readRadixNumber(d){let a=this.state.curPosition(),m=!1;this.state.pos+=2;let S=this.readInt(d);S==null&&this.raise(rt.InvalidDigit,te(a,2),{radix:d});let $=this.input.charCodeAt(this.state.pos);if($===110)++this.state.pos,m=!0;else if($===109)throw this.raise(rt.InvalidDecimal,a);if(Je(this.codePointAtPos(this.state.pos)))throw this.raise(rt.NumberIdentifier,this.state.curPosition());if(m){let ne=this.input.slice(a.index,this.state.pos).replace(/[_n]/g,"");this.finishToken(135,ne);return}this.finishToken(134,S)}readNumber(d){let a=this.state.pos,m=this.state.curPosition(),S=!1,$=!1,ne=!1,ve=!1,qe=!1;!d&&this.readInt(10)===null&&this.raise(rt.InvalidNumber,this.state.curPosition());let ct=this.state.pos-a>=2&&this.input.charCodeAt(a)===48;if(ct){let Yi=this.input.slice(a,this.state.pos);if(this.recordStrictModeErrors(rt.StrictOctalLiteral,m),!this.state.strict){let ji=Yi.indexOf("_");ji>0&&this.raise(rt.ZeroDigitNumericSeparator,te(m,ji))}qe=ct&&!/[89]/.test(Yi)}let at=this.input.charCodeAt(this.state.pos);if(at===46&&!qe&&(++this.state.pos,this.readInt(10),S=!0,at=this.input.charCodeAt(this.state.pos)),(at===69||at===101)&&!qe&&(at=this.input.charCodeAt(++this.state.pos),(at===43||at===45)&&++this.state.pos,this.readInt(10)===null&&this.raise(rt.InvalidOrMissingExponent,m),S=!0,ve=!0,at=this.input.charCodeAt(this.state.pos)),at===110&&((S||ct)&&this.raise(rt.InvalidBigIntLiteral,m),++this.state.pos,$=!0),at===109&&(this.expectPlugin("decimal",this.state.curPosition()),(ve||ct)&&this.raise(rt.InvalidDecimal,m),++this.state.pos,ne=!0),Je(this.codePointAtPos(this.state.pos)))throw this.raise(rt.NumberIdentifier,this.state.curPosition());let On=this.input.slice(a,this.state.pos).replace(/[_mn]/g,"");if($){this.finishToken(135,On);return}if(ne){this.finishToken(136,On);return}let ui=qe?parseInt(On,8):parseFloat(On);this.finishToken(134,ui)}readCodePoint(d){let{code:a,pos:m}=sr(this.input,this.state.pos,this.state.lineStart,this.state.curLine,d,this.errorHandlers_readCodePoint);return this.state.pos=m,a}readString(d){let{str:a,pos:m,curLine:S,lineStart:$}=Xr(d===34?"double":"single",this.input,this.state.pos+1,this.state.lineStart,this.state.curLine,this.errorHandlers_readStringContents_string);this.state.pos=m+1,this.state.lineStart=$,this.state.curLine=S,this.finishToken(133,a)}readTemplateContinuation(){this.match(8)||this.unexpected(null,8),this.state.pos--,this.readTemplateToken()}readTemplateToken(){let d=this.input[this.state.pos],{str:a,firstInvalidLoc:m,pos:S,curLine:$,lineStart:ne}=Xr("template",this.input,this.state.pos+1,this.state.lineStart,this.state.curLine,this.errorHandlers_readStringContents_template);this.state.pos=S+1,this.state.lineStart=ne,this.state.curLine=$,m&&(this.state.firstInvalidTemplateEscapePos=new V(m.curLine,m.pos-m.lineStart,m.pos)),this.input.codePointAt(S)===96?this.finishToken(24,m?null:d+a+"`"):(this.state.pos++,this.finishToken(25,m?null:d+a+"${"))}recordStrictModeErrors(d,a){let m=a.index;this.state.strict&&!this.state.strictErrors.has(m)?this.raise(d,a):this.state.strictErrors.set(m,[d,a])}readWord1(d){this.state.containsEsc=!1;let a="",m=this.state.pos,S=this.state.pos;for(d!==void 0&&(this.state.pos+=d<=65535?1:2);this.state.pos<this.length;){let $=this.codePointAtPos(this.state.pos);if(Ct($))this.state.pos+=$<=65535?1:2;else if($===92){this.state.containsEsc=!0,a+=this.input.slice(S,this.state.pos);let ne=this.state.curPosition(),ve=this.state.pos===m?Je:Ct;if(this.input.charCodeAt(++this.state.pos)!==117){this.raise(rt.MissingUnicodeEscape,this.state.curPosition()),S=this.state.pos-1;continue}++this.state.pos;let qe=this.readCodePoint(!0);qe!==null&&(ve(qe)||this.raise(rt.EscapedCharNotAnIdentifier,ne),a+=String.fromCodePoint(qe)),S=this.state.pos}else break}return a+this.input.slice(S,this.state.pos)}readWord(d){let a=this.readWord1(d),m=fa.get(a);m!==void 0?this.finishToken(m,Zo(m)):this.finishToken(132,a)}checkKeywordEscapes(){let{type:d}=this.state;Uo(d)&&this.state.containsEsc&&this.raise(rt.InvalidEscapedReservedWord,this.state.startLoc,{reservedWord:Zo(d)})}raise(d,a,m={}){let S=a instanceof V?a:a.loc.start,$=d(S,m);if(!this.options.errorRecovery)throw $;return this.isLookahead||this.state.errors.push($),$}raiseOverwrite(d,a,m={}){let S=a instanceof V?a:a.loc.start,$=S.index,ne=this.state.errors;for(let ve=ne.length-1;ve>=0;ve--){let qe=ne[ve];if(qe.loc.index===$)return ne[ve]=d(S,m);if(qe.loc.index<$)break}return this.raise(d,a,m)}updateContext(d){}unexpected(d,a){throw this.raise(rt.UnexpectedToken,d!=null?d:this.state.startLoc,{expected:a?Zo(a):null})}expectPlugin(d,a){if(this.hasPlugin(d))return!0;throw this.raise(rt.MissingPlugin,a!=null?a:this.state.startLoc,{missingPlugin:[d]})}expectOnePlugin(d){if(!d.some(a=>this.hasPlugin(a)))throw this.raise(rt.MissingOneOfPlugins,this.state.startLoc,{missingPlugin:d})}errorBuilder(d){return(a,m,S)=>{this.raise(d,Sn(a,m,S))}}},oo=class{constructor(){this.privateNames=new Set,this.loneAccessors=new Map,this.undefinedPrivateNames=new Map}},Oi=class{constructor(d){this.parser=void 0,this.stack=[],this.undefinedPrivateNames=new Map,this.parser=d}current(){return this.stack[this.stack.length-1]}enter(){this.stack.push(new oo)}exit(){let d=this.stack.pop(),a=this.current();for(let[m,S]of Array.from(d.undefinedPrivateNames))a?a.undefinedPrivateNames.has(m)||a.undefinedPrivateNames.set(m,S):this.parser.raise(rt.InvalidPrivateFieldResolution,S,{identifierName:m})}declarePrivateName(d,a,m){let{privateNames:S,loneAccessors:$,undefinedPrivateNames:ne}=this.current(),ve=S.has(d);if(a&3){let qe=ve&&$.get(d);if(qe){let ct=qe&4,at=a&4,On=qe&3,ui=a&3;ve=On===ui||ct!==at,ve||$.delete(d)}else ve||$.set(d,a)}ve&&this.parser.raise(rt.PrivateNameRedeclaration,m,{identifierName:d}),S.add(d),ne.delete(d)}usePrivateName(d,a){let m;for(m of this.stack)if(m.privateNames.has(d))return;m?m.undefinedPrivateNames.set(d,a):this.parser.raise(rt.InvalidPrivateFieldResolution,a,{identifierName:d})}},Fr=class{constructor(d=0){this.type=d}canBeArrowParameterDeclaration(){return this.type===2||this.type===1}isCertainlyParameterDeclaration(){return this.type===3}},_s=class extends Fr{constructor(d){super(d),this.declarationErrors=new Map}recordDeclarationError(d,a){let m=a.index;this.declarationErrors.set(m,[d,a])}clearDeclarationError(d){this.declarationErrors.delete(d)}iterateErrors(d){this.declarationErrors.forEach(d)}},Lo=class{constructor(d){this.parser=void 0,this.stack=[new Fr],this.parser=d}enter(d){this.stack.push(d)}exit(){this.stack.pop()}recordParameterInitializerError(d,a){let m=a.loc.start,{stack:S}=this,$=S.length-1,ne=S[$];for(;!ne.isCertainlyParameterDeclaration();){if(ne.canBeArrowParameterDeclaration())ne.recordDeclarationError(d,m);else return;ne=S[--$]}this.parser.raise(d,m)}recordArrowParameterBindingError(d,a){let{stack:m}=this,S=m[m.length-1],$=a.loc.start;if(S.isCertainlyParameterDeclaration())this.parser.raise(d,$);else if(S.canBeArrowParameterDeclaration())S.recordDeclarationError(d,$);else return}recordAsyncArrowParametersError(d){let{stack:a}=this,m=a.length-1,S=a[m];for(;S.canBeArrowParameterDeclaration();)S.type===2&&S.recordDeclarationError(rt.AwaitBindingIdentifier,d),S=a[--m]}validateAsPattern(){let{stack:d}=this,a=d[d.length-1];a.canBeArrowParameterDeclaration()&&a.iterateErrors(([m,S])=>{this.parser.raise(m,S);let $=d.length-2,ne=d[$];for(;ne.canBeArrowParameterDeclaration();)ne.clearDeclarationError(S.index),ne=d[--$]})}};function or(){return new Fr(3)}function kr(){return new _s(1)}function zn(){return new _s(2)}function Ri(){return new Fr}var vo=class{constructor(){this.stacks=[]}enter(d){this.stacks.push(d)}exit(){this.stacks.pop()}currentFlags(){return this.stacks[this.stacks.length-1]}get hasAwait(){return(this.currentFlags()&2)>0}get hasYield(){return(this.currentFlags()&1)>0}get hasReturn(){return(this.currentFlags()&4)>0}get hasIn(){return(this.currentFlags()&8)>0}};function zo(d,a){return(d?2:0)|(a?1:0)}var Jr=class extends ti{addExtra(d,a,m,S=!0){if(!d)return;let $=d.extra=d.extra||{};S?$[a]=m:Object.defineProperty($,a,{enumerable:S,value:m})}isContextual(d){return this.state.type===d&&!this.state.containsEsc}isUnparsedContextual(d,a){let m=d+a.length;if(this.input.slice(d,m)===a){let S=this.input.charCodeAt(m);return!(Ct(S)||(S&64512)===55296)}return!1}isLookaheadContextual(d){let a=this.nextTokenStart();return this.isUnparsedContextual(a,d)}eatContextual(d){return this.isContextual(d)?(this.next(),!0):!1}expectContextual(d,a){if(!this.eatContextual(d)){if(a!=null)throw this.raise(a,this.state.startLoc);this.unexpected(null,d)}}canInsertSemicolon(){return this.match(139)||this.match(8)||this.hasPrecedingLineBreak()}hasPrecedingLineBreak(){return Wi.test(this.input.slice(this.state.lastTokEndLoc.index,this.state.start))}hasFollowingLineBreak(){return kt.lastIndex=this.state.end,kt.test(this.input)}isLineTerminator(){return this.eat(13)||this.canInsertSemicolon()}semicolon(d=!0){(d?this.isLineTerminator():this.eat(13))||this.raise(rt.MissingSemicolon,this.state.lastTokEndLoc)}expect(d,a){this.eat(d)||this.unexpected(a,d)}tryParse(d,a=this.state.clone()){let m={node:null};try{let S=d(($=null)=>{throw m.node=$,m});if(this.state.errors.length>a.errors.length){let $=this.state;return this.state=a,this.state.tokensLength=$.tokensLength,{node:S,error:$.errors[a.errors.length],thrown:!1,aborted:!1,failState:$}}return{node:S,error:null,thrown:!1,aborted:!1,failState:null}}catch(S){let $=this.state;if(this.state=a,S instanceof SyntaxError)return{node:null,error:S,thrown:!0,aborted:!1,failState:$};if(S===m)return{node:m.node,error:null,thrown:!1,aborted:!0,failState:$};throw S}}checkExpressionErrors(d,a){if(!d)return!1;let{shorthandAssignLoc:m,doubleProtoLoc:S,privateKeyLoc:$,optionalParametersLoc:ne}=d,ve=!!m||!!S||!!ne||!!$;if(!a)return ve;m!=null&&this.raise(rt.InvalidCoverInitializedName,m),S!=null&&this.raise(rt.DuplicateProto,S),$!=null&&this.raise(rt.UnexpectedPrivateField,$),ne!=null&&this.unexpected(ne)}isLiteralPropertyName(){return rr(this.state.type)}isPrivateName(d){return d.type==="PrivateName"}getPrivateNameSV(d){return d.id.name}hasPropertyAsPrivateName(d){return(d.type==="MemberExpression"||d.type==="OptionalMemberExpression")&&this.isPrivateName(d.property)}isObjectProperty(d){return d.type==="ObjectProperty"}isObjectMethod(d){return d.type==="ObjectMethod"}initializeScopes(d=this.options.sourceType==="module"){let a=this.state.labels;this.state.labels=[];let m=this.exportedIdentifiers;this.exportedIdentifiers=new Set;let S=this.inModule;this.inModule=d;let $=this.scope,ne=this.getScopeHandler();this.scope=new ne(this,d);let ve=this.prodParam;this.prodParam=new vo;let qe=this.classScope;this.classScope=new Oi(this);let ct=this.expressionScope;return this.expressionScope=new Lo(this),()=>{this.state.labels=a,this.exportedIdentifiers=m,this.inModule=S,this.scope=$,this.prodParam=ve,this.classScope=qe,this.expressionScope=ct}}enterInitialScopes(){let d=0;this.inModule&&(d|=2),this.scope.enter(1),this.prodParam.enter(d)}checkDestructuringPrivate(d){let{privateKeyLoc:a}=d;a!==null&&this.expectPlugin("destructuringPrivate",a)}},oi=class{constructor(){this.shorthandAssignLoc=null,this.doubleProtoLoc=null,this.privateKeyLoc=null,this.optionalParametersLoc=null}},Ti=class{constructor(d,a,m){this.type="",this.start=a,this.end=0,this.loc=new Y(m),d!=null&&d.options.ranges&&(this.range=[a,0]),d!=null&&d.filename&&(this.loc.filename=d.filename)}},Mo=Ti.prototype;Mo.__clone=function(){let d=new Ti(void 0,this.start,this.loc.start),a=Object.keys(this);for(let m=0,S=a.length;m<S;m++){let $=a[m];$!=="leadingComments"&&$!=="trailingComments"&&$!=="innerComments"&&(d[$]=this[$])}return d};function Ws(d){return eo(d)}function eo(d){let{type:a,start:m,end:S,loc:$,range:ne,extra:ve,name:qe}=d,ct=Object.create(Mo);return ct.type=a,ct.start=m,ct.end=S,ct.loc=$,ct.range=ne,ct.extra=ve,ct.name=qe,a==="Placeholder"&&(ct.expectedNode=d.expectedNode),ct}function Es(d){let{type:a,start:m,end:S,loc:$,range:ne,extra:ve}=d;if(a==="Placeholder")return Ws(d);let qe=Object.create(Mo);return qe.type=a,qe.start=m,qe.end=S,qe.loc=$,qe.range=ne,d.raw!==void 0?qe.raw=d.raw:qe.extra=ve,qe.value=d.value,qe}var xs=class extends Jr{startNode(){let d=this.state.startLoc;return new Ti(this,d.index,d)}startNodeAt(d){return new Ti(this,d.index,d)}startNodeAtNode(d){return this.startNodeAt(d.loc.start)}finishNode(d,a){return this.finishNodeAt(d,a,this.state.lastTokEndLoc)}finishNodeAt(d,a,m){return d.type=a,d.end=m.index,d.loc.end=m,this.options.ranges&&(d.range[1]=m.index),this.options.attachComment&&this.processComment(d),d}resetStartLocation(d,a){d.start=a.index,d.loc.start=a,this.options.ranges&&(d.range[0]=a.index)}resetEndLocation(d,a=this.state.lastTokEndLoc){d.end=a.index,d.loc.end=a,this.options.ranges&&(d.range[1]=a.index)}resetStartLocationFromNode(d,a){this.resetStartLocation(d,a.loc.start)}},Io=new Set(["_","any","bool","boolean","empty","extends","false","interface","mixed","null","number","static","string","true","typeof","void"]),Li=Fi`flow`({AmbiguousConditionalArrow:"Ambiguous expression: wrap the arrow functions in parentheses to disambiguate.",AmbiguousDeclareModuleKind:"Found both `declare module.exports` and `declare export` in the same module. Modules can only have 1 since they are either an ES module or they are a CommonJS module.",AssignReservedType:({reservedType:d})=>`Cannot overwrite reserved type ${d}.`,DeclareClassElement:"The `declare` modifier can only appear on class fields.",DeclareClassFieldInitializer:"Initializers are not allowed in fields with the `declare` modifier.",DuplicateDeclareModuleExports:"Duplicate `declare module.exports` statement.",EnumBooleanMemberNotInitialized:({memberName:d,enumName:a})=>`Boolean enum members need to be initialized. Use either \`${d} = true,\` or \`${d} = false,\` in enum \`${a}\`.`,EnumDuplicateMemberName:({memberName:d,enumName:a})=>`Enum member names need to be unique, but the name \`${d}\` has already been used before in enum \`${a}\`.`,EnumInconsistentMemberValues:({enumName:d})=>`Enum \`${d}\` has inconsistent member initializers. Either use no initializers, or consistently use literals (either booleans, numbers, or strings) for all member initializers.`,EnumInvalidExplicitType:({invalidEnumType:d,enumName:a})=>`Enum type \`${d}\` is not valid. Use one of \`boolean\`, \`number\`, \`string\`, or \`symbol\` in enum \`${a}\`.`,EnumInvalidExplicitTypeUnknownSupplied:({enumName:d})=>`Supplied enum type is not valid. Use one of \`boolean\`, \`number\`, \`string\`, or \`symbol\` in enum \`${d}\`.`,EnumInvalidMemberInitializerPrimaryType:({enumName:d,memberName:a,explicitType:m})=>`Enum \`${d}\` has type \`${m}\`, so the initializer of \`${a}\` needs to be a ${m} literal.`,EnumInvalidMemberInitializerSymbolType:({enumName:d,memberName:a})=>`Symbol enum members cannot be initialized. Use \`${a},\` in enum \`${d}\`.`,EnumInvalidMemberInitializerUnknownType:({enumName:d,memberName:a})=>`The enum member initializer for \`${a}\` needs to be a literal (either a boolean, number, or string) in enum \`${d}\`.`,EnumInvalidMemberName:({enumName:d,memberName:a,suggestion:m})=>`Enum member names cannot start with lowercase 'a' through 'z'. Instead of using \`${a}\`, consider using \`${m}\`, in enum \`${d}\`.`,EnumNumberMemberNotInitialized:({enumName:d,memberName:a})=>`Number enum members need to be initialized, e.g. \`${a} = 1\` in enum \`${d}\`.`,EnumStringMemberInconsistentlyInitialized:({enumName:d})=>`String enum members need to consistently either all use initializers, or use no initializers, in enum \`${d}\`.`,GetterMayNotHaveThisParam:"A getter cannot have a `this` parameter.",ImportReflectionHasImportType:"An `import module` declaration can not use `type` or `typeof` keyword.",ImportTypeShorthandOnlyInPureImport:"The `type` and `typeof` keywords on named imports can only be used on regular `import` statements. It cannot be used with `import type` or `import typeof` statements.",InexactInsideExact:"Explicit inexact syntax cannot appear inside an explicit exact object type.",InexactInsideNonObject:"Explicit inexact syntax cannot appear in class or interface definitions.",InexactVariance:"Explicit inexact syntax cannot have variance.",InvalidNonTypeImportInDeclareModule:"Imports within a `declare module` body must always be `import type` or `import typeof`.",MissingTypeParamDefault:"Type parameter declaration needs a default, since a preceding type parameter declaration has a default.",NestedDeclareModule:"`declare module` cannot be used inside another `declare module`.",NestedFlowComment:"Cannot have a flow comment inside another flow comment.",PatternIsOptional:Object.assign({message:"A binding pattern parameter cannot be optional in an implementation signature."},{reasonCode:"OptionalBindingPattern"}),SetterMayNotHaveThisParam:"A setter cannot have a `this` parameter.",SpreadVariance:"Spread properties cannot have variance.",ThisParamAnnotationRequired:"A type annotation is required for the `this` parameter.",ThisParamBannedInConstructor:"Constructors cannot have a `this` parameter; constructors don't bind `this` like other functions.",ThisParamMayNotBeOptional:"The `this` parameter cannot be optional.",ThisParamMustBeFirst:"The `this` parameter must be the first function parameter.",ThisParamNoDefault:"The `this` parameter may not have a default value.",TypeBeforeInitializer:"Type annotations must come before default assignments, e.g. instead of `age = 25: number` use `age: number = 25`.",TypeCastInPattern:"The type cast expression is expected to be wrapped with parenthesis.",UnexpectedExplicitInexactInObject:"Explicit inexact syntax must appear at the end of an inexact object.",UnexpectedReservedType:({reservedType:d})=>`Unexpected reserved type ${d}.`,UnexpectedReservedUnderscore:"`_` is only allowed as a type argument to call or new.",UnexpectedSpaceBetweenModuloChecks:"Spaces between `%` and `checks` are not allowed here.",UnexpectedSpreadType:"Spread operator cannot appear in class or interface definitions.",UnexpectedSubtractionOperand:'Unexpected token, expected "number" or "bigint".',UnexpectedTokenAfterTypeParameter:"Expected an arrow function after this type parameter declaration.",UnexpectedTypeParameterBeforeAsyncArrowFunction:"Type parameters must come after the async keyword, e.g. instead of `<T> async () => {}`, use `async <T>() => {}`.",UnsupportedDeclareExportKind:({unsupportedExportKind:d,suggestion:a})=>`\`declare export ${d}\` is not supported. Use \`${a}\` instead.`,UnsupportedStatementInDeclareModule:"Only declares and type imports are allowed inside declare module.",UnterminatedFlowComment:"Unterminated flow-comment."});function Qa(d){return d.type==="DeclareExportAllDeclaration"||d.type==="DeclareExportDeclaration"&&(!d.declaration||d.declaration.type!=="TypeAlias"&&d.declaration.type!=="InterfaceDeclaration")}function pu(d){return d.importKind==="type"||d.importKind==="typeof"}var Ll={const:"declare export var",let:"declare export var",type:"export type",interface:"export interface"};function $a(d,a){let m=[],S=[];for(let $=0;$<d.length;$++)(a(d[$],$,d)?m:S).push(d[$]);return[m,S]}var wa=/\*?\s*@((?:no)?flow)\b/,Ko=d=>class extends d{constructor(...a){super(...a),this.flowPragma=void 0}getScopeHandler(){return Ot}shouldParseTypes(){return this.getPluginOption("flow","all")||this.flowPragma==="flow"}shouldParseEnums(){return!!this.getPluginOption("flow","enums")}finishToken(a,m){a!==133&&a!==13&&a!==28&&this.flowPragma===void 0&&(this.flowPragma=null),super.finishToken(a,m)}addComment(a){if(this.flowPragma===void 0){let m=wa.exec(a.value);if(m)if(m[1]==="flow")this.flowPragma="flow";else if(m[1]==="noflow")this.flowPragma="noflow";else throw new Error("Unexpected flow pragma")}super.addComment(a)}flowParseTypeInitialiser(a){let m=this.state.inType;this.state.inType=!0,this.expect(a||14);let S=this.flowParseType();return this.state.inType=m,S}flowParsePredicate(){let a=this.startNode(),m=this.state.startLoc;return this.next(),this.expectContextual(110),this.state.lastTokStartLoc.index>m.index+1&&this.raise(Li.UnexpectedSpaceBetweenModuloChecks,m),this.eat(10)?(a.value=super.parseExpression(),this.expect(11),this.finishNode(a,"DeclaredPredicate")):this.finishNode(a,"InferredPredicate")}flowParseTypeAndPredicateInitialiser(){let a=this.state.inType;this.state.inType=!0,this.expect(14);let m=null,S=null;return this.match(54)?(this.state.inType=a,S=this.flowParsePredicate()):(m=this.flowParseType(),this.state.inType=a,this.match(54)&&(S=this.flowParsePredicate())),[m,S]}flowParseDeclareClass(a){return this.next(),this.flowParseInterfaceish(a,!0),this.finishNode(a,"DeclareClass")}flowParseDeclareFunction(a){this.next();let m=a.id=this.parseIdentifier(),S=this.startNode(),$=this.startNode();this.match(47)?S.typeParameters=this.flowParseTypeParameterDeclaration():S.typeParameters=null,this.expect(10);let ne=this.flowParseFunctionTypeParams();return S.params=ne.params,S.rest=ne.rest,S.this=ne._this,this.expect(11),[S.returnType,a.predicate]=this.flowParseTypeAndPredicateInitialiser(),$.typeAnnotation=this.finishNode(S,"FunctionTypeAnnotation"),m.typeAnnotation=this.finishNode($,"TypeAnnotation"),this.resetEndLocation(m),this.semicolon(),this.scope.declareName(a.id.name,2048,a.id.loc.start),this.finishNode(a,"DeclareFunction")}flowParseDeclare(a,m){if(this.match(80))return this.flowParseDeclareClass(a);if(this.match(68))return this.flowParseDeclareFunction(a);if(this.match(74))return this.flowParseDeclareVariable(a);if(this.eatContextual(127))return this.match(16)?this.flowParseDeclareModuleExports(a):(m&&this.raise(Li.NestedDeclareModule,this.state.lastTokStartLoc),this.flowParseDeclareModule(a));if(this.isContextual(130))return this.flowParseDeclareTypeAlias(a);if(this.isContextual(131))return this.flowParseDeclareOpaqueType(a);if(this.isContextual(129))return this.flowParseDeclareInterface(a);if(this.match(82))return this.flowParseDeclareExportDeclaration(a,m);this.unexpected()}flowParseDeclareVariable(a){return this.next(),a.id=this.flowParseTypeAnnotatableIdentifier(!0),this.scope.declareName(a.id.name,5,a.id.loc.start),this.semicolon(),this.finishNode(a,"DeclareVariable")}flowParseDeclareModule(a){this.scope.enter(0),this.match(133)?a.id=super.parseExprAtom():a.id=this.parseIdentifier();let m=a.body=this.startNode(),S=m.body=[];for(this.expect(5);!this.match(8);){let ve=this.startNode();this.match(83)?(this.next(),!this.isContextual(130)&&!this.match(87)&&this.raise(Li.InvalidNonTypeImportInDeclareModule,this.state.lastTokStartLoc),super.parseImport(ve)):(this.expectContextual(125,Li.UnsupportedStatementInDeclareModule),ve=this.flowParseDeclare(ve,!0)),S.push(ve)}this.scope.exit(),this.expect(8),this.finishNode(m,"BlockStatement");let $=null,ne=!1;return S.forEach(ve=>{Qa(ve)?($==="CommonJS"&&this.raise(Li.AmbiguousDeclareModuleKind,ve),$="ES"):ve.type==="DeclareModuleExports"&&(ne&&this.raise(Li.DuplicateDeclareModuleExports,ve),$==="ES"&&this.raise(Li.AmbiguousDeclareModuleKind,ve),$="CommonJS",ne=!0)}),a.kind=$||"CommonJS",this.finishNode(a,"DeclareModule")}flowParseDeclareExportDeclaration(a,m){if(this.expect(82),this.eat(65))return this.match(68)||this.match(80)?a.declaration=this.flowParseDeclare(this.startNode()):(a.declaration=this.flowParseType(),this.semicolon()),a.default=!0,this.finishNode(a,"DeclareExportDeclaration");if(this.match(75)||this.isLet()||(this.isContextual(130)||this.isContextual(129))&&!m){let S=this.state.value;throw this.raise(Li.UnsupportedDeclareExportKind,this.state.startLoc,{unsupportedExportKind:S,suggestion:Ll[S]})}if(this.match(74)||this.match(68)||this.match(80)||this.isContextual(131))return a.declaration=this.flowParseDeclare(this.startNode()),a.default=!1,this.finishNode(a,"DeclareExportDeclaration");if(this.match(55)||this.match(5)||this.isContextual(129)||this.isContextual(130)||this.isContextual(131))return a=this.parseExport(a,null),a.type==="ExportNamedDeclaration"&&(a.type="ExportDeclaration",a.default=!1,delete a.exportKind),a.type="Declare"+a.type,a;this.unexpected()}flowParseDeclareModuleExports(a){return this.next(),this.expectContextual(111),a.typeAnnotation=this.flowParseTypeAnnotation(),this.semicolon(),this.finishNode(a,"DeclareModuleExports")}flowParseDeclareTypeAlias(a){this.next();let m=this.flowParseTypeAlias(a);return m.type="DeclareTypeAlias",m}flowParseDeclareOpaqueType(a){this.next();let m=this.flowParseOpaqueType(a,!0);return m.type="DeclareOpaqueType",m}flowParseDeclareInterface(a){return this.next(),this.flowParseInterfaceish(a,!1),this.finishNode(a,"DeclareInterface")}flowParseInterfaceish(a,m){if(a.id=this.flowParseRestrictedIdentifier(!m,!0),this.scope.declareName(a.id.name,m?17:8201,a.id.loc.start),this.match(47)?a.typeParameters=this.flowParseTypeParameterDeclaration():a.typeParameters=null,a.extends=[],this.eat(81))do a.extends.push(this.flowParseInterfaceExtends());while(!m&&this.eat(12));if(m){if(a.implements=[],a.mixins=[],this.eatContextual(117))do a.mixins.push(this.flowParseInterfaceExtends());while(this.eat(12));if(this.eatContextual(113))do a.implements.push(this.flowParseInterfaceExtends());while(this.eat(12))}a.body=this.flowParseObjectType({allowStatic:m,allowExact:!1,allowSpread:!1,allowProto:m,allowInexact:!1})}flowParseInterfaceExtends(){let a=this.startNode();return a.id=this.flowParseQualifiedTypeIdentifier(),this.match(47)?a.typeParameters=this.flowParseTypeParameterInstantiation():a.typeParameters=null,this.finishNode(a,"InterfaceExtends")}flowParseInterface(a){return this.flowParseInterfaceish(a,!1),this.finishNode(a,"InterfaceDeclaration")}checkNotUnderscore(a){a==="_"&&this.raise(Li.UnexpectedReservedUnderscore,this.state.startLoc)}checkReservedType(a,m,S){Io.has(a)&&this.raise(S?Li.AssignReservedType:Li.UnexpectedReservedType,m,{reservedType:a})}flowParseRestrictedIdentifier(a,m){return this.checkReservedType(this.state.value,this.state.startLoc,m),this.parseIdentifier(a)}flowParseTypeAlias(a){return a.id=this.flowParseRestrictedIdentifier(!1,!0),this.scope.declareName(a.id.name,8201,a.id.loc.start),this.match(47)?a.typeParameters=this.flowParseTypeParameterDeclaration():a.typeParameters=null,a.right=this.flowParseTypeInitialiser(29),this.semicolon(),this.finishNode(a,"TypeAlias")}flowParseOpaqueType(a,m){return this.expectContextual(130),a.id=this.flowParseRestrictedIdentifier(!0,!0),this.scope.declareName(a.id.name,8201,a.id.loc.start),this.match(47)?a.typeParameters=this.flowParseTypeParameterDeclaration():a.typeParameters=null,a.supertype=null,this.match(14)&&(a.supertype=this.flowParseTypeInitialiser(14)),a.impltype=null,m||(a.impltype=this.flowParseTypeInitialiser(29)),this.semicolon(),this.finishNode(a,"OpaqueType")}flowParseTypeParameter(a=!1){let m=this.state.startLoc,S=this.startNode(),$=this.flowParseVariance(),ne=this.flowParseTypeAnnotatableIdentifier();return S.name=ne.name,S.variance=$,S.bound=ne.typeAnnotation,this.match(29)?(this.eat(29),S.default=this.flowParseType()):a&&this.raise(Li.MissingTypeParamDefault,m),this.finishNode(S,"TypeParameter")}flowParseTypeParameterDeclaration(){let a=this.state.inType,m=this.startNode();m.params=[],this.state.inType=!0,this.match(47)||this.match(142)?this.next():this.unexpected();let S=!1;do{let $=this.flowParseTypeParameter(S);m.params.push($),$.default&&(S=!0),this.match(48)||this.expect(12)}while(!this.match(48));return this.expect(48),this.state.inType=a,this.finishNode(m,"TypeParameterDeclaration")}flowParseTypeParameterInstantiation(){let a=this.startNode(),m=this.state.inType;a.params=[],this.state.inType=!0,this.expect(47);let S=this.state.noAnonFunctionType;for(this.state.noAnonFunctionType=!1;!this.match(48);)a.params.push(this.flowParseType()),this.match(48)||this.expect(12);return this.state.noAnonFunctionType=S,this.expect(48),this.state.inType=m,this.finishNode(a,"TypeParameterInstantiation")}flowParseTypeParameterInstantiationCallOrNew(){let a=this.startNode(),m=this.state.inType;for(a.params=[],this.state.inType=!0,this.expect(47);!this.match(48);)a.params.push(this.flowParseTypeOrImplicitInstantiation()),this.match(48)||this.expect(12);return this.expect(48),this.state.inType=m,this.finishNode(a,"TypeParameterInstantiation")}flowParseInterfaceType(){let a=this.startNode();if(this.expectContextual(129),a.extends=[],this.eat(81))do a.extends.push(this.flowParseInterfaceExtends());while(this.eat(12));return a.body=this.flowParseObjectType({allowStatic:!1,allowExact:!1,allowSpread:!1,allowProto:!1,allowInexact:!1}),this.finishNode(a,"InterfaceTypeAnnotation")}flowParseObjectPropertyKey(){return this.match(134)||this.match(133)?super.parseExprAtom():this.parseIdentifier(!0)}flowParseObjectTypeIndexer(a,m,S){return a.static=m,this.lookahead().type===14?(a.id=this.flowParseObjectPropertyKey(),a.key=this.flowParseTypeInitialiser()):(a.id=null,a.key=this.flowParseType()),this.expect(3),a.value=this.flowParseTypeInitialiser(),a.variance=S,this.finishNode(a,"ObjectTypeIndexer")}flowParseObjectTypeInternalSlot(a,m){return a.static=m,a.id=this.flowParseObjectPropertyKey(),this.expect(3),this.expect(3),this.match(47)||this.match(10)?(a.method=!0,a.optional=!1,a.value=this.flowParseObjectTypeMethodish(this.startNodeAt(a.loc.start))):(a.method=!1,this.eat(17)&&(a.optional=!0),a.value=this.flowParseTypeInitialiser()),this.finishNode(a,"ObjectTypeInternalSlot")}flowParseObjectTypeMethodish(a){for(a.params=[],a.rest=null,a.typeParameters=null,a.this=null,this.match(47)&&(a.typeParameters=this.flowParseTypeParameterDeclaration()),this.expect(10),this.match(78)&&(a.this=this.flowParseFunctionTypeParam(!0),a.this.name=null,this.match(11)||this.expect(12));!this.match(11)&&!this.match(21);)a.params.push(this.flowParseFunctionTypeParam(!1)),this.match(11)||this.expect(12);return this.eat(21)&&(a.rest=this.flowParseFunctionTypeParam(!1)),this.expect(11),a.returnType=this.flowParseTypeInitialiser(),this.finishNode(a,"FunctionTypeAnnotation")}flowParseObjectTypeCallProperty(a,m){let S=this.startNode();return a.static=m,a.value=this.flowParseObjectTypeMethodish(S),this.finishNode(a,"ObjectTypeCallProperty")}flowParseObjectType({allowStatic:a,allowExact:m,allowSpread:S,allowProto:$,allowInexact:ne}){let ve=this.state.inType;this.state.inType=!0;let qe=this.startNode();qe.callProperties=[],qe.properties=[],qe.indexers=[],qe.internalSlots=[];let ct,at,On=!1;for(m&&this.match(6)?(this.expect(6),ct=9,at=!0):(this.expect(5),ct=8,at=!1),qe.exact=at;!this.match(ct);){let Yi=!1,ji=null,Ls=null,Zs=this.startNode();if($&&this.isContextual(118)){let sa=this.lookahead();sa.type!==14&&sa.type!==17&&(this.next(),ji=this.state.startLoc,a=!1)}if(a&&this.isContextual(106)){let sa=this.lookahead();sa.type!==14&&sa.type!==17&&(this.next(),Yi=!0)}let ea=this.flowParseVariance();if(this.eat(0))ji!=null&&this.unexpected(ji),this.eat(0)?(ea&&this.unexpected(ea.loc.start),qe.internalSlots.push(this.flowParseObjectTypeInternalSlot(Zs,Yi))):qe.indexers.push(this.flowParseObjectTypeIndexer(Zs,Yi,ea));else if(this.match(10)||this.match(47))ji!=null&&this.unexpected(ji),ea&&this.unexpected(ea.loc.start),qe.callProperties.push(this.flowParseObjectTypeCallProperty(Zs,Yi));else{let sa="init";if(this.isContextual(99)||this.isContextual(104)){let Lu=this.lookahead();rr(Lu.type)&&(sa=this.state.value,this.next())}let Pa=this.flowParseObjectTypeProperty(Zs,Yi,ji,ea,sa,S,ne!=null?ne:!at);Pa===null?(On=!0,Ls=this.state.lastTokStartLoc):qe.properties.push(Pa)}this.flowObjectTypeSemicolon(),Ls&&!this.match(8)&&!this.match(9)&&this.raise(Li.UnexpectedExplicitInexactInObject,Ls)}this.expect(ct),S&&(qe.inexact=On);let ui=this.finishNode(qe,"ObjectTypeAnnotation");return this.state.inType=ve,ui}flowParseObjectTypeProperty(a,m,S,$,ne,ve,qe){if(this.eat(21))return this.match(12)||this.match(13)||this.match(8)||this.match(9)?(ve?qe||this.raise(Li.InexactInsideExact,this.state.lastTokStartLoc):this.raise(Li.InexactInsideNonObject,this.state.lastTokStartLoc),$&&this.raise(Li.InexactVariance,$),null):(ve||this.raise(Li.UnexpectedSpreadType,this.state.lastTokStartLoc),S!=null&&this.unexpected(S),$&&this.raise(Li.SpreadVariance,$),a.argument=this.flowParseType(),this.finishNode(a,"ObjectTypeSpreadProperty"));{a.key=this.flowParseObjectPropertyKey(),a.static=m,a.proto=S!=null,a.kind=ne;let ct=!1;return this.match(47)||this.match(10)?(a.method=!0,S!=null&&this.unexpected(S),$&&this.unexpected($.loc.start),a.value=this.flowParseObjectTypeMethodish(this.startNodeAt(a.loc.start)),(ne==="get"||ne==="set")&&this.flowCheckGetterSetterParams(a),!ve&&a.key.name==="constructor"&&a.value.this&&this.raise(Li.ThisParamBannedInConstructor,a.value.this)):(ne!=="init"&&this.unexpected(),a.method=!1,this.eat(17)&&(ct=!0),a.value=this.flowParseTypeInitialiser(),a.variance=$),a.optional=ct,this.finishNode(a,"ObjectTypeProperty")}}flowCheckGetterSetterParams(a){let m=a.kind==="get"?0:1,S=a.value.params.length+(a.value.rest?1:0);a.value.this&&this.raise(a.kind==="get"?Li.GetterMayNotHaveThisParam:Li.SetterMayNotHaveThisParam,a.value.this),S!==m&&this.raise(a.kind==="get"?rt.BadGetterArity:rt.BadSetterArity,a),a.kind==="set"&&a.value.rest&&this.raise(rt.BadSetterRestParameter,a)}flowObjectTypeSemicolon(){!this.eat(13)&&!this.eat(12)&&!this.match(8)&&!this.match(9)&&this.unexpected()}flowParseQualifiedTypeIdentifier(a,m){var S;(S=a)!=null||(a=this.state.startLoc);let $=m||this.flowParseRestrictedIdentifier(!0);for(;this.eat(16);){let ne=this.startNodeAt(a);ne.qualification=$,ne.id=this.flowParseRestrictedIdentifier(!0),$=this.finishNode(ne,"QualifiedTypeIdentifier")}return $}flowParseGenericType(a,m){let S=this.startNodeAt(a);return S.typeParameters=null,S.id=this.flowParseQualifiedTypeIdentifier(a,m),this.match(47)&&(S.typeParameters=this.flowParseTypeParameterInstantiation()),this.finishNode(S,"GenericTypeAnnotation")}flowParseTypeofType(){let a=this.startNode();return this.expect(87),a.argument=this.flowParsePrimaryType(),this.finishNode(a,"TypeofTypeAnnotation")}flowParseTupleType(){let a=this.startNode();for(a.types=[],this.expect(0);this.state.pos<this.length&&!this.match(3)&&(a.types.push(this.flowParseType()),!this.match(3));)this.expect(12);return this.expect(3),this.finishNode(a,"TupleTypeAnnotation")}flowParseFunctionTypeParam(a){let m=null,S=!1,$=null,ne=this.startNode(),ve=this.lookahead(),qe=this.state.type===78;return ve.type===14||ve.type===17?(qe&&!a&&this.raise(Li.ThisParamMustBeFirst,ne),m=this.parseIdentifier(qe),this.eat(17)&&(S=!0,qe&&this.raise(Li.ThisParamMayNotBeOptional,ne)),$=this.flowParseTypeInitialiser()):$=this.flowParseType(),ne.name=m,ne.optional=S,ne.typeAnnotation=$,this.finishNode(ne,"FunctionTypeParam")}reinterpretTypeAsFunctionTypeParam(a){let m=this.startNodeAt(a.loc.start);return m.name=null,m.optional=!1,m.typeAnnotation=a,this.finishNode(m,"FunctionTypeParam")}flowParseFunctionTypeParams(a=[]){let m=null,S=null;for(this.match(78)&&(S=this.flowParseFunctionTypeParam(!0),S.name=null,this.match(11)||this.expect(12));!this.match(11)&&!this.match(21);)a.push(this.flowParseFunctionTypeParam(!1)),this.match(11)||this.expect(12);return this.eat(21)&&(m=this.flowParseFunctionTypeParam(!1)),{params:a,rest:m,_this:S}}flowIdentToTypeAnnotation(a,m,S){switch(S.name){case"any":return this.finishNode(m,"AnyTypeAnnotation");case"bool":case"boolean":return this.finishNode(m,"BooleanTypeAnnotation");case"mixed":return this.finishNode(m,"MixedTypeAnnotation");case"empty":return this.finishNode(m,"EmptyTypeAnnotation");case"number":return this.finishNode(m,"NumberTypeAnnotation");case"string":return this.finishNode(m,"StringTypeAnnotation");case"symbol":return this.finishNode(m,"SymbolTypeAnnotation");default:return this.checkNotUnderscore(S.name),this.flowParseGenericType(a,S)}}flowParsePrimaryType(){let a=this.state.startLoc,m=this.startNode(),S,$,ne=!1,ve=this.state.noAnonFunctionType;switch(this.state.type){case 5:return this.flowParseObjectType({allowStatic:!1,allowExact:!1,allowSpread:!0,allowProto:!1,allowInexact:!0});case 6:return this.flowParseObjectType({allowStatic:!1,allowExact:!0,allowSpread:!0,allowProto:!1,allowInexact:!1});case 0:return this.state.noAnonFunctionType=!1,$=this.flowParseTupleType(),this.state.noAnonFunctionType=ve,$;case 47:return m.typeParameters=this.flowParseTypeParameterDeclaration(),this.expect(10),S=this.flowParseFunctionTypeParams(),m.params=S.params,m.rest=S.rest,m.this=S._this,this.expect(11),this.expect(19),m.returnType=this.flowParseType(),this.finishNode(m,"FunctionTypeAnnotation");case 10:if(this.next(),!this.match(11)&&!this.match(21))if(Xt(this.state.type)||this.match(78)){let qe=this.lookahead().type;ne=qe!==17&&qe!==14}else ne=!0;if(ne){if(this.state.noAnonFunctionType=!1,$=this.flowParseType(),this.state.noAnonFunctionType=ve,this.state.noAnonFunctionType||!(this.match(12)||this.match(11)&&this.lookahead().type===19))return this.expect(11),$;this.eat(12)}return $?S=this.flowParseFunctionTypeParams([this.reinterpretTypeAsFunctionTypeParam($)]):S=this.flowParseFunctionTypeParams(),m.params=S.params,m.rest=S.rest,m.this=S._this,this.expect(11),this.expect(19),m.returnType=this.flowParseType(),m.typeParameters=null,this.finishNode(m,"FunctionTypeAnnotation");case 133:return this.parseLiteral(this.state.value,"StringLiteralTypeAnnotation");case 85:case 86:return m.value=this.match(85),this.next(),this.finishNode(m,"BooleanLiteralTypeAnnotation");case 53:if(this.state.value==="-"){if(this.next(),this.match(134))return this.parseLiteralAtNode(-this.state.value,"NumberLiteralTypeAnnotation",m);if(this.match(135))return this.parseLiteralAtNode(-this.state.value,"BigIntLiteralTypeAnnotation",m);throw this.raise(Li.UnexpectedSubtractionOperand,this.state.startLoc)}this.unexpected();return;case 134:return this.parseLiteral(this.state.value,"NumberLiteralTypeAnnotation");case 135:return this.parseLiteral(this.state.value,"BigIntLiteralTypeAnnotation");case 88:return this.next(),this.finishNode(m,"VoidTypeAnnotation");case 84:return this.next(),this.finishNode(m,"NullLiteralTypeAnnotation");case 78:return this.next(),this.finishNode(m,"ThisTypeAnnotation");case 55:return this.next(),this.finishNode(m,"ExistsTypeAnnotation");case 87:return this.flowParseTypeofType();default:if(Uo(this.state.type)){let qe=Zo(this.state.type);return this.next(),super.createIdentifier(m,qe)}else if(Xt(this.state.type))return this.isContextual(129)?this.flowParseInterfaceType():this.flowIdentToTypeAnnotation(a,m,this.parseIdentifier())}this.unexpected()}flowParsePostfixType(){let a=this.state.startLoc,m=this.flowParsePrimaryType(),S=!1;for(;(this.match(0)||this.match(18))&&!this.canInsertSemicolon();){let $=this.startNodeAt(a),ne=this.eat(18);S=S||ne,this.expect(0),!ne&&this.match(3)?($.elementType=m,this.next(),m=this.finishNode($,"ArrayTypeAnnotation")):($.objectType=m,$.indexType=this.flowParseType(),this.expect(3),S?($.optional=ne,m=this.finishNode($,"OptionalIndexedAccessType")):m=this.finishNode($,"IndexedAccessType"))}return m}flowParsePrefixType(){let a=this.startNode();return this.eat(17)?(a.typeAnnotation=this.flowParsePrefixType(),this.finishNode(a,"NullableTypeAnnotation")):this.flowParsePostfixType()}flowParseAnonFunctionWithoutParens(){let a=this.flowParsePrefixType();if(!this.state.noAnonFunctionType&&this.eat(19)){let m=this.startNodeAt(a.loc.start);return m.params=[this.reinterpretTypeAsFunctionTypeParam(a)],m.rest=null,m.this=null,m.returnType=this.flowParseType(),m.typeParameters=null,this.finishNode(m,"FunctionTypeAnnotation")}return a}flowParseIntersectionType(){let a=this.startNode();this.eat(45);let m=this.flowParseAnonFunctionWithoutParens();for(a.types=[m];this.eat(45);)a.types.push(this.flowParseAnonFunctionWithoutParens());return a.types.length===1?m:this.finishNode(a,"IntersectionTypeAnnotation")}flowParseUnionType(){let a=this.startNode();this.eat(43);let m=this.flowParseIntersectionType();for(a.types=[m];this.eat(43);)a.types.push(this.flowParseIntersectionType());return a.types.length===1?m:this.finishNode(a,"UnionTypeAnnotation")}flowParseType(){let a=this.state.inType;this.state.inType=!0;let m=this.flowParseUnionType();return this.state.inType=a,m}flowParseTypeOrImplicitInstantiation(){if(this.state.type===132&&this.state.value==="_"){let a=this.state.startLoc,m=this.parseIdentifier();return this.flowParseGenericType(a,m)}else return this.flowParseType()}flowParseTypeAnnotation(){let a=this.startNode();return a.typeAnnotation=this.flowParseTypeInitialiser(),this.finishNode(a,"TypeAnnotation")}flowParseTypeAnnotatableIdentifier(a){let m=a?this.parseIdentifier():this.flowParseRestrictedIdentifier();return this.match(14)&&(m.typeAnnotation=this.flowParseTypeAnnotation(),this.resetEndLocation(m)),m}typeCastToParameter(a){return a.expression.typeAnnotation=a.typeAnnotation,this.resetEndLocation(a.expression,a.typeAnnotation.loc.end),a.expression}flowParseVariance(){let a=null;return this.match(53)?(a=this.startNode(),this.state.value==="+"?a.kind="plus":a.kind="minus",this.next(),this.finishNode(a,"Variance")):a}parseFunctionBody(a,m,S=!1){if(m){this.forwardNoArrowParamsConversionAt(a,()=>super.parseFunctionBody(a,!0,S));return}super.parseFunctionBody(a,!1,S)}parseFunctionBodyAndFinish(a,m,S=!1){if(this.match(14)){let $=this.startNode();[$.typeAnnotation,a.predicate]=this.flowParseTypeAndPredicateInitialiser(),a.returnType=$.typeAnnotation?this.finishNode($,"TypeAnnotation"):null}return super.parseFunctionBodyAndFinish(a,m,S)}parseStatementLike(a){if(this.state.strict&&this.isContextual(129)){let S=this.lookahead();if(ri(S.type)){let $=this.startNode();return this.next(),this.flowParseInterface($)}}else if(this.shouldParseEnums()&&this.isContextual(126)){let S=this.startNode();return this.next(),this.flowParseEnumDeclaration(S)}let m=super.parseStatementLike(a);return this.flowPragma===void 0&&!this.isValidDirective(m)&&(this.flowPragma=null),m}parseExpressionStatement(a,m,S){if(m.type==="Identifier"){if(m.name==="declare"){if(this.match(80)||Xt(this.state.type)||this.match(68)||this.match(74)||this.match(82))return this.flowParseDeclare(a)}else if(Xt(this.state.type)){if(m.name==="interface")return this.flowParseInterface(a);if(m.name==="type")return this.flowParseTypeAlias(a);if(m.name==="opaque")return this.flowParseOpaqueType(a,!1)}}return super.parseExpressionStatement(a,m,S)}shouldParseExportDeclaration(){let{type:a}=this.state;return Vs(a)||this.shouldParseEnums()&&a===126?!this.state.containsEsc:super.shouldParseExportDeclaration()}isExportDefaultSpecifier(){let{type:a}=this.state;return Vs(a)||this.shouldParseEnums()&&a===126?this.state.containsEsc:super.isExportDefaultSpecifier()}parseExportDefaultExpression(){if(this.shouldParseEnums()&&this.isContextual(126)){let a=this.startNode();return this.next(),this.flowParseEnumDeclaration(a)}return super.parseExportDefaultExpression()}parseConditional(a,m,S){if(!this.match(17))return a;if(this.state.maybeInArrowParameters){let ui=this.lookaheadCharCode();if(ui===44||ui===61||ui===58||ui===41)return this.setOptionalParametersError(S),a}this.expect(17);let $=this.state.clone(),ne=this.state.noArrowAt,ve=this.startNodeAt(m),{consequent:qe,failed:ct}=this.tryParseConditionalConsequent(),[at,On]=this.getArrowLikeExpressions(qe);if(ct||On.length>0){let ui=[...ne];if(On.length>0){this.state=$,this.state.noArrowAt=ui;for(let Yi=0;Yi<On.length;Yi++)ui.push(On[Yi].start);({consequent:qe,failed:ct}=this.tryParseConditionalConsequent()),[at,On]=this.getArrowLikeExpressions(qe)}ct&&at.length>1&&this.raise(Li.AmbiguousConditionalArrow,$.startLoc),ct&&at.length===1&&(this.state=$,ui.push(at[0].start),this.state.noArrowAt=ui,{consequent:qe,failed:ct}=this.tryParseConditionalConsequent())}return this.getArrowLikeExpressions(qe,!0),this.state.noArrowAt=ne,this.expect(14),ve.test=a,ve.consequent=qe,ve.alternate=this.forwardNoArrowParamsConversionAt(ve,()=>this.parseMaybeAssign(void 0,void 0)),this.finishNode(ve,"ConditionalExpression")}tryParseConditionalConsequent(){this.state.noArrowParamsConversionAt.push(this.state.start);let a=this.parseMaybeAssignAllowIn(),m=!this.match(14);return this.state.noArrowParamsConversionAt.pop(),{consequent:a,failed:m}}getArrowLikeExpressions(a,m){let S=[a],$=[];for(;S.length!==0;){let ne=S.pop();ne.type==="ArrowFunctionExpression"?(ne.typeParameters||!ne.returnType?this.finishArrowValidation(ne):$.push(ne),S.push(ne.body)):ne.type==="ConditionalExpression"&&(S.push(ne.consequent),S.push(ne.alternate))}return m?($.forEach(ne=>this.finishArrowValidation(ne)),[$,[]]):$a($,ne=>ne.params.every(ve=>this.isAssignable(ve,!0)))}finishArrowValidation(a){var m;this.toAssignableList(a.params,(m=a.extra)==null?void 0:m.trailingCommaLoc,!1),this.scope.enter(6),super.checkParams(a,!1,!0),this.scope.exit()}forwardNoArrowParamsConversionAt(a,m){let S;return this.state.noArrowParamsConversionAt.indexOf(a.start)!==-1?(this.state.noArrowParamsConversionAt.push(this.state.start),S=m(),this.state.noArrowParamsConversionAt.pop()):S=m(),S}parseParenItem(a,m){if(a=super.parseParenItem(a,m),this.eat(17)&&(a.optional=!0,this.resetEndLocation(a)),this.match(14)){let S=this.startNodeAt(m);return S.expression=a,S.typeAnnotation=this.flowParseTypeAnnotation(),this.finishNode(S,"TypeCastExpression")}return a}assertModuleNodeAllowed(a){a.type==="ImportDeclaration"&&(a.importKind==="type"||a.importKind==="typeof")||a.type==="ExportNamedDeclaration"&&a.exportKind==="type"||a.type==="ExportAllDeclaration"&&a.exportKind==="type"||super.assertModuleNodeAllowed(a)}parseExportDeclaration(a){if(this.isContextual(130)){a.exportKind="type";let m=this.startNode();return this.next(),this.match(5)?(a.specifiers=this.parseExportSpecifiers(!0),super.parseExportFrom(a),null):this.flowParseTypeAlias(m)}else if(this.isContextual(131)){a.exportKind="type";let m=this.startNode();return this.next(),this.flowParseOpaqueType(m,!1)}else if(this.isContextual(129)){a.exportKind="type";let m=this.startNode();return this.next(),this.flowParseInterface(m)}else if(this.shouldParseEnums()&&this.isContextual(126)){a.exportKind="value";let m=this.startNode();return this.next(),this.flowParseEnumDeclaration(m)}else return super.parseExportDeclaration(a)}eatExportStar(a){return super.eatExportStar(a)?!0:this.isContextual(130)&&this.lookahead().type===55?(a.exportKind="type",this.next(),this.next(),!0):!1}maybeParseExportNamespaceSpecifier(a){let{startLoc:m}=this.state,S=super.maybeParseExportNamespaceSpecifier(a);return S&&a.exportKind==="type"&&this.unexpected(m),S}parseClassId(a,m,S){super.parseClassId(a,m,S),this.match(47)&&(a.typeParameters=this.flowParseTypeParameterDeclaration())}parseClassMember(a,m,S){let{startLoc:$}=this.state;if(this.isContextual(125)){if(super.parseClassMemberFromModifier(a,m))return;m.declare=!0}super.parseClassMember(a,m,S),m.declare&&(m.type!=="ClassProperty"&&m.type!=="ClassPrivateProperty"&&m.type!=="PropertyDefinition"?this.raise(Li.DeclareClassElement,$):m.value&&this.raise(Li.DeclareClassFieldInitializer,m.value))}isIterator(a){return a==="iterator"||a==="asyncIterator"}readIterator(){let a=super.readWord1(),m="@@"+a;(!this.isIterator(a)||!this.state.inType)&&this.raise(rt.InvalidIdentifier,this.state.curPosition(),{identifierName:m}),this.finishToken(132,m)}getTokenFromCode(a){let m=this.input.charCodeAt(this.state.pos+1);a===123&&m===124?this.finishOp(6,2):this.state.inType&&(a===62||a===60)?this.finishOp(a===62?48:47,1):this.state.inType&&a===63?m===46?this.finishOp(18,2):this.finishOp(17,1):De(a,m,this.input.charCodeAt(this.state.pos+2))?(this.state.pos+=2,this.readIterator()):super.getTokenFromCode(a)}isAssignable(a,m){return a.type==="TypeCastExpression"?this.isAssignable(a.expression,m):super.isAssignable(a,m)}toAssignable(a,m=!1){!m&&a.type==="AssignmentExpression"&&a.left.type==="TypeCastExpression"&&(a.left=this.typeCastToParameter(a.left)),super.toAssignable(a,m)}toAssignableList(a,m,S){for(let $=0;$<a.length;$++){let ne=a[$];(ne==null?void 0:ne.type)==="TypeCastExpression"&&(a[$]=this.typeCastToParameter(ne))}super.toAssignableList(a,m,S)}toReferencedList(a,m){for(let $=0;$<a.length;$++){var S;let ne=a[$];ne&&ne.type==="TypeCastExpression"&&!((S=ne.extra)!=null&&S.parenthesized)&&(a.length>1||!m)&&this.raise(Li.TypeCastInPattern,ne.typeAnnotation)}return a}parseArrayLike(a,m,S,$){let ne=super.parseArrayLike(a,m,S,$);return m&&!this.state.maybeInArrowParameters&&this.toReferencedList(ne.elements),ne}isValidLVal(a,m,S){return a==="TypeCastExpression"||super.isValidLVal(a,m,S)}parseClassProperty(a){return this.match(14)&&(a.typeAnnotation=this.flowParseTypeAnnotation()),super.parseClassProperty(a)}parseClassPrivateProperty(a){return this.match(14)&&(a.typeAnnotation=this.flowParseTypeAnnotation()),super.parseClassPrivateProperty(a)}isClassMethod(){return this.match(47)||super.isClassMethod()}isClassProperty(){return this.match(14)||super.isClassProperty()}isNonstaticConstructor(a){return!this.match(14)&&super.isNonstaticConstructor(a)}pushClassMethod(a,m,S,$,ne,ve){if(m.variance&&this.unexpected(m.variance.loc.start),delete m.variance,this.match(47)&&(m.typeParameters=this.flowParseTypeParameterDeclaration()),super.pushClassMethod(a,m,S,$,ne,ve),m.params&&ne){let qe=m.params;qe.length>0&&this.isThisParam(qe[0])&&this.raise(Li.ThisParamBannedInConstructor,m)}else if(m.type==="MethodDefinition"&&ne&&m.value.params){let qe=m.value.params;qe.length>0&&this.isThisParam(qe[0])&&this.raise(Li.ThisParamBannedInConstructor,m)}}pushClassPrivateMethod(a,m,S,$){m.variance&&this.unexpected(m.variance.loc.start),delete m.variance,this.match(47)&&(m.typeParameters=this.flowParseTypeParameterDeclaration()),super.pushClassPrivateMethod(a,m,S,$)}parseClassSuper(a){if(super.parseClassSuper(a),a.superClass&&this.match(47)&&(a.superTypeParameters=this.flowParseTypeParameterInstantiation()),this.isContextual(113)){this.next();let m=a.implements=[];do{let S=this.startNode();S.id=this.flowParseRestrictedIdentifier(!0),this.match(47)?S.typeParameters=this.flowParseTypeParameterInstantiation():S.typeParameters=null,m.push(this.finishNode(S,"ClassImplements"))}while(this.eat(12))}}checkGetterSetterParams(a){super.checkGetterSetterParams(a);let m=this.getObjectOrClassMethodParams(a);if(m.length>0){let S=m[0];this.isThisParam(S)&&a.kind==="get"?this.raise(Li.GetterMayNotHaveThisParam,S):this.isThisParam(S)&&this.raise(Li.SetterMayNotHaveThisParam,S)}}parsePropertyNamePrefixOperator(a){a.variance=this.flowParseVariance()}parseObjPropValue(a,m,S,$,ne,ve,qe){a.variance&&this.unexpected(a.variance.loc.start),delete a.variance;let ct;this.match(47)&&!ve&&(ct=this.flowParseTypeParameterDeclaration(),this.match(10)||this.unexpected());let at=super.parseObjPropValue(a,m,S,$,ne,ve,qe);return ct&&((at.value||at).typeParameters=ct),at}parseAssignableListItemTypes(a){return this.eat(17)&&(a.type!=="Identifier"&&this.raise(Li.PatternIsOptional,a),this.isThisParam(a)&&this.raise(Li.ThisParamMayNotBeOptional,a),a.optional=!0),this.match(14)?a.typeAnnotation=this.flowParseTypeAnnotation():this.isThisParam(a)&&this.raise(Li.ThisParamAnnotationRequired,a),this.match(29)&&this.isThisParam(a)&&this.raise(Li.ThisParamNoDefault,a),this.resetEndLocation(a),a}parseMaybeDefault(a,m){let S=super.parseMaybeDefault(a,m);return S.type==="AssignmentPattern"&&S.typeAnnotation&&S.right.start<S.typeAnnotation.start&&this.raise(Li.TypeBeforeInitializer,S.typeAnnotation),S}checkImportReflection(a){super.checkImportReflection(a),a.module&&a.importKind!=="value"&&this.raise(Li.ImportReflectionHasImportType,a.specifiers[0].loc.start)}parseImportSpecifierLocal(a,m,S){m.local=pu(a)?this.flowParseRestrictedIdentifier(!0,!0):this.parseIdentifier(),a.specifiers.push(this.finishImportSpecifier(m,S))}isPotentialImportPhase(a){if(super.isPotentialImportPhase(a))return!0;if(this.isContextual(130)){if(!a)return!0;let m=this.lookaheadCharCode();return m===123||m===42}return!a&&this.isContextual(87)}applyImportPhase(a,m,S,$){if(super.applyImportPhase(a,m,S,$),m){if(!S&&this.match(65))return;a.exportKind=S==="type"?S:"value"}else S==="type"&&this.match(55)&&this.unexpected(),a.importKind=S==="type"||S==="typeof"?S:"value"}parseImportSpecifier(a,m,S,$,ne){let ve=a.imported,qe=null;ve.type==="Identifier"&&(ve.name==="type"?qe="type":ve.name==="typeof"&&(qe="typeof"));let ct=!1;if(this.isContextual(93)&&!this.isLookaheadContextual("as")){let On=this.parseIdentifier(!0);qe!==null&&!ri(this.state.type)?(a.imported=On,a.importKind=qe,a.local=eo(On)):(a.imported=ve,a.importKind=null,a.local=this.parseIdentifier())}else{if(qe!==null&&ri(this.state.type))a.imported=this.parseIdentifier(!0),a.importKind=qe;else{if(m)throw this.raise(rt.ImportBindingIsString,a,{importName:ve.value});a.imported=ve,a.importKind=null}this.eatContextual(93)?a.local=this.parseIdentifier():(ct=!0,a.local=eo(a.imported))}let at=pu(a);return S&&at&&this.raise(Li.ImportTypeShorthandOnlyInPureImport,a),(S||at)&&this.checkReservedType(a.local.name,a.local.loc.start,!0),ct&&!S&&!at&&this.checkReservedWord(a.local.name,a.loc.start,!0,!0),this.finishImportSpecifier(a,"ImportSpecifier")}parseBindingAtom(){switch(this.state.type){case 78:return this.parseIdentifier(!0);default:return super.parseBindingAtom()}}parseFunctionParams(a,m){let S=a.kind;S!=="get"&&S!=="set"&&this.match(47)&&(a.typeParameters=this.flowParseTypeParameterDeclaration()),super.parseFunctionParams(a,m)}parseVarId(a,m){super.parseVarId(a,m),this.match(14)&&(a.id.typeAnnotation=this.flowParseTypeAnnotation(),this.resetEndLocation(a.id))}parseAsyncArrowFromCallExpression(a,m){if(this.match(14)){let S=this.state.noAnonFunctionType;this.state.noAnonFunctionType=!0,a.returnType=this.flowParseTypeAnnotation(),this.state.noAnonFunctionType=S}return super.parseAsyncArrowFromCallExpression(a,m)}shouldParseAsyncArrow(){return this.match(14)||super.shouldParseAsyncArrow()}parseMaybeAssign(a,m){var S;let $=null,ne;if(this.hasPlugin("jsx")&&(this.match(142)||this.match(47))){if($=this.state.clone(),ne=this.tryParse(()=>super.parseMaybeAssign(a,m),$),!ne.error)return ne.node;let{context:ct}=this.state,at=ct[ct.length-1];(at===nr.j_oTag||at===nr.j_expr)&&ct.pop()}if((S=ne)!=null&&S.error||this.match(47)){var ve,qe;$=$||this.state.clone();let ct,at=this.tryParse(ui=>{var Yi;ct=this.flowParseTypeParameterDeclaration();let ji=this.forwardNoArrowParamsConversionAt(ct,()=>{let Zs=super.parseMaybeAssign(a,m);return this.resetStartLocationFromNode(Zs,ct),Zs});(Yi=ji.extra)!=null&&Yi.parenthesized&&ui();let Ls=this.maybeUnwrapTypeCastExpression(ji);return Ls.type!=="ArrowFunctionExpression"&&ui(),Ls.typeParameters=ct,this.resetStartLocationFromNode(Ls,ct),ji},$),On=null;if(at.node&&this.maybeUnwrapTypeCastExpression(at.node).type==="ArrowFunctionExpression"){if(!at.error&&!at.aborted)return at.node.async&&this.raise(Li.UnexpectedTypeParameterBeforeAsyncArrowFunction,ct),at.node;On=at.node}if((ve=ne)!=null&&ve.node)return this.state=ne.failState,ne.node;if(On)return this.state=at.failState,On;throw(qe=ne)!=null&&qe.thrown?ne.error:at.thrown?at.error:this.raise(Li.UnexpectedTokenAfterTypeParameter,ct)}return super.parseMaybeAssign(a,m)}parseArrow(a){if(this.match(14)){let m=this.tryParse(()=>{let S=this.state.noAnonFunctionType;this.state.noAnonFunctionType=!0;let $=this.startNode();return[$.typeAnnotation,a.predicate]=this.flowParseTypeAndPredicateInitialiser(),this.state.noAnonFunctionType=S,this.canInsertSemicolon()&&this.unexpected(),this.match(19)||this.unexpected(),$});if(m.thrown)return null;m.error&&(this.state=m.failState),a.returnType=m.node.typeAnnotation?this.finishNode(m.node,"TypeAnnotation"):null}return super.parseArrow(a)}shouldParseArrow(a){return this.match(14)||super.shouldParseArrow(a)}setArrowFunctionParameters(a,m){this.state.noArrowParamsConversionAt.indexOf(a.start)!==-1?a.params=m:super.setArrowFunctionParameters(a,m)}checkParams(a,m,S,$=!0){if(!(S&&this.state.noArrowParamsConversionAt.indexOf(a.start)!==-1)){for(let ne=0;ne<a.params.length;ne++)this.isThisParam(a.params[ne])&&ne>0&&this.raise(Li.ThisParamMustBeFirst,a.params[ne]);super.checkParams(a,m,S,$)}}parseParenAndDistinguishExpression(a){return super.parseParenAndDistinguishExpression(a&&this.state.noArrowAt.indexOf(this.state.start)===-1)}parseSubscripts(a,m,S){if(a.type==="Identifier"&&a.name==="async"&&this.state.noArrowAt.indexOf(m.index)!==-1){this.next();let $=this.startNodeAt(m);$.callee=a,$.arguments=super.parseCallExpressionArguments(11,!1),a=this.finishNode($,"CallExpression")}else if(a.type==="Identifier"&&a.name==="async"&&this.match(47)){let $=this.state.clone(),ne=this.tryParse(qe=>this.parseAsyncArrowWithTypeParameters(m)||qe(),$);if(!ne.error&&!ne.aborted)return ne.node;let ve=this.tryParse(()=>super.parseSubscripts(a,m,S),$);if(ve.node&&!ve.error)return ve.node;if(ne.node)return this.state=ne.failState,ne.node;if(ve.node)return this.state=ve.failState,ve.node;throw ne.error||ve.error}return super.parseSubscripts(a,m,S)}parseSubscript(a,m,S,$){if(this.match(18)&&this.isLookaheadToken_lt()){if($.optionalChainMember=!0,S)return $.stop=!0,a;this.next();let ne=this.startNodeAt(m);return ne.callee=a,ne.typeArguments=this.flowParseTypeParameterInstantiation(),this.expect(10),ne.arguments=this.parseCallExpressionArguments(11,!1),ne.optional=!0,this.finishCallExpression(ne,!0)}else if(!S&&this.shouldParseTypes()&&this.match(47)){let ne=this.startNodeAt(m);ne.callee=a;let ve=this.tryParse(()=>(ne.typeArguments=this.flowParseTypeParameterInstantiationCallOrNew(),this.expect(10),ne.arguments=super.parseCallExpressionArguments(11,!1),$.optionalChainMember&&(ne.optional=!1),this.finishCallExpression(ne,$.optionalChainMember)));if(ve.node)return ve.error&&(this.state=ve.failState),ve.node}return super.parseSubscript(a,m,S,$)}parseNewCallee(a){super.parseNewCallee(a);let m=null;this.shouldParseTypes()&&this.match(47)&&(m=this.tryParse(()=>this.flowParseTypeParameterInstantiationCallOrNew()).node),a.typeArguments=m}parseAsyncArrowWithTypeParameters(a){let m=this.startNodeAt(a);if(this.parseFunctionParams(m,!1),!!this.parseArrow(m))return super.parseArrowExpression(m,void 0,!0)}readToken_mult_modulo(a){let m=this.input.charCodeAt(this.state.pos+1);if(a===42&&m===47&&this.state.hasFlowComment){this.state.hasFlowComment=!1,this.state.pos+=2,this.nextToken();return}super.readToken_mult_modulo(a)}readToken_pipe_amp(a){let m=this.input.charCodeAt(this.state.pos+1);if(a===124&&m===125){this.finishOp(9,2);return}super.readToken_pipe_amp(a)}parseTopLevel(a,m){let S=super.parseTopLevel(a,m);return this.state.hasFlowComment&&this.raise(Li.UnterminatedFlowComment,this.state.curPosition()),S}skipBlockComment(){if(this.hasPlugin("flowComments")&&this.skipFlowComment()){if(this.state.hasFlowComment)throw this.raise(Li.NestedFlowComment,this.state.startLoc);this.hasFlowCommentCompletion();let a=this.skipFlowComment();a&&(this.state.pos+=a,this.state.hasFlowComment=!0);return}return super.skipBlockComment(this.state.hasFlowComment?"*-/":"*/")}skipFlowComment(){let{pos:a}=this.state,m=2;for(;[32,9].includes(this.input.charCodeAt(a+m));)m++;let S=this.input.charCodeAt(m+a),$=this.input.charCodeAt(m+a+1);return S===58&&$===58?m+2:this.input.slice(m+a,m+a+12)==="flow-include"?m+12:S===58&&$!==58?m:!1}hasFlowCommentCompletion(){if(this.input.indexOf("*/",this.state.pos)===-1)throw this.raise(rt.UnterminatedComment,this.state.curPosition())}flowEnumErrorBooleanMemberNotInitialized(a,{enumName:m,memberName:S}){this.raise(Li.EnumBooleanMemberNotInitialized,a,{memberName:S,enumName:m})}flowEnumErrorInvalidMemberInitializer(a,m){return this.raise(m.explicitType?m.explicitType==="symbol"?Li.EnumInvalidMemberInitializerSymbolType:Li.EnumInvalidMemberInitializerPrimaryType:Li.EnumInvalidMemberInitializerUnknownType,a,m)}flowEnumErrorNumberMemberNotInitialized(a,m){this.raise(Li.EnumNumberMemberNotInitialized,a,m)}flowEnumErrorStringMemberInconsistentlyInitialized(a,m){this.raise(Li.EnumStringMemberInconsistentlyInitialized,a,m)}flowEnumMemberInit(){let a=this.state.startLoc,m=()=>this.match(12)||this.match(8);switch(this.state.type){case 134:{let S=this.parseNumericLiteral(this.state.value);return m()?{type:"number",loc:S.loc.start,value:S}:{type:"invalid",loc:a}}case 133:{let S=this.parseStringLiteral(this.state.value);return m()?{type:"string",loc:S.loc.start,value:S}:{type:"invalid",loc:a}}case 85:case 86:{let S=this.parseBooleanLiteral(this.match(85));return m()?{type:"boolean",loc:S.loc.start,value:S}:{type:"invalid",loc:a}}default:return{type:"invalid",loc:a}}}flowEnumMemberRaw(){let a=this.state.startLoc,m=this.parseIdentifier(!0),S=this.eat(29)?this.flowEnumMemberInit():{type:"none",loc:a};return{id:m,init:S}}flowEnumCheckExplicitTypeMismatch(a,m,S){let{explicitType:$}=m;$!==null&&$!==S&&this.flowEnumErrorInvalidMemberInitializer(a,m)}flowEnumMembers({enumName:a,explicitType:m}){let S=new Set,$={booleanMembers:[],numberMembers:[],stringMembers:[],defaultedMembers:[]},ne=!1;for(;!this.match(8);){if(this.eat(21)){ne=!0;break}let ve=this.startNode(),{id:qe,init:ct}=this.flowEnumMemberRaw(),at=qe.name;if(at==="")continue;/^[a-z]/.test(at)&&this.raise(Li.EnumInvalidMemberName,qe,{memberName:at,suggestion:at[0].toUpperCase()+at.slice(1),enumName:a}),S.has(at)&&this.raise(Li.EnumDuplicateMemberName,qe,{memberName:at,enumName:a}),S.add(at);let On={enumName:a,explicitType:m,memberName:at};switch(ve.id=qe,ct.type){case"boolean":{this.flowEnumCheckExplicitTypeMismatch(ct.loc,On,"boolean"),ve.init=ct.value,$.booleanMembers.push(this.finishNode(ve,"EnumBooleanMember"));break}case"number":{this.flowEnumCheckExplicitTypeMismatch(ct.loc,On,"number"),ve.init=ct.value,$.numberMembers.push(this.finishNode(ve,"EnumNumberMember"));break}case"string":{this.flowEnumCheckExplicitTypeMismatch(ct.loc,On,"string"),ve.init=ct.value,$.stringMembers.push(this.finishNode(ve,"EnumStringMember"));break}case"invalid":throw this.flowEnumErrorInvalidMemberInitializer(ct.loc,On);case"none":switch(m){case"boolean":this.flowEnumErrorBooleanMemberNotInitialized(ct.loc,On);break;case"number":this.flowEnumErrorNumberMemberNotInitialized(ct.loc,On);break;default:$.defaultedMembers.push(this.finishNode(ve,"EnumDefaultedMember"))}}this.match(8)||this.expect(12)}return{members:$,hasUnknownMembers:ne}}flowEnumStringMembers(a,m,{enumName:S}){if(a.length===0)return m;if(m.length===0)return a;if(m.length>a.length){for(let $ of a)this.flowEnumErrorStringMemberInconsistentlyInitialized($,{enumName:S});return m}else{for(let $ of m)this.flowEnumErrorStringMemberInconsistentlyInitialized($,{enumName:S});return a}}flowEnumParseExplicitType({enumName:a}){if(!this.eatContextual(102))return null;if(!Xt(this.state.type))throw this.raise(Li.EnumInvalidExplicitTypeUnknownSupplied,this.state.startLoc,{enumName:a});let{value:m}=this.state;return this.next(),m!=="boolean"&&m!=="number"&&m!=="string"&&m!=="symbol"&&this.raise(Li.EnumInvalidExplicitType,this.state.startLoc,{enumName:a,invalidEnumType:m}),m}flowEnumBody(a,m){let S=m.name,$=m.loc.start,ne=this.flowEnumParseExplicitType({enumName:S});this.expect(5);let{members:ve,hasUnknownMembers:qe}=this.flowEnumMembers({enumName:S,explicitType:ne});switch(a.hasUnknownMembers=qe,ne){case"boolean":return a.explicitType=!0,a.members=ve.booleanMembers,this.expect(8),this.finishNode(a,"EnumBooleanBody");case"number":return a.explicitType=!0,a.members=ve.numberMembers,this.expect(8),this.finishNode(a,"EnumNumberBody");case"string":return a.explicitType=!0,a.members=this.flowEnumStringMembers(ve.stringMembers,ve.defaultedMembers,{enumName:S}),this.expect(8),this.finishNode(a,"EnumStringBody");case"symbol":return a.members=ve.defaultedMembers,this.expect(8),this.finishNode(a,"EnumSymbolBody");default:{let ct=()=>(a.members=[],this.expect(8),this.finishNode(a,"EnumStringBody"));a.explicitType=!1;let at=ve.booleanMembers.length,On=ve.numberMembers.length,ui=ve.stringMembers.length,Yi=ve.defaultedMembers.length;if(!at&&!On&&!ui&&!Yi)return ct();if(!at&&!On)return a.members=this.flowEnumStringMembers(ve.stringMembers,ve.defaultedMembers,{enumName:S}),this.expect(8),this.finishNode(a,"EnumStringBody");if(!On&&!ui&&at>=Yi){for(let ji of ve.defaultedMembers)this.flowEnumErrorBooleanMemberNotInitialized(ji.loc.start,{enumName:S,memberName:ji.id.name});return a.members=ve.booleanMembers,this.expect(8),this.finishNode(a,"EnumBooleanBody")}else if(!at&&!ui&&On>=Yi){for(let ji of ve.defaultedMembers)this.flowEnumErrorNumberMemberNotInitialized(ji.loc.start,{enumName:S,memberName:ji.id.name});return a.members=ve.numberMembers,this.expect(8),this.finishNode(a,"EnumNumberBody")}else return this.raise(Li.EnumInconsistentMemberValues,$,{enumName:S}),ct()}}}flowParseEnumDeclaration(a){let m=this.parseIdentifier();return a.id=m,a.body=this.flowEnumBody(this.startNode(),m),this.finishNode(a,"EnumDeclaration")}isLookaheadToken_lt(){let a=this.nextTokenStart();if(this.input.charCodeAt(a)===60){let m=this.input.charCodeAt(a+1);return m!==60&&m!==61}return!1}maybeUnwrapTypeCastExpression(a){return a.type==="TypeCastExpression"?a.expression:a}},So=Fi`jsx`({AttributeIsEmpty:"JSX attributes must only be assigned a non-empty expression.",MissingClosingTagElement:({openingTagName:d})=>`Expected corresponding JSX closing tag for <${d}>.`,MissingClosingTagFragment:"Expected corresponding JSX closing tag for <>.",UnexpectedSequenceExpression:"Sequence expressions cannot be directly nested inside JSX. Did you mean to wrap it in parentheses (...)?",UnexpectedToken:({unexpected:d,HTMLEntity:a})=>`Unexpected token \`${d}\`. Did you mean \`${a}\` or \`{'${d}'}\`?`,UnsupportedJsxValue:"JSX value should be either an expression or a quoted JSX text.",UnterminatedJsxContent:"Unterminated JSX contents.",UnwrappedAdjacentJSXElements:"Adjacent JSX elements must be wrapped in an enclosing tag. Did you want a JSX fragment <>...</>?"});function Ks(d){return d?d.type==="JSXOpeningFragment"||d.type==="JSXClosingFragment":!1}function Ia(d){if(d.type==="JSXIdentifier")return d.name;if(d.type==="JSXNamespacedName")return d.namespace.name+":"+d.name.name;if(d.type==="JSXMemberExpression")return Ia(d.object)+"."+Ia(d.property);throw new Error("Node had unexpected type: "+d.type)}var Xa=d=>class extends d{jsxReadToken(){let a="",m=this.state.pos;for(;;){if(this.state.pos>=this.length)throw this.raise(So.UnterminatedJsxContent,this.state.startLoc);let S=this.input.charCodeAt(this.state.pos);switch(S){case 60:case 123:if(this.state.pos===this.state.start){S===60&&this.state.canStartJSXElement?(++this.state.pos,this.finishToken(142)):super.getTokenFromCode(S);return}a+=this.input.slice(m,this.state.pos),this.finishToken(141,a);return;case 38:a+=this.input.slice(m,this.state.pos),a+=this.jsxReadEntity(),m=this.state.pos;break;case 62:case 125:default:Yn(S)?(a+=this.input.slice(m,this.state.pos),a+=this.jsxReadNewLine(!0),m=this.state.pos):++this.state.pos}}}jsxReadNewLine(a){let m=this.input.charCodeAt(this.state.pos),S;return++this.state.pos,m===13&&this.input.charCodeAt(this.state.pos)===10?(++this.state.pos,S=a?`
`:`\r
`):S=String.fromCharCode(m),++this.state.curLine,this.state.lineStart=this.state.pos,S}jsxReadString(a){let m="",S=++this.state.pos;for(;;){if(this.state.pos>=this.length)throw this.raise(rt.UnterminatedString,this.state.startLoc);let $=this.input.charCodeAt(this.state.pos);if($===a)break;$===38?(m+=this.input.slice(S,this.state.pos),m+=this.jsxReadEntity(),S=this.state.pos):Yn($)?(m+=this.input.slice(S,this.state.pos),m+=this.jsxReadNewLine(!1),S=this.state.pos):++this.state.pos}m+=this.input.slice(S,this.state.pos++),this.finishToken(133,m)}jsxReadEntity(){let a=++this.state.pos;if(this.codePointAtPos(this.state.pos)===35){++this.state.pos;let m=10;this.codePointAtPos(this.state.pos)===120&&(m=16,++this.state.pos);let S=this.readInt(m,void 0,!1,"bail");if(S!==null&&this.codePointAtPos(this.state.pos)===59)return++this.state.pos,String.fromCodePoint(S)}else{let m=0,S=!1;for(;m++<10&&this.state.pos<this.length&&!(S=this.codePointAtPos(this.state.pos)==59);)++this.state.pos;if(S){let $=this.input.slice(a,this.state.pos),ne;if(++this.state.pos,ne)return ne}}return this.state.pos=a,"&"}jsxReadWord(){let a,m=this.state.pos;do a=this.input.charCodeAt(++this.state.pos);while(Ct(a)||a===45);this.finishToken(140,this.input.slice(m,this.state.pos))}jsxParseIdentifier(){let a=this.startNode();return this.match(140)?a.name=this.state.value:Uo(this.state.type)?a.name=Zo(this.state.type):this.unexpected(),this.next(),this.finishNode(a,"JSXIdentifier")}jsxParseNamespacedName(){let a=this.state.startLoc,m=this.jsxParseIdentifier();if(!this.eat(14))return m;let S=this.startNodeAt(a);return S.namespace=m,S.name=this.jsxParseIdentifier(),this.finishNode(S,"JSXNamespacedName")}jsxParseElementName(){let a=this.state.startLoc,m=this.jsxParseNamespacedName();if(m.type==="JSXNamespacedName")return m;for(;this.eat(16);){let S=this.startNodeAt(a);S.object=m,S.property=this.jsxParseIdentifier(),m=this.finishNode(S,"JSXMemberExpression")}return m}jsxParseAttributeValue(){let a;switch(this.state.type){case 5:return a=this.startNode(),this.setContext(nr.brace),this.next(),a=this.jsxParseExpressionContainer(a,nr.j_oTag),a.expression.type==="JSXEmptyExpression"&&this.raise(So.AttributeIsEmpty,a),a;case 142:case 133:return this.parseExprAtom();default:throw this.raise(So.UnsupportedJsxValue,this.state.startLoc)}}jsxParseEmptyExpression(){let a=this.startNodeAt(this.state.lastTokEndLoc);return this.finishNodeAt(a,"JSXEmptyExpression",this.state.startLoc)}jsxParseSpreadChild(a){return this.next(),a.expression=this.parseExpression(),this.setContext(nr.j_expr),this.state.canStartJSXElement=!0,this.expect(8),this.finishNode(a,"JSXSpreadChild")}jsxParseExpressionContainer(a,m){if(this.match(8))a.expression=this.jsxParseEmptyExpression();else{let S=this.parseExpression();a.expression=S}return this.setContext(m),this.state.canStartJSXElement=!0,this.expect(8),this.finishNode(a,"JSXExpressionContainer")}jsxParseAttribute(){let a=this.startNode();return this.match(5)?(this.setContext(nr.brace),this.next(),this.expect(21),a.argument=this.parseMaybeAssignAllowIn(),this.setContext(nr.j_oTag),this.state.canStartJSXElement=!0,this.expect(8),this.finishNode(a,"JSXSpreadAttribute")):(a.name=this.jsxParseNamespacedName(),a.value=this.eat(29)?this.jsxParseAttributeValue():null,this.finishNode(a,"JSXAttribute"))}jsxParseOpeningElementAt(a){let m=this.startNodeAt(a);return this.eat(143)?this.finishNode(m,"JSXOpeningFragment"):(m.name=this.jsxParseElementName(),this.jsxParseOpeningElementAfterName(m))}jsxParseOpeningElementAfterName(a){let m=[];for(;!this.match(56)&&!this.match(143);)m.push(this.jsxParseAttribute());return a.attributes=m,a.selfClosing=this.eat(56),this.expect(143),this.finishNode(a,"JSXOpeningElement")}jsxParseClosingElementAt(a){let m=this.startNodeAt(a);return this.eat(143)?this.finishNode(m,"JSXClosingFragment"):(m.name=this.jsxParseElementName(),this.expect(143),this.finishNode(m,"JSXClosingElement"))}jsxParseElementAt(a){let m=this.startNodeAt(a),S=[],$=this.jsxParseOpeningElementAt(a),ne=null;if(!$.selfClosing){e:for(;;)switch(this.state.type){case 142:if(a=this.state.startLoc,this.next(),this.eat(56)){ne=this.jsxParseClosingElementAt(a);break e}S.push(this.jsxParseElementAt(a));break;case 141:S.push(this.parseExprAtom());break;case 5:{let ve=this.startNode();this.setContext(nr.brace),this.next(),this.match(21)?S.push(this.jsxParseSpreadChild(ve)):S.push(this.jsxParseExpressionContainer(ve,nr.j_expr));break}default:this.unexpected()}Ks($)&&!Ks(ne)&&ne!==null?this.raise(So.MissingClosingTagFragment,ne):!Ks($)&&Ks(ne)?this.raise(So.MissingClosingTagElement,ne,{openingTagName:Ia($.name)}):!Ks($)&&!Ks(ne)&&Ia(ne.name)!==Ia($.name)&&this.raise(So.MissingClosingTagElement,ne,{openingTagName:Ia($.name)})}if(Ks($)?(m.openingFragment=$,m.closingFragment=ne):(m.openingElement=$,m.closingElement=ne),m.children=S,this.match(47))throw this.raise(So.UnwrappedAdjacentJSXElements,this.state.startLoc);return Ks($)?this.finishNode(m,"JSXFragment"):this.finishNode(m,"JSXElement")}jsxParseElement(){let a=this.state.startLoc;return this.next(),this.jsxParseElementAt(a)}setContext(a){let{context:m}=this.state;m[m.length-1]=a}parseExprAtom(a){return this.match(141)?this.parseLiteral(this.state.value,"JSXText"):this.match(142)?this.jsxParseElement():this.match(47)&&this.input.charCodeAt(this.state.pos)!==33?(this.replaceToken(142),this.jsxParseElement()):super.parseExprAtom(a)}skipSpace(){this.curContext().preserveSpace||super.skipSpace()}getTokenFromCode(a){let m=this.curContext();if(m===nr.j_expr){this.jsxReadToken();return}if(m===nr.j_oTag||m===nr.j_cTag){if(Je(a)){this.jsxReadWord();return}if(a===62){++this.state.pos,this.finishToken(143);return}if((a===34||a===39)&&m===nr.j_oTag){this.jsxReadString(a);return}}if(a===60&&this.state.canStartJSXElement&&this.input.charCodeAt(this.state.pos+1)!==33){++this.state.pos,this.finishToken(142);return}super.getTokenFromCode(a)}updateContext(a){let{context:m,type:S}=this.state;if(S===56&&a===142)m.splice(-2,2,nr.j_cTag),this.state.canStartJSXElement=!1;else if(S===142)m.push(nr.j_oTag);else if(S===143){let $=m[m.length-1];$===nr.j_oTag&&a===56||$===nr.j_cTag?(m.pop(),this.state.canStartJSXElement=m[m.length-1]===nr.j_expr):(this.setContext(nr.j_expr),this.state.canStartJSXElement=!0)}else this.state.canStartJSXElement=Xi(S)}},Jl=class extends vt{constructor(...d){super(...d),this.tsNames=new Map}},ua=class extends Bt{constructor(...d){super(...d),this.importsStack=[]}createScope(d){return this.importsStack.push(new Set),new Jl(d)}enter(d){d==256&&this.importsStack.push(new Set),super.enter(d)}exit(){let d=super.exit();return d==256&&this.importsStack.pop(),d}hasImport(d,a){let m=this.importsStack.length;if(this.importsStack[m-1].has(d))return!0;if(!a&&m>1){for(let S=0;S<m-1;S++)if(this.importsStack[S].has(d))return!0}return!1}declareName(d,a,m){if(a&4096){this.hasImport(d,!0)&&this.parser.raise(rt.VarRedeclaration,m,{identifierName:d}),this.importsStack[this.importsStack.length-1].add(d);return}let S=this.currentScope(),$=S.tsNames.get(d)||0;if(a&1024){this.maybeExportDefined(S,d),S.tsNames.set(d,$|16);return}super.declareName(d,a,m),a&2&&(a&1||(this.checkRedeclarationInScope(S,d,a,m),this.maybeExportDefined(S,d)),$=$|1),a&256&&($=$|2),a&512&&($=$|4),a&128&&($=$|8),$&&S.tsNames.set(d,$)}isRedeclaredInScope(d,a,m){let S=d.tsNames.get(a);if((S&2)>0){if(m&256){let $=!!(m&512),ne=(S&4)>0;return $!==ne}return!0}return m&128&&(S&8)>0?d.names.get(a)&2?!!(m&1):!1:m&2&&(S&1)>0?!0:super.isRedeclaredInScope(d,a,m)}checkLocalExport(d){let{name:a}=d;if(this.hasImport(a))return;let m=this.scopeStack.length;for(let S=m-1;S>=0;S--){let $=this.scopeStack[S].tsNames.get(a);if(($&1)>0||($&16)>0)return}super.checkLocalExport(d)}},Ea=(d,a)=>Object.hasOwnProperty.call(d,a)&&d[a],Mt=d=>d.type==="ParenthesizedExpression"?Mt(d.expression):d,$i=class extends xs{toAssignable(d,a=!1){var m,S;let $;switch((d.type==="ParenthesizedExpression"||(m=d.extra)!=null&&m.parenthesized)&&($=Mt(d),a?$.type==="Identifier"?this.expressionScope.recordArrowParameterBindingError(rt.InvalidParenthesizedAssignment,d):$.type!=="MemberExpression"&&!this.isOptionalMemberExpression($)&&this.raise(rt.InvalidParenthesizedAssignment,d):this.raise(rt.InvalidParenthesizedAssignment,d)),d.type){case"Identifier":case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":d.type="ObjectPattern";for(let ve=0,qe=d.properties.length,ct=qe-1;ve<qe;ve++){var ne;let at=d.properties[ve],On=ve===ct;this.toAssignableObjectExpressionProp(at,On,a),On&&at.type==="RestElement"&&(ne=d.extra)!=null&&ne.trailingCommaLoc&&this.raise(rt.RestTrailingComma,d.extra.trailingCommaLoc)}break;case"ObjectProperty":{let{key:ve,value:qe}=d;this.isPrivateName(ve)&&this.classScope.usePrivateName(this.getPrivateNameSV(ve),ve.loc.start),this.toAssignable(qe,a);break}case"SpreadElement":throw new Error("Internal @babel/parser error (this is a bug, please report it). SpreadElement should be converted by .toAssignable's caller.");case"ArrayExpression":d.type="ArrayPattern",this.toAssignableList(d.elements,(S=d.extra)==null?void 0:S.trailingCommaLoc,a);break;case"AssignmentExpression":d.operator!=="="&&this.raise(rt.MissingEqInAssignment,d.left.loc.end),d.type="AssignmentPattern",delete d.operator,this.toAssignable(d.left,a);break;case"ParenthesizedExpression":this.toAssignable($,a);break}}toAssignableObjectExpressionProp(d,a,m){if(d.type==="ObjectMethod")this.raise(d.kind==="get"||d.kind==="set"?rt.PatternHasAccessor:rt.PatternHasMethod,d.key);else if(d.type==="SpreadElement"){d.type="RestElement";let S=d.argument;this.checkToRestConversion(S,!1),this.toAssignable(S,m),a||this.raise(rt.RestTrailingComma,d)}else this.toAssignable(d,m)}toAssignableList(d,a,m){let S=d.length-1;for(let $=0;$<=S;$++){let ne=d[$];if(ne){if(ne.type==="SpreadElement"){ne.type="RestElement";let ve=ne.argument;this.checkToRestConversion(ve,!0),this.toAssignable(ve,m)}else this.toAssignable(ne,m);ne.type==="RestElement"&&($<S?this.raise(rt.RestTrailingComma,ne):a&&this.raise(rt.RestTrailingComma,a))}}}isAssignable(d,a){switch(d.type){case"Identifier":case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":return!0;case"ObjectExpression":{let m=d.properties.length-1;return d.properties.every((S,$)=>S.type!=="ObjectMethod"&&($===m||S.type!=="SpreadElement")&&this.isAssignable(S))}case"ObjectProperty":return this.isAssignable(d.value);case"SpreadElement":return this.isAssignable(d.argument);case"ArrayExpression":return d.elements.every(m=>m===null||this.isAssignable(m));case"AssignmentExpression":return d.operator==="=";case"ParenthesizedExpression":return this.isAssignable(d.expression);case"MemberExpression":case"OptionalMemberExpression":return!a;default:return!1}}toReferencedList(d,a){return d}toReferencedListDeep(d,a){this.toReferencedList(d,a);for(let m of d)(m==null?void 0:m.type)==="ArrayExpression"&&this.toReferencedListDeep(m.elements)}parseSpread(d){let a=this.startNode();return this.next(),a.argument=this.parseMaybeAssignAllowIn(d,void 0),this.finishNode(a,"SpreadElement")}parseRestBinding(){let d=this.startNode();return this.next(),d.argument=this.parseBindingAtom(),this.finishNode(d,"RestElement")}parseBindingAtom(){switch(this.state.type){case 0:{let d=this.startNode();return this.next(),d.elements=this.parseBindingList(3,93,1),this.finishNode(d,"ArrayPattern")}case 5:return this.parseObjectLike(8,!0)}return this.parseIdentifier()}parseBindingList(d,a,m){let S=m&1,$=[],ne=!0;for(;!this.eat(d);)if(ne?ne=!1:this.expect(12),S&&this.match(12))$.push(null);else{if(this.eat(d))break;if(this.match(21)){if($.push(this.parseAssignableListItemTypes(this.parseRestBinding(),m)),!this.checkCommaAfterRest(a)){this.expect(d);break}}else{let ve=[];for(this.match(26)&&this.hasPlugin("decorators")&&this.raise(rt.UnsupportedParameterDecorator,this.state.startLoc);this.match(26);)ve.push(this.parseDecorator());$.push(this.parseAssignableListItem(m,ve))}}return $}parseBindingRestProperty(d){return this.next(),d.argument=this.parseIdentifier(),this.checkCommaAfterRest(125),this.finishNode(d,"RestElement")}parseBindingProperty(){let d=this.startNode(),{type:a,startLoc:m}=this.state;return a===21?this.parseBindingRestProperty(d):(a===138?(this.expectPlugin("destructuringPrivate",m),this.classScope.usePrivateName(this.state.value,m),d.key=this.parsePrivateName()):this.parsePropertyName(d),d.method=!1,this.parseObjPropValue(d,m,!1,!1,!0,!1))}parseAssignableListItem(d,a){let m=this.parseMaybeDefault();this.parseAssignableListItemTypes(m,d);let S=this.parseMaybeDefault(m.loc.start,m);return a.length&&(m.decorators=a),S}parseAssignableListItemTypes(d,a){return d}parseMaybeDefault(d,a){var m,S;if((m=d)!=null||(d=this.state.startLoc),a=(S=a)!=null?S:this.parseBindingAtom(),!this.eat(29))return a;let $=this.startNodeAt(d);return $.left=a,$.right=this.parseMaybeAssignAllowIn(),this.finishNode($,"AssignmentPattern")}isValidLVal(d,a,m){return Ea({AssignmentPattern:"left",RestElement:"argument",ObjectProperty:"value",ParenthesizedExpression:"expression",ArrayPattern:"elements",ObjectPattern:"properties"},d)}isOptionalMemberExpression(d){return d.type==="OptionalMemberExpression"}checkLVal(d,{in:a,binding:m=64,checkClashes:S=!1,strictModeChanged:$=!1,hasParenthesizedAncestor:ne=!1}){var ve;let qe=d.type;if(this.isObjectMethod(d))return;let ct=this.isOptionalMemberExpression(d);if(ct||qe==="MemberExpression"){ct&&(this.expectPlugin("optionalChainingAssign",d.loc.start),a.type!=="AssignmentExpression"&&this.raise(rt.InvalidLhsOptionalChaining,d,{ancestor:a})),m!==64&&this.raise(rt.InvalidPropertyBindingPattern,d);return}if(qe==="Identifier"){this.checkIdentifier(d,m,$);let{name:ji}=d;S&&(S.has(ji)?this.raise(rt.ParamDupe,d):S.add(ji));return}let at=this.isValidLVal(qe,!(ne||(ve=d.extra)!=null&&ve.parenthesized)&&a.type==="AssignmentExpression",m);if(at===!0)return;if(at===!1){let ji=m===64?rt.InvalidLhs:rt.InvalidLhsBinding;this.raise(ji,d,{ancestor:a});return}let[On,ui]=Array.isArray(at)?at:[at,qe==="ParenthesizedExpression"],Yi=qe==="ArrayPattern"||qe==="ObjectPattern"?{type:qe}:a;for(let ji of[].concat(d[On]))ji&&this.checkLVal(ji,{in:Yi,binding:m,checkClashes:S,strictModeChanged:$,hasParenthesizedAncestor:ui})}checkIdentifier(d,a,m=!1){this.state.strict&&(m?_o(d.name,this.inModule):fr(d.name))&&(a===64?this.raise(rt.StrictEvalArguments,d,{referenceName:d.name}):this.raise(rt.StrictEvalArgumentsBinding,d,{bindingName:d.name})),a&8192&&d.name==="let"&&this.raise(rt.LetInLexicalBinding,d),a&64||this.declareNameFromIdentifier(d,a)}declareNameFromIdentifier(d,a){this.scope.declareName(d.name,a,d.loc.start)}checkToRestConversion(d,a){switch(d.type){case"ParenthesizedExpression":this.checkToRestConversion(d.expression,a);break;case"Identifier":case"MemberExpression":break;case"ArrayExpression":case"ObjectExpression":if(a)break;default:this.raise(rt.InvalidRestAssignmentPattern,d)}}checkCommaAfterRest(d){return this.match(12)?(this.raise(this.lookaheadCharCode()===d?rt.RestTrailingComma:rt.ElementAfterRest,this.state.startLoc),!0):!1}},Ir=(d,a)=>Object.hasOwnProperty.call(d,a)&&d[a];function es(d){if(d==null)throw new Error(`Unexpected ${d} value.`);return d}function Ps(d){if(!d)throw new Error("Assert fail")}var Rn=Fi`typescript`({AbstractMethodHasImplementation:({methodName:d})=>`Method '${d}' cannot have an implementation because it is marked abstract.`,AbstractPropertyHasInitializer:({propertyName:d})=>`Property '${d}' cannot have an initializer because it is marked abstract.`,AccesorCannotDeclareThisParameter:"'get' and 'set' accessors cannot declare 'this' parameters.",AccesorCannotHaveTypeParameters:"An accessor cannot have type parameters.",AccessorCannotBeOptional:"An 'accessor' property cannot be declared optional.",ClassMethodHasDeclare:"Class methods cannot have the 'declare' modifier.",ClassMethodHasReadonly:"Class methods cannot have the 'readonly' modifier.",ConstInitiailizerMustBeStringOrNumericLiteralOrLiteralEnumReference:"A 'const' initializer in an ambient context must be a string or numeric literal or literal enum reference.",ConstructorHasTypeParameters:"Type parameters cannot appear on a constructor declaration.",DeclareAccessor:({kind:d})=>`'declare' is not allowed in ${d}ters.`,DeclareClassFieldHasInitializer:"Initializers are not allowed in ambient contexts.",DeclareFunctionHasImplementation:"An implementation cannot be declared in ambient contexts.",DuplicateAccessibilityModifier:({modifier:d})=>"Accessibility modifier already seen.",DuplicateModifier:({modifier:d})=>`Duplicate modifier: '${d}'.`,EmptyHeritageClauseType:({token:d})=>`'${d}' list cannot be empty.`,EmptyTypeArguments:"Type argument list cannot be empty.",EmptyTypeParameters:"Type parameter list cannot be empty.",ExpectedAmbientAfterExportDeclare:"'export declare' must be followed by an ambient declaration.",ImportAliasHasImportType:"An import alias can not use 'import type'.",ImportReflectionHasImportType:"An `import module` declaration can not use `type` modifier",IncompatibleModifiers:({modifiers:d})=>`'${d[0]}' modifier cannot be used with '${d[1]}' modifier.`,IndexSignatureHasAbstract:"Index signatures cannot have the 'abstract' modifier.",IndexSignatureHasAccessibility:({modifier:d})=>`Index signatures cannot have an accessibility modifier ('${d}').`,IndexSignatureHasDeclare:"Index signatures cannot have the 'declare' modifier.",IndexSignatureHasOverride:"'override' modifier cannot appear on an index signature.",IndexSignatureHasStatic:"Index signatures cannot have the 'static' modifier.",InitializerNotAllowedInAmbientContext:"Initializers are not allowed in ambient contexts.",InvalidModifierOnTypeMember:({modifier:d})=>`'${d}' modifier cannot appear on a type member.`,InvalidModifierOnTypeParameter:({modifier:d})=>`'${d}' modifier cannot appear on a type parameter.`,InvalidModifierOnTypeParameterPositions:({modifier:d})=>`'${d}' modifier can only appear on a type parameter of a class, interface or type alias.`,InvalidModifiersOrder:({orderedModifiers:d})=>`'${d[0]}' modifier must precede '${d[1]}' modifier.`,InvalidPropertyAccessAfterInstantiationExpression:"Invalid property access after an instantiation expression. You can either wrap the instantiation expression in parentheses, or delete the type arguments.",InvalidTupleMemberLabel:"Tuple members must be labeled with a simple identifier.",MissingInterfaceName:"'interface' declarations must be followed by an identifier.",NonAbstractClassHasAbstractMethod:"Abstract methods can only appear within an abstract class.",NonClassMethodPropertyHasAbstractModifer:"'abstract' modifier can only appear on a class, method, or property declaration.",OptionalTypeBeforeRequired:"A required element cannot follow an optional element.",OverrideNotInSubClass:"This member cannot have an 'override' modifier because its containing class does not extend another class.",PatternIsOptional:"A binding pattern parameter cannot be optional in an implementation signature.",PrivateElementHasAbstract:"Private elements cannot have the 'abstract' modifier.",PrivateElementHasAccessibility:({modifier:d})=>`Private elements cannot have an accessibility modifier ('${d}').`,ReadonlyForMethodSignature:"'readonly' modifier can only appear on a property declaration or index signature.",ReservedArrowTypeParam:"This syntax is reserved in files with the .mts or .cts extension. Add a trailing comma, as in `<T,>() => ...`.",ReservedTypeAssertion:"This syntax is reserved in files with the .mts or .cts extension. Use an `as` expression instead.",SetAccesorCannotHaveOptionalParameter:"A 'set' accessor cannot have an optional parameter.",SetAccesorCannotHaveRestParameter:"A 'set' accessor cannot have rest parameter.",SetAccesorCannotHaveReturnType:"A 'set' accessor cannot have a return type annotation.",SingleTypeParameterWithoutTrailingComma:({typeParameterName:d})=>`Single type parameter ${d} should have a trailing comma. Example usage: <${d},>.`,StaticBlockCannotHaveModifier:"Static class blocks cannot have any modifier.",TupleOptionalAfterType:"A labeled tuple optional element must be declared using a question mark after the name and before the colon (`name?: type`), rather than after the type (`name: type?`).",TypeAnnotationAfterAssign:"Type annotations must come before default assignments, e.g. instead of `age = 25: number` use `age: number = 25`.",TypeImportCannotSpecifyDefaultAndNamed:"A type-only import can specify a default import or named bindings, but not both.",TypeModifierIsUsedInTypeExports:"The 'type' modifier cannot be used on a named export when 'export type' is used on its export statement.",TypeModifierIsUsedInTypeImports:"The 'type' modifier cannot be used on a named import when 'import type' is used on its import statement.",UnexpectedParameterModifier:"A parameter property is only allowed in a constructor implementation.",UnexpectedReadonly:"'readonly' type modifier is only permitted on array and tuple literal types.",UnexpectedTypeAnnotation:"Did not expect a type annotation here.",UnexpectedTypeCastInParameter:"Unexpected type cast in parameter position.",UnsupportedImportTypeArgument:"Argument in a type import must be a string literal.",UnsupportedParameterPropertyKind:"A parameter property may not be declared using a binding pattern.",UnsupportedSignatureParameterKind:({type:d})=>`Name in a signature must be an Identifier, ObjectPattern or ArrayPattern, instead got ${d}.`});function Po(d){switch(d){case"any":return"TSAnyKeyword";case"boolean":return"TSBooleanKeyword";case"bigint":return"TSBigIntKeyword";case"never":return"TSNeverKeyword";case"number":return"TSNumberKeyword";case"object":return"TSObjectKeyword";case"string":return"TSStringKeyword";case"symbol":return"TSSymbolKeyword";case"undefined":return"TSUndefinedKeyword";case"unknown":return"TSUnknownKeyword";default:return}}function Nr(d){return d==="private"||d==="public"||d==="protected"}function cl(d){return d==="in"||d==="out"}var Ca=d=>class extends d{constructor(...a){super(...a),this.tsParseInOutModifiers=this.tsParseModifiers.bind(this,{allowedModifiers:["in","out"],disallowedModifiers:["const","public","private","protected","readonly","declare","abstract","override"],errorTemplate:Rn.InvalidModifierOnTypeParameter}),this.tsParseConstModifier=this.tsParseModifiers.bind(this,{allowedModifiers:["const"],disallowedModifiers:["in","out"],errorTemplate:Rn.InvalidModifierOnTypeParameterPositions}),this.tsParseInOutConstModifiers=this.tsParseModifiers.bind(this,{allowedModifiers:["in","out","const"],disallowedModifiers:["public","private","protected","readonly","declare","abstract","override"],errorTemplate:Rn.InvalidModifierOnTypeParameter})}getScopeHandler(){return ua}tsIsIdentifier(){return Xt(this.state.type)}tsTokenCanFollowModifier(){return(this.match(0)||this.match(5)||this.match(55)||this.match(21)||this.match(138)||this.isLiteralPropertyName())&&!this.hasPrecedingLineBreak()}tsNextTokenCanFollowModifier(){return this.next(),this.tsTokenCanFollowModifier()}tsParseModifier(a,m){if(!Xt(this.state.type)&&this.state.type!==58&&this.state.type!==75)return;let S=this.state.value;if(a.indexOf(S)!==-1){if(m&&this.tsIsStartOfStaticBlocks())return;if(this.tsTryParse(this.tsNextTokenCanFollowModifier.bind(this)))return S}}tsParseModifiers({allowedModifiers:a,disallowedModifiers:m,stopOnStartOfClassStaticBlock:S,errorTemplate:$=Rn.InvalidModifierOnTypeMember},ne){let ve=(ct,at,On,ui)=>{at===On&&ne[ui]&&this.raise(Rn.InvalidModifiersOrder,ct,{orderedModifiers:[On,ui]})},qe=(ct,at,On,ui)=>{(ne[On]&&at===ui||ne[ui]&&at===On)&&this.raise(Rn.IncompatibleModifiers,ct,{modifiers:[On,ui]})};for(;;){let{startLoc:ct}=this.state,at=this.tsParseModifier(a.concat(m!=null?m:[]),S);if(!at)break;Nr(at)?ne.accessibility?this.raise(Rn.DuplicateAccessibilityModifier,ct,{modifier:at}):(ve(ct,at,at,"override"),ve(ct,at,at,"static"),ve(ct,at,at,"readonly"),ne.accessibility=at):cl(at)?(ne[at]&&this.raise(Rn.DuplicateModifier,ct,{modifier:at}),ne[at]=!0,ve(ct,at,"in","out")):(Object.hasOwnProperty.call(ne,at)?this.raise(Rn.DuplicateModifier,ct,{modifier:at}):(ve(ct,at,"static","readonly"),ve(ct,at,"static","override"),ve(ct,at,"override","readonly"),ve(ct,at,"abstract","override"),qe(ct,at,"declare","override"),qe(ct,at,"static","abstract")),ne[at]=!0),m!=null&&m.includes(at)&&this.raise($,ct,{modifier:at})}}tsIsListTerminator(a){switch(a){case"EnumMembers":case"TypeMembers":return this.match(8);case"HeritageClauseElement":return this.match(5);case"TupleElementTypes":return this.match(3);case"TypeParametersOrArguments":return this.match(48)}}tsParseList(a,m){let S=[];for(;!this.tsIsListTerminator(a);)S.push(m());return S}tsParseDelimitedList(a,m,S){return es(this.tsParseDelimitedListWorker(a,m,!0,S))}tsParseDelimitedListWorker(a,m,S,$){let ne=[],ve=-1;for(;!this.tsIsListTerminator(a);){ve=-1;let qe=m();if(qe==null)return;if(ne.push(qe),this.eat(12)){ve=this.state.lastTokStartLoc.index;continue}if(this.tsIsListTerminator(a))break;S&&this.expect(12);return}return $&&($.value=ve),ne}tsParseBracketedList(a,m,S,$,ne){$||(S?this.expect(0):this.expect(47));let ve=this.tsParseDelimitedList(a,m,ne);return S?this.expect(3):this.expect(48),ve}tsParseImportType(){let a=this.startNode();return this.expect(83),this.expect(10),this.match(133)||this.raise(Rn.UnsupportedImportTypeArgument,this.state.startLoc),a.argument=super.parseExprAtom(),this.expect(11),this.eat(16)&&(a.qualifier=this.tsParseEntityName()),this.match(47)&&(a.typeParameters=this.tsParseTypeArguments()),this.finishNode(a,"TSImportType")}tsParseEntityName(a=!0){let m=this.parseIdentifier(a);for(;this.eat(16);){let S=this.startNodeAtNode(m);S.left=m,S.right=this.parseIdentifier(a),m=this.finishNode(S,"TSQualifiedName")}return m}tsParseTypeReference(){let a=this.startNode();return a.typeName=this.tsParseEntityName(),!this.hasPrecedingLineBreak()&&this.match(47)&&(a.typeParameters=this.tsParseTypeArguments()),this.finishNode(a,"TSTypeReference")}tsParseThisTypePredicate(a){this.next();let m=this.startNodeAtNode(a);return m.parameterName=a,m.typeAnnotation=this.tsParseTypeAnnotation(!1),m.asserts=!1,this.finishNode(m,"TSTypePredicate")}tsParseThisTypeNode(){let a=this.startNode();return this.next(),this.finishNode(a,"TSThisType")}tsParseTypeQuery(){let a=this.startNode();return this.expect(87),this.match(83)?a.exprName=this.tsParseImportType():a.exprName=this.tsParseEntityName(),!this.hasPrecedingLineBreak()&&this.match(47)&&(a.typeParameters=this.tsParseTypeArguments()),this.finishNode(a,"TSTypeQuery")}tsParseTypeParameter(a){let m=this.startNode();return a(m),m.name=this.tsParseTypeParameterName(),m.constraint=this.tsEatThenParseType(81),m.default=this.tsEatThenParseType(29),this.finishNode(m,"TSTypeParameter")}tsTryParseTypeParameters(a){if(this.match(47))return this.tsParseTypeParameters(a)}tsParseTypeParameters(a){let m=this.startNode();this.match(47)||this.match(142)?this.next():this.unexpected();let S={value:-1};return m.params=this.tsParseBracketedList("TypeParametersOrArguments",this.tsParseTypeParameter.bind(this,a),!1,!0,S),m.params.length===0&&this.raise(Rn.EmptyTypeParameters,m),S.value!==-1&&this.addExtra(m,"trailingComma",S.value),this.finishNode(m,"TSTypeParameterDeclaration")}tsFillSignature(a,m){let S=a===19,$="parameters",ne="typeAnnotation";m.typeParameters=this.tsTryParseTypeParameters(this.tsParseConstModifier),this.expect(10),m[$]=this.tsParseBindingListForSignature(),S?m[ne]=this.tsParseTypeOrTypePredicateAnnotation(a):this.match(a)&&(m[ne]=this.tsParseTypeOrTypePredicateAnnotation(a))}tsParseBindingListForSignature(){let a=super.parseBindingList(11,41,2);for(let m of a){let{type:S}=m;(S==="AssignmentPattern"||S==="TSParameterProperty")&&this.raise(Rn.UnsupportedSignatureParameterKind,m,{type:S})}return a}tsParseTypeMemberSemicolon(){!this.eat(12)&&!this.isLineTerminator()&&this.expect(13)}tsParseSignatureMember(a,m){return this.tsFillSignature(14,m),this.tsParseTypeMemberSemicolon(),this.finishNode(m,a)}tsIsUnambiguouslyIndexSignature(){return this.next(),Xt(this.state.type)?(this.next(),this.match(14)):!1}tsTryParseIndexSignature(a){if(!(this.match(0)&&this.tsLookAhead(this.tsIsUnambiguouslyIndexSignature.bind(this))))return;this.expect(0);let m=this.parseIdentifier();m.typeAnnotation=this.tsParseTypeAnnotation(),this.resetEndLocation(m),this.expect(3),a.parameters=[m];let S=this.tsTryParseTypeAnnotation();return S&&(a.typeAnnotation=S),this.tsParseTypeMemberSemicolon(),this.finishNode(a,"TSIndexSignature")}tsParsePropertyOrMethodSignature(a,m){this.eat(17)&&(a.optional=!0);let S=a;if(this.match(10)||this.match(47)){m&&this.raise(Rn.ReadonlyForMethodSignature,a);let $=S;$.kind&&this.match(47)&&this.raise(Rn.AccesorCannotHaveTypeParameters,this.state.curPosition()),this.tsFillSignature(14,$),this.tsParseTypeMemberSemicolon();let ne="parameters",ve="typeAnnotation";if($.kind==="get")$[ne].length>0&&(this.raise(rt.BadGetterArity,this.state.curPosition()),this.isThisParam($[ne][0])&&this.raise(Rn.AccesorCannotDeclareThisParameter,this.state.curPosition()));else if($.kind==="set"){if($[ne].length!==1)this.raise(rt.BadSetterArity,this.state.curPosition());else{let qe=$[ne][0];this.isThisParam(qe)&&this.raise(Rn.AccesorCannotDeclareThisParameter,this.state.curPosition()),qe.type==="Identifier"&&qe.optional&&this.raise(Rn.SetAccesorCannotHaveOptionalParameter,this.state.curPosition()),qe.type==="RestElement"&&this.raise(Rn.SetAccesorCannotHaveRestParameter,this.state.curPosition())}$[ve]&&this.raise(Rn.SetAccesorCannotHaveReturnType,$[ve])}else $.kind="method";return this.finishNode($,"TSMethodSignature")}else{let $=S;m&&($.readonly=!0);let ne=this.tsTryParseTypeAnnotation();return ne&&($.typeAnnotation=ne),this.tsParseTypeMemberSemicolon(),this.finishNode($,"TSPropertySignature")}}tsParseTypeMember(){let a=this.startNode();if(this.match(10)||this.match(47))return this.tsParseSignatureMember("TSCallSignatureDeclaration",a);if(this.match(77)){let S=this.startNode();return this.next(),this.match(10)||this.match(47)?this.tsParseSignatureMember("TSConstructSignatureDeclaration",a):(a.key=this.createIdentifier(S,"new"),this.tsParsePropertyOrMethodSignature(a,!1))}return this.tsParseModifiers({allowedModifiers:["readonly"],disallowedModifiers:["declare","abstract","private","protected","public","static","override"]},a),this.tsTryParseIndexSignature(a)||(super.parsePropertyName(a),!a.computed&&a.key.type==="Identifier"&&(a.key.name==="get"||a.key.name==="set")&&this.tsTokenCanFollowModifier()&&(a.kind=a.key.name,super.parsePropertyName(a)),this.tsParsePropertyOrMethodSignature(a,!!a.readonly))}tsParseTypeLiteral(){let a=this.startNode();return a.members=this.tsParseObjectTypeMembers(),this.finishNode(a,"TSTypeLiteral")}tsParseObjectTypeMembers(){this.expect(5);let a=this.tsParseList("TypeMembers",this.tsParseTypeMember.bind(this));return this.expect(8),a}tsIsStartOfMappedType(){return this.next(),this.eat(53)?this.isContextual(122):(this.isContextual(122)&&this.next(),!this.match(0)||(this.next(),!this.tsIsIdentifier())?!1:(this.next(),this.match(58)))}tsParseMappedTypeParameter(){let a=this.startNode();return a.name=this.tsParseTypeParameterName(),a.constraint=this.tsExpectThenParseType(58),this.finishNode(a,"TSTypeParameter")}tsParseMappedType(){let a=this.startNode();return this.expect(5),this.match(53)?(a.readonly=this.state.value,this.next(),this.expectContextual(122)):this.eatContextual(122)&&(a.readonly=!0),this.expect(0),a.typeParameter=this.tsParseMappedTypeParameter(),a.nameType=this.eatContextual(93)?this.tsParseType():null,this.expect(3),this.match(53)?(a.optional=this.state.value,this.next(),this.expect(17)):this.eat(17)&&(a.optional=!0),a.typeAnnotation=this.tsTryParseType(),this.semicolon(),this.expect(8),this.finishNode(a,"TSMappedType")}tsParseTupleType(){let a=this.startNode();a.elementTypes=this.tsParseBracketedList("TupleElementTypes",this.tsParseTupleElementType.bind(this),!0,!1);let m=!1;return a.elementTypes.forEach(S=>{let{type:$}=S;m&&$!=="TSRestType"&&$!=="TSOptionalType"&&!($==="TSNamedTupleMember"&&S.optional)&&this.raise(Rn.OptionalTypeBeforeRequired,S),m||(m=$==="TSNamedTupleMember"&&S.optional||$==="TSOptionalType")}),this.finishNode(a,"TSTupleType")}tsParseTupleElementType(){let{startLoc:a}=this.state,m=this.eat(21),S,$,ne,ve,qe=ri(this.state.type)?this.lookaheadCharCode():null;if(qe===58)S=!0,ne=!1,$=this.parseIdentifier(!0),this.expect(14),ve=this.tsParseType();else if(qe===63){ne=!0;let ct=this.state.startLoc,at=this.state.value,On=this.tsParseNonArrayType();this.lookaheadCharCode()===58?(S=!0,$=this.createIdentifier(this.startNodeAt(ct),at),this.expect(17),this.expect(14),ve=this.tsParseType()):(S=!1,ve=On,this.expect(17))}else ve=this.tsParseType(),ne=this.eat(17),S=this.eat(14);if(S){let ct;$?(ct=this.startNodeAtNode($),ct.optional=ne,ct.label=$,ct.elementType=ve,this.eat(17)&&(ct.optional=!0,this.raise(Rn.TupleOptionalAfterType,this.state.lastTokStartLoc))):(ct=this.startNodeAtNode(ve),ct.optional=ne,this.raise(Rn.InvalidTupleMemberLabel,ve),ct.label=ve,ct.elementType=this.tsParseType()),ve=this.finishNode(ct,"TSNamedTupleMember")}else if(ne){let ct=this.startNodeAtNode(ve);ct.typeAnnotation=ve,ve=this.finishNode(ct,"TSOptionalType")}if(m){let ct=this.startNodeAt(a);ct.typeAnnotation=ve,ve=this.finishNode(ct,"TSRestType")}return ve}tsParseParenthesizedType(){let a=this.startNode();return this.expect(10),a.typeAnnotation=this.tsParseType(),this.expect(11),this.finishNode(a,"TSParenthesizedType")}tsParseFunctionOrConstructorType(a,m){let S=this.startNode();return a==="TSConstructorType"&&(S.abstract=!!m,m&&this.next(),this.next()),this.tsInAllowConditionalTypesContext(()=>this.tsFillSignature(19,S)),this.finishNode(S,a)}tsParseLiteralTypeNode(){let a=this.startNode();switch(this.state.type){case 134:case 135:case 133:case 85:case 86:a.literal=super.parseExprAtom();break;default:this.unexpected()}return this.finishNode(a,"TSLiteralType")}tsParseTemplateLiteralType(){let a=this.startNode();return a.literal=super.parseTemplate(!1),this.finishNode(a,"TSLiteralType")}parseTemplateSubstitution(){return this.state.inType?this.tsParseType():super.parseTemplateSubstitution()}tsParseThisTypeOrThisTypePredicate(){let a=this.tsParseThisTypeNode();return this.isContextual(116)&&!this.hasPrecedingLineBreak()?this.tsParseThisTypePredicate(a):a}tsParseNonArrayType(){switch(this.state.type){case 133:case 134:case 135:case 85:case 86:return this.tsParseLiteralTypeNode();case 53:if(this.state.value==="-"){let a=this.startNode(),m=this.lookahead();return m.type!==134&&m.type!==135&&this.unexpected(),a.literal=this.parseMaybeUnary(),this.finishNode(a,"TSLiteralType")}break;case 78:return this.tsParseThisTypeOrThisTypePredicate();case 87:return this.tsParseTypeQuery();case 83:return this.tsParseImportType();case 5:return this.tsLookAhead(this.tsIsStartOfMappedType.bind(this))?this.tsParseMappedType():this.tsParseTypeLiteral();case 0:return this.tsParseTupleType();case 10:return this.tsParseParenthesizedType();case 25:case 24:return this.tsParseTemplateLiteralType();default:{let{type:a}=this.state;if(Xt(a)||a===88||a===84){let m=a===88?"TSVoidKeyword":a===84?"TSNullKeyword":Po(this.state.value);if(m!==void 0&&this.lookaheadCharCode()!==46){let S=this.startNode();return this.next(),this.finishNode(S,m)}return this.tsParseTypeReference()}}}this.unexpected()}tsParseArrayTypeOrHigher(){let a=this.tsParseNonArrayType();for(;!this.hasPrecedingLineBreak()&&this.eat(0);)if(this.match(3)){let m=this.startNodeAtNode(a);m.elementType=a,this.expect(3),a=this.finishNode(m,"TSArrayType")}else{let m=this.startNodeAtNode(a);m.objectType=a,m.indexType=this.tsParseType(),this.expect(3),a=this.finishNode(m,"TSIndexedAccessType")}return a}tsParseTypeOperator(){let a=this.startNode(),m=this.state.value;return this.next(),a.operator=m,a.typeAnnotation=this.tsParseTypeOperatorOrHigher(),m==="readonly"&&this.tsCheckTypeAnnotationForReadOnly(a),this.finishNode(a,"TSTypeOperator")}tsCheckTypeAnnotationForReadOnly(a){switch(a.typeAnnotation.type){case"TSTupleType":case"TSArrayType":return;default:this.raise(Rn.UnexpectedReadonly,a)}}tsParseInferType(){let a=this.startNode();this.expectContextual(115);let m=this.startNode();return m.name=this.tsParseTypeParameterName(),m.constraint=this.tsTryParse(()=>this.tsParseConstraintForInferType()),a.typeParameter=this.finishNode(m,"TSTypeParameter"),this.finishNode(a,"TSInferType")}tsParseConstraintForInferType(){if(this.eat(81)){let a=this.tsInDisallowConditionalTypesContext(()=>this.tsParseType());if(this.state.inDisallowConditionalTypesContext||!this.match(17))return a}}tsParseTypeOperatorOrHigher(){return ll(this.state.type)&&!this.state.containsEsc?this.tsParseTypeOperator():this.isContextual(115)?this.tsParseInferType():this.tsInAllowConditionalTypesContext(()=>this.tsParseArrayTypeOrHigher())}tsParseUnionOrIntersectionType(a,m,S){let $=this.startNode(),ne=this.eat(S),ve=[];do ve.push(m());while(this.eat(S));return ve.length===1&&!ne?ve[0]:($.types=ve,this.finishNode($,a))}tsParseIntersectionTypeOrHigher(){return this.tsParseUnionOrIntersectionType("TSIntersectionType",this.tsParseTypeOperatorOrHigher.bind(this),45)}tsParseUnionTypeOrHigher(){return this.tsParseUnionOrIntersectionType("TSUnionType",this.tsParseIntersectionTypeOrHigher.bind(this),43)}tsIsStartOfFunctionType(){return this.match(47)?!0:this.match(10)&&this.tsLookAhead(this.tsIsUnambiguouslyStartOfFunctionType.bind(this))}tsSkipParameterStart(){if(Xt(this.state.type)||this.match(78))return this.next(),!0;if(this.match(5)){let{errors:a}=this.state,m=a.length;try{return this.parseObjectLike(8,!0),a.length===m}catch(S){return!1}}if(this.match(0)){this.next();let{errors:a}=this.state,m=a.length;try{return super.parseBindingList(3,93,1),a.length===m}catch(S){return!1}}return!1}tsIsUnambiguouslyStartOfFunctionType(){return this.next(),!!(this.match(11)||this.match(21)||this.tsSkipParameterStart()&&(this.match(14)||this.match(12)||this.match(17)||this.match(29)||this.match(11)&&(this.next(),this.match(19))))}tsParseTypeOrTypePredicateAnnotation(a){return this.tsInType(()=>{let m=this.startNode();this.expect(a);let S=this.startNode(),$=!!this.tsTryParse(this.tsParseTypePredicateAsserts.bind(this));if($&&this.match(78)){let qe=this.tsParseThisTypeOrThisTypePredicate();return qe.type==="TSThisType"?(S.parameterName=qe,S.asserts=!0,S.typeAnnotation=null,qe=this.finishNode(S,"TSTypePredicate")):(this.resetStartLocationFromNode(qe,S),qe.asserts=!0),m.typeAnnotation=qe,this.finishNode(m,"TSTypeAnnotation")}let ne=this.tsIsIdentifier()&&this.tsTryParse(this.tsParseTypePredicatePrefix.bind(this));if(!ne)return $?(S.parameterName=this.parseIdentifier(),S.asserts=$,S.typeAnnotation=null,m.typeAnnotation=this.finishNode(S,"TSTypePredicate"),this.finishNode(m,"TSTypeAnnotation")):this.tsParseTypeAnnotation(!1,m);let ve=this.tsParseTypeAnnotation(!1);return S.parameterName=ne,S.typeAnnotation=ve,S.asserts=$,m.typeAnnotation=this.finishNode(S,"TSTypePredicate"),this.finishNode(m,"TSTypeAnnotation")})}tsTryParseTypeOrTypePredicateAnnotation(){if(this.match(14))return this.tsParseTypeOrTypePredicateAnnotation(14)}tsTryParseTypeAnnotation(){if(this.match(14))return this.tsParseTypeAnnotation()}tsTryParseType(){return this.tsEatThenParseType(14)}tsParseTypePredicatePrefix(){let a=this.parseIdentifier();if(this.isContextual(116)&&!this.hasPrecedingLineBreak())return this.next(),a}tsParseTypePredicateAsserts(){if(this.state.type!==109)return!1;let a=this.state.containsEsc;return this.next(),!Xt(this.state.type)&&!this.match(78)?!1:(a&&this.raise(rt.InvalidEscapedReservedWord,this.state.lastTokStartLoc,{reservedWord:"asserts"}),!0)}tsParseTypeAnnotation(a=!0,m=this.startNode()){return this.tsInType(()=>{a&&this.expect(14),m.typeAnnotation=this.tsParseType()}),this.finishNode(m,"TSTypeAnnotation")}tsParseType(){Ps(this.state.inType);let a=this.tsParseNonConditionalType();if(this.state.inDisallowConditionalTypesContext||this.hasPrecedingLineBreak()||!this.eat(81))return a;let m=this.startNodeAtNode(a);return m.checkType=a,m.extendsType=this.tsInDisallowConditionalTypesContext(()=>this.tsParseNonConditionalType()),this.expect(17),m.trueType=this.tsInAllowConditionalTypesContext(()=>this.tsParseType()),this.expect(14),m.falseType=this.tsInAllowConditionalTypesContext(()=>this.tsParseType()),this.finishNode(m,"TSConditionalType")}isAbstractConstructorSignature(){return this.isContextual(124)&&this.lookahead().type===77}tsParseNonConditionalType(){return this.tsIsStartOfFunctionType()?this.tsParseFunctionOrConstructorType("TSFunctionType"):this.match(77)?this.tsParseFunctionOrConstructorType("TSConstructorType"):this.isAbstractConstructorSignature()?this.tsParseFunctionOrConstructorType("TSConstructorType",!0):this.tsParseUnionTypeOrHigher()}tsParseTypeAssertion(){this.getPluginOption("typescript","disallowAmbiguousJSXLike")&&this.raise(Rn.ReservedTypeAssertion,this.state.startLoc);let a=this.startNode();return a.typeAnnotation=this.tsInType(()=>(this.next(),this.match(75)?this.tsParseTypeReference():this.tsParseType())),this.expect(48),a.expression=this.parseMaybeUnary(),this.finishNode(a,"TSTypeAssertion")}tsParseHeritageClause(a){let m=this.state.startLoc,S=this.tsParseDelimitedList("HeritageClauseElement",()=>{let $=this.startNode();return $.expression=this.tsParseEntityName(),this.match(47)&&($.typeParameters=this.tsParseTypeArguments()),this.finishNode($,"TSExpressionWithTypeArguments")});return S.length||this.raise(Rn.EmptyHeritageClauseType,m,{token:a}),S}tsParseInterfaceDeclaration(a,m={}){if(this.hasFollowingLineBreak())return null;this.expectContextual(129),m.declare&&(a.declare=!0),Xt(this.state.type)?(a.id=this.parseIdentifier(),this.checkIdentifier(a.id,130)):(a.id=null,this.raise(Rn.MissingInterfaceName,this.state.startLoc)),a.typeParameters=this.tsTryParseTypeParameters(this.tsParseInOutConstModifiers),this.eat(81)&&(a.extends=this.tsParseHeritageClause("extends"));let S=this.startNode();return S.body=this.tsInType(this.tsParseObjectTypeMembers.bind(this)),a.body=this.finishNode(S,"TSInterfaceBody"),this.finishNode(a,"TSInterfaceDeclaration")}tsParseTypeAliasDeclaration(a){return a.id=this.parseIdentifier(),this.checkIdentifier(a.id,2),a.typeAnnotation=this.tsInType(()=>{if(a.typeParameters=this.tsTryParseTypeParameters(this.tsParseInOutModifiers),this.expect(29),this.isContextual(114)&&this.lookahead().type!==16){let m=this.startNode();return this.next(),this.finishNode(m,"TSIntrinsicKeyword")}return this.tsParseType()}),this.semicolon(),this.finishNode(a,"TSTypeAliasDeclaration")}tsInNoContext(a){let m=this.state.context;this.state.context=[m[0]];try{return a()}finally{this.state.context=m}}tsInType(a){let m=this.state.inType;this.state.inType=!0;try{return a()}finally{this.state.inType=m}}tsInDisallowConditionalTypesContext(a){let m=this.state.inDisallowConditionalTypesContext;this.state.inDisallowConditionalTypesContext=!0;try{return a()}finally{this.state.inDisallowConditionalTypesContext=m}}tsInAllowConditionalTypesContext(a){let m=this.state.inDisallowConditionalTypesContext;this.state.inDisallowConditionalTypesContext=!1;try{return a()}finally{this.state.inDisallowConditionalTypesContext=m}}tsEatThenParseType(a){if(this.match(a))return this.tsNextThenParseType()}tsExpectThenParseType(a){return this.tsInType(()=>(this.expect(a),this.tsParseType()))}tsNextThenParseType(){return this.tsInType(()=>(this.next(),this.tsParseType()))}tsParseEnumMember(){let a=this.startNode();return a.id=this.match(133)?super.parseStringLiteral(this.state.value):this.parseIdentifier(!0),this.eat(29)&&(a.initializer=super.parseMaybeAssignAllowIn()),this.finishNode(a,"TSEnumMember")}tsParseEnumDeclaration(a,m={}){return m.const&&(a.const=!0),m.declare&&(a.declare=!0),this.expectContextual(126),a.id=this.parseIdentifier(),this.checkIdentifier(a.id,a.const?8971:8459),this.expect(5),a.members=this.tsParseDelimitedList("EnumMembers",this.tsParseEnumMember.bind(this)),this.expect(8),this.finishNode(a,"TSEnumDeclaration")}tsParseModuleBlock(){let a=this.startNode();return this.scope.enter(0),this.expect(5),super.parseBlockOrModuleBlockBody(a.body=[],void 0,!0,8),this.scope.exit(),this.finishNode(a,"TSModuleBlock")}tsParseModuleOrNamespaceDeclaration(a,m=!1){if(a.id=this.parseIdentifier(),m||this.checkIdentifier(a.id,1024),this.eat(16)){let S=this.startNode();this.tsParseModuleOrNamespaceDeclaration(S,!0),a.body=S}else this.scope.enter(256),this.prodParam.enter(0),a.body=this.tsParseModuleBlock(),this.prodParam.exit(),this.scope.exit();return this.finishNode(a,"TSModuleDeclaration")}tsParseAmbientExternalModuleDeclaration(a){return this.isContextual(112)?(a.global=!0,a.id=this.parseIdentifier()):this.match(133)?a.id=super.parseStringLiteral(this.state.value):this.unexpected(),this.match(5)?(this.scope.enter(256),this.prodParam.enter(0),a.body=this.tsParseModuleBlock(),this.prodParam.exit(),this.scope.exit()):this.semicolon(),this.finishNode(a,"TSModuleDeclaration")}tsParseImportEqualsDeclaration(a,m,S){a.isExport=S||!1,a.id=m||this.parseIdentifier(),this.checkIdentifier(a.id,4096),this.expect(29);let $=this.tsParseModuleReference();return a.importKind==="type"&&$.type!=="TSExternalModuleReference"&&this.raise(Rn.ImportAliasHasImportType,$),a.moduleReference=$,this.semicolon(),this.finishNode(a,"TSImportEqualsDeclaration")}tsIsExternalModuleReference(){return this.isContextual(119)&&this.lookaheadCharCode()===40}tsParseModuleReference(){return this.tsIsExternalModuleReference()?this.tsParseExternalModuleReference():this.tsParseEntityName(!1)}tsParseExternalModuleReference(){let a=this.startNode();return this.expectContextual(119),this.expect(10),this.match(133)||this.unexpected(),a.expression=super.parseExprAtom(),this.expect(11),this.sawUnambiguousESM=!0,this.finishNode(a,"TSExternalModuleReference")}tsLookAhead(a){let m=this.state.clone(),S=a();return this.state=m,S}tsTryParseAndCatch(a){let m=this.tryParse(S=>a()||S());if(!(m.aborted||!m.node))return m.error&&(this.state=m.failState),m.node}tsTryParse(a){let m=this.state.clone(),S=a();if(S!==void 0&&S!==!1)return S;this.state=m}tsTryParseDeclare(a){if(this.isLineTerminator())return;let m=this.state.type,S;return this.isContextual(100)&&(m=74,S="let"),this.tsInAmbientContext(()=>{switch(m){case 68:return a.declare=!0,super.parseFunctionStatement(a,!1,!1);case 80:return a.declare=!0,this.parseClass(a,!0,!1);case 126:return this.tsParseEnumDeclaration(a,{declare:!0});case 112:return this.tsParseAmbientExternalModuleDeclaration(a);case 75:case 74:return!this.match(75)||!this.isLookaheadContextual("enum")?(a.declare=!0,this.parseVarStatement(a,S||this.state.value,!0)):(this.expect(75),this.tsParseEnumDeclaration(a,{const:!0,declare:!0}));case 129:{let $=this.tsParseInterfaceDeclaration(a,{declare:!0});if($)return $}default:if(Xt(m))return this.tsParseDeclaration(a,this.state.value,!0,null)}})}tsTryParseExportDeclaration(){return this.tsParseDeclaration(this.startNode(),this.state.value,!0,null)}tsParseExpressionStatement(a,m,S){switch(m.name){case"declare":{let $=this.tsTryParseDeclare(a);return $&&($.declare=!0),$}case"global":if(this.match(5)){this.scope.enter(256),this.prodParam.enter(0);let $=a;return $.global=!0,$.id=m,$.body=this.tsParseModuleBlock(),this.scope.exit(),this.prodParam.exit(),this.finishNode($,"TSModuleDeclaration")}break;default:return this.tsParseDeclaration(a,m.name,!1,S)}}tsParseDeclaration(a,m,S,$){switch(m){case"abstract":if(this.tsCheckLineTerminator(S)&&(this.match(80)||Xt(this.state.type)))return this.tsParseAbstractDeclaration(a,$);break;case"module":if(this.tsCheckLineTerminator(S)){if(this.match(133))return this.tsParseAmbientExternalModuleDeclaration(a);if(Xt(this.state.type))return this.tsParseModuleOrNamespaceDeclaration(a)}break;case"namespace":if(this.tsCheckLineTerminator(S)&&Xt(this.state.type))return this.tsParseModuleOrNamespaceDeclaration(a);break;case"type":if(this.tsCheckLineTerminator(S)&&Xt(this.state.type))return this.tsParseTypeAliasDeclaration(a);break}}tsCheckLineTerminator(a){return a?this.hasFollowingLineBreak()?!1:(this.next(),!0):!this.isLineTerminator()}tsTryParseGenericAsyncArrowFunction(a){if(!this.match(47))return;let m=this.state.maybeInArrowParameters;this.state.maybeInArrowParameters=!0;let S=this.tsTryParseAndCatch(()=>{let $=this.startNodeAt(a);return $.typeParameters=this.tsParseTypeParameters(this.tsParseConstModifier),super.parseFunctionParams($),$.returnType=this.tsTryParseTypeOrTypePredicateAnnotation(),this.expect(19),$});if(this.state.maybeInArrowParameters=m,!!S)return super.parseArrowExpression(S,null,!0)}tsParseTypeArgumentsInExpression(){if(this.reScan_lt()===47)return this.tsParseTypeArguments()}tsParseTypeArguments(){let a=this.startNode();return a.params=this.tsInType(()=>this.tsInNoContext(()=>(this.expect(47),this.tsParseDelimitedList("TypeParametersOrArguments",this.tsParseType.bind(this))))),a.params.length===0?this.raise(Rn.EmptyTypeArguments,a):!this.state.inType&&this.curContext()===nr.brace&&this.reScan_lt_gt(),this.expect(48),this.finishNode(a,"TSTypeParameterInstantiation")}tsIsDeclarationStart(){return si(this.state.type)}isExportDefaultSpecifier(){return this.tsIsDeclarationStart()?!1:super.isExportDefaultSpecifier()}parseAssignableListItem(a,m){let S=this.state.startLoc,$={};this.tsParseModifiers({allowedModifiers:["public","private","protected","override","readonly"]},$);let ne=$.accessibility,ve=$.override,qe=$.readonly;!(a&4)&&(ne||qe||ve)&&this.raise(Rn.UnexpectedParameterModifier,S);let ct=this.parseMaybeDefault();this.parseAssignableListItemTypes(ct,a);let at=this.parseMaybeDefault(ct.loc.start,ct);if(ne||qe||ve){let On=this.startNodeAt(S);return m.length&&(On.decorators=m),ne&&(On.accessibility=ne),qe&&(On.readonly=qe),ve&&(On.override=ve),at.type!=="Identifier"&&at.type!=="AssignmentPattern"&&this.raise(Rn.UnsupportedParameterPropertyKind,On),On.parameter=at,this.finishNode(On,"TSParameterProperty")}return m.length&&(ct.decorators=m),at}isSimpleParameter(a){return a.type==="TSParameterProperty"&&super.isSimpleParameter(a.parameter)||super.isSimpleParameter(a)}tsDisallowOptionalPattern(a){for(let m of a.params)m.type!=="Identifier"&&m.optional&&!this.state.isAmbientContext&&this.raise(Rn.PatternIsOptional,m)}setArrowFunctionParameters(a,m,S){super.setArrowFunctionParameters(a,m,S),this.tsDisallowOptionalPattern(a)}parseFunctionBodyAndFinish(a,m,S=!1){this.match(14)&&(a.returnType=this.tsParseTypeOrTypePredicateAnnotation(14));let $=m==="FunctionDeclaration"?"TSDeclareFunction":m==="ClassMethod"||m==="ClassPrivateMethod"?"TSDeclareMethod":void 0;return $&&!this.match(5)&&this.isLineTerminator()?this.finishNode(a,$):$==="TSDeclareFunction"&&this.state.isAmbientContext&&(this.raise(Rn.DeclareFunctionHasImplementation,a),a.declare)?super.parseFunctionBodyAndFinish(a,$,S):(this.tsDisallowOptionalPattern(a),super.parseFunctionBodyAndFinish(a,m,S))}registerFunctionStatementId(a){!a.body&&a.id?this.checkIdentifier(a.id,1024):super.registerFunctionStatementId(a)}tsCheckForInvalidTypeCasts(a){a.forEach(m=>{(m==null?void 0:m.type)==="TSTypeCastExpression"&&this.raise(Rn.UnexpectedTypeAnnotation,m.typeAnnotation)})}toReferencedList(a,m){return this.tsCheckForInvalidTypeCasts(a),a}parseArrayLike(a,m,S,$){let ne=super.parseArrayLike(a,m,S,$);return ne.type==="ArrayExpression"&&this.tsCheckForInvalidTypeCasts(ne.elements),ne}parseSubscript(a,m,S,$){if(!this.hasPrecedingLineBreak()&&this.match(35)){this.state.canStartJSXElement=!1,this.next();let ve=this.startNodeAt(m);return ve.expression=a,this.finishNode(ve,"TSNonNullExpression")}let ne=!1;if(this.match(18)&&this.lookaheadCharCode()===60){if(S)return $.stop=!0,a;$.optionalChainMember=ne=!0,this.next()}if(this.match(47)||this.match(51)){let ve,qe=this.tsTryParseAndCatch(()=>{if(!S&&this.atPossibleAsyncArrow(a)){let ui=this.tsTryParseGenericAsyncArrowFunction(m);if(ui)return ui}let ct=this.tsParseTypeArgumentsInExpression();if(!ct)return;if(ne&&!this.match(10)){ve=this.state.curPosition();return}if(ia(this.state.type)){let ui=super.parseTaggedTemplateExpression(a,m,$);return ui.typeParameters=ct,ui}if(!S&&this.eat(10)){let ui=this.startNodeAt(m);return ui.callee=a,ui.arguments=this.parseCallExpressionArguments(11,!1),this.tsCheckForInvalidTypeCasts(ui.arguments),ui.typeParameters=ct,$.optionalChainMember&&(ui.optional=ne),this.finishCallExpression(ui,$.optionalChainMember)}let at=this.state.type;if(at===48||at===52||at!==10&&Vo(at)&&!this.hasPrecedingLineBreak())return;let On=this.startNodeAt(m);return On.expression=a,On.typeParameters=ct,this.finishNode(On,"TSInstantiationExpression")});if(ve&&this.unexpected(ve,10),qe)return qe.type==="TSInstantiationExpression"&&(this.match(16)||this.match(18)&&this.lookaheadCharCode()!==40)&&this.raise(Rn.InvalidPropertyAccessAfterInstantiationExpression,this.state.startLoc),qe}return super.parseSubscript(a,m,S,$)}parseNewCallee(a){var m;super.parseNewCallee(a);let{callee:S}=a;S.type==="TSInstantiationExpression"&&!((m=S.extra)!=null&&m.parenthesized)&&(a.typeParameters=S.typeParameters,a.callee=S.expression)}parseExprOp(a,m,S){let $;if(ma(58)>S&&!this.hasPrecedingLineBreak()&&(this.isContextual(93)||($=this.isContextual(120)))){let ne=this.startNodeAt(m);return ne.expression=a,ne.typeAnnotation=this.tsInType(()=>(this.next(),this.match(75)?($&&this.raise(rt.UnexpectedKeyword,this.state.startLoc,{keyword:"const"}),this.tsParseTypeReference()):this.tsParseType())),this.finishNode(ne,$?"TSSatisfiesExpression":"TSAsExpression"),this.reScan_lt_gt(),this.parseExprOp(ne,m,S)}return super.parseExprOp(a,m,S)}checkReservedWord(a,m,S,$){this.state.isAmbientContext||super.checkReservedWord(a,m,S,$)}checkImportReflection(a){super.checkImportReflection(a),a.module&&a.importKind!=="value"&&this.raise(Rn.ImportReflectionHasImportType,a.specifiers[0].loc.start)}checkDuplicateExports(){}isPotentialImportPhase(a){if(super.isPotentialImportPhase(a))return!0;if(this.isContextual(130)){let m=this.lookaheadCharCode();return a?m===123||m===42:m!==61}return!a&&this.isContextual(87)}applyImportPhase(a,m,S,$){super.applyImportPhase(a,m,S,$),m?a.exportKind=S==="type"?"type":"value":a.importKind=S==="type"||S==="typeof"?S:"value"}parseImport(a){if(this.match(133))return a.importKind="value",super.parseImport(a);let m;if(Xt(this.state.type)&&this.lookaheadCharCode()===61)return a.importKind="value",this.tsParseImportEqualsDeclaration(a);if(this.isContextual(130)){let S=this.parseMaybeImportPhase(a,!1);if(this.lookaheadCharCode()===61)return this.tsParseImportEqualsDeclaration(a,S);m=super.parseImportSpecifiersAndAfter(a,S)}else m=super.parseImport(a);return m.importKind==="type"&&m.specifiers.length>1&&m.specifiers[0].type==="ImportDefaultSpecifier"&&this.raise(Rn.TypeImportCannotSpecifyDefaultAndNamed,m),m}parseExport(a,m){if(this.match(83)){this.next();let S=null;return this.isContextual(130)&&this.isPotentialImportPhase(!1)?S=this.parseMaybeImportPhase(a,!1):a.importKind="value",this.tsParseImportEqualsDeclaration(a,S,!0)}else if(this.eat(29)){let S=a;return S.expression=super.parseExpression(),this.semicolon(),this.sawUnambiguousESM=!0,this.finishNode(S,"TSExportAssignment")}else if(this.eatContextual(93)){let S=a;return this.expectContextual(128),S.id=this.parseIdentifier(),this.semicolon(),this.finishNode(S,"TSNamespaceExportDeclaration")}else return super.parseExport(a,m)}isAbstractClass(){return this.isContextual(124)&&this.lookahead().type===80}parseExportDefaultExpression(){if(this.isAbstractClass()){let a=this.startNode();return this.next(),a.abstract=!0,this.parseClass(a,!0,!0)}if(this.match(129)){let a=this.tsParseInterfaceDeclaration(this.startNode());if(a)return a}return super.parseExportDefaultExpression()}parseVarStatement(a,m,S=!1){let{isAmbientContext:$}=this.state,ne=super.parseVarStatement(a,m,S||$);if(!$)return ne;for(let{id:ve,init:qe}of ne.declarations)qe&&(m!=="const"||ve.typeAnnotation?this.raise(Rn.InitializerNotAllowedInAmbientContext,qe):fu(qe,this.hasPlugin("estree"))||this.raise(Rn.ConstInitiailizerMustBeStringOrNumericLiteralOrLiteralEnumReference,qe));return ne}parseStatementContent(a,m){if(this.match(75)&&this.isLookaheadContextual("enum")){let S=this.startNode();return this.expect(75),this.tsParseEnumDeclaration(S,{const:!0})}if(this.isContextual(126))return this.tsParseEnumDeclaration(this.startNode());if(this.isContextual(129)){let S=this.tsParseInterfaceDeclaration(this.startNode());if(S)return S}return super.parseStatementContent(a,m)}parseAccessModifier(){return this.tsParseModifier(["public","protected","private"])}tsHasSomeModifiers(a,m){return m.some(S=>Nr(S)?a.accessibility===S:!!a[S])}tsIsStartOfStaticBlocks(){return this.isContextual(106)&&this.lookaheadCharCode()===123}parseClassMember(a,m,S){let $=["declare","private","public","protected","override","abstract","readonly","static"];this.tsParseModifiers({allowedModifiers:$,disallowedModifiers:["in","out"],stopOnStartOfClassStaticBlock:!0,errorTemplate:Rn.InvalidModifierOnTypeParameterPositions},m);let ne=()=>{this.tsIsStartOfStaticBlocks()?(this.next(),this.next(),this.tsHasSomeModifiers(m,$)&&this.raise(Rn.StaticBlockCannotHaveModifier,this.state.curPosition()),super.parseClassStaticBlock(a,m)):this.parseClassMemberWithIsStatic(a,m,S,!!m.static)};m.declare?this.tsInAmbientContext(ne):ne()}parseClassMemberWithIsStatic(a,m,S,$){let ne=this.tsTryParseIndexSignature(m);if(ne){a.body.push(ne),m.abstract&&this.raise(Rn.IndexSignatureHasAbstract,m),m.accessibility&&this.raise(Rn.IndexSignatureHasAccessibility,m,{modifier:m.accessibility}),m.declare&&this.raise(Rn.IndexSignatureHasDeclare,m),m.override&&this.raise(Rn.IndexSignatureHasOverride,m);return}!this.state.inAbstractClass&&m.abstract&&this.raise(Rn.NonAbstractClassHasAbstractMethod,m),m.override&&(S.hadSuperClass||this.raise(Rn.OverrideNotInSubClass,m)),super.parseClassMemberWithIsStatic(a,m,S,$)}parsePostMemberNameModifiers(a){this.eat(17)&&(a.optional=!0),a.readonly&&this.match(10)&&this.raise(Rn.ClassMethodHasReadonly,a),a.declare&&this.match(10)&&this.raise(Rn.ClassMethodHasDeclare,a)}parseExpressionStatement(a,m,S){return(m.type==="Identifier"?this.tsParseExpressionStatement(a,m,S):void 0)||super.parseExpressionStatement(a,m,S)}shouldParseExportDeclaration(){return this.tsIsDeclarationStart()?!0:super.shouldParseExportDeclaration()}parseConditional(a,m,S){if(!this.state.maybeInArrowParameters||!this.match(17))return super.parseConditional(a,m,S);let $=this.tryParse(()=>super.parseConditional(a,m));return $.node?($.error&&(this.state=$.failState),$.node):($.error&&super.setOptionalParametersError(S,$.error),a)}parseParenItem(a,m){if(a=super.parseParenItem(a,m),this.eat(17)&&(a.optional=!0,this.resetEndLocation(a)),this.match(14)){let S=this.startNodeAt(m);return S.expression=a,S.typeAnnotation=this.tsParseTypeAnnotation(),this.finishNode(S,"TSTypeCastExpression")}return a}parseExportDeclaration(a){if(!this.state.isAmbientContext&&this.isContextual(125))return this.tsInAmbientContext(()=>this.parseExportDeclaration(a));let m=this.state.startLoc,S=this.eatContextual(125);if(S&&(this.isContextual(125)||!this.shouldParseExportDeclaration()))throw this.raise(Rn.ExpectedAmbientAfterExportDeclare,this.state.startLoc);let $=Xt(this.state.type)&&this.tsTryParseExportDeclaration()||super.parseExportDeclaration(a);return $?(($.type==="TSInterfaceDeclaration"||$.type==="TSTypeAliasDeclaration"||S)&&(a.exportKind="type"),S&&(this.resetStartLocation($,m),$.declare=!0),$):null}parseClassId(a,m,S,$){if((!m||S)&&this.isContextual(113))return;super.parseClassId(a,m,S,a.declare?1024:8331);let ne=this.tsTryParseTypeParameters(this.tsParseInOutConstModifiers);ne&&(a.typeParameters=ne)}parseClassPropertyAnnotation(a){a.optional||(this.eat(35)?a.definite=!0:this.eat(17)&&(a.optional=!0));let m=this.tsTryParseTypeAnnotation();m&&(a.typeAnnotation=m)}parseClassProperty(a){if(this.parseClassPropertyAnnotation(a),this.state.isAmbientContext&&!(a.readonly&&!a.typeAnnotation)&&this.match(29)&&this.raise(Rn.DeclareClassFieldHasInitializer,this.state.startLoc),a.abstract&&this.match(29)){let{key:m}=a;this.raise(Rn.AbstractPropertyHasInitializer,this.state.startLoc,{propertyName:m.type==="Identifier"&&!a.computed?m.name:`[${this.input.slice(m.start,m.end)}]`})}return super.parseClassProperty(a)}parseClassPrivateProperty(a){return a.abstract&&this.raise(Rn.PrivateElementHasAbstract,a),a.accessibility&&this.raise(Rn.PrivateElementHasAccessibility,a,{modifier:a.accessibility}),this.parseClassPropertyAnnotation(a),super.parseClassPrivateProperty(a)}parseClassAccessorProperty(a){return this.parseClassPropertyAnnotation(a),a.optional&&this.raise(Rn.AccessorCannotBeOptional,a),super.parseClassAccessorProperty(a)}pushClassMethod(a,m,S,$,ne,ve){let qe=this.tsTryParseTypeParameters(this.tsParseConstModifier);qe&&ne&&this.raise(Rn.ConstructorHasTypeParameters,qe);let{declare:ct=!1,kind:at}=m;ct&&(at==="get"||at==="set")&&this.raise(Rn.DeclareAccessor,m,{kind:at}),qe&&(m.typeParameters=qe),super.pushClassMethod(a,m,S,$,ne,ve)}pushClassPrivateMethod(a,m,S,$){let ne=this.tsTryParseTypeParameters(this.tsParseConstModifier);ne&&(m.typeParameters=ne),super.pushClassPrivateMethod(a,m,S,$)}declareClassPrivateMethodInScope(a,m){a.type!=="TSDeclareMethod"&&(a.type==="MethodDefinition"&&!a.value.body||super.declareClassPrivateMethodInScope(a,m))}parseClassSuper(a){super.parseClassSuper(a),a.superClass&&(this.match(47)||this.match(51))&&(a.superTypeParameters=this.tsParseTypeArgumentsInExpression()),this.eatContextual(113)&&(a.implements=this.tsParseHeritageClause("implements"))}parseObjPropValue(a,m,S,$,ne,ve,qe){let ct=this.tsTryParseTypeParameters(this.tsParseConstModifier);return ct&&(a.typeParameters=ct),super.parseObjPropValue(a,m,S,$,ne,ve,qe)}parseFunctionParams(a,m){let S=this.tsTryParseTypeParameters(this.tsParseConstModifier);S&&(a.typeParameters=S),super.parseFunctionParams(a,m)}parseVarId(a,m){super.parseVarId(a,m),a.id.type==="Identifier"&&!this.hasPrecedingLineBreak()&&this.eat(35)&&(a.definite=!0);let S=this.tsTryParseTypeAnnotation();S&&(a.id.typeAnnotation=S,this.resetEndLocation(a.id))}parseAsyncArrowFromCallExpression(a,m){return this.match(14)&&(a.returnType=this.tsParseTypeAnnotation()),super.parseAsyncArrowFromCallExpression(a,m)}parseMaybeAssign(a,m){var S,$,ne,ve,qe;let ct,at,On;if(this.hasPlugin("jsx")&&(this.match(142)||this.match(47))){if(ct=this.state.clone(),at=this.tryParse(()=>super.parseMaybeAssign(a,m),ct),!at.error)return at.node;let{context:ji}=this.state,Ls=ji[ji.length-1];(Ls===nr.j_oTag||Ls===nr.j_expr)&&ji.pop()}if(!((S=at)!=null&&S.error)&&!this.match(47))return super.parseMaybeAssign(a,m);(!ct||ct===this.state)&&(ct=this.state.clone());let ui,Yi=this.tryParse(ji=>{var Ls,Zs;ui=this.tsParseTypeParameters(this.tsParseConstModifier);let ea=super.parseMaybeAssign(a,m);return(ea.type!=="ArrowFunctionExpression"||(Ls=ea.extra)!=null&&Ls.parenthesized)&&ji(),((Zs=ui)==null?void 0:Zs.params.length)!==0&&this.resetStartLocationFromNode(ea,ui),ea.typeParameters=ui,ea},ct);if(!Yi.error&&!Yi.aborted)return ui&&this.reportReservedArrowTypeParam(ui),Yi.node;if(!at&&(Ps(!this.hasPlugin("jsx")),On=this.tryParse(()=>super.parseMaybeAssign(a,m),ct),!On.error))return On.node;if(($=at)!=null&&$.node)return this.state=at.failState,at.node;if(Yi.node)return this.state=Yi.failState,ui&&this.reportReservedArrowTypeParam(ui),Yi.node;if((ne=On)!=null&&ne.node)return this.state=On.failState,On.node;throw((ve=at)==null?void 0:ve.error)||Yi.error||((qe=On)==null?void 0:qe.error)}reportReservedArrowTypeParam(a){var m;a.params.length===1&&!a.params[0].constraint&&!((m=a.extra)!=null&&m.trailingComma)&&this.getPluginOption("typescript","disallowAmbiguousJSXLike")&&this.raise(Rn.ReservedArrowTypeParam,a)}parseMaybeUnary(a,m){return!this.hasPlugin("jsx")&&this.match(47)?this.tsParseTypeAssertion():super.parseMaybeUnary(a,m)}parseArrow(a){if(this.match(14)){let m=this.tryParse(S=>{let $=this.tsParseTypeOrTypePredicateAnnotation(14);return(this.canInsertSemicolon()||!this.match(19))&&S(),$});if(m.aborted)return;m.thrown||(m.error&&(this.state=m.failState),a.returnType=m.node)}return super.parseArrow(a)}parseAssignableListItemTypes(a,m){if(!(m&2))return a;this.eat(17)&&(a.optional=!0);let S=this.tsTryParseTypeAnnotation();return S&&(a.typeAnnotation=S),this.resetEndLocation(a),a}isAssignable(a,m){switch(a.type){case"TSTypeCastExpression":return this.isAssignable(a.expression,m);case"TSParameterProperty":return!0;default:return super.isAssignable(a,m)}}toAssignable(a,m=!1){switch(a.type){case"ParenthesizedExpression":this.toAssignableParenthesizedExpression(a,m);break;case"TSAsExpression":case"TSSatisfiesExpression":case"TSNonNullExpression":case"TSTypeAssertion":m?this.expressionScope.recordArrowParameterBindingError(Rn.UnexpectedTypeCastInParameter,a):this.raise(Rn.UnexpectedTypeCastInParameter,a),this.toAssignable(a.expression,m);break;case"AssignmentExpression":!m&&a.left.type==="TSTypeCastExpression"&&(a.left=this.typeCastToParameter(a.left));default:super.toAssignable(a,m)}}toAssignableParenthesizedExpression(a,m){switch(a.expression.type){case"TSAsExpression":case"TSSatisfiesExpression":case"TSNonNullExpression":case"TSTypeAssertion":case"ParenthesizedExpression":this.toAssignable(a.expression,m);break;default:super.toAssignable(a,m)}}checkToRestConversion(a,m){switch(a.type){case"TSAsExpression":case"TSSatisfiesExpression":case"TSTypeAssertion":case"TSNonNullExpression":this.checkToRestConversion(a.expression,!1);break;default:super.checkToRestConversion(a,m)}}isValidLVal(a,m,S){return Ir({TSTypeCastExpression:!0,TSParameterProperty:"parameter",TSNonNullExpression:"expression",TSAsExpression:(S!==64||!m)&&["expression",!0],TSSatisfiesExpression:(S!==64||!m)&&["expression",!0],TSTypeAssertion:(S!==64||!m)&&["expression",!0]},a)||super.isValidLVal(a,m,S)}parseBindingAtom(){return this.state.type===78?this.parseIdentifier(!0):super.parseBindingAtom()}parseMaybeDecoratorArguments(a){if(this.match(47)||this.match(51)){let m=this.tsParseTypeArgumentsInExpression();if(this.match(10)){let S=super.parseMaybeDecoratorArguments(a);return S.typeParameters=m,S}this.unexpected(null,10)}return super.parseMaybeDecoratorArguments(a)}checkCommaAfterRest(a){return this.state.isAmbientContext&&this.match(12)&&this.lookaheadCharCode()===a?(this.next(),!1):super.checkCommaAfterRest(a)}isClassMethod(){return this.match(47)||super.isClassMethod()}isClassProperty(){return this.match(35)||this.match(14)||super.isClassProperty()}parseMaybeDefault(a,m){let S=super.parseMaybeDefault(a,m);return S.type==="AssignmentPattern"&&S.typeAnnotation&&S.right.start<S.typeAnnotation.start&&this.raise(Rn.TypeAnnotationAfterAssign,S.typeAnnotation),S}getTokenFromCode(a){if(this.state.inType){if(a===62){this.finishOp(48,1);return}if(a===60){this.finishOp(47,1);return}}super.getTokenFromCode(a)}reScan_lt_gt(){let{type:a}=this.state;a===47?(this.state.pos-=1,this.readToken_lt()):a===48&&(this.state.pos-=1,this.readToken_gt())}reScan_lt(){let{type:a}=this.state;return a===51?(this.state.pos-=2,this.finishOp(47,1),47):a}toAssignableList(a,m,S){for(let $=0;$<a.length;$++){let ne=a[$];(ne==null?void 0:ne.type)==="TSTypeCastExpression"&&(a[$]=this.typeCastToParameter(ne))}super.toAssignableList(a,m,S)}typeCastToParameter(a){return a.expression.typeAnnotation=a.typeAnnotation,this.resetEndLocation(a.expression,a.typeAnnotation.loc.end),a.expression}shouldParseArrow(a){return this.match(14)?a.every(m=>this.isAssignable(m,!0)):super.shouldParseArrow(a)}shouldParseAsyncArrow(){return this.match(14)||super.shouldParseAsyncArrow()}canHaveLeadingDecorator(){return super.canHaveLeadingDecorator()||this.isAbstractClass()}jsxParseOpeningElementAfterName(a){if(this.match(47)||this.match(51)){let m=this.tsTryParseAndCatch(()=>this.tsParseTypeArgumentsInExpression());m&&(a.typeParameters=m)}return super.jsxParseOpeningElementAfterName(a)}getGetterSetterExpectedParamCount(a){let m=super.getGetterSetterExpectedParamCount(a),S=this.getObjectOrClassMethodParams(a)[0];return S&&this.isThisParam(S)?m+1:m}parseCatchClauseParam(){let a=super.parseCatchClauseParam(),m=this.tsTryParseTypeAnnotation();return m&&(a.typeAnnotation=m,this.resetEndLocation(a)),a}tsInAmbientContext(a){let m=this.state.isAmbientContext;this.state.isAmbientContext=!0;try{return a()}finally{this.state.isAmbientContext=m}}parseClass(a,m,S){let $=this.state.inAbstractClass;this.state.inAbstractClass=!!a.abstract;try{return super.parseClass(a,m,S)}finally{this.state.inAbstractClass=$}}tsParseAbstractDeclaration(a,m){if(this.match(80))return a.abstract=!0,this.maybeTakeDecorators(m,this.parseClass(a,!0,!1));if(this.isContextual(129)){if(!this.hasFollowingLineBreak())return a.abstract=!0,this.raise(Rn.NonClassMethodPropertyHasAbstractModifer,a),this.tsParseInterfaceDeclaration(a)}else this.unexpected(null,80)}parseMethod(a,m,S,$,ne,ve,qe){let ct=super.parseMethod(a,m,S,$,ne,ve,qe);if(ct.abstract&&(this.hasPlugin("estree")?ct.value.body:ct.body)){let{key:at}=ct;this.raise(Rn.AbstractMethodHasImplementation,ct,{methodName:at.type==="Identifier"&&!ct.computed?at.name:`[${this.input.slice(at.start,at.end)}]`})}return ct}tsParseTypeParameterName(){return this.parseIdentifier().name}shouldParseAsAmbientContext(){return!!this.getPluginOption("typescript","dts")}parse(){return this.shouldParseAsAmbientContext()&&(this.state.isAmbientContext=!0),super.parse()}getExpression(){return this.shouldParseAsAmbientContext()&&(this.state.isAmbientContext=!0),super.getExpression()}parseExportSpecifier(a,m,S,$){return!m&&$?(this.parseTypeOnlyImportExportSpecifier(a,!1,S),this.finishNode(a,"ExportSpecifier")):(a.exportKind="value",super.parseExportSpecifier(a,m,S,$))}parseImportSpecifier(a,m,S,$,ne){return!m&&$?(this.parseTypeOnlyImportExportSpecifier(a,!0,S),this.finishNode(a,"ImportSpecifier")):(a.importKind="value",super.parseImportSpecifier(a,m,S,$,S?4098:4096))}parseTypeOnlyImportExportSpecifier(a,m,S){let $=m?"imported":"local",ne=m?"local":"exported",ve=a[$],qe,ct=!1,at=!0,On=ve.loc.start;if(this.isContextual(93)){let Yi=this.parseIdentifier();if(this.isContextual(93)){let ji=this.parseIdentifier();ri(this.state.type)?(ct=!0,ve=Yi,qe=m?this.parseIdentifier():this.parseModuleExportName(),at=!1):(qe=ji,at=!1)}else ri(this.state.type)?(at=!1,qe=m?this.parseIdentifier():this.parseModuleExportName()):(ct=!0,ve=Yi)}else ri(this.state.type)&&(ct=!0,m?(ve=this.parseIdentifier(!0),this.isContextual(93)||this.checkReservedWord(ve.name,ve.loc.start,!0,!0)):ve=this.parseModuleExportName());ct&&S&&this.raise(m?Rn.TypeModifierIsUsedInTypeImports:Rn.TypeModifierIsUsedInTypeExports,On),a[$]=ve,a[ne]=qe;let ui=m?"importKind":"exportKind";a[ui]=ct?"type":"value",at&&this.eatContextual(93)&&(a[ne]=m?this.parseIdentifier():this.parseModuleExportName()),a[ne]||(a[ne]=eo(a[$])),m&&this.checkIdentifier(a[ne],ct?4098:4096)}};function po(d){if(d.type!=="MemberExpression")return!1;let{computed:a,property:m}=d;return a&&m.type!=="StringLiteral"&&(m.type!=="TemplateLiteral"||m.expressions.length>0)?!1:ja(d.object)}function fu(d,a){var m;let{type:S}=d;if((m=d.extra)!=null&&m.parenthesized)return!1;if(a){if(S==="Literal"){let{value:$}=d;if(typeof $=="string"||typeof $=="boolean")return!0}}else if(S==="StringLiteral"||S==="BooleanLiteral")return!0;return!!(eu(d,a)||Na(d,a)||S==="TemplateLiteral"&&d.expressions.length===0||po(d))}function eu(d,a){return a?d.type==="Literal"&&(typeof d.value=="number"||"bigint"in d):d.type==="NumericLiteral"||d.type==="BigIntLiteral"}function Na(d,a){if(d.type==="UnaryExpression"){let{operator:m,argument:S}=d;if(m==="-"&&eu(S,a))return!0}return!1}function ja(d){return d.type==="Identifier"?!0:d.type!=="MemberExpression"||d.computed?!1:ja(d.object)}var tu=Fi`placeholders`({ClassNameIsRequired:"A class name is required.",UnexpectedSpace:"Unexpected space in placeholder."}),Du=d=>class extends d{parsePlaceholder(a){if(this.match(144)){let m=this.startNode();return this.next(),this.assertNoSpace(),m.name=super.parseIdentifier(!0),this.assertNoSpace(),this.expect(144),this.finishPlaceholder(m,a)}}finishPlaceholder(a,m){let S=!!(a.expectedNode&&a.type==="Placeholder");return a.expectedNode=m,S?a:this.finishNode(a,"Placeholder")}getTokenFromCode(a){a===37&&this.input.charCodeAt(this.state.pos+1)===37?this.finishOp(144,2):super.getTokenFromCode(a)}parseExprAtom(a){return this.parsePlaceholder("Expression")||super.parseExprAtom(a)}parseIdentifier(a){return this.parsePlaceholder("Identifier")||super.parseIdentifier(a)}checkReservedWord(a,m,S,$){a!==void 0&&super.checkReservedWord(a,m,S,$)}parseBindingAtom(){return this.parsePlaceholder("Pattern")||super.parseBindingAtom()}isValidLVal(a,m,S){return a==="Placeholder"||super.isValidLVal(a,m,S)}toAssignable(a,m){a&&a.type==="Placeholder"&&a.expectedNode==="Expression"?a.expectedNode="Pattern":super.toAssignable(a,m)}chStartsBindingIdentifier(a,m){return!!(super.chStartsBindingIdentifier(a,m)||this.lookahead().type===144)}verifyBreakContinue(a,m){a.label&&a.label.type==="Placeholder"||super.verifyBreakContinue(a,m)}parseExpressionStatement(a,m){var S;if(m.type!=="Placeholder"||(S=m.extra)!=null&&S.parenthesized)return super.parseExpressionStatement(a,m);if(this.match(14)){let $=a;return $.label=this.finishPlaceholder(m,"Identifier"),this.next(),$.body=super.parseStatementOrSloppyAnnexBFunctionDeclaration(),this.finishNode($,"LabeledStatement")}return this.semicolon(),a.name=m.name,this.finishPlaceholder(a,"Statement")}parseBlock(a,m,S){return this.parsePlaceholder("BlockStatement")||super.parseBlock(a,m,S)}parseFunctionId(a){return this.parsePlaceholder("Identifier")||super.parseFunctionId(a)}parseClass(a,m,S){let $=m?"ClassDeclaration":"ClassExpression";this.next();let ne=this.state.strict,ve=this.parsePlaceholder("Identifier");if(ve)if(this.match(81)||this.match(144)||this.match(5))a.id=ve;else{if(S||!m)return a.id=null,a.body=this.finishPlaceholder(ve,"ClassBody"),this.finishNode(a,$);throw this.raise(tu.ClassNameIsRequired,this.state.startLoc)}else this.parseClassId(a,m,S);return super.parseClassSuper(a),a.body=this.parsePlaceholder("ClassBody")||super.parseClassBody(!!a.superClass,ne),this.finishNode(a,$)}parseExport(a,m){let S=this.parsePlaceholder("Identifier");if(!S)return super.parseExport(a,m);if(!this.isContextual(98)&&!this.match(12))return a.specifiers=[],a.source=null,a.declaration=this.finishPlaceholder(S,"Declaration"),this.finishNode(a,"ExportNamedDeclaration");this.expectPlugin("exportDefaultFrom");let $=this.startNode();return $.exported=S,a.specifiers=[this.finishNode($,"ExportDefaultSpecifier")],super.parseExport(a,m)}isExportDefaultSpecifier(){if(this.match(65)){let a=this.nextTokenStart();if(this.isUnparsedContextual(a,"from")&&this.input.startsWith(Zo(144),this.nextTokenStartSince(a+4)))return!0}return super.isExportDefaultSpecifier()}maybeParseExportDefaultSpecifier(a,m){var S;return(S=a.specifiers)!=null&&S.length?!0:super.maybeParseExportDefaultSpecifier(a,m)}checkExport(a){let{specifiers:m}=a;m!=null&&m.length&&(a.specifiers=m.filter(S=>S.exported.type==="Placeholder")),super.checkExport(a),a.specifiers=m}parseImport(a){let m=this.parsePlaceholder("Identifier");if(!m)return super.parseImport(a);if(a.specifiers=[],!this.isContextual(98)&&!this.match(12))return a.source=this.finishPlaceholder(m,"StringLiteral"),this.semicolon(),this.finishNode(a,"ImportDeclaration");let S=this.startNodeAtNode(m);return S.local=m,a.specifiers.push(this.finishNode(S,"ImportDefaultSpecifier")),this.eat(12)&&(this.maybeParseStarImportSpecifier(a)||this.parseNamedImportSpecifiers(a)),this.expectContextual(98),a.source=this.parseImportSource(),this.semicolon(),this.finishNode(a,"ImportDeclaration")}parseImportSource(){return this.parsePlaceholder("StringLiteral")||super.parseImportSource()}assertNoSpace(){this.state.start>this.state.lastTokEndLoc.index&&this.raise(tu.UnexpectedSpace,this.state.lastTokEndLoc)}},wu=d=>class extends d{parseV8Intrinsic(){if(this.match(54)){let a=this.state.startLoc,m=this.startNode();if(this.next(),Xt(this.state.type)){let S=this.parseIdentifierName(),$=this.createIdentifier(m,S);if($.type="V8IntrinsicIdentifier",this.match(10))return $}this.unexpected(a)}}parseExprAtom(a){return this.parseV8Intrinsic()||super.parseExprAtom(a)}};function qo(d,a){let[m,S]=typeof a=="string"?[a,{}]:a,$=Object.keys(S),ne=$.length===0;return d.some(ve=>{if(typeof ve=="string")return ne&&ve===m;{let[qe,ct]=ve;if(qe!==m)return!1;for(let at of $)if(ct[at]!==S[at])return!1;return!0}})}function Ya(d,a,m){let S=d.find($=>Array.isArray($)?$[0]===a:$===a);return S&&Array.isArray(S)&&S.length>1?S[1][m]:null}var No=["minimal","fsharp","hack","smart"],$l=["^^","@@","^","%","#"],Eu=["hash","bar"];function _a(d){if(qo(d,"decorators")){if(qo(d,"decorators-legacy"))throw new Error("Cannot use the decorators and decorators-legacy plugin together");let a=Ya(d,"decorators","decoratorsBeforeExport");if(a!=null&&typeof a!="boolean")throw new Error("'decoratorsBeforeExport' must be a boolean, if specified.");let m=Ya(d,"decorators","allowCallParenthesized");if(m!=null&&typeof m!="boolean")throw new Error("'allowCallParenthesized' must be a boolean.")}if(qo(d,"flow")&&qo(d,"typescript"))throw new Error("Cannot combine flow and typescript plugins.");if(qo(d,"placeholders")&&qo(d,"v8intrinsic"))throw new Error("Cannot combine placeholders and v8intrinsic plugins.");if(qo(d,"pipelineOperator")){let a=Ya(d,"pipelineOperator","proposal");if(!No.includes(a)){let S=No.map($=>`"${$}"`).join(", ");throw new Error(`"pipelineOperator" requires "proposal" option whose value must be one of: ${S}.`)}let m=qo(d,["recordAndTuple",{syntaxType:"hash"}]);if(a==="hack"){if(qo(d,"placeholders"))throw new Error("Cannot combine placeholders plugin and Hack-style pipes.");if(qo(d,"v8intrinsic"))throw new Error("Cannot combine v8intrinsic plugin and Hack-style pipes.");let S=Ya(d,"pipelineOperator","topicToken");if(!$l.includes(S)){let $=$l.map(ne=>`"${ne}"`).join(", ");throw new Error(`"pipelineOperator" in "proposal": "hack" mode also requires a "topicToken" option whose value must be one of: ${$}.`)}if(S==="#"&&m)throw new Error('Plugin conflict between `["pipelineOperator", { proposal: "hack", topicToken: "#" }]` and `["recordAndtuple", { syntaxType: "hash"}]`.')}else if(a==="smart"&&m)throw new Error('Plugin conflict between `["pipelineOperator", { proposal: "smart" }]` and `["recordAndtuple", { syntaxType: "hash"}]`.')}if(qo(d,"moduleAttributes")){if(qo(d,"importAssertions")||qo(d,"importAttributes"))throw new Error("Cannot combine importAssertions, importAttributes and moduleAttributes plugins.");if(Ya(d,"moduleAttributes","version")!=="may-2020")throw new Error("The 'moduleAttributes' plugin requires a 'version' option, representing the last proposal update. Currently, the only supported value is 'may-2020'.")}if(qo(d,"importAssertions")&&qo(d,"importAttributes"))throw new Error("Cannot combine importAssertions and importAttributes plugins.");if(qo(d,"recordAndTuple")&&Ya(d,"recordAndTuple","syntaxType")!=null&&!Eu.includes(Ya(d,"recordAndTuple","syntaxType")))throw new Error("The 'syntaxType' option of the 'recordAndTuple' plugin must be one of: "+Eu.map(a=>`'${a}'`).join(", "));if(qo(d,"asyncDoExpressions")&&!qo(d,"doExpressions")){let a=new Error("'asyncDoExpressions' requires 'doExpressions', please add 'doExpressions' to parser plugins.");throw a.missingPlugins="doExpressions",a}if(qo(d,"optionalChainingAssign")&&Ya(d,"optionalChainingAssign","version")!=="2023-07")throw new Error("The 'optionalChainingAssign' plugin requires a 'version' option, representing the last proposal update. Currently, the only supported value is '2023-07'.")}var Ga={estree:ds,jsx:Xa,flow:Ko,typescript:Ca,v8intrinsic:wu,placeholders:Du},$o=Object.keys(Ga),Br={sourceType:"script",sourceFilename:void 0,startColumn:0,startLine:1,allowAwaitOutsideFunction:!1,allowReturnOutsideFunction:!1,allowNewTargetOutsideFunction:!1,allowImportExportEverywhere:!1,allowSuperOutsideMethod:!1,allowUndeclaredExports:!1,plugins:[],strictMode:null,ranges:!1,tokens:!1,createImportExpressions:!1,createParenthesizedExpressions:!1,errorRecovery:!1,attachComment:!0,annexB:!0};function ls(d){if(d==null)return Object.assign({},Br);if(d.annexB!=null&&d.annexB!==!1)throw new Error("The `annexB` option can only be set to `false`.");let a={};for(let S of Object.keys(Br)){var m;a[S]=(m=d[S])!=null?m:Br[S]}return a}var Ka=class extends $i{checkProto(d,a,m,S){if(d.type==="SpreadElement"||this.isObjectMethod(d)||d.computed||d.shorthand)return;let $=d.key;if(($.type==="Identifier"?$.name:$.value)==="__proto__"){if(a){this.raise(rt.RecordNoProto,$);return}m.used&&(S?S.doubleProtoLoc===null&&(S.doubleProtoLoc=$.loc.start):this.raise(rt.DuplicateProto,$)),m.used=!0}}shouldExitDescending(d,a){return d.type==="ArrowFunctionExpression"&&d.start===a}getExpression(){this.enterInitialScopes(),this.nextToken();let d=this.parseExpression();return this.match(139)||this.unexpected(),this.finalizeRemainingComments(),d.comments=this.comments,d.errors=this.state.errors,this.options.tokens&&(d.tokens=this.tokens),d}parseExpression(d,a){return d?this.disallowInAnd(()=>this.parseExpressionBase(a)):this.allowInAnd(()=>this.parseExpressionBase(a))}parseExpressionBase(d){let a=this.state.startLoc,m=this.parseMaybeAssign(d);if(this.match(12)){let S=this.startNodeAt(a);for(S.expressions=[m];this.eat(12);)S.expressions.push(this.parseMaybeAssign(d));return this.toReferencedList(S.expressions),this.finishNode(S,"SequenceExpression")}return m}parseMaybeAssignDisallowIn(d,a){return this.disallowInAnd(()=>this.parseMaybeAssign(d,a))}parseMaybeAssignAllowIn(d,a){return this.allowInAnd(()=>this.parseMaybeAssign(d,a))}setOptionalParametersError(d,a){var m;d.optionalParametersLoc=(m=a==null?void 0:a.loc)!=null?m:this.state.startLoc}parseMaybeAssign(d,a){let m=this.state.startLoc;if(this.isContextual(108)&&this.prodParam.hasYield){let ve=this.parseYield();return a&&(ve=a.call(this,ve,m)),ve}let S;d?S=!1:(d=new oi,S=!0);let{type:$}=this.state;($===10||Xt($))&&(this.state.potentialArrowAt=this.state.start);let ne=this.parseMaybeConditional(d);if(a&&(ne=a.call(this,ne,m)),yo(this.state.type)){let ve=this.startNodeAt(m),qe=this.state.value;if(ve.operator=qe,this.match(29)){this.toAssignable(ne,!0),ve.left=ne;let ct=m.index;d.doubleProtoLoc!=null&&d.doubleProtoLoc.index>=ct&&(d.doubleProtoLoc=null),d.shorthandAssignLoc!=null&&d.shorthandAssignLoc.index>=ct&&(d.shorthandAssignLoc=null),d.privateKeyLoc!=null&&d.privateKeyLoc.index>=ct&&(this.checkDestructuringPrivate(d),d.privateKeyLoc=null)}else ve.left=ne;return this.next(),ve.right=this.parseMaybeAssign(),this.checkLVal(ne,{in:this.finishNode(ve,"AssignmentExpression")}),ve}else S&&this.checkExpressionErrors(d,!0);return ne}parseMaybeConditional(d){let a=this.state.startLoc,m=this.state.potentialArrowAt,S=this.parseExprOps(d);return this.shouldExitDescending(S,m)?S:this.parseConditional(S,a,d)}parseConditional(d,a,m){if(this.eat(17)){let S=this.startNodeAt(a);return S.test=d,S.consequent=this.parseMaybeAssignAllowIn(),this.expect(14),S.alternate=this.parseMaybeAssign(),this.finishNode(S,"ConditionalExpression")}return d}parseMaybeUnaryOrPrivate(d){return this.match(138)?this.parsePrivateName():this.parseMaybeUnary(d)}parseExprOps(d){let a=this.state.startLoc,m=this.state.potentialArrowAt,S=this.parseMaybeUnaryOrPrivate(d);return this.shouldExitDescending(S,m)?S:this.parseExprOp(S,a,-1)}parseExprOp(d,a,m){if(this.isPrivateName(d)){let $=this.getPrivateNameSV(d);(m>=ma(58)||!this.prodParam.hasIn||!this.match(58))&&this.raise(rt.PrivateInExpectedIn,d,{identifierName:$}),this.classScope.usePrivateName($,d.loc.start)}let S=this.state.type;if(la(S)&&(this.prodParam.hasIn||!this.match(58))){let $=ma(S);if($>m){if(S===39){if(this.expectPlugin("pipelineOperator"),this.state.inFSharpPipelineDirectBody)return d;this.checkPipelineAtInfixOperator(d,a)}let ne=this.startNodeAt(a);ne.left=d,ne.operator=this.state.value;let ve=S===41||S===42,qe=S===40;if(qe&&($=ma(42)),this.next(),S===39&&this.hasPlugin(["pipelineOperator",{proposal:"minimal"}])&&this.state.type===96&&this.prodParam.hasAwait)throw this.raise(rt.UnexpectedAwaitAfterPipelineBody,this.state.startLoc);ne.right=this.parseExprOpRightExpr(S,$);let ct=this.finishNode(ne,ve||qe?"LogicalExpression":"BinaryExpression"),at=this.state.type;if(qe&&(at===41||at===42)||ve&&at===40)throw this.raise(rt.MixingCoalesceWithLogical,this.state.startLoc);return this.parseExprOp(ct,a,m)}}return d}parseExprOpRightExpr(d,a){let m=this.state.startLoc;switch(d){case 39:switch(this.getPluginOption("pipelineOperator","proposal")){case"hack":return this.withTopicBindingContext(()=>this.parseHackPipeBody());case"smart":return this.withTopicBindingContext(()=>{if(this.prodParam.hasYield&&this.isContextual(108))throw this.raise(rt.PipeBodyIsTighter,this.state.startLoc);return this.parseSmartPipelineBodyInStyle(this.parseExprOpBaseRightExpr(d,a),m)});case"fsharp":return this.withSoloAwaitPermittingContext(()=>this.parseFSharpPipelineBody(a))}default:return this.parseExprOpBaseRightExpr(d,a)}}parseExprOpBaseRightExpr(d,a){let m=this.state.startLoc;return this.parseExprOp(this.parseMaybeUnaryOrPrivate(),m,ul(d)?a-1:a)}parseHackPipeBody(){var d;let{startLoc:a}=this.state,m=this.parseMaybeAssign();return Tn.has(m.type)&&!((d=m.extra)!=null&&d.parenthesized)&&this.raise(rt.PipeUnparenthesizedBody,a,{type:m.type}),this.topicReferenceWasUsedInCurrentContext()||this.raise(rt.PipeTopicUnused,a),m}checkExponentialAfterUnary(d){this.match(57)&&this.raise(rt.UnexpectedTokenUnaryExponentiation,d.argument)}parseMaybeUnary(d,a){let m=this.state.startLoc,S=this.isContextual(96);if(S&&this.isAwaitAllowed()){this.next();let qe=this.parseAwait(m);return a||this.checkExponentialAfterUnary(qe),qe}let $=this.match(34),ne=this.startNode();if(Ai(this.state.type)){ne.operator=this.state.value,ne.prefix=!0,this.match(72)&&this.expectPlugin("throwExpressions");let qe=this.match(89);if(this.next(),ne.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(d,!0),this.state.strict&&qe){let ct=ne.argument;ct.type==="Identifier"?this.raise(rt.StrictDelete,ne):this.hasPropertyAsPrivateName(ct)&&this.raise(rt.DeletePrivateField,ne)}if(!$)return a||this.checkExponentialAfterUnary(ne),this.finishNode(ne,"UnaryExpression")}let ve=this.parseUpdate(ne,$,d);if(S){let{type:qe}=this.state;if((this.hasPlugin("v8intrinsic")?Vo(qe):Vo(qe)&&!this.match(54))&&!this.isAmbiguousAwait())return this.raiseOverwrite(rt.AwaitNotInAsyncContext,m),this.parseAwait(m)}return ve}parseUpdate(d,a,m){if(a){let ne=d;return this.checkLVal(ne.argument,{in:this.finishNode(ne,"UpdateExpression")}),d}let S=this.state.startLoc,$=this.parseExprSubscripts(m);if(this.checkExpressionErrors(m,!1))return $;for(;Ys(this.state.type)&&!this.canInsertSemicolon();){let ne=this.startNodeAt(S);ne.operator=this.state.value,ne.prefix=!1,ne.argument=$,this.next(),this.checkLVal($,{in:$=this.finishNode(ne,"UpdateExpression")})}return $}parseExprSubscripts(d){let a=this.state.startLoc,m=this.state.potentialArrowAt,S=this.parseExprAtom(d);return this.shouldExitDescending(S,m)?S:this.parseSubscripts(S,a)}parseSubscripts(d,a,m){let S={optionalChainMember:!1,maybeAsyncArrow:this.atPossibleAsyncArrow(d),stop:!1};do d=this.parseSubscript(d,a,m,S),S.maybeAsyncArrow=!1;while(!S.stop);return d}parseSubscript(d,a,m,S){let{type:$}=this.state;if(!m&&$===15)return this.parseBind(d,a,m,S);if(ia($))return this.parseTaggedTemplateExpression(d,a,S);let ne=!1;if($===18){if(m&&(this.raise(rt.OptionalChainingNoNew,this.state.startLoc),this.lookaheadCharCode()===40))return S.stop=!0,d;S.optionalChainMember=ne=!0,this.next()}if(!m&&this.match(10))return this.parseCoverCallAndAsyncArrowHead(d,a,S,ne);{let ve=this.eat(0);return ve||ne||this.eat(16)?this.parseMember(d,a,S,ve,ne):(S.stop=!0,d)}}parseMember(d,a,m,S,$){let ne=this.startNodeAt(a);return ne.object=d,ne.computed=S,S?(ne.property=this.parseExpression(),this.expect(3)):this.match(138)?(d.type==="Super"&&this.raise(rt.SuperPrivateField,a),this.classScope.usePrivateName(this.state.value,this.state.startLoc),ne.property=this.parsePrivateName()):ne.property=this.parseIdentifier(!0),m.optionalChainMember?(ne.optional=$,this.finishNode(ne,"OptionalMemberExpression")):this.finishNode(ne,"MemberExpression")}parseBind(d,a,m,S){let $=this.startNodeAt(a);return $.object=d,this.next(),$.callee=this.parseNoCallExpr(),S.stop=!0,this.parseSubscripts(this.finishNode($,"BindExpression"),a,m)}parseCoverCallAndAsyncArrowHead(d,a,m,S){let $=this.state.maybeInArrowParameters,ne=null;this.state.maybeInArrowParameters=!0,this.next();let ve=this.startNodeAt(a);ve.callee=d;let{maybeAsyncArrow:qe,optionalChainMember:ct}=m;qe&&(this.expressionScope.enter(zn()),ne=new oi),ct&&(ve.optional=S),S?ve.arguments=this.parseCallExpressionArguments(11):ve.arguments=this.parseCallExpressionArguments(11,d.type==="Import",d.type!=="Super",ve,ne);let at=this.finishCallExpression(ve,ct);return qe&&this.shouldParseAsyncArrow()&&!S?(m.stop=!0,this.checkDestructuringPrivate(ne),this.expressionScope.validateAsPattern(),this.expressionScope.exit(),at=this.parseAsyncArrowFromCallExpression(this.startNodeAt(a),at)):(qe&&(this.checkExpressionErrors(ne,!0),this.expressionScope.exit()),this.toReferencedArguments(at)),this.state.maybeInArrowParameters=$,at}toReferencedArguments(d,a){this.toReferencedListDeep(d.arguments,a)}parseTaggedTemplateExpression(d,a,m){let S=this.startNodeAt(a);return S.tag=d,S.quasi=this.parseTemplate(!0),m.optionalChainMember&&this.raise(rt.OptionalChainingNoTemplate,a),this.finishNode(S,"TaggedTemplateExpression")}atPossibleAsyncArrow(d){return d.type==="Identifier"&&d.name==="async"&&this.state.lastTokEndLoc.index===d.end&&!this.canInsertSemicolon()&&d.end-d.start===5&&d.start===this.state.potentialArrowAt}expectImportAttributesPlugin(){this.hasPlugin("importAssertions")||this.expectPlugin("importAttributes")}finishCallExpression(d,a){if(d.callee.type==="Import")if(d.arguments.length===2&&(this.hasPlugin("moduleAttributes")||this.expectImportAttributesPlugin()),d.arguments.length===0||d.arguments.length>2)this.raise(rt.ImportCallArity,d,{maxArgumentCount:this.hasPlugin("importAttributes")||this.hasPlugin("importAssertions")||this.hasPlugin("moduleAttributes")?2:1});else for(let m of d.arguments)m.type==="SpreadElement"&&this.raise(rt.ImportCallSpreadArgument,m);return this.finishNode(d,a?"OptionalCallExpression":"CallExpression")}parseCallExpressionArguments(d,a,m,S,$){let ne=[],ve=!0,qe=this.state.inFSharpPipelineDirectBody;for(this.state.inFSharpPipelineDirectBody=!1;!this.eat(d);){if(ve)ve=!1;else if(this.expect(12),this.match(d)){a&&!this.hasPlugin("importAttributes")&&!this.hasPlugin("importAssertions")&&!this.hasPlugin("moduleAttributes")&&this.raise(rt.ImportCallArgumentTrailingComma,this.state.lastTokStartLoc),S&&this.addTrailingCommaExtraToNode(S),this.next();break}ne.push(this.parseExprListItem(!1,$,m))}return this.state.inFSharpPipelineDirectBody=qe,ne}shouldParseAsyncArrow(){return this.match(19)&&!this.canInsertSemicolon()}parseAsyncArrowFromCallExpression(d,a){var m;return this.resetPreviousNodeTrailingComments(a),this.expect(19),this.parseArrowExpression(d,a.arguments,!0,(m=a.extra)==null?void 0:m.trailingCommaLoc),a.innerComments&&kn(d,a.innerComments),a.callee.trailingComments&&kn(d,a.callee.trailingComments),d}parseNoCallExpr(){let d=this.state.startLoc;return this.parseSubscripts(this.parseExprAtom(),d,!0)}parseExprAtom(d){let a,m=null,{type:S}=this.state;switch(S){case 79:return this.parseSuper();case 83:return a=this.startNode(),this.next(),this.match(16)?this.parseImportMetaProperty(a):this.match(10)?this.options.createImportExpressions?this.parseImportCall(a):this.finishNode(a,"Import"):(this.raise(rt.UnsupportedImport,this.state.lastTokStartLoc),this.finishNode(a,"Import"));case 78:return a=this.startNode(),this.next(),this.finishNode(a,"ThisExpression");case 90:return this.parseDo(this.startNode(),!1);case 56:case 31:return this.readRegexp(),this.parseRegExpLiteral(this.state.value);case 134:return this.parseNumericLiteral(this.state.value);case 135:return this.parseBigIntLiteral(this.state.value);case 136:return this.parseDecimalLiteral(this.state.value);case 133:return this.parseStringLiteral(this.state.value);case 84:return this.parseNullLiteral();case 85:return this.parseBooleanLiteral(!0);case 86:return this.parseBooleanLiteral(!1);case 10:{let $=this.state.potentialArrowAt===this.state.start;return this.parseParenAndDistinguishExpression($)}case 2:case 1:return this.parseArrayLike(this.state.type===2?4:3,!1,!0);case 0:return this.parseArrayLike(3,!0,!1,d);case 6:case 7:return this.parseObjectLike(this.state.type===6?9:8,!1,!0);case 5:return this.parseObjectLike(8,!1,!1,d);case 68:return this.parseFunctionOrFunctionSent();case 26:m=this.parseDecorators();case 80:return this.parseClass(this.maybeTakeDecorators(m,this.startNode()),!1);case 77:return this.parseNewOrNewTarget();case 25:case 24:return this.parseTemplate(!1);case 15:{a=this.startNode(),this.next(),a.object=null;let $=a.callee=this.parseNoCallExpr();if($.type==="MemberExpression")return this.finishNode(a,"BindExpression");throw this.raise(rt.UnsupportedBind,$)}case 138:return this.raise(rt.PrivateInExpectedIn,this.state.startLoc,{identifierName:this.state.value}),this.parsePrivateName();case 33:return this.parseTopicReferenceThenEqualsSign(54,"%");case 32:return this.parseTopicReferenceThenEqualsSign(44,"^");case 37:case 38:return this.parseTopicReference("hack");case 44:case 54:case 27:{let $=this.getPluginOption("pipelineOperator","proposal");if($)return this.parseTopicReference($);this.unexpected();break}case 47:{let $=this.input.codePointAt(this.nextTokenStart());Je($)||$===62?this.expectOnePlugin(["jsx","flow","typescript"]):this.unexpected();break}default:if(Xt(S)){if(this.isContextual(127)&&this.lookaheadInLineCharCode()===123)return this.parseModuleExpression();let $=this.state.potentialArrowAt===this.state.start,ne=this.state.containsEsc,ve=this.parseIdentifier();if(!ne&&ve.name==="async"&&!this.canInsertSemicolon()){let{type:qe}=this.state;if(qe===68)return this.resetPreviousNodeTrailingComments(ve),this.next(),this.parseAsyncFunctionExpression(this.startNodeAtNode(ve));if(Xt(qe))return this.lookaheadCharCode()===61?this.parseAsyncArrowUnaryFunction(this.startNodeAtNode(ve)):ve;if(qe===90)return this.resetPreviousNodeTrailingComments(ve),this.parseDo(this.startNodeAtNode(ve),!0)}return $&&this.match(19)&&!this.canInsertSemicolon()?(this.next(),this.parseArrowExpression(this.startNodeAtNode(ve),[ve],!1)):ve}else this.unexpected()}}parseTopicReferenceThenEqualsSign(d,a){let m=this.getPluginOption("pipelineOperator","proposal");if(m)return this.state.type=d,this.state.value=a,this.state.pos--,this.state.end--,this.state.endLoc=te(this.state.endLoc,-1),this.parseTopicReference(m);this.unexpected()}parseTopicReference(d){let a=this.startNode(),m=this.state.startLoc,S=this.state.type;return this.next(),this.finishTopicReference(a,m,d,S)}finishTopicReference(d,a,m,S){if(this.testTopicReferenceConfiguration(m,a,S)){let $=m==="smart"?"PipelinePrimaryTopicReference":"TopicReference";return this.topicReferenceIsAllowedInCurrentContext()||this.raise(m==="smart"?rt.PrimaryTopicNotAllowed:rt.PipeTopicUnbound,a),this.registerTopicReference(),this.finishNode(d,$)}else throw this.raise(rt.PipeTopicUnconfiguredToken,a,{token:Zo(S)})}testTopicReferenceConfiguration(d,a,m){switch(d){case"hack":return this.hasPlugin(["pipelineOperator",{topicToken:Zo(m)}]);case"smart":return m===27;default:throw this.raise(rt.PipeTopicRequiresHackPipes,a)}}parseAsyncArrowUnaryFunction(d){this.prodParam.enter(zo(!0,this.prodParam.hasYield));let a=[this.parseIdentifier()];return this.prodParam.exit(),this.hasPrecedingLineBreak()&&this.raise(rt.LineTerminatorBeforeArrow,this.state.curPosition()),this.expect(19),this.parseArrowExpression(d,a,!0)}parseDo(d,a){this.expectPlugin("doExpressions"),a&&this.expectPlugin("asyncDoExpressions"),d.async=a,this.next();let m=this.state.labels;return this.state.labels=[],a?(this.prodParam.enter(2),d.body=this.parseBlock(),this.prodParam.exit()):d.body=this.parseBlock(),this.state.labels=m,this.finishNode(d,"DoExpression")}parseSuper(){let d=this.startNode();return this.next(),this.match(10)&&!this.scope.allowDirectSuper&&!this.options.allowSuperOutsideMethod?this.raise(rt.SuperNotAllowed,d):!this.scope.allowSuper&&!this.options.allowSuperOutsideMethod&&this.raise(rt.UnexpectedSuper,d),!this.match(10)&&!this.match(0)&&!this.match(16)&&this.raise(rt.UnsupportedSuper,d),this.finishNode(d,"Super")}parsePrivateName(){let d=this.startNode(),a=this.startNodeAt(te(this.state.startLoc,1)),m=this.state.value;return this.next(),d.id=this.createIdentifier(a,m),this.finishNode(d,"PrivateName")}parseFunctionOrFunctionSent(){let d=this.startNode();if(this.next(),this.prodParam.hasYield&&this.match(16)){let a=this.createIdentifier(this.startNodeAtNode(d),"function");return this.next(),this.match(103)?this.expectPlugin("functionSent"):this.hasPlugin("functionSent")||this.unexpected(),this.parseMetaProperty(d,a,"sent")}return this.parseFunction(d)}parseMetaProperty(d,a,m){d.meta=a;let S=this.state.containsEsc;return d.property=this.parseIdentifier(!0),(d.property.name!==m||S)&&this.raise(rt.UnsupportedMetaProperty,d.property,{target:a.name,onlyValidPropertyName:m}),this.finishNode(d,"MetaProperty")}parseImportMetaProperty(d){let a=this.createIdentifier(this.startNodeAtNode(d),"import");if(this.next(),this.isContextual(101))this.inModule||this.raise(rt.ImportMetaOutsideModule,a),this.sawUnambiguousESM=!0;else if(this.isContextual(105)||this.isContextual(97)){let m=this.isContextual(105);if(m||this.unexpected(),this.expectPlugin(m?"sourcePhaseImports":"deferredImportEvaluation"),!this.options.createImportExpressions)throw this.raise(rt.DynamicImportPhaseRequiresImportExpressions,this.state.startLoc,{phase:this.state.value});return this.next(),d.phase=m?"source":"defer",this.parseImportCall(d)}return this.parseMetaProperty(d,a,"meta")}parseLiteralAtNode(d,a,m){return this.addExtra(m,"rawValue",d),this.addExtra(m,"raw",this.input.slice(m.start,this.state.end)),m.value=d,this.next(),this.finishNode(m,a)}parseLiteral(d,a){let m=this.startNode();return this.parseLiteralAtNode(d,a,m)}parseStringLiteral(d){return this.parseLiteral(d,"StringLiteral")}parseNumericLiteral(d){return this.parseLiteral(d,"NumericLiteral")}parseBigIntLiteral(d){return this.parseLiteral(d,"BigIntLiteral")}parseDecimalLiteral(d){return this.parseLiteral(d,"DecimalLiteral")}parseRegExpLiteral(d){let a=this.parseLiteral(d.value,"RegExpLiteral");return a.pattern=d.pattern,a.flags=d.flags,a}parseBooleanLiteral(d){let a=this.startNode();return a.value=d,this.next(),this.finishNode(a,"BooleanLiteral")}parseNullLiteral(){let d=this.startNode();return this.next(),this.finishNode(d,"NullLiteral")}parseParenAndDistinguishExpression(d){let a=this.state.startLoc,m;this.next(),this.expressionScope.enter(kr());let S=this.state.maybeInArrowParameters,$=this.state.inFSharpPipelineDirectBody;this.state.maybeInArrowParameters=!0,this.state.inFSharpPipelineDirectBody=!1;let ne=this.state.startLoc,ve=[],qe=new oi,ct=!0,at,On;for(;!this.match(11);){if(ct)ct=!1;else if(this.expect(12,qe.optionalParametersLoc===null?null:qe.optionalParametersLoc),this.match(11)){On=this.state.startLoc;break}if(this.match(21)){let ji=this.state.startLoc;if(at=this.state.startLoc,ve.push(this.parseParenItem(this.parseRestBinding(),ji)),!this.checkCommaAfterRest(41))break}else ve.push(this.parseMaybeAssignAllowIn(qe,this.parseParenItem))}let ui=this.state.lastTokEndLoc;this.expect(11),this.state.maybeInArrowParameters=S,this.state.inFSharpPipelineDirectBody=$;let Yi=this.startNodeAt(a);return d&&this.shouldParseArrow(ve)&&(Yi=this.parseArrow(Yi))?(this.checkDestructuringPrivate(qe),this.expressionScope.validateAsPattern(),this.expressionScope.exit(),this.parseArrowExpression(Yi,ve,!1),Yi):(this.expressionScope.exit(),ve.length||this.unexpected(this.state.lastTokStartLoc),On&&this.unexpected(On),at&&this.unexpected(at),this.checkExpressionErrors(qe,!0),this.toReferencedListDeep(ve,!0),ve.length>1?(m=this.startNodeAt(ne),m.expressions=ve,this.finishNode(m,"SequenceExpression"),this.resetEndLocation(m,ui)):m=ve[0],this.wrapParenthesis(a,m))}wrapParenthesis(d,a){if(!this.options.createParenthesizedExpressions)return this.addExtra(a,"parenthesized",!0),this.addExtra(a,"parenStart",d.index),this.takeSurroundingComments(a,d.index,this.state.lastTokEndLoc.index),a;let m=this.startNodeAt(d);return m.expression=a,this.finishNode(m,"ParenthesizedExpression")}shouldParseArrow(d){return!this.canInsertSemicolon()}parseArrow(d){if(this.eat(19))return d}parseParenItem(d,a){return d}parseNewOrNewTarget(){let d=this.startNode();if(this.next(),this.match(16)){let a=this.createIdentifier(this.startNodeAtNode(d),"new");this.next();let m=this.parseMetaProperty(d,a,"target");return!this.scope.inNonArrowFunction&&!this.scope.inClass&&!this.options.allowNewTargetOutsideFunction&&this.raise(rt.UnexpectedNewTarget,m),m}return this.parseNew(d)}parseNew(d){if(this.parseNewCallee(d),this.eat(10)){let a=this.parseExprList(11);this.toReferencedList(a),d.arguments=a}else d.arguments=[];return this.finishNode(d,"NewExpression")}parseNewCallee(d){let a=this.match(83),m=this.parseNoCallExpr();d.callee=m,a&&(m.type==="Import"||m.type==="ImportExpression")&&this.raise(rt.ImportCallNotNewExpression,m)}parseTemplateElement(d){let{start:a,startLoc:m,end:S,value:$}=this.state,ne=a+1,ve=this.startNodeAt(te(m,1));$===null&&(d||this.raise(rt.InvalidEscapeSequenceTemplate,te(this.state.firstInvalidTemplateEscapePos,1)));let qe=this.match(24),ct=qe?-1:-2,at=S+ct;ve.value={raw:this.input.slice(ne,at).replace(/\r\n?/g,`
`),cooked:$===null?null:$.slice(1,ct)},ve.tail=qe,this.next();let On=this.finishNode(ve,"TemplateElement");return this.resetEndLocation(On,te(this.state.lastTokEndLoc,ct)),On}parseTemplate(d){let a=this.startNode();a.expressions=[];let m=this.parseTemplateElement(d);for(a.quasis=[m];!m.tail;)a.expressions.push(this.parseTemplateSubstitution()),this.readTemplateContinuation(),a.quasis.push(m=this.parseTemplateElement(d));return this.finishNode(a,"TemplateLiteral")}parseTemplateSubstitution(){return this.parseExpression()}parseObjectLike(d,a,m,S){m&&this.expectPlugin("recordAndTuple");let $=this.state.inFSharpPipelineDirectBody;this.state.inFSharpPipelineDirectBody=!1;let ne=Object.create(null),ve=!0,qe=this.startNode();for(qe.properties=[],this.next();!this.match(d);){if(ve)ve=!1;else if(this.expect(12),this.match(d)){this.addTrailingCommaExtraToNode(qe);break}let at;a?at=this.parseBindingProperty():(at=this.parsePropertyDefinition(S),this.checkProto(at,m,ne,S)),m&&!this.isObjectProperty(at)&&at.type!=="SpreadElement"&&this.raise(rt.InvalidRecordProperty,at),at.shorthand&&this.addExtra(at,"shorthand",!0),qe.properties.push(at)}this.next(),this.state.inFSharpPipelineDirectBody=$;let ct="ObjectExpression";return a?ct="ObjectPattern":m&&(ct="RecordExpression"),this.finishNode(qe,ct)}addTrailingCommaExtraToNode(d){this.addExtra(d,"trailingComma",this.state.lastTokStartLoc.index),this.addExtra(d,"trailingCommaLoc",this.state.lastTokStartLoc,!1)}maybeAsyncOrAccessorProp(d){return!d.computed&&d.key.type==="Identifier"&&(this.isLiteralPropertyName()||this.match(0)||this.match(55))}parsePropertyDefinition(d){let a=[];if(this.match(26))for(this.hasPlugin("decorators")&&this.raise(rt.UnsupportedPropertyDecorator,this.state.startLoc);this.match(26);)a.push(this.parseDecorator());let m=this.startNode(),S=!1,$=!1,ne;if(this.match(21))return a.length&&this.unexpected(),this.parseSpread();a.length&&(m.decorators=a,a=[]),m.method=!1,d&&(ne=this.state.startLoc);let ve=this.eat(55);this.parsePropertyNamePrefixOperator(m);let qe=this.state.containsEsc,ct=this.parsePropertyName(m,d);if(!ve&&!qe&&this.maybeAsyncOrAccessorProp(m)){let at=ct.name;at==="async"&&!this.hasPrecedingLineBreak()&&(S=!0,this.resetPreviousNodeTrailingComments(ct),ve=this.eat(55),this.parsePropertyName(m)),(at==="get"||at==="set")&&($=!0,this.resetPreviousNodeTrailingComments(ct),m.kind=at,this.match(55)&&(ve=!0,this.raise(rt.AccessorIsGenerator,this.state.curPosition(),{kind:at}),this.next()),this.parsePropertyName(m))}return this.parseObjPropValue(m,ne,ve,S,!1,$,d)}getGetterSetterExpectedParamCount(d){return d.kind==="get"?0:1}getObjectOrClassMethodParams(d){return d.params}checkGetterSetterParams(d){var a;let m=this.getGetterSetterExpectedParamCount(d),S=this.getObjectOrClassMethodParams(d);S.length!==m&&this.raise(d.kind==="get"?rt.BadGetterArity:rt.BadSetterArity,d),d.kind==="set"&&((a=S[S.length-1])==null?void 0:a.type)==="RestElement"&&this.raise(rt.BadSetterRestParameter,d)}parseObjectMethod(d,a,m,S,$){if($){let ne=this.parseMethod(d,a,!1,!1,!1,"ObjectMethod");return this.checkGetterSetterParams(ne),ne}if(m||a||this.match(10))return S&&this.unexpected(),d.kind="method",d.method=!0,this.parseMethod(d,a,m,!1,!1,"ObjectMethod")}parseObjectProperty(d,a,m,S){if(d.shorthand=!1,this.eat(14))return d.value=m?this.parseMaybeDefault(this.state.startLoc):this.parseMaybeAssignAllowIn(S),this.finishNode(d,"ObjectProperty");if(!d.computed&&d.key.type==="Identifier"){if(this.checkReservedWord(d.key.name,d.key.loc.start,!0,!1),m)d.value=this.parseMaybeDefault(a,eo(d.key));else if(this.match(29)){let $=this.state.startLoc;S!=null?S.shorthandAssignLoc===null&&(S.shorthandAssignLoc=$):this.raise(rt.InvalidCoverInitializedName,$),d.value=this.parseMaybeDefault(a,eo(d.key))}else d.value=eo(d.key);return d.shorthand=!0,this.finishNode(d,"ObjectProperty")}}parseObjPropValue(d,a,m,S,$,ne,ve){let qe=this.parseObjectMethod(d,m,S,$,ne)||this.parseObjectProperty(d,a,$,ve);return qe||this.unexpected(),qe}parsePropertyName(d,a){if(this.eat(0))d.computed=!0,d.key=this.parseMaybeAssignAllowIn(),this.expect(3);else{let{type:m,value:S}=this.state,$;if(ri(m))$=this.parseIdentifier(!0);else switch(m){case 134:$=this.parseNumericLiteral(S);break;case 133:$=this.parseStringLiteral(S);break;case 135:$=this.parseBigIntLiteral(S);break;case 136:$=this.parseDecimalLiteral(S);break;case 138:{let ne=this.state.startLoc;a!=null?a.privateKeyLoc===null&&(a.privateKeyLoc=ne):this.raise(rt.UnexpectedPrivateField,ne),$=this.parsePrivateName();break}default:this.unexpected()}d.key=$,m!==138&&(d.computed=!1)}return d.key}initFunction(d,a){d.id=null,d.generator=!1,d.async=a}parseMethod(d,a,m,S,$,ne,ve=!1){this.initFunction(d,m),d.generator=a,this.scope.enter(18|(ve?64:0)|($?32:0)),this.prodParam.enter(zo(m,d.generator)),this.parseFunctionParams(d,S);let qe=this.parseFunctionBodyAndFinish(d,ne,!0);return this.prodParam.exit(),this.scope.exit(),qe}parseArrayLike(d,a,m,S){m&&this.expectPlugin("recordAndTuple");let $=this.state.inFSharpPipelineDirectBody;this.state.inFSharpPipelineDirectBody=!1;let ne=this.startNode();return this.next(),ne.elements=this.parseExprList(d,!m,S,ne),this.state.inFSharpPipelineDirectBody=$,this.finishNode(ne,m?"TupleExpression":"ArrayExpression")}parseArrowExpression(d,a,m,S){this.scope.enter(6);let $=zo(m,!1);!this.match(5)&&this.prodParam.hasIn&&($|=8),this.prodParam.enter($),this.initFunction(d,m);let ne=this.state.maybeInArrowParameters;return a&&(this.state.maybeInArrowParameters=!0,this.setArrowFunctionParameters(d,a,S)),this.state.maybeInArrowParameters=!1,this.parseFunctionBody(d,!0),this.prodParam.exit(),this.scope.exit(),this.state.maybeInArrowParameters=ne,this.finishNode(d,"ArrowFunctionExpression")}setArrowFunctionParameters(d,a,m){this.toAssignableList(a,m,!1),d.params=a}parseFunctionBodyAndFinish(d,a,m=!1){return this.parseFunctionBody(d,!1,m),this.finishNode(d,a)}parseFunctionBody(d,a,m=!1){let S=a&&!this.match(5);if(this.expressionScope.enter(Ri()),S)d.body=this.parseMaybeAssign(),this.checkParams(d,!1,a,!1);else{let $=this.state.strict,ne=this.state.labels;this.state.labels=[],this.prodParam.enter(this.prodParam.currentFlags()|4),d.body=this.parseBlock(!0,!1,ve=>{let qe=!this.isSimpleParamList(d.params);ve&&qe&&this.raise(rt.IllegalLanguageModeDirective,(d.kind==="method"||d.kind==="constructor")&&d.key?d.key.loc.end:d);let ct=!$&&this.state.strict;this.checkParams(d,!this.state.strict&&!a&&!m&&!qe,a,ct),this.state.strict&&d.id&&this.checkIdentifier(d.id,65,ct)}),this.prodParam.exit(),this.state.labels=ne}this.expressionScope.exit()}isSimpleParameter(d){return d.type==="Identifier"}isSimpleParamList(d){for(let a=0,m=d.length;a<m;a++)if(!this.isSimpleParameter(d[a]))return!1;return!0}checkParams(d,a,m,S=!0){let $=!a&&new Set,ne={type:"FormalParameters"};for(let ve of d.params)this.checkLVal(ve,{in:ne,binding:5,checkClashes:$,strictModeChanged:S})}parseExprList(d,a,m,S){let $=[],ne=!0;for(;!this.eat(d);){if(ne)ne=!1;else if(this.expect(12),this.match(d)){S&&this.addTrailingCommaExtraToNode(S),this.next();break}$.push(this.parseExprListItem(a,m))}return $}parseExprListItem(d,a,m){let S;if(this.match(12))d||this.raise(rt.UnexpectedToken,this.state.curPosition(),{unexpected:","}),S=null;else if(this.match(21)){let $=this.state.startLoc;S=this.parseParenItem(this.parseSpread(a),$)}else if(this.match(17)){this.expectPlugin("partialApplication"),m||this.raise(rt.UnexpectedArgumentPlaceholder,this.state.startLoc);let $=this.startNode();this.next(),S=this.finishNode($,"ArgumentPlaceholder")}else S=this.parseMaybeAssignAllowIn(a,this.parseParenItem);return S}parseIdentifier(d){let a=this.startNode(),m=this.parseIdentifierName(d);return this.createIdentifier(a,m)}createIdentifier(d,a){return d.name=a,d.loc.identifierName=a,this.finishNode(d,"Identifier")}parseIdentifierName(d){let a,{startLoc:m,type:S}=this.state;ri(S)?a=this.state.value:this.unexpected();let $=mn(S);return d?$&&this.replaceToken(132):this.checkReservedWord(a,m,$,!1),this.next(),a}checkReservedWord(d,a,m,S){if(!(d.length>10||!ht(d))){if(m&&Co(d)){this.raise(rt.UnexpectedKeyword,a,{keyword:d});return}if((this.state.strict?S?_o:Pr:as)(d,this.inModule)){this.raise(rt.UnexpectedReservedWord,a,{reservedWord:d});return}else if(d==="yield"){if(this.prodParam.hasYield){this.raise(rt.YieldBindingIdentifier,a);return}}else if(d==="await"){if(this.prodParam.hasAwait){this.raise(rt.AwaitBindingIdentifier,a);return}if(this.scope.inStaticBlock){this.raise(rt.AwaitBindingIdentifierInStaticBlock,a);return}this.expressionScope.recordAsyncArrowParametersError(a)}else if(d==="arguments"&&this.scope.inClassAndNotInNonArrowFunction){this.raise(rt.ArgumentsInClass,a);return}}}isAwaitAllowed(){return!!(this.prodParam.hasAwait||this.options.allowAwaitOutsideFunction&&!this.scope.inFunction)}parseAwait(d){let a=this.startNodeAt(d);return this.expressionScope.recordParameterInitializerError(rt.AwaitExpressionFormalParameter,a),this.eat(55)&&this.raise(rt.ObsoleteAwaitStar,a),!this.scope.inFunction&&!this.options.allowAwaitOutsideFunction&&(this.isAmbiguousAwait()?this.ambiguousScriptDifferentAst=!0:this.sawUnambiguousESM=!0),this.state.soloAwait||(a.argument=this.parseMaybeUnary(null,!0)),this.finishNode(a,"AwaitExpression")}isAmbiguousAwait(){if(this.hasPrecedingLineBreak())return!0;let{type:d}=this.state;return d===53||d===10||d===0||ia(d)||d===102&&!this.state.containsEsc||d===137||d===56||this.hasPlugin("v8intrinsic")&&d===54}parseYield(){let d=this.startNode();this.expressionScope.recordParameterInitializerError(rt.YieldInParameter,d),this.next();let a=!1,m=null;if(!this.hasPrecedingLineBreak())switch(a=this.eat(55),this.state.type){case 13:case 139:case 8:case 11:case 3:case 9:case 14:case 12:if(!a)break;default:m=this.parseMaybeAssign()}return d.delegate=a,d.argument=m,this.finishNode(d,"YieldExpression")}parseImportCall(d){return this.next(),d.source=this.parseMaybeAssignAllowIn(),(this.hasPlugin("importAttributes")||this.hasPlugin("importAssertions"))&&(d.options=null),this.eat(12)&&(this.expectImportAttributesPlugin(),this.match(11)||(d.options=this.parseMaybeAssignAllowIn(),this.eat(12))),this.expect(11),this.finishNode(d,"ImportExpression")}checkPipelineAtInfixOperator(d,a){this.hasPlugin(["pipelineOperator",{proposal:"smart"}])&&d.type==="SequenceExpression"&&this.raise(rt.PipelineHeadSequenceExpression,a)}parseSmartPipelineBodyInStyle(d,a){if(this.isSimpleReference(d)){let m=this.startNodeAt(a);return m.callee=d,this.finishNode(m,"PipelineBareFunction")}else{let m=this.startNodeAt(a);return this.checkSmartPipeTopicBodyEarlyErrors(a),m.expression=d,this.finishNode(m,"PipelineTopicExpression")}}isSimpleReference(d){switch(d.type){case"MemberExpression":return!d.computed&&this.isSimpleReference(d.object);case"Identifier":return!0;default:return!1}}checkSmartPipeTopicBodyEarlyErrors(d){if(this.match(19))throw this.raise(rt.PipelineBodyNoArrow,this.state.startLoc);this.topicReferenceWasUsedInCurrentContext()||this.raise(rt.PipelineTopicUnused,d)}withTopicBindingContext(d){let a=this.state.topicContext;this.state.topicContext={maxNumOfResolvableTopics:1,maxTopicIndex:null};try{return d()}finally{this.state.topicContext=a}}withSmartMixTopicForbiddingContext(d){if(this.hasPlugin(["pipelineOperator",{proposal:"smart"}])){let a=this.state.topicContext;this.state.topicContext={maxNumOfResolvableTopics:0,maxTopicIndex:null};try{return d()}finally{this.state.topicContext=a}}else return d()}withSoloAwaitPermittingContext(d){let a=this.state.soloAwait;this.state.soloAwait=!0;try{return d()}finally{this.state.soloAwait=a}}allowInAnd(d){let a=this.prodParam.currentFlags();if(8&~a){this.prodParam.enter(a|8);try{return d()}finally{this.prodParam.exit()}}return d()}disallowInAnd(d){let a=this.prodParam.currentFlags();if(8&a){this.prodParam.enter(a&-9);try{return d()}finally{this.prodParam.exit()}}return d()}registerTopicReference(){this.state.topicContext.maxTopicIndex=0}topicReferenceIsAllowedInCurrentContext(){return this.state.topicContext.maxNumOfResolvableTopics>=1}topicReferenceWasUsedInCurrentContext(){return this.state.topicContext.maxTopicIndex!=null&&this.state.topicContext.maxTopicIndex>=0}parseFSharpPipelineBody(d){let a=this.state.startLoc;this.state.potentialArrowAt=this.state.start;let m=this.state.inFSharpPipelineDirectBody;this.state.inFSharpPipelineDirectBody=!0;let S=this.parseExprOp(this.parseMaybeUnaryOrPrivate(),a,d);return this.state.inFSharpPipelineDirectBody=m,S}parseModuleExpression(){this.expectPlugin("moduleBlocks");let d=this.startNode();this.next(),this.match(5)||this.unexpected(null,5);let a=this.startNodeAt(this.state.endLoc);this.next();let m=this.initializeScopes(!0);this.enterInitialScopes();try{d.body=this.parseProgram(a,8,"module")}finally{m()}return this.finishNode(d,"ModuleExpression")}parsePropertyNamePrefixOperator(d){}},Cl={kind:1},Va={kind:2},Cs=/[\uD800-\uDFFF]/u,Ji=/in(?:stanceof)?/y;function nu(d,a){for(let m=0;m<d.length;m++){let S=d[m],{type:$}=S;if(typeof $=="number"){{if($===138){let{loc:ne,start:ve,value:qe,end:ct}=S,at=ve+1,On=te(ne.start,1);d.splice(m,1,new Yt({type:Ro(27),value:"#",start:ve,end:at,startLoc:ne.start,endLoc:On}),new Yt({type:Ro(132),value:qe,start:at,end:ct,startLoc:On,endLoc:ne.end})),m++;continue}if(ia($)){let{loc:ne,start:ve,value:qe,end:ct}=S,at=ve+1,On=te(ne.start,1),ui;a.charCodeAt(ve)===96?ui=new Yt({type:Ro(22),value:"`",start:ve,end:at,startLoc:ne.start,endLoc:On}):ui=new Yt({type:Ro(8),value:"}",start:ve,end:at,startLoc:ne.start,endLoc:On});let Yi,ji,Ls,Zs;$===24?(ji=ct-1,Ls=te(ne.end,-1),Yi=qe===null?null:qe.slice(1,-1),Zs=new Yt({type:Ro(22),value:"`",start:ji,end:ct,startLoc:Ls,endLoc:ne.end})):(ji=ct-2,Ls=te(ne.end,-2),Yi=qe===null?null:qe.slice(1,-2),Zs=new Yt({type:Ro(23),value:"${",start:ji,end:ct,startLoc:Ls,endLoc:ne.end})),d.splice(m,1,ui,new Yt({type:Ro(20),value:Yi,start:at,end:ji,startLoc:On,endLoc:Ls}),Zs),m+=2;continue}}S.type=Ro($)}}return d}var Hs=class extends Ka{parseTopLevel(d,a){return d.program=this.parseProgram(a),d.comments=this.comments,this.options.tokens&&(d.tokens=nu(this.tokens,this.input)),this.finishNode(d,"File")}parseProgram(d,a=139,m=this.options.sourceType){if(d.sourceType=m,d.interpreter=this.parseInterpreterDirective(),this.parseBlockBody(d,!0,!0,a),this.inModule&&!this.options.allowUndeclaredExports&&this.scope.undefinedExports.size>0)for(let[$,ne]of Array.from(this.scope.undefinedExports))this.raise(rt.ModuleExportUndefined,ne,{localName:$});let S;return a===139?S=this.finishNode(d,"Program"):S=this.finishNodeAt(d,"Program",te(this.state.startLoc,-1)),S}stmtToDirective(d){let a=d;a.type="Directive",a.value=a.expression,delete a.expression;let m=a.value,S=m.value,$=this.input.slice(m.start,m.end),ne=m.value=$.slice(1,-1);return this.addExtra(m,"raw",$),this.addExtra(m,"rawValue",ne),this.addExtra(m,"expressionValue",S),m.type="DirectiveLiteral",a}parseInterpreterDirective(){if(!this.match(28))return null;let d=this.startNode();return d.value=this.state.value,this.next(),this.finishNode(d,"InterpreterDirective")}isLet(){return this.isContextual(100)?this.hasFollowingBindingAtom():!1}chStartsBindingIdentifier(d,a){if(Je(d)){if(Ji.lastIndex=a,Ji.test(this.input)){let m=this.codePointAtPos(Ji.lastIndex);if(!Ct(m)&&m!==92)return!1}return!0}else return d===92}chStartsBindingPattern(d){return d===91||d===123}hasFollowingBindingAtom(){let d=this.nextTokenStart(),a=this.codePointAtPos(d);return this.chStartsBindingPattern(a)||this.chStartsBindingIdentifier(a,d)}hasInLineFollowingBindingIdentifier(){let d=this.nextTokenInLineStart(),a=this.codePointAtPos(d);return this.chStartsBindingIdentifier(a,d)}startsUsingForOf(){let{type:d,containsEsc:a}=this.lookahead();if(d===102&&!a)return!1;if(Xt(d)&&!this.hasFollowingLineBreak())return this.expectPlugin("explicitResourceManagement"),!0}startsAwaitUsing(){let d=this.nextTokenInLineStart();if(this.isUnparsedContextual(d,"using")){d=this.nextTokenInLineStartSince(d+5);let a=this.codePointAtPos(d);if(this.chStartsBindingIdentifier(a,d))return this.expectPlugin("explicitResourceManagement"),!0}return!1}parseModuleItem(){return this.parseStatementLike(15)}parseStatementListItem(){return this.parseStatementLike(6|(!this.options.annexB||this.state.strict?0:8))}parseStatementOrSloppyAnnexBFunctionDeclaration(d=!1){let a=0;return this.options.annexB&&!this.state.strict&&(a|=4,d&&(a|=8)),this.parseStatementLike(a)}parseStatement(){return this.parseStatementLike(0)}parseStatementLike(d){let a=null;return this.match(26)&&(a=this.parseDecorators(!0)),this.parseStatementContent(d,a)}parseStatementContent(d,a){let m=this.state.type,S=this.startNode(),$=!!(d&2),ne=!!(d&4),ve=d&1;switch(m){case 60:return this.parseBreakContinueStatement(S,!0);case 63:return this.parseBreakContinueStatement(S,!1);case 64:return this.parseDebuggerStatement(S);case 90:return this.parseDoWhileStatement(S);case 91:return this.parseForStatement(S);case 68:if(this.lookaheadCharCode()===46)break;return ne||this.raise(this.state.strict?rt.StrictFunction:this.options.annexB?rt.SloppyFunctionAnnexB:rt.SloppyFunction,this.state.startLoc),this.parseFunctionStatement(S,!1,!$&&ne);case 80:return $||this.unexpected(),this.parseClass(this.maybeTakeDecorators(a,S),!0);case 69:return this.parseIfStatement(S);case 70:return this.parseReturnStatement(S);case 71:return this.parseSwitchStatement(S);case 72:return this.parseThrowStatement(S);case 73:return this.parseTryStatement(S);case 96:if(!this.state.containsEsc&&this.startsAwaitUsing())return this.isAwaitAllowed()?$||this.raise(rt.UnexpectedLexicalDeclaration,S):this.raise(rt.AwaitUsingNotInAsyncContext,S),this.next(),this.parseVarStatement(S,"await using");break;case 107:if(this.state.containsEsc||!this.hasInLineFollowingBindingIdentifier())break;return this.expectPlugin("explicitResourceManagement"),!this.scope.inModule&&this.scope.inTopLevel?this.raise(rt.UnexpectedUsingDeclaration,this.state.startLoc):$||this.raise(rt.UnexpectedLexicalDeclaration,this.state.startLoc),this.parseVarStatement(S,"using");case 100:{if(this.state.containsEsc)break;let at=this.nextTokenStart(),On=this.codePointAtPos(at);if(On!==91&&(!$&&this.hasFollowingLineBreak()||!this.chStartsBindingIdentifier(On,at)&&On!==123))break}case 75:$||this.raise(rt.UnexpectedLexicalDeclaration,this.state.startLoc);case 74:{let at=this.state.value;return this.parseVarStatement(S,at)}case 92:return this.parseWhileStatement(S);case 76:return this.parseWithStatement(S);case 5:return this.parseBlock();case 13:return this.parseEmptyStatement(S);case 83:{let at=this.lookaheadCharCode();if(at===40||at===46)break}case 82:{!this.options.allowImportExportEverywhere&&!ve&&this.raise(rt.UnexpectedImportExport,this.state.startLoc),this.next();let at;return m===83?(at=this.parseImport(S),at.type==="ImportDeclaration"&&(!at.importKind||at.importKind==="value")&&(this.sawUnambiguousESM=!0)):(at=this.parseExport(S,a),(at.type==="ExportNamedDeclaration"&&(!at.exportKind||at.exportKind==="value")||at.type==="ExportAllDeclaration"&&(!at.exportKind||at.exportKind==="value")||at.type==="ExportDefaultDeclaration")&&(this.sawUnambiguousESM=!0)),this.assertModuleNodeAllowed(at),at}default:if(this.isAsyncFunction())return $||this.raise(rt.AsyncFunctionInSingleStatementContext,this.state.startLoc),this.next(),this.parseFunctionStatement(S,!0,!$&&ne)}let qe=this.state.value,ct=this.parseExpression();return Xt(m)&&ct.type==="Identifier"&&this.eat(14)?this.parseLabeledStatement(S,qe,ct,d):this.parseExpressionStatement(S,ct,a)}assertModuleNodeAllowed(d){!this.options.allowImportExportEverywhere&&!this.inModule&&this.raise(rt.ImportOutsideModule,d)}decoratorsEnabledBeforeExport(){return this.hasPlugin("decorators-legacy")?!0:this.hasPlugin("decorators")&&this.getPluginOption("decorators","decoratorsBeforeExport")!==!1}maybeTakeDecorators(d,a,m){return d&&(a.decorators&&a.decorators.length>0?(typeof this.getPluginOption("decorators","decoratorsBeforeExport")!="boolean"&&this.raise(rt.DecoratorsBeforeAfterExport,a.decorators[0]),a.decorators.unshift(...d)):a.decorators=d,this.resetStartLocationFromNode(a,d[0]),m&&this.resetStartLocationFromNode(m,a)),a}canHaveLeadingDecorator(){return this.match(80)}parseDecorators(d){let a=[];do a.push(this.parseDecorator());while(this.match(26));if(this.match(82))d||this.unexpected(),this.decoratorsEnabledBeforeExport()||this.raise(rt.DecoratorExportClass,this.state.startLoc);else if(!this.canHaveLeadingDecorator())throw this.raise(rt.UnexpectedLeadingDecorator,this.state.startLoc);return a}parseDecorator(){this.expectOnePlugin(["decorators","decorators-legacy"]);let d=this.startNode();if(this.next(),this.hasPlugin("decorators")){let a=this.state.startLoc,m;if(this.match(10)){let S=this.state.startLoc;this.next(),m=this.parseExpression(),this.expect(11),m=this.wrapParenthesis(S,m);let $=this.state.startLoc;d.expression=this.parseMaybeDecoratorArguments(m),this.getPluginOption("decorators","allowCallParenthesized")===!1&&d.expression!==m&&this.raise(rt.DecoratorArgumentsOutsideParentheses,$)}else{for(m=this.parseIdentifier(!1);this.eat(16);){let S=this.startNodeAt(a);S.object=m,this.match(138)?(this.classScope.usePrivateName(this.state.value,this.state.startLoc),S.property=this.parsePrivateName()):S.property=this.parseIdentifier(!0),S.computed=!1,m=this.finishNode(S,"MemberExpression")}d.expression=this.parseMaybeDecoratorArguments(m)}}else d.expression=this.parseExprSubscripts();return this.finishNode(d,"Decorator")}parseMaybeDecoratorArguments(d){if(this.eat(10)){let a=this.startNodeAtNode(d);return a.callee=d,a.arguments=this.parseCallExpressionArguments(11,!1),this.toReferencedList(a.arguments),this.finishNode(a,"CallExpression")}return d}parseBreakContinueStatement(d,a){return this.next(),this.isLineTerminator()?d.label=null:(d.label=this.parseIdentifier(),this.semicolon()),this.verifyBreakContinue(d,a),this.finishNode(d,a?"BreakStatement":"ContinueStatement")}verifyBreakContinue(d,a){let m;for(m=0;m<this.state.labels.length;++m){let S=this.state.labels[m];if((d.label==null||S.name===d.label.name)&&(S.kind!=null&&(a||S.kind===1)||d.label&&a))break}if(m===this.state.labels.length){let S=a?"BreakStatement":"ContinueStatement";this.raise(rt.IllegalBreakContinue,d,{type:S})}}parseDebuggerStatement(d){return this.next(),this.semicolon(),this.finishNode(d,"DebuggerStatement")}parseHeaderExpression(){this.expect(10);let d=this.parseExpression();return this.expect(11),d}parseDoWhileStatement(d){return this.next(),this.state.labels.push(Cl),d.body=this.withSmartMixTopicForbiddingContext(()=>this.parseStatement()),this.state.labels.pop(),this.expect(92),d.test=this.parseHeaderExpression(),this.eat(13),this.finishNode(d,"DoWhileStatement")}parseForStatement(d){this.next(),this.state.labels.push(Cl);let a=null;if(this.isAwaitAllowed()&&this.eatContextual(96)&&(a=this.state.lastTokStartLoc),this.scope.enter(0),this.expect(10),this.match(13))return a!==null&&this.unexpected(a),this.parseFor(d,null);let m=this.isContextual(100);{let qe=this.isContextual(96)&&this.startsAwaitUsing(),ct=qe||this.isContextual(107)&&this.startsUsingForOf(),at=m&&this.hasFollowingBindingAtom()||ct;if(this.match(74)||this.match(75)||at){let On=this.startNode(),ui;qe?(ui="await using",this.isAwaitAllowed()||this.raise(rt.AwaitUsingNotInAsyncContext,this.state.startLoc),this.next()):ui=this.state.value,this.next(),this.parseVar(On,!0,ui);let Yi=this.finishNode(On,"VariableDeclaration"),ji=this.match(58);return ji&&ct&&this.raise(rt.ForInUsing,Yi),(ji||this.isContextual(102))&&Yi.declarations.length===1?this.parseForIn(d,Yi,a):(a!==null&&this.unexpected(a),this.parseFor(d,Yi))}}let S=this.isContextual(95),$=new oi,ne=this.parseExpression(!0,$),ve=this.isContextual(102);if(ve&&(m&&this.raise(rt.ForOfLet,ne),a===null&&S&&ne.type==="Identifier"&&this.raise(rt.ForOfAsync,ne)),ve||this.match(58)){this.checkDestructuringPrivate($),this.toAssignable(ne,!0);let qe=ve?"ForOfStatement":"ForInStatement";return this.checkLVal(ne,{in:{type:qe}}),this.parseForIn(d,ne,a)}else this.checkExpressionErrors($,!0);return a!==null&&this.unexpected(a),this.parseFor(d,ne)}parseFunctionStatement(d,a,m){return this.next(),this.parseFunction(d,1|(m?2:0)|(a?8:0))}parseIfStatement(d){return this.next(),d.test=this.parseHeaderExpression(),d.consequent=this.parseStatementOrSloppyAnnexBFunctionDeclaration(),d.alternate=this.eat(66)?this.parseStatementOrSloppyAnnexBFunctionDeclaration():null,this.finishNode(d,"IfStatement")}parseReturnStatement(d){return!this.prodParam.hasReturn&&!this.options.allowReturnOutsideFunction&&this.raise(rt.IllegalReturn,this.state.startLoc),this.next(),this.isLineTerminator()?d.argument=null:(d.argument=this.parseExpression(),this.semicolon()),this.finishNode(d,"ReturnStatement")}parseSwitchStatement(d){this.next(),d.discriminant=this.parseHeaderExpression();let a=d.cases=[];this.expect(5),this.state.labels.push(Va),this.scope.enter(0);let m;for(let S;!this.match(8);)if(this.match(61)||this.match(65)){let $=this.match(61);m&&this.finishNode(m,"SwitchCase"),a.push(m=this.startNode()),m.consequent=[],this.next(),$?m.test=this.parseExpression():(S&&this.raise(rt.MultipleDefaultsInSwitch,this.state.lastTokStartLoc),S=!0,m.test=null),this.expect(14)}else m?m.consequent.push(this.parseStatementListItem()):this.unexpected();return this.scope.exit(),m&&this.finishNode(m,"SwitchCase"),this.next(),this.state.labels.pop(),this.finishNode(d,"SwitchStatement")}parseThrowStatement(d){return this.next(),this.hasPrecedingLineBreak()&&this.raise(rt.NewlineAfterThrow,this.state.lastTokEndLoc),d.argument=this.parseExpression(),this.semicolon(),this.finishNode(d,"ThrowStatement")}parseCatchClauseParam(){let d=this.parseBindingAtom();return this.scope.enter(this.options.annexB&&d.type==="Identifier"?8:0),this.checkLVal(d,{in:{type:"CatchClause"},binding:9}),d}parseTryStatement(d){if(this.next(),d.block=this.parseBlock(),d.handler=null,this.match(62)){let a=this.startNode();this.next(),this.match(10)?(this.expect(10),a.param=this.parseCatchClauseParam(),this.expect(11)):(a.param=null,this.scope.enter(0)),a.body=this.withSmartMixTopicForbiddingContext(()=>this.parseBlock(!1,!1)),this.scope.exit(),d.handler=this.finishNode(a,"CatchClause")}return d.finalizer=this.eat(67)?this.parseBlock():null,!d.handler&&!d.finalizer&&this.raise(rt.NoCatchOrFinally,d),this.finishNode(d,"TryStatement")}parseVarStatement(d,a,m=!1){return this.next(),this.parseVar(d,!1,a,m),this.semicolon(),this.finishNode(d,"VariableDeclaration")}parseWhileStatement(d){return this.next(),d.test=this.parseHeaderExpression(),this.state.labels.push(Cl),d.body=this.withSmartMixTopicForbiddingContext(()=>this.parseStatement()),this.state.labels.pop(),this.finishNode(d,"WhileStatement")}parseWithStatement(d){return this.state.strict&&this.raise(rt.StrictWith,this.state.startLoc),this.next(),d.object=this.parseHeaderExpression(),d.body=this.withSmartMixTopicForbiddingContext(()=>this.parseStatement()),this.finishNode(d,"WithStatement")}parseEmptyStatement(d){return this.next(),this.finishNode(d,"EmptyStatement")}parseLabeledStatement(d,a,m,S){for(let ne of this.state.labels)ne.name===a&&this.raise(rt.LabelRedeclaration,m,{labelName:a});let $=ko(this.state.type)?1:this.match(71)?2:null;for(let ne=this.state.labels.length-1;ne>=0;ne--){let ve=this.state.labels[ne];if(ve.statementStart===d.start)ve.statementStart=this.state.start,ve.kind=$;else break}return this.state.labels.push({name:a,kind:$,statementStart:this.state.start}),d.body=S&8?this.parseStatementOrSloppyAnnexBFunctionDeclaration(!0):this.parseStatement(),this.state.labels.pop(),d.label=m,this.finishNode(d,"LabeledStatement")}parseExpressionStatement(d,a,m){return d.expression=a,this.semicolon(),this.finishNode(d,"ExpressionStatement")}parseBlock(d=!1,a=!0,m){let S=this.startNode();return d&&this.state.strictErrors.clear(),this.expect(5),a&&this.scope.enter(0),this.parseBlockBody(S,d,!1,8,m),a&&this.scope.exit(),this.finishNode(S,"BlockStatement")}isValidDirective(d){return d.type==="ExpressionStatement"&&d.expression.type==="StringLiteral"&&!d.expression.extra.parenthesized}parseBlockBody(d,a,m,S,$){let ne=d.body=[],ve=d.directives=[];this.parseBlockOrModuleBlockBody(ne,a?ve:void 0,m,S,$)}parseBlockOrModuleBlockBody(d,a,m,S,$){let ne=this.state.strict,ve=!1,qe=!1;for(;!this.match(S);){let ct=m?this.parseModuleItem():this.parseStatementListItem();if(a&&!qe){if(this.isValidDirective(ct)){let at=this.stmtToDirective(ct);a.push(at),!ve&&at.value.value==="use strict"&&(ve=!0,this.setStrict(!0));continue}qe=!0,this.state.strictErrors.clear()}d.push(ct)}$==null||$.call(this,ve),ne||this.setStrict(!1),this.next()}parseFor(d,a){return d.init=a,this.semicolon(!1),d.test=this.match(13)?null:this.parseExpression(),this.semicolon(!1),d.update=this.match(11)?null:this.parseExpression(),this.expect(11),d.body=this.withSmartMixTopicForbiddingContext(()=>this.parseStatement()),this.scope.exit(),this.state.labels.pop(),this.finishNode(d,"ForStatement")}parseForIn(d,a,m){let S=this.match(58);return this.next(),S?m!==null&&this.unexpected(m):d.await=m!==null,a.type==="VariableDeclaration"&&a.declarations[0].init!=null&&(!S||!this.options.annexB||this.state.strict||a.kind!=="var"||a.declarations[0].id.type!=="Identifier")&&this.raise(rt.ForInOfLoopInitializer,a,{type:S?"ForInStatement":"ForOfStatement"}),a.type==="AssignmentPattern"&&this.raise(rt.InvalidLhs,a,{ancestor:{type:"ForStatement"}}),d.left=a,d.right=S?this.parseExpression():this.parseMaybeAssignAllowIn(),this.expect(11),d.body=this.withSmartMixTopicForbiddingContext(()=>this.parseStatement()),this.scope.exit(),this.state.labels.pop(),this.finishNode(d,S?"ForInStatement":"ForOfStatement")}parseVar(d,a,m,S=!1){let $=d.declarations=[];for(d.kind=m;;){let ne=this.startNode();if(this.parseVarId(ne,m),ne.init=this.eat(29)?a?this.parseMaybeAssignDisallowIn():this.parseMaybeAssignAllowIn():null,ne.init===null&&!S&&(ne.id.type!=="Identifier"&&!(a&&(this.match(58)||this.isContextual(102)))?this.raise(rt.DeclarationMissingInitializer,this.state.lastTokEndLoc,{kind:"destructuring"}):m==="const"&&!(this.match(58)||this.isContextual(102))&&this.raise(rt.DeclarationMissingInitializer,this.state.lastTokEndLoc,{kind:"const"})),$.push(this.finishNode(ne,"VariableDeclarator")),!this.eat(12))break}return d}parseVarId(d,a){let m=this.parseBindingAtom();this.checkLVal(m,{in:{type:"VariableDeclarator"},binding:a==="var"?5:8201}),d.id=m}parseAsyncFunctionExpression(d){return this.parseFunction(d,8)}parseFunction(d,a=0){let m=a&2,S=!!(a&1),$=S&&!(a&4),ne=!!(a&8);this.initFunction(d,ne),this.match(55)&&(m&&this.raise(rt.GeneratorInSingleStatementContext,this.state.startLoc),this.next(),d.generator=!0),S&&(d.id=this.parseFunctionId($));let ve=this.state.maybeInArrowParameters;return this.state.maybeInArrowParameters=!1,this.scope.enter(2),this.prodParam.enter(zo(ne,d.generator)),S||(d.id=this.parseFunctionId()),this.parseFunctionParams(d,!1),this.withSmartMixTopicForbiddingContext(()=>{this.parseFunctionBodyAndFinish(d,S?"FunctionDeclaration":"FunctionExpression")}),this.prodParam.exit(),this.scope.exit(),S&&!m&&this.registerFunctionStatementId(d),this.state.maybeInArrowParameters=ve,d}parseFunctionId(d){return d||Xt(this.state.type)?this.parseIdentifier():null}parseFunctionParams(d,a){this.expect(10),this.expressionScope.enter(or()),d.params=this.parseBindingList(11,41,2|(a?4:0)),this.expressionScope.exit()}registerFunctionStatementId(d){d.id&&this.scope.declareName(d.id.name,!this.options.annexB||this.state.strict||d.generator||d.async?this.scope.treatFunctionsAsVar?5:8201:17,d.id.loc.start)}parseClass(d,a,m){this.next();let S=this.state.strict;return this.state.strict=!0,this.parseClassId(d,a,m),this.parseClassSuper(d),d.body=this.parseClassBody(!!d.superClass,S),this.finishNode(d,a?"ClassDeclaration":"ClassExpression")}isClassProperty(){return this.match(29)||this.match(13)||this.match(8)}isClassMethod(){return this.match(10)}isNonstaticConstructor(d){return!d.computed&&!d.static&&(d.key.name==="constructor"||d.key.value==="constructor")}parseClassBody(d,a){this.classScope.enter();let m={hadConstructor:!1,hadSuperClass:d},S=[],$=this.startNode();if($.body=[],this.expect(5),this.withSmartMixTopicForbiddingContext(()=>{for(;!this.match(8);){if(this.eat(13)){if(S.length>0)throw this.raise(rt.DecoratorSemicolon,this.state.lastTokEndLoc);continue}if(this.match(26)){S.push(this.parseDecorator());continue}let ne=this.startNode();S.length&&(ne.decorators=S,this.resetStartLocationFromNode(ne,S[0]),S=[]),this.parseClassMember($,ne,m),ne.kind==="constructor"&&ne.decorators&&ne.decorators.length>0&&this.raise(rt.DecoratorConstructor,ne)}}),this.state.strict=a,this.next(),S.length)throw this.raise(rt.TrailingDecorator,this.state.startLoc);return this.classScope.exit(),this.finishNode($,"ClassBody")}parseClassMemberFromModifier(d,a){let m=this.parseIdentifier(!0);if(this.isClassMethod()){let S=a;return S.kind="method",S.computed=!1,S.key=m,S.static=!1,this.pushClassMethod(d,S,!1,!1,!1,!1),!0}else if(this.isClassProperty()){let S=a;return S.computed=!1,S.key=m,S.static=!1,d.body.push(this.parseClassProperty(S)),!0}return this.resetPreviousNodeTrailingComments(m),!1}parseClassMember(d,a,m){let S=this.isContextual(106);if(S){if(this.parseClassMemberFromModifier(d,a))return;if(this.eat(5)){this.parseClassStaticBlock(d,a);return}}this.parseClassMemberWithIsStatic(d,a,m,S)}parseClassMemberWithIsStatic(d,a,m,S){let $=a,ne=a,ve=a,qe=a,ct=a,at=$,On=$;if(a.static=S,this.parsePropertyNamePrefixOperator(a),this.eat(55)){at.kind="method";let Zs=this.match(138);if(this.parseClassElementName(at),Zs){this.pushClassPrivateMethod(d,ne,!0,!1);return}this.isNonstaticConstructor($)&&this.raise(rt.ConstructorIsGenerator,$.key),this.pushClassMethod(d,$,!0,!1,!1,!1);return}let ui=Xt(this.state.type)&&!this.state.containsEsc,Yi=this.match(138),ji=this.parseClassElementName(a),Ls=this.state.startLoc;if(this.parsePostMemberNameModifiers(On),this.isClassMethod()){if(at.kind="method",Yi){this.pushClassPrivateMethod(d,ne,!1,!1);return}let Zs=this.isNonstaticConstructor($),ea=!1;Zs&&($.kind="constructor",m.hadConstructor&&!this.hasPlugin("typescript")&&this.raise(rt.DuplicateConstructor,ji),Zs&&this.hasPlugin("typescript")&&a.override&&this.raise(rt.OverrideOnConstructor,ji),m.hadConstructor=!0,ea=m.hadSuperClass),this.pushClassMethod(d,$,!1,!1,Zs,ea)}else if(this.isClassProperty())Yi?this.pushClassPrivateProperty(d,qe):this.pushClassProperty(d,ve);else if(ui&&ji.name==="async"&&!this.isLineTerminator()){this.resetPreviousNodeTrailingComments(ji);let Zs=this.eat(55);On.optional&&this.unexpected(Ls),at.kind="method";let ea=this.match(138);this.parseClassElementName(at),this.parsePostMemberNameModifiers(On),ea?this.pushClassPrivateMethod(d,ne,Zs,!0):(this.isNonstaticConstructor($)&&this.raise(rt.ConstructorIsAsync,$.key),this.pushClassMethod(d,$,Zs,!0,!1,!1))}else if(ui&&(ji.name==="get"||ji.name==="set")&&!(this.match(55)&&this.isLineTerminator())){this.resetPreviousNodeTrailingComments(ji),at.kind=ji.name;let Zs=this.match(138);this.parseClassElementName($),Zs?this.pushClassPrivateMethod(d,ne,!1,!1):(this.isNonstaticConstructor($)&&this.raise(rt.ConstructorIsAccessor,$.key),this.pushClassMethod(d,$,!1,!1,!1,!1)),this.checkGetterSetterParams($)}else if(ui&&ji.name==="accessor"&&!this.isLineTerminator()){this.expectPlugin("decoratorAutoAccessors"),this.resetPreviousNodeTrailingComments(ji);let Zs=this.match(138);this.parseClassElementName(ve),this.pushClassAccessorProperty(d,ct,Zs)}else this.isLineTerminator()?Yi?this.pushClassPrivateProperty(d,qe):this.pushClassProperty(d,ve):this.unexpected()}parseClassElementName(d){let{type:a,value:m}=this.state;if((a===132||a===133)&&d.static&&m==="prototype"&&this.raise(rt.StaticPrototype,this.state.startLoc),a===138){m==="constructor"&&this.raise(rt.ConstructorClassPrivateField,this.state.startLoc);let S=this.parsePrivateName();return d.key=S,S}return this.parsePropertyName(d)}parseClassStaticBlock(d,a){var m;this.scope.enter(208);let S=this.state.labels;this.state.labels=[],this.prodParam.enter(0);let $=a.body=[];this.parseBlockOrModuleBlockBody($,void 0,!1,8),this.prodParam.exit(),this.scope.exit(),this.state.labels=S,d.body.push(this.finishNode(a,"StaticBlock")),(m=a.decorators)!=null&&m.length&&this.raise(rt.DecoratorStaticBlock,a)}pushClassProperty(d,a){!a.computed&&(a.key.name==="constructor"||a.key.value==="constructor")&&this.raise(rt.ConstructorClassField,a.key),d.body.push(this.parseClassProperty(a))}pushClassPrivateProperty(d,a){let m=this.parseClassPrivateProperty(a);d.body.push(m),this.classScope.declarePrivateName(this.getPrivateNameSV(m.key),0,m.key.loc.start)}pushClassAccessorProperty(d,a,m){if(!m&&!a.computed){let $=a.key;($.name==="constructor"||$.value==="constructor")&&this.raise(rt.ConstructorClassField,$)}let S=this.parseClassAccessorProperty(a);d.body.push(S),m&&this.classScope.declarePrivateName(this.getPrivateNameSV(S.key),0,S.key.loc.start)}pushClassMethod(d,a,m,S,$,ne){d.body.push(this.parseMethod(a,m,S,$,ne,"ClassMethod",!0))}pushClassPrivateMethod(d,a,m,S){let $=this.parseMethod(a,m,S,!1,!1,"ClassPrivateMethod",!0);d.body.push($);let ne=$.kind==="get"?$.static?6:2:$.kind==="set"?$.static?5:1:0;this.declareClassPrivateMethodInScope($,ne)}declareClassPrivateMethodInScope(d,a){this.classScope.declarePrivateName(this.getPrivateNameSV(d.key),a,d.key.loc.start)}parsePostMemberNameModifiers(d){}parseClassPrivateProperty(d){return this.parseInitializer(d),this.semicolon(),this.finishNode(d,"ClassPrivateProperty")}parseClassProperty(d){return this.parseInitializer(d),this.semicolon(),this.finishNode(d,"ClassProperty")}parseClassAccessorProperty(d){return this.parseInitializer(d),this.semicolon(),this.finishNode(d,"ClassAccessorProperty")}parseInitializer(d){this.scope.enter(80),this.expressionScope.enter(Ri()),this.prodParam.enter(0),d.value=this.eat(29)?this.parseMaybeAssignAllowIn():null,this.expressionScope.exit(),this.prodParam.exit(),this.scope.exit()}parseClassId(d,a,m,S=8331){if(Xt(this.state.type))d.id=this.parseIdentifier(),a&&this.declareNameFromIdentifier(d.id,S);else if(m||!a)d.id=null;else throw this.raise(rt.MissingClassName,this.state.startLoc)}parseClassSuper(d){d.superClass=this.eat(81)?this.parseExprSubscripts():null}parseExport(d,a){let m=this.parseMaybeImportPhase(d,!0),S=this.maybeParseExportDefaultSpecifier(d,m),$=!S||this.eat(12),ne=$&&this.eatExportStar(d),ve=ne&&this.maybeParseExportNamespaceSpecifier(d),qe=$&&(!ve||this.eat(12)),ct=S||ne;if(ne&&!ve){if(S&&this.unexpected(),a)throw this.raise(rt.UnsupportedDecoratorExport,d);return this.parseExportFrom(d,!0),this.finishNode(d,"ExportAllDeclaration")}let at=this.maybeParseExportNamedSpecifiers(d);S&&$&&!ne&&!at&&this.unexpected(null,5),ve&&qe&&this.unexpected(null,98);let On;if(ct||at){if(On=!1,a)throw this.raise(rt.UnsupportedDecoratorExport,d);this.parseExportFrom(d,ct)}else On=this.maybeParseExportDeclaration(d);if(ct||at||On){var ui;let Yi=d;if(this.checkExport(Yi,!0,!1,!!Yi.source),((ui=Yi.declaration)==null?void 0:ui.type)==="ClassDeclaration")this.maybeTakeDecorators(a,Yi.declaration,Yi);else if(a)throw this.raise(rt.UnsupportedDecoratorExport,d);return this.finishNode(Yi,"ExportNamedDeclaration")}if(this.eat(65)){let Yi=d,ji=this.parseExportDefaultExpression();if(Yi.declaration=ji,ji.type==="ClassDeclaration")this.maybeTakeDecorators(a,ji,Yi);else if(a)throw this.raise(rt.UnsupportedDecoratorExport,d);return this.checkExport(Yi,!0,!0),this.finishNode(Yi,"ExportDefaultDeclaration")}this.unexpected(null,5)}eatExportStar(d){return this.eat(55)}maybeParseExportDefaultSpecifier(d,a){if(a||this.isExportDefaultSpecifier()){this.expectPlugin("exportDefaultFrom",a==null?void 0:a.loc.start);let m=a||this.parseIdentifier(!0),S=this.startNodeAtNode(m);return S.exported=m,d.specifiers=[this.finishNode(S,"ExportDefaultSpecifier")],!0}return!1}maybeParseExportNamespaceSpecifier(d){if(this.isContextual(93)){d.specifiers||(d.specifiers=[]);let a=this.startNodeAt(this.state.lastTokStartLoc);return this.next(),a.exported=this.parseModuleExportName(),d.specifiers.push(this.finishNode(a,"ExportNamespaceSpecifier")),!0}return!1}maybeParseExportNamedSpecifiers(d){if(this.match(5)){d.specifiers||(d.specifiers=[]);let a=d.exportKind==="type";return d.specifiers.push(...this.parseExportSpecifiers(a)),d.source=null,d.declaration=null,this.hasPlugin("importAssertions")&&(d.assertions=[]),!0}return!1}maybeParseExportDeclaration(d){return this.shouldParseExportDeclaration()?(d.specifiers=[],d.source=null,this.hasPlugin("importAssertions")&&(d.assertions=[]),d.declaration=this.parseExportDeclaration(d),!0):!1}isAsyncFunction(){if(!this.isContextual(95))return!1;let d=this.nextTokenInLineStart();return this.isUnparsedContextual(d,"function")}parseExportDefaultExpression(){let d=this.startNode();if(this.match(68))return this.next(),this.parseFunction(d,5);if(this.isAsyncFunction())return this.next(),this.next(),this.parseFunction(d,13);if(this.match(80))return this.parseClass(d,!0,!0);if(this.match(26))return this.hasPlugin("decorators")&&this.getPluginOption("decorators","decoratorsBeforeExport")===!0&&this.raise(rt.DecoratorBeforeExport,this.state.startLoc),this.parseClass(this.maybeTakeDecorators(this.parseDecorators(!1),this.startNode()),!0,!0);if(this.match(75)||this.match(74)||this.isLet())throw this.raise(rt.UnsupportedDefaultExport,this.state.startLoc);let a=this.parseMaybeAssignAllowIn();return this.semicolon(),a}parseExportDeclaration(d){return this.match(80)?this.parseClass(this.startNode(),!0,!1):this.parseStatementListItem()}isExportDefaultSpecifier(){let{type:d}=this.state;if(Xt(d)){if(d===95&&!this.state.containsEsc||d===100)return!1;if((d===130||d===129)&&!this.state.containsEsc){let{type:S}=this.lookahead();if(Xt(S)&&S!==98||S===5)return this.expectOnePlugin(["flow","typescript"]),!1}}else if(!this.match(65))return!1;let a=this.nextTokenStart(),m=this.isUnparsedContextual(a,"from");if(this.input.charCodeAt(a)===44||Xt(this.state.type)&&m)return!0;if(this.match(65)&&m){let S=this.input.charCodeAt(this.nextTokenStartSince(a+4));return S===34||S===39}return!1}parseExportFrom(d,a){this.eatContextual(98)?(d.source=this.parseImportSource(),this.checkExport(d),this.maybeParseImportAttributes(d),this.checkJSONModuleImport(d)):a&&this.unexpected(),this.semicolon()}shouldParseExportDeclaration(){let{type:d}=this.state;return d===26&&(this.expectOnePlugin(["decorators","decorators-legacy"]),this.hasPlugin("decorators"))?(this.getPluginOption("decorators","decoratorsBeforeExport")===!0&&this.raise(rt.DecoratorBeforeExport,this.state.startLoc),!0):d===74||d===75||d===68||d===80||this.isLet()||this.isAsyncFunction()}checkExport(d,a,m,S){if(a){var $;if(m){if(this.checkDuplicateExports(d,"default"),this.hasPlugin("exportDefaultFrom")){var ne;let ve=d.declaration;ve.type==="Identifier"&&ve.name==="from"&&ve.end-ve.start===4&&!((ne=ve.extra)!=null&&ne.parenthesized)&&this.raise(rt.ExportDefaultFromAsIdentifier,ve)}}else if(($=d.specifiers)!=null&&$.length)for(let ve of d.specifiers){let{exported:qe}=ve,ct=qe.type==="Identifier"?qe.name:qe.value;if(this.checkDuplicateExports(ve,ct),!S&&ve.local){let{local:at}=ve;at.type!=="Identifier"?this.raise(rt.ExportBindingIsString,ve,{localName:at.value,exportName:ct}):(this.checkReservedWord(at.name,at.loc.start,!0,!1),this.scope.checkLocalExport(at))}}else if(d.declaration){if(d.declaration.type==="FunctionDeclaration"||d.declaration.type==="ClassDeclaration"){let ve=d.declaration.id;if(!ve)throw new Error("Assertion failure");this.checkDuplicateExports(d,ve.name)}else if(d.declaration.type==="VariableDeclaration")for(let ve of d.declaration.declarations)this.checkDeclaration(ve.id)}}}checkDeclaration(d){if(d.type==="Identifier")this.checkDuplicateExports(d,d.name);else if(d.type==="ObjectPattern")for(let a of d.properties)this.checkDeclaration(a);else if(d.type==="ArrayPattern")for(let a of d.elements)a&&this.checkDeclaration(a);else d.type==="ObjectProperty"?this.checkDeclaration(d.value):d.type==="RestElement"?this.checkDeclaration(d.argument):d.type==="AssignmentPattern"&&this.checkDeclaration(d.left)}checkDuplicateExports(d,a){this.exportedIdentifiers.has(a)&&(a==="default"?this.raise(rt.DuplicateDefaultExport,d):this.raise(rt.DuplicateExport,d,{exportName:a})),this.exportedIdentifiers.add(a)}parseExportSpecifiers(d){let a=[],m=!0;for(this.expect(5);!this.eat(8);){if(m)m=!1;else if(this.expect(12),this.eat(8))break;let S=this.isContextual(130),$=this.match(133),ne=this.startNode();ne.local=this.parseModuleExportName(),a.push(this.parseExportSpecifier(ne,$,d,S))}return a}parseExportSpecifier(d,a,m,S){return this.eatContextual(93)?d.exported=this.parseModuleExportName():a?d.exported=Es(d.local):d.exported||(d.exported=eo(d.local)),this.finishNode(d,"ExportSpecifier")}parseModuleExportName(){if(this.match(133)){let d=this.parseStringLiteral(this.state.value),a=d.value.match(Cs);return a&&this.raise(rt.ModuleExportNameHasLoneSurrogate,d,{surrogateCharCode:a[0].charCodeAt(0)}),d}return this.parseIdentifier(!0)}isJSONModuleImport(d){return d.assertions!=null?d.assertions.some(({key:a,value:m})=>m.value==="json"&&(a.type==="Identifier"?a.name==="type":a.value==="type")):!1}checkImportReflection(d){let{specifiers:a}=d,m=a.length===1?a[0].type:null;if(d.phase==="source")m!=="ImportDefaultSpecifier"&&this.raise(rt.SourcePhaseImportRequiresDefault,a[0].loc.start);else if(d.phase==="defer")m!=="ImportNamespaceSpecifier"&&this.raise(rt.DeferImportRequiresNamespace,a[0].loc.start);else if(d.module){var S;m!=="ImportDefaultSpecifier"&&this.raise(rt.ImportReflectionNotBinding,a[0].loc.start),((S=d.assertions)==null?void 0:S.length)>0&&this.raise(rt.ImportReflectionHasAssertion,a[0].loc.start)}}checkJSONModuleImport(d){if(this.isJSONModuleImport(d)&&d.type!=="ExportAllDeclaration"){let{specifiers:a}=d;if(a!=null){let m=a.find(S=>{let $;if(S.type==="ExportSpecifier"?$=S.local:S.type==="ImportSpecifier"&&($=S.imported),$!==void 0)return $.type==="Identifier"?$.name!=="default":$.value!=="default"});m!==void 0&&this.raise(rt.ImportJSONBindingNotDefault,m.loc.start)}}}isPotentialImportPhase(d){return d?!1:this.isContextual(105)||this.isContextual(97)||this.isContextual(127)}applyImportPhase(d,a,m,S){a||(m==="module"?(this.expectPlugin("importReflection",S),d.module=!0):this.hasPlugin("importReflection")&&(d.module=!1),m==="source"?(this.expectPlugin("sourcePhaseImports",S),d.phase="source"):m==="defer"?(this.expectPlugin("deferredImportEvaluation",S),d.phase="defer"):this.hasPlugin("sourcePhaseImports")&&(d.phase=null))}parseMaybeImportPhase(d,a){if(!this.isPotentialImportPhase(a))return this.applyImportPhase(d,a,null),null;let m=this.parseIdentifier(!0),{type:S}=this.state;return(ri(S)?S!==98||this.lookaheadCharCode()===102:S!==12)?(this.resetPreviousIdentifierLeadingComments(m),this.applyImportPhase(d,a,m.name,m.loc.start),null):(this.applyImportPhase(d,a,null),m)}isPrecedingIdImportPhase(d){let{type:a}=this.state;return Xt(a)?a!==98||this.lookaheadCharCode()===102:a!==12}parseImport(d){return this.match(133)?this.parseImportSourceAndAttributes(d):this.parseImportSpecifiersAndAfter(d,this.parseMaybeImportPhase(d,!1))}parseImportSpecifiersAndAfter(d,a){d.specifiers=[];let m=!this.maybeParseDefaultImportSpecifier(d,a)||this.eat(12),S=m&&this.maybeParseStarImportSpecifier(d);return m&&!S&&this.parseNamedImportSpecifiers(d),this.expectContextual(98),this.parseImportSourceAndAttributes(d)}parseImportSourceAndAttributes(d){var a;return(a=d.specifiers)!=null||(d.specifiers=[]),d.source=this.parseImportSource(),this.maybeParseImportAttributes(d),this.checkImportReflection(d),this.checkJSONModuleImport(d),this.semicolon(),this.finishNode(d,"ImportDeclaration")}parseImportSource(){return this.match(133)||this.unexpected(),this.parseExprAtom()}parseImportSpecifierLocal(d,a,m){a.local=this.parseIdentifier(),d.specifiers.push(this.finishImportSpecifier(a,m))}finishImportSpecifier(d,a,m=8201){return this.checkLVal(d.local,{in:{type:a},binding:m}),this.finishNode(d,a)}parseImportAttributes(){this.expect(5);let d=[],a=new Set;do{if(this.match(8))break;let m=this.startNode(),S=this.state.value;if(a.has(S)&&this.raise(rt.ModuleAttributesWithDuplicateKeys,this.state.startLoc,{key:S}),a.add(S),this.match(133)?m.key=this.parseStringLiteral(S):m.key=this.parseIdentifier(!0),this.expect(14),!this.match(133))throw this.raise(rt.ModuleAttributeInvalidValue,this.state.startLoc);m.value=this.parseStringLiteral(this.state.value),d.push(this.finishNode(m,"ImportAttribute"))}while(this.eat(12));return this.expect(8),d}parseModuleAttributes(){let d=[],a=new Set;do{let m=this.startNode();if(m.key=this.parseIdentifier(!0),m.key.name!=="type"&&this.raise(rt.ModuleAttributeDifferentFromType,m.key),a.has(m.key.name)&&this.raise(rt.ModuleAttributesWithDuplicateKeys,m.key,{key:m.key.name}),a.add(m.key.name),this.expect(14),!this.match(133))throw this.raise(rt.ModuleAttributeInvalidValue,this.state.startLoc);m.value=this.parseStringLiteral(this.state.value),d.push(this.finishNode(m,"ImportAttribute"))}while(this.eat(12));return d}maybeParseImportAttributes(d){let a,m=!1;if(this.match(76)){if(this.hasPrecedingLineBreak()&&this.lookaheadCharCode()===40)return;this.next(),this.hasPlugin("moduleAttributes")?a=this.parseModuleAttributes():(this.expectImportAttributesPlugin(),a=this.parseImportAttributes()),m=!0}else if(this.isContextual(94)&&!this.hasPrecedingLineBreak())this.hasPlugin("importAttributes")?(this.getPluginOption("importAttributes","deprecatedAssertSyntax")!==!0&&this.raise(rt.ImportAttributesUseAssert,this.state.startLoc),this.addExtra(d,"deprecatedAssertSyntax",!0)):this.expectOnePlugin(["importAttributes","importAssertions"]),this.next(),a=this.parseImportAttributes();else if(this.hasPlugin("importAttributes")||this.hasPlugin("importAssertions"))a=[];else if(this.hasPlugin("moduleAttributes"))a=[];else return;!m&&this.hasPlugin("importAssertions")?d.assertions=a:d.attributes=a}maybeParseDefaultImportSpecifier(d,a){if(a){let m=this.startNodeAtNode(a);return m.local=a,d.specifiers.push(this.finishImportSpecifier(m,"ImportDefaultSpecifier")),!0}else if(ri(this.state.type))return this.parseImportSpecifierLocal(d,this.startNode(),"ImportDefaultSpecifier"),!0;return!1}maybeParseStarImportSpecifier(d){if(this.match(55)){let a=this.startNode();return this.next(),this.expectContextual(93),this.parseImportSpecifierLocal(d,a,"ImportNamespaceSpecifier"),!0}return!1}parseNamedImportSpecifiers(d){let a=!0;for(this.expect(5);!this.eat(8);){if(a)a=!1;else{if(this.eat(14))throw this.raise(rt.DestructureNamedImport,this.state.startLoc);if(this.expect(12),this.eat(8))break}let m=this.startNode(),S=this.match(133),$=this.isContextual(130);m.imported=this.parseModuleExportName();let ne=this.parseImportSpecifier(m,S,d.importKind==="type"||d.importKind==="typeof",$,void 0);d.specifiers.push(ne)}}parseImportSpecifier(d,a,m,S,$){if(this.eatContextual(93))d.local=this.parseIdentifier();else{let{imported:ne}=d;if(a)throw this.raise(rt.ImportBindingIsString,d,{importName:ne.value});this.checkReservedWord(ne.name,d.loc.start,!0,!0),d.local||(d.local=eo(ne))}return this.finishImportSpecifier(d,"ImportSpecifier",$)}isThisParam(d){return d.type==="Identifier"&&d.name==="this"}},yl=class extends Hs{constructor(d,a){d=ls(d),super(d,a),this.options=d,this.initializeScopes(),this.plugins=ra(this.options.plugins),this.filename=d.sourceFilename}getScopeHandler(){return Bt}parse(){this.enterInitialScopes();let d=this.startNode(),a=this.startNode();return this.nextToken(),d.errors=null,this.parseTopLevel(d,a),d.errors=this.state.errors,d.comments.length=this.state.commentsLen,d}};function ra(d){let a=new Map;for(let m of d){let[S,$]=Array.isArray(m)?m:[m,{}];a.has(S)||a.set(S,$||{})}return a}function Cu(d,a){var m;if(((m=a)==null?void 0:m.sourceType)==="unambiguous"){a=Object.assign({},a);try{a.sourceType="module";let S=jl(a,d),$=S.parse();if(S.sawUnambiguousESM)return $;if(S.ambiguousScriptDifferentAst)try{return a.sourceType="script",jl(a,d).parse()}catch(ne){}else $.program.sourceType="script";return $}catch(S){try{return a.sourceType="script",jl(a,d).parse()}catch($){}throw S}}else return jl(a,d).parse()}function iu(d,a){let m=jl(a,d);return m.options.strictMode&&(m.state.strict=!0),m.getExpression()}function Bu(d){let a={};for(let m of Object.keys(d))a[m]=Ro(d[m]);return a}var ru=Bu(Ft);function jl(d,a){let m=yl;return d!=null&&d.plugins&&(_a(d.plugins),m=Yr(d.plugins)),new m(d,a)}var Ru={};function Yr(d){let a=$o.filter($=>qo(d,$)),m=a.join("/"),S=Ru[m];if(!S){S=yl;for(let $ of a)S=Ga[$](S);Ru[m]=S}return S}re.parse=Cu,re.parseExpression=iu,re.tokTypes=ru}),gn=ii(re=>{"use strict";Object.defineProperty(re,"__esModule",{value:!0}),re.extract=xn,re.parse=mi,re.parseWithComments=vi,re.print=ws,re.strip=Tn;var P=/\*\/$/,V=/^\/\*\*?/,Y=/^\s*(\/\*\*?(.|\r?\n)*?\*\/)/,te=/(^|\s+)\/\/([^\r\n]*)/g,we=/^(\r?\n)+/,Ce=/(?:^|\r?\n) *(@[^\r\n]*?) *\r?\n *(?![^@\r\n]*\/\/[^]*)([^@\r\n\s][^@\r\n]+?) *\r?\n/g,We=/(?:^|\r?\n) *@(\S+) *([^\r\n]*)/g,Dt=/(\r?\n|^) *\* ?/g,jt=[];function xn(pr){let Fi=pr.match(Y);return Fi?Fi[0].trimLeft():""}function Tn(pr){let Fi=pr.match(Y);return Fi&&Fi[0]?pr.substring(Fi[0].length):pr}function mi(pr){return vi(pr).pragmas}function vi(pr){let Fi=`
`;pr=pr.replace(V,"").replace(P,"").replace(Dt,"$1");let rt="";for(;rt!==pr;)rt=pr,pr=pr.replace(Ce,`${Fi}$1 $2${Fi}`);pr=pr.replace(we,"").trimRight();let so=Object.create(null),To=pr.replace(We,"").replace(we,"").trimRight(),Os;for(;Os=We.exec(pr);){let ds=Os[2].replace(te,"");typeof so[Os[1]]=="string"||Array.isArray(so[Os[1]])?so[Os[1]]=jt.concat(so[Os[1]],ds):so[Os[1]]=ds}return{comments:To,pragmas:so}}function ws({comments:pr="",pragmas:Fi={}}){let rt=`
`,so="/**",To=" *",Os=" */",ds=Object.keys(Fi),Oo=ds.flatMap(wi=>ho(wi,Fi[wi])).map(wi=>`${To} ${wi}${rt}`).join("");if(!pr){if(ds.length===0)return"";if(ds.length===1&&!Array.isArray(Fi[ds[0]])){let wi=Fi[ds[0]];return`${so} ${ho(ds[0],wi)[0]}${Os}`}}let nr=pr.split(rt).map(wi=>`${To} ${wi}`).join(rt)+rt;return so+rt+(pr?nr:"")+(pr&&ds.length?To+rt:"")+Oo+Os}function ho(pr,Fi){return jt.concat(Fi).map(rt=>`@${pr} ${rt}`.trim())}}),Si={};Nn(Si,{parsers:()=>oa});var Ii=In(vn(),1);function Un(re){return(P,V,Y)=>{let te=!!(Y!=null&&Y.backwards);if(V===!1)return!1;let{length:we}=P,Ce=V;for(;Ce>=0&&Ce<we;){let We=P.charAt(Ce);if(re instanceof RegExp){if(!re.test(We))return Ce}else if(!re.includes(We))return Ce;te?Ce--:Ce++}return Ce===-1||Ce===we?Ce:!1}}var $t=Un(/\s/),qt=Un(" 	"),mr=Un(",; 	"),ss=Un(/[^\n\r]/);function Dr(re,P){if(P===!1)return!1;if(re.charAt(P)==="/"&&re.charAt(P+1)==="*"){for(let V=P+2;V<re.length;++V)if(re.charAt(V)==="*"&&re.charAt(V+1)==="/")return V+2}return P}var zs=Dr;function pi(re,P,V){let Y=!!(V!=null&&V.backwards);if(P===!1)return!1;let te=re.charAt(P);if(Y){if(re.charAt(P-1)==="\r"&&te===`
`)return P-2;if(te===`
`||te==="\r"||te==="\u2028"||te==="\u2029")return P-1}else{if(te==="\r"&&re.charAt(P+1)===`
`)return P+2;if(te===`
`||te==="\r"||te==="\u2028"||te==="\u2029")return P+1}return P}var vs=pi;function uo(re,P){return P===!1?!1:re.charAt(P)==="/"&&re.charAt(P+1)==="/"?ss(re,P):P}var cs=uo;function wr(re,P){let V=null,Y=P;for(;Y!==V;)V=Y,Y=qt(re,Y),Y=zs(re,Y),Y=cs(re,Y),Y=vs(re,Y);return Y}var jr=wr;function vr(re){let P=[];for(let V of re)try{return V()}catch(Y){P.push(Y)}throw Object.assign(new Error("All combinations failed"),{errors:P})}var qs=vr;function Is(re){if(!re.startsWith("#!"))return"";let P=re.indexOf(`
`);return P===-1?re:re.slice(0,P)}var ci=Is,le=(re,P,V)=>{if(!(re&&P==null))return Array.isArray(P)||typeof P=="string"?P[V<0?P.length+V:V]:P.at(V)},$e=le;function ze(re){return Array.isArray(re)&&re.length>0}var ee=ze;function Ze(re){var Ce,We;var P,V,Y;let te=(Ce=(P=re.range)==null?void 0:P[0])!=null?Ce:re.start,we=(Y=(We=(V=re.declaration)==null?void 0:V.decorators)!=null?We:re.decorators)==null?void 0:Y[0];return we?Math.min(Ze(we),te):te}function Ie(re){var V;var P;return(V=(P=re.range)==null?void 0:P[1])!=null?V:re.end}function Xe(re){let P=new Set(re);return V=>P.has(V==null?void 0:V.type)}var St=Xe,Tt=St(["Block","CommentBlock","MultiLine"]),Bn=Tt;function Fn(re){let P=`*${re.value}*`.split(`
`);return P.length>1&&P.every(V=>V.trimStart()[0]==="*")}var Qn=Fn;function hi(re){return Bn(re)&&re.value[0]==="*"&&/@(?:type|satisfies)\b/.test(re.value)}var Ki=hi,Vn=null;function fs(re){if(Vn!==null&&typeof Vn.property){let P=Vn;return Vn=fs.prototype=null,P}return Vn=fs.prototype=re!=null?re:Object.create(null),new fs}var wo=10;for(let re=0;re<=wo;re++)fs();function Ao(re){return fs(re)}function en(re,P="type"){Ao(re);function V(Y){let te=Y[P],we=re[te];if(!Array.isArray(we))throw Object.assign(new Error(`Missing visitor keys for '${te}'.`),{node:Y});return we}return V}var fe=en,Fe={ArrayExpression:["elements"],AssignmentExpression:["left","right"],BinaryExpression:["left","right"],InterpreterDirective:[],Directive:["value"],DirectiveLiteral:[],BlockStatement:["directives","body"],BreakStatement:["label"],CallExpression:["callee","arguments","typeParameters","typeArguments"],CatchClause:["param","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DoWhileStatement:["test","body"],EmptyStatement:[],ExpressionStatement:["expression"],File:["program"],ForInStatement:["left","right","body"],ForStatement:["init","test","update","body"],FunctionDeclaration:["id","params","body","returnType","typeParameters","predicate"],FunctionExpression:["id","params","body","returnType","typeParameters"],Identifier:["typeAnnotation","decorators"],IfStatement:["test","consequent","alternate"],LabeledStatement:["label","body"],StringLiteral:[],NumericLiteral:[],NullLiteral:[],BooleanLiteral:[],RegExpLiteral:[],LogicalExpression:["left","right"],MemberExpression:["object","property"],NewExpression:["callee","arguments","typeParameters","typeArguments"],Program:["directives","body"],ObjectExpression:["properties"],ObjectMethod:["key","params","body","decorators","returnType","typeParameters"],ObjectProperty:["key","value","decorators"],RestElement:["argument","typeAnnotation","decorators"],ReturnStatement:["argument"],SequenceExpression:["expressions"],ParenthesizedExpression:["expression"],SwitchCase:["test","consequent"],SwitchStatement:["discriminant","cases"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],AssignmentPattern:["left","right","decorators","typeAnnotation"],ArrayPattern:["elements","typeAnnotation","decorators"],ArrowFunctionExpression:["params","body","returnType","typeParameters","predicate"],ClassBody:["body"],ClassExpression:["id","body","superClass","mixins","typeParameters","superTypeParameters","implements","decorators","superTypeArguments"],ClassDeclaration:["id","body","superClass","mixins","typeParameters","superTypeParameters","implements","decorators","superTypeArguments"],ExportAllDeclaration:["source","attributes","exported"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source","attributes"],ExportSpecifier:["local","exported"],ForOfStatement:["left","right","body"],ImportDeclaration:["specifiers","source","attributes"],ImportDefaultSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["local","imported"],ImportExpression:["source","options","attributes"],MetaProperty:["meta","property"],ClassMethod:["key","params","body","decorators","returnType","typeParameters"],ObjectPattern:["properties","typeAnnotation","decorators"],SpreadElement:["argument"],Super:[],TaggedTemplateExpression:["tag","quasi","typeParameters","typeArguments"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],YieldExpression:["argument"],AwaitExpression:["argument"],Import:[],BigIntLiteral:[],ExportNamespaceSpecifier:["exported"],OptionalMemberExpression:["object","property"],OptionalCallExpression:["callee","arguments","typeParameters","typeArguments"],ClassProperty:["key","value","typeAnnotation","decorators","variance"],ClassAccessorProperty:["key","value","typeAnnotation","decorators"],ClassPrivateProperty:["key","value","decorators","typeAnnotation","variance"],ClassPrivateMethod:["key","params","body","decorators","returnType","typeParameters"],PrivateName:["id"],StaticBlock:["body"],AnyTypeAnnotation:[],ArrayTypeAnnotation:["elementType"],BooleanTypeAnnotation:[],BooleanLiteralTypeAnnotation:[],NullLiteralTypeAnnotation:[],ClassImplements:["id","typeParameters"],DeclareClass:["id","typeParameters","extends","mixins","implements","body"],DeclareFunction:["id","predicate"],DeclareInterface:["id","typeParameters","extends","body"],DeclareModule:["id","body"],DeclareModuleExports:["typeAnnotation"],DeclareTypeAlias:["id","typeParameters","right"],DeclareOpaqueType:["id","typeParameters","supertype"],DeclareVariable:["id"],DeclareExportDeclaration:["declaration","specifiers","source"],DeclareExportAllDeclaration:["source"],DeclaredPredicate:["value"],ExistsTypeAnnotation:[],FunctionTypeAnnotation:["typeParameters","params","rest","returnType","this"],FunctionTypeParam:["name","typeAnnotation"],GenericTypeAnnotation:["id","typeParameters"],InferredPredicate:[],InterfaceExtends:["id","typeParameters"],InterfaceDeclaration:["id","typeParameters","extends","body"],InterfaceTypeAnnotation:["extends","body"],IntersectionTypeAnnotation:["types"],MixedTypeAnnotation:[],EmptyTypeAnnotation:[],NullableTypeAnnotation:["typeAnnotation"],NumberLiteralTypeAnnotation:[],NumberTypeAnnotation:[],ObjectTypeAnnotation:["properties","indexers","callProperties","internalSlots"],ObjectTypeInternalSlot:["id","value","optional","static","method"],ObjectTypeCallProperty:["value"],ObjectTypeIndexer:["id","key","value","variance"],ObjectTypeProperty:["key","value","variance"],ObjectTypeSpreadProperty:["argument"],OpaqueType:["id","typeParameters","supertype","impltype"],QualifiedTypeIdentifier:["id","qualification"],StringLiteralTypeAnnotation:[],StringTypeAnnotation:[],SymbolTypeAnnotation:[],ThisTypeAnnotation:[],TupleTypeAnnotation:["types","elementTypes"],TypeofTypeAnnotation:["argument","typeArguments"],TypeAlias:["id","typeParameters","right"],TypeAnnotation:["typeAnnotation"],TypeCastExpression:["expression","typeAnnotation"],TypeParameter:["bound","default","variance"],TypeParameterDeclaration:["params"],TypeParameterInstantiation:["params"],UnionTypeAnnotation:["types"],Variance:[],VoidTypeAnnotation:[],EnumDeclaration:["id","body"],EnumBooleanBody:["members"],EnumNumberBody:["members"],EnumStringBody:["members"],EnumSymbolBody:["members"],EnumBooleanMember:["id","init"],EnumNumberMember:["id","init"],EnumStringMember:["id","init"],EnumDefaultedMember:["id"],IndexedAccessType:["objectType","indexType"],OptionalIndexedAccessType:["objectType","indexType"],JSXAttribute:["name","value"],JSXClosingElement:["name"],JSXElement:["openingElement","children","closingElement"],JSXEmptyExpression:[],JSXExpressionContainer:["expression"],JSXSpreadChild:["expression"],JSXIdentifier:[],JSXMemberExpression:["object","property"],JSXNamespacedName:["namespace","name"],JSXOpeningElement:["name","attributes","typeArguments","typeParameters"],JSXSpreadAttribute:["argument"],JSXText:[],JSXFragment:["openingFragment","children","closingFragment"],JSXOpeningFragment:[],JSXClosingFragment:[],Noop:[],Placeholder:[],V8IntrinsicIdentifier:[],ArgumentPlaceholder:[],BindExpression:["object","callee"],ImportAttribute:["key","value"],Decorator:["expression"],DoExpression:["body"],ExportDefaultSpecifier:["exported"],RecordExpression:["properties"],TupleExpression:["elements"],DecimalLiteral:[],ModuleExpression:["body"],TopicReference:[],PipelineTopicExpression:["expression"],PipelineBareFunction:["callee"],PipelinePrimaryTopicReference:[],TSParameterProperty:["parameter","decorators"],TSDeclareFunction:["id","typeParameters","params","returnType","body"],TSDeclareMethod:["decorators","key","typeParameters","params","returnType"],TSQualifiedName:["left","right"],TSCallSignatureDeclaration:["typeParameters","parameters","typeAnnotation","params","returnType"],TSConstructSignatureDeclaration:["typeParameters","parameters","typeAnnotation","params","returnType"],TSPropertySignature:["key","typeAnnotation"],TSMethodSignature:["key","typeParameters","parameters","typeAnnotation","params","returnType"],TSIndexSignature:["parameters","typeAnnotation"],TSAnyKeyword:[],TSBooleanKeyword:[],TSBigIntKeyword:[],TSIntrinsicKeyword:[],TSNeverKeyword:[],TSNullKeyword:[],TSNumberKeyword:[],TSObjectKeyword:[],TSStringKeyword:[],TSSymbolKeyword:[],TSUndefinedKeyword:[],TSUnknownKeyword:[],TSVoidKeyword:[],TSThisType:[],TSFunctionType:["typeParameters","parameters","typeAnnotation","params","returnType"],TSConstructorType:["typeParameters","parameters","typeAnnotation","params","returnType"],TSTypeReference:["typeName","typeParameters","typeArguments"],TSTypePredicate:["parameterName","typeAnnotation"],TSTypeQuery:["exprName","typeParameters","typeArguments"],TSTypeLiteral:["members"],TSArrayType:["elementType"],TSTupleType:["elementTypes"],TSOptionalType:["typeAnnotation"],TSRestType:["typeAnnotation"],TSNamedTupleMember:["label","elementType"],TSUnionType:["types"],TSIntersectionType:["types"],TSConditionalType:["checkType","extendsType","trueType","falseType"],TSInferType:["typeParameter"],TSParenthesizedType:["typeAnnotation"],TSTypeOperator:["typeAnnotation"],TSIndexedAccessType:["objectType","indexType"],TSMappedType:["typeParameter","typeAnnotation","nameType"],TSLiteralType:["literal"],TSExpressionWithTypeArguments:["expression","typeParameters"],TSInterfaceDeclaration:["id","typeParameters","extends","body"],TSInterfaceBody:["body"],TSTypeAliasDeclaration:["id","typeParameters","typeAnnotation"],TSInstantiationExpression:["expression","typeParameters","typeArguments"],TSAsExpression:["expression","typeAnnotation"],TSSatisfiesExpression:["expression","typeAnnotation"],TSTypeAssertion:["typeAnnotation","expression"],TSEnumDeclaration:["id","members"],TSEnumMember:["id","initializer"],TSModuleDeclaration:["id","body"],TSModuleBlock:["body"],TSImportType:["argument","qualifier","typeParameters","typeArguments"],TSImportEqualsDeclaration:["id","moduleReference"],TSExternalModuleReference:["expression"],TSNonNullExpression:["expression"],TSExportAssignment:["expression"],TSNamespaceExportDeclaration:["id"],TSTypeAnnotation:["typeAnnotation"],TSTypeParameterInstantiation:["params"],TSTypeParameterDeclaration:["params"],TSTypeParameter:["constraint","default","name"],ChainExpression:["expression"],ExperimentalRestProperty:["argument"],ExperimentalSpreadProperty:["argument"],Literal:[],MethodDefinition:["decorators","key","value"],PrivateIdentifier:[],Property:["key","value"],PropertyDefinition:["decorators","key","typeAnnotation","value","variance"],AccessorProperty:["decorators","key","typeAnnotation","value"],TSAbstractAccessorProperty:["decorators","key","typeAnnotation"],TSAbstractKeyword:[],TSAbstractMethodDefinition:["key","value"],TSAbstractPropertyDefinition:["decorators","key","typeAnnotation"],TSAsyncKeyword:[],TSClassImplements:["expression","typeArguments","typeParameters"],TSDeclareKeyword:[],TSEmptyBodyFunctionExpression:["id","typeParameters","params","returnType"],TSExportKeyword:[],TSInterfaceHeritage:["expression","typeArguments","typeParameters"],TSPrivateKeyword:[],TSProtectedKeyword:[],TSPublicKeyword:[],TSReadonlyKeyword:[],TSStaticKeyword:[],TSTemplateLiteralType:["quasis","types"],AsExpression:["expression","typeAnnotation"],BigIntLiteralTypeAnnotation:[],BigIntTypeAnnotation:[],ConditionalTypeAnnotation:["checkType","extendsType","trueType","falseType"],DeclareEnum:["id","body"],InferTypeAnnotation:["typeParameter"],KeyofTypeAnnotation:["argument"],ObjectTypeMappedTypeProperty:["keyTparam","propType","sourceType","variance"],QualifiedTypeofIdentifier:["qualification","id"],TupleTypeLabeledElement:["label","elementType","variance"],TupleTypeSpreadElement:["label","typeAnnotation"],TypeOperator:["typeAnnotation"],TypePredicate:["parameterName","typeAnnotation","asserts"],NGRoot:["node"],NGPipeExpression:["left","right","arguments"],NGChainedExpression:["expressions"],NGEmptyExpression:[],NGMicrosyntax:["body"],NGMicrosyntaxKey:[],NGMicrosyntaxExpression:["expression","alias"],NGMicrosyntaxKeyedExpression:["key","expression"],NGMicrosyntaxLet:["key","value"],NGMicrosyntaxAs:["key","alias"],JsExpressionRoot:["node"],JsonRoot:["node"],TSJSDocAllType:[],TSJSDocUnknownType:[],TSJSDocNullableType:["typeAnnotation"],TSJSDocNonNullableType:["typeAnnotation"],NeverTypeAnnotation:[],UndefinedTypeAnnotation:[],UnknownTypeAnnotation:[],AsConstExpression:["expression"],SatisfiesExpression:["expression","typeAnnotation"]},Ye=fe(Fe),Ve=Ye;function Ge(re,P){if(!(re!==null&&typeof re=="object"))return re;if(Array.isArray(re)){for(let Y=0;Y<re.length;Y++)re[Y]=Ge(re[Y],P);return re}let V=Ve(re);for(let Y=0;Y<V.length;Y++)re[V[Y]]=Ge(re[V[Y]],P);return P(re)||re}var Ut=Ge;function sn(re,P){let{parser:V,text:Y}=P;if(re.type==="File"&&re.program.interpreter){let{program:{interpreter:te},comments:we}=re;delete re.program.interpreter,we.unshift(te)}if(V==="babel"){let te=new Set;re=Ut(re,we=>{var Ce;(Ce=we.leadingComments)!=null&&Ce.some(Ki)&&te.add(Ze(we))}),re=Ut(re,we=>{if(we.type==="ParenthesizedExpression"){let{expression:Ce}=we;if(Ce.type==="TypeCastExpression")return Ce.range=[...we.range],Ce;let We=Ze(we);if(!te.has(We))return Ce.extra=qi(Jt({},Ce.extra),{parenthesized:!0}),Ce}})}if(re=Ut(re,te=>{var we;switch(te.type){case"LogicalExpression":if(_n(te))return Hi(te);break;case"VariableDeclaration":{let Ce=$e(!1,te.declarations,-1);Ce!=null&&Ce.init&&Y[Ie(Ce)]!==";"&&(te.range=[Ze(te),Ie(Ce)]);break}case"TSParenthesizedType":return te.typeAnnotation;case"TSTypeParameter":if(typeof te.name=="string"){let Ce=Ze(te);te.name={type:"Identifier",name:te.name,range:[Ce,Ce+te.name.length]}}break;case"TopicReference":re.extra=qi(Jt({},re.extra),{__isUsingHackPipeline:!0});break;case"ExportAllDeclaration":if(V==="meriyah"&&((we=te.exported)==null?void 0:we.type)==="Identifier"){let{exported:Ce}=te,We=Y.slice(Ze(Ce),Ie(Ce));(We.startsWith('"')||We.startsWith("'"))&&(te.exported=qi(Jt({},te.exported),{type:"Literal",value:te.exported.name,raw:We}))}break;case"TSUnionType":case"TSIntersectionType":if(te.types.length===1)return te.types[0];break}}),ee(re.comments)){let te=$e(!1,re.comments,-1);for(let we=re.comments.length-2;we>=0;we--){let Ce=re.comments[we];Ie(Ce)===Ze(te)&&Bn(Ce)&&Bn(te)&&Qn(Ce)&&Qn(te)&&(re.comments.splice(we+1,1),Ce.value+="*//*"+te.value,Ce.range=[Ze(Ce),Ie(te)]),te=Ce}}return re.type==="Program"&&(re.range=[0,Y.length]),re}function _n(re){return re.type==="LogicalExpression"&&re.right.type==="LogicalExpression"&&re.operator===re.right.operator}function Hi(re){return _n(re)?Hi({type:"LogicalExpression",operator:re.operator,left:Hi({type:"LogicalExpression",operator:re.operator,left:re.left,right:re.right.left,range:[Ze(re.left),Ie(re.right.left)]}),right:re.right.right,range:[Ze(re),Ie(re)]}):re}var Wn=sn;function xi(re,P){let V=new SyntaxError(re+" ("+P.loc.start.line+":"+P.loc.start.column+")");return Object.assign(V,P)}var ar=xi;function di(re){let{message:P,loc:{line:V,column:Y},reasonCode:te}=re,we=re;(te==="MissingPlugin"||te==="MissingOneOfPlugins")&&(P="Unexpected token.",we=void 0);let Ce=` (${V}:${Y})`;return P.endsWith(Ce)&&(P=P.slice(0,-Ce.length)),ar(P,{loc:{start:{line:V,column:Y+1}},cause:we})}var Ui=di,hr=In(gn(),1);function bi(re){let P=ci(re);P&&(re=re.slice(P.length+1));let V=(0,hr.extract)(re),{pragmas:Y,comments:te}=(0,hr.parseWithComments)(V);return{shebang:P,text:re,pragmas:Y,comments:te}}function Gr(re){let{pragmas:P}=bi(re);return Object.prototype.hasOwnProperty.call(P,"prettier")||Object.prototype.hasOwnProperty.call(P,"format")}function Zi(re){return re=typeof re=="function"?{parse:re}:re,Jt({astFormat:"estree",hasPragma:Gr,locStart:Ze,locEnd:Ie},re)}var xr=Zi;function ms(re){let{filepath:P}=re;if(P){if(P=P.toLowerCase(),P.endsWith(".cjs"))return"script";if(P.endsWith(".mjs"))return"module"}}var Ni=ms;function qr(re,P){let{type:V="JsExpressionRoot",rootMarker:Y,text:te}=P,{tokens:we,comments:Ce}=re;return delete re.tokens,delete re.comments,{tokens:we,comments:Ce,type:V,node:re,range:[0,te.length],rootMarker:Y}}var Di=qr,Sr=re=>xr(Hr(re)),Qi={sourceType:"module",allowImportExportEverywhere:!0,allowReturnOutsideFunction:!0,allowNewTargetOutsideFunction:!0,allowSuperOutsideMethod:!0,allowUndeclaredExports:!0,errorRecovery:!0,createParenthesizedExpressions:!0,createImportExpressions:!0,plugins:["doExpressions","exportDefaultFrom","functionBind","functionSent","throwExpressions","partialApplication","decorators","decimal","moduleBlocks","asyncDoExpressions","regexpUnicodeSets","destructuringPrivate","decoratorAutoAccessors","importReflection","explicitResourceManagement",["importAttributes",{deprecatedAssertSyntax:!0}],"sourcePhaseImports","deferredImportEvaluation",["optionalChainingAssign",{version:"2023-07"}]],tokens:!0,ranges:!0},_i=["recordAndTuple",{syntaxType:"hash"}],gr="v8intrinsic",Zn=[["pipelineOperator",{proposal:"hack",topicToken:"%"}],["pipelineOperator",{proposal:"minimal"}],["pipelineOperator",{proposal:"fsharp"}]],tr=(re,P=Qi)=>qi(Jt({},P),{plugins:[...P.plugins,...re]}),bn=/@(?:no)?flow\b/;function Wr(re,P){var V;if((V=P.filepath)!=null&&V.endsWith(".js.flow"))return!0;let Y=ci(re);Y&&(re=re.slice(Y.length));let te=jr(re,0);return te!==!1&&(re=re.slice(0,te)),bn.test(re)}function Js(re,P,V){let Y=re(P,V),te=Y.errors.find(we=>!Lr.has(we.reasonCode));if(te)throw te;return Y}function Hr({isExpression:re=!1,optionsCombinations:P}){return(V,Y={})=>{var Dt;if((Y.parser==="babel"||Y.parser==="__babel_estree")&&Wr(V,Y))return Y.parser="babel-flow",Kr.parse(V,Y);let te=P;((Dt=Y.__babelSourceType)!=null?Dt:Ni(Y))==="script"&&(te=te.map(jt=>qi(Jt({},jt),{sourceType:"script"}))),/#[[{]/.test(V)&&(te=te.map(jt=>tr([_i],jt)));let we=/%[A-Z]/.test(V);V.includes("|>")?te=(we?[...Zn,gr]:Zn).flatMap(jt=>te.map(xn=>tr([jt],xn))):we&&(te=te.map(jt=>tr([gr],jt)));let Ce=re?Ii.parseExpression:Ii.parse,We;try{We=qs(te.map(jt=>()=>Js(Ce,V,jt)))}catch({errors:[jt]}){throw Ui(jt)}return re&&(We=Di(We,{text:V,rootMarker:Y.rootMarker})),Wn(We,{parser:"babel",text:V})}}var Lr=new Set(["StrictNumericEscape","StrictWith","StrictOctalLiteral","StrictDelete","StrictEvalArguments","StrictEvalArgumentsBinding","StrictFunction","EmptyTypeArguments","EmptyTypeParameters","ConstructorHasTypeParameters","UnsupportedParameterPropertyKind","DuplicateAccessibilityModifier","DecoratorExportClass","ParamDupe","InvalidDecimal","RestTrailingComma","UnsupportedParameterDecorator","UnterminatedJsxContent","UnexpectedReservedWord","ModuleAttributesWithDuplicateKeys","LineTerminatorBeforeArrow","InvalidEscapeSequenceTemplate","NonAbstractClassHasAbstractMethod","OptionalTypeBeforeRequired","PatternIsOptional","OptionalBindingPattern","DeclareClassFieldHasInitializer","TypeImportCannotSpecifyDefaultAndNamed","DeclareFunctionHasImplementation","ConstructorClassField","VarRedeclaration","InvalidPrivateFieldResolution","DuplicateExport"]),Pi=[tr(["jsx"])],Qs=Sr({optionsCombinations:Pi}),Pn=Sr({optionsCombinations:[tr(["jsx","typescript"]),tr(["typescript"])]}),Xs=Sr({isExpression:!0,optionsCombinations:[tr(["jsx"])]}),Ts=Sr({isExpression:!0,optionsCombinations:[tr(["typescript"])]}),Kr=Sr({optionsCombinations:[tr(["jsx",["flow",{all:!0,enums:!0}],"flowComments"])]}),hs=Sr({optionsCombinations:Pi.map(re=>tr(["estree"],re))}),os={babel:Qs,"babel-flow":Kr,"babel-ts":Pn,__js_expression:Xs,__ts_expression:Ts,__vue_expression:Xs,__vue_ts_expression:Ts,__vue_event_binding:Qs,__vue_ts_event_binding:Pn,__babel_estree:hs},js=In(vn(),1);function dr(re={}){let{allowComments:P=!0}=re;return function(V){let Y;try{Y=(0,js.parseExpression)(V,{tokens:!0,ranges:!0,attachComment:!1})}catch(te){throw Ui(te)}if(!P&&ee(Y.comments))throw Qr(Y.comments[0],"Comment");return gs(Y),Di(Y,{type:"JsonRoot",text:V})}}function Qr(re,P){let[V,Y]=[re.loc.start,re.loc.end].map(({line:te,column:we})=>({line:te,column:we+1}));return ar(`${P} is not allowed in JSON.`,{loc:{start:V,end:Y}})}function gs(re){switch(re.type){case"ArrayExpression":for(let P of re.elements)P!==null&&gs(P);return;case"ObjectExpression":for(let P of re.properties)gs(P);return;case"ObjectProperty":if(re.computed)throw Qr(re.key,"Computed key");if(re.shorthand)throw Qr(re.key,"Shorthand property");re.key.type!=="Identifier"&&gs(re.key),gs(re.value);return;case"UnaryExpression":{let{operator:P,argument:V}=re;if(P!=="+"&&P!=="-")throw Qr(re,`Operator '${re.operator}'`);if(V.type==="NumericLiteral"||V.type==="Identifier"&&(V.name==="Infinity"||V.name==="NaN"))return;throw Qr(V,`Operator '${P}' before '${V.type}'`)}case"Identifier":if(re.name!=="Infinity"&&re.name!=="NaN"&&re.name!=="undefined")throw Qr(re,`Identifier '${re.name}'`);return;case"TemplateLiteral":if(ee(re.expressions))throw Qr(re.expressions[0],"'TemplateLiteral' with expression");for(let P of re.quasis)gs(P);return;case"NullLiteral":case"BooleanLiteral":case"NumericLiteral":case"StringLiteral":case"TemplateElement":return;default:throw Qr(re,`'${re.type}'`)}}var ei=dr(),Rs={json:xr({parse:ei,hasPragma(){return!0}}),json5:xr(ei),jsonc:xr(ei),"json-stringify":xr({parse:dr({allowComments:!1}),astFormat:"estree-json"})},co=Rs,oa=Jt(Jt({},os),co),na=Si},76653:function(lo,bs,dn){"use strict";dn.d(bs,{ZP:function(){return N1}});var xe=Object.create,It=Object.defineProperty,fn=Object.getOwnPropertyDescriptor,it=Object.getOwnPropertyNames,Qt=Object.getPrototypeOf,yn=Object.prototype.hasOwnProperty,ii=(c,g)=>()=>(g||c((g={exports:{}}).exports,g),g.exports),Nn=(c,g)=>{for(var x in g)It(c,x,{get:g[x],enumerable:!0})},Kt=(c,g,x,I)=>{if(g&&typeof g=="object"||typeof g=="function")for(let W of it(g))!yn.call(c,W)&&W!==x&&It(c,W,{get:()=>g[W],enumerable:!(I=fn(g,W))||I.enumerable});return c},In=(c,g,x)=>(x=c!=null?xe(Qt(c)):{},Kt(g||!c||!c.__esModule?It(x,"default",{value:c,enumerable:!0}):x,c)),vn=(c,g,x)=>{if(!g.has(c))throw TypeError("Cannot "+x)},gn=(c,g,x)=>(vn(c,g,"read from private field"),x?x.call(c):g.get(c)),Si=(c,g,x)=>{if(g.has(c))throw TypeError("Cannot add the same private member more than once");g instanceof WeakSet?g.add(c):g.set(c,x)},Ii=(c,g,x,I)=>(vn(c,g,"write to private field"),I?I.call(c,x):g.set(c,x),x),Un=ii(c=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.extract=pt,c.parse=Et,c.parseWithComments=cn,c.print=hn,c.strip=dt;var g=/\*\/$/,x=/^\/\*\*?/,I=/^\s*(\/\*\*?(.|\r?\n)*?\*\/)/,W=/(^|\s+)\/\/([^\r\n]*)/g,X=/^(\r?\n)+/,ae=/(?:^|\r?\n) *(@[^\r\n]*?) *\r?\n *(?![^@\r\n]*\/\/[^]*)([^@\r\n\s][^@\r\n]+?) *\r?\n/g,Ke=/(?:^|\r?\n) *@(\S+) *([^\r\n]*)/g,yt=/(\r?\n|^) *\* ?/g,Ue=[];function pt(li){let qn=li.match(I);return qn?qn[0].trimLeft():""}function dt(li){let qn=li.match(I);return qn&&qn[0]?li.substring(qn[0].length):li}function Et(li){return cn(li).pragmas}function cn(li){let qn=`
`;li=li.replace(x,"").replace(g,"").replace(yt,"$1");let ur="";for(;ur!==li;)ur=li,li=li.replace(ae,`${qn}$1 $2${qn}`);li=li.replace(X,"").trimRight();let zr=Object.create(null),ro=li.replace(Ke,"").replace(X,"").trimRight(),Ss;for(;Ss=Ke.exec(li);){let fi=Ss[2].replace(W,"");typeof zr[Ss[1]]=="string"||Array.isArray(zr[Ss[1]])?zr[Ss[1]]=Ue.concat(zr[Ss[1]],fi):zr[Ss[1]]=fi}return{comments:ro,pragmas:zr}}function hn({comments:li="",pragmas:qn={}}){let ur=`
`,zr="/**",ro=" *",Ss=" */",fi=Object.keys(qn),Qo=fi.flatMap(Wo=>_r(Wo,qn[Wo])).map(Wo=>`${ro} ${Wo}${ur}`).join("");if(!li){if(fi.length===0)return"";if(fi.length===1&&!Array.isArray(qn[fi[0]])){let Wo=qn[fi[0]];return`${zr} ${_r(fi[0],Wo)[0]}${Ss}`}}let Pu=li.split(ur).map(Wo=>`${ro} ${Wo}`).join(ur)+ur;return zr+ur+(li?Pu:"")+(li&&fi.length?ro+ur:"")+Qo+Ss}function _r(li,qn){return Ue.concat(qn).map(ur=>`@${li} ${ur}`.trim())}}),$t={};Nn($t,{languages:()=>ym,options:()=>ky,printers:()=>Jp});var qt=[{linguistLanguageId:183,name:"JavaScript",type:"programming",tmScope:"source.js",aceMode:"javascript",codemirrorMode:"javascript",codemirrorMimeType:"text/javascript",color:"#f1e05a",aliases:["js","node"],extensions:[".js","._js",".bones",".cjs",".es",".es6",".frag",".gs",".jake",".javascript",".jsb",".jscad",".jsfl",".jslib",".jsm",".jspre",".jss",".mjs",".njs",".pac",".sjs",".ssjs",".xsjs",".xsjslib",".wxs"],filenames:["Jakefile"],interpreters:["chakra","d8","gjs","js","node","nodejs","qjs","rhino","v8","v8-shell","zx"],parsers:["babel","acorn","espree","meriyah","babel-flow","babel-ts","flow","typescript"],vscodeLanguageIds:["javascript","mongo"]},{linguistLanguageId:183,name:"Flow",type:"programming",tmScope:"source.js",aceMode:"javascript",codemirrorMode:"javascript",codemirrorMimeType:"text/javascript",color:"#f1e05a",aliases:[],extensions:[".js.flow"],filenames:[],interpreters:["chakra","d8","gjs","js","node","nodejs","qjs","rhino","v8","v8-shell"],parsers:["flow","babel-flow"],vscodeLanguageIds:["javascript"]},{linguistLanguageId:183,name:"JSX",type:"programming",tmScope:"source.js.jsx",aceMode:"javascript",codemirrorMode:"jsx",codemirrorMimeType:"text/jsx",color:void 0,aliases:void 0,extensions:[".jsx"],filenames:void 0,interpreters:void 0,parsers:["babel","babel-flow","babel-ts","flow","typescript","espree","meriyah"],vscodeLanguageIds:["javascriptreact"],group:"JavaScript"},{linguistLanguageId:378,name:"TypeScript",type:"programming",color:"#3178c6",aliases:["ts"],interpreters:["deno","ts-node"],extensions:[".ts",".cts",".mts"],tmScope:"source.ts",aceMode:"typescript",codemirrorMode:"javascript",codemirrorMimeType:"application/typescript",parsers:["typescript","babel-ts"],vscodeLanguageIds:["typescript"]},{linguistLanguageId:94901924,name:"TSX",type:"programming",color:"#3178c6",group:"TypeScript",extensions:[".tsx"],tmScope:"source.tsx",aceMode:"javascript",codemirrorMode:"jsx",codemirrorMimeType:"text/jsx",parsers:["typescript","babel-ts"],vscodeLanguageIds:["typescriptreact"]}],mr={};Nn(mr,{canAttachComment:()=>a,embed:()=>ga,experimentalFeatures:()=>F1,getCommentChildNodes:()=>m,getVisitorKeys:()=>_i,handleComments:()=>Ll,insertPragma:()=>su,isBlockComment:()=>bn,isGap:()=>$,massageAstNode:()=>Ee,print:()=>fh,printComment:()=>Qa,willPrintOwnComments:()=>S});var ss=(c,g,x,I)=>{if(!(c&&g==null))return g.replaceAll?g.replaceAll(x,I):x.global?g.replace(x,I):g.split(x).join(I)},Dr=ss,zs=(c,g,x)=>{if(!(c&&g==null))return Array.isArray(g)||typeof g=="string"?g[x<0?g.length+x:x]:g.at(x)},pi=zs,vs=/^[\$A-Z_a-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC][\$0-9A-Z_a-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]*$/,uo=c=>vs.test(c),cs=uo;function wr(c){return c!==null&&typeof c=="object"}var jr=wr;function*vr(c,g){let{getVisitorKeys:x,filter:I=()=>!0}=g,W=X=>jr(X)&&I(X);for(let X of x(c)){let ae=c[X];if(Array.isArray(ae))for(let Ke of ae)W(Ke)&&(yield Ke);else W(ae)&&(yield ae)}}function*qs(c,g){let x=[c];for(let I=0;I<x.length;I++){let W=x[I];for(let X of vr(W,g))yield X,x.push(X)}}function Is(c,{getVisitorKeys:g,predicate:x}){for(let I of qs(c,{getVisitorKeys:g}))if(x(I))return!0;return!1}var ci=()=>/[#*0-9]\uFE0F?\u20E3|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26AA\u26B0\u26B1\u26BD\u26BE\u26C4\u26C8\u26CF\u26D1\u26E9\u26F0-\u26F5\u26F7\u26F8\u26FA\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B55\u3030\u303D\u3297\u3299]\uFE0F?|[\u261D\u270C\u270D](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\u270A\u270B](?:\uD83C[\uDFFB-\uDFFF])?|[\u23E9-\u23EC\u23F0\u23F3\u25FD\u2693\u26A1\u26AB\u26C5\u26CE\u26D4\u26EA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2795-\u2797\u27B0\u27BF\u2B50]|\u26D3\uFE0F?(?:\u200D\uD83D\uDCA5)?|\u26F9(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\u2764\uFE0F?(?:\u200D(?:\uD83D\uDD25|\uD83E\uDE79))?|\uD83C(?:[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]\uFE0F?|[\uDF85\uDFC2\uDFC7](?:\uD83C[\uDFFB-\uDFFF])?|[\uDFC4\uDFCA](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDFCB\uDFCC](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF43\uDF45-\uDF4A\uDF4C-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uDDE6\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF]|\uDDE7\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF]|\uDDE8\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF]|\uDDE9\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF]|\uDDEA\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA]|\uDDEB\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7]|\uDDEC\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE]|\uDDED\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA]|\uDDEE\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9]|\uDDEF\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5]|\uDDF0\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF]|\uDDF1\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE]|\uDDF2\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF]|\uDDF3\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF]|\uDDF4\uD83C\uDDF2|\uDDF5\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE]|\uDDF6\uD83C\uDDE6|\uDDF7\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC]|\uDDF8\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF]|\uDDF9\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF]|\uDDFA\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF]|\uDDFB\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA]|\uDDFC\uD83C[\uDDEB\uDDF8]|\uDDFD\uD83C\uDDF0|\uDDFE\uD83C[\uDDEA\uDDF9]|\uDDFF\uD83C[\uDDE6\uDDF2\uDDFC]|\uDF44(?:\u200D\uD83D\uDFEB)?|\uDF4B(?:\u200D\uD83D\uDFE9)?|\uDFC3(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?|\uDFF3\uFE0F?(?:\u200D(?:\u26A7\uFE0F?|\uD83C\uDF08))?|\uDFF4(?:\u200D\u2620\uFE0F?|\uDB40\uDC67\uDB40\uDC62\uDB40(?:\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDC73\uDB40\uDC63\uDB40\uDC74|\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F)?)|\uD83D(?:[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3]\uFE0F?|[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC](?:\uD83C[\uDFFB-\uDFFF])?|[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4\uDEB5](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD74\uDD90](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC25\uDC27-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE41\uDE43\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEDC-\uDEDF\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uDC08(?:\u200D\u2B1B)?|\uDC15(?:\u200D\uD83E\uDDBA)?|\uDC26(?:\u200D(?:\u2B1B|\uD83D\uDD25))?|\uDC3B(?:\u200D\u2744\uFE0F?)?|\uDC41\uFE0F?(?:\u200D\uD83D\uDDE8\uFE0F?)?|\uDC68(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDC68\uDC69]\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFE])))?))?|\uDC69(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?[\uDC68\uDC69]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?|\uDC69\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?))|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFE])))?))?|\uDC6F(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDD75(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDE2E(?:\u200D\uD83D\uDCA8)?|\uDE35(?:\u200D\uD83D\uDCAB)?|\uDE36(?:\u200D\uD83C\uDF2B\uFE0F?)?|\uDE42(?:\u200D[\u2194\u2195]\uFE0F?)?|\uDEB6(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?)|\uD83E(?:[\uDD0C\uDD0F\uDD18-\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5\uDEC3-\uDEC5\uDEF0\uDEF2-\uDEF8](?:\uD83C[\uDFFB-\uDFFF])?|[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD\uDDCF\uDDD4\uDDD6-\uDDDD](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDDDE\uDDDF](?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD0D\uDD0E\uDD10-\uDD17\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCC\uDDD0\uDDE0-\uDDFF\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC2\uDECE-\uDEDB\uDEE0-\uDEE8]|\uDD3C(?:\u200D[\u2640\u2642]\uFE0F?|\uD83C[\uDFFB-\uDFFF])?|\uDDCE(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?|\uDDD1(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1|\uDDD1\u200D\uD83E\uDDD2(?:\u200D\uD83E\uDDD2)?|\uDDD2(?:\u200D\uD83E\uDDD2)?))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFC-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFD-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFD\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFE]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?))?|\uDEF1(?:\uD83C(?:\uDFFB(?:\u200D\uD83E\uDEF2\uD83C[\uDFFC-\uDFFF])?|\uDFFC(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFD-\uDFFF])?|\uDFFD(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])?|\uDFFE(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFD\uDFFF])?|\uDFFF(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFE])?))?)/g;function le(c){return c===12288||c>=65281&&c<=65376||c>=65504&&c<=65510}function $e(c){return c>=4352&&c<=4447||c===8986||c===8987||c===9001||c===9002||c>=9193&&c<=9196||c===9200||c===9203||c===9725||c===9726||c===9748||c===9749||c>=9800&&c<=9811||c===9855||c===9875||c===9889||c===9898||c===9899||c===9917||c===9918||c===9924||c===9925||c===9934||c===9940||c===9962||c===9970||c===9971||c===9973||c===9978||c===9981||c===9989||c===9994||c===9995||c===10024||c===10060||c===10062||c>=10067&&c<=10069||c===10071||c>=10133&&c<=10135||c===10160||c===10175||c===11035||c===11036||c===11088||c===11093||c>=11904&&c<=11929||c>=11931&&c<=12019||c>=12032&&c<=12245||c>=12272&&c<=12287||c>=12289&&c<=12350||c>=12353&&c<=12438||c>=12441&&c<=12543||c>=12549&&c<=12591||c>=12593&&c<=12686||c>=12688&&c<=12771||c>=12783&&c<=12830||c>=12832&&c<=12871||c>=12880&&c<=19903||c>=19968&&c<=42124||c>=42128&&c<=42182||c>=43360&&c<=43388||c>=44032&&c<=55203||c>=63744&&c<=64255||c>=65040&&c<=65049||c>=65072&&c<=65106||c>=65108&&c<=65126||c>=65128&&c<=65131||c>=94176&&c<=94180||c===94192||c===94193||c>=94208&&c<=100343||c>=100352&&c<=101589||c>=101632&&c<=101640||c>=110576&&c<=110579||c>=110581&&c<=110587||c===110589||c===110590||c>=110592&&c<=110882||c===110898||c>=110928&&c<=110930||c===110933||c>=110948&&c<=110951||c>=110960&&c<=111355||c===126980||c===127183||c===127374||c>=127377&&c<=127386||c>=127488&&c<=127490||c>=127504&&c<=127547||c>=127552&&c<=127560||c===127568||c===127569||c>=127584&&c<=127589||c>=127744&&c<=127776||c>=127789&&c<=127797||c>=127799&&c<=127868||c>=127870&&c<=127891||c>=127904&&c<=127946||c>=127951&&c<=127955||c>=127968&&c<=127984||c===127988||c>=127992&&c<=128062||c===128064||c>=128066&&c<=128252||c>=128255&&c<=128317||c>=128331&&c<=128334||c>=128336&&c<=128359||c===128378||c===128405||c===128406||c===128420||c>=128507&&c<=128591||c>=128640&&c<=128709||c===128716||c>=128720&&c<=128722||c>=128725&&c<=128727||c>=128732&&c<=128735||c===128747||c===128748||c>=128756&&c<=128764||c>=128992&&c<=129003||c===129008||c>=129292&&c<=129338||c>=129340&&c<=129349||c>=129351&&c<=129535||c>=129648&&c<=129660||c>=129664&&c<=129672||c>=129680&&c<=129725||c>=129727&&c<=129733||c>=129742&&c<=129755||c>=129760&&c<=129768||c>=129776&&c<=129784||c>=131072&&c<=196605||c>=196608&&c<=262141}var ze=c=>!(le(c)||$e(c)),ee=/[^\x20-\x7F]/;function Ze(c){if(!c)return 0;if(!ee.test(c))return c.length;c=c.replace(ci(),"  ");let g=0;for(let x of c){let I=x.codePointAt(0);I<=31||I>=127&&I<=159||I>=768&&I<=879||(g+=ze(I)?1:2)}return g}var Ie=Ze;function Xe(c){return(g,x,I)=>{let W=!!(I!=null&&I.backwards);if(x===!1)return!1;let{length:X}=g,ae=x;for(;ae>=0&&ae<X;){let Ke=g.charAt(ae);if(c instanceof RegExp){if(!c.test(Ke))return ae}else if(!c.includes(Ke))return ae;W?ae--:ae++}return ae===-1||ae===X?ae:!1}}var St=Xe(/\s/),Tt=Xe(" 	"),Bn=Xe(",; 	"),Fn=Xe(/[^\n\r]/);function Qn(c,g,x){let I=!!(x!=null&&x.backwards);if(g===!1)return!1;let W=c.charAt(g);if(I){if(c.charAt(g-1)==="\r"&&W===`
`)return g-2;if(W===`
`||W==="\r"||W==="\u2028"||W==="\u2029")return g-1}else{if(W==="\r"&&c.charAt(g+1)===`
`)return g+2;if(W===`
`||W==="\r"||W==="\u2028"||W==="\u2029")return g+1}return g}var hi=Qn;function Ki(c,g,x={}){let I=Tt(c,x.backwards?g-1:g,x),W=hi(c,I,x);return I!==W}var Vn=Ki;function fs(c,g){if(g===!1)return!1;if(c.charAt(g)==="/"&&c.charAt(g+1)==="*"){for(let x=g+2;x<c.length;++x)if(c.charAt(x)==="*"&&c.charAt(x+1)==="/")return x+2}return g}var wo=fs;function Ao(c,g){return g===!1?!1:c.charAt(g)==="/"&&c.charAt(g+1)==="/"?Fn(c,g):g}var en=Ao;function fe(c,g){let x=null,I=g;for(;I!==x;)x=I,I=Bn(c,I),I=wo(c,I),I=Tt(c,I);return I=en(c,I),I=hi(c,I),I!==!1&&Vn(c,I)}var Fe=fe;function Ye(c){return Array.isArray(c)&&c.length>0}var Ve=Ye,Ge="'",Ut='"';function sn(c,g){let x=g===!0||g===Ge?Ge:Ut,I=x===Ge?Ut:Ge,W=0,X=0;for(let ae of c)ae===x?W++:ae===I&&X++;return W>X?I:x}var _n=sn;function Hi(c,g,x){let I=g==='"'?"'":'"',W=Dr(!1,c,new RegExp(`\\\\(.)|(["'])`,"gs"),(X,ae,Ke)=>ae===I?ae:Ke===g?"\\"+Ke:Ke||(x&&/^[^\n\r"'0-7\\bfnrt-vx\u2028\u2029]$/.test(ae)?ae:"\\"+ae));return g+W+g}var Wn=Hi;function xi(c,g){let x=c.slice(1,-1),I=g.parser==="json"||g.parser==="jsonc"||g.parser==="json5"&&g.quoteProps==="preserve"&&!g.singleQuote?'"':g.__isInHtmlAttribute?"'":_n(x,g.singleQuote);return Wn(x,I,!(g.parser==="css"||g.parser==="less"||g.parser==="scss"||g.__embeddedInHtml))}var ar=xi;function di(c){var ae,Ke;var g,x,I;let W=(ae=(g=c.range)==null?void 0:g[0])!=null?ae:c.start,X=(I=(Ke=(x=c.declaration)==null?void 0:x.decorators)!=null?Ke:c.decorators)==null?void 0:I[0];return X?Math.min(di(X),W):W}function Ui(c){var x;var g;return(x=(g=c.range)==null?void 0:g[1])!=null?x:c.end}function hr(c,g){let x=di(c);return Number.isInteger(x)&&x===di(g)}function bi(c,g){let x=Ui(c);return Number.isInteger(x)&&x===Ui(g)}function Gr(c,g){return hr(c,g)&&bi(c,g)}var Zi=null;function xr(c){if(Zi!==null&&typeof Zi.property){let g=Zi;return Zi=xr.prototype=null,g}return Zi=xr.prototype=c!=null?c:Object.create(null),new xr}var ms=10;for(let c=0;c<=ms;c++)xr();function Ni(c){return xr(c)}function qr(c,g="type"){Ni(c);function x(I){let W=I[g],X=c[W];if(!Array.isArray(X))throw Object.assign(new Error(`Missing visitor keys for '${W}'.`),{node:I});return X}return x}var Di=qr,Sr={ArrayExpression:["elements"],AssignmentExpression:["left","right"],BinaryExpression:["left","right"],InterpreterDirective:[],Directive:["value"],DirectiveLiteral:[],BlockStatement:["directives","body"],BreakStatement:["label"],CallExpression:["callee","arguments","typeParameters","typeArguments"],CatchClause:["param","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DoWhileStatement:["test","body"],EmptyStatement:[],ExpressionStatement:["expression"],File:["program"],ForInStatement:["left","right","body"],ForStatement:["init","test","update","body"],FunctionDeclaration:["id","params","body","returnType","typeParameters","predicate"],FunctionExpression:["id","params","body","returnType","typeParameters"],Identifier:["typeAnnotation","decorators"],IfStatement:["test","consequent","alternate"],LabeledStatement:["label","body"],StringLiteral:[],NumericLiteral:[],NullLiteral:[],BooleanLiteral:[],RegExpLiteral:[],LogicalExpression:["left","right"],MemberExpression:["object","property"],NewExpression:["callee","arguments","typeParameters","typeArguments"],Program:["directives","body"],ObjectExpression:["properties"],ObjectMethod:["key","params","body","decorators","returnType","typeParameters"],ObjectProperty:["key","value","decorators"],RestElement:["argument","typeAnnotation","decorators"],ReturnStatement:["argument"],SequenceExpression:["expressions"],ParenthesizedExpression:["expression"],SwitchCase:["test","consequent"],SwitchStatement:["discriminant","cases"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],AssignmentPattern:["left","right","decorators","typeAnnotation"],ArrayPattern:["elements","typeAnnotation","decorators"],ArrowFunctionExpression:["params","body","returnType","typeParameters","predicate"],ClassBody:["body"],ClassExpression:["id","body","superClass","mixins","typeParameters","superTypeParameters","implements","decorators","superTypeArguments"],ClassDeclaration:["id","body","superClass","mixins","typeParameters","superTypeParameters","implements","decorators","superTypeArguments"],ExportAllDeclaration:["source","attributes","exported"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source","attributes"],ExportSpecifier:["local","exported"],ForOfStatement:["left","right","body"],ImportDeclaration:["specifiers","source","attributes"],ImportDefaultSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["local","imported"],ImportExpression:["source","options","attributes"],MetaProperty:["meta","property"],ClassMethod:["key","params","body","decorators","returnType","typeParameters"],ObjectPattern:["properties","typeAnnotation","decorators"],SpreadElement:["argument"],Super:[],TaggedTemplateExpression:["tag","quasi","typeParameters","typeArguments"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],YieldExpression:["argument"],AwaitExpression:["argument"],Import:[],BigIntLiteral:[],ExportNamespaceSpecifier:["exported"],OptionalMemberExpression:["object","property"],OptionalCallExpression:["callee","arguments","typeParameters","typeArguments"],ClassProperty:["key","value","typeAnnotation","decorators","variance"],ClassAccessorProperty:["key","value","typeAnnotation","decorators"],ClassPrivateProperty:["key","value","decorators","typeAnnotation","variance"],ClassPrivateMethod:["key","params","body","decorators","returnType","typeParameters"],PrivateName:["id"],StaticBlock:["body"],AnyTypeAnnotation:[],ArrayTypeAnnotation:["elementType"],BooleanTypeAnnotation:[],BooleanLiteralTypeAnnotation:[],NullLiteralTypeAnnotation:[],ClassImplements:["id","typeParameters"],DeclareClass:["id","typeParameters","extends","mixins","implements","body"],DeclareFunction:["id","predicate"],DeclareInterface:["id","typeParameters","extends","body"],DeclareModule:["id","body"],DeclareModuleExports:["typeAnnotation"],DeclareTypeAlias:["id","typeParameters","right"],DeclareOpaqueType:["id","typeParameters","supertype"],DeclareVariable:["id"],DeclareExportDeclaration:["declaration","specifiers","source"],DeclareExportAllDeclaration:["source"],DeclaredPredicate:["value"],ExistsTypeAnnotation:[],FunctionTypeAnnotation:["typeParameters","params","rest","returnType","this"],FunctionTypeParam:["name","typeAnnotation"],GenericTypeAnnotation:["id","typeParameters"],InferredPredicate:[],InterfaceExtends:["id","typeParameters"],InterfaceDeclaration:["id","typeParameters","extends","body"],InterfaceTypeAnnotation:["extends","body"],IntersectionTypeAnnotation:["types"],MixedTypeAnnotation:[],EmptyTypeAnnotation:[],NullableTypeAnnotation:["typeAnnotation"],NumberLiteralTypeAnnotation:[],NumberTypeAnnotation:[],ObjectTypeAnnotation:["properties","indexers","callProperties","internalSlots"],ObjectTypeInternalSlot:["id","value","optional","static","method"],ObjectTypeCallProperty:["value"],ObjectTypeIndexer:["id","key","value","variance"],ObjectTypeProperty:["key","value","variance"],ObjectTypeSpreadProperty:["argument"],OpaqueType:["id","typeParameters","supertype","impltype"],QualifiedTypeIdentifier:["id","qualification"],StringLiteralTypeAnnotation:[],StringTypeAnnotation:[],SymbolTypeAnnotation:[],ThisTypeAnnotation:[],TupleTypeAnnotation:["types","elementTypes"],TypeofTypeAnnotation:["argument","typeArguments"],TypeAlias:["id","typeParameters","right"],TypeAnnotation:["typeAnnotation"],TypeCastExpression:["expression","typeAnnotation"],TypeParameter:["bound","default","variance"],TypeParameterDeclaration:["params"],TypeParameterInstantiation:["params"],UnionTypeAnnotation:["types"],Variance:[],VoidTypeAnnotation:[],EnumDeclaration:["id","body"],EnumBooleanBody:["members"],EnumNumberBody:["members"],EnumStringBody:["members"],EnumSymbolBody:["members"],EnumBooleanMember:["id","init"],EnumNumberMember:["id","init"],EnumStringMember:["id","init"],EnumDefaultedMember:["id"],IndexedAccessType:["objectType","indexType"],OptionalIndexedAccessType:["objectType","indexType"],JSXAttribute:["name","value"],JSXClosingElement:["name"],JSXElement:["openingElement","children","closingElement"],JSXEmptyExpression:[],JSXExpressionContainer:["expression"],JSXSpreadChild:["expression"],JSXIdentifier:[],JSXMemberExpression:["object","property"],JSXNamespacedName:["namespace","name"],JSXOpeningElement:["name","attributes","typeArguments","typeParameters"],JSXSpreadAttribute:["argument"],JSXText:[],JSXFragment:["openingFragment","children","closingFragment"],JSXOpeningFragment:[],JSXClosingFragment:[],Noop:[],Placeholder:[],V8IntrinsicIdentifier:[],ArgumentPlaceholder:[],BindExpression:["object","callee"],ImportAttribute:["key","value"],Decorator:["expression"],DoExpression:["body"],ExportDefaultSpecifier:["exported"],RecordExpression:["properties"],TupleExpression:["elements"],DecimalLiteral:[],ModuleExpression:["body"],TopicReference:[],PipelineTopicExpression:["expression"],PipelineBareFunction:["callee"],PipelinePrimaryTopicReference:[],TSParameterProperty:["parameter","decorators"],TSDeclareFunction:["id","typeParameters","params","returnType","body"],TSDeclareMethod:["decorators","key","typeParameters","params","returnType"],TSQualifiedName:["left","right"],TSCallSignatureDeclaration:["typeParameters","parameters","typeAnnotation","params","returnType"],TSConstructSignatureDeclaration:["typeParameters","parameters","typeAnnotation","params","returnType"],TSPropertySignature:["key","typeAnnotation"],TSMethodSignature:["key","typeParameters","parameters","typeAnnotation","params","returnType"],TSIndexSignature:["parameters","typeAnnotation"],TSAnyKeyword:[],TSBooleanKeyword:[],TSBigIntKeyword:[],TSIntrinsicKeyword:[],TSNeverKeyword:[],TSNullKeyword:[],TSNumberKeyword:[],TSObjectKeyword:[],TSStringKeyword:[],TSSymbolKeyword:[],TSUndefinedKeyword:[],TSUnknownKeyword:[],TSVoidKeyword:[],TSThisType:[],TSFunctionType:["typeParameters","parameters","typeAnnotation","params","returnType"],TSConstructorType:["typeParameters","parameters","typeAnnotation","params","returnType"],TSTypeReference:["typeName","typeParameters","typeArguments"],TSTypePredicate:["parameterName","typeAnnotation"],TSTypeQuery:["exprName","typeParameters","typeArguments"],TSTypeLiteral:["members"],TSArrayType:["elementType"],TSTupleType:["elementTypes"],TSOptionalType:["typeAnnotation"],TSRestType:["typeAnnotation"],TSNamedTupleMember:["label","elementType"],TSUnionType:["types"],TSIntersectionType:["types"],TSConditionalType:["checkType","extendsType","trueType","falseType"],TSInferType:["typeParameter"],TSParenthesizedType:["typeAnnotation"],TSTypeOperator:["typeAnnotation"],TSIndexedAccessType:["objectType","indexType"],TSMappedType:["typeParameter","typeAnnotation","nameType"],TSLiteralType:["literal"],TSExpressionWithTypeArguments:["expression","typeParameters"],TSInterfaceDeclaration:["id","typeParameters","extends","body"],TSInterfaceBody:["body"],TSTypeAliasDeclaration:["id","typeParameters","typeAnnotation"],TSInstantiationExpression:["expression","typeParameters","typeArguments"],TSAsExpression:["expression","typeAnnotation"],TSSatisfiesExpression:["expression","typeAnnotation"],TSTypeAssertion:["typeAnnotation","expression"],TSEnumDeclaration:["id","members"],TSEnumMember:["id","initializer"],TSModuleDeclaration:["id","body"],TSModuleBlock:["body"],TSImportType:["argument","qualifier","typeParameters","typeArguments"],TSImportEqualsDeclaration:["id","moduleReference"],TSExternalModuleReference:["expression"],TSNonNullExpression:["expression"],TSExportAssignment:["expression"],TSNamespaceExportDeclaration:["id"],TSTypeAnnotation:["typeAnnotation"],TSTypeParameterInstantiation:["params"],TSTypeParameterDeclaration:["params"],TSTypeParameter:["constraint","default","name"],ChainExpression:["expression"],ExperimentalRestProperty:["argument"],ExperimentalSpreadProperty:["argument"],Literal:[],MethodDefinition:["decorators","key","value"],PrivateIdentifier:[],Property:["key","value"],PropertyDefinition:["decorators","key","typeAnnotation","value","variance"],AccessorProperty:["decorators","key","typeAnnotation","value"],TSAbstractAccessorProperty:["decorators","key","typeAnnotation"],TSAbstractKeyword:[],TSAbstractMethodDefinition:["key","value"],TSAbstractPropertyDefinition:["decorators","key","typeAnnotation"],TSAsyncKeyword:[],TSClassImplements:["expression","typeArguments","typeParameters"],TSDeclareKeyword:[],TSEmptyBodyFunctionExpression:["id","typeParameters","params","returnType"],TSExportKeyword:[],TSInterfaceHeritage:["expression","typeArguments","typeParameters"],TSPrivateKeyword:[],TSProtectedKeyword:[],TSPublicKeyword:[],TSReadonlyKeyword:[],TSStaticKeyword:[],TSTemplateLiteralType:["quasis","types"],AsExpression:["expression","typeAnnotation"],BigIntLiteralTypeAnnotation:[],BigIntTypeAnnotation:[],ConditionalTypeAnnotation:["checkType","extendsType","trueType","falseType"],DeclareEnum:["id","body"],InferTypeAnnotation:["typeParameter"],KeyofTypeAnnotation:["argument"],ObjectTypeMappedTypeProperty:["keyTparam","propType","sourceType","variance"],QualifiedTypeofIdentifier:["qualification","id"],TupleTypeLabeledElement:["label","elementType","variance"],TupleTypeSpreadElement:["label","typeAnnotation"],TypeOperator:["typeAnnotation"],TypePredicate:["parameterName","typeAnnotation","asserts"],NGRoot:["node"],NGPipeExpression:["left","right","arguments"],NGChainedExpression:["expressions"],NGEmptyExpression:[],NGMicrosyntax:["body"],NGMicrosyntaxKey:[],NGMicrosyntaxExpression:["expression","alias"],NGMicrosyntaxKeyedExpression:["key","expression"],NGMicrosyntaxLet:["key","value"],NGMicrosyntaxAs:["key","alias"],JsExpressionRoot:["node"],JsonRoot:["node"],TSJSDocAllType:[],TSJSDocUnknownType:[],TSJSDocNullableType:["typeAnnotation"],TSJSDocNonNullableType:["typeAnnotation"],NeverTypeAnnotation:[],UndefinedTypeAnnotation:[],UnknownTypeAnnotation:[],AsConstExpression:["expression"],SatisfiesExpression:["expression","typeAnnotation"]},Qi=Di(Sr),_i=Qi;function gr(c){let g=new Set(c);return x=>g.has(x==null?void 0:x.type)}var Zn=gr,tr=Zn(["Block","CommentBlock","MultiLine"]),bn=tr,Wr=Zn(["AnyTypeAnnotation","ThisTypeAnnotation","NumberTypeAnnotation","VoidTypeAnnotation","BooleanTypeAnnotation","BigIntTypeAnnotation","SymbolTypeAnnotation","StringTypeAnnotation","NeverTypeAnnotation","UndefinedTypeAnnotation","UnknownTypeAnnotation","EmptyTypeAnnotation","MixedTypeAnnotation"]),Js=Wr;function Hr(c,g){let x=g.split(".");for(let I=x.length-1;I>=0;I--){let W=x[I];if(I===0)return c.type==="Identifier"&&c.name===W;if(c.type!=="MemberExpression"||c.optional||c.computed||c.property.type!=="Identifier"||c.property.name!==W)return!1;c=c.object}}function Lr(c,g){return g.some(x=>Hr(c,x))}var Pi=Lr;function Qs({type:c}){return c.startsWith("TS")&&c.endsWith("Keyword")}var Pn=Qs;function Xs(c,g){return g(c)||Is(c,{getVisitorKeys:_i,predicate:g})}function Ts(c){return c.type==="AssignmentExpression"||c.type==="BinaryExpression"||c.type==="LogicalExpression"||c.type==="NGPipeExpression"||c.type==="ConditionalExpression"||Fi(c)||rt(c)||c.type==="SequenceExpression"||c.type==="TaggedTemplateExpression"||c.type==="BindExpression"||c.type==="UpdateExpression"&&!c.prefix||Ro(c)||c.type==="TSNonNullExpression"||c.type==="ChainExpression"}function Kr(c){var g,x,I,W,X,ae;return c.expressions?c.expressions[0]:(ae=(X=(W=(I=(x=(g=c.left)!=null?g:c.test)!=null?x:c.callee)!=null?I:c.object)!=null?W:c.tag)!=null?X:c.argument)!=null?ae:c.expression}function hs(c){if(c.expressions)return["expressions",0];if(c.left)return["left"];if(c.test)return["test"];if(c.object)return["object"];if(c.callee)return["callee"];if(c.tag)return["tag"];if(c.argument)return["argument"];if(c.expression)return["expression"];throw new Error("Unexpected node has no left side.")}var os=Zn(["Line","CommentLine","SingleLine","HashbangComment","HTMLOpen","HTMLClose","Hashbang","InterpreterDirective"]),js=Zn(["ExportDefaultDeclaration","DeclareExportDeclaration","ExportNamedDeclaration","ExportAllDeclaration","DeclareExportAllDeclaration"]),dr=Zn(["ArrayExpression","TupleExpression"]),Qr=Zn(["ObjectExpression","RecordExpression"]);function gs(c){return c.type==="NumericLiteral"||c.type==="Literal"&&typeof c.value=="number"}function ei(c){return c.type==="UnaryExpression"&&(c.operator==="+"||c.operator==="-")&&gs(c.argument)}function Rs(c){return c.type==="StringLiteral"||c.type==="Literal"&&typeof c.value=="string"}function co(c){return c.type==="RegExpLiteral"||c.type==="Literal"&&!!c.regex}var oa=Zn(["Literal","BooleanLiteral","BigIntLiteral","DecimalLiteral","DirectiveLiteral","NullLiteral","NumericLiteral","RegExpLiteral","StringLiteral"]),na=Zn(["Identifier","ThisExpression","Super","PrivateName","PrivateIdentifier","Import"]),re=Zn(["ObjectTypeAnnotation","TSTypeLiteral","TSMappedType"]),P=Zn(["FunctionExpression","ArrowFunctionExpression"]);function V(c){return c.type==="FunctionExpression"||c.type==="ArrowFunctionExpression"&&c.body.type==="BlockStatement"}function Y(c){return Fi(c)&&c.callee.type==="Identifier"&&["async","inject","fakeAsync","waitForAsync"].includes(c.callee.name)}var te=Zn(["JSXElement","JSXFragment"]);function we(c){return c.method&&c.kind==="init"||c.kind==="get"||c.kind==="set"}function Ce(c){return(c.type==="ObjectTypeProperty"||c.type==="ObjectTypeInternalSlot")&&!c.static&&!c.method&&c.kind!=="get"&&c.kind!=="set"&&c.value.type==="FunctionTypeAnnotation"}function We(c){return(c.type==="TypeAnnotation"||c.type==="TSTypeAnnotation")&&c.typeAnnotation.type==="FunctionTypeAnnotation"&&!c.static&&!hr(c,c.typeAnnotation)}var Dt=Zn(["BinaryExpression","LogicalExpression","NGPipeExpression"]);function jt(c){return rt(c)||c.type==="BindExpression"&&!!c.object}var xn=Zn(["TSThisType","NullLiteralTypeAnnotation","BooleanLiteralTypeAnnotation","StringLiteralTypeAnnotation","BigIntLiteralTypeAnnotation","NumberLiteralTypeAnnotation","TSLiteralType","TSTemplateLiteralType"]);function Tn(c){return Pn(c)||Js(c)||xn(c)||(c.type==="GenericTypeAnnotation"||c.type==="TSTypeReference")&&!c.typeParameters}function mi(c){let g=/^(?:before|after)(?:Each|All)$/;return c.callee.type==="Identifier"&&c.arguments.length===1&&g.test(c.callee.name)}var vi=["it","it.only","it.skip","describe","describe.only","describe.skip","test","test.only","test.skip","test.step","test.describe","test.describe.only","test.describe.parallel","test.describe.parallel.only","test.describe.serial","test.describe.serial.only","skip","xit","xdescribe","xtest","fit","fdescribe","ftest"];function ws(c){return Pi(c,vi)}function ho(c,g){if(c.type!=="CallExpression")return!1;if(c.arguments.length===1){if(Y(c)&&g&&ho(g))return P(c.arguments[0]);if(mi(c))return Y(c.arguments[0])}else if((c.arguments.length===2||c.arguments.length===3)&&(c.arguments[0].type==="TemplateLiteral"||Rs(c.arguments[0]))&&ws(c.callee))return c.arguments[2]&&!gs(c.arguments[2])?!1:(c.arguments.length===2?P(c.arguments[1]):V(c.arguments[1])&&Xi(c.arguments[1]).length<=1)||Y(c.arguments[1]);return!1}var pr=c=>g=>((g==null?void 0:g.type)==="ChainExpression"&&(g=g.expression),c(g)),Fi=pr(Zn(["CallExpression","OptionalCallExpression"])),rt=pr(Zn(["MemberExpression","OptionalMemberExpression"]));function so(c){let g="expressions";c.type==="TSTemplateLiteralType"&&(g="types");let x=c[g];return x.length===0?!1:x.every(I=>{if(Os(I)||To(I))return!0})}function To(c,{maxDepth:g=Number.POSITIVE_INFINITY}={}){if(si(c))return!1;if(c.type==="ChainExpression")return To(c.expression,{maxDepth:g});if(!rt(c))return!1;let x=c,I=0;for(;rt(x)&&I++<=g;)if(!Os(x.property)||(x=x.object,si(x)))return!1;return Os(x)}function Os(c){return si(c)?!1:oa(c)||na(c)}function ds(c,g=5){return Oo(c,g)<=g}function Oo(c,g){let x=0;for(let I in c){let W=c[I];if(W&&typeof W=="object"&&typeof W.type=="string"&&(x++,x+=Oo(W,g-x)),x>g)return x}return x}var nr=.25;function wi(c,g){let{printWidth:x}=g;if(si(c))return!1;let I=x*nr;if(c.type==="ThisExpression"||c.type==="Identifier"&&c.name.length<=I||ei(c)&&!si(c.argument))return!0;let W=c.type==="Literal"&&"regex"in c&&c.regex.pattern||c.type==="RegExpLiteral"&&c.pattern;return W?W.length<=I:Rs(c)?ar(go(c),g).length<=I:c.type==="TemplateLiteral"?c.expressions.length===0&&c.quasis[0].value.raw.length<=I&&!c.quasis[0].value.raw.includes(`
`):c.type==="UnaryExpression"?wi(c.argument,{printWidth:x}):c.type==="CallExpression"&&c.arguments.length===0&&c.callee.type==="Identifier"?c.callee.name.length<=I-2:oa(c)}function Mn(c,g){return te(g)?Ys(g):si(g,Ai.Leading,x=>Vn(c,Ui(x)))}function ks(c,g){return g.parser!=="json"&&g.parser!=="jsonc"&&Rs(c.key)&&go(c.key).slice(1,-1)===c.key.value&&(cs(c.key.value)&&!(g.parser==="babel-ts"&&c.type==="ClassProperty"||g.parser==="typescript"&&c.type==="PropertyDefinition")||jo(c.key.value)&&String(Number(c.key.value))===c.key.value&&(g.parser==="babel"||g.parser==="acorn"||g.parser==="espree"||g.parser==="meriyah"||g.parser==="__babel_estree"))}function jo(c){return/^(?:\d+|\d+\.\d+)$/.test(c)}function Zr(c){return c.quasis.some(g=>g.value.raw.includes(`
`))}function aa(c,g){return(c.type==="TemplateLiteral"&&Zr(c)||c.type==="TaggedTemplateExpression"&&Zr(c.quasi))&&!Vn(g,di(c),{backwards:!0})}function ka(c){if(!si(c))return!1;let g=pi(!1,Zo(c,Ai.Dangling),-1);return g&&!bn(g)}function fa(c){if(c.length<=1)return!1;let g=0;for(let x of c)if(P(x)){if(g+=1,g>1)return!0}else if(Fi(x)){for(let I of Vs(x))if(P(I))return!0}return!1}function ps(c){let{node:g,parent:x,key:I}=c;return I==="callee"&&Fi(g)&&Fi(x)&&x.arguments.length>0&&g.arguments.length>x.arguments.length}var no=new Set(["!","-","+","~"]);function Eo(c,g=2){var I;if(g<=0)return!1;if(c.type==="ChainExpression"||c.type==="TSNonNullExpression")return Eo(c.expression,g);let x=W=>Eo(W,g-1);if(co(c))return Ie((I=c.pattern)!=null?I:c.regex.pattern)<=5;if(oa(c)||na(c)||c.type==="ArgumentPlaceholder")return!0;if(c.type==="TemplateLiteral")return c.quasis.every(W=>!W.value.raw.includes(`
`))&&c.expressions.every(x);if(Qr(c))return c.properties.every(W=>!W.computed&&(W.shorthand||W.value&&x(W.value)));if(dr(c))return c.elements.every(W=>W===null||x(W));if(ul(c)){if(c.type==="ImportExpression"||Eo(c.callee,g)){let W=Vs(c);return W.length<=g&&W.every(x)}return!1}return rt(c)?Eo(c.object,g)&&Eo(c.property,g):c.type==="UnaryExpression"&&no.has(c.operator)||c.type==="UpdateExpression"?Eo(c.argument,g):!1}function go(c){var x;var g;return(x=(g=c.extra)==null?void 0:g.raw)!=null?x:c.raw}function Xo(c){return c}function Ae(c,g="es5"){return c.trailingComma==="es5"&&g==="es5"||c.trailingComma==="all"&&(g==="all"||g==="es5")}function Z(c,g){switch(c.type){case"BinaryExpression":case"LogicalExpression":case"AssignmentExpression":case"NGPipeExpression":return Z(c.left,g);case"MemberExpression":case"OptionalMemberExpression":return Z(c.object,g);case"TaggedTemplateExpression":return c.tag.type==="FunctionExpression"?!1:Z(c.tag,g);case"CallExpression":case"OptionalCallExpression":return c.callee.type==="FunctionExpression"?!1:Z(c.callee,g);case"ConditionalExpression":return Z(c.test,g);case"UpdateExpression":return!c.prefix&&Z(c.argument,g);case"BindExpression":return c.object&&Z(c.object,g);case"SequenceExpression":return Z(c.expressions[0],g);case"ChainExpression":case"TSSatisfiesExpression":case"TSAsExpression":case"TSNonNullExpression":case"AsExpression":case"AsConstExpression":case"SatisfiesExpression":return Z(c.expression,g);default:return g(c)}}var pe={"==":!0,"!=":!0,"===":!0,"!==":!0},Ne={"*":!0,"/":!0,"%":!0},Be={">>":!0,">>>":!0,"<<":!0};function ut(c,g){return!(Xt(g)!==Xt(c)||c==="**"||pe[c]&&pe[g]||g==="%"&&Ne[c]||c==="%"&&Ne[g]||g!==c&&Ne[g]&&Ne[c]||Be[c]&&Be[g])}var Ft=new Map([["|>"],["??"],["||"],["&&"],["|"],["^"],["&"],["==","===","!=","!=="],["<",">","<=",">=","in","instanceof"],[">>","<<",">>>"],["+","-"],["*","/","%"],["**"]].flatMap((c,g)=>c.map(x=>[x,g])));function Xt(c){return Ft.get(c)}function mn(c){return!!Be[c]||c==="|"||c==="^"||c==="&"}function ri(c){var g;if(c.rest)return!0;let x=Xi(c);return((g=pi(!1,x,-1))==null?void 0:g.type)==="RestElement"}var rr=new WeakMap;function Xi(c){if(rr.has(c))return rr.get(c);let g=[];return c.this&&g.push(c.this),Array.isArray(c.parameters)?g.push(...c.parameters):Array.isArray(c.params)&&g.push(...c.params),c.rest&&g.push(c.rest),rr.set(c,g),g}function Vo(c,g){let{node:x}=c,I=0,W=X=>g(X,I++);x.this&&c.call(W,"this"),Array.isArray(x.parameters)?c.each(W,"parameters"):Array.isArray(x.params)&&c.each(W,"params"),x.rest&&c.call(W,"rest")}var yo=new WeakMap;function Vs(c){if(yo.has(c))return yo.get(c);if(c.type==="ChainExpression")return Vs(c.expression);let g=c.arguments;return c.type==="ImportExpression"&&(g=[c.source],c.attributes&&g.push(c.attributes),c.options&&g.push(c.options)),yo.set(c,g),g}function ko(c,g){let{node:x}=c;if(x.type==="ChainExpression")return c.call(()=>ko(c,g),"expression");x.type==="ImportExpression"?(c.call(I=>g(I,0),"source"),x.attributes&&c.call(I=>g(I,1),"attributes"),x.options&&c.call(I=>g(I,1),"options")):c.each(g,"arguments")}function Uo(c,g){let x=[];if(c.type==="ChainExpression"&&x.push("expression"),c.type==="ImportExpression"){if(g===0||g===(c.attributes||c.options?-2:-1))return[...x,"source"];if(c.attributes&&(g===1||g===-1))return[...x,"attributes"];if(c.options&&(g===1||g===-1))return[...x,"options"];throw new RangeError("Invalid argument index")}if(g<0&&(g=c.arguments.length+g),g<0||g>=c.arguments.length)throw new RangeError("Invalid argument index");return[...x,"arguments",g]}function la(c){return c.value.trim()==="prettier-ignore"&&!c.unignore}function Ys(c){return(c==null?void 0:c.prettierIgnore)||si(c,Ai.PrettierIgnore)}var Ai={Leading:2,Trailing:4,Dangling:8,Block:16,Line:32,PrettierIgnore:64,First:128,Last:256},ll=(c,g)=>{if(typeof c=="function"&&(g=c,c=0),c||g)return(x,I,W)=>!(c&Ai.Leading&&!x.leading||c&Ai.Trailing&&!x.trailing||c&Ai.Dangling&&(x.leading||x.trailing)||c&Ai.Block&&!bn(x)||c&Ai.Line&&!os(x)||c&Ai.First&&I!==0||c&Ai.Last&&I!==W.length-1||c&Ai.PrettierIgnore&&!la(x)||g&&!g(x))};function si(c,g,x){if(!Ve(c==null?void 0:c.comments))return!1;let I=ll(g,x);return I?c.comments.some(I):!0}function Zo(c,g,x){if(!Array.isArray(c==null?void 0:c.comments))return[];let I=ll(g,x);return I?c.comments.filter(I):c.comments}var ma=(c,{originalText:g})=>Fe(g,Ui(c));function ul(c){return Fi(c)||c.type==="NewExpression"||c.type==="ImportExpression"}function ia(c){return c&&(c.type==="ObjectProperty"||c.type==="Property"&&!we(c))}var Ro=Zn(["TSAsExpression","TSSatisfiesExpression","AsExpression","AsConstExpression","SatisfiesExpression"]),La=Zn(["UnionTypeAnnotation","TSUnionType"]),Ar=Zn(["IntersectionTypeAnnotation","TSIntersectionType"]),il=new Set(["range","raw","comments","leadingComments","trailingComments","innerComments","extra","start","end","loc","flags","errors","tokens"]),Jo=c=>{for(let g of c.quasis)delete g.value};function J(c,g,x){var I,W;if(c.type==="Program"&&delete g.sourceType,(c.type==="BigIntLiteral"||c.type==="BigIntLiteralTypeAnnotation")&&g.value&&(g.value=g.value.toLowerCase()),(c.type==="BigIntLiteral"||c.type==="Literal")&&g.bigint&&(g.bigint=g.bigint.toLowerCase()),c.type==="DecimalLiteral"&&(g.value=Number(g.value)),c.type==="Literal"&&g.decimal&&(g.decimal=Number(g.decimal)),c.type==="EmptyStatement"||c.type==="JSXText"||c.type==="JSXExpressionContainer"&&(c.expression.type==="Literal"||c.expression.type==="StringLiteral")&&c.expression.value===" ")return null;if((c.type==="Property"||c.type==="ObjectProperty"||c.type==="MethodDefinition"||c.type==="ClassProperty"||c.type==="ClassMethod"||c.type==="PropertyDefinition"||c.type==="TSDeclareMethod"||c.type==="TSPropertySignature"||c.type==="ObjectTypeProperty")&&typeof c.key=="object"&&c.key&&(c.key.type==="Literal"||c.key.type==="NumericLiteral"||c.key.type==="StringLiteral"||c.key.type==="Identifier")&&delete g.key,c.type==="JSXElement"&&c.openingElement.name.name==="style"&&c.openingElement.attributes.some(ae=>ae.type==="JSXAttribute"&&ae.name.name==="jsx"))for(let{type:ae,expression:Ke}of g.children)ae==="JSXExpressionContainer"&&Ke.type==="TemplateLiteral"&&Jo(Ke);c.type==="JSXAttribute"&&c.name.name==="css"&&c.value.type==="JSXExpressionContainer"&&c.value.expression.type==="TemplateLiteral"&&Jo(g.value.expression),c.type==="JSXAttribute"&&((I=c.value)==null?void 0:I.type)==="Literal"&&/["']|&quot;|&apos;/.test(c.value.value)&&(g.value.value=Dr(!1,g.value.value,/["']|&quot;|&apos;/g,'"'));let X=c.expression||c.callee;if(c.type==="Decorator"&&X.type==="CallExpression"&&X.callee.name==="Component"&&X.arguments.length===1){let ae=c.expression.arguments[0].properties;for(let[Ke,yt]of g.expression.arguments[0].properties.entries())switch(ae[Ke].key.name){case"styles":dr(yt.value)&&Jo(yt.value.elements[0]);break;case"template":yt.value.type==="TemplateLiteral"&&Jo(yt.value);break}}if(c.type==="TaggedTemplateExpression"&&(c.tag.type==="MemberExpression"||c.tag.type==="Identifier"&&(c.tag.name==="gql"||c.tag.name==="graphql"||c.tag.name==="css"||c.tag.name==="md"||c.tag.name==="markdown"||c.tag.name==="html")||c.tag.type==="CallExpression")&&Jo(g.quasi),c.type==="TemplateLiteral"&&((W=c.leadingComments)!=null&&W.some(ae=>bn(ae)&&["GraphQL","HTML"].some(Ke=>ae.value===` ${Ke} `))||x.type==="CallExpression"&&x.callee.name==="graphql"||!c.leadingComments)&&Jo(g),(c.type==="TSIntersectionType"||c.type==="TSUnionType")&&c.types.length===1)return g.types[0];c.type==="ChainExpression"&&c.expression.type==="TSNonNullExpression"&&([g.type,g.expression.type]=[g.expression.type,g.type])}J.ignoredProperties=il;var Ee=J,je="string",Je="array",Ct="cursor",Nt="indent",pn="align",ai="trim",zi="group",as="fill",Pr="if-break",fr="indent-if-break",_o="line-suffix",Co="line-suffix-boundary",De="line",He="label",ht="break-parent",vt=new Set([Ct,Nt,pn,ai,zi,as,Pr,fr,_o,Co,De,He,ht]);function Bt(c){if(typeof c=="string")return je;if(Array.isArray(c))return Je;if(!c)return;let{type:g}=c;if(vt.has(g))return g}var zt=Bt,Ot=c=>new Intl.ListFormat("en-US",{type:"disjunction"}).format(c);function mt(c){let g=c===null?"null":typeof c;if(g!=="string"&&g!=="object")return`Unexpected doc '${g}', 
Expected it to be 'string' or 'object'.`;if(zt(c))throw new Error("doc is valid.");let x=Object.prototype.toString.call(c);if(x!=="[object Object]")return`Unexpected doc '${x}'.`;let I=Ot([...vt].map(W=>`'${W}'`));return`Unexpected doc.type '${c.type}'.
Expected it to be ${I}.`}var on=class extends Error{constructor(g){super(mt(g));$n(this,"name","InvalidDocError");this.doc=g}},En=on,kn={};function yi(c,g,x,I){let W=[c];for(;W.length>0;){let X=W.pop();if(X===kn){x(W.pop());continue}x&&W.push(X,kn);let ae=zt(X);if(!ae)throw new En(X);if((g==null?void 0:g(X))!==!1)switch(ae){case Je:case as:{let Ke=ae===Je?X:X.parts;for(let yt=Ke.length,Ue=yt-1;Ue>=0;--Ue)W.push(Ke[Ue]);break}case Pr:W.push(X.flatContents,X.breakContents);break;case zi:if(I&&X.expandedStates)for(let Ke=X.expandedStates.length,yt=Ke-1;yt>=0;--yt)W.push(X.expandedStates[yt]);else W.push(X.contents);break;case pn:case Nt:case fr:case He:case _o:W.push(X.contents);break;case je:case Ct:case ai:case Co:case De:case ht:break;default:throw new En(X)}}}var gi=yi,Wi=()=>{},Xn=Wi,Yn=Wi;function Ht(c){return Xn(c),{type:Nt,contents:c}}function $r(c,g){return Xn(g),{type:pn,contents:g,n:c}}function kt(c,g={}){return Xn(c),Yn(g.expandedStates,!0),{type:zi,id:g.id,contents:c,break:!!g.shouldBreak,expandedStates:g.expandedStates}}function Bi(c){return $r(Number.NEGATIVE_INFINITY,c)}function Tr(c){return $r(-1,c)}function Mi(c,g){return kt(c[0],qi(Jt({},g),{expandedStates:c}))}function Ur(c){return Yn(c),{type:as,parts:c}}function Ei(c,g="",x={}){return Xn(c),g!==""&&Xn(g),{type:Pr,breakContents:c,flatContents:g,groupId:x.groupId}}function Xr(c,g){return Xn(c),{type:fr,contents:c,groupId:g.groupId,negate:g.negate}}function lr(c){return Xn(c),{type:_o,contents:c}}var Ci={type:Co},Or={type:ht},Gs={type:De,hard:!0},sr={type:De,hard:!0,literal:!0},Sn={type:De},ln={type:De,soft:!0},Yt=[Gs,Or],ti=[sr,Or],oo={type:Ct};function Oi(c,g){Xn(c),Yn(g);let x=[];for(let I=0;I<g.length;I++)I!==0&&x.push(c),x.push(g[I]);return x}function Fr(c,g,x){Xn(c);let I=c;if(g>0){for(let W=0;W<Math.floor(g/x);++W)I=Ht(I);I=$r(g%x,I),I=$r(Number.NEGATIVE_INFINITY,I)}return I}function _s(c,g){return Xn(g),c?{type:He,label:c,contents:g}:g}var Lo=c=>{if(Array.isArray(c))return c;if(c.type!==as)throw new Error(`Expect doc to be 'array' or '${as}'.`);return c.parts};function or(c,g){if(typeof c=="string")return g(c);let x=new Map;return I(c);function I(X){if(x.has(X))return x.get(X);let ae=W(X);return x.set(X,ae),ae}function W(X){switch(zt(X)){case Je:return g(X.map(I));case as:return g(qi(Jt({},X),{parts:X.parts.map(I)}));case Pr:return g(qi(Jt({},X),{breakContents:I(X.breakContents),flatContents:I(X.flatContents)}));case zi:{let{expandedStates:ae,contents:Ke}=X;return ae?(ae=ae.map(I),Ke=ae[0]):Ke=I(Ke),g(qi(Jt({},X),{contents:Ke,expandedStates:ae}))}case pn:case Nt:case fr:case He:case _o:return g(qi(Jt({},X),{contents:I(X.contents)}));case je:case Ct:case ai:case Co:case De:case ht:return g(X);default:throw new En(X)}}}function kr(c,g,x){let I=x,W=!1;function X(ae){if(W)return!1;let Ke=g(ae);Ke!==void 0&&(W=!0,I=Ke)}return gi(c,X),I}function zn(c){if(c.type===zi&&c.break||c.type===De&&c.hard||c.type===ht)return!0}function Ri(c){return kr(c,zn,!1)}function vo(c){if(c.length>0){let g=pi(!1,c,-1);!g.expandedStates&&!g.break&&(g.break="propagated")}return null}function zo(c){let g=new Set,x=[];function I(X){if(X.type===ht&&vo(x),X.type===zi){if(x.push(X),g.has(X))return!1;g.add(X)}}function W(X){X.type===zi&&x.pop().break&&vo(x)}gi(c,I,W,!0)}function Jr(c){return c.type===De&&!c.hard?c.soft?"":" ":c.type===Pr?c.flatContents:c}function oi(c){return or(c,Jr)}function Ti(c){switch(zt(c)){case as:if(c.parts.every(g=>g===""))return"";break;case zi:if(!c.contents&&!c.id&&!c.break&&!c.expandedStates)return"";if(c.contents.type===zi&&c.contents.id===c.id&&c.contents.break===c.break&&c.contents.expandedStates===c.expandedStates)return c.contents;break;case pn:case Nt:case fr:case _o:if(!c.contents)return"";break;case Pr:if(!c.flatContents&&!c.breakContents)return"";break;case Je:{let g=[];for(let x of c){if(!x)continue;let[I,...W]=Array.isArray(x)?x:[x];typeof I=="string"&&typeof pi(!1,g,-1)=="string"?g[g.length-1]+=I:g.push(I),g.push(...W)}return g.length===0?"":g.length===1?g[0]:g}case je:case Ct:case ai:case Co:case De:case He:case ht:break;default:throw new En(c)}return c}function Mo(c){return or(c,g=>Ti(g))}function Ws(c,g=ti){return or(c,x=>typeof x=="string"?Oi(g,x.split(`
`)):x)}function eo(c){if(c.type===De)return!0}function Es(c){return kr(c,eo,!1)}function xs(c,g){return c.type===He?qi(Jt({},c),{contents:g(c.contents)}):g(c)}function Io(c){let g=`*${c.value}*`.split(`
`);return g.length>1&&g.every(x=>x.trimStart()[0]==="*")}var Li=Io;function Qa(c,g){let x=c.node;if(os(x))return g.originalText.slice(di(x),Ui(x)).trimEnd();if(bn(x))return Li(x)?pu(x):["/*",Ws(x.value),"*/"];throw new Error("Not a comment: "+JSON.stringify(x))}function pu(c){let g=c.value.split(`
`);return["/*",Oi(Yt,g.map((x,I)=>I===0?x.trimEnd():" "+(I<g.length-1?x.trim():x.trimStart()))),"*/"]}var Ll={};Nn(Ll,{endOfLine:()=>Ps,ownLine:()=>es,remaining:()=>Rn});function $a(c){let g=c.type||c.kind||"(unknown type)",x=String(c.name||c.id&&(typeof c.id=="object"?c.id.name:c.id)||c.key&&(typeof c.key=="object"?c.key.name:c.key)||c.value&&(typeof c.value=="object"?"":String(c.value))||c.operator||"");return x.length>20&&(x=x.slice(0,19)+"\u2026"),g+(x?" "+x:"")}function wa(c,g){var x;((x=c.comments)!=null?x:c.comments=[]).push(g),g.printed=!1,g.nodeDescription=$a(c)}function Ko(c,g){g.leading=!0,g.trailing=!1,wa(c,g)}function So(c,g,x){g.leading=!1,g.trailing=!1,x&&(g.marker=x),wa(c,g)}function Ks(c,g){g.leading=!1,g.trailing=!0,wa(c,g)}function Ia(c,g){let x=null,I=g;for(;I!==x;)x=I,I=Tt(c,I),I=wo(c,I),I=en(c,I),I=hi(c,I);return I}var Xa=Ia;function Jl(c,g){let x=Xa(c,g);return x===!1?"":c.charAt(x)}var ua=Jl;function Ea(c,g,x){for(let I=g;I<x;++I)if(c.charAt(I)===`
`)return!0;return!1}var Mt=Ea;function $i(c){return bn(c)&&c.value[0]==="*"&&/@(?:type|satisfies)\b/.test(c.value)}var Ir=$i;function es(c){return[iu,ja,Ga,eu,Ca,po,fu,wu,Cs,Ka,Va,Ji,nu,Ya,$o,Br,Na,Ru].some(g=>g(c))}function Ps(c){return[cl,Ga,ja,Ji,Ca,po,fu,wu,$o,ls,Cl,Va,ra,Br,ru,jl].some(g=>g(c))}function Rn(c){return[iu,Ca,po,tu,_a,Ya,Va,Eu,$l,Bu,Br,Cu].some(g=>g(c))}function Po(c,g){let x=(c.body||c.properties).find(({type:I})=>I!=="EmptyStatement");x?Ko(x,g):So(c,g)}function Nr(c,g){c.type==="BlockStatement"?Po(c,g):Ko(c,g)}function cl({comment:c,followingNode:g}){return g&&Ir(c)?(Ko(g,c),!0):!1}function Ca({comment:c,precedingNode:g,enclosingNode:x,followingNode:I,text:W}){if((x==null?void 0:x.type)!=="IfStatement"||!I)return!1;if(ua(W,Ui(c))===")")return Ks(g,c),!0;if(g===x.consequent&&I===x.alternate){if(g.type==="BlockStatement")Ks(g,c);else{let X=os(c)||c.loc.start.line===c.loc.end.line,ae=c.loc.start.line===g.loc.start.line;X&&ae?Ks(g,c):So(x,c)}return!0}return I.type==="BlockStatement"?(Po(I,c),!0):I.type==="IfStatement"?(Nr(I.consequent,c),!0):x.consequent===I?(Ko(I,c),!0):!1}function po({comment:c,precedingNode:g,enclosingNode:x,followingNode:I,text:W}){return(x==null?void 0:x.type)!=="WhileStatement"||!I?!1:ua(W,Ui(c))===")"?(Ks(g,c),!0):I.type==="BlockStatement"?(Po(I,c),!0):x.body===I?(Ko(I,c),!0):!1}function fu({comment:c,precedingNode:g,enclosingNode:x,followingNode:I}){return(x==null?void 0:x.type)!=="TryStatement"&&(x==null?void 0:x.type)!=="CatchClause"||!I?!1:x.type==="CatchClause"&&g?(Ks(g,c),!0):I.type==="BlockStatement"?(Po(I,c),!0):I.type==="TryStatement"?(Nr(I.finalizer,c),!0):I.type==="CatchClause"?(Nr(I.body,c),!0):!1}function eu({comment:c,enclosingNode:g,followingNode:x}){return rt(g)&&(x==null?void 0:x.type)==="Identifier"?(Ko(g,c),!0):!1}function Na({comment:c,enclosingNode:g,followingNode:x,options:I}){return!I.experimentalTernaries||!((g==null?void 0:g.type)==="ConditionalExpression"||(g==null?void 0:g.type)==="ConditionalTypeAnnotation"||(g==null?void 0:g.type)==="TSConditionalType")?!1:(x==null?void 0:x.type)==="ConditionalExpression"||(x==null?void 0:x.type)==="ConditionalTypeAnnotation"||(x==null?void 0:x.type)==="TSConditionalType"?(So(g,c),!0):!1}function ja({comment:c,precedingNode:g,enclosingNode:x,followingNode:I,text:W,options:X}){let ae=g&&!Mt(W,Ui(g),di(c));return(!g||!ae)&&((x==null?void 0:x.type)==="ConditionalExpression"||(x==null?void 0:x.type)==="ConditionalTypeAnnotation"||(x==null?void 0:x.type)==="TSConditionalType")&&I?X.experimentalTernaries&&x.alternate===I&&!(bn(c)&&!Mt(X.originalText,di(c),Ui(c)))?(So(x,c),!0):(Ko(I,c),!0):!1}function tu({comment:c,precedingNode:g,enclosingNode:x}){return ia(x)&&x.shorthand&&x.key===g&&x.value.type==="AssignmentPattern"?(Ks(x.value.left,c),!0):!1}var Du=new Set(["ClassDeclaration","ClassExpression","DeclareClass","DeclareInterface","InterfaceDeclaration","TSInterfaceDeclaration"]);function wu({comment:c,precedingNode:g,enclosingNode:x,followingNode:I}){if(Du.has(x==null?void 0:x.type)){if(Ve(x.decorators)&&(I==null?void 0:I.type)!=="Decorator")return Ks(pi(!1,x.decorators,-1),c),!0;if(x.body&&I===x.body)return Po(x.body,c),!0;if(I){if(x.superClass&&I===x.superClass&&g&&(g===x.id||g===x.typeParameters))return Ks(g,c),!0;for(let W of["implements","extends","mixins"])if(x[W]&&I===x[W][0])return g&&(g===x.id||g===x.typeParameters||g===x.superClass)?Ks(g,c):So(x,c,W),!0}}return!1}var qo=new Set(["ClassMethod","ClassProperty","PropertyDefinition","TSAbstractPropertyDefinition","TSAbstractMethodDefinition","TSDeclareMethod","MethodDefinition","ClassAccessorProperty","AccessorProperty","TSAbstractAccessorProperty"]);function Ya({comment:c,precedingNode:g,enclosingNode:x,text:I}){return x&&g&&ua(I,Ui(c))==="("&&(x.type==="Property"||x.type==="TSDeclareMethod"||x.type==="TSAbstractMethodDefinition")&&g.type==="Identifier"&&x.key===g&&ua(I,Ui(g))!==":"||(g==null?void 0:g.type)==="Decorator"&&qo.has(x==null?void 0:x.type)?(Ks(g,c),!0):!1}var No=new Set(["FunctionDeclaration","FunctionExpression","ClassMethod","MethodDefinition","ObjectMethod"]);function $l({comment:c,precedingNode:g,enclosingNode:x,text:I}){return ua(I,Ui(c))!=="("?!1:g&&No.has(x==null?void 0:x.type)?(Ks(g,c),!0):!1}function Eu({comment:c,enclosingNode:g,text:x}){if((g==null?void 0:g.type)!=="ArrowFunctionExpression")return!1;let I=Xa(x,Ui(c));return I!==!1&&x.slice(I,I+2)==="=>"?(So(g,c),!0):!1}function _a({comment:c,enclosingNode:g,text:x}){return ua(x,Ui(c))!==")"?!1:g&&(Yr(g)&&Xi(g).length===0||ul(g)&&Vs(g).length===0)?(So(g,c),!0):((g==null?void 0:g.type)==="MethodDefinition"||(g==null?void 0:g.type)==="TSAbstractMethodDefinition")&&Xi(g.value).length===0?(So(g.value,c),!0):!1}function Ga({comment:c,precedingNode:g,enclosingNode:x,followingNode:I,text:W}){return(g==null?void 0:g.type)==="FunctionTypeParam"&&(x==null?void 0:x.type)==="FunctionTypeAnnotation"&&(I==null?void 0:I.type)!=="FunctionTypeParam"||((g==null?void 0:g.type)==="Identifier"||(g==null?void 0:g.type)==="AssignmentPattern"||(g==null?void 0:g.type)==="ObjectPattern"||(g==null?void 0:g.type)==="ArrayPattern"||(g==null?void 0:g.type)==="RestElement"||(g==null?void 0:g.type)==="TSParameterProperty")&&Yr(x)&&ua(W,Ui(c))===")"?(Ks(g,c),!0):!bn(c)&&((x==null?void 0:x.type)==="FunctionDeclaration"||(x==null?void 0:x.type)==="FunctionExpression"||(x==null?void 0:x.type)==="ObjectMethod")&&(I==null?void 0:I.type)==="BlockStatement"&&x.body===I&&Xa(W,Ui(c))===di(I)?(Po(I,c),!0):!1}function $o({comment:c,enclosingNode:g}){return(g==null?void 0:g.type)==="LabeledStatement"?(Ko(g,c),!0):!1}function Br({comment:c,enclosingNode:g}){return((g==null?void 0:g.type)==="ContinueStatement"||(g==null?void 0:g.type)==="BreakStatement")&&!g.label?(Ks(g,c),!0):!1}function ls({comment:c,precedingNode:g,enclosingNode:x}){return Fi(x)&&g&&x.callee===g&&x.arguments.length>0?(Ko(x.arguments[0],c),!0):!1}function Ka({comment:c,precedingNode:g,enclosingNode:x,followingNode:I}){return La(x)?(la(c)&&(I.prettierIgnore=!0,c.unignore=!0),g?(Ks(g,c),!0):!1):(La(I)&&la(c)&&(I.types[0].prettierIgnore=!0,c.unignore=!0),!1)}function Cl({comment:c,enclosingNode:g}){return ia(g)?(Ko(g,c),!0):!1}function Va({comment:c,enclosingNode:g,followingNode:x,ast:I,isLastComment:W}){var X;return((X=I==null?void 0:I.body)==null?void 0:X.length)===0?(W?So(I,c):Ko(I,c),!0):(g==null?void 0:g.type)==="Program"&&g.body.length===0&&!Ve(g.directives)?(W?So(g,c):Ko(g,c),!0):(x==null?void 0:x.type)==="Program"&&x.body.length===0&&(g==null?void 0:g.type)==="ModuleExpression"?(So(x,c),!0):!1}function Cs({comment:c,enclosingNode:g}){return(g==null?void 0:g.type)==="ForInStatement"||(g==null?void 0:g.type)==="ForOfStatement"?(Ko(g,c),!0):!1}function Ji({comment:c,precedingNode:g,enclosingNode:x,text:I}){if((x==null?void 0:x.type)==="ImportSpecifier"||(x==null?void 0:x.type)==="ExportSpecifier")return Ko(x,c),!0;let W=(g==null?void 0:g.type)==="ImportSpecifier"&&(x==null?void 0:x.type)==="ImportDeclaration",X=(g==null?void 0:g.type)==="ExportSpecifier"&&(x==null?void 0:x.type)==="ExportNamedDeclaration";return(W||X)&&Vn(I,Ui(c))?(Ks(g,c),!0):!1}function nu({comment:c,enclosingNode:g}){return(g==null?void 0:g.type)==="AssignmentPattern"?(Ko(g,c),!0):!1}var Hs=new Set(["VariableDeclarator","AssignmentExpression","TypeAlias","TSTypeAliasDeclaration"]),yl=new Set(["ObjectExpression","RecordExpression","ArrayExpression","TupleExpression","TemplateLiteral","TaggedTemplateExpression","ObjectTypeAnnotation","TSTypeLiteral"]);function ra({comment:c,enclosingNode:g,followingNode:x}){return Hs.has(g==null?void 0:g.type)&&x&&(yl.has(x.type)||bn(c))?(Ko(x,c),!0):!1}function Cu({comment:c,enclosingNode:g,followingNode:x,text:I}){return!x&&((g==null?void 0:g.type)==="TSMethodSignature"||(g==null?void 0:g.type)==="TSDeclareFunction"||(g==null?void 0:g.type)==="TSAbstractMethodDefinition")&&ua(I,Ui(c))===";"?(Ks(g,c),!0):!1}function iu({comment:c,enclosingNode:g,followingNode:x}){if(la(c)&&(g==null?void 0:g.type)==="TSMappedType"&&(x==null?void 0:x.type)==="TSTypeParameter"&&x.constraint)return g.prettierIgnore=!0,c.unignore=!0,!0}function Bu({comment:c,precedingNode:g,enclosingNode:x,followingNode:I}){return(x==null?void 0:x.type)!=="TSMappedType"?!1:(I==null?void 0:I.type)==="TSTypeParameter"&&I.name?(Ko(I.name,c),!0):(g==null?void 0:g.type)==="TSTypeParameter"&&g.constraint?(Ks(g.constraint,c),!0):!1}function ru({comment:c,enclosingNode:g,followingNode:x}){return!g||g.type!=="SwitchCase"||g.test||!x||x!==g.consequent[0]?!1:(x.type==="BlockStatement"&&os(c)?Po(x,c):So(g,c),!0)}function jl({comment:c,precedingNode:g,enclosingNode:x,followingNode:I}){return La(g)&&((x.type==="TSArrayType"||x.type==="ArrayTypeAnnotation")&&!I||Ar(x))?(Ks(pi(!1,g.types,-1),c),!0):!1}function Ru({comment:c,enclosingNode:g,precedingNode:x,followingNode:I}){if(((g==null?void 0:g.type)==="ObjectPattern"||(g==null?void 0:g.type)==="ArrayPattern")&&(I==null?void 0:I.type)==="TSTypeAnnotation")return x?Ks(x,c):So(g,c),!0}var Yr=Zn(["ArrowFunctionExpression","FunctionExpression","FunctionDeclaration","ObjectMethod","ClassMethod","TSDeclareFunction","TSCallSignatureDeclaration","TSConstructSignatureDeclaration","TSMethodSignature","TSConstructorType","TSFunctionType","TSDeclareMethod"]),d=new Set(["EmptyStatement","TemplateElement","Import","TSEmptyBodyFunctionExpression","ChainExpression"]);function a(c){return!d.has(c.type)}function m(c,g){var x;if((g.parser==="typescript"||g.parser==="flow"||g.parser==="acorn"||g.parser==="espree"||g.parser==="meriyah"||g.parser==="__babel_estree")&&c.type==="MethodDefinition"&&((x=c.value)==null?void 0:x.type)==="FunctionExpression"&&Xi(c.value).length===0&&!c.value.returnType&&!Ve(c.value.typeParameters)&&c.value.body)return[...c.decorators||[],c.key,c.value.body]}function S(c){let{node:g,parent:x}=c;return(te(g)||x&&(x.type==="JSXSpreadAttribute"||x.type==="JSXSpreadChild"||La(x)||(x.type==="ClassDeclaration"||x.type==="ClassExpression")&&x.superClass===g))&&(!Ys(g)||La(x))}function $(c,{parser:g}){if(g==="flow"||g==="babel-flow")return c=Dr(!1,c,/[\s(]/g,""),c===""||c==="/*"||c==="/*::"}function ne(c){switch(c){case"cr":return"\r";case"crlf":return`\r
`;default:return`
`}}var ve=Symbol("MODE_BREAK"),qe=Symbol("MODE_FLAT"),ct=Symbol("cursor");function at(){return{value:"",length:0,queue:[]}}function On(c,g){return Yi(c,{type:"indent"},g)}function ui(c,g,x){return g===Number.NEGATIVE_INFINITY?c.root||at():g<0?Yi(c,{type:"dedent"},x):g?g.type==="root"?qi(Jt({},c),{root:c}):Yi(c,{type:typeof g=="string"?"stringAlign":"numberAlign",n:g},x):c}function Yi(c,g,x){let I=g.type==="dedent"?c.queue.slice(0,-1):[...c.queue,g],W="",X=0,ae=0,Ke=0;for(let hn of I)switch(hn.type){case"indent":pt(),x.useTabs?yt(1):Ue(x.tabWidth);break;case"stringAlign":pt(),W+=hn.n,X+=hn.n.length;break;case"numberAlign":ae+=1,Ke+=hn.n;break;default:throw new Error(`Unexpected type '${hn.type}'`)}return Et(),qi(Jt({},c),{value:W,length:X,queue:I});function yt(hn){W+="	".repeat(hn),X+=x.tabWidth*hn}function Ue(hn){W+=" ".repeat(hn),X+=hn}function pt(){x.useTabs?dt():Et()}function dt(){ae>0&&yt(ae),cn()}function Et(){Ke>0&&Ue(Ke),cn()}function cn(){ae=0,Ke=0}}function ji(c){let g=0,x=0,I=c.length;e:for(;I--;){let W=c[I];if(W===ct){x++;continue}for(let X=W.length-1;X>=0;X--){let ae=W[X];if(ae===" "||ae==="	")g++;else{c[I]=W.slice(0,X+1);break e}}}if(g>0||x>0)for(c.length=I+1;x-- >0;)c.push(ct);return g}function Ls(c,g,x,I,W,X){if(x===Number.POSITIVE_INFINITY)return!0;let ae=g.length,Ke=[c],yt=[];for(;x>=0;){if(Ke.length===0){if(ae===0)return!0;Ke.push(g[--ae]);continue}let{mode:Ue,doc:pt}=Ke.pop();switch(zt(pt)){case je:yt.push(pt),x-=Ie(pt);break;case Je:case as:{let dt=Lo(pt);for(let Et=dt.length-1;Et>=0;Et--)Ke.push({mode:Ue,doc:dt[Et]});break}case Nt:case pn:case fr:case He:Ke.push({mode:Ue,doc:pt.contents});break;case ai:x+=ji(yt);break;case zi:{if(X&&pt.break)return!1;let dt=pt.break?ve:Ue,Et=pt.expandedStates&&dt===ve?pi(!1,pt.expandedStates,-1):pt.contents;Ke.push({mode:dt,doc:Et});break}case Pr:{let dt=(pt.groupId?W[pt.groupId]||qe:Ue)===ve?pt.breakContents:pt.flatContents;dt&&Ke.push({mode:Ue,doc:dt});break}case De:if(Ue===ve||pt.hard)return!0;pt.soft||(yt.push(" "),x--);break;case _o:I=!0;break;case Co:if(I)return!1;break}}return!1}function Zs(c,g){let x={},I=g.printWidth,W=ne(g.endOfLine),X=0,ae=[{ind:at(),mode:ve,doc:c}],Ke=[],yt=!1,Ue=[],pt=0;for(zo(c);ae.length>0;){let{ind:Et,mode:cn,doc:hn}=ae.pop();switch(zt(hn)){case je:{let _r=W!==`
`?Dr(!1,hn,`
`,W):hn;Ke.push(_r),ae.length>0&&(X+=Ie(_r));break}case Je:for(let _r=hn.length-1;_r>=0;_r--)ae.push({ind:Et,mode:cn,doc:hn[_r]});break;case Ct:if(pt>=2)throw new Error("There are too many 'cursor' in doc.");Ke.push(ct),pt++;break;case Nt:ae.push({ind:On(Et,g),mode:cn,doc:hn.contents});break;case pn:ae.push({ind:ui(Et,hn.n,g),mode:cn,doc:hn.contents});break;case ai:X-=ji(Ke);break;case zi:switch(cn){case qe:if(!yt){ae.push({ind:Et,mode:hn.break?ve:qe,doc:hn.contents});break}case ve:{yt=!1;let _r={ind:Et,mode:qe,doc:hn.contents},li=I-X,qn=Ue.length>0;if(!hn.break&&Ls(_r,ae,li,qn,x))ae.push(_r);else if(hn.expandedStates){let ur=pi(!1,hn.expandedStates,-1);if(hn.break){ae.push({ind:Et,mode:ve,doc:ur});break}else for(let zr=1;zr<hn.expandedStates.length+1;zr++)if(zr>=hn.expandedStates.length){ae.push({ind:Et,mode:ve,doc:ur});break}else{let ro=hn.expandedStates[zr],Ss={ind:Et,mode:qe,doc:ro};if(Ls(Ss,ae,li,qn,x)){ae.push(Ss);break}}}else ae.push({ind:Et,mode:ve,doc:hn.contents});break}}hn.id&&(x[hn.id]=pi(!1,ae,-1).mode);break;case as:{let _r=I-X,{parts:li}=hn;if(li.length===0)break;let[qn,ur]=li,zr={ind:Et,mode:qe,doc:qn},ro={ind:Et,mode:ve,doc:qn},Ss=Ls(zr,[],_r,Ue.length>0,x,!0);if(li.length===1){Ss?ae.push(zr):ae.push(ro);break}let fi={ind:Et,mode:qe,doc:ur},Qo={ind:Et,mode:ve,doc:ur};if(li.length===2){Ss?ae.push(fi,zr):ae.push(Qo,ro);break}li.splice(0,2);let Pu={ind:Et,mode:cn,doc:Ur(li)},Wo=li[0];Ls({ind:Et,mode:qe,doc:[qn,ur,Wo]},[],_r,Ue.length>0,x,!0)?ae.push(Pu,fi,zr):Ss?ae.push(Pu,Qo,zr):ae.push(Pu,Qo,ro);break}case Pr:case fr:{let _r=hn.groupId?x[hn.groupId]:cn;if(_r===ve){let li=hn.type===Pr?hn.breakContents:hn.negate?hn.contents:Ht(hn.contents);li&&ae.push({ind:Et,mode:cn,doc:li})}if(_r===qe){let li=hn.type===Pr?hn.flatContents:hn.negate?Ht(hn.contents):hn.contents;li&&ae.push({ind:Et,mode:cn,doc:li})}break}case _o:Ue.push({ind:Et,mode:cn,doc:hn.contents});break;case Co:Ue.length>0&&ae.push({ind:Et,mode:cn,doc:Gs});break;case De:switch(cn){case qe:if(hn.hard)yt=!0;else{hn.soft||(Ke.push(" "),X+=1);break}case ve:if(Ue.length>0){ae.push({ind:Et,mode:cn,doc:hn},...Ue.reverse()),Ue.length=0;break}hn.literal?Et.root?(Ke.push(W,Et.root.value),X=Et.root.length):(Ke.push(W),X=0):(X-=ji(Ke),Ke.push(W+Et.value),X=Et.length);break}break;case He:ae.push({ind:Et,mode:cn,doc:hn.contents});break;case ht:break;default:throw new En(hn)}ae.length===0&&Ue.length>0&&(ae.push(...Ue.reverse()),Ue.length=0)}let dt=Ke.indexOf(ct);if(dt!==-1){let Et=Ke.indexOf(ct,dt+1),cn=Ke.slice(0,dt).join(""),hn=Ke.slice(dt+1,Et).join(""),_r=Ke.slice(Et+1).join("");return{formatted:cn+hn+_r,cursorNodeStart:cn.length,cursorNodeText:hn}}return{formatted:Ke.join("")}}function ea(c,g,x=0){let I=0;for(let W=x;W<c.length;++W)c[W]==="	"?I=I+g-I%g:I++;return I}var sa=ea;function Pa(c,g){let x=c.lastIndexOf(`
`);return x===-1?0:sa(c.slice(x+1).match(/^[\t ]*/)[0],g)}var Lu=Pa;function Vl(c,g,x){let{node:I}=c;if(I.type==="TemplateLiteral"&&Sl(c)){let Ue=Su(c,x,g);if(Ue)return Ue}let W="expressions";I.type==="TSTemplateLiteralType"&&(W="types");let X=[],ae=c.map(g,W),Ke=so(I);Ke&&(ae=ae.map(Ue=>Zs(Ue,qi(Jt({},x),{printWidth:Number.POSITIVE_INFINITY})).formatted)),X.push(Ci,"`");let yt=0;return c.each(({index:Ue,node:pt})=>{if(X.push(g()),pt.tail)return;let{tabWidth:dt}=x,Et=pt.value.raw,cn=Et.includes(`
`)?Lu(Et,dt):yt;yt=cn;let hn=ae[Ue];if(!Ke){let li=I[W][Ue],qn=Mt(x.originalText,Ui(pt),di(I.quasis[Ue+1]));if(!qn){let ur=Zs(hn,qi(Jt({},x),{printWidth:Number.POSITIVE_INFINITY})).formatted;ur.includes(`
`)?qn=!0:hn=ur}qn&&(si(li)||rt(li)||li.type==="ConditionalExpression"||li.type==="SequenceExpression"||Ro(li)||Dt(li))&&(hn=[Ht([ln,hn]),ln])}let _r=cn===0&&Et.endsWith(`
`)?$r(Number.NEGATIVE_INFINITY,hn):Fr(hn,cn,dt);X.push(kt(["${",_r,Ci,"}"]))},"quasis"),X.push("`"),X}function Ju(c){let g=c("quasi");return _s(g.label&&Jt({tagged:!0},g.label),[c("tag"),c("typeParameters"),Ci,g])}function Su(c,g,x){let{node:I}=c,W=I.quasis[0].value.raw.trim().split(/\s*\|\s*/);if(W.length>1||W.some(X=>X.length>0)){g.__inJestEach=!0;let X=c.map(x,"expressions");g.__inJestEach=!1;let ae=[],Ke=X.map(Et=>"${"+Zs(Et,qi(Jt({},g),{printWidth:Number.POSITIVE_INFINITY,endOfLine:"lf"})).formatted+"}"),yt=[{hasLineBreak:!1,cells:[]}];for(let Et=1;Et<I.quasis.length;Et++){let cn=pi(!1,yt,-1),hn=Ke[Et-1];cn.cells.push(hn),hn.includes(`
`)&&(cn.hasLineBreak=!0),I.quasis[Et].value.raw.includes(`
`)&&yt.push({hasLineBreak:!1,cells:[]})}let Ue=Math.max(W.length,...yt.map(Et=>Et.cells.length)),pt=Array.from({length:Ue}).fill(0),dt=[{cells:W},...yt.filter(Et=>Et.cells.length>0)];for(let{cells:Et}of dt.filter(cn=>!cn.hasLineBreak))for(let[cn,hn]of Et.entries())pt[cn]=Math.max(pt[cn],Ie(hn));return ae.push(Ci,"`",Ht([Yt,Oi(Yt,dt.map(Et=>Oi(" | ",Et.cells.map((cn,hn)=>Et.hasLineBreak?cn:cn+" ".repeat(pt[hn]-Ie(cn))))))]),Yt,"`"),ae}}function Sc(c,g){let{node:x}=c,I=g();return si(x)&&(I=kt([Ht([ln,I]),ln])),["${",I,Ci,"}"]}function mu(c,g){return c.map(x=>Sc(x,g),"expressions")}function rl(c,g){return or(c,x=>typeof x=="string"?g?Dr(!1,x,/(\\*)`/g,"$1$1\\`"):$u(x):x)}function $u(c){return Dr(!1,c,/([\\`]|\${)/g,"\\$1")}function Sl({node:c,parent:g}){let x=/^[fx]?(?:describe|it|test)$/;return g.type==="TaggedTemplateExpression"&&g.quasi===c&&g.tag.type==="MemberExpression"&&g.tag.property.type==="Identifier"&&g.tag.property.name==="each"&&(g.tag.object.type==="Identifier"&&x.test(g.tag.object.name)||g.tag.object.type==="MemberExpression"&&g.tag.object.property.type==="Identifier"&&(g.tag.object.property.name==="only"||g.tag.object.property.name==="skip")&&g.tag.object.object.type==="Identifier"&&x.test(g.tag.object.object.name))}var ju=[(c,g)=>c.type==="ObjectExpression"&&g==="properties",(c,g)=>c.type==="CallExpression"&&c.callee.type==="Identifier"&&c.callee.name==="Component"&&g==="arguments",(c,g)=>c.type==="Decorator"&&g==="expression"];function hl(c){let g=I=>I.type==="TemplateLiteral",x=(I,W)=>ia(I)&&!I.computed&&I.key.type==="Identifier"&&I.key.name==="styles"&&W==="value";return c.match(g,(I,W)=>dr(I)&&W==="elements",x,...ju)||c.match(g,x,...ju)}function lc(c){return c.match(g=>g.type==="TemplateLiteral",(g,x)=>ia(g)&&!g.computed&&g.key.type==="Identifier"&&g.key.name==="template"&&x==="value",...ju)}function Za(c,g){return si(c,Ai.Block|Ai.Leading,({value:x})=>x===` ${g} `)}function gc({node:c,parent:g},x){return Za(c,x)||uc(g)&&Za(g,x)}function uc(c){return c.type==="AsConstExpression"||c.type==="TSAsExpression"&&c.typeAnnotation.type==="TSTypeReference"&&c.typeAnnotation.typeName.type==="Identifier"&&c.typeAnnotation.typeName.name==="const"}function O(c,g,x){return gl(this,null,function*(){let{node:I}=x,W=I.quasis.map(pt=>pt.value.raw),X=0,ae=W.reduce((pt,dt,Et)=>Et===0?dt:pt+"@prettier-placeholder-"+X+++"-id"+dt,""),Ke=yield c(ae,{parser:"scss"}),yt=mu(x,g),Ue=H(Ke,yt);if(!Ue)throw new Error("Couldn't insert all the expressions");return["`",Ht([Yt,Ue]),ln,"`"]})}function H(c,g){if(!Ve(g))return c;let x=0,I=or(Mo(c),W=>typeof W!="string"||!W.includes("@prettier-placeholder")?W:W.split(/@prettier-placeholder-(\d+)-id/).map((X,ae)=>ae%2===0?Ws(X):(x++,g[X])));return g.length===x?I:null}function se({node:c,parent:g,grandparent:x}){return x&&c.quasis&&g.type==="JSXExpressionContainer"&&x.type==="JSXElement"&&x.openingElement.name.name==="style"&&x.openingElement.attributes.some(I=>I.type==="JSXAttribute"&&I.name.name==="jsx")||(g==null?void 0:g.type)==="TaggedTemplateExpression"&&g.tag.type==="Identifier"&&g.tag.name==="css"||(g==null?void 0:g.type)==="TaggedTemplateExpression"&&g.tag.type==="MemberExpression"&&g.tag.object.name==="css"&&(g.tag.property.name==="global"||g.tag.property.name==="resolve")}function ge(c){return c.type==="Identifier"&&c.name==="styled"}function ue(c){return/^[A-Z]/.test(c.object.name)&&c.property.name==="extend"}function be({parent:c}){if(!c||c.type!=="TaggedTemplateExpression")return!1;let g=c.tag.type==="ParenthesizedExpression"?c.tag.expression:c.tag;switch(g.type){case"MemberExpression":return ge(g.object)||ue(g);case"CallExpression":return ge(g.callee)||g.callee.type==="MemberExpression"&&(g.callee.object.type==="MemberExpression"&&(ge(g.callee.object.object)||ue(g.callee.object))||g.callee.object.type==="CallExpression"&&ge(g.callee.object.callee));case"Identifier":return g.name==="css";default:return!1}}function ot({parent:c,grandparent:g}){return(g==null?void 0:g.type)==="JSXAttribute"&&c.type==="JSXExpressionContainer"&&g.name.type==="JSXIdentifier"&&g.name.name==="css"}function _t(c){if(se(c)||be(c)||ot(c)||hl(c))return O}var Rt=_t;function an(c,g,x){return gl(this,null,function*(){let{node:I}=x,W=I.quasis.length,X=mu(x,g),ae=[];for(let Ke=0;Ke<W;Ke++){let yt=I.quasis[Ke],Ue=Ke===0,pt=Ke===W-1,dt=yt.value.cooked,Et=dt.split(`
`),cn=Et.length,hn=X[Ke],_r=cn>2&&Et[0].trim()===""&&Et[1].trim()==="",li=cn>2&&Et[cn-1].trim()===""&&Et[cn-2].trim()==="",qn=Et.every(zr=>/^\s*(?:#[^\n\r]*)?$/.test(zr));if(!pt&&/#[^\n\r]*$/.test(Et[cn-1]))return null;let ur=null;qn?ur=Gt(Et):ur=yield c(dt,{parser:"graphql"}),ur?(ur=rl(ur,!1),!Ue&&_r&&ae.push(""),ae.push(ur),!pt&&li&&ae.push("")):!Ue&&!pt&&_r&&ae.push(""),hn&&ae.push(hn)}return["`",Ht([Yt,Oi(Yt,ae)]),Yt,"`"]})}function Gt(c){let g=[],x=!1,I=c.map(W=>W.trim());for(let[W,X]of I.entries())X!==""&&(I[W-1]===""&&x?g.push([Yt,X]):g.push(X),x=!0);return g.length===0?null:Oi(Yt,g)}function Ln({node:c,parent:g}){return gc({node:c,parent:g},"GraphQL")||g&&(g.type==="TaggedTemplateExpression"&&(g.tag.type==="MemberExpression"&&g.tag.object.name==="graphql"&&g.tag.property.name==="experimental"||g.tag.type==="Identifier"&&(g.tag.name==="gql"||g.tag.name==="graphql"))||g.type==="CallExpression"&&g.callee.type==="Identifier"&&g.callee.name==="graphql")}function Dn(c){if(Ln(c))return an}var nn=Dn,An=0;function ni(c,g,x,I,W){return gl(this,null,function*(){let{node:X}=I,ae=An;An=An+1>>>0;let Ke=qn=>`PRETTIER_HTML_PLACEHOLDER_${qn}_${ae}_IN_JS`,yt=X.quasis.map((qn,ur,zr)=>ur===zr.length-1?qn.value.cooked:qn.value.cooked+Ke(ur)).join(""),Ue=mu(I,x),pt=new RegExp(Ke("(\\d+)"),"g"),dt=0,Et=yield g(yt,{parser:c,__onHtmlRoot(qn){dt=qn.children.length}}),cn=or(Et,qn=>{if(typeof qn!="string")return qn;let ur=[],zr=qn.split(pt);for(let ro=0;ro<zr.length;ro++){let Ss=zr[ro];if(ro%2===0){Ss&&(Ss=$u(Ss),W.__embeddedInHtml&&(Ss=Dr(!1,Ss,/<\/(?=script\b)/gi,"<\\/")),ur.push(Ss));continue}let fi=Number(Ss);ur.push(Ue[fi])}return ur}),hn=/^\s/.test(yt)?" ":"",_r=/\s$/.test(yt)?" ":"",li=W.htmlWhitespaceSensitivity==="ignore"?Yt:hn&&_r?Sn:null;return li?kt(["`",Ht([li,kt(cn)]),li,"`"]):_s({hug:!1},kt(["`",hn,dt>1?Ht(kt(cn)):kt(cn),_r,"`"]))})}function er(c){return gc(c,"HTML")||c.match(g=>g.type==="TemplateLiteral",(g,x)=>g.type==="TaggedTemplateExpression"&&g.tag.type==="Identifier"&&g.tag.name==="html"&&x==="quasi")}var yr=ni.bind(void 0,"html"),Er=ni.bind(void 0,"angular");function ys(c){if(er(c))return yr;if(lc(c))return Er}var Ns=ys;function ao(c,g,x){return gl(this,null,function*(){let{node:I}=x,W=Dr(!1,I.quasis[0].value.raw,/((?:\\\\)*)\\`/g,(yt,Ue)=>"\\".repeat(Ue.length/2)+"`"),X=Bo(W),ae=X!=="";ae&&(W=Dr(!1,W,new RegExp(`^${X}`,"gm"),""));let Ke=rl(yield c(W,{parser:"markdown",__inJsTemplate:!0}),!0);return["`",ae?Ht([ln,Ke]):[ti,Bi(Ke)],ln,"`"]})}function Bo(c){let g=c.match(/^([^\S\n]*)\S/m);return g===null?"":g[1]}function to(c){if(Ja(c))return ao}function Ja({node:c,parent:g}){return(g==null?void 0:g.type)==="TaggedTemplateExpression"&&c.quasis.length===1&&g.tag.type==="Identifier"&&(g.tag.name==="md"||g.tag.name==="markdown")}var dl=to;function Al(c){let{node:g}=c;if(g.type!=="TemplateLiteral"||Fo(g))return;let x;for(let I of[Rt,nn,Ns,dl])if(x=I(c),!!x)return g.quasis.length===1&&g.quasis[0].value.raw.trim()===""?"``":(...W)=>gl(this,null,function*(){let X=yield x(...W);return X&&_s(Jt({embed:!0},X.label),X)})}function Fo({quasis:c}){return c.some(({value:{cooked:g}})=>g===null)}var ga=Al,Fa=In(Un(),1);function xo(c){if(!c.startsWith("#!"))return"";let g=c.indexOf(`
`);return g===-1?c:c.slice(0,g)}var vl=xo;function cc(c){let g=vl(c);g&&(c=c.slice(g.length+1));let x=(0,Fa.extract)(c),{pragmas:I,comments:W}=(0,Fa.parseWithComments)(x);return{shebang:g,text:c,pragmas:I,comments:W}}function su(c){let{shebang:g,text:x,pragmas:I,comments:W}=cc(c),X=(0,Fa.strip)(x),ae=(0,Fa.print)({pragmas:Jt({format:""},I),comments:W.trimStart()});return(g?`${g}
`:"")+ae+(X.startsWith(`
`)?`
`:`

`)+X}function Tl(c,g){let{originalText:x,[Symbol.for("comments")]:I,locStart:W,locEnd:X,[Symbol.for("printedComments")]:ae}=g,{node:Ke}=c,yt=W(Ke),Ue=X(Ke);for(let pt of I)W(pt)>=yt&&X(pt)<=Ue&&ae.add(pt);return x.slice(yt,Ue)}var ec=Tl;function Ol(c,g){var x,I,W,X,ae,Ke,yt;if(c.isRoot)return!1;let{node:Ue,key:pt,parent:dt}=c;if(g.__isInHtmlInterpolation&&!g.bracketSpacing&&Wl(Ue)&&Sa(c))return!0;if(gu(Ue))return!1;if(Ue.type==="Identifier"){if((x=Ue.extra)!=null&&x.parenthesized&&/^PRETTIER_HTML_PLACEHOLDER_\d+_\d+_IN_JS$/.test(Ue.name)||pt==="left"&&(Ue.name==="async"&&!dt.await||Ue.name==="let")&&dt.type==="ForOfStatement")return!0;if(Ue.name==="let"){let Et=(I=c.findAncestor(cn=>cn.type==="ForOfStatement"))==null?void 0:I.left;if(Et&&Z(Et,cn=>cn===Ue))return!0}if(pt==="object"&&Ue.name==="let"&&dt.type==="MemberExpression"&&dt.computed&&!dt.optional){let Et=c.findAncestor(hn=>hn.type==="ExpressionStatement"||hn.type==="ForStatement"||hn.type==="ForInStatement"),cn=Et?Et.type==="ExpressionStatement"?Et.expression:Et.type==="ForStatement"?Et.init:Et.left:void 0;if(cn&&Z(cn,hn=>hn===Ue))return!0}if(pt==="expression")switch(Ue.name){case"await":case"interface":case"module":case"using":case"yield":case"let":case"type":{let Et=c.findAncestor(cn=>!Ro(cn));if(Et!==dt&&Et.type==="ExpressionStatement")return!0}}return!1}if(Ue.type==="ObjectExpression"||Ue.type==="FunctionExpression"||Ue.type==="ClassExpression"||Ue.type==="DoExpression"){let Et=(W=c.findAncestor(cn=>cn.type==="ExpressionStatement"))==null?void 0:W.expression;if(Et&&Z(Et,cn=>cn===Ue))return!0}if(Ue.type==="ObjectExpression"){let Et=(X=c.findAncestor(cn=>cn.type==="ArrowFunctionExpression"))==null?void 0:X.body;if(Et&&Et.type!=="SequenceExpression"&&Et.type!=="AssignmentExpression"&&Z(Et,cn=>cn===Ue))return!0}switch(dt.type){case"ParenthesizedExpression":return!1;case"ClassDeclaration":case"ClassExpression":if(pt==="superClass"&&(Ue.type==="ArrowFunctionExpression"||Ue.type==="AssignmentExpression"||Ue.type==="AwaitExpression"||Ue.type==="BinaryExpression"||Ue.type==="ConditionalExpression"||Ue.type==="LogicalExpression"||Ue.type==="NewExpression"||Ue.type==="ObjectExpression"||Ue.type==="SequenceExpression"||Ue.type==="TaggedTemplateExpression"||Ue.type==="UnaryExpression"||Ue.type==="UpdateExpression"||Ue.type==="YieldExpression"||Ue.type==="TSNonNullExpression"||Ue.type==="ClassExpression"&&Ve(Ue.decorators)))return!0;break;case"ExportDefaultDeclaration":return hc(c,g)||Ue.type==="SequenceExpression";case"Decorator":if(pt==="expression"){if(rt(Ue)&&Ue.computed)return!0;let Et=!1,cn=!1,hn=Ue;for(;hn;)switch(hn.type){case"MemberExpression":cn=!0,hn=hn.object;break;case"CallExpression":if(cn||Et)return g.parser!=="typescript";Et=!0,hn=hn.callee;break;case"Identifier":return!1;case"TaggedTemplateExpression":return g.parser!=="typescript";default:return!0}return!0}break;case"TypeAnnotation":if(c.match(void 0,void 0,(Et,cn)=>cn==="returnType"&&Et.type==="ArrowFunctionExpression")&&el(Ue))return!0;break;case"BinaryExpression":if(pt==="left"&&(dt.operator==="in"||dt.operator==="instanceof")&&Ue.type==="UnaryExpression")return!0;break}switch(Ue.type){case"UpdateExpression":if(dt.type==="UnaryExpression")return Ue.prefix&&(Ue.operator==="++"&&dt.operator==="+"||Ue.operator==="--"&&dt.operator==="-");case"UnaryExpression":switch(dt.type){case"UnaryExpression":return Ue.operator===dt.operator&&(Ue.operator==="+"||Ue.operator==="-");case"BindExpression":return!0;case"MemberExpression":case"OptionalMemberExpression":return pt==="object";case"TaggedTemplateExpression":return!0;case"NewExpression":case"CallExpression":case"OptionalCallExpression":return pt==="callee";case"BinaryExpression":return pt==="left"&&dt.operator==="**";case"TSNonNullExpression":return!0;default:return!1}case"BinaryExpression":if(dt.type==="UpdateExpression"||Ue.operator==="in"&&Yc(c))return!0;if(Ue.operator==="|>"&&(ae=Ue.extra)!=null&&ae.parenthesized){let Et=c.grandparent;if(Et.type==="BinaryExpression"&&Et.operator==="|>")return!0}case"TSTypeAssertion":case"TSAsExpression":case"TSSatisfiesExpression":case"AsExpression":case"AsConstExpression":case"SatisfiesExpression":case"LogicalExpression":switch(dt.type){case"TSAsExpression":case"TSSatisfiesExpression":case"AsExpression":case"AsConstExpression":case"SatisfiesExpression":return!Ro(Ue);case"ConditionalExpression":return Ro(Ue);case"CallExpression":case"NewExpression":case"OptionalCallExpression":return pt==="callee";case"ClassExpression":case"ClassDeclaration":return pt==="superClass";case"TSTypeAssertion":case"TaggedTemplateExpression":case"UnaryExpression":case"JSXSpreadAttribute":case"SpreadElement":case"BindExpression":case"AwaitExpression":case"TSNonNullExpression":case"UpdateExpression":return!0;case"MemberExpression":case"OptionalMemberExpression":return pt==="object";case"AssignmentExpression":case"AssignmentPattern":return pt==="left"&&(Ue.type==="TSTypeAssertion"||Ro(Ue));case"LogicalExpression":if(Ue.type==="LogicalExpression")return dt.operator!==Ue.operator;case"BinaryExpression":{let{operator:Et,type:cn}=Ue;if(!Et&&cn!=="TSTypeAssertion")return!0;let hn=Xt(Et),_r=dt.operator,li=Xt(_r);return li>hn||pt==="right"&&li===hn||li===hn&&!ut(_r,Et)?!0:li<hn&&Et==="%"?_r==="+"||_r==="-":!!mn(_r)}default:return!1}case"SequenceExpression":switch(dt.type){case"ReturnStatement":return!1;case"ForStatement":return!1;case"ExpressionStatement":return pt!=="expression";case"ArrowFunctionExpression":return pt!=="body";default:return!0}case"YieldExpression":if(dt.type==="AwaitExpression")return!0;case"AwaitExpression":switch(dt.type){case"TaggedTemplateExpression":case"UnaryExpression":case"LogicalExpression":case"SpreadElement":case"TSAsExpression":case"TSSatisfiesExpression":case"TSNonNullExpression":case"AsExpression":case"AsConstExpression":case"SatisfiesExpression":case"BindExpression":return!0;case"MemberExpression":case"OptionalMemberExpression":return pt==="object";case"NewExpression":case"CallExpression":case"OptionalCallExpression":return pt==="callee";case"ConditionalExpression":return pt==="test";case"BinaryExpression":return!(!Ue.argument&&dt.operator==="|>");default:return!1}case"TSFunctionType":if(c.match(Et=>Et.type==="TSFunctionType",(Et,cn)=>cn==="typeAnnotation"&&Et.type==="TSTypeAnnotation",(Et,cn)=>cn==="returnType"&&Et.type==="ArrowFunctionExpression"))return!0;case"TSConditionalType":case"TSConstructorType":if(pt==="extendsType"&&dt.type==="TSConditionalType"){if(Ue.type==="TSConditionalType")return!0;let{typeAnnotation:Et}=Ue.returnType||Ue.typeAnnotation;if(Et.type==="TSTypePredicate"&&Et.typeAnnotation&&(Et=Et.typeAnnotation.typeAnnotation),Et.type==="TSInferType"&&Et.typeParameter.constraint)return!0}if(pt==="checkType"&&dt.type==="TSConditionalType")return!0;case"TSUnionType":case"TSIntersectionType":if((dt.type==="TSUnionType"||dt.type==="TSIntersectionType")&&dt.types.length>1&&(!Ue.types||Ue.types.length>1))return!0;case"TSInferType":if(Ue.type==="TSInferType"&&dt.type==="TSRestType")return!1;case"TSTypeOperator":return dt.type==="TSArrayType"||dt.type==="TSOptionalType"||dt.type==="TSRestType"||pt==="objectType"&&dt.type==="TSIndexedAccessType"||dt.type==="TSTypeOperator"||dt.type==="TSTypeAnnotation"&&c.grandparent.type.startsWith("TSJSDoc");case"TSTypeQuery":return pt==="objectType"&&dt.type==="TSIndexedAccessType"||pt==="elementType"&&dt.type==="TSArrayType";case"TypeofTypeAnnotation":return pt==="objectType"&&(dt.type==="IndexedAccessType"||dt.type==="OptionalIndexedAccessType")||pt==="elementType"&&dt.type==="ArrayTypeAnnotation";case"ArrayTypeAnnotation":return dt.type==="NullableTypeAnnotation";case"IntersectionTypeAnnotation":case"UnionTypeAnnotation":return dt.type==="ArrayTypeAnnotation"||dt.type==="NullableTypeAnnotation"||dt.type==="IntersectionTypeAnnotation"||dt.type==="UnionTypeAnnotation"||pt==="objectType"&&(dt.type==="IndexedAccessType"||dt.type==="OptionalIndexedAccessType");case"InferTypeAnnotation":case"NullableTypeAnnotation":return dt.type==="ArrayTypeAnnotation"||pt==="objectType"&&(dt.type==="IndexedAccessType"||dt.type==="OptionalIndexedAccessType");case"FunctionTypeAnnotation":{if(c.match(void 0,(cn,hn)=>hn==="typeAnnotation"&&cn.type==="TypeAnnotation",(cn,hn)=>hn==="returnType"&&cn.type==="ArrowFunctionExpression")||c.match(void 0,(cn,hn)=>hn==="typeAnnotation"&&cn.type==="TypePredicate",(cn,hn)=>hn==="typeAnnotation"&&cn.type==="TypeAnnotation",(cn,hn)=>hn==="returnType"&&cn.type==="ArrowFunctionExpression"))return!0;let Et=dt.type==="NullableTypeAnnotation"?c.grandparent:dt;return Et.type==="UnionTypeAnnotation"||Et.type==="IntersectionTypeAnnotation"||Et.type==="ArrayTypeAnnotation"||pt==="objectType"&&(Et.type==="IndexedAccessType"||Et.type==="OptionalIndexedAccessType")||pt==="checkType"&&dt.type==="ConditionalTypeAnnotation"||pt==="extendsType"&&dt.type==="ConditionalTypeAnnotation"&&Ue.returnType.type==="InferTypeAnnotation"&&Ue.returnType.typeParameter.bound||Et.type==="NullableTypeAnnotation"||dt.type==="FunctionTypeParam"&&dt.name===null&&Xi(Ue).some(cn=>{var hn;return((hn=cn.typeAnnotation)==null?void 0:hn.type)==="NullableTypeAnnotation"})}case"ConditionalTypeAnnotation":if(pt==="extendsType"&&dt.type==="ConditionalTypeAnnotation"&&Ue.type==="ConditionalTypeAnnotation"||pt==="checkType"&&dt.type==="ConditionalTypeAnnotation")return!0;case"OptionalIndexedAccessType":return pt==="objectType"&&dt.type==="IndexedAccessType";case"StringLiteral":case"NumericLiteral":case"Literal":if(typeof Ue.value=="string"&&dt.type==="ExpressionStatement"&&!dt.directive){let Et=c.grandparent;return Et.type==="Program"||Et.type==="BlockStatement"}return pt==="object"&&dt.type==="MemberExpression"&&typeof Ue.value=="number";case"AssignmentExpression":{let Et=c.grandparent;return pt==="body"&&dt.type==="ArrowFunctionExpression"?!0:pt==="key"&&(dt.type==="ClassProperty"||dt.type==="PropertyDefinition")&&dt.computed||(pt==="init"||pt==="update")&&dt.type==="ForStatement"?!1:dt.type==="ExpressionStatement"?Ue.left.type==="ObjectPattern":!(pt==="key"&&dt.type==="TSPropertySignature"||dt.type==="AssignmentExpression"||dt.type==="SequenceExpression"&&Et.type==="ForStatement"&&(Et.init===dt||Et.update===dt)||pt==="value"&&dt.type==="Property"&&Et.type==="ObjectPattern"&&Et.properties.includes(dt)||dt.type==="NGChainedExpression")}case"ConditionalExpression":switch(dt.type){case"TaggedTemplateExpression":case"UnaryExpression":case"SpreadElement":case"BinaryExpression":case"LogicalExpression":case"NGPipeExpression":case"ExportDefaultDeclaration":case"AwaitExpression":case"JSXSpreadAttribute":case"TSTypeAssertion":case"TypeCastExpression":case"TSAsExpression":case"TSSatisfiesExpression":case"AsExpression":case"AsConstExpression":case"SatisfiesExpression":case"TSNonNullExpression":return!0;case"NewExpression":case"CallExpression":case"OptionalCallExpression":return pt==="callee";case"ConditionalExpression":return g.experimentalTernaries?!1:pt==="test";case"MemberExpression":case"OptionalMemberExpression":return pt==="object";default:return!1}case"FunctionExpression":switch(dt.type){case"NewExpression":case"CallExpression":case"OptionalCallExpression":return pt==="callee";case"TaggedTemplateExpression":return!0;default:return!1}case"ArrowFunctionExpression":switch(dt.type){case"BinaryExpression":return dt.operator!=="|>"||((Ke=Ue.extra)==null?void 0:Ke.parenthesized);case"NewExpression":case"CallExpression":case"OptionalCallExpression":return pt==="callee";case"MemberExpression":case"OptionalMemberExpression":return pt==="object";case"TSAsExpression":case"TSSatisfiesExpression":case"AsExpression":case"AsConstExpression":case"SatisfiesExpression":case"TSNonNullExpression":case"BindExpression":case"TaggedTemplateExpression":case"UnaryExpression":case"LogicalExpression":case"AwaitExpression":case"TSTypeAssertion":return!0;case"ConditionalExpression":return pt==="test";default:return!1}case"ClassExpression":switch(dt.type){case"NewExpression":return pt==="callee";default:return!1}case"OptionalMemberExpression":case"OptionalCallExpression":case"CallExpression":case"MemberExpression":if(Ma(c))return!0;case"TaggedTemplateExpression":case"TSNonNullExpression":if(pt==="callee"&&(dt.type==="BindExpression"||dt.type==="NewExpression")){let Et=Ue;for(;Et;)switch(Et.type){case"CallExpression":case"OptionalCallExpression":return!0;case"MemberExpression":case"OptionalMemberExpression":case"BindExpression":Et=Et.object;break;case"TaggedTemplateExpression":Et=Et.tag;break;case"TSNonNullExpression":Et=Et.expression;break;default:return!1}}return!1;case"BindExpression":return pt==="callee"&&(dt.type==="BindExpression"||dt.type==="NewExpression")||pt==="object"&&rt(dt);case"NGPipeExpression":return!(dt.type==="NGRoot"||dt.type==="NGMicrosyntaxExpression"||dt.type==="ObjectProperty"&&!((yt=Ue.extra)!=null&&yt.parenthesized)||dr(dt)||pt==="arguments"&&Fi(dt)||pt==="right"&&dt.type==="NGPipeExpression"||pt==="property"&&dt.type==="MemberExpression"||dt.type==="AssignmentExpression");case"JSXFragment":case"JSXElement":return pt==="callee"||pt==="left"&&dt.type==="BinaryExpression"&&dt.operator==="<"||!dr(dt)&&dt.type!=="ArrowFunctionExpression"&&dt.type!=="AssignmentExpression"&&dt.type!=="AssignmentPattern"&&dt.type!=="BinaryExpression"&&dt.type!=="NewExpression"&&dt.type!=="ConditionalExpression"&&dt.type!=="ExpressionStatement"&&dt.type!=="JsExpressionRoot"&&dt.type!=="JSXAttribute"&&dt.type!=="JSXElement"&&dt.type!=="JSXExpressionContainer"&&dt.type!=="JSXFragment"&&dt.type!=="LogicalExpression"&&!Fi(dt)&&!ia(dt)&&dt.type!=="ReturnStatement"&&dt.type!=="ThrowStatement"&&dt.type!=="TypeCastExpression"&&dt.type!=="VariableDeclarator"&&dt.type!=="YieldExpression";case"TSInstantiationExpression":return pt==="object"&&rt(dt)}return!1}var gu=Zn(["BlockStatement","BreakStatement","ClassBody","ClassDeclaration","ClassMethod","ClassProperty","PropertyDefinition","ClassPrivateProperty","ContinueStatement","DebuggerStatement","DeclareClass","DeclareExportAllDeclaration","DeclareExportDeclaration","DeclareFunction","DeclareInterface","DeclareModule","DeclareModuleExports","DeclareVariable","DeclareEnum","DoWhileStatement","EnumDeclaration","ExportAllDeclaration","ExportDefaultDeclaration","ExportNamedDeclaration","ExpressionStatement","ForInStatement","ForOfStatement","ForStatement","FunctionDeclaration","IfStatement","ImportDeclaration","InterfaceDeclaration","LabeledStatement","MethodDefinition","ReturnStatement","SwitchStatement","ThrowStatement","TryStatement","TSDeclareFunction","TSEnumDeclaration","TSImportEqualsDeclaration","TSInterfaceDeclaration","TSModuleDeclaration","TSNamespaceExportDeclaration","TypeAlias","VariableDeclaration","WhileStatement","WithStatement"]);function Yc(c){let g=0,{node:x}=c;for(;x;){let I=c.getParentNode(g++);if((I==null?void 0:I.type)==="ForStatement"&&I.init===x)return!0;x=I}return!1}function el(c){return Xs(c,g=>g.type==="ObjectTypeAnnotation"&&Xs(g,x=>x.type==="FunctionTypeAnnotation"))}function Wl(c){return Qr(c)}function Sa(c){let{parent:g,key:x}=c;switch(g.type){case"NGPipeExpression":if(x==="arguments"&&c.isLast)return c.callParent(Sa);break;case"ObjectProperty":if(x==="value")return c.callParent(()=>c.key==="properties"&&c.isLast);break;case"BinaryExpression":case"LogicalExpression":if(x==="right")return c.callParent(Sa);break;case"ConditionalExpression":if(x==="alternate")return c.callParent(Sa);break;case"UnaryExpression":if(g.prefix)return c.callParent(Sa);break}return!1}function hc(c,g){let{node:x,parent:I}=c;return x.type==="FunctionExpression"||x.type==="ClassExpression"?I.type==="ExportDefaultDeclaration"||!Ol(c,g):!Ts(x)||I.type!=="ExportDefaultDeclaration"&&Ol(c,g)?!1:c.call(()=>hc(c,g),...hs(x))}function Ma(c){let{node:g,parent:x,grandparent:I,key:W}=c;return!!((g.type==="OptionalMemberExpression"||g.type==="OptionalCallExpression")&&(W==="object"&&x.type==="MemberExpression"||W==="callee"&&(x.type==="CallExpression"||x.type==="NewExpression")||x.type==="TSNonNullExpression"&&I.type==="MemberExpression"&&I.object===x)||c.match(()=>g.type==="CallExpression"||g.type==="MemberExpression",(X,ae)=>ae==="expression"&&X.type==="ChainExpression")&&(c.match(void 0,void 0,(X,ae)=>ae==="callee"&&(X.type==="CallExpression"&&!X.optional||X.type==="NewExpression")||ae==="object"&&X.type==="MemberExpression"&&!X.optional)||c.match(void 0,void 0,(X,ae)=>ae==="expression"&&X.type==="TSNonNullExpression",(X,ae)=>ae==="object"&&X.type==="MemberExpression"))||c.match(()=>g.type==="CallExpression"||g.type==="MemberExpression",(X,ae)=>ae==="expression"&&X.type==="TSNonNullExpression",(X,ae)=>ae==="expression"&&X.type==="ChainExpression",(X,ae)=>ae==="object"&&X.type==="MemberExpression"))}var Hl=Ol;function sl(c,g){let x=g-1;x=Tt(c,x,{backwards:!0}),x=hi(c,x,{backwards:!0}),x=Tt(c,x,{backwards:!0});let I=hi(c,x,{backwards:!0});return x!==I}var ya=sl,Ul=()=>!0;function xl(c,g){let x=c.node;return x.printed=!0,g.printer.printComment(c,g)}function kl(c,g){var x;let I=c.node,W=[xl(c,g)],{printer:X,originalText:ae,locStart:Ke,locEnd:yt}=g;if((x=X.isBlockComment)!=null&&x.call(X,I)){let pt=Vn(ae,yt(I))?Vn(ae,Ke(I),{backwards:!0})?Yt:Sn:" ";W.push(pt)}else W.push(Yt);let Ue=hi(ae,Tt(ae,yt(I)));return Ue!==!1&&Vn(ae,Ue)&&W.push(Yt),W}function Au(c,g,x){var I;let W=c.node,X=xl(c,g),{printer:ae,originalText:Ke,locStart:yt}=g,Ue=(I=ae.isBlockComment)==null?void 0:I.call(ae,W);if(x!=null&&x.hasLineSuffix&&!(x!=null&&x.isBlock)||Vn(Ke,yt(W),{backwards:!0})){let pt=ya(Ke,yt(W));return{doc:lr([Yt,pt?Yt:"",X]),isBlock:Ue,hasLineSuffix:!0}}return!Ue||x!=null&&x.hasLineSuffix?{doc:[lr([" ",X]),Or],isBlock:Ue,hasLineSuffix:!0}:{doc:[" ",X],isBlock:Ue,hasLineSuffix:!1}}function Yo(c,g,x={}){let{node:I}=c;if(!Ve(I==null?void 0:I.comments))return"";let{indent:W=!1,marker:X,filter:ae=Ul}=x,Ke=[];if(c.each(({node:Ue})=>{Ue.leading||Ue.trailing||Ue.marker!==X||!ae(Ue)||Ke.push(xl(c,g))},"comments"),Ke.length===0)return"";let yt=Oi(Yt,Ke);return W?Ht([Yt,yt]):yt}function fo(c,g){let x=c.node;if(!x)return{};let I=g[Symbol.for("printedComments")];if((x.comments||[]).filter(Ke=>!I.has(Ke)).length===0)return{leading:"",trailing:""};let W=[],X=[],ae;return c.each(()=>{let Ke=c.node;if(I!=null&&I.has(Ke))return;let{leading:yt,trailing:Ue}=Ke;yt?W.push(kl(c,g)):Ue&&(ae=Au(c,g,ae),X.push(ae.doc))},"comments"),{leading:W,trailing:X}}function ta(c,g,x){let{leading:I,trailing:W}=fo(c,x);return!I&&!W?g:xs(g,X=>[I,X,W])}var tc=class extends Error{constructor(g,x,I="type"){super(`Unexpected ${x} node ${I}: ${JSON.stringify(g[I])}.`);$n(this,"name","UnexpectedNodeError");this.node=g}},is=tc;function C(c){if(typeof c!="string")throw new TypeError("Expected a string");return c.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}var R,G=class{constructor(c){Si(this,R,void 0),Ii(this,R,new Set(c))}getLeadingWhitespaceCount(c){let g=gn(this,R),x=0;for(let I=0;I<c.length&&g.has(c.charAt(I));I++)x++;return x}getTrailingWhitespaceCount(c){let g=gn(this,R),x=0;for(let I=c.length-1;I>=0&&g.has(c.charAt(I));I--)x++;return x}getLeadingWhitespace(c){let g=this.getLeadingWhitespaceCount(c);return c.slice(0,g)}getTrailingWhitespace(c){let g=this.getTrailingWhitespaceCount(c);return c.slice(c.length-g)}hasLeadingWhitespace(c){return gn(this,R).has(c.charAt(0))}hasTrailingWhitespace(c){return gn(this,R).has(pi(!1,c,-1))}trimStart(c){let g=this.getLeadingWhitespaceCount(c);return c.slice(g)}trimEnd(c){let g=this.getTrailingWhitespaceCount(c);return c.slice(0,c.length-g)}trim(c){return this.trimEnd(this.trimStart(c))}split(c,g=!1){let x=`[${C([...gn(this,R)].join(""))}]+`,I=new RegExp(g?`(${x})`:x);return c.split(I)}hasWhitespaceCharacter(c){let g=gn(this,R);return Array.prototype.some.call(c,x=>g.has(x))}hasNonWhitespaceCharacter(c){let g=gn(this,R);return Array.prototype.some.call(c,x=>!g.has(x))}isWhitespaceOnly(c){let g=gn(this,R);return Array.prototype.every.call(c,x=>g.has(x))}};R=new WeakMap;var oe=G,Se=new oe(` 
\r	`),xt=c=>c===""||c===Sn||c===Yt||c===ln;function E(c,g,x){var I,W,X;let{node:ae}=c;if(ae.type==="JSXElement"&&Hn(ae))return[x("openingElement"),x("closingElement")];let Ke=ae.type==="JSXElement"?x("openingElement"):x("openingFragment"),yt=ae.type==="JSXElement"?x("closingElement"):x("closingFragment");if(ae.children.length===1&&ae.children[0].type==="JSXExpressionContainer"&&(ae.children[0].expression.type==="TemplateLiteral"||ae.children[0].expression.type==="TaggedTemplateExpression"))return[Ke,...c.map(x,"children"),yt];ae.children=ae.children.map(fi=>Fs(fi)?{type:"JSXText",value:" ",raw:" "}:fi);let Ue=ae.children.some(te),pt=ae.children.filter(fi=>fi.type==="JSXExpressionContainer").length>1,dt=ae.type==="JSXElement"&&ae.openingElement.attributes.length>1,Et=Ri(Ke)||Ue||dt||pt,cn=c.parent.rootMarker==="mdx",hn=g.singleQuote?"{' '}":'{" "}',_r=cn?" ":Ei([hn,ln]," "),li=((W=(I=ae.openingElement)==null?void 0:I.name)==null?void 0:W.name)==="fbt",qn=u(c,g,x,_r,li),ur=ae.children.some(fi=>Rr(fi));for(let fi=qn.length-2;fi>=0;fi--){let Qo=qn[fi]===""&&qn[fi+1]==="",Pu=qn[fi]===Yt&&qn[fi+1]===""&&qn[fi+2]===Yt,Wo=(qn[fi]===ln||qn[fi]===Yt)&&qn[fi+1]===""&&qn[fi+2]===_r,uu=qn[fi]===_r&&qn[fi+1]===""&&(qn[fi+2]===ln||qn[fi+2]===Yt),Ml=qn[fi]===_r&&qn[fi+1]===""&&qn[fi+2]===_r,id=qn[fi]===ln&&qn[fi+1]===""&&qn[fi+2]===Yt||qn[fi]===Yt&&qn[fi+1]===""&&qn[fi+2]===ln;Pu&&ur||Qo||Wo||Ml||id?qn.splice(fi,2):uu&&qn.splice(fi+1,2)}for(;qn.length>0&&xt(pi(!1,qn,-1));)qn.pop();for(;qn.length>1&&xt(qn[0])&&xt(qn[1]);)qn.shift(),qn.shift();let zr=[];for(let[fi,Qo]of qn.entries()){if(Qo===_r){if(fi===1&&qn[fi-1]===""){if(qn.length===2){zr.push(hn);continue}zr.push([hn,Yt]);continue}else if(fi===qn.length-1){zr.push(hn);continue}else if(qn[fi-1]===""&&qn[fi-2]===Yt){zr.push(hn);continue}}zr.push(Qo),Ri(Qo)&&(Et=!0)}let ro=ur?Ur(zr):kt(zr,{shouldBreak:!0});if(((X=g.cursorNode)==null?void 0:X.type)==="JSXText"&&ae.children.includes(g.cursorNode)&&(ro=[oo,ro,oo]),cn)return ro;let Ss=kt([Ke,Ht([Yt,ro]),Yt,yt]);return Et?Ss:Mi([kt([Ke,...qn,yt]),Ss])}function u(c,g,x,I,W){let X=[];return c.each(({node:ae,next:Ke})=>{if(ae.type==="JSXText"){let yt=go(ae);if(Rr(ae)){let Ue=Se.split(yt,!0);Ue[0]===""&&(X.push(""),Ue.shift(),/\n/.test(Ue[0])?X.push(b(W,Ue[1],ae,Ke)):X.push(I),Ue.shift());let pt;if(pi(!1,Ue,-1)===""&&(Ue.pop(),pt=Ue.pop()),Ue.length===0)return;for(let[dt,Et]of Ue.entries())dt%2===1?X.push(Sn):X.push(Et);pt!==void 0?/\n/.test(pt)?X.push(b(W,pi(!1,X,-1),ae,Ke)):X.push(I):X.push(f(W,pi(!1,X,-1),ae,Ke))}else/\n/.test(yt)?yt.match(/\n/g).length>1&&X.push("",Yt):X.push("",I)}else{let yt=x();if(X.push(yt),Ke&&Rr(Ke)){let Ue=Se.trim(go(Ke)),[pt]=Se.split(Ue);X.push(f(W,pt,ae,Ke))}else X.push(Yt)}},"children"),X}function f(c,g,x,I){return c?"":x.type==="JSXElement"&&!x.closingElement||(I==null?void 0:I.type)==="JSXElement"&&!I.closingElement?g.length===1?ln:Yt:ln}function b(c,g,x,I){return c?Yt:g.length===1?x.type==="JSXElement"&&!x.closingElement||(I==null?void 0:I.type)==="JSXElement"&&!I.closingElement?Yt:ln:Yt}var T=new Set(["ArrayExpression","TupleExpression","JSXAttribute","JSXElement","JSXExpressionContainer","JSXFragment","ExpressionStatement","CallExpression","OptionalCallExpression","ConditionalExpression","JsExpressionRoot"]);function B(c,g,x){let{parent:I}=c;if(T.has(I.type))return g;let W=c.match(void 0,ae=>ae.type==="ArrowFunctionExpression",Fi,ae=>ae.type==="JSXExpressionContainer"),X=Hl(c,x);return kt([X?"":Ei("("),Ht([ln,g]),ln,X?"":Ei(")")],{shouldBreak:W})}function U(c,g,x){let{node:I}=c,W=[];if(W.push(x("name")),I.value){let X;if(Rs(I.value)){let ae=go(I.value),Ke=Dr(!1,Dr(!1,ae.slice(1,-1),"&apos;","'"),"&quot;",'"'),yt=_n(Ke,g.jsxSingleQuote);Ke=yt==='"'?Dr(!1,Ke,'"',"&quot;"):Dr(!1,Ke,"'","&apos;"),X=c.call(()=>ta(c,Ws(yt+Ke+yt),g),"value")}else X=x("value");W.push("=",X)}return W}function ie(c,g,x){let{node:I}=c,W=(X,ae)=>X.type==="JSXEmptyExpression"||!si(X)&&(dr(X)||Qr(X)||X.type==="ArrowFunctionExpression"||X.type==="AwaitExpression"&&(W(X.argument,X)||X.argument.type==="JSXElement")||Fi(X)||X.type==="ChainExpression"&&Fi(X.expression)||X.type==="FunctionExpression"||X.type==="TemplateLiteral"||X.type==="TaggedTemplateExpression"||X.type==="DoExpression"||te(ae)&&(X.type==="ConditionalExpression"||Dt(X)));return W(I.expression,c.parent)?kt(["{",x("expression"),Ci,"}"]):kt(["{",Ht([ln,x("expression")]),ln,Ci,"}"])}function ce(c,g,x){var I,W;let{node:X}=c,ae=si(X.name)||si(X.typeParameters)||si(X.typeArguments);if(X.selfClosing&&X.attributes.length===0&&!ae)return["<",x("name"),X.typeArguments?x("typeArguments"):x("typeParameters")," />"];if(((I=X.attributes)==null?void 0:I.length)===1&&X.attributes[0].value&&Rs(X.attributes[0].value)&&!X.attributes[0].value.value.includes(`
`)&&!ae&&!si(X.attributes[0]))return kt(["<",x("name"),X.typeArguments?x("typeArguments"):x("typeParameters")," ",...c.map(x,"attributes"),X.selfClosing?" />":">"]);let Ke=(W=X.attributes)==null?void 0:W.some(Ue=>Ue.value&&Rs(Ue.value)&&Ue.value.value.includes(`
`)),yt=g.singleAttributePerLine&&X.attributes.length>1?Yt:Sn;return kt(["<",x("name"),X.typeArguments?x("typeArguments"):x("typeParameters"),Ht(c.map(()=>[yt,x()],"attributes")),..._e(X,g,ae)],{shouldBreak:Ke})}function _e(c,g,x){return c.selfClosing?[Sn,"/>"]:Oe(c,g,x)?[">"]:[ln,">"]}function Oe(c,g,x){let I=c.attributes.length>0&&si(pi(!1,c.attributes,-1),Ai.Trailing);return c.attributes.length===0&&!x||(g.bracketSameLine||g.jsxBracketSameLine)&&(!x||c.attributes.length>0)&&!I}function lt(c,g,x){let{node:I}=c,W=[];W.push("</");let X=x("name");return si(I.name,Ai.Leading|Ai.Line)?W.push(Ht([Yt,X]),Yt):si(I.name,Ai.Leading|Ai.Block)?W.push(" ",X):W.push(X),W.push(">"),W}function gt(c,g){let{node:x}=c,I=si(x),W=si(x,Ai.Line),X=x.type==="JSXOpeningFragment";return[X?"<":"</",Ht([W?Yt:I&&!X?" ":"",Yo(c,g)]),W?Yt:"",">"]}function wt(c,g,x){let I=ta(c,E(c,g,x),g);return B(c,I,g)}function rn(c,g){let{node:x}=c,I=si(x,Ai.Line);return[Yo(c,g,{indent:I}),I?Yt:""]}function Cn(c,g,x){let{node:I}=c;return["{",c.call(({node:W})=>{let X=["...",x()];return!si(W)||!S(c)?X:[Ht([ln,ta(c,X,g)]),ln]},I.type==="JSXSpreadAttribute"?"argument":"expression"),"}"]}function un(c,g,x){let{node:I}=c;if(I.type.startsWith("JSX"))switch(I.type){case"JSXAttribute":return U(c,g,x);case"JSXIdentifier":return I.name;case"JSXNamespacedName":return Oi(":",[x("namespace"),x("name")]);case"JSXMemberExpression":return Oi(".",[x("object"),x("property")]);case"JSXSpreadAttribute":case"JSXSpreadChild":return Cn(c,g,x);case"JSXExpressionContainer":return ie(c,g,x);case"JSXFragment":case"JSXElement":return wt(c,g,x);case"JSXOpeningElement":return ce(c,g,x);case"JSXClosingElement":return lt(c,g,x);case"JSXOpeningFragment":case"JSXClosingFragment":return gt(c,g);case"JSXEmptyExpression":return rn(c,g);case"JSXText":throw new Error("JSXText should be handled by JSXElement");default:throw new is(I,"JSX")}}function Hn(c){if(c.children.length===0)return!0;if(c.children.length>1)return!1;let g=c.children[0];return g.type==="JSXText"&&!Rr(g)}function Rr(c){return c.type==="JSXText"&&(Se.hasNonWhitespaceCharacter(go(c))||!/\n/.test(go(c)))}function Fs(c){return c.type==="JSXExpressionContainer"&&Rs(c.expression)&&c.expression.value===" "&&!si(c.expression)}function Vr(c){let{node:g,parent:x}=c;if(!te(g)||!te(x))return!1;let{index:I,siblings:W}=c,X;for(let ae=I;ae>0;ae--){let Ke=W[ae-1];if(!(Ke.type==="JSXText"&&!Rr(Ke))){X=Ke;break}}return(X==null?void 0:X.type)==="JSXExpressionContainer"&&X.expression.type==="JSXEmptyExpression"&&Ys(X.expression)}function Ds(c){return Ys(c.node)||Vr(c)}var us=Ds,Aa=0;function Wa(c,g,x){var I;let{node:W,parent:X,grandparent:ae,key:Ke}=c,yt=Ke!=="body"&&(X.type==="IfStatement"||X.type==="WhileStatement"||X.type==="SwitchStatement"||X.type==="DoWhileStatement"),Ue=W.operator==="|>"&&((I=c.root.extra)==null?void 0:I.__isUsingHackPipeline),pt=_l(c,x,g,!1,yt);if(yt)return pt;if(Ue)return kt(pt);if(Fi(X)&&X.callee===W||X.type==="UnaryExpression"||rt(X)&&!X.computed)return kt([Ht([ln,...pt]),ln]);let dt=X.type==="ReturnStatement"||X.type==="ThrowStatement"||X.type==="JSXExpressionContainer"&&ae.type==="JSXAttribute"||W.operator!=="|"&&X.type==="JsExpressionRoot"||W.type!=="NGPipeExpression"&&(X.type==="NGRoot"&&g.parser==="__ng_binding"||X.type==="NGMicrosyntaxExpression"&&ae.type==="NGMicrosyntax"&&ae.body.length===1)||W===X.body&&X.type==="ArrowFunctionExpression"||W!==X.body&&X.type==="ForStatement"||X.type==="ConditionalExpression"&&ae.type!=="ReturnStatement"&&ae.type!=="ThrowStatement"&&!Fi(ae)||X.type==="TemplateLiteral",Et=X.type==="AssignmentExpression"||X.type==="VariableDeclarator"||X.type==="ClassProperty"||X.type==="PropertyDefinition"||X.type==="TSAbstractPropertyDefinition"||X.type==="ClassPrivateProperty"||ia(X),cn=Dt(W.left)&&ut(W.operator,W.left.operator);if(dt||Vu(W)&&!cn||!Vu(W)&&Et)return kt(pt);if(pt.length===0)return"";let hn=te(W.right),_r=pt.findIndex(Ss=>typeof Ss!="string"&&!Array.isArray(Ss)&&Ss.type===zi),li=pt.slice(0,_r===-1?1:_r+1),qn=pt.slice(li.length,hn?-1:void 0),ur=Symbol("logicalChain-"+ ++Aa),zr=kt([...li,Ht(qn)],{id:ur});if(!hn)return zr;let ro=pi(!1,pt,-1);return kt([zr,Xr(ro,{groupId:ur})])}function _l(c,g,x,I,W){var X;let{node:ae}=c;if(!Dt(ae))return[kt(g())];let Ke=[];ut(ae.operator,ae.left.operator)?Ke=c.call(li=>_l(li,g,x,!0,W),"left"):Ke.push(kt(g("left")));let yt=Vu(ae),Ue=(ae.operator==="|>"||ae.type==="NGPipeExpression"||yu(c,x))&&!Mn(x.originalText,ae.right),pt=ae.type==="NGPipeExpression"?"|":ae.operator,dt=ae.type==="NGPipeExpression"&&ae.arguments.length>0?kt(Ht([ln,": ",Oi([Sn,": "],c.map(()=>$r(2,kt(g())),"arguments"))])):"",Et;if(yt)Et=[pt," ",g("right"),dt];else{let li=pt==="|>"&&((X=c.root.extra)!=null&&X.__isUsingHackPipeline)?c.call(qn=>_l(qn,g,x,!0,W),"right"):g("right");Et=[Ue?Sn:"",pt,Ue?" ":Sn,li,dt]}let{parent:cn}=c,hn=si(ae.left,Ai.Trailing|Ai.Line),_r=hn||!(W&&ae.type==="LogicalExpression")&&cn.type!==ae.type&&ae.left.type!==ae.type&&ae.right.type!==ae.type;if(Ke.push(Ue?"":" ",_r?kt(Et,{shouldBreak:hn}):Et),I&&si(ae)){let li=Mo(ta(c,Ke,x));return Array.isArray(li)||li.type===as?Lo(li):[li]}return Ke}function Vu(c){return c.type!=="LogicalExpression"?!1:!!(Qr(c.right)&&c.right.properties.length>0||dr(c.right)&&c.right.elements.length>0||te(c.right))}var Bc=c=>c.type==="BinaryExpression"&&c.operator==="|";function yu(c,g){return(g.parser==="__vue_expression"||g.parser==="__vue_ts_expression")&&Bc(c.node)&&!c.hasAncestor(x=>!Bc(x)&&x.type!=="JsExpressionRoot")}function ou(c,g,x){let{node:I}=c;if(I.type.startsWith("NG"))switch(I.type){case"NGRoot":return[x("node"),si(I.node)?" //"+Zo(I.node)[0].value.trimEnd():""];case"NGPipeExpression":return Wa(c,g,x);case"NGChainedExpression":return kt(Oi([";",Sn],c.map(()=>zl(c)?x():["(",x(),")"],"expressions")));case"NGEmptyExpression":return"";case"NGMicrosyntax":return c.map(()=>[c.isFirst?"":bl(c)?" ":[";",Sn],x()],"body");case"NGMicrosyntaxKey":return/^[$_a-z][\w$]*(?:-[$_a-z][\w$])*$/i.test(I.name)?I.name:JSON.stringify(I.name);case"NGMicrosyntaxExpression":return[x("expression"),I.alias===null?"":[" as ",x("alias")]];case"NGMicrosyntaxKeyedExpression":{let{index:W,parent:X}=c,ae=bl(c)||(W===1&&(I.key.name==="then"||I.key.name==="else"||I.key.name==="as")||(W===2||W===3)&&(I.key.name==="else"&&X.body[W-1].type==="NGMicrosyntaxKeyedExpression"&&X.body[W-1].key.name==="then"||I.key.name==="track"))&&X.body[0].type==="NGMicrosyntaxExpression";return[x("key"),ae?" ":": ",x("expression")]}case"NGMicrosyntaxLet":return["let ",x("key"),I.value===null?"":[" = ",x("value")]];case"NGMicrosyntaxAs":return[x("key")," as ",x("alias")];default:throw new is(I,"Angular")}}function bl({node:c,index:g}){return c.type==="NGMicrosyntaxKeyedExpression"&&c.key.name==="of"&&g===1}var Wu=Zn(["CallExpression","OptionalCallExpression","AssignmentExpression"]);function zl({node:c}){return Xs(c,Wu)}function vu(c,g,x){let{node:I}=c;return kt([Oi(Sn,c.map(x,"decorators")),tl(I,g)?Yt:Sn])}function Ac(c,g,x){return k(c.node)?[Oi(Yt,c.map(x,"declaration","decorators")),Yt]:""}function Tu(c,g,x){let{node:I,parent:W}=c,{decorators:X}=I;if(!Ve(X)||k(W)||us(c))return"";let ae=I.type==="ClassExpression"||I.type==="ClassDeclaration"||tl(I,g);return[c.key==="declaration"&&js(W)?Yt:ae?Or:"",Oi(Sn,c.map(x,"decorators")),Sn]}function tl(c,g){return c.decorators.some(x=>Vn(g.originalText,Ui(x)))}function k(c){var g;if(c.type!=="ExportDefaultDeclaration"&&c.type!=="ExportNamedDeclaration"&&c.type!=="DeclareExportDeclaration")return!1;let x=(g=c.declaration)==null?void 0:g.decorators;return Ve(x)&&hr(c,x[0])}var D=class extends Error{constructor(){super(...arguments);$n(this,"name","ArgExpansionBailout")}};function M(c,g,x){let{node:I}=c,W=Vs(I);if(W.length===0)return["(",Yo(c,g),")"];if(Te(W))return["(",x(["arguments",0]),", ",x(["arguments",1]),")"];let X=!1,ae=W.length-1,Ke=[];ko(c,({node:dt},Et)=>{let cn=x();Et===ae||(ma(dt,g)?(X=!0,cn=[cn,",",Yt,Yt]):cn=[cn,",",Sn]),Ke.push(cn)});let yt=!(I.type==="ImportExpression"||I.callee.type==="Import")&&Ae(g,"all")?",":"";function Ue(){return kt(["(",Ht([Sn,...Ke]),yt,Sn,")"],{shouldBreak:!0})}if(X||c.parent.type!=="Decorator"&&fa(W))return Ue();if(K(W)){let dt=Ke.slice(1);if(dt.some(Ri))return Ue();let Et;try{Et=x(Uo(I,0),{expandFirstArg:!0})}catch(cn){if(cn instanceof D)return Ue();throw cn}return Ri(Et)?[Or,Mi([["(",kt(Et,{shouldBreak:!0}),", ",...dt,")"],Ue()])]:Mi([["(",Et,", ",...dt,")"],["(",kt(Et,{shouldBreak:!0}),", ",...dt,")"],Ue()])}if(z(W,Ke,g)){let dt=Ke.slice(0,-1);if(dt.some(Ri))return Ue();let Et;try{Et=x(Uo(I,-1),{expandLastArg:!0})}catch(cn){if(cn instanceof D)return Ue();throw cn}return Ri(Et)?[Or,Mi([["(",...dt,kt(Et,{shouldBreak:!0}),")"],Ue()])]:Mi([["(",...dt,Et,")"],["(",...dt,kt(Et,{shouldBreak:!0}),")"],Ue()])}let pt=["(",Ht([ln,...Ke]),Ei(yt),ln,")"];return ps(c)?pt:kt(pt,{shouldBreak:Ke.some(Ri)||X})}function L(c,g=!1){return Qr(c)&&(c.properties.length>0||si(c))||dr(c)&&(c.elements.length>0||si(c))||c.type==="TSTypeAssertion"&&L(c.expression)||Ro(c)&&L(c.expression)||c.type==="FunctionExpression"||c.type==="ArrowFunctionExpression"&&(!c.returnType||!c.returnType.typeAnnotation||c.returnType.typeAnnotation.type!=="TSTypeReference"||nt(c.body))&&(c.body.type==="BlockStatement"||c.body.type==="ArrowFunctionExpression"&&L(c.body,!0)||Qr(c.body)||dr(c.body)||!g&&(Fi(c.body)||c.body.type==="ConditionalExpression")||te(c.body))||c.type==="DoExpression"||c.type==="ModuleExpression"}function z(c,g,x){var I,W;let X=pi(!1,c,-1);if(c.length===1){let Ke=pi(!1,g,-1);if((I=Ke.label)!=null&&I.embed&&((W=Ke.label)==null?void 0:W.hug)!==!1)return!0}let ae=pi(!1,c,-2);return!si(X,Ai.Leading)&&!si(X,Ai.Trailing)&&L(X)&&(!ae||ae.type!==X.type)&&(c.length!==2||ae.type!=="ArrowFunctionExpression"||!dr(X))&&!(c.length>1&&qg(X,x))}function K(c){if(c.length!==2)return!1;let[g,x]=c;return g.type==="ModuleExpression"&&Pt(x)?!0:!si(g)&&(g.type==="FunctionExpression"||g.type==="ArrowFunctionExpression"&&g.body.type==="BlockStatement")&&x.type!=="FunctionExpression"&&x.type!=="ArrowFunctionExpression"&&x.type!=="ConditionalExpression"&&me(x)&&!L(x)}function me(c){var g;if(c.type==="ParenthesizedExpression")return me(c.expression);if(Ro(c)||c.type==="TypeCastExpression"){let{typeAnnotation:x}=c;return x.type==="TypeAnnotation"&&(x=x.typeAnnotation),x.type==="TSArrayType"&&(x=x.elementType,x.type==="TSArrayType"&&(x=x.elementType)),(x.type==="GenericTypeAnnotation"||x.type==="TSTypeReference")&&((g=x.typeParameters)==null?void 0:g.params.length)===1&&(x=x.typeParameters.params[0]),Tn(x)&&Eo(c.expression,1)}return ul(c)&&Vs(c).length>1?!1:Dt(c)?Eo(c.left,1)&&Eo(c.right,1):co(c)||Eo(c)}function Te(c){return c.length===2&&c[0].type==="ArrowFunctionExpression"&&Xi(c[0]).length===0&&c[0].body.type==="BlockStatement"&&c[1].type==="ArrayExpression"&&!c.some(g=>si(g))}function nt(c){return c.type==="BlockStatement"&&(c.body.some(g=>g.type!=="EmptyStatement")||si(c,Ai.Dangling))}function Pt(c){return c.type==="ObjectExpression"&&c.properties.length===1&&ia(c.properties[0])&&c.properties[0].key.type==="Identifier"&&c.properties[0].key.name==="type"&&Rs(c.properties[0].value)&&c.properties[0].value.value==="module"}var Wt=M,Gn=c=>((c.type==="ChainExpression"||c.type==="TSNonNullExpression")&&(c=c.expression),Fi(c)&&Vs(c).length>0);function Gi(c,g,x){var I;let W=x("object"),X=ts(c,g,x),{node:ae}=c,Ke=c.findAncestor(pt=>!(rt(pt)||pt.type==="TSNonNullExpression")),yt=c.findAncestor(pt=>!(pt.type==="ChainExpression"||pt.type==="TSNonNullExpression")),Ue=Ke&&(Ke.type==="NewExpression"||Ke.type==="BindExpression"||Ke.type==="AssignmentExpression"&&Ke.left.type!=="Identifier")||ae.computed||ae.object.type==="Identifier"&&ae.property.type==="Identifier"&&!rt(yt)||(yt.type==="AssignmentExpression"||yt.type==="VariableDeclarator")&&(Gn(ae.object)||((I=W.label)==null?void 0:I.memberChain));return _s(W.label,[W,Ue?X:kt(Ht([ln,X]))])}function ts(c,g,x){let I=x("property"),{node:W}=c,X=_u(c);return W.computed?!W.property||gs(W.property)?[X,"[",I,"]"]:kt([X,"[",Ht([ln,I]),ln,"]"]):[X,".",I]}function io(c,g,x){if(c.node.type==="ChainExpression")return c.call(()=>io(c,g,x),"expression");let{parent:I}=c,W=!I||I.type==="ExpressionStatement",X=[];function ae(Us){let{originalText:ha}=g,pl=Xa(ha,Ui(Us));return ha.charAt(pl)===")"?pl!==!1&&Fe(ha,pl+1):ma(Us,g)}function Ke(Us){let{node:ha}=Us;if(ha.type==="ChainExpression")return Us.call(()=>Ke(Us),"expression");if(Fi(ha)&&(jt(ha.callee)||Fi(ha.callee))){let pl=ae(ha);X.unshift({node:ha,hasTrailingEmptyLine:pl,printed:[ta(Us,[_u(Us),_h(Us,g,x),Wt(Us,g,x)],g),pl?Yt:""]}),Us.call(xc=>Ke(xc),"callee")}else jt(ha)?(X.unshift({node:ha,needsParens:Hl(Us,g),printed:ta(Us,rt(ha)?ts(Us,g,x):Bp(Us,g,x),g)}),Us.call(pl=>Ke(pl),"object")):ha.type==="TSNonNullExpression"?(X.unshift({node:ha,printed:ta(Us,"!",g)}),Us.call(pl=>Ke(pl),"expression")):X.unshift({node:ha,printed:x()})}let{node:yt}=c;X.unshift({node:yt,printed:[_u(c),_h(c,g,x),Wt(c,g,x)]}),yt.callee&&c.call(Us=>Ke(Us),"callee");let Ue=[],pt=[X[0]],dt=1;for(;dt<X.length&&(X[dt].node.type==="TSNonNullExpression"||Fi(X[dt].node)||rt(X[dt].node)&&X[dt].node.computed&&gs(X[dt].node.property));++dt)pt.push(X[dt]);if(!Fi(X[0].node))for(;dt+1<X.length&&jt(X[dt].node)&&jt(X[dt+1].node);++dt)pt.push(X[dt]);Ue.push(pt),pt=[];let Et=!1;for(;dt<X.length;++dt){if(Et&&jt(X[dt].node)){if(X[dt].node.computed&&gs(X[dt].node.property)){pt.push(X[dt]);continue}Ue.push(pt),pt=[],Et=!1}(Fi(X[dt].node)||X[dt].node.type==="ImportExpression")&&(Et=!0),pt.push(X[dt]),si(X[dt].node,Ai.Trailing)&&(Ue.push(pt),pt=[],Et=!1)}pt.length>0&&Ue.push(pt);function cn(Us){return/^[A-Z]|^[$_]+$/.test(Us)}function hn(Us){return Us.length<=g.tabWidth}function _r(Us){var ha;let pl=(ha=Us[1][0])==null?void 0:ha.node.computed;if(Us[0].length===1){let Nh=Us[0][0].node;return Nh.type==="ThisExpression"||Nh.type==="Identifier"&&(cn(Nh.name)||W&&hn(Nh.name)||pl)}let xc=pi(!1,Us[0],-1).node;return rt(xc)&&xc.property.type==="Identifier"&&(cn(xc.property.name)||pl)}let li=Ue.length>=2&&!si(Ue[1][0].node)&&_r(Ue);function qn(Us){let ha=Us.map(pl=>pl.printed);return Us.length>0&&pi(!1,Us,-1).needsParens?["(",...ha,")"]:ha}function ur(Us){return Us.length===0?"":Ht([Yt,Oi(Yt,Us.map(qn))])}let zr=Ue.map(qn),ro=zr,Ss=li?3:2,fi=Ue.flat(),Qo=fi.slice(1,-1).some(Us=>si(Us.node,Ai.Leading))||fi.slice(0,-1).some(Us=>si(Us.node,Ai.Trailing))||Ue[Ss]&&si(Ue[Ss][0].node,Ai.Leading);if(Ue.length<=Ss&&!Qo&&!Ue.some(Us=>pi(!1,Us,-1).hasTrailingEmptyLine))return ps(c)?ro:kt(ro);let Pu=pi(!1,Ue[li?1:0],-1).node,Wo=!Fi(Pu)&&ae(Pu),uu=[qn(Ue[0]),li?Ue.slice(1,2).map(qn):"",Wo?Yt:"",ur(Ue.slice(li?2:1))],Ml=X.map(({node:Us})=>Us).filter(Fi);function id(){let Us=pi(!1,pi(!1,Ue,-1),-1).node,ha=pi(!1,zr,-1);return Fi(Us)&&Ri(ha)&&Ml.slice(0,-1).some(pl=>pl.arguments.some(P))}let ic;return Qo||Ml.length>2&&Ml.some(Us=>!Us.arguments.every(ha=>Eo(ha)))||zr.slice(0,-1).some(Ri)||id()?ic=kt(uu):ic=[Ri(ro)||Wo?Or:"",Mi([ro,uu])],_s({memberChain:!0},ic)}var ca=io;function au(c,g,x){var I;let{node:W,parent:X}=c,ae=W.type==="NewExpression",Ke=W.type==="ImportExpression",yt=_u(c),Ue=Vs(W),pt=Ue.length===1&&aa(Ue[0],g.originalText);if(pt||Ue.length>0&&!ae&&!Ke&&(v(W,X)||ho(W,X))){let Et=[];if(ko(c,()=>{Et.push(x())}),!(pt&&(I=Et[0].label)!=null&&I.embed))return[ae?"new ":"",x("callee"),yt,_h(c,g,x),"(",Oi(", ",Et),")"]}if(!Ke&&!ae&&jt(W.callee)&&!c.call(Et=>Hl(Et,g),"callee",...W.callee.type==="ChainExpression"?["expression"]:[]))return ca(c,g,x);let dt=[ae?"new ":"",Ke?A(W):x("callee"),yt,_h(c,g,x),Wt(c,g,x)];return Ke||Fi(W.callee)?kt(dt):dt}function A(c){return c.phase?`import.${c.phase}`:"import"}function v(c,g){if(c.callee.type!=="Identifier")return!1;if(c.callee.name==="require"){let x=Vs(c);return x.length===1&&Rs(x[0])||x.length>1}if(c.callee.name==="define"){let x=Vs(c);return g.type==="ExpressionStatement"&&(x.length===1||x.length===2&&x[0].type==="ArrayExpression"||x.length===3&&Rs(x[0])&&x[1].type==="ArrayExpression")}return!1}function _(c,g,x,I,W,X){let ae=de(c,g,x,I,X),Ke=X?x(X,{assignmentLayout:ae}):"";switch(ae){case"break-after-operator":return kt([kt(I),W,kt(Ht([Sn,Ke]))]);case"never-break-after-operator":return kt([kt(I),W," ",Ke]);case"fluid":{let yt=Symbol("assignment");return kt([kt(I),W,kt(Ht(Sn),{id:yt}),Ci,Xr(Ke,{groupId:yt})])}case"break-lhs":return kt([I,W," ",kt(Ke)]);case"chain":return[kt(I),W,Sn,Ke];case"chain-tail":return[kt(I),W,Ht([Sn,Ke])];case"chain-tail-arrow-chain":return[kt(I),W,Ke];case"only-left":return I}}function N(c,g,x){let{node:I}=c;return _(c,g,x,x("left"),[" ",I.operator],"right")}function q(c,g,x){return _(c,g,x,x("id")," =","init")}function de(c,g,x,I,W){let{node:X}=c,ae=X[W];if(!ae)return"only-left";let Ke=!At(ae);if(c.match(At,tn,pt=>!Ke||pt.type!=="ExpressionStatement"&&pt.type!=="VariableDeclaration"))return Ke?ae.type==="ArrowFunctionExpression"&&ae.body.type==="ArrowFunctionExpression"?"chain-tail-arrow-chain":"chain-tail":"chain";if(!Ke&&At(ae.right)||Mn(g.originalText,ae))return"break-after-operator";if(ae.type==="CallExpression"&&ae.callee.name==="require"||g.parser==="json5"||g.parser==="jsonc"||g.parser==="json")return"never-break-after-operator";let yt=Es(I);if(tt(X)||ir(X)||mo(X)&&yt)return"break-lhs";let Ue=ku(X,I,g);return c.call(()=>Pe(c,g,x,Ue),W)?"break-after-operator":Cr(X)?"break-lhs":!yt&&(Ue||ae.type==="TemplateLiteral"||ae.type==="TaggedTemplateExpression"||ae.type==="BooleanLiteral"||gs(ae)||ae.type==="ClassExpression")?"never-break-after-operator":"fluid"}function Pe(c,g,x,I){let W=c.node;if(Dt(W)&&!Vu(W))return!0;switch(W.type){case"StringLiteralTypeAnnotation":case"SequenceExpression":return!0;case"TSConditionalType":case"ConditionalTypeAnnotation":if(!g.experimentalTernaries&&!jn(W))break;return!0;case"ConditionalExpression":{if(!g.experimentalTernaries){let{test:Ue}=W;return Dt(Ue)&&!Vu(Ue)}let{consequent:Ke,alternate:yt}=W;return Ke.type==="ConditionalExpression"||yt.type==="ConditionalExpression"}case"ClassExpression":return Ve(W.decorators)}if(I)return!1;let X=W,ae=[];for(;;)if(X.type==="UnaryExpression"||X.type==="AwaitExpression"||X.type==="YieldExpression"&&X.argument!==null)X=X.argument,ae.push("argument");else if(X.type==="TSNonNullExpression")X=X.expression,ae.push("expression");else break;return!!(Rs(X)||c.call(()=>Ou(c,g,x),...ae))}function tt(c){if(tn(c)){let g=c.left||c.id;return g.type==="ObjectPattern"&&g.properties.length>2&&g.properties.some(x=>{var I;return ia(x)&&(!x.shorthand||((I=x.value)==null?void 0:I.type)==="AssignmentPattern")})}return!1}function At(c){return c.type==="AssignmentExpression"}function tn(c){return At(c)||c.type==="VariableDeclarator"}function Cr(c){let g=rs(c);if(Ve(g)){let x=c.type==="TSTypeAliasDeclaration"?"constraint":"bound";if(g.length>1&&g.some(I=>I[x]||I.default))return!0}return!1}var Jn=Zn(["TSTypeAliasDeclaration","TypeAlias"]);function rs(c){var g;if(Jn(c))return(g=c.typeParameters)==null?void 0:g.params}function ir(c){if(c.type!=="VariableDeclarator")return!1;let{typeAnnotation:g}=c.id;if(!g||!g.typeAnnotation)return!1;let x=Ba(g.typeAnnotation);return Ve(x)&&x.length>1&&x.some(I=>Ve(Ba(I))||I.type==="TSConditionalType")}function mo(c){var g;return c.type==="VariableDeclarator"&&((g=c.init)==null?void 0:g.type)==="ArrowFunctionExpression"}var Pl=Zn(["TSTypeReference","GenericTypeAnnotation"]);function Ba(c){var g;if(Pl(c))return(g=c.typeParameters)==null?void 0:g.params}function Ou(c,g,x,I=!1){var W;let{node:X}=c,ae=()=>Ou(c,g,x,!0);if(X.type==="ChainExpression"||X.type==="TSNonNullExpression")return c.call(ae,"expression");if(Fi(X)){if((W=au(c,g,x).label)!=null&&W.memberChain)return!1;let Ke=Vs(X);return!(Ke.length===0||Ke.length===1&&wi(Ke[0],g))||dh(X,x)?!1:c.call(ae,"callee")}return rt(X)?c.call(ae,"object"):I&&(X.type==="Identifier"||X.type==="ThisExpression")}function ku(c,g,x){return ia(c)?(g=Mo(g),typeof g=="string"&&Ie(g)<x.tabWidth+3):!1}function dh(c,g){let x=Re(c);if(Ve(x)){if(x.length>1)return!0;if(x.length===1){let W=x[0];if(La(W)||Ar(W)||W.type==="TSTypeLiteral"||W.type==="ObjectTypeAnnotation")return!0}let I=c.typeParameters?"typeParameters":"typeArguments";if(Ri(g(I)))return!0}return!1}function Re(c){var x;var g;return(g=(x=c.typeParameters)!=null?x:c.typeArguments)==null?void 0:g.params}function jn(c){function g(x){switch(x.type){case"FunctionTypeAnnotation":case"GenericTypeAnnotation":case"TSFunctionType":case"TSTypeReference":return!!x.typeParameters;default:return!1}}return g(c.checkType)||g(c.extendsType)}function bo(c,g,x,I,W){let X=c.node,ae=Xi(X),Ke=W?_h(c,x,g):"";if(ae.length===0)return[Ke,"(",Yo(c,x,{filter:cn=>ua(x.originalText,Ui(cn))===")"}),")"];let{parent:yt}=c,Ue=ho(yt),pt=Tc(X),dt=[];if(Vo(c,(cn,hn)=>{let _r=hn===ae.length-1;_r&&X.rest&&dt.push("..."),dt.push(g()),!_r&&(dt.push(","),Ue||pt?dt.push(" "):ma(ae[hn],x)?dt.push(Yt,Yt):dt.push(Sn))}),I&&!ph(c)){if(Ri(Ke)||Ri(dt))throw new D;return kt([oi(Ke),"(",oi(dt),")"])}let Et=ae.every(cn=>!Ve(cn.decorators));return pt&&Et?[Ke,"(",...dt,")"]:Ue?[Ke,"(",...dt,")"]:(Ce(yt)||We(yt)||yt.type==="TypeAlias"||yt.type==="UnionTypeAnnotation"||yt.type==="IntersectionTypeAnnotation"||yt.type==="FunctionTypeAnnotation"&&yt.returnType===X)&&ae.length===1&&ae[0].name===null&&X.this!==ae[0]&&ae[0].typeAnnotation&&X.typeParameters===null&&Tn(ae[0].typeAnnotation)&&!X.rest?x.arrowParens==="always"?["(",...dt,")"]:dt:[Ke,"(",Ht([ln,...dt]),Ei(!ri(X)&&Ae(x,"all")?",":""),ln,")"]}function Tc(c){if(!c)return!1;let g=Xi(c);if(g.length!==1)return!1;let[x]=g;return!si(x)&&(x.type==="ObjectPattern"||x.type==="ArrayPattern"||x.type==="Identifier"&&x.typeAnnotation&&(x.typeAnnotation.type==="TypeAnnotation"||x.typeAnnotation.type==="TSTypeAnnotation")&&re(x.typeAnnotation.typeAnnotation)||x.type==="FunctionTypeParam"&&re(x.typeAnnotation)&&x!==c.rest||x.type==="AssignmentPattern"&&(x.left.type==="ObjectPattern"||x.left.type==="ArrayPattern")&&(x.right.type==="Identifier"||Qr(x.right)&&x.right.properties.length===0||dr(x.right)&&x.right.elements.length===0))}function lu(c){let g;return c.returnType?(g=c.returnType,g.typeAnnotation&&(g=g.typeAnnotation)):c.typeAnnotation&&(g=c.typeAnnotation),g}function Gc(c,g){var x;let I=lu(c);if(!I)return!1;let W=(x=c.typeParameters)==null?void 0:x.params;if(W){if(W.length>1)return!1;if(W.length===1){let X=W[0];if(X.constraint||X.default)return!1}}return Xi(c).length===1&&(re(I)||Ri(g))}function ph(c){return c.match(g=>g.type==="ArrowFunctionExpression"&&g.body.type==="BlockStatement",(g,x)=>{if(g.type==="CallExpression"&&x==="arguments"&&g.arguments.length===1&&g.callee.type==="CallExpression"){let I=g.callee.callee;return I.type==="Identifier"||I.type==="MemberExpression"&&!I.computed&&I.object.type==="Identifier"&&I.property.type==="Identifier"}return!1},(g,x)=>g.type==="VariableDeclarator"&&x==="init"||g.type==="ExportDefaultDeclaration"&&x==="declaration"||g.type==="TSExportAssignment"&&x==="expression"||g.type==="AssignmentExpression"&&x==="right"&&g.left.type==="MemberExpression"&&g.left.object.type==="Identifier"&&g.left.object.name==="module"&&g.left.property.type==="Identifier"&&g.left.property.name==="exports",g=>g.type!=="VariableDeclaration"||g.kind==="const"&&g.declarations.length===1)}function Pp(c){let g=Xi(c);return g.length>1&&g.some(x=>x.type==="TSParameterProperty")}var Oc=Zn(["VoidTypeAnnotation","TSVoidKeyword","NullLiteralTypeAnnotation","TSNullKeyword"]),kh=Zn(["ObjectTypeAnnotation","TSTypeLiteral","GenericTypeAnnotation","TSTypeReference"]);function Xf(c){let{types:g}=c;if(g.some(I=>si(I)))return!1;let x=g.find(I=>kh(I));return x?g.every(I=>I===x||Oc(I)):!1}function Lg(c){return Tn(c)||re(c)?!0:La(c)?Xf(c):!1}function $g(c,g,x){let I=g.semi?";":"",{node:W}=c,X=[yc(c),"opaque type ",x("id"),x("typeParameters")];return W.supertype&&X.push(": ",x("supertype")),W.impltype&&X.push(" = ",x("impltype")),X.push(I),X}function Fl(c,g,x){let I=g.semi?";":"",{node:W}=c,X=[yc(c)];X.push("type ",x("id"),x("typeParameters"));let ae=W.type==="TSTypeAliasDeclaration"?"typeAnnotation":"right";return[_(c,g,x,X," =",ae),I]}function kc(c,g,x){let I=!1;return kt(c.map(({isFirst:W,previous:X,node:ae,index:Ke})=>{let yt=x();if(W)return yt;let Ue=re(ae),pt=re(X);return pt&&Ue?[" & ",I?Ht(yt):yt]:!pt&&!Ue?Ht([" &",Sn,yt]):(Ke>1&&(I=!0),[" & ",Ke>1?Ht(yt):yt])},"types"))}function Ld(c,g,x){let{node:I}=c,{parent:W}=c,X=W.type!=="TypeParameterInstantiation"&&(W.type!=="TSConditionalType"||!g.experimentalTernaries)&&(W.type!=="ConditionalTypeAnnotation"||!g.experimentalTernaries)&&W.type!=="TSTypeParameterInstantiation"&&W.type!=="GenericTypeAnnotation"&&W.type!=="TSTypeReference"&&W.type!=="TSTypeAssertion"&&W.type!=="TupleTypeAnnotation"&&W.type!=="TSTupleType"&&!(W.type==="FunctionTypeParam"&&!W.name&&c.grandparent.this!==W)&&!((W.type==="TypeAlias"||W.type==="VariableDeclarator"||W.type==="TSTypeAliasDeclaration")&&Mn(g.originalText,I)),ae=Lg(I),Ke=c.map(pt=>{let dt=x();return ae||(dt=$r(2,dt)),ta(pt,dt,g)},"types");if(ae)return Oi(" | ",Ke);let yt=X&&!Mn(g.originalText,I),Ue=[Ei([yt?Sn:"","| "]),Oi([Sn,"| "],Ke)];return Hl(c,g)?kt([Ht(Ue),ln]):(W.type==="TupleTypeAnnotation"||W.type==="TSTupleType")&&W[W.type==="TupleTypeAnnotation"&&W.types?"types":"elementTypes"].length>1?kt([Ht([Ei(["(",ln]),Ue]),ln,Ei(")")]):kt(X?Ht(Ue):Ue)}function Fp(c){var g;let{node:x,parent:I}=c;return x.type==="FunctionTypeAnnotation"&&(Ce(I)||!((I.type==="ObjectTypeProperty"||I.type==="ObjectTypeInternalSlot")&&!I.variance&&!I.optional&&hr(I,x)||I.type==="ObjectTypeCallProperty"||((g=c.getParentNode(2))==null?void 0:g.type)==="DeclareFunction"))}function jg(c,g,x){let{node:I}=c,W=[jd(c)];(I.type==="TSConstructorType"||I.type==="TSConstructSignatureDeclaration")&&W.push("new ");let X=bo(c,x,g,!1,!0),ae=[];return I.type==="FunctionTypeAnnotation"?ae.push(Fp(c)?" => ":": ",x("returnType")):ae.push(xu(c,x,I.returnType?"returnType":"typeAnnotation")),Gc(I,ae)&&(X=kt(X)),W.push(X,ae),kt(W)}function Mp(c,g,x){return[x("objectType"),_u(c),"[",x("indexType"),"]"]}function Vg(c,g,x){return["infer ",x("typeParameter")]}function Ip(c,g,x){let{node:I}=c;return[I.postfix?"":x,xu(c,g),I.postfix?x:""]}function $d(c,g,x){let{node:I}=c;return["...",...I.type==="TupleTypeSpreadElement"&&I.label?[x("label"),": "]:[],x("typeAnnotation")]}function Np(c,g,x){let{node:I}=c;return[I.variance?x("variance"):"",x("label"),I.optional?"?":"",": ",x("elementType")]}var Wg=new WeakSet;function xu(c,g,x="typeAnnotation"){let{node:{[x]:I}}=c;if(!I)return"";let W=!1;if(I.type==="TSTypeAnnotation"||I.type==="TypeAnnotation"){let X=c.call(Yf,x);(X==="=>"||X===":"&&si(I,Ai.Leading))&&(W=!0),Wg.add(I)}return W?[" ",g(x)]:g(x)}var Yf=c=>c.match(g=>g.type==="TSTypeAnnotation",(g,x)=>(x==="returnType"||x==="typeAnnotation")&&(g.type==="TSFunctionType"||g.type==="TSConstructorType"))?"=>":c.match(g=>g.type==="TSTypeAnnotation",(g,x)=>x==="typeAnnotation"&&(g.type==="TSJSDocNullableType"||g.type==="TSJSDocNonNullableType"||g.type==="TSTypePredicate"))||c.match(g=>g.type==="TypeAnnotation",(g,x)=>x==="typeAnnotation"&&g.type==="Identifier",(g,x)=>x==="id"&&g.type==="DeclareFunction")||c.match(g=>g.type==="TypeAnnotation",(g,x)=>x==="bound"&&g.type==="TypeParameter"&&g.usesExtendsBound)?"":":";function Hg(c,g,x){let I=Yf(c);return I?[I," ",x("typeAnnotation")]:x("typeAnnotation")}function Ug(c){return[c("elementType"),"[]"]}function Gf({node:c},g){let x=c.type==="TSTypeQuery"?"exprName":"argument",I=c.type==="TSTypeQuery"?"typeParameters":"typeArguments";return["typeof ",g(x),g(I)]}function zg(c,g){let{node:x}=c;return[x.asserts?"asserts ":"",g("parameterName"),x.typeAnnotation?[" is ",xu(c,g)]:""]}function _u(c){let{node:g}=c;return!g.optional||g.type==="Identifier"&&g===c.parent.key?"":Fi(g)||rt(g)&&g.computed||g.type==="OptionalIndexedAccessType"?"?.":"?"}function Jh(c){return c.node.definite||c.match(void 0,(g,x)=>x==="id"&&g.type==="VariableDeclarator"&&g.definite)?"!":""}var Kf=new Set(["DeclareClass","DeclareFunction","DeclareVariable","DeclareExportDeclaration","DeclareExportAllDeclaration","DeclareOpaqueType","DeclareTypeAlias","DeclareEnum","DeclareInterface"]);function yc(c){let{node:g}=c;return g.declare||Kf.has(g.type)&&c.parent.type!=="DeclareExportDeclaration"?"declare ":""}var e1=new Set(["TSAbstractMethodDefinition","TSAbstractPropertyDefinition","TSAbstractAccessorProperty"]);function jd({node:c}){return c.abstract||e1.has(c.type)?"abstract ":""}function _h(c,g,x){let I=c.node;return I.typeArguments?x("typeArguments"):I.typeParameters?x("typeParameters"):""}function Bp(c,g,x){return["::",x("callee")]}function Kc(c,g,x){return c.type==="EmptyStatement"?";":c.type==="BlockStatement"||x?[" ",g]:Ht([Sn,g])}function Rp(c,g){return["...",g("argument"),xu(c,g)]}function Lp(c){return c.accessibility?c.accessibility+" ":""}function t1(c,g,x,I){let{node:W}=c;return si(W,Ai.Dangling)?kt([x,Yo(c,g,{indent:!0}),ln,I]):[x,I]}function $p(c,g,x){let{node:I}=c,W=[],X=I.type==="TupleExpression"?"#[":"[",ae="]",Ke=I.type==="TupleTypeAnnotation"&&I.types?"types":I.type==="TSTupleType"||I.type==="TupleTypeAnnotation"?"elementTypes":"elements",yt=I[Ke];if(yt.length===0)W.push(t1(c,g,X,ae));else{let Ue=pi(!1,yt,-1),pt=(Ue==null?void 0:Ue.type)!=="RestElement",dt=Ue===null,Et=Symbol("array"),cn=!g.__inJestEach&&yt.length>1&&yt.every((li,qn,ur)=>{let zr=li==null?void 0:li.type;if(!dr(li)&&!Qr(li))return!1;let ro=ur[qn+1];if(ro&&zr!==ro.type)return!1;let Ss=dr(li)?"elements":"properties";return li[Ss]&&li[Ss].length>1}),hn=qg(I,g),_r=pt?dt?",":Ae(g)?hn?Ei(",","",{groupId:Et}):Ei(","):"":"";W.push(kt([X,Ht([ln,hn?Xg(c,g,x,_r):[n1(c,g,Ke,x),_r],Yo(c,g)]),ln,ae],{shouldBreak:cn,id:Et}))}return W.push(_u(c),xu(c,x)),W}function qg(c,g){return dr(c)&&c.elements.length>1&&c.elements.every(x=>x&&(gs(x)||ei(x)&&!si(x.argument))&&!si(x,Ai.Trailing|Ai.Line,I=>!Vn(g.originalText,di(I),{backwards:!0})))}function Qg({node:c},{originalText:g}){let x=W=>wo(g,en(g,W)),I=W=>g[W]===","?W:I(x(W+1));return Fe(g,I(Ui(c)))}function n1(c,g,x,I){let W=[];return c.each(({node:X,isLast:ae})=>{W.push(X?kt(I()):""),ae||W.push([",",Sn,X&&Qg(c,g)?ln:""])},x),W}function Xg(c,g,x,I){let W=[];return c.each(({isLast:X,next:ae})=>{W.push([x(),X?I:","]),X||W.push(Qg(c,g)?[Yt,Yt]:si(ae,Ai.Leading|Ai.Line)?Yt:Sn)},"elements"),Ur(W)}var Zf=new Proxy(()=>{},{get:()=>Zf}),Yg=Zf;function Gg(c){return c.toLowerCase().replace(/^([+-]?[\d.]+e)(?:\+|(-))?0*(?=\d)/,"$1$2").replace(/^([+-]?[\d.]+)e[+-]?0+$/,"$1").replace(/^([+-])?\./,"$10.").replace(/(\.\d+?)0+(?=e|$)/,"$1").replace(/\.(?=e|$)/,"")}var ql=Gg,Rc=new WeakMap;function Ph(c,g,x){let{node:I}=c;if(I.computed)return["[",x("key"),"]"];let{parent:W}=c,{key:X}=I;if(g.quoteProps==="consistent"&&!Rc.has(W)){let ae=(W.properties||W.body||W.members).some(Ke=>!Ke.computed&&Ke.key&&Rs(Ke.key)&&!ks(Ke,g));Rc.set(W,ae)}if((X.type==="Identifier"||gs(X)&&jo(ql(go(X)))&&String(X.value)===ql(go(X))&&!(g.parser==="typescript"||g.parser==="babel-ts"))&&(g.parser==="json"||g.parser==="jsonc"||g.quoteProps==="consistent"&&Rc.get(W))){let ae=ar(JSON.stringify(X.type==="Identifier"?X.name:X.value.toString()),g);return c.call(Ke=>ta(Ke,ae,g),"key")}return ks(I,g)&&(g.quoteProps==="as-needed"||g.quoteProps==="consistent"&&!Rc.get(W))?c.call(ae=>ta(ae,/^\d/.test(X.value)?ql(X.value):X.value,g),"key"):x("key")}function Vd(c,g,x){let{node:I}=c;return I.shorthand?x("value"):_(c,g,x,Ph(c,g,x),":","value")}var i1=({node:c,key:g,parent:x})=>g==="value"&&c.type==="FunctionExpression"&&(x.type==="ObjectMethod"||x.type==="ClassMethod"||x.type==="ClassPrivateMethod"||x.type==="MethodDefinition"||x.type==="TSAbstractMethodDefinition"||x.type==="TSDeclareMethod"||x.type==="Property"&&we(x));function Kg(c,g,x,I){if(i1(c))return Jf(c,x,g);let{node:W}=c,X=!1;if((W.type==="FunctionDeclaration"||W.type==="FunctionExpression")&&I!=null&&I.expandLastArg){let{parent:pt}=c;Fi(pt)&&(Vs(pt).length>1||Xi(W).every(dt=>dt.type==="Identifier"&&!dt.typeAnnotation))&&(X=!0)}let ae=[yc(c),W.async?"async ":"",`function${W.generator?"*":""} `,W.id?g("id"):""],Ke=bo(c,g,x,X),yt=Vp(c,g),Ue=Gc(W,yt);return ae.push(_h(c,x,g),kt([Ue?kt(Ke):Ke,yt]),W.body?" ":"",g("body")),x.semi&&(W.declare||!W.body)&&ae.push(";"),ae}function jp(c,g,x){let{node:I}=c,{kind:W}=I,X=I.value||I,ae=[];return!W||W==="init"||W==="method"||W==="constructor"?X.async&&ae.push("async "):(Yg.ok(W==="get"||W==="set"),ae.push(W," ")),X.generator&&ae.push("*"),ae.push(Ph(c,g,x),I.optional||I.key.optional?"?":"",I===X?Jf(c,g,x):x("value")),ae}function Jf(c,g,x){let{node:I}=c,W=bo(c,x,g),X=Vp(c,x),ae=Pp(I),Ke=Gc(I,X),yt=[_h(c,g,x),kt([ae?kt(W,{shouldBreak:!0}):Ke?kt(W):W,X])];return I.body?yt.push(" ",x("body")):yt.push(g.semi?";":""),yt}function em(c){let g=Xi(c);return g.length===1&&!c.typeParameters&&!si(c,Ai.Dangling)&&g[0].type==="Identifier"&&!g[0].typeAnnotation&&!si(g[0])&&!g[0].optional&&!c.predicate&&!c.returnType}function tm(c,g){if(g.arrowParens==="always")return!1;if(g.arrowParens==="avoid"){let{node:x}=c;return em(x)}return!1}function Vp(c,g){let{node:x}=c,I=[xu(c,g,"returnType")];return x.predicate&&I.push(g("predicate")),I}function ed(c,g,x){let{node:I}=c,W=g.semi?";":"",X=[];if(I.argument){let yt=x("argument");Zg(g,I.argument)?yt=["(",Ht([Yt,yt]),Yt,")"]:(Dt(I.argument)||I.argument.type==="SequenceExpression"||g.experimentalTernaries&&I.argument.type==="ConditionalExpression"&&(I.argument.consequent.type==="ConditionalExpression"||I.argument.alternate.type==="ConditionalExpression"))&&(yt=kt([Ei("("),Ht([ln,yt]),ln,Ei(")")])),X.push(" ",yt)}let ae=si(I,Ai.Dangling),Ke=W&&ae&&si(I,Ai.Last|Ai.Line);return Ke&&X.push(W),ae&&X.push(" ",Yo(c,g)),Ke||X.push(W),X}function Hu(c,g,x){return["return",ed(c,g,x)]}function nm(c,g,x){return["throw",ed(c,g,x)]}function Zg(c,g){if(Mn(c.originalText,g)||si(g,Ai.Leading,x=>Mt(c.originalText,di(x),Ui(x)))&&!te(g))return!0;if(Ts(g)){let x=g,I;for(;I=Kr(x);)if(x=I,Mn(c.originalText,x))return!0}return!1}var Fh=new WeakMap;function Jg(c){return Fh.has(c)||Fh.set(c,c.type==="ConditionalExpression"&&!Z(c,g=>g.type==="ObjectExpression")),Fh.get(c)}var ey=c=>c.type==="SequenceExpression";function ty(c,g,x,I={}){let W=[],X,ae=[],Ke=!1,yt=!I.expandLastArg&&c.node.body.type==="ArrowFunctionExpression",Ue;(function li(){let{node:qn}=c,ur=r1(c,g,x,I);if(W.length===0)W.push(ur);else{let{leading:zr,trailing:ro}=fo(c,g);W.push([zr,ur]),ae.unshift(ro)}yt&&(Ke||(Ke=qn.returnType&&Xi(qn).length>0||qn.typeParameters||Xi(qn).some(zr=>zr.type!=="Identifier"))),!yt||qn.body.type!=="ArrowFunctionExpression"?(X=x("body",I),Ue=qn.body):c.call(li,"body")})();let pt=!Mn(g.originalText,Ue)&&(ey(Ue)||ny(Ue,X,g)||!Ke&&Jg(Ue)),dt=c.key==="callee"&&ul(c.parent),Et=Symbol("arrow-chain"),cn=im(c,I,{signatureDocs:W,shouldBreak:Ke}),hn,_r=!1;return yt&&(dt||I.assignmentLayout)&&(_r=!0,hn=I.assignmentLayout==="chain-tail-arrow-chain"||dt&&!pt),X=s1(c,g,I,{bodyDoc:X,bodyComments:ae,functionBody:Ue,shouldPutBodyOnSameLine:pt}),kt([kt(_r?Ht([ln,cn]):cn,{shouldBreak:hn,id:Et})," =>",yt?Xr(X,{groupId:Et}):kt(X),yt&&dt?Ei(ln,"",{groupId:Et}):""])}function r1(c,g,x,I){let{node:W}=c,X=[];if(W.async&&X.push("async "),tm(c,g))X.push(x(["params",0]));else{let Ke=I.expandLastArg||I.expandFirstArg,yt=Vp(c,x);if(Ke){if(Ri(yt))throw new D;yt=kt(oi(yt))}X.push(kt([bo(c,x,g,Ke,!0),yt]))}let ae=Yo(c,g,{filter(Ke){let yt=Xa(g.originalText,Ui(Ke));return yt!==!1&&g.originalText.slice(yt,yt+2)==="=>"}});return ae&&X.push(" ",ae),X}function ny(c,g,x){var I,W;return dr(c)||Qr(c)||c.type==="ArrowFunctionExpression"||c.type==="DoExpression"||c.type==="BlockStatement"||te(c)||((I=g.label)==null?void 0:I.hug)!==!1&&(((W=g.label)==null?void 0:W.embed)||aa(c,x.originalText))}function im(c,g,{signatureDocs:x,shouldBreak:I}){if(x.length===1)return x[0];let{parent:W,key:X}=c;return X!=="callee"&&ul(W)||Dt(W)?kt([x[0]," =>",Ht([Sn,Oi([" =>",Sn],x.slice(1))])],{shouldBreak:I}):X==="callee"&&ul(W)||g.assignmentLayout?kt(Oi([" =>",Sn],x),{shouldBreak:I}):kt(Ht(Oi([" =>",Sn],x)),{shouldBreak:I})}function s1(c,g,x,{bodyDoc:I,bodyComments:W,functionBody:X,shouldPutBodyOnSameLine:ae}){let{node:Ke,parent:yt}=c,Ue=x.expandLastArg&&Ae(g,"all")?Ei(","):"",pt=(x.expandLastArg||yt.type==="JSXExpressionContainer")&&!si(Ke)?ln:"";return ae&&Jg(X)?[" ",kt([Ei("","("),Ht([ln,I]),Ei("",")"),Ue,pt]),W]:(ey(X)&&(I=kt(["(",Ht([ln,I]),ln,")"])),ae?[" ",I,W]:[Ht([Sn,I,W]),Ue,pt])}var o1=(c,g,x)=>{if(!(c&&g==null)){if(g.findLast)return g.findLast(x);for(let I=g.length-1;I>=0;I--){let W=g[I];if(x(W,I,g))return W}}},a1=o1;function Mh(c,g,x,I){let{node:W}=c,X=[],ae=a1(!1,W[I],Ke=>Ke.type!=="EmptyStatement");return c.each(({node:Ke})=>{Ke.type!=="EmptyStatement"&&(X.push(x()),Ke!==ae&&(X.push(Yt),ma(Ke,g)&&X.push(Yt)))},I),X}function iy(c,g,x){let{node:I}=c,W=[];I.type==="StaticBlock"&&W.push("static "),W.push("{");let X=Wp(c,g,x);if(X)W.push(Ht([Yt,X]),Yt);else{let{parent:ae}=c,Ke=c.grandparent;ae.type==="ArrowFunctionExpression"||ae.type==="FunctionExpression"||ae.type==="FunctionDeclaration"||ae.type==="ObjectMethod"||ae.type==="ClassMethod"||ae.type==="ClassPrivateMethod"||ae.type==="ForStatement"||ae.type==="WhileStatement"||ae.type==="DoWhileStatement"||ae.type==="DoExpression"||ae.type==="CatchClause"&&!Ke.finalizer||ae.type==="TSModuleDeclaration"||ae.type==="TSDeclareFunction"||I.type==="StaticBlock"||W.push(Yt)}return W.push("}"),W}function Wp(c,g,x){var I;let{node:W}=c,X=Ve(W.directives),ae=W.body.some(Ue=>Ue.type!=="EmptyStatement"),Ke=si(W,Ai.Dangling);if(!X&&!ae&&!Ke)return"";let yt=[];return X&&(yt.push(Mh(c,g,x,"directives")),(ae||Ke)&&(yt.push(Yt),ma(pi(!1,W.directives,-1),g)&&yt.push(Yt))),ae&&yt.push(Mh(c,g,x,"body")),Ke&&yt.push(Yo(c,g)),W.type==="Program"&&((I=c.parent)==null?void 0:I.type)!=="ModuleExpression"&&yt.push(Yt),yt}function Zc(c){let g=new WeakMap;return function(x){return g.has(x)||g.set(x,Symbol(c)),g.get(x)}}var ry=Zc;function l1(c){switch(c){case null:return"";case"PlusOptional":return"+?";case"MinusOptional":return"-?";case"Optional":return"?"}}function u1(c,g,x){let{node:I}=c;return kt([I.variance?x("variance"):"","[",Ht([x("keyTparam")," in ",x("sourceType")]),"]",l1(I.optional),": ",x("propType")])}function rm(c,g){return c==="+"||c==="-"?c+g:g}function sy(c,g,x){let{node:I}=c,W=Mt(g.originalText,di(I),di(I.typeParameter));return kt(["{",Ht([g.bracketSpacing?Sn:ln,kt([x("typeParameter"),I.optional?rm(I.optional,"?"):"",I.typeAnnotation?": ":"",x("typeAnnotation")]),g.semi?Ei(";"):""]),Yo(c,g),g.bracketSpacing?Sn:ln,"}"],{shouldBreak:W})}var sm=ry("typeParameters");function c1(c,g,x){let{node:I}=c;return Xi(I).length===1&&I.type.startsWith("TS")&&!I[x][0].constraint&&c.parent.type==="ArrowFunctionExpression"&&!(g.filepath&&/\.ts$/.test(g.filepath))}function Wd(c,g,x,I){let{node:W}=c;if(!W[I])return"";if(!Array.isArray(W[I]))return x(I);let X=c.getNode(2),ae=X&&ho(X),Ke=c.match(Ue=>!(Ue[I].length===1&&re(Ue[I][0])),void 0,(Ue,pt)=>pt==="typeAnnotation",Ue=>Ue.type==="Identifier",mo);if(W[I].length===0||!Ke&&(ae||W[I].length===1&&(W[I][0].type==="NullableTypeAnnotation"||Lg(W[I][0]))))return["<",Oi(", ",c.map(x,I)),h1(c,g),">"];let yt=W.type==="TSTypeParameterInstantiation"?"":c1(c,g,I)?",":Ae(g)?Ei(","):"";return kt(["<",Ht([ln,Oi([",",Sn],c.map(x,I))]),yt,ln,">"],{id:sm(W)})}function h1(c,g){let{node:x}=c;if(!si(x,Ai.Dangling))return"";let I=!si(x,Ai.Line),W=Yo(c,g,{indent:!I});return I?W:[W,Yt]}function oy(c,g,x){let{node:I,parent:W}=c,X=[I.type==="TSTypeParameter"&&I.const?"const ":""],ae=I.type==="TSTypeParameter"?x("name"):I.name;if(W.type==="TSMappedType")return W.readonly&&X.push(rm(W.readonly,"readonly")," "),X.push("[",ae),I.constraint&&X.push(" in ",x("constraint")),W.nameType&&X.push(" as ",c.callParent(()=>x("nameType"))),X.push("]"),X;if(I.variance&&X.push(x("variance")),I.in&&X.push("in "),I.out&&X.push("out "),X.push(ae),I.bound&&(I.usesExtendsBound&&X.push(" extends "),X.push(xu(c,x,"bound"))),I.constraint){let Ke=Symbol("constraint");X.push(" extends",kt(Ht(Sn),{id:Ke}),Ci,Xr(x("constraint"),{groupId:Ke}))}return I.default&&X.push(" = ",x("default")),kt(X)}var ay=Zn(["ClassProperty","PropertyDefinition","ClassPrivateProperty","ClassAccessorProperty","AccessorProperty","TSAbstractPropertyDefinition","TSAbstractAccessorProperty"]);function Hd(c,g,x){let{node:I}=c,W=[yc(c),jd(c),"class"],X=si(I.id,Ai.Trailing)||si(I.typeParameters,Ai.Trailing)||si(I.superClass)||Ve(I.extends)||Ve(I.mixins)||Ve(I.implements),ae=[],Ke=[];if(I.id&&ae.push(" ",x("id")),ae.push(x("typeParameters")),I.superClass){let yt=[p1(c,g,x),x("superTypeParameters")],Ue=c.call(pt=>["extends ",ta(pt,yt,g)],"superClass");X?Ke.push(Sn,kt(Ue)):Ke.push(" ",Ue)}else Ke.push(Hp(c,g,x,"extends"));if(Ke.push(Hp(c,g,x,"mixins"),Hp(c,g,x,"implements")),X){let yt;uy(I)?yt=[...ae,Ht(Ke)]:yt=Ht([...ae,Ke]),W.push(kt(yt,{id:ly(I)}))}else W.push(...ae,...Ke);return W.push(" ",x("body")),W}var ly=ry("heritageGroup");function om(c){return Ei(Yt,"",{groupId:ly(c)})}function d1(c){return["extends","mixins","implements"].reduce((g,x)=>g+(Array.isArray(c[x])?c[x].length:0),c.superClass?1:0)>1}function uy(c){return c.typeParameters&&!si(c.typeParameters,Ai.Trailing|Ai.Line)&&!d1(c)}function Hp(c,g,x,I){let{node:W}=c;if(!Ve(W[I]))return"";let X=Yo(c,g,{marker:I});return[uy(W)?Ei(" ",Sn,{groupId:sm(W.typeParameters)}):Sn,X,X&&Yt,I,kt(Ht([Sn,Oi([",",Sn],c.map(x,I))]))]}function p1(c,g,x){let I=x("superClass"),{parent:W}=c;return W.type==="AssignmentExpression"?kt(Ei(["(",Ht([ln,I]),ln,")"],I)):I}function am(c,g,x){let{node:I}=c,W=[];return Ve(I.decorators)&&W.push(vu(c,g,x)),W.push(Lp(I)),I.static&&W.push("static "),W.push(jd(c)),I.override&&W.push("override "),W.push(jp(c,g,x)),W}function br(c,g,x){let{node:I}=c,W=[],X=g.semi?";":"";Ve(I.decorators)&&W.push(vu(c,g,x)),W.push(Lp(I),yc(c)),I.static&&W.push("static "),W.push(jd(c)),I.override&&W.push("override "),I.readonly&&W.push("readonly "),I.variance&&W.push(x("variance")),(I.type==="ClassAccessorProperty"||I.type==="AccessorProperty"||I.type==="TSAbstractAccessorProperty")&&W.push("accessor "),W.push(Ph(c,g,x),_u(c),Jh(c),xu(c,x));let ae=I.type==="TSAbstractPropertyDefinition"||I.type==="TSAbstractAccessorProperty";return[_(c,g,x,W," =",ae?void 0:"value"),X]}function cy(c,g,x){let{node:I}=c,W=[];return c.each(({node:X,next:ae,isLast:Ke})=>{W.push(x()),!g.semi&&ay(X)&&hy(X,ae)&&W.push(";"),Ke||(W.push(Yt),ma(X,g)&&W.push(Yt))},"body"),si(I,Ai.Dangling)&&W.push(Yo(c,g)),[Ve(I.body)?om(c.parent):"","{",W.length>0?[Ht([Yt,W]),Yt]:"","}"]}function hy(c,g){var x;let{type:I,name:W}=c.key;if(!c.computed&&I==="Identifier"&&(W==="static"||W==="get"||W==="set")&&!c.value&&!c.typeAnnotation)return!0;if(!g||g.static||g.accessibility)return!1;if(!g.computed){let X=(x=g.key)==null?void 0:x.name;if(X==="in"||X==="instanceof")return!0}if(ay(g)&&g.variance&&!g.static&&!g.declare)return!0;switch(g.type){case"ClassProperty":case"PropertyDefinition":case"TSAbstractPropertyDefinition":return g.computed;case"MethodDefinition":case"TSAbstractMethodDefinition":case"ClassMethod":case"ClassPrivateMethod":{if((g.value?g.value.async:g.async)||g.kind==="get"||g.kind==="set")return!1;let X=g.value?g.value.generator:g.generator;return!!(g.computed||X)}case"TSIndexSignature":return!0}return!1}function dy(c,g){if(g.semi||zp(c,g)||fy(c,g))return!1;let{node:x,key:I,parent:W}=c;return!!(x.type==="ExpressionStatement"&&(I==="body"&&(W.type==="Program"||W.type==="BlockStatement"||W.type==="StaticBlock"||W.type==="TSModuleBlock")||I==="consequent"&&W.type==="SwitchCase")&&c.call(()=>Up(c,g),"expression"))}function Up(c,g){let{node:x}=c;switch(x.type){case"ParenthesizedExpression":case"TypeCastExpression":case"ArrayExpression":case"ArrayPattern":case"TemplateLiteral":case"TemplateElement":case"RegExpLiteral":return!0;case"ArrowFunctionExpression":if(!tm(c,g))return!0;break;case"UnaryExpression":{let{prefix:I,operator:W}=x;if(I&&(W==="+"||W==="-"))return!0;break}case"BindExpression":if(!x.object)return!0;break;case"Literal":if(x.regex)return!0;break;default:if(te(x))return!0}return Hl(c,g)?!0:Ts(x)?c.call(()=>Up(c,g),...hs(x)):!1}function zp({node:c,parent:g},x){return(x.parentParser==="markdown"||x.parentParser==="mdx")&&c.type==="ExpressionStatement"&&te(c.expression)&&g.type==="Program"&&g.body.length===1}function py(c){switch(c.type){case"MemberExpression":switch(c.property.type){case"Identifier":case"NumericLiteral":case"StringLiteral":return py(c.object)}return!1;case"Identifier":return!0;default:return!1}}function fy({node:c,parent:g},x){return(x.parser==="__vue_event_binding"||x.parser==="__vue_ts_event_binding")&&c.type==="ExpressionStatement"&&g.type==="Program"&&g.body.length===1}function f1(c,g,x){let I=[x("expression")];return fy(c,g)?py(c.node.expression)&&I.push(";"):zp(c,g)||g.semi&&I.push(";"),I}function m1(c,g,x){if(g.__isVueBindings||g.__isVueForBindingLeft){let I=c.map(x,"program","body",0,"params");if(I.length===1)return I[0];let W=Oi([",",Sn],I);return g.__isVueForBindingLeft?["(",Ht([ln,kt(W)]),ln,")"]:W}if(g.__isEmbeddedTypescriptGenericParameters){let I=c.map(x,"program","body",0,"typeParameters","params");return Oi([",",Sn],I)}}function Ud(c,g){let{node:x}=c;switch(x.type){case"RegExpLiteral":return zd(x);case"BigIntLiteral":return lm(x.extra.raw);case"NumericLiteral":return ql(x.extra.raw);case"StringLiteral":return Ws(ar(x.extra.raw,g));case"NullLiteral":return"null";case"BooleanLiteral":return String(x.value);case"DecimalLiteral":return ql(x.value)+"m";case"DirectiveLiteral":return qp(x.extra.raw,g);case"Literal":{if(x.regex)return zd(x.regex);if(x.bigint)return lm(x.raw);if(x.decimal)return ql(x.decimal)+"m";let{value:I}=x;return typeof I=="number"?ql(x.raw):typeof I=="string"?g1(c)?qp(x.raw,g):Ws(ar(x.raw,g)):String(I)}}}function g1(c){if(c.key!=="expression")return;let{parent:g}=c;return g.type==="ExpressionStatement"&&g.directive}function lm(c){return c.toLowerCase()}function zd({pattern:c,flags:g}){return g=[...g].sort().join(""),`/${c}/${g}`}function qp(c,g){let x=c.slice(1,-1);if(x.includes('"')||x.includes("'"))return c;let I=g.singleQuote?"'":'"';return I+x+I}function my(c,g,x){let I=c.originalText.slice(g,x);for(let W of c[Symbol.for("comments")]){let X=di(W);if(X>x)break;let ae=Ui(W);if(ae<g)continue;let Ke=ae-X;I=I.slice(0,X-g)+" ".repeat(Ke)+I.slice(ae-g)}return I}var Qp=my;function Lc(c,g,x){let{node:I}=c;return["import",I.module?" module":"",I.phase?` ${I.phase}`:"",gy(I),vy(c,g,x),yy(c,g,x),xy(c,g,x),g.semi?";":""]}var Jc=c=>c.type==="ExportDefaultDeclaration"||c.type==="DeclareExportDeclaration"&&c.default;function um(c,g,x){let{node:I}=c,W=[Ac(c,g,x),yc(c),"export",Jc(I)?" default":""],{declaration:X,exported:ae}=I;return si(I,Ai.Dangling)&&(W.push(" ",Yo(c,g)),ka(I)&&W.push(Yt)),X?W.push(" ",x("declaration")):(W.push(x1(I)),I.type==="ExportAllDeclaration"||I.type==="DeclareExportAllDeclaration"?(W.push(" *"),ae&&W.push(" as ",x("exported"))):W.push(vy(c,g,x)),W.push(yy(c,g,x),xy(c,g,x))),W.push(v1(I,g)),W}var y1=Zn(["ClassDeclaration","FunctionDeclaration","TSInterfaceDeclaration","DeclareClass","DeclareFunction","TSDeclareFunction","EnumDeclaration"]);function v1(c,g){return g.semi&&(!c.declaration||Jc(c)&&!y1(c.declaration))?";":""}function cm(c,g=!0){return c&&c!=="value"?`${g?" ":""}${c}${g?"":" "}`:""}function gy(c,g){return cm(c.importKind,g)}function x1(c){return cm(c.exportKind)}function yy(c,g,x){let{node:I}=c;if(!I.source)return"";let W=[];return hm(I,g)&&W.push(" from"),W.push(" ",x("source")),W}function vy(c,g,x){let{node:I}=c;if(!hm(I,g))return"";let W=[" "];if(Ve(I.specifiers)){let X=[],ae=[];c.each(()=>{let Ke=c.node.type;if(Ke==="ExportNamespaceSpecifier"||Ke==="ExportDefaultSpecifier"||Ke==="ImportNamespaceSpecifier"||Ke==="ImportDefaultSpecifier")X.push(x());else if(Ke==="ExportSpecifier"||Ke==="ImportSpecifier")ae.push(x());else throw new is(I,"specifier")},"specifiers"),W.push(Oi(", ",X)),ae.length>0&&(X.length>0&&W.push(", "),ae.length>1||X.length>0||I.specifiers.some(Ke=>si(Ke))?W.push(kt(["{",Ht([g.bracketSpacing?Sn:ln,Oi([",",Sn],ae)]),Ei(Ae(g)?",":""),g.bracketSpacing?Sn:ln,"}"])):W.push(["{",g.bracketSpacing?" ":"",...ae,g.bracketSpacing?" ":"","}"]))}else W.push("{}");return W}function hm(c,g){return c.type!=="ImportDeclaration"||Ve(c.specifiers)||c.importKind==="type"?!0:Qp(g,di(c),di(c.source)).trimEnd().endsWith("from")}function b1(c,g){var x,I;if((x=c.extra)!=null&&x.deprecatedAssertSyntax)return"assert";let W=Qp(g,Ui(c.source),(I=c.attributes)!=null&&I[0]?di(c.attributes[0]):Ui(c)).trimStart();return W.startsWith("assert")?"assert":W.startsWith("with")||Ve(c.attributes)?"with":void 0}function xy(c,g,x){let{node:I}=c;if(!I.source)return"";let W=b1(I,g);if(!W)return"";let X=[` ${W} {`];return Ve(I.attributes)&&(g.bracketSpacing&&X.push(" "),X.push(Oi(", ",c.map(x,"attributes"))),g.bracketSpacing&&X.push(" ")),X.push("}"),X}function D1(c,g,x){let{node:I}=c,{type:W}=I,X=W.startsWith("Import"),ae=X?"imported":"local",Ke=X?"local":"exported",yt=I[ae],Ue=I[Ke],pt="",dt="";return W==="ExportNamespaceSpecifier"||W==="ImportNamespaceSpecifier"?pt="*":yt&&(pt=x(ae)),Ue&&!Xp(I)&&(dt=x(Ke)),[cm(W==="ImportSpecifier"?I.importKind:I.exportKind,!1),pt,pt&&dt?" as ":"",dt]}function Xp(c){if(c.type!=="ImportSpecifier"&&c.type!=="ExportSpecifier")return!1;let{local:g,[c.type==="ImportSpecifier"?"imported":"exported"]:x}=c;if(g.type!==x.type||!Gr(g,x))return!1;if(Rs(g))return g.value===x.value&&go(g)===go(x);switch(g.type){case"Identifier":return g.name===x.name;default:return!1}}function Yp(c,g,x){var I;let W=g.semi?";":"",{node:X}=c,ae=X.type==="ObjectTypeAnnotation",Ke=X.type==="TSEnumDeclaration"||X.type==="EnumBooleanBody"||X.type==="EnumNumberBody"||X.type==="EnumStringBody"||X.type==="EnumSymbolBody",yt=[X.type==="TSTypeLiteral"||Ke?"members":X.type==="TSInterfaceBody"?"body":"properties"];ae&&yt.push("indexers","callProperties","internalSlots");let Ue=yt.flatMap(fi=>c.map(({node:Qo})=>({node:Qo,printed:x(),loc:di(Qo)}),fi));yt.length>1&&Ue.sort((fi,Qo)=>fi.loc-Qo.loc);let{parent:pt,key:dt}=c,Et=ae&&dt==="body"&&(pt.type==="InterfaceDeclaration"||pt.type==="DeclareInterface"||pt.type==="DeclareClass"),cn=X.type==="TSInterfaceBody"||Ke||Et||X.type==="ObjectPattern"&&pt.type!=="FunctionDeclaration"&&pt.type!=="FunctionExpression"&&pt.type!=="ArrowFunctionExpression"&&pt.type!=="ObjectMethod"&&pt.type!=="ClassMethod"&&pt.type!=="ClassPrivateMethod"&&pt.type!=="AssignmentPattern"&&pt.type!=="CatchClause"&&X.properties.some(fi=>fi.value&&(fi.value.type==="ObjectPattern"||fi.value.type==="ArrayPattern"))||X.type!=="ObjectPattern"&&Ue.length>0&&Mt(g.originalText,di(X),Ue[0].loc),hn=Et?";":X.type==="TSInterfaceBody"||X.type==="TSTypeLiteral"?Ei(W,";"):",",_r=X.type==="RecordExpression"?"#{":X.exact?"{|":"{",li=X.exact?"|}":"}",qn=[],ur=Ue.map(fi=>{let Qo=[...qn,kt(fi.printed)];return qn=[hn,Sn],(fi.node.type==="TSPropertySignature"||fi.node.type==="TSMethodSignature"||fi.node.type==="TSConstructSignatureDeclaration"||fi.node.type==="TSCallSignatureDeclaration")&&si(fi.node,Ai.PrettierIgnore)&&qn.shift(),ma(fi.node,g)&&qn.push(Yt),Qo});if(X.inexact||X.hasUnknownMembers){let fi;if(si(X,Ai.Dangling)){let Qo=si(X,Ai.Line);fi=[Yo(c,g),Qo||Vn(g.originalText,Ui(pi(!1,Zo(X),-1)))?Yt:Sn,"..."]}else fi=["..."];ur.push([...qn,...fi])}let zr=(I=pi(!1,Ue,-1))==null?void 0:I.node,ro=!(X.inexact||X.hasUnknownMembers||zr&&(zr.type==="RestElement"||(zr.type==="TSPropertySignature"||zr.type==="TSCallSignatureDeclaration"||zr.type==="TSMethodSignature"||zr.type==="TSConstructSignatureDeclaration")&&si(zr,Ai.PrettierIgnore))),Ss;if(ur.length===0){if(!si(X,Ai.Dangling))return[_r,li,xu(c,x)];Ss=kt([_r,Yo(c,g,{indent:!0}),ln,li,_u(c),xu(c,x)])}else Ss=[Et&&Ve(X.properties)?om(pt):"",_r,Ht([g.bracketSpacing?Sn:ln,...ur]),Ei(ro&&(hn!==","||Ae(g))?hn:""),g.bracketSpacing?Sn:ln,li,_u(c),xu(c,x)];return c.match(fi=>fi.type==="ObjectPattern"&&!Ve(fi.decorators),dm)||re(X)&&(c.match(void 0,(fi,Qo)=>Qo==="typeAnnotation",(fi,Qo)=>Qo==="typeAnnotation",dm)||c.match(void 0,(fi,Qo)=>fi.type==="FunctionTypeParam"&&Qo==="typeAnnotation",dm))||!cn&&c.match(fi=>fi.type==="ObjectPattern",fi=>fi.type==="AssignmentExpression"||fi.type==="VariableDeclarator")?Ss:kt(Ss,{shouldBreak:cn})}function dm(c,g){return(g==="params"||g==="parameters"||g==="this"||g==="rest")&&Tc(c)}function w1(c){let g=[c];for(let x=0;x<g.length;x++){let I=g[x];for(let W of["test","consequent","alternate"]){let X=I[W];if(te(X))return!0;X.type==="ConditionalExpression"&&g.push(X)}}return!1}function E1(c,g,x){let{node:I}=c,W=I.type==="ConditionalExpression",X=W?"alternate":"falseType",{parent:ae}=c,Ke=W?x("test"):[x("checkType")," ","extends"," ",x("extendsType")];return ae.type===I.type&&ae[X]===I?$r(2,Ke):Ke}var by=new Map([["AssignmentExpression","right"],["VariableDeclarator","init"],["ReturnStatement","argument"],["ThrowStatement","argument"],["UnaryExpression","argument"],["YieldExpression","argument"],["AwaitExpression","argument"]]);function C1(c){let{node:g}=c;if(g.type!=="ConditionalExpression")return!1;let x,I=g;for(let W=0;!x;W++){let X=c.getParentNode(W);if(X.type==="ChainExpression"&&X.expression===I||Fi(X)&&X.callee===I||rt(X)&&X.object===I||X.type==="TSNonNullExpression"&&X.expression===I){I=X;continue}X.type==="NewExpression"&&X.callee===I||Ro(X)&&X.expression===I?(x=c.getParentNode(W+1),I=X):x=X}return I===g?!1:x[by.get(x.type)]===I}function S1(c,g,x){let{node:I}=c,W=I.type==="ConditionalExpression",X=W?"consequent":"trueType",ae=W?"alternate":"falseType",Ke=W?["test"]:["checkType","extendsType"],yt=I[X],Ue=I[ae],pt=[],dt=!1,{parent:Et}=c,cn=Et.type===I.type&&Ke.some(Wo=>Et[Wo]===I),hn=Et.type===I.type&&!cn,_r,li,qn=0;do li=_r||I,_r=c.getParentNode(qn),qn++;while(_r&&_r.type===I.type&&Ke.every(Wo=>_r[Wo]!==li));let ur=_r||Et,zr=li;if(W&&(te(I[Ke[0]])||te(yt)||te(Ue)||w1(zr))){dt=!0,hn=!0;let Wo=Ml=>[Ei("("),Ht([ln,Ml]),ln,Ei(")")],uu=Ml=>Ml.type==="NullLiteral"||Ml.type==="Literal"&&Ml.value===null||Ml.type==="Identifier"&&Ml.name==="undefined";pt.push(" ? ",uu(yt)?x(X):Wo(x(X))," : ",Ue.type===I.type||uu(Ue)?x(ae):Wo(x(ae)))}else{let Wo=Ml=>g.useTabs?Ht(x(Ml)):$r(2,x(Ml)),uu=[Sn,"? ",yt.type===I.type?Ei("","("):"",Wo(X),yt.type===I.type?Ei("",")"):"",Sn,": ",Wo(ae)];pt.push(Et.type!==I.type||Et[ae]===I||cn?uu:g.useTabs?Tr(Ht(uu)):$r(Math.max(0,g.tabWidth-2),uu))}let ro=[X,ae,...Ke].some(Wo=>si(I[Wo],uu=>bn(uu)&&Mt(g.originalText,di(uu),Ui(uu)))),Ss=Wo=>Et===ur?kt(Wo,{shouldBreak:ro}):ro?[Wo,Or]:Wo,fi=!dt&&(rt(Et)||Et.type==="NGPipeExpression"&&Et.left===I)&&!Et.computed,Qo=C1(c),Pu=Ss([E1(c,g,x),hn?pt:Ht(pt),W&&fi&&!Qo?ln:""]);return cn||Qo?kt([Ht([ln,Pu]),ln]):Pu}function A1(c,g){return(rt(g)||g.type==="NGPipeExpression"&&g.left===c)&&!g.computed}function T1(c,g,x,I){return[...c.map(W=>Zo(W)),Zo(g),Zo(x)].flat().some(W=>bn(W)&&Mt(I.originalText,di(W),Ui(W)))}var O1=new Map([["AssignmentExpression","right"],["VariableDeclarator","init"],["ReturnStatement","argument"],["ThrowStatement","argument"],["UnaryExpression","argument"],["YieldExpression","argument"],["AwaitExpression","argument"]]);function k1(c){let{node:g}=c;if(g.type!=="ConditionalExpression")return!1;let x,I=g;for(let W=0;!x;W++){let X=c.getParentNode(W);if(X.type==="ChainExpression"&&X.expression===I||Fi(X)&&X.callee===I||rt(X)&&X.object===I||X.type==="TSNonNullExpression"&&X.expression===I){I=X;continue}X.type==="NewExpression"&&X.callee===I||Ro(X)&&X.expression===I?(x=c.getParentNode(W+1),I=X):x=X}return I===g?!1:x[O1.get(x.type)]===I}var eh=c=>[Ei("("),Ht([ln,c]),ln,Ei(")")];function qd(c,g,x,I){if(!g.experimentalTernaries)return S1(c,g,x);let{node:W}=c,X=W.type==="ConditionalExpression",ae=W.type==="TSConditionalType"||W.type==="ConditionalTypeAnnotation",Ke=X?"consequent":"trueType",yt=X?"alternate":"falseType",Ue=X?["test"]:["checkType","extendsType"],pt=W[Ke],dt=W[yt],Et=Ue.map(fl=>W[fl]),{parent:cn}=c,hn=cn.type===W.type,_r=hn&&Ue.some(fl=>cn[fl]===W),li=hn&&cn[yt]===W,qn=pt.type===W.type,ur=dt.type===W.type,zr=ur||li,ro=g.tabWidth>2||g.useTabs,Ss,fi,Qo=0;do fi=Ss||W,Ss=c.getParentNode(Qo),Qo++;while(Ss&&Ss.type===W.type&&Ue.every(fl=>Ss[fl]!==fi));let Pu=Ss||cn,Wo=I&&I.assignmentLayout&&I.assignmentLayout!=="break-after-operator"&&(cn.type==="AssignmentExpression"||cn.type==="VariableDeclarator"||cn.type==="ClassProperty"||cn.type==="PropertyDefinition"||cn.type==="ClassPrivateProperty"||cn.type==="ObjectProperty"||cn.type==="Property"),uu=(cn.type==="ReturnStatement"||cn.type==="ThrowStatement")&&!(qn||ur),Ml=X&&Pu.type==="JSXExpressionContainer"&&c.grandparent.type!=="JSXAttribute",id=k1(c),ic=A1(W,cn),Us=ae&&Hl(c,g),ha=ro?g.useTabs?"	":" ".repeat(g.tabWidth-1):"",pl=T1(Et,pt,dt,g)||qn||ur,xc=!zr&&!hn&&!ae&&(Ml?pt.type==="NullLiteral"||pt.type==="Literal"&&pt.value===null:wi(pt,g)&&ds(W.test,3)),Nh=zr||li||ae&&!hn||hn&&X&&ds(W.test,1)||xc,vm=[];!qn&&si(pt,Ai.Dangling)&&c.call(fl=>{vm.push(Yo(fl,g),Yt)},"consequent");let Qd=[];si(W.test,Ai.Dangling)&&c.call(fl=>{Qd.push(Yo(fl,g))},"test"),!ur&&si(dt,Ai.Dangling)&&c.call(fl=>{Qd.push(Yo(fl,g))},"alternate"),si(W,Ai.Dangling)&&Qd.push(Yo(c,g));let xm=Symbol("test"),B1=Symbol("consequent"),ef=Symbol("test-and-consequent"),bm=X?[eh(x("test")),W.test.type==="ConditionalExpression"?Or:""]:[x("checkType")," ","extends"," ",W.extendsType.type==="TSConditionalType"||W.extendsType.type==="ConditionalTypeAnnotation"||W.extendsType.type==="TSMappedType"?x("extendsType"):kt(eh(x("extendsType")))],_y=kt([bm," ?"],{id:xm}),Py=x(Ke),tf=Ht([qn||Ml&&(te(pt)||hn||zr)?Yt:Sn,vm,Py]),R1=Nh?kt([_y,zr?tf:Ei(tf,kt(tf,{id:B1}),{groupId:xm})],{id:ef}):[_y,tf],Dm=x(yt),wm=xc?Ei(Dm,Tr(eh(Dm)),{groupId:ef}):Dm,Xd=[R1,Qd.length>0?[Ht([Yt,Qd]),Yt]:ur?Yt:xc?Ei(Sn," ",{groupId:ef}):Sn,":",ur?" ":ro?Nh?Ei(ha,Ei(zr||xc?" ":ha," "),{groupId:ef}):Ei(ha," "):" ",ur?wm:kt([Ht(wm),Ml&&!xc?ln:""]),ic&&!id?ln:"",pl?Or:""];return Wo&&!pl?kt(Ht([ln,kt(Xd)])):Wo||uu?kt(Ht(Xd)):id||ae&&_r?kt([Ht([ln,Xd]),Us?ln:""]):cn===Pu?kt(Xd):Xd}function _1(c,g,x,I){var Ke;let{node:W}=c;if(oa(W))return Ud(c,g);let X=g.semi?";":"",ae=[];switch(W.type){case"JsExpressionRoot":return x("node");case"JsonRoot":return[x("node"),Yt];case"File":return(Ke=m1(c,g,x))!=null?Ke:x("program");case"Program":return Wp(c,g,x);case"EmptyStatement":return"";case"ExpressionStatement":return f1(c,g,x);case"ChainExpression":return x("expression");case"ParenthesizedExpression":return!si(W.expression)&&(Qr(W.expression)||dr(W.expression))?["(",x("expression"),")"]:kt(["(",Ht([ln,x("expression")]),ln,")"]);case"AssignmentExpression":return N(c,g,x);case"VariableDeclarator":return q(c,g,x);case"BinaryExpression":case"LogicalExpression":return Wa(c,g,x);case"AssignmentPattern":return[x("left")," = ",x("right")];case"OptionalMemberExpression":case"MemberExpression":return Gi(c,g,x);case"MetaProperty":return[x("meta"),".",x("property")];case"BindExpression":return W.object&&ae.push(x("object")),ae.push(kt(Ht([ln,Bp(c,g,x)]))),ae;case"Identifier":return[W.name,_u(c),Jh(c),xu(c,x)];case"V8IntrinsicIdentifier":return["%",W.name];case"SpreadElement":case"SpreadElementPattern":case"SpreadPropertyPattern":case"RestElement":return Rp(c,x);case"FunctionDeclaration":case"FunctionExpression":return Kg(c,x,g,I);case"ArrowFunctionExpression":return ty(c,g,x,I);case"YieldExpression":return ae.push("yield"),W.delegate&&ae.push("*"),W.argument&&ae.push(" ",x("argument")),ae;case"AwaitExpression":if(ae.push("await"),W.argument){ae.push(" ",x("argument"));let{parent:yt}=c;if(Fi(yt)&&yt.callee===W||rt(yt)&&yt.object===W){ae=[Ht([ln,...ae]),ln];let Ue=c.findAncestor(pt=>pt.type==="AwaitExpression"||pt.type==="BlockStatement");if((Ue==null?void 0:Ue.type)!=="AwaitExpression"||!Z(Ue.argument,pt=>pt===W))return kt(ae)}}return ae;case"ExportDefaultDeclaration":case"ExportNamedDeclaration":case"ExportAllDeclaration":return um(c,g,x);case"ImportDeclaration":return Lc(c,g,x);case"ImportSpecifier":case"ExportSpecifier":case"ImportNamespaceSpecifier":case"ExportNamespaceSpecifier":case"ImportDefaultSpecifier":case"ExportDefaultSpecifier":return D1(c,g,x);case"ImportAttribute":return[x("key"),": ",x("value")];case"Import":return"import";case"BlockStatement":case"StaticBlock":return iy(c,g,x);case"ClassBody":return cy(c,g,x);case"ThrowStatement":return nm(c,g,x);case"ReturnStatement":return Hu(c,g,x);case"NewExpression":case"ImportExpression":case"OptionalCallExpression":case"CallExpression":return au(c,g,x);case"ObjectExpression":case"ObjectPattern":case"RecordExpression":return Yp(c,g,x);case"Property":return we(W)?jp(c,g,x):Vd(c,g,x);case"ObjectProperty":return Vd(c,g,x);case"ObjectMethod":return jp(c,g,x);case"Decorator":return["@",x("expression")];case"ArrayExpression":case"ArrayPattern":case"TupleExpression":return $p(c,g,x);case"SequenceExpression":{let{parent:yt}=c;if(yt.type==="ExpressionStatement"||yt.type==="ForStatement"){let Ue=[];return c.each(({isFirst:pt})=>{pt?Ue.push(x()):Ue.push(",",Ht([Sn,x()]))},"expressions"),kt(Ue)}return kt(Oi([",",Sn],c.map(x,"expressions")))}case"ThisExpression":return"this";case"Super":return"super";case"Directive":return[x("value"),X];case"UnaryExpression":return ae.push(W.operator),/[a-z]$/.test(W.operator)&&ae.push(" "),si(W.argument)?ae.push(kt(["(",Ht([ln,x("argument")]),ln,")"])):ae.push(x("argument")),ae;case"UpdateExpression":return ae.push(x("argument"),W.operator),W.prefix&&ae.reverse(),ae;case"ConditionalExpression":return qd(c,g,x,I);case"VariableDeclaration":{let yt=c.map(x,"declarations"),Ue=c.parent,pt=Ue.type==="ForStatement"||Ue.type==="ForInStatement"||Ue.type==="ForOfStatement",dt=W.declarations.some(cn=>cn.init),Et;return yt.length===1&&!si(W.declarations[0])?Et=yt[0]:yt.length>0&&(Et=Ht(yt[0])),ae=[yc(c),W.kind,Et?[" ",Et]:"",Ht(yt.slice(1).map(cn=>[",",dt&&!pt?Yt:Sn,cn]))],pt&&Ue.body!==W||ae.push(X),kt(ae)}case"WithStatement":return kt(["with (",x("object"),")",Kc(W.body,x("body"))]);case"IfStatement":{let yt=Kc(W.consequent,x("consequent")),Ue=kt(["if (",kt([Ht([ln,x("test")]),ln]),")",yt]);if(ae.push(Ue),W.alternate){let pt=si(W.consequent,Ai.Trailing|Ai.Line)||ka(W),dt=W.consequent.type==="BlockStatement"&&!pt;ae.push(dt?" ":Yt),si(W,Ai.Dangling)&&ae.push(Yo(c,g),pt?Yt:" "),ae.push("else",kt(Kc(W.alternate,x("alternate"),W.alternate.type==="IfStatement")))}return ae}case"ForStatement":{let yt=Kc(W.body,x("body")),Ue=Yo(c,g),pt=Ue?[Ue,ln]:"";return!W.init&&!W.test&&!W.update?[pt,kt(["for (;;)",yt])]:[pt,kt(["for (",kt([Ht([ln,x("init"),";",Sn,x("test"),";",Sn,x("update")]),ln]),")",yt])]}case"WhileStatement":return kt(["while (",kt([Ht([ln,x("test")]),ln]),")",Kc(W.body,x("body"))]);case"ForInStatement":return kt(["for (",x("left")," in ",x("right"),")",Kc(W.body,x("body"))]);case"ForOfStatement":return kt(["for",W.await?" await":""," (",x("left")," of ",x("right"),")",Kc(W.body,x("body"))]);case"DoWhileStatement":{let yt=Kc(W.body,x("body"));return ae=[kt(["do",yt])],W.body.type==="BlockStatement"?ae.push(" "):ae.push(Yt),ae.push("while (",kt([Ht([ln,x("test")]),ln]),")",X),ae}case"DoExpression":return[W.async?"async ":"","do ",x("body")];case"BreakStatement":case"ContinueStatement":return ae.push(W.type==="BreakStatement"?"break":"continue"),W.label&&ae.push(" ",x("label")),ae.push(X),ae;case"LabeledStatement":return W.body.type==="EmptyStatement"?[x("label"),":;"]:[x("label"),": ",x("body")];case"TryStatement":return["try ",x("block"),W.handler?[" ",x("handler")]:"",W.finalizer?[" finally ",x("finalizer")]:""];case"CatchClause":if(W.param){let yt=si(W.param,pt=>!bn(pt)||pt.leading&&Vn(g.originalText,Ui(pt))||pt.trailing&&Vn(g.originalText,di(pt),{backwards:!0})),Ue=x("param");return["catch ",yt?["(",Ht([ln,Ue]),ln,") "]:["(",Ue,") "],x("body")]}return["catch ",x("body")];case"SwitchStatement":return[kt(["switch (",Ht([ln,x("discriminant")]),ln,")"])," {",W.cases.length>0?Ht([Yt,Oi(Yt,c.map(({node:yt,isLast:Ue})=>[x(),!Ue&&ma(yt,g)?Yt:""],"cases"))]):"",Yt,"}"];case"SwitchCase":{W.test?ae.push("case ",x("test"),":"):ae.push("default:"),si(W,Ai.Dangling)&&ae.push(" ",Yo(c,g));let yt=W.consequent.filter(Ue=>Ue.type!=="EmptyStatement");if(yt.length>0){let Ue=Mh(c,g,x,"consequent");ae.push(yt.length===1&&yt[0].type==="BlockStatement"?[" ",Ue]:Ht([Yt,Ue]))}return ae}case"DebuggerStatement":return["debugger",X];case"ClassDeclaration":case"ClassExpression":return Hd(c,g,x);case"ClassMethod":case"ClassPrivateMethod":case"MethodDefinition":return am(c,g,x);case"ClassProperty":case"PropertyDefinition":case"ClassPrivateProperty":case"ClassAccessorProperty":case"AccessorProperty":return br(c,g,x);case"TemplateElement":return Ws(W.value.raw);case"TemplateLiteral":return Vl(c,x,g);case"TaggedTemplateExpression":return Ju(x);case"PrivateIdentifier":return["#",W.name];case"PrivateName":return["#",x("id")];case"TopicReference":return"%";case"ArgumentPlaceholder":return"?";case"ModuleExpression":{ae.push("module {");let yt=x("body");return yt&&ae.push(Ht([Yt,yt]),Yt),ae.push("}"),ae}case"InterpreterDirective":default:throw new is(W,"ESTree")}}function pm(c,g,x){let{parent:I,node:W,key:X}=c,ae=[x("expression")];switch(W.type){case"AsConstExpression":ae.push(" as const");break;case"AsExpression":case"TSAsExpression":ae.push(" as ",x("typeAnnotation"));break;case"SatisfiesExpression":case"TSSatisfiesExpression":ae.push(" satisfies ",x("typeAnnotation"));break}return X==="callee"&&Fi(I)||X==="object"&&rt(I)?kt([Ht([ln,...ae]),ln]):ae}function Dy(c,g,x){return Yp(c,x,g)}function wy(c,g){let{node:x}=c,I=g("id");x.computed&&(I=["[",I,"]"]);let W="";return x.initializer&&(W=g("initializer")),x.init&&(W=g("init")),W?[I," = ",W]:I}function P1(c,g,x){let{node:I}=c,W;if(I.type==="EnumSymbolBody"||I.explicitType)switch(I.type){case"EnumBooleanBody":W="boolean";break;case"EnumNumberBody":W="number";break;case"EnumStringBody":W="string";break;case"EnumSymbolBody":W="symbol";break}return[W?`of ${W} `:"",Dy(c,g,x)]}function nc(c,g,x){let{node:I}=c;return[yc(c),I.const?"const ":"","enum ",g("id")," ",I.type==="TSEnumDeclaration"?Dy(c,g,x):g("body")]}function fm(c,g,x){let{node:I}=c,W=[yc(c),"interface"],X=[],ae=[];I.type!=="InterfaceTypeAnnotation"&&X.push(" ",x("id"),x("typeParameters"));let Ke=I.typeParameters&&!si(I.typeParameters,Ai.Trailing|Ai.Line);return Ve(I.extends)&&ae.push(Ke?Ei(" ",Sn,{groupId:sm(I.typeParameters)}):Sn,"extends ",(I.extends.length===1?Xo:Ht)(Oi([",",Sn],c.map(x,"extends")))),si(I.id,Ai.Trailing)||Ve(I.extends)?Ke?W.push(kt([...X,Ht(ae)])):W.push(kt(Ht([...X,...ae]))):W.push(...X,...ae),W.push(" ",x("body")),kt(W)}function td(c,g,x){var X,ae,Ke;let{node:I}=c;if(Js(I))return I.type.slice(0,-14).toLowerCase();let W=g.semi?";":"";switch(I.type){case"DeclareClass":return Hd(c,g,x);case"DeclareFunction":return[yc(c),"function ",x("id"),x("predicate"),W];case"DeclareModule":return["declare module ",x("id")," ",x("body")];case"DeclareModuleExports":return["declare module.exports",xu(c,x),W];case"DeclareVariable":return[yc(c),(X=I.kind)!=null?X:"var"," ",x("id"),W];case"DeclareExportDeclaration":case"DeclareExportAllDeclaration":return um(c,g,x);case"DeclareOpaqueType":case"OpaqueType":return $g(c,g,x);case"DeclareTypeAlias":case"TypeAlias":return Fl(c,g,x);case"IntersectionTypeAnnotation":return kc(c,g,x);case"UnionTypeAnnotation":return Ld(c,g,x);case"ConditionalTypeAnnotation":return qd(c,g,x);case"InferTypeAnnotation":return Vg(c,g,x);case"FunctionTypeAnnotation":return jg(c,g,x);case"TupleTypeAnnotation":return $p(c,g,x);case"TupleTypeLabeledElement":return Np(c,g,x);case"TupleTypeSpreadElement":return $d(c,g,x);case"GenericTypeAnnotation":return[x("id"),Wd(c,g,x,"typeParameters")];case"IndexedAccessType":case"OptionalIndexedAccessType":return Mp(c,g,x);case"TypeAnnotation":return Hg(c,g,x);case"TypeParameter":return oy(c,g,x);case"TypeofTypeAnnotation":return Gf(c,x);case"ExistsTypeAnnotation":return"*";case"ArrayTypeAnnotation":return Ug(x);case"DeclareEnum":case"EnumDeclaration":return nc(c,x,g);case"EnumBooleanBody":case"EnumNumberBody":case"EnumStringBody":case"EnumSymbolBody":return P1(c,x,g);case"EnumBooleanMember":case"EnumNumberMember":case"EnumStringMember":case"EnumDefaultedMember":return wy(c,x);case"FunctionTypeParam":{let yt=I.name?x("name"):c.parent.this===I?"this":"";return[yt,_u(c),yt?": ":"",x("typeAnnotation")]}case"DeclareInterface":case"InterfaceDeclaration":case"InterfaceTypeAnnotation":return fm(c,g,x);case"ClassImplements":case"InterfaceExtends":return[x("id"),x("typeParameters")];case"NullableTypeAnnotation":return["?",x("typeAnnotation")];case"Variance":{let{kind:yt}=I;return Yg.ok(yt==="plus"||yt==="minus"),yt==="plus"?"+":"-"}case"KeyofTypeAnnotation":return["keyof ",x("argument")];case"ObjectTypeCallProperty":return[I.static?"static ":"",x("value")];case"ObjectTypeMappedTypeProperty":return u1(c,g,x);case"ObjectTypeIndexer":return[I.static?"static ":"",I.variance?x("variance"):"","[",x("id"),I.id?": ":"",x("key"),"]: ",x("value")];case"ObjectTypeProperty":{let yt="";return I.proto?yt="proto ":I.static&&(yt="static "),[yt,I.kind!=="init"?I.kind+" ":"",I.variance?x("variance"):"",Ph(c,g,x),_u(c),we(I)?"":": ",x("value")]}case"ObjectTypeAnnotation":return Yp(c,g,x);case"ObjectTypeInternalSlot":return[I.static?"static ":"","[[",x("id"),"]]",_u(c),I.method?"":": ",x("value")];case"ObjectTypeSpreadProperty":return Rp(c,x);case"QualifiedTypeofIdentifier":case"QualifiedTypeIdentifier":return[x("qualification"),".",x("id")];case"NullLiteralTypeAnnotation":return"null";case"BooleanLiteralTypeAnnotation":return String(I.value);case"StringLiteralTypeAnnotation":return Ws(ar(go(I),g));case"NumberLiteralTypeAnnotation":return ql((ae=I.raw)!=null?ae:I.extra.raw);case"BigIntLiteralTypeAnnotation":return lm((Ke=I.raw)!=null?Ke:I.extra.raw);case"TypeCastExpression":return["(",x("expression"),xu(c,x),")"];case"TypePredicate":return zg(c,x);case"TypeParameterDeclaration":case"TypeParameterInstantiation":return Wd(c,g,x,"params");case"InferredPredicate":case"DeclaredPredicate":return[c.key==="predicate"&&c.parent.type!=="DeclareFunction"&&!c.parent.returnType?": ":" ","%checks",...I.type==="DeclaredPredicate"?["(",x("value"),")"]:[]];case"AsExpression":case"AsConstExpression":case"SatisfiesExpression":return pm(c,g,x)}}function mm(c,g,x){var Ke;var I;let{node:W}=c;if(!W.type.startsWith("TS"))return;if(Pn(W))return W.type.slice(2,-7).toLowerCase();let X=g.semi?";":"",ae=[];switch(W.type){case"TSThisType":return"this";case"TSTypeAssertion":{let yt=!(dr(W.expression)||Qr(W.expression)),Ue=kt(["<",Ht([ln,x("typeAnnotation")]),ln,">"]),pt=[Ei("("),Ht([ln,x("expression")]),ln,Ei(")")];return yt?Mi([[Ue,x("expression")],[Ue,kt(pt,{shouldBreak:!0})],[Ue,x("expression")]]):kt([Ue,x("expression")])}case"TSDeclareFunction":return Kg(c,x,g);case"TSExportAssignment":return["export = ",x("expression"),X];case"TSModuleBlock":return iy(c,g,x);case"TSInterfaceBody":case"TSTypeLiteral":return Yp(c,g,x);case"TSTypeAliasDeclaration":return Fl(c,g,x);case"TSQualifiedName":return[x("left"),".",x("right")];case"TSAbstractMethodDefinition":case"TSDeclareMethod":return am(c,g,x);case"TSAbstractAccessorProperty":case"TSAbstractPropertyDefinition":return br(c,g,x);case"TSInterfaceHeritage":case"TSClassImplements":case"TSExpressionWithTypeArguments":case"TSInstantiationExpression":return[x("expression"),x("typeParameters")];case"TSTemplateLiteralType":return Vl(c,x,g);case"TSNamedTupleMember":return Np(c,g,x);case"TSRestType":return $d(c,g,x);case"TSOptionalType":return[x("typeAnnotation"),"?"];case"TSInterfaceDeclaration":return fm(c,g,x);case"TSTypeParameterDeclaration":case"TSTypeParameterInstantiation":return Wd(c,g,x,"params");case"TSTypeParameter":return oy(c,g,x);case"TSAsExpression":case"TSSatisfiesExpression":return pm(c,g,x);case"TSArrayType":return Ug(x);case"TSPropertySignature":return[W.readonly?"readonly ":"",Ph(c,g,x),_u(c),xu(c,x)];case"TSParameterProperty":return[Lp(W),W.static?"static ":"",W.override?"override ":"",W.readonly?"readonly ":"",x("parameter")];case"TSTypeQuery":return Gf(c,x);case"TSIndexSignature":{let yt=W.parameters.length>1?Ei(Ae(g)?",":""):"",Ue=kt([Ht([ln,Oi([", ",ln],c.map(x,"parameters"))]),yt,ln]),pt=c.parent.type==="ClassBody"&&c.key==="body";return[pt&&W.static?"static ":"",W.readonly?"readonly ":"","[",W.parameters?Ue:"","]",xu(c,x),pt?X:""]}case"TSTypePredicate":return zg(c,x);case"TSNonNullExpression":return[x("expression"),"!"];case"TSImportType":return[W.isTypeOf?"typeof ":"","import(",x("argument"),")",W.qualifier?[".",x("qualifier")]:"",Wd(c,g,x,W.typeArguments?"typeArguments":"typeParameters")];case"TSLiteralType":return x("literal");case"TSIndexedAccessType":return Mp(c,g,x);case"TSTypeOperator":return[W.operator," ",x("typeAnnotation")];case"TSMappedType":return sy(c,g,x);case"TSMethodSignature":{let yt=W.kind&&W.kind!=="method"?`${W.kind} `:"";ae.push(Lp(W),yt,W.computed?"[":"",x("key"),W.computed?"]":"",_u(c));let Ue=bo(c,x,g,!1,!0),pt=W.returnType?"returnType":"typeAnnotation",dt=W[pt],Et=dt?xu(c,x,pt):"",cn=Gc(W,Et);return ae.push(cn?kt(Ue):Ue),dt&&ae.push(kt(Et)),kt(ae)}case"TSNamespaceExportDeclaration":return["export as namespace ",x("id"),g.semi?";":""];case"TSEnumDeclaration":return nc(c,x,g);case"TSEnumMember":return wy(c,x);case"TSImportEqualsDeclaration":return[W.isExport?"export ":"","import ",gy(W,!1),x("id")," = ",x("moduleReference"),g.semi?";":""];case"TSExternalModuleReference":return["require(",x("expression"),")"];case"TSModuleDeclaration":{let{parent:yt}=c,Ue=yt.type==="TSModuleDeclaration",pt=((I=W.body)==null?void 0:I.type)==="TSModuleDeclaration";if(Ue)ae.push(".");else if(ae.push(yc(c)),!(W.kind==="global"||W.global)){let dt=(Ke=W.kind)!=null?Ke:Rs(W.id)||Qp(g,di(W),di(W.id)).trim().endsWith("module")?"module":"namespace";ae.push(dt," ")}return ae.push(x("id")),pt?ae.push(x("body")):W.body?ae.push(" ",kt(x("body"))):ae.push(X),ae}case"TSConditionalType":return qd(c,g,x);case"TSInferType":return Vg(c,g,x);case"TSIntersectionType":return kc(c,g,x);case"TSUnionType":return Ld(c,g,x);case"TSFunctionType":case"TSCallSignatureDeclaration":case"TSConstructorType":case"TSConstructSignatureDeclaration":return jg(c,g,x);case"TSTupleType":return $p(c,g,x);case"TSTypeReference":return[x("typeName"),Wd(c,g,x,"typeParameters")];case"TSTypeAnnotation":return Hg(c,g,x);case"TSEmptyBodyFunctionExpression":return Jf(c,g,x);case"TSJSDocAllType":return"*";case"TSJSDocUnknownType":return"?";case"TSJSDocNullableType":return Ip(c,x,"?");case"TSJSDocNonNullableType":return Ip(c,x,"!");case"TSParenthesizedType":default:throw new is(W,"TypeScript")}}function Ih(c,g,x,I){if(us(c))return ec(c,g);for(let W of[ou,un,td,mm,_1]){let X=W(c,g,x,I);if(X!==void 0)return X}}var Ey=Zn(["ClassMethod","ClassPrivateMethod","ClassProperty","ClassAccessorProperty","AccessorProperty","TSAbstractAccessorProperty","PropertyDefinition","TSAbstractPropertyDefinition","ClassPrivateProperty","MethodDefinition","TSAbstractMethodDefinition","TSDeclareMethod"]);function Cy(c,g,x,I){var W;c.isRoot&&((W=g.__onHtmlBindingRoot)==null||W.call(g,c.node,g));let X=Ih(c,g,x,I);if(!X)return"";let{node:ae}=c;if(Ey(ae))return X;let Ke=Ve(ae.decorators),yt=Tu(c,g,x),Ue=ae.type==="ClassExpression";if(Ke&&!Ue)return xs(X,Et=>kt([yt,Et]));let pt=Hl(c,g),dt=dy(c,g);return!yt&&!pt&&!dt?X:xs(X,Et=>[dt?";":"",pt?"(":"",pt&&Ue&&Ke?[Ht([Sn,yt,Et]),Sn]:[yt,Et],pt?")":""])}var fh=Cy,F1={avoidAstMutation:!0},gm=[{linguistLanguageId:174,name:"JSON.stringify",type:"data",color:"#292929",tmScope:"source.json",aceMode:"json",codemirrorMode:"javascript",codemirrorMimeType:"application/json",aliases:["geojson","jsonl","topojson"],extensions:[".importmap"],filenames:["package.json","package-lock.json","composer.json"],parsers:["json-stringify"],vscodeLanguageIds:["json"]},{linguistLanguageId:174,name:"JSON",type:"data",color:"#292929",tmScope:"source.json",aceMode:"json",codemirrorMode:"javascript",codemirrorMimeType:"application/json",aliases:["geojson","jsonl","topojson"],extensions:[".json",".4DForm",".4DProject",".avsc",".geojson",".gltf",".har",".ice",".JSON-tmLanguage",".mcmeta",".tfstate",".tfstate.backup",".topojson",".webapp",".webmanifest",".yy",".yyp"],filenames:[".all-contributorsrc",".arcconfig",".auto-changelog",".c8rc",".htmlhintrc",".imgbotconfig",".nycrc",".tern-config",".tern-project",".watchmanconfig","Pipfile.lock","composer.lock","flake.lock","mcmod.info",".babelrc",".jscsrc",".jshintrc",".jslintrc",".swcrc"],parsers:["json"],vscodeLanguageIds:["json"]},{linguistLanguageId:423,name:"JSON with Comments",type:"data",color:"#292929",group:"JSON",tmScope:"source.js",aceMode:"javascript",codemirrorMode:"javascript",codemirrorMimeType:"text/javascript",aliases:["jsonc"],extensions:[".jsonc",".code-snippets",".code-workspace",".sublime-build",".sublime-commands",".sublime-completions",".sublime-keymap",".sublime-macro",".sublime-menu",".sublime-mousemap",".sublime-project",".sublime-settings",".sublime-theme",".sublime-workspace",".sublime_metrics",".sublime_session"],filenames:[],parsers:["jsonc"],vscodeLanguageIds:["jsonc"]},{linguistLanguageId:175,name:"JSON5",type:"data",color:"#267CB9",extensions:[".json5"],tmScope:"source.js",aceMode:"javascript",codemirrorMode:"javascript",codemirrorMimeType:"application/json",parsers:["json5"],vscodeLanguageIds:["json5"]}],Gp={};Nn(Gp,{getVisitorKeys:()=>Ay,massageAstNode:()=>mh,print:()=>Zp});var M1={JsonRoot:["node"],ArrayExpression:["elements"],ObjectExpression:["properties"],ObjectProperty:["key","value"],UnaryExpression:["argument"],NullLiteral:[],BooleanLiteral:[],StringLiteral:[],NumericLiteral:[],Identifier:[],TemplateLiteral:["quasis"],TemplateElement:[]},Kp=M1,Sy=Di(Kp),Ay=Sy;function Zp(c,g,x){let{node:I}=c;switch(I.type){case"JsonRoot":return[x("node"),Yt];case"ArrayExpression":{if(I.elements.length===0)return"[]";let W=c.map(()=>c.node===null?"null":x(),"elements");return["[",Ht([Yt,Oi([",",Yt],W)]),Yt,"]"]}case"ObjectExpression":return I.properties.length===0?"{}":["{",Ht([Yt,Oi([",",Yt],c.map(x,"properties"))]),Yt,"}"];case"ObjectProperty":return[x("key"),": ",x("value")];case"UnaryExpression":return[I.operator==="+"?"":I.operator,x("argument")];case"NullLiteral":return"null";case"BooleanLiteral":return I.value?"true":"false";case"StringLiteral":return JSON.stringify(I.value);case"NumericLiteral":return Ty(c)?JSON.stringify(String(I.value)):JSON.stringify(I.value);case"Identifier":return Ty(c)?JSON.stringify(I.name):I.name;case"TemplateLiteral":return x(["quasis",0]);case"TemplateElement":return JSON.stringify(I.value.cooked);default:throw new is(I,"JSON")}}function Ty(c){return c.key==="key"&&c.parent.type==="ObjectProperty"}var I1=new Set(["start","end","extra","loc","comments","leadingComments","trailingComments","innerComments","errors","range","tokens"]);function mh(c,g){let{type:x}=c;if(x==="ObjectProperty"){let{key:I}=c;I.type==="Identifier"?g.key={type:"StringLiteral",value:I.name}:I.type==="NumericLiteral"&&(g.key={type:"StringLiteral",value:String(I.value)});return}if(x==="UnaryExpression"&&c.operator==="+")return g.argument;if(x==="ArrayExpression"){for(let[I,W]of c.elements.entries())W===null&&g.elements.splice(I,0,{type:"NullLiteral"});return}if(x==="TemplateLiteral")return{type:"StringLiteral",value:c.quasis[0].value.cooked}}mh.ignoredProperties=I1;var nd={bracketSpacing:{category:"Common",type:"boolean",default:!0,description:"Print spaces between brackets.",oppositeDescription:"Do not print spaces between brackets."},singleQuote:{category:"Common",type:"boolean",default:!1,description:"Use single quotes instead of double quotes."},proseWrap:{category:"Common",type:"choice",default:"preserve",description:"How to wrap prose.",choices:[{value:"always",description:"Wrap prose if it exceeds the print width."},{value:"never",description:"Do not wrap prose."},{value:"preserve",description:"Wrap prose as-is."}]},bracketSameLine:{category:"Common",type:"boolean",default:!1,description:"Put > of opening tags on the last line instead of on a new line."},singleAttributePerLine:{category:"Common",type:"boolean",default:!1,description:"Enforce single attribute per line in HTML, Vue and JSX."}},vc="JavaScript",Oy={arrowParens:{category:vc,type:"choice",default:"always",description:"Include parentheses around a sole arrow function parameter.",choices:[{value:"always",description:"Always include parens. Example: `(x) => x`"},{value:"avoid",description:"Omit parens when possible. Example: `x => x`"}]},bracketSameLine:nd.bracketSameLine,bracketSpacing:nd.bracketSpacing,jsxBracketSameLine:{category:vc,type:"boolean",description:"Put > on the last line instead of at a new line.",deprecated:"2.4.0"},semi:{category:vc,type:"boolean",default:!0,description:"Print semicolons.",oppositeDescription:"Do not print semicolons, except at the beginning of lines which may need them."},experimentalTernaries:{category:vc,type:"boolean",default:!1,description:"Use curious ternaries, with the question mark after the condition.",oppositeDescription:"Default behavior of ternaries; keep question marks on the same line as the consequent."},singleQuote:nd.singleQuote,jsxSingleQuote:{category:vc,type:"boolean",default:!1,description:"Use single quotes in JSX."},quoteProps:{category:vc,type:"choice",default:"as-needed",description:"Change when properties in objects are quoted.",choices:[{value:"as-needed",description:"Only add quotes around object properties where required."},{value:"consistent",description:"If at least one property in an object requires quotes, quote all properties."},{value:"preserve",description:"Respect the input use of quotes in object properties."}]},trailingComma:{category:vc,type:"choice",default:"all",description:"Print trailing commas wherever possible when multi-line.",choices:[{value:"all",description:"Trailing commas wherever possible (including function arguments)."},{value:"es5",description:"Trailing commas where valid in ES5 (objects, arrays, etc.)"},{value:"none",description:"No trailing commas."}]},singleAttributePerLine:nd.singleAttributePerLine},ky=Oy,Jp={estree:mr,"estree-json":Gp},ym=[...qt,...gm],N1=$t},64663:function(lo,bs,dn){"use strict";dn.d(bs,{WU:function(){return hl}});var xe=Object.create,It=Object.defineProperty,fn=Object.getOwnPropertyDescriptor,it=Object.getOwnPropertyNames,Qt=Object.getPrototypeOf,yn=Object.prototype.hasOwnProperty,ii=(O,H)=>()=>(O&&(H=O(O=0)),H),Nn=(O,H)=>()=>(H||O((H={exports:{}}).exports,H),H.exports),Kt=(O,H)=>{for(var se in H)It(O,se,{get:H[se],enumerable:!0})},In=(O,H,se,ge)=>{if(H&&typeof H=="object"||typeof H=="function")for(let ue of it(H))!yn.call(O,ue)&&ue!==se&&It(O,ue,{get:()=>H[ue],enumerable:!(ge=fn(H,ue))||ge.enumerable});return O},vn=(O,H,se)=>(se=O!=null?xe(Qt(O)):{},In(H||!O||!O.__esModule?It(se,"default",{value:O,enumerable:!0}):se,O)),gn=O=>In(It({},"__esModule",{value:!0}),O),Si=(O,H,se)=>{if(!H.has(O))throw TypeError("Cannot "+se)},Ii=(O,H,se)=>{if(H.has(O))throw TypeError("Cannot add the same private member more than once");H instanceof WeakSet?H.add(O):H.set(O,se)},Un=(O,H,se)=>(Si(O,H,"access private method"),se),$t=Nn(O=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.default=H;function H(){}H.prototype={diff:function(ue,be){var ot=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},_t=ot.callback;typeof ot=="function"&&(_t=ot,ot={}),this.options=ot;var Rt=this;function an(Er){return _t?(setTimeout(function(){_t(void 0,Er)},0),!0):Er}ue=this.castInput(ue),be=this.castInput(be),ue=this.removeEmpty(this.tokenize(ue)),be=this.removeEmpty(this.tokenize(be));var Gt=be.length,Ln=ue.length,Dn=1,nn=Gt+Ln;ot.maxEditLength&&(nn=Math.min(nn,ot.maxEditLength));var An=[{newPos:-1,components:[]}],ni=this.extractCommon(An[0],be,ue,0);if(An[0].newPos+1>=Gt&&ni+1>=Ln)return an([{value:this.join(be),count:be.length}]);function er(){for(var Er=-1*Dn;Er<=Dn;Er+=2){var ys=void 0,Ns=An[Er-1],ao=An[Er+1],Bo=(ao?ao.newPos:0)-Er;Ns&&(An[Er-1]=void 0);var to=Ns&&Ns.newPos+1<Gt,Ja=ao&&0<=Bo&&Bo<Ln;if(!to&&!Ja){An[Er]=void 0;continue}if(!to||Ja&&Ns.newPos<ao.newPos?(ys=ge(ao),Rt.pushComponent(ys.components,void 0,!0)):(ys=Ns,ys.newPos++,Rt.pushComponent(ys.components,!0,void 0)),Bo=Rt.extractCommon(ys,be,ue,Er),ys.newPos+1>=Gt&&Bo+1>=Ln)return an(se(Rt,ys.components,be,ue,Rt.useLongestToken));An[Er]=ys}Dn++}if(_t)(function Er(){setTimeout(function(){if(Dn>nn)return _t();er()||Er()},0)})();else for(;Dn<=nn;){var yr=er();if(yr)return yr}},pushComponent:function(ue,be,ot){var _t=ue[ue.length-1];_t&&_t.added===be&&_t.removed===ot?ue[ue.length-1]={count:_t.count+1,added:be,removed:ot}:ue.push({count:1,added:be,removed:ot})},extractCommon:function(ue,be,ot,_t){for(var Rt=be.length,an=ot.length,Gt=ue.newPos,Ln=Gt-_t,Dn=0;Gt+1<Rt&&Ln+1<an&&this.equals(be[Gt+1],ot[Ln+1]);)Gt++,Ln++,Dn++;return Dn&&ue.components.push({count:Dn}),ue.newPos=Gt,Ln},equals:function(ue,be){return this.options.comparator?this.options.comparator(ue,be):ue===be||this.options.ignoreCase&&ue.toLowerCase()===be.toLowerCase()},removeEmpty:function(ue){for(var be=[],ot=0;ot<ue.length;ot++)ue[ot]&&be.push(ue[ot]);return be},castInput:function(ue){return ue},tokenize:function(ue){return ue.split("")},join:function(ue){return ue.join("")}};function se(ue,be,ot,_t,Rt){for(var an=0,Gt=be.length,Ln=0,Dn=0;an<Gt;an++){var nn=be[an];if(nn.removed){if(nn.value=ue.join(_t.slice(Dn,Dn+nn.count)),Dn+=nn.count,an&&be[an-1].added){var An=be[an-1];be[an-1]=be[an],be[an]=An}}else{if(!nn.added&&Rt){var ni=ot.slice(Ln,Ln+nn.count);ni=ni.map(function(yr,Er){var ys=_t[Dn+Er];return ys.length>yr.length?ys:yr}),nn.value=ue.join(ni)}else nn.value=ue.join(ot.slice(Ln,Ln+nn.count));Ln+=nn.count,nn.added||(Dn+=nn.count)}}var er=be[Gt-1];return Gt>1&&typeof er.value=="string"&&(er.added||er.removed)&&ue.equals("",er.value)&&(be[Gt-2].value+=er.value,be.pop()),be}function ge(ue){return{newPos:ue.newPos,components:ue.components.slice(0)}}}),qt=Nn(O=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.diffArrays=ue,O.arrayDiff=void 0;var H=se($t());function se(be){return be&&be.__esModule?be:{default:be}}var ge=new H.default;O.arrayDiff=ge,ge.tokenize=function(be){return be.slice()},ge.join=ge.removeEmpty=function(be){return be};function ue(be,ot,_t){return ge.diff(be,ot,_t)}}),mr=Nn((O,H)=>{"use strict";var se=new Proxy(String,{get:()=>se});H.exports=se}),ss={};Kt(ss,{default:()=>zs,shouldHighlight:()=>Dr});var Dr,zs,pi=ii(()=>{Dr=()=>!1,zs=String}),vs=Nn(O=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.codeFrameColumns=Ln,O.default=Dn;var H=(pi(),gn(ss)),se=ue(mr(),!0);function ge(nn){if(typeof WeakMap!="function")return null;var An=new WeakMap,ni=new WeakMap;return(ge=function(er){return er?ni:An})(nn)}function ue(nn,An){if(!An&&nn&&nn.__esModule)return nn;if(nn===null||typeof nn!="object"&&typeof nn!="function")return{default:nn};var ni=ge(An);if(ni&&ni.has(nn))return ni.get(nn);var er={__proto__:null},yr=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Er in nn)if(Er!=="default"&&Object.prototype.hasOwnProperty.call(nn,Er)){var ys=yr?Object.getOwnPropertyDescriptor(nn,Er):null;ys&&(ys.get||ys.set)?Object.defineProperty(er,Er,ys):er[Er]=nn[Er]}return er.default=nn,ni&&ni.set(nn,er),er}var be;function ot(nn){if(nn){var An;return(An=be)!=null||(be=new se.default.constructor({enabled:!0,level:1})),be}return se.default}var _t=!1;function Rt(nn){return{gutter:nn.grey,marker:nn.red.bold,message:nn.red.bold}}var an=/\r\n|[\n\r\u2028\u2029]/;function Gt(nn,An,ni){let er=Object.assign({column:0,line:-1},nn.start),yr=Object.assign({},er,nn.end),{linesAbove:Er=2,linesBelow:ys=3}=ni||{},Ns=er.line,ao=er.column,Bo=yr.line,to=yr.column,Ja=Math.max(Ns-(Er+1),0),dl=Math.min(An.length,Bo+ys);Ns===-1&&(Ja=0),Bo===-1&&(dl=An.length);let Al=Bo-Ns,Fo={};if(Al)for(let ga=0;ga<=Al;ga++){let Fa=ga+Ns;if(!ao)Fo[Fa]=!0;else if(ga===0){let xo=An[Fa-1].length;Fo[Fa]=[ao,xo-ao+1]}else if(ga===Al)Fo[Fa]=[0,to];else{let xo=An[Fa-ga].length;Fo[Fa]=[0,xo]}}else ao===to?ao?Fo[Ns]=[ao,0]:Fo[Ns]=!0:Fo[Ns]=[ao,to-ao];return{start:Ja,end:dl,markerLines:Fo}}function Ln(nn,An,ni={}){let er=(ni.highlightCode||ni.forceColor)&&(0,H.shouldHighlight)(ni),yr=ot(ni.forceColor),Er=Rt(yr),ys=(Fo,ga)=>er?Fo(ga):ga,Ns=nn.split(an),{start:ao,end:Bo,markerLines:to}=Gt(An,Ns,ni),Ja=An.start&&typeof An.start.column=="number",dl=String(Bo).length,Al=(er?(0,H.default)(nn,ni):nn).split(an,Bo).slice(ao,Bo).map((Fo,ga)=>{let Fa=ao+1+ga,xo=` ${` ${Fa}`.slice(-dl)} |`,vl=to[Fa],cc=!to[Fa+1];if(vl){let su="";if(Array.isArray(vl)){let Tl=Fo.slice(0,Math.max(vl[0]-1,0)).replace(/[^\t]/g," "),ec=vl[1]||1;su=[`
 `,ys(Er.gutter,xo.replace(/\d/g," "))," ",Tl,ys(Er.marker,"^").repeat(ec)].join(""),cc&&ni.message&&(su+=" "+ys(Er.message,ni.message))}return[ys(Er.marker,">"),ys(Er.gutter,xo),Fo.length>0?` ${Fo}`:"",su].join("")}else return` ${ys(Er.gutter,xo)}${Fo.length>0?` ${Fo}`:""}`}).join(`
`);return ni.message&&!Ja&&(Al=`${" ".repeat(dl+1)}${ni.message}
${Al}`),er?yr.reset(Al):Al}function Dn(nn,An,ni,er={}){if(!_t){_t=!0;let yr="Passing lineNumber and colNumber is deprecated to @babel/code-frame. Please use `codeFrameColumns`.";{let Er=new Error(yr);Er.name="DeprecationWarning",console.warn(new Error(yr))}}return ni=Math.max(ni,0),Ln(nn,{start:{column:ni,line:An}},er)}}),uo={};Kt(uo,{__debug:()=>gc,check:()=>lc,doc:()=>iu,format:()=>hl,formatWithCursor:()=>ju,getSupportInfo:()=>Za,util:()=>Yr,version:()=>Ru});var cs=(O,H,se,ge)=>{if(!(O&&H==null))return H.replaceAll?H.replaceAll(se,ge):se.global?H.replace(se,ge):H.split(se).join(ge)},wr=cs,jr=vn(qt(),1);function vr(O){let H=O.indexOf("\r");return H>=0?O.charAt(H+1)===`
`?"crlf":"cr":"lf"}function qs(O){switch(O){case"cr":return"\r";case"crlf":return`\r
`;default:return`
`}}function Is(O,H){let se;switch(H){case`
`:se=/\n/g;break;case"\r":se=/\r/g;break;case`\r
`:se=/\r\n/g;break;default:throw new Error(`Unexpected "eol" ${JSON.stringify(H)}.`)}let ge=O.match(se);return ge?ge.length:0}function ci(O){return wr(!1,O,/\r\n?/g,`
`)}var le="string",$e="array",ze="cursor",ee="indent",Ze="align",Ie="trim",Xe="group",St="fill",Tt="if-break",Bn="indent-if-break",Fn="line-suffix",Qn="line-suffix-boundary",hi="line",Ki="label",Vn="break-parent",fs=new Set([ze,ee,Ze,Ie,Xe,St,Tt,Bn,Fn,Qn,hi,Ki,Vn]);function wo(O){if(typeof O=="string")return le;if(Array.isArray(O))return $e;if(!O)return;let{type:H}=O;if(fs.has(H))return H}var Ao=wo,en=O=>new Intl.ListFormat("en-US",{type:"disjunction"}).format(O);function fe(O){let H=O===null?"null":typeof O;if(H!=="string"&&H!=="object")return`Unexpected doc '${H}', 
Expected it to be 'string' or 'object'.`;if(Ao(O))throw new Error("doc is valid.");let se=Object.prototype.toString.call(O);if(se!=="[object Object]")return`Unexpected doc '${se}'.`;let ge=en([...fs].map(ue=>`'${ue}'`));return`Unexpected doc.type '${O.type}'.
Expected it to be ${ge}.`}var Fe=class extends Error{constructor(H){super(fe(H));$n(this,"name","InvalidDocError");this.doc=H}},Ye=Fe,Ve={};function Ge(O,H,se,ge){let ue=[O];for(;ue.length>0;){let be=ue.pop();if(be===Ve){se(ue.pop());continue}se&&ue.push(be,Ve);let ot=Ao(be);if(!ot)throw new Ye(be);if((H==null?void 0:H(be))!==!1)switch(ot){case $e:case St:{let _t=ot===$e?be:be.parts;for(let Rt=_t.length,an=Rt-1;an>=0;--an)ue.push(_t[an]);break}case Tt:ue.push(be.flatContents,be.breakContents);break;case Xe:if(ge&&be.expandedStates)for(let _t=be.expandedStates.length,Rt=_t-1;Rt>=0;--Rt)ue.push(be.expandedStates[Rt]);else ue.push(be.contents);break;case Ze:case ee:case Bn:case Ki:case Fn:ue.push(be.contents);break;case le:case ze:case Ie:case Qn:case hi:case Vn:break;default:throw new Ye(be)}}}var Ut=Ge,sn=()=>{},_n=sn,Hi=sn;function Wn(O){return _n(O),{type:ee,contents:O}}function xi(O,H){return _n(H),{type:Ze,contents:H,n:O}}function ar(O,H={}){return _n(O),Hi(H.expandedStates,!0),{type:Xe,id:H.id,contents:O,break:!!H.shouldBreak,expandedStates:H.expandedStates}}function di(O){return xi(Number.NEGATIVE_INFINITY,O)}function Ui(O){return xi({type:"root"},O)}function hr(O){return xi(-1,O)}function bi(O,H){return ar(O[0],qi(Jt({},H),{expandedStates:O}))}function Gr(O){return Hi(O),{type:St,parts:O}}function Zi(O,H="",se={}){return _n(O),H!==""&&_n(H),{type:Tt,breakContents:O,flatContents:H,groupId:se.groupId}}function xr(O,H){return _n(O),{type:Bn,contents:O,groupId:H.groupId,negate:H.negate}}function ms(O){return _n(O),{type:Fn,contents:O}}var Ni={type:Qn},qr={type:Vn},Di={type:Ie},Sr={type:hi,hard:!0},Qi={type:hi,hard:!0,literal:!0},_i={type:hi},gr={type:hi,soft:!0},Zn=[Sr,qr],tr=[Qi,qr],bn={type:ze};function Wr(O,H){_n(O),Hi(H);let se=[];for(let ge=0;ge<H.length;ge++)ge!==0&&se.push(O),se.push(H[ge]);return se}function Js(O,H,se){_n(O);let ge=O;if(H>0){for(let ue=0;ue<Math.floor(H/se);++ue)ge=Wn(ge);ge=xi(H%se,ge),ge=xi(Number.NEGATIVE_INFINITY,ge)}return ge}function Hr(O,H){return _n(H),O?{type:Ki,label:O,contents:H}:H}function Lr(O){var H;if(!O)return"";if(Array.isArray(O)){let se=[];for(let ge of O)if(Array.isArray(ge))se.push(...Lr(ge));else{let ue=Lr(ge);ue!==""&&se.push(ue)}return se}return O.type===Tt?qi(Jt({},O),{breakContents:Lr(O.breakContents),flatContents:Lr(O.flatContents)}):O.type===Xe?qi(Jt({},O),{contents:Lr(O.contents),expandedStates:(H=O.expandedStates)==null?void 0:H.map(Lr)}):O.type===St?{type:"fill",parts:O.parts.map(Lr)}:O.contents?qi(Jt({},O),{contents:Lr(O.contents)}):O}function Pi(O){let H=Object.create(null),se=new Set;return ge(Lr(O));function ge(be,ot,_t){var Rt,an;if(typeof be=="string")return JSON.stringify(be);if(Array.isArray(be)){let Gt=be.map(ge).filter(Boolean);return Gt.length===1?Gt[0]:`[${Gt.join(", ")}]`}if(be.type===hi){let Gt=((Rt=_t==null?void 0:_t[ot+1])==null?void 0:Rt.type)===Vn;return be.literal?Gt?"literalline":"literallineWithoutBreakParent":be.hard?Gt?"hardline":"hardlineWithoutBreakParent":be.soft?"softline":"line"}if(be.type===Vn)return((an=_t==null?void 0:_t[ot-1])==null?void 0:an.type)===hi&&_t[ot-1].hard?void 0:"breakParent";if(be.type===Ie)return"trim";if(be.type===ee)return"indent("+ge(be.contents)+")";if(be.type===Ze)return be.n===Number.NEGATIVE_INFINITY?"dedentToRoot("+ge(be.contents)+")":be.n<0?"dedent("+ge(be.contents)+")":be.n.type==="root"?"markAsRoot("+ge(be.contents)+")":"align("+JSON.stringify(be.n)+", "+ge(be.contents)+")";if(be.type===Tt)return"ifBreak("+ge(be.breakContents)+(be.flatContents?", "+ge(be.flatContents):"")+(be.groupId?(be.flatContents?"":', ""')+`, { groupId: ${ue(be.groupId)} }`:"")+")";if(be.type===Bn){let Gt=[];be.negate&&Gt.push("negate: true"),be.groupId&&Gt.push(`groupId: ${ue(be.groupId)}`);let Ln=Gt.length>0?`, { ${Gt.join(", ")} }`:"";return`indentIfBreak(${ge(be.contents)}${Ln})`}if(be.type===Xe){let Gt=[];be.break&&be.break!=="propagated"&&Gt.push("shouldBreak: true"),be.id&&Gt.push(`id: ${ue(be.id)}`);let Ln=Gt.length>0?`, { ${Gt.join(", ")} }`:"";return be.expandedStates?`conditionalGroup([${be.expandedStates.map(Dn=>ge(Dn)).join(",")}]${Ln})`:`group(${ge(be.contents)}${Ln})`}if(be.type===St)return`fill([${be.parts.map(Gt=>ge(Gt)).join(", ")}])`;if(be.type===Fn)return"lineSuffix("+ge(be.contents)+")";if(be.type===Qn)return"lineSuffixBoundary";if(be.type===Ki)return`label(${JSON.stringify(be.label)}, ${ge(be.contents)})`;throw new Error("Unknown doc type "+be.type)}function ue(be){if(typeof be!="symbol")return JSON.stringify(String(be));if(be in H)return H[be];let ot=be.description||"symbol";for(let _t=0;;_t++){let Rt=ot+(_t>0?` #${_t}`:"");if(!se.has(Rt))return se.add(Rt),H[be]=`Symbol.for(${JSON.stringify(Rt)})`}}}var Qs=(O,H,se)=>{if(!(O&&H==null))return Array.isArray(H)||typeof H=="string"?H[se<0?H.length+se:se]:H.at(se)},Pn=Qs,Xs=()=>/[#*0-9]\uFE0F?\u20E3|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26AA\u26B0\u26B1\u26BD\u26BE\u26C4\u26C8\u26CF\u26D1\u26E9\u26F0-\u26F5\u26F7\u26F8\u26FA\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B55\u3030\u303D\u3297\u3299]\uFE0F?|[\u261D\u270C\u270D](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\u270A\u270B](?:\uD83C[\uDFFB-\uDFFF])?|[\u23E9-\u23EC\u23F0\u23F3\u25FD\u2693\u26A1\u26AB\u26C5\u26CE\u26D4\u26EA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2795-\u2797\u27B0\u27BF\u2B50]|\u26D3\uFE0F?(?:\u200D\uD83D\uDCA5)?|\u26F9(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\u2764\uFE0F?(?:\u200D(?:\uD83D\uDD25|\uD83E\uDE79))?|\uD83C(?:[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]\uFE0F?|[\uDF85\uDFC2\uDFC7](?:\uD83C[\uDFFB-\uDFFF])?|[\uDFC4\uDFCA](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDFCB\uDFCC](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF43\uDF45-\uDF4A\uDF4C-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uDDE6\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF]|\uDDE7\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF]|\uDDE8\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF]|\uDDE9\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF]|\uDDEA\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA]|\uDDEB\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7]|\uDDEC\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE]|\uDDED\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA]|\uDDEE\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9]|\uDDEF\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5]|\uDDF0\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF]|\uDDF1\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE]|\uDDF2\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF]|\uDDF3\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF]|\uDDF4\uD83C\uDDF2|\uDDF5\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE]|\uDDF6\uD83C\uDDE6|\uDDF7\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC]|\uDDF8\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF]|\uDDF9\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF]|\uDDFA\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF]|\uDDFB\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA]|\uDDFC\uD83C[\uDDEB\uDDF8]|\uDDFD\uD83C\uDDF0|\uDDFE\uD83C[\uDDEA\uDDF9]|\uDDFF\uD83C[\uDDE6\uDDF2\uDDFC]|\uDF44(?:\u200D\uD83D\uDFEB)?|\uDF4B(?:\u200D\uD83D\uDFE9)?|\uDFC3(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?|\uDFF3\uFE0F?(?:\u200D(?:\u26A7\uFE0F?|\uD83C\uDF08))?|\uDFF4(?:\u200D\u2620\uFE0F?|\uDB40\uDC67\uDB40\uDC62\uDB40(?:\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDC73\uDB40\uDC63\uDB40\uDC74|\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F)?)|\uD83D(?:[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3]\uFE0F?|[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC](?:\uD83C[\uDFFB-\uDFFF])?|[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4\uDEB5](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD74\uDD90](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC25\uDC27-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE41\uDE43\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEDC-\uDEDF\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uDC08(?:\u200D\u2B1B)?|\uDC15(?:\u200D\uD83E\uDDBA)?|\uDC26(?:\u200D(?:\u2B1B|\uD83D\uDD25))?|\uDC3B(?:\u200D\u2744\uFE0F?)?|\uDC41\uFE0F?(?:\u200D\uD83D\uDDE8\uFE0F?)?|\uDC68(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDC68\uDC69]\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFE])))?))?|\uDC69(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?[\uDC68\uDC69]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?|\uDC69\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?))|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFE])))?))?|\uDC6F(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDD75(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDE2E(?:\u200D\uD83D\uDCA8)?|\uDE35(?:\u200D\uD83D\uDCAB)?|\uDE36(?:\u200D\uD83C\uDF2B\uFE0F?)?|\uDE42(?:\u200D[\u2194\u2195]\uFE0F?)?|\uDEB6(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?)|\uD83E(?:[\uDD0C\uDD0F\uDD18-\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5\uDEC3-\uDEC5\uDEF0\uDEF2-\uDEF8](?:\uD83C[\uDFFB-\uDFFF])?|[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD\uDDCF\uDDD4\uDDD6-\uDDDD](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDDDE\uDDDF](?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD0D\uDD0E\uDD10-\uDD17\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCC\uDDD0\uDDE0-\uDDFF\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC2\uDECE-\uDEDB\uDEE0-\uDEE8]|\uDD3C(?:\u200D[\u2640\u2642]\uFE0F?|\uD83C[\uDFFB-\uDFFF])?|\uDDCE(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?|\uDDD1(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1|\uDDD1\u200D\uD83E\uDDD2(?:\u200D\uD83E\uDDD2)?|\uDDD2(?:\u200D\uD83E\uDDD2)?))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFC-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFD-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFD\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFE]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?))?|\uDEF1(?:\uD83C(?:\uDFFB(?:\u200D\uD83E\uDEF2\uD83C[\uDFFC-\uDFFF])?|\uDFFC(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFD-\uDFFF])?|\uDFFD(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])?|\uDFFE(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFD\uDFFF])?|\uDFFF(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFE])?))?)/g;function Ts(O){return O===12288||O>=65281&&O<=65376||O>=65504&&O<=65510}function Kr(O){return O>=4352&&O<=4447||O===8986||O===8987||O===9001||O===9002||O>=9193&&O<=9196||O===9200||O===9203||O===9725||O===9726||O===9748||O===9749||O>=9800&&O<=9811||O===9855||O===9875||O===9889||O===9898||O===9899||O===9917||O===9918||O===9924||O===9925||O===9934||O===9940||O===9962||O===9970||O===9971||O===9973||O===9978||O===9981||O===9989||O===9994||O===9995||O===10024||O===10060||O===10062||O>=10067&&O<=10069||O===10071||O>=10133&&O<=10135||O===10160||O===10175||O===11035||O===11036||O===11088||O===11093||O>=11904&&O<=11929||O>=11931&&O<=12019||O>=12032&&O<=12245||O>=12272&&O<=12287||O>=12289&&O<=12350||O>=12353&&O<=12438||O>=12441&&O<=12543||O>=12549&&O<=12591||O>=12593&&O<=12686||O>=12688&&O<=12771||O>=12783&&O<=12830||O>=12832&&O<=12871||O>=12880&&O<=19903||O>=19968&&O<=42124||O>=42128&&O<=42182||O>=43360&&O<=43388||O>=44032&&O<=55203||O>=63744&&O<=64255||O>=65040&&O<=65049||O>=65072&&O<=65106||O>=65108&&O<=65126||O>=65128&&O<=65131||O>=94176&&O<=94180||O===94192||O===94193||O>=94208&&O<=100343||O>=100352&&O<=101589||O>=101632&&O<=101640||O>=110576&&O<=110579||O>=110581&&O<=110587||O===110589||O===110590||O>=110592&&O<=110882||O===110898||O>=110928&&O<=110930||O===110933||O>=110948&&O<=110951||O>=110960&&O<=111355||O===126980||O===127183||O===127374||O>=127377&&O<=127386||O>=127488&&O<=127490||O>=127504&&O<=127547||O>=127552&&O<=127560||O===127568||O===127569||O>=127584&&O<=127589||O>=127744&&O<=127776||O>=127789&&O<=127797||O>=127799&&O<=127868||O>=127870&&O<=127891||O>=127904&&O<=127946||O>=127951&&O<=127955||O>=127968&&O<=127984||O===127988||O>=127992&&O<=128062||O===128064||O>=128066&&O<=128252||O>=128255&&O<=128317||O>=128331&&O<=128334||O>=128336&&O<=128359||O===128378||O===128405||O===128406||O===128420||O>=128507&&O<=128591||O>=128640&&O<=128709||O===128716||O>=128720&&O<=128722||O>=128725&&O<=128727||O>=128732&&O<=128735||O===128747||O===128748||O>=128756&&O<=128764||O>=128992&&O<=129003||O===129008||O>=129292&&O<=129338||O>=129340&&O<=129349||O>=129351&&O<=129535||O>=129648&&O<=129660||O>=129664&&O<=129672||O>=129680&&O<=129725||O>=129727&&O<=129733||O>=129742&&O<=129755||O>=129760&&O<=129768||O>=129776&&O<=129784||O>=131072&&O<=196605||O>=196608&&O<=262141}var hs=O=>!(Ts(O)||Kr(O)),os=/[^\x20-\x7F]/;function js(O){if(!O)return 0;if(!os.test(O))return O.length;O=O.replace(Xs(),"  ");let H=0;for(let se of O){let ge=se.codePointAt(0);ge<=31||ge>=127&&ge<=159||ge>=768&&ge<=879||(H+=hs(ge)?1:2)}return H}var dr=js,Qr=O=>{if(Array.isArray(O))return O;if(O.type!==St)throw new Error(`Expect doc to be 'array' or '${St}'.`);return O.parts};function gs(O,H){if(typeof O=="string")return H(O);let se=new Map;return ge(O);function ge(be){if(se.has(be))return se.get(be);let ot=ue(be);return se.set(be,ot),ot}function ue(be){switch(Ao(be)){case $e:return H(be.map(ge));case St:return H(qi(Jt({},be),{parts:be.parts.map(ge)}));case Tt:return H(qi(Jt({},be),{breakContents:ge(be.breakContents),flatContents:ge(be.flatContents)}));case Xe:{let{expandedStates:ot,contents:_t}=be;return ot?(ot=ot.map(ge),_t=ot[0]):_t=ge(_t),H(qi(Jt({},be),{contents:_t,expandedStates:ot}))}case Ze:case ee:case Bn:case Ki:case Fn:return H(qi(Jt({},be),{contents:ge(be.contents)}));case le:case ze:case Ie:case Qn:case hi:case Vn:return H(be);default:throw new Ye(be)}}}function ei(O,H,se){let ge=se,ue=!1;function be(ot){if(ue)return!1;let _t=H(ot);_t!==void 0&&(ue=!0,ge=_t)}return Ut(O,be),ge}function Rs(O){if(O.type===Xe&&O.break||O.type===hi&&O.hard||O.type===Vn)return!0}function co(O){return ei(O,Rs,!1)}function oa(O){if(O.length>0){let H=Pn(!1,O,-1);!H.expandedStates&&!H.break&&(H.break="propagated")}return null}function na(O){let H=new Set,se=[];function ge(be){if(be.type===Vn&&oa(se),be.type===Xe){if(se.push(be),H.has(be))return!1;H.add(be)}}function ue(be){be.type===Xe&&se.pop().break&&oa(se)}Ut(O,ge,ue,!0)}function re(O){return O.type===hi&&!O.hard?O.soft?"":" ":O.type===Tt?O.flatContents:O}function P(O){return gs(O,re)}function V(O){for(O=[...O];O.length>=2&&Pn(!1,O,-2).type===hi&&Pn(!1,O,-1).type===Vn;)O.length-=2;if(O.length>0){let H=Y(Pn(!1,O,-1));O[O.length-1]=H}return O}function Y(O){switch(Ao(O)){case Ze:case ee:case Bn:case Xe:case Fn:case Ki:{let H=Y(O.contents);return qi(Jt({},O),{contents:H})}case Tt:return qi(Jt({},O),{breakContents:Y(O.breakContents),flatContents:Y(O.flatContents)});case St:return qi(Jt({},O),{parts:V(O.parts)});case $e:return V(O);case le:return O.replace(/[\n\r]*$/,"");case ze:case Ie:case Qn:case hi:case Vn:break;default:throw new Ye(O)}return O}function te(O){return Y(Ce(O))}function we(O){switch(Ao(O)){case St:if(O.parts.every(H=>H===""))return"";break;case Xe:if(!O.contents&&!O.id&&!O.break&&!O.expandedStates)return"";if(O.contents.type===Xe&&O.contents.id===O.id&&O.contents.break===O.break&&O.contents.expandedStates===O.expandedStates)return O.contents;break;case Ze:case ee:case Bn:case Fn:if(!O.contents)return"";break;case Tt:if(!O.flatContents&&!O.breakContents)return"";break;case $e:{let H=[];for(let se of O){if(!se)continue;let[ge,...ue]=Array.isArray(se)?se:[se];typeof ge=="string"&&typeof Pn(!1,H,-1)=="string"?H[H.length-1]+=ge:H.push(ge),H.push(...ue)}return H.length===0?"":H.length===1?H[0]:H}case le:case ze:case Ie:case Qn:case hi:case Ki:case Vn:break;default:throw new Ye(O)}return O}function Ce(O){return gs(O,H=>we(H))}function We(O,H=tr){return gs(O,se=>typeof se=="string"?Wr(H,se.split(`
`)):se)}function Dt(O){if(O.type===hi)return!0}function jt(O){return ei(O,Dt,!1)}function xn(O,H){return O.type===Ki?qi(Jt({},O),{contents:H(O.contents)}):H(O)}var Tn=Symbol("MODE_BREAK"),mi=Symbol("MODE_FLAT"),vi=Symbol("cursor");function ws(){return{value:"",length:0,queue:[]}}function ho(O,H){return Fi(O,{type:"indent"},H)}function pr(O,H,se){return H===Number.NEGATIVE_INFINITY?O.root||ws():H<0?Fi(O,{type:"dedent"},se):H?H.type==="root"?qi(Jt({},O),{root:O}):Fi(O,{type:typeof H=="string"?"stringAlign":"numberAlign",n:H},se):O}function Fi(O,H,se){let ge=H.type==="dedent"?O.queue.slice(0,-1):[...O.queue,H],ue="",be=0,ot=0,_t=0;for(let An of ge)switch(An.type){case"indent":Gt(),se.useTabs?Rt(1):an(se.tabWidth);break;case"stringAlign":Gt(),ue+=An.n,be+=An.n.length;break;case"numberAlign":ot+=1,_t+=An.n;break;default:throw new Error(`Unexpected type '${An.type}'`)}return Dn(),qi(Jt({},O),{value:ue,length:be,queue:ge});function Rt(An){ue+="	".repeat(An),be+=se.tabWidth*An}function an(An){ue+=" ".repeat(An),be+=An}function Gt(){se.useTabs?Ln():Dn()}function Ln(){ot>0&&Rt(ot),nn()}function Dn(){_t>0&&an(_t),nn()}function nn(){ot=0,_t=0}}function rt(O){let H=0,se=0,ge=O.length;e:for(;ge--;){let ue=O[ge];if(ue===vi){se++;continue}for(let be=ue.length-1;be>=0;be--){let ot=ue[be];if(ot===" "||ot==="	")H++;else{O[ge]=ue.slice(0,be+1);break e}}}if(H>0||se>0)for(O.length=ge+1;se-- >0;)O.push(vi);return H}function so(O,H,se,ge,ue,be){if(se===Number.POSITIVE_INFINITY)return!0;let ot=H.length,_t=[O],Rt=[];for(;se>=0;){if(_t.length===0){if(ot===0)return!0;_t.push(H[--ot]);continue}let{mode:an,doc:Gt}=_t.pop();switch(Ao(Gt)){case le:Rt.push(Gt),se-=dr(Gt);break;case $e:case St:{let Ln=Qr(Gt);for(let Dn=Ln.length-1;Dn>=0;Dn--)_t.push({mode:an,doc:Ln[Dn]});break}case ee:case Ze:case Bn:case Ki:_t.push({mode:an,doc:Gt.contents});break;case Ie:se+=rt(Rt);break;case Xe:{if(be&&Gt.break)return!1;let Ln=Gt.break?Tn:an,Dn=Gt.expandedStates&&Ln===Tn?Pn(!1,Gt.expandedStates,-1):Gt.contents;_t.push({mode:Ln,doc:Dn});break}case Tt:{let Ln=(Gt.groupId?ue[Gt.groupId]||mi:an)===Tn?Gt.breakContents:Gt.flatContents;Ln&&_t.push({mode:an,doc:Ln});break}case hi:if(an===Tn||Gt.hard)return!0;Gt.soft||(Rt.push(" "),se--);break;case Fn:ge=!0;break;case Qn:if(ge)return!1;break}}return!1}function To(O,H){let se={},ge=H.printWidth,ue=qs(H.endOfLine),be=0,ot=[{ind:ws(),mode:Tn,doc:O}],_t=[],Rt=!1,an=[],Gt=0;for(na(O);ot.length>0;){let{ind:Dn,mode:nn,doc:An}=ot.pop();switch(Ao(An)){case le:{let ni=ue!==`
`?wr(!1,An,`
`,ue):An;_t.push(ni),ot.length>0&&(be+=dr(ni));break}case $e:for(let ni=An.length-1;ni>=0;ni--)ot.push({ind:Dn,mode:nn,doc:An[ni]});break;case ze:if(Gt>=2)throw new Error("There are too many 'cursor' in doc.");_t.push(vi),Gt++;break;case ee:ot.push({ind:ho(Dn,H),mode:nn,doc:An.contents});break;case Ze:ot.push({ind:pr(Dn,An.n,H),mode:nn,doc:An.contents});break;case Ie:be-=rt(_t);break;case Xe:switch(nn){case mi:if(!Rt){ot.push({ind:Dn,mode:An.break?Tn:mi,doc:An.contents});break}case Tn:{Rt=!1;let ni={ind:Dn,mode:mi,doc:An.contents},er=ge-be,yr=an.length>0;if(!An.break&&so(ni,ot,er,yr,se))ot.push(ni);else if(An.expandedStates){let Er=Pn(!1,An.expandedStates,-1);if(An.break){ot.push({ind:Dn,mode:Tn,doc:Er});break}else for(let ys=1;ys<An.expandedStates.length+1;ys++)if(ys>=An.expandedStates.length){ot.push({ind:Dn,mode:Tn,doc:Er});break}else{let Ns=An.expandedStates[ys],ao={ind:Dn,mode:mi,doc:Ns};if(so(ao,ot,er,yr,se)){ot.push(ao);break}}}else ot.push({ind:Dn,mode:Tn,doc:An.contents});break}}An.id&&(se[An.id]=Pn(!1,ot,-1).mode);break;case St:{let ni=ge-be,{parts:er}=An;if(er.length===0)break;let[yr,Er]=er,ys={ind:Dn,mode:mi,doc:yr},Ns={ind:Dn,mode:Tn,doc:yr},ao=so(ys,[],ni,an.length>0,se,!0);if(er.length===1){ao?ot.push(ys):ot.push(Ns);break}let Bo={ind:Dn,mode:mi,doc:Er},to={ind:Dn,mode:Tn,doc:Er};if(er.length===2){ao?ot.push(Bo,ys):ot.push(to,Ns);break}er.splice(0,2);let Ja={ind:Dn,mode:nn,doc:Gr(er)},dl=er[0];so({ind:Dn,mode:mi,doc:[yr,Er,dl]},[],ni,an.length>0,se,!0)?ot.push(Ja,Bo,ys):ao?ot.push(Ja,to,ys):ot.push(Ja,to,Ns);break}case Tt:case Bn:{let ni=An.groupId?se[An.groupId]:nn;if(ni===Tn){let er=An.type===Tt?An.breakContents:An.negate?An.contents:Wn(An.contents);er&&ot.push({ind:Dn,mode:nn,doc:er})}if(ni===mi){let er=An.type===Tt?An.flatContents:An.negate?Wn(An.contents):An.contents;er&&ot.push({ind:Dn,mode:nn,doc:er})}break}case Fn:an.push({ind:Dn,mode:nn,doc:An.contents});break;case Qn:an.length>0&&ot.push({ind:Dn,mode:nn,doc:Sr});break;case hi:switch(nn){case mi:if(An.hard)Rt=!0;else{An.soft||(_t.push(" "),be+=1);break}case Tn:if(an.length>0){ot.push({ind:Dn,mode:nn,doc:An},...an.reverse()),an.length=0;break}An.literal?Dn.root?(_t.push(ue,Dn.root.value),be=Dn.root.length):(_t.push(ue),be=0):(be-=rt(_t),_t.push(ue+Dn.value),be=Dn.length);break}break;case Ki:ot.push({ind:Dn,mode:nn,doc:An.contents});break;case Vn:break;default:throw new Ye(An)}ot.length===0&&an.length>0&&(ot.push(...an.reverse()),an.length=0)}let Ln=_t.indexOf(vi);if(Ln!==-1){let Dn=_t.indexOf(vi,Ln+1),nn=_t.slice(0,Ln).join(""),An=_t.slice(Ln+1,Dn).join(""),ni=_t.slice(Dn+1).join("");return{formatted:nn+An+ni,cursorNodeStart:nn.length,cursorNodeText:An}}return{formatted:_t.join("")}}function Os(O,H,se=0){let ge=0;for(let ue=se;ue<O.length;++ue)O[ue]==="	"?ge=ge+H-ge%H:ge++;return ge}var ds=Os,Oo,nr,wi,Mn,ks=class{constructor(O){Ii(this,Oo),Ii(this,wi),this.stack=[O]}get key(){var se;let{stack:O,siblings:H}=this;return(se=Pn(!1,O,H===null?-2:-4))!=null?se:null}get index(){return this.siblings===null?null:Pn(!1,this.stack,-2)}get node(){return Pn(!1,this.stack,-1)}get parent(){return this.getNode(1)}get grandparent(){return this.getNode(2)}get isInArray(){return this.siblings!==null}get siblings(){let{stack:O}=this,H=Pn(!1,O,-3);return Array.isArray(H)?H:null}get next(){let{siblings:O}=this;return O===null?null:O[this.index+1]}get previous(){let{siblings:O}=this;return O===null?null:O[this.index-1]}get isFirst(){return this.index===0}get isLast(){let{siblings:O,index:H}=this;return O!==null&&H===O.length-1}get isRoot(){return this.stack.length===1}get root(){return this.stack[0]}get ancestors(){return[...Un(this,wi,Mn).call(this)]}getName(){let{stack:O}=this,{length:H}=O;return H>1?Pn(!1,O,-2):null}getValue(){return Pn(!1,this.stack,-1)}getNode(O=0){let H=Un(this,Oo,nr).call(this,O);return H===-1?null:this.stack[H]}getParentNode(O=0){return this.getNode(O+1)}call(O,...H){let{stack:se}=this,{length:ge}=se,ue=Pn(!1,se,-1);for(let be of H)ue=ue[be],se.push(be,ue);try{return O(this)}finally{se.length=ge}}callParent(O,H=0){let se=Un(this,Oo,nr).call(this,H+1),ge=this.stack.splice(se+1);try{return O(this)}finally{this.stack.push(...ge)}}each(O,...H){let{stack:se}=this,{length:ge}=se,ue=Pn(!1,se,-1);for(let be of H)ue=ue[be],se.push(be,ue);try{for(let be=0;be<ue.length;++be)se.push(be,ue[be]),O(this,be,ue),se.length-=2}finally{se.length=ge}}map(O,...H){let se=[];return this.each((ge,ue,be)=>{se[ue]=O(ge,ue,be)},...H),se}match(...O){let H=this.stack.length-1,se=null,ge=this.stack[H--];for(let ue of O){if(ge===void 0)return!1;let be=null;if(typeof se=="number"&&(be=se,se=this.stack[H--],ge=this.stack[H--]),ue&&!ue(ge,se,be))return!1;se=this.stack[H--],ge=this.stack[H--]}return!0}findAncestor(O){for(let H of Un(this,wi,Mn).call(this))if(O(H))return H}hasAncestor(O){for(let H of Un(this,wi,Mn).call(this))if(O(H))return!0;return!1}};Oo=new WeakSet,nr=function(O){let{stack:H}=this;for(let se=H.length-1;se>=0;se-=2)if(!Array.isArray(H[se])&&--O<0)return se;return-1},wi=new WeakSet,Mn=function*(){let{stack:O}=this;for(let H=O.length-3;H>=0;H-=2){let se=O[H];Array.isArray(se)||(yield se)}};var jo=ks,Zr=new Proxy(()=>{},{get:()=>Zr}),aa=Zr;function ka(O){return O!==null&&typeof O=="object"}var fa=ka;function*ps(O,H){let{getVisitorKeys:se,filter:ge=()=>!0}=H,ue=be=>fa(be)&&ge(be);for(let be of se(O)){let ot=O[be];if(Array.isArray(ot))for(let _t of ot)ue(_t)&&(yield _t);else ue(ot)&&(yield ot)}}function*no(O,H){let se=[O];for(let ge=0;ge<se.length;ge++){let ue=se[ge];for(let be of ps(ue,H))yield be,se.push(be)}}function Eo(O){return(H,se,ge)=>{let ue=!!(ge!=null&&ge.backwards);if(se===!1)return!1;let{length:be}=H,ot=se;for(;ot>=0&&ot<be;){let _t=H.charAt(ot);if(O instanceof RegExp){if(!O.test(_t))return ot}else if(!O.includes(_t))return ot;ue?ot--:ot++}return ot===-1||ot===be?ot:!1}}var go=Eo(/\s/),Xo=Eo(" 	"),Ae=Eo(",; 	"),Z=Eo(/[^\n\r]/);function pe(O,H,se){let ge=!!(se!=null&&se.backwards);if(H===!1)return!1;let ue=O.charAt(H);if(ge){if(O.charAt(H-1)==="\r"&&ue===`
`)return H-2;if(ue===`
`||ue==="\r"||ue==="\u2028"||ue==="\u2029")return H-1}else{if(ue==="\r"&&O.charAt(H+1)===`
`)return H+2;if(ue===`
`||ue==="\r"||ue==="\u2028"||ue==="\u2029")return H+1}return H}var Ne=pe;function Be(O,H,se={}){let ge=Xo(O,se.backwards?H-1:H,se),ue=Ne(O,ge,se);return ge!==ue}var ut=Be;function Ft(O){return Array.isArray(O)&&O.length>0}var Xt=Ft,mn=new Set(["tokens","comments","parent","enclosingNode","precedingNode","followingNode"]),ri=O=>Object.keys(O).filter(H=>!mn.has(H));function rr(O){return O?H=>O(H,mn):ri}var Xi=rr;function Vo(O){let H=O.type||O.kind||"(unknown type)",se=String(O.name||O.id&&(typeof O.id=="object"?O.id.name:O.id)||O.key&&(typeof O.key=="object"?O.key.name:O.key)||O.value&&(typeof O.value=="object"?"":String(O.value))||O.operator||"");return se.length>20&&(se=se.slice(0,19)+"\u2026"),H+(se?" "+se:"")}function yo(O,H){var se;((se=O.comments)!=null?se:O.comments=[]).push(H),H.printed=!1,H.nodeDescription=Vo(O)}function Vs(O,H){H.leading=!0,H.trailing=!1,yo(O,H)}function ko(O,H,se){H.leading=!1,H.trailing=!1,se&&(H.marker=se),yo(O,H)}function Uo(O,H){H.leading=!1,H.trailing=!0,yo(O,H)}var la=new WeakMap;function Ys(O,H){var Rt;if(la.has(O))return la.get(O);let{printer:{getCommentChildNodes:se,canAttachComment:ge,getVisitorKeys:ue},locStart:be,locEnd:ot}=H;if(!ge)return[];let _t=((Rt=se==null?void 0:se(O,H))!=null?Rt:[...ps(O,{getVisitorKeys:Xi(ue)})]).flatMap(an=>ge(an)?[an]:Ys(an,H));return _t.sort((an,Gt)=>be(an)-be(Gt)||ot(an)-ot(Gt)),la.set(O,_t),_t}function Ai(O,H,se,ge){let{locStart:ue,locEnd:be}=se,ot=ue(H),_t=be(H),Rt=Ys(O,se),an,Gt,Ln=0,Dn=Rt.length;for(;Ln<Dn;){let nn=Ln+Dn>>1,An=Rt[nn],ni=ue(An),er=be(An);if(ni<=ot&&_t<=er)return Ai(An,H,se,An);if(er<=ot){an=An,Ln=nn+1;continue}if(_t<=ni){Gt=An,Dn=nn;continue}throw new Error("Comment location overlaps with node location")}if((ge==null?void 0:ge.type)==="TemplateLiteral"){let{quasis:nn}=ge,An=Ro(nn,H,se);an&&Ro(nn,an,se)!==An&&(an=null),Gt&&Ro(nn,Gt,se)!==An&&(Gt=null)}return{enclosingNode:ge,precedingNode:an,followingNode:Gt}}var ll=()=>!1;function si(O,H){let{comments:se}=O;if(delete O.comments,!Xt(se)||!H.printer.canAttachComment)return;let ge=[],{locStart:ue,locEnd:be,printer:{experimentalFeatures:{avoidAstMutation:ot=!1}={},handleComments:_t={}},originalText:Rt}=H,{ownLine:an=ll,endOfLine:Gt=ll,remaining:Ln=ll}=_t,Dn=se.map((nn,An)=>qi(Jt({},Ai(O,nn,H)),{comment:nn,text:Rt,options:H,ast:O,isLastComment:se.length-1===An}));for(let[nn,An]of Dn.entries()){let{comment:ni,precedingNode:er,enclosingNode:yr,followingNode:Er,text:ys,options:Ns,ast:ao,isLastComment:Bo}=An;if(Ns.parser==="json"||Ns.parser==="json5"||Ns.parser==="jsonc"||Ns.parser==="__js_expression"||Ns.parser==="__ts_expression"||Ns.parser==="__vue_expression"||Ns.parser==="__vue_ts_expression"){if(ue(ni)-ue(ao)<=0){Vs(ao,ni);continue}if(be(ni)-be(ao)>=0){Uo(ao,ni);continue}}let to;if(ot?to=[An]:(ni.enclosingNode=yr,ni.precedingNode=er,ni.followingNode=Er,to=[ni,ys,Ns,ao,Bo]),ma(ys,Ns,Dn,nn))ni.placement="ownLine",an(...to)||(Er?Vs(Er,ni):er?Uo(er,ni):ko(yr||ao,ni));else if(ul(ys,Ns,Dn,nn))ni.placement="endOfLine",Gt(...to)||(er?Uo(er,ni):Er?Vs(Er,ni):ko(yr||ao,ni));else if(ni.placement="remaining",!Ln(...to))if(er&&Er){let Ja=ge.length;Ja>0&&ge[Ja-1].followingNode!==Er&&ia(ge,Ns),ge.push(An)}else er?Uo(er,ni):Er?Vs(Er,ni):ko(yr||ao,ni)}if(ia(ge,H),!ot)for(let nn of se)delete nn.precedingNode,delete nn.enclosingNode,delete nn.followingNode}var Zo=O=>!/[\S\n\u2028\u2029]/.test(O);function ma(O,H,se,ge){let{comment:ue,precedingNode:be}=se[ge],{locStart:ot,locEnd:_t}=H,Rt=ot(ue);if(be)for(let an=ge-1;an>=0;an--){let{comment:Gt,precedingNode:Ln}=se[an];if(Ln!==be||!Zo(O.slice(_t(Gt),Rt)))break;Rt=ot(Gt)}return ut(O,Rt,{backwards:!0})}function ul(O,H,se,ge){let{comment:ue,followingNode:be}=se[ge],{locStart:ot,locEnd:_t}=H,Rt=_t(ue);if(be)for(let an=ge+1;an<se.length;an++){let{comment:Gt,followingNode:Ln}=se[an];if(Ln!==be||!Zo(O.slice(Rt,ot(Gt))))break;Rt=_t(Gt)}return ut(O,Rt)}function ia(O,H){var an;var se,ge;let ue=O.length;if(ue===0)return;let{precedingNode:be,followingNode:ot}=O[0],_t=H.locStart(ot),Rt;for(Rt=ue;Rt>0;--Rt){let{comment:Gt,precedingNode:Ln,followingNode:Dn}=O[Rt-1];aa.strictEqual(Ln,be),aa.strictEqual(Dn,ot);let nn=H.originalText.slice(H.locEnd(Gt),_t);if((an=(ge=(se=H.printer).isGap)==null?void 0:ge.call(se,nn,H))!=null?an:/^[\s(]*$/.test(nn))_t=H.locStart(Gt);else break}for(let[Gt,{comment:Ln}]of O.entries())Gt<Rt?Uo(be,Ln):Vs(ot,Ln);for(let Gt of[be,ot])Gt.comments&&Gt.comments.length>1&&Gt.comments.sort((Ln,Dn)=>H.locStart(Ln)-H.locStart(Dn));O.length=0}function Ro(O,H,se){let ge=se.locStart(H)-1;for(let ue=1;ue<O.length;++ue)if(ge<se.locStart(O[ue]))return ue-1;return 0}function La(O,H){let se=H-1;se=Xo(O,se,{backwards:!0}),se=Ne(O,se,{backwards:!0}),se=Xo(O,se,{backwards:!0});let ge=Ne(O,se,{backwards:!0});return se!==ge}var Ar=La;function il(O,H){let se=O.node;return se.printed=!0,H.printer.printComment(O,H)}function Jo(O,H){var se;let ge=O.node,ue=[il(O,H)],{printer:be,originalText:ot,locStart:_t,locEnd:Rt}=H;if((se=be.isBlockComment)!=null&&se.call(be,ge)){let Gt=ut(ot,Rt(ge))?ut(ot,_t(ge),{backwards:!0})?Zn:_i:" ";ue.push(Gt)}else ue.push(Zn);let an=Ne(ot,Xo(ot,Rt(ge)));return an!==!1&&ut(ot,an)&&ue.push(Zn),ue}function J(O,H,se){var ge;let ue=O.node,be=il(O,H),{printer:ot,originalText:_t,locStart:Rt}=H,an=(ge=ot.isBlockComment)==null?void 0:ge.call(ot,ue);if(se!=null&&se.hasLineSuffix&&!(se!=null&&se.isBlock)||ut(_t,Rt(ue),{backwards:!0})){let Gt=Ar(_t,Rt(ue));return{doc:ms([Zn,Gt?Zn:"",be]),isBlock:an,hasLineSuffix:!0}}return!an||se!=null&&se.hasLineSuffix?{doc:[ms([" ",be]),qr],isBlock:an,hasLineSuffix:!0}:{doc:[" ",be],isBlock:an,hasLineSuffix:!1}}function Ee(O,H){let se=O.node;if(!se)return{};let ge=H[Symbol.for("printedComments")];if((se.comments||[]).filter(_t=>!ge.has(_t)).length===0)return{leading:"",trailing:""};let ue=[],be=[],ot;return O.each(()=>{let _t=O.node;if(ge!=null&&ge.has(_t))return;let{leading:Rt,trailing:an}=_t;Rt?ue.push(Jo(O,H)):an&&(ot=J(O,H,ot),be.push(ot.doc))},"comments"),{leading:ue,trailing:be}}function je(O,H,se){let{leading:ge,trailing:ue}=Ee(O,se);return!ge&&!ue?H:xn(H,be=>[ge,be,ue])}function Je(O){let{[Symbol.for("comments")]:H,[Symbol.for("printedComments")]:se}=O;for(let ge of H){if(!ge.printed&&!se.has(ge))throw new Error('Comment "'+ge.value.trim()+'" was not printed. Please report this error!');delete ge.printed}}function Ct(O){return()=>{}}var Nt=Ct,pn=class extends Error{constructor(){super(...arguments);$n(this,"name","ConfigError")}},ai=class extends Error{constructor(){super(...arguments);$n(this,"name","UndefinedParserError")}},zi={cursorOffset:{category:"Special",type:"int",default:-1,range:{start:-1,end:1/0,step:1},description:"Print (to stderr) where a cursor at the given position would move to after formatting.",cliCategory:"Editor"},endOfLine:{category:"Global",type:"choice",default:"lf",description:"Which end of line characters to apply.",choices:[{value:"lf",description:"Line Feed only (\\n), common on Linux and macOS as well as inside git repos"},{value:"crlf",description:"Carriage Return + Line Feed characters (\\r\\n), common on Windows"},{value:"cr",description:"Carriage Return character only (\\r), used very rarely"},{value:"auto",description:`Maintain existing
(mixed values within one file are normalised by looking at what's used after the first line)`}]},filepath:{category:"Special",type:"path",description:"Specify the input filepath. This will be used to do parser inference.",cliName:"stdin-filepath",cliCategory:"Other",cliDescription:"Path to the file to pretend that stdin comes from."},insertPragma:{category:"Special",type:"boolean",default:!1,description:"Insert @format pragma into file's first docblock comment.",cliCategory:"Other"},parser:{category:"Global",type:"choice",default:void 0,description:"Which parser to use.",exception:O=>typeof O=="string"||typeof O=="function",choices:[{value:"flow",description:"Flow"},{value:"babel",description:"JavaScript"},{value:"babel-flow",description:"Flow"},{value:"babel-ts",description:"TypeScript"},{value:"typescript",description:"TypeScript"},{value:"acorn",description:"JavaScript"},{value:"espree",description:"JavaScript"},{value:"meriyah",description:"JavaScript"},{value:"css",description:"CSS"},{value:"less",description:"Less"},{value:"scss",description:"SCSS"},{value:"json",description:"JSON"},{value:"json5",description:"JSON5"},{value:"jsonc",description:"JSON with Comments"},{value:"json-stringify",description:"JSON.stringify"},{value:"graphql",description:"GraphQL"},{value:"markdown",description:"Markdown"},{value:"mdx",description:"MDX"},{value:"vue",description:"Vue"},{value:"yaml",description:"YAML"},{value:"glimmer",description:"Ember / Handlebars"},{value:"html",description:"HTML"},{value:"angular",description:"Angular"},{value:"lwc",description:"Lightning Web Components"}]},plugins:{type:"path",array:!0,default:[{value:[]}],category:"Global",description:"Add a plugin. Multiple plugins can be passed as separate `--plugin`s.",exception:O=>typeof O=="string"||typeof O=="object",cliName:"plugin",cliCategory:"Config"},printWidth:{category:"Global",type:"int",default:80,description:"The line length where Prettier will try wrap.",range:{start:0,end:1/0,step:1}},rangeEnd:{category:"Special",type:"int",default:1/0,range:{start:0,end:1/0,step:1},description:`Format code ending at a given character offset (exclusive).
The range will extend forwards to the end of the selected statement.`,cliCategory:"Editor"},rangeStart:{category:"Special",type:"int",default:0,range:{start:0,end:1/0,step:1},description:`Format code starting at a given character offset.
The range will extend backwards to the start of the first line containing the selected statement.`,cliCategory:"Editor"},requirePragma:{category:"Special",type:"boolean",default:!1,description:`Require either '@prettier' or '@format' to be present in the file's first docblock comment
in order for it to be formatted.`,cliCategory:"Other"},tabWidth:{type:"int",category:"Global",default:2,description:"Number of spaces per indentation level.",range:{start:0,end:1/0,step:1}},useTabs:{category:"Global",type:"boolean",default:!1,description:"Indent with tabs instead of spaces."},embeddedLanguageFormatting:{category:"Global",type:"choice",default:"auto",description:"Control how Prettier formats quoted code embedded in the file.",choices:[{value:"auto",description:"Format embedded code if Prettier can automatically identify it."},{value:"off",description:"Never automatically format embedded code."}]}};function as({plugins:O=[],showDeprecated:H=!1}={}){let se=O.flatMap(ue=>{var be;return(be=ue.languages)!=null?be:[]}),ge=[];for(let ue of fr(Object.assign({},...O.map(({options:be})=>be),zi)))!H&&ue.deprecated||(Array.isArray(ue.choices)&&(H||(ue.choices=ue.choices.filter(be=>!be.deprecated)),ue.name==="parser"&&(ue.choices=[...ue.choices,...Pr(ue.choices,se,O)])),ue.pluginDefaults=Object.fromEntries(O.filter(be=>{var ot;return((ot=be.defaultOptions)==null?void 0:ot[ue.name])!==void 0}).map(be=>[be.name,be.defaultOptions[ue.name]])),ge.push(ue));return{languages:se,options:ge}}function*Pr(O,H,se){let ge=new Set(O.map(ue=>ue.value));for(let ue of H)if(ue.parsers){for(let be of ue.parsers)if(!ge.has(be)){ge.add(be);let ot=se.find(Rt=>Rt.parsers&&Object.prototype.hasOwnProperty.call(Rt.parsers,be)),_t=ue.name;ot!=null&&ot.name&&(_t+=` (plugin: ${ot.name})`),yield{value:be,description:_t}}}}function fr(O){let H=[];for(let[se,ge]of Object.entries(O)){let ue=Jt({name:se},ge);Array.isArray(ue.default)&&(ue.default=Pn(!1,ue.default,-1).value),H.push(ue)}return H}var _o=O=>String(O).split(/[/\\]/).pop();function Co(O,H){var ge;if(!H)return;let se=_o(H).toLowerCase();return(ge=O.find(({filenames:ue})=>ue==null?void 0:ue.some(be=>be.toLowerCase()===se)))!=null?ge:O.find(({extensions:ue})=>ue==null?void 0:ue.some(be=>se.endsWith(be)))}function De(O,H){var se,ge;if(H)return(ge=(se=O.find(({name:ue})=>ue.toLowerCase()===H))!=null?se:O.find(({aliases:ue})=>ue==null?void 0:ue.includes(H)))!=null?ge:O.find(({extensions:ue})=>ue==null?void 0:ue.includes(`.${H}`))}function He(O,H){var ue,be,ot;let se=O.plugins.flatMap(_t=>{var Rt;return(Rt=_t.languages)!=null?Rt:[]}),ge=(ot=(be=(ue=De(se,H.language))!=null?ue:Co(se,H.physicalFile))!=null?be:Co(se,H.file))!=null?ot:(H.physicalFile,void 0);return ge==null?void 0:ge.parsers[0]}var ht=He,vt={key:O=>/^[$_a-zA-Z][$_a-zA-Z0-9]*$/.test(O)?O:JSON.stringify(O),value(O){if(O===null||typeof O!="object")return JSON.stringify(O);if(Array.isArray(O))return`[${O.map(se=>vt.value(se)).join(", ")}]`;let H=Object.keys(O);return H.length===0?"{}":`{ ${H.map(se=>`${vt.key(se)}: ${vt.value(O[se])}`).join(", ")} }`},pair:({key:O,value:H})=>vt.value({[O]:H})},Bt=vn(mr(),1),zt=(O,H,{descriptor:se})=>{let ge=[`${Bt.default.yellow(typeof O=="string"?se.key(O):se.pair(O))} is deprecated`];return H&&ge.push(`we now treat it as ${Bt.default.blue(typeof H=="string"?se.key(H):se.pair(H))}`),ge.join("; ")+"."},Ot=vn(mr(),1),mt=Symbol.for("vnopts.VALUE_NOT_EXIST"),on=Symbol.for("vnopts.VALUE_UNCHANGED"),En=" ".repeat(2),kn=(O,H,se)=>{let{text:ge,list:ue}=se.normalizeExpectedResult(se.schemas[O].expected(se)),be=[];return ge&&be.push(yi(O,H,ge,se.descriptor)),ue&&be.push([yi(O,H,ue.title,se.descriptor)].concat(ue.values.map(ot=>gi(ot,se.loggerPrintWidth))).join(`
`)),Wi(be,se.loggerPrintWidth)};function yi(O,H,se,ge){return[`Invalid ${Ot.default.red(ge.key(O))} value.`,`Expected ${Ot.default.blue(se)},`,`but received ${H===mt?Ot.default.gray("nothing"):Ot.default.red(ge.value(H))}.`].join(" ")}function gi({text:O,list:H},se){let ge=[];return O&&ge.push(`- ${Ot.default.blue(O)}`),H&&ge.push([`- ${Ot.default.blue(H.title)}:`].concat(H.values.map(ue=>gi(ue,se-En.length).replace(/^|\n/g,`$&${En}`))).join(`
`)),Wi(ge,se)}function Wi(O,H){if(O.length===1)return O[0];let[se,ge]=O,[ue,be]=O.map(ot=>ot.split(`
`,1)[0].length);return ue>H&&ue>be?ge:se}var Xn=vn(mr(),1),Yn=[],Ht=[];function $r(O,H){if(O===H)return 0;let se=O;O.length>H.length&&(O=H,H=se);let ge=O.length,ue=H.length;for(;ge>0&&O.charCodeAt(~-ge)===H.charCodeAt(~-ue);)ge--,ue--;let be=0;for(;be<ge&&O.charCodeAt(be)===H.charCodeAt(be);)be++;if(ge-=be,ue-=be,ge===0)return ue;let ot,_t,Rt,an,Gt=0,Ln=0;for(;Gt<ge;)Ht[Gt]=O.charCodeAt(be+Gt),Yn[Gt]=++Gt;for(;Ln<ue;)for(ot=H.charCodeAt(be+Ln),Rt=Ln++,_t=Ln,Gt=0;Gt<ge;Gt++)an=ot===Ht[Gt]?Rt:Rt+1,Rt=Yn[Gt],_t=Yn[Gt]=Rt>_t?an>_t?_t+1:an:an>Rt?Rt+1:an;return _t}var kt=(O,H,{descriptor:se,logger:ge,schemas:ue})=>{let be=[`Ignored unknown option ${Xn.default.yellow(se.pair({key:O,value:H}))}.`],ot=Object.keys(ue).sort().find(_t=>$r(O,_t)<3);ot&&be.push(`Did you mean ${Xn.default.blue(se.key(ot))}?`),ge.warn(be.join(" "))},Bi=["default","expected","validate","deprecated","forward","redirect","overlap","preprocess","postprocess"];function Tr(O,H){let se=new O(H),ge=Object.create(se);for(let ue of Bi)ue in H&&(ge[ue]=Ur(H[ue],se,Mi.prototype[ue].length));return ge}var Mi=class{static create(O){return Tr(this,O)}constructor(O){this.name=O.name}default(O){}expected(O){return"nothing"}validate(O,H){return!1}deprecated(O,H){return!1}forward(O,H){}redirect(O,H){}overlap(O,H,se){return O}preprocess(O,H){return O}postprocess(O,H){return on}};function Ur(O,H,se){return typeof O=="function"?(...ge)=>O(...ge.slice(0,se-1),H,...ge.slice(se-1)):()=>O}var Ei=class extends Mi{constructor(O){super(O),this._sourceName=O.sourceName}expected(O){return O.schemas[this._sourceName].expected(O)}validate(O,H){return H.schemas[this._sourceName].validate(O,H)}redirect(O,H){return this._sourceName}},Xr=class extends Mi{expected(){return"anything"}validate(){return!0}},lr=class extends Mi{constructor(ge){var ue=ge,{valueSchema:O,name:H=O.name}=ue,se=Zu(ue,["valueSchema","name"]);super(qi(Jt({},se),{name:H})),this._valueSchema=O}expected(O){let{text:H,list:se}=O.normalizeExpectedResult(this._valueSchema.expected(O));return{text:H&&`an array of ${H}`,list:se&&{title:"an array of the following values",values:[{list:se}]}}}validate(O,H){if(!Array.isArray(O))return!1;let se=[];for(let ge of O){let ue=H.normalizeValidateResult(this._valueSchema.validate(ge,H),ge);ue!==!0&&se.push(ue.value)}return se.length===0?!0:{value:se}}deprecated(O,H){let se=[];for(let ge of O){let ue=H.normalizeDeprecatedResult(this._valueSchema.deprecated(ge,H),ge);ue!==!1&&se.push(...ue.map(({value:be})=>({value:[be]})))}return se}forward(O,H){let se=[];for(let ge of O){let ue=H.normalizeForwardResult(this._valueSchema.forward(ge,H),ge);se.push(...ue.map(Ci))}return se}redirect(O,H){let se=[],ge=[];for(let ue of O){let be=H.normalizeRedirectResult(this._valueSchema.redirect(ue,H),ue);"remain"in be&&se.push(be.remain),ge.push(...be.redirect.map(Ci))}return se.length===0?{redirect:ge}:{redirect:ge,remain:se}}overlap(O,H){return O.concat(H)}};function Ci({from:O,to:H}){return{from:[O],to:H}}var Or=class extends Mi{expected(){return"true or false"}validate(O){return typeof O=="boolean"}};function Gs(O,H){let se=Object.create(null);for(let ge of O){let ue=ge[H];if(se[ue])throw new Error(`Duplicate ${H} ${JSON.stringify(ue)}`);se[ue]=ge}return se}function sr(O,H){let se=new Map;for(let ge of O){let ue=ge[H];if(se.has(ue))throw new Error(`Duplicate ${H} ${JSON.stringify(ue)}`);se.set(ue,ge)}return se}function Sn(){let O=Object.create(null);return H=>{let se=JSON.stringify(H);return O[se]?!0:(O[se]=!0,!1)}}function ln(O,H){let se=[],ge=[];for(let ue of O)H(ue)?se.push(ue):ge.push(ue);return[se,ge]}function Yt(O){return O===Math.floor(O)}function ti(O,H){if(O===H)return 0;let se=typeof O,ge=typeof H,ue=["undefined","object","boolean","number","string"];return se!==ge?ue.indexOf(se)-ue.indexOf(ge):se!=="string"?Number(O)-Number(H):O.localeCompare(H)}function oo(O){return(...H)=>{let se=O(...H);return typeof se=="string"?new Error(se):se}}function Oi(O){return O===void 0?{}:O}function Fr(O){if(typeof O=="string")return{text:O};let{text:H,list:se}=O;return Ri((H||se)!==void 0,"Unexpected `expected` result, there should be at least one field."),se?{text:H,list:{title:se.title,values:se.values.map(Fr)}}:{text:H}}function _s(O,H){return O===!0?!0:O===!1?{value:H}:O}function Lo(O,H,se=!1){return O===!1?!1:O===!0?se?!0:[{value:H}]:"value"in O?[O]:O.length===0?!1:O}function or(O,H){return typeof O=="string"||"key"in O?{from:H,to:O}:"from"in O?{from:O.from,to:O.to}:{from:H,to:O.to}}function kr(O,H){return O===void 0?[]:Array.isArray(O)?O.map(se=>or(se,H)):[or(O,H)]}function zn(O,H){let se=kr(typeof O=="object"&&"redirect"in O?O.redirect:O,H);return se.length===0?{remain:H,redirect:se}:typeof O=="object"&&"remain"in O?{remain:O.remain,redirect:se}:{redirect:se}}function Ri(O,H){if(!O)throw new Error(H)}var vo=class extends Mi{constructor(O){super(O),this._choices=sr(O.choices.map(H=>H&&typeof H=="object"?H:{value:H}),"value")}expected({descriptor:O}){let H=Array.from(this._choices.keys()).map(ue=>this._choices.get(ue)).filter(({hidden:ue})=>!ue).map(ue=>ue.value).sort(ti).map(O.value),se=H.slice(0,-2),ge=H.slice(-2);return{text:se.concat(ge.join(" or ")).join(", "),list:{title:"one of the following values",values:H}}}validate(O){return this._choices.has(O)}deprecated(O){let H=this._choices.get(O);return H&&H.deprecated?{value:O}:!1}forward(O){let H=this._choices.get(O);return H?H.forward:void 0}redirect(O){let H=this._choices.get(O);return H?H.redirect:void 0}},zo=class extends Mi{expected(){return"a number"}validate(O,H){return typeof O=="number"}},Jr=class extends zo{expected(){return"an integer"}validate(O,H){return H.normalizeValidateResult(super.validate(O,H),O)===!0&&Yt(O)}},oi=class extends Mi{expected(){return"a string"}validate(O){return typeof O=="string"}},Ti=vt,Mo=kt,Ws=kn,eo=zt,Es=class{constructor(O,H){let{logger:se=console,loggerPrintWidth:ge=80,descriptor:ue=Ti,unknown:be=Mo,invalid:ot=Ws,deprecated:_t=eo,missing:Rt=()=>!1,required:an=()=>!1,preprocess:Gt=Dn=>Dn,postprocess:Ln=()=>on}=H||{};this._utils={descriptor:ue,logger:se||{warn:()=>{}},loggerPrintWidth:ge,schemas:Gs(O,"name"),normalizeDefaultResult:Oi,normalizeExpectedResult:Fr,normalizeDeprecatedResult:Lo,normalizeForwardResult:kr,normalizeRedirectResult:zn,normalizeValidateResult:_s},this._unknownHandler=be,this._invalidHandler=oo(ot),this._deprecatedHandler=_t,this._identifyMissing=(Dn,nn)=>!(Dn in nn)||Rt(Dn,nn),this._identifyRequired=an,this._preprocess=Gt,this._postprocess=Ln,this.cleanHistory()}cleanHistory(){this._hasDeprecationWarned=Sn()}normalize(O){let H={},se=[this._preprocess(O,this._utils)],ge=()=>{for(;se.length!==0;){let ue=se.shift(),be=this._applyNormalization(ue,H);se.push(...be)}};ge();for(let ue of Object.keys(this._utils.schemas)){let be=this._utils.schemas[ue];if(!(ue in H)){let ot=Oi(be.default(this._utils));"value"in ot&&se.push({[ue]:ot.value})}}ge();for(let ue of Object.keys(this._utils.schemas)){if(!(ue in H))continue;let be=this._utils.schemas[ue],ot=H[ue],_t=be.postprocess(ot,this._utils);_t!==on&&(this._applyValidation(_t,ue,be),H[ue]=_t)}return this._applyPostprocess(H),this._applyRequiredCheck(H),H}_applyNormalization(O,H){let se=[],{knownKeys:ge,unknownKeys:ue}=this._partitionOptionKeys(O);for(let be of ge){let ot=this._utils.schemas[be],_t=ot.preprocess(O[be],this._utils);this._applyValidation(_t,be,ot);let Rt=({from:Ln,to:Dn})=>{se.push(typeof Dn=="string"?{[Dn]:Ln}:{[Dn.key]:Dn.value})},an=({value:Ln,redirectTo:Dn})=>{let nn=Lo(ot.deprecated(Ln,this._utils),_t,!0);if(nn!==!1)if(nn===!0)this._hasDeprecationWarned(be)||this._utils.logger.warn(this._deprecatedHandler(be,Dn,this._utils));else for(let{value:An}of nn){let ni={key:be,value:An};if(!this._hasDeprecationWarned(ni)){let er=typeof Dn=="string"?{key:Dn,value:An}:Dn;this._utils.logger.warn(this._deprecatedHandler(ni,er,this._utils))}}};kr(ot.forward(_t,this._utils),_t).forEach(Rt);let Gt=zn(ot.redirect(_t,this._utils),_t);if(Gt.redirect.forEach(Rt),"remain"in Gt){let Ln=Gt.remain;H[be]=be in H?ot.overlap(H[be],Ln,this._utils):Ln,an({value:Ln})}for(let{from:Ln,to:Dn}of Gt.redirect)an({value:Ln,redirectTo:Dn})}for(let be of ue){let ot=O[be];this._applyUnknownHandler(be,ot,H,(_t,Rt)=>{se.push({[_t]:Rt})})}return se}_applyRequiredCheck(O){for(let H of Object.keys(this._utils.schemas))if(this._identifyMissing(H,O)&&this._identifyRequired(H))throw this._invalidHandler(H,mt,this._utils)}_partitionOptionKeys(O){let[H,se]=ln(Object.keys(O).filter(ge=>!this._identifyMissing(ge,O)),ge=>ge in this._utils.schemas);return{knownKeys:H,unknownKeys:se}}_applyValidation(O,H,se){let ge=_s(se.validate(O,this._utils),O);if(ge!==!0)throw this._invalidHandler(H,ge.value,this._utils)}_applyUnknownHandler(O,H,se,ge){let ue=this._unknownHandler(O,H,this._utils);if(ue)for(let be of Object.keys(ue)){if(this._identifyMissing(be,ue))continue;let ot=ue[be];be in this._utils.schemas?ge(be,ot):se[be]=ot}}_applyPostprocess(O){let H=this._postprocess(O,this._utils);if(H!==on){if(H.delete)for(let se of H.delete)delete O[se];if(H.override){let{knownKeys:se,unknownKeys:ge}=this._partitionOptionKeys(H.override);for(let ue of se){let be=H.override[ue];this._applyValidation(be,ue,this._utils.schemas[ue]),O[ue]=be}for(let ue of ge){let be=H.override[ue];this._applyUnknownHandler(ue,be,O,(ot,_t)=>{let Rt=this._utils.schemas[ot];this._applyValidation(_t,ot,Rt),O[ot]=_t})}}}}},xs;function Io(O,H,{logger:se=!1,isCLI:ge=!1,passThrough:ue=!1,FlagSchema:be,descriptor:ot}={}){if(ge){if(!be)throw new Error("'FlagSchema' option is required.");if(!ot)throw new Error("'descriptor' option is required.")}else ot=vt;let _t=ue?Array.isArray(ue)?(Dn,nn)=>ue.includes(Dn)?{[Dn]:nn}:void 0:(Dn,nn)=>({[Dn]:nn}):(Dn,nn,An)=>{let yr=An.schemas,{_:ni}=yr,er=Zu(yr,["_"]);return kt(Dn,nn,qi(Jt({},An),{schemas:er}))},Rt=Li(H,{isCLI:ge,FlagSchema:be}),an=new Es(Rt,{logger:se,unknown:_t,descriptor:ot}),Gt=se!==!1;Gt&&xs&&(an._hasDeprecationWarned=xs);let Ln=an.normalize(O);return Gt&&(xs=an._hasDeprecationWarned),Ln}function Li(O,{isCLI:H,FlagSchema:se}){let ge=[];H&&ge.push(Xr.create({name:"_"}));for(let ue of O)ge.push(Qa(ue,{isCLI:H,optionInfos:O,FlagSchema:se})),ue.alias&&H&&ge.push(Ei.create({name:ue.alias,sourceName:ue.name}));return ge}function Qa(O,{isCLI:H,optionInfos:se,FlagSchema:ge}){let{name:ue}=O,be={name:ue},ot,_t={};switch(O.type){case"int":ot=Jr,H&&(be.preprocess=Number);break;case"string":ot=oi;break;case"choice":ot=vo,be.choices=O.choices.map(Rt=>Rt!=null&&Rt.redirect?qi(Jt({},Rt),{redirect:{to:{key:O.name,value:Rt.redirect}}}):Rt);break;case"boolean":ot=Or;break;case"flag":ot=ge,be.flags=se.flatMap(Rt=>[Rt.alias,Rt.description&&Rt.name,Rt.oppositeDescription&&`no-${Rt.name}`].filter(Boolean));break;case"path":ot=oi;break;default:throw new Error(`Unexpected type ${O.type}`)}if(O.exception?be.validate=(Rt,an,Gt)=>O.exception(Rt)||an.validate(Rt,Gt):be.validate=(Rt,an,Gt)=>Rt===void 0||an.validate(Rt,Gt),O.redirect&&(_t.redirect=Rt=>Rt?{to:{key:O.redirect.option,value:O.redirect.value}}:void 0),O.deprecated&&(_t.deprecated=!0),H&&!O.array){let Rt=be.preprocess||(an=>an);be.preprocess=(an,Gt,Ln)=>Gt.preprocess(Rt(Array.isArray(an)?Pn(!1,an,-1):an),Ln)}return O.array?lr.create(qi(Jt(Jt({},H?{preprocess:Rt=>Array.isArray(Rt)?Rt:[Rt]}:{}),_t),{valueSchema:ot.create(be)})):ot.create(Jt(Jt({},be),_t))}var pu=Io,Ll=(O,H,se)=>{if(!(O&&H==null)){if(H.findLast)return H.findLast(se);for(let ge=H.length-1;ge>=0;ge--){let ue=H[ge];if(se(ue,ge,H))return ue}}},$a=Ll;function wa(O,H){if(!H)throw new Error("parserName is required.");let se=$a(!1,O,ue=>ue.parsers&&Object.prototype.hasOwnProperty.call(ue.parsers,H));if(se)return se;let ge=`Couldn't resolve parser "${H}".`;throw ge+=" Plugins must be explicitly added to the standalone bundle.",new pn(ge)}function Ko(O,H){if(!H)throw new Error("astFormat is required.");let se=$a(!1,O,ue=>ue.printers&&Object.prototype.hasOwnProperty.call(ue.printers,H));if(se)return se;let ge=`Couldn't find plugin for AST format "${H}".`;throw ge+=" Plugins must be explicitly added to the standalone bundle.",new pn(ge)}function So({plugins:O,parser:H}){let se=wa(O,H);return Ks(se,H)}function Ks(O,H){let se=O.parsers[H];return typeof se=="function"?se():se}function Ia(O,H){let se=O.printers[H];return typeof se=="function"?se():se}var Xa={astFormat:"estree",printer:{},originalText:void 0,locStart:null,locEnd:null};function Jl(se){return gl(this,arguments,function*(O,H={}){var ge;let ue=Jt({},O);if(!ue.parser)if(ue.filepath){if(ue.parser=ht(ue,{physicalFile:ue.filepath}),!ue.parser)throw new ai(`No parser could be inferred for file "${ue.filepath}".`)}else throw new ai("No parser and no file path given, couldn't infer a parser.");let be=as({plugins:O.plugins,showDeprecated:!0}).options,ot=Jt(Jt({},Xa),Object.fromEntries(be.filter(nn=>nn.default!==void 0).map(nn=>[nn.name,nn.default]))),_t=wa(ue.plugins,ue.parser),Rt=yield Ks(_t,ue.parser);ue.astFormat=Rt.astFormat,ue.locEnd=Rt.locEnd,ue.locStart=Rt.locStart;let an=(ge=_t.printers)!=null&&ge[Rt.astFormat]?_t:Ko(ue.plugins,Rt.astFormat),Gt=yield Ia(an,Rt.astFormat);ue.printer=Gt;let Ln=an.defaultOptions?Object.fromEntries(Object.entries(an.defaultOptions).filter(([,nn])=>nn!==void 0)):{},Dn=Jt(Jt({},ot),Ln);for(let[nn,An]of Object.entries(Dn))(ue[nn]===null||ue[nn]===void 0)&&(ue[nn]=An);return ue.parser==="json"&&(ue.trailingComma="none"),pu(ue,be,Jt({passThrough:Object.keys(Xa)},H))})}var ua=Jl,Ea=vn(vs(),1);function Mt(O,H){return gl(this,null,function*(){let se=yield So(H),ge=se.preprocess?se.preprocess(O,H):O;H.originalText=ge;let ue;try{ue=yield se.parse(ge,H,H)}catch(be){$i(be,O)}return{text:ge,ast:ue}})}function $i(O,H){let{loc:se}=O;if(se){let ge=(0,Ea.codeFrameColumns)(H,se,{highlightCode:!0});throw O.message+=`
`+ge,O.codeFrame=ge,O}throw O}var Ir=Mt;function es(O,H,se,ge,ue){return gl(this,null,function*(){var An;let{embeddedLanguageFormatting:be,printer:{embed:ot,hasPrettierIgnore:_t=()=>!1,getVisitorKeys:Rt}}=se;if(!ot||be!=="auto")return;if(ot.length>2)throw new Error("printer.embed has too many parameters. The API changed in Prettier v3. Please update your plugin. See https://prettier.io/docs/en/plugins.html#optional-embed");let an=Xi((An=ot.getVisitorKeys)!=null?An:Rt),Gt=[];nn();let Ln=O.stack;for(let{print:ni,node:er,pathStack:yr}of Gt)try{O.stack=yr;let Er=yield ni(Dn,H,O,se);Er&&ue.set(er,Er)}catch(Er){if(globalThis.PRETTIER_DEBUG)throw Er}O.stack=Ln;function Dn(ni,er){return Ps(ni,er,se,ge)}function nn(){let{node:ni}=O;if(ni===null||typeof ni!="object"||_t(O))return;for(let yr of an(ni))Array.isArray(ni[yr])?O.each(nn,yr):O.call(nn,yr);let er=ot(O,se);if(er){if(typeof er=="function"){Gt.push({print:er,node:ni,pathStack:[...O.stack]});return}ue.set(ni,er)}}})}function Ps(O,H,se,ge){return gl(this,null,function*(){let ue=yield ua(qi(Jt(Jt({},se),H),{parentParser:se.parser,originalText:O}),{passThrough:!0}),{ast:be}=yield Ir(O,ue),ot=yield ge(be,ue);return te(ot)})}function Rn(O,H){let{originalText:se,[Symbol.for("comments")]:ge,locStart:ue,locEnd:be,[Symbol.for("printedComments")]:ot}=H,{node:_t}=O,Rt=ue(_t),an=be(_t);for(let Gt of ge)ue(Gt)>=Rt&&be(Gt)<=an&&ot.add(Gt);return se.slice(Rt,an)}var Po=Rn;function Nr(O,H){return gl(this,null,function*(){({ast:O}=yield Ca(O,H));let se=new Map,ge=new jo(O),ue=Nt(H),be=new Map;yield es(ge,_t,H,Nr,be);let ot=yield cl(ge,H,_t,void 0,be);return Je(H),ot;function _t(an,Gt){return an===void 0||an===ge?Rt(Gt):Array.isArray(an)?ge.call(()=>Rt(Gt),...an):ge.call(()=>Rt(Gt),an)}function Rt(an){ue(ge);let Gt=ge.node;if(Gt==null)return"";let Ln=Gt&&typeof Gt=="object"&&an===void 0;if(Ln&&se.has(Gt))return se.get(Gt);let Dn=cl(ge,H,_t,an,be);return Ln&&se.set(Gt,Dn),Dn}})}function cl(O,H,se,ge,ue){var be;let{node:ot}=O,{printer:_t}=H,Rt;return(be=_t.hasPrettierIgnore)!=null&&be.call(_t,O)?Rt=Po(O,H):ue.has(ot)?Rt=ue.get(ot):Rt=_t.print(O,H,se,ge),ot===H.cursorNode&&(Rt=xn(Rt,an=>[bn,an,bn])),_t.printComment&&(!_t.willPrintOwnComments||!_t.willPrintOwnComments(O,H))&&(Rt=je(O,Rt,H)),Rt}function Ca(O,H){return gl(this,null,function*(){var ue,be;let se=(ue=O.comments)!=null?ue:[];H[Symbol.for("comments")]=se,H[Symbol.for("tokens")]=(be=O.tokens)!=null?be:[],H[Symbol.for("printedComments")]=new Set,si(O,H);let{printer:{preprocess:ge}}=H;return O=ge?yield ge(O,H):O,{ast:O,comments:se}})}function po(O,H){let{cursorOffset:se,locStart:ge,locEnd:ue}=H,be=Xi(H.printer.getVisitorKeys),ot=Rt=>ge(Rt)<=se&&ue(Rt)>=se,_t=O;for(let Rt of no(O,{getVisitorKeys:be,filter:ot}))_t=Rt;return _t}var fu=po;function eu(O,H){var _t;let{printer:{massageAstNode:se,getVisitorKeys:ge}}=H;if(!se)return O;let ue=Xi(ge),be=(_t=se.ignoredProperties)!=null?_t:new Set;return ot(O);function ot(Rt,an){if(!(Rt!==null&&typeof Rt=="object"))return Rt;if(Array.isArray(Rt))return Rt.map(nn=>ot(nn,an)).filter(Boolean);let Gt={},Ln=new Set(ue(Rt));for(let nn in Rt)!Object.prototype.hasOwnProperty.call(Rt,nn)||be.has(nn)||(Ln.has(nn)?Gt[nn]=ot(Rt[nn],Rt):Gt[nn]=Rt[nn]);let Dn=se(Rt,Gt,an);if(Dn!==null)return Dn!=null?Dn:Gt}}var Na=eu,ja=({parser:O})=>O==="json"||O==="json5"||O==="jsonc"||O==="json-stringify";function tu(O,H){let se=[O.node,...O.parentNodes],ge=new Set([H.node,...H.parentNodes]);return se.find(ue=>No.has(ue.type)&&ge.has(ue))}function Du(O){let H=O.length-1;for(;;){let se=O[H];if((se==null?void 0:se.type)==="Program"||(se==null?void 0:se.type)==="File")H--;else break}return O.slice(0,H+1)}function wu(O,H,{locStart:se,locEnd:ge}){let ue=O.node,be=H.node;if(ue===be)return{startNode:ue,endNode:be};let ot=se(O.node);for(let Rt of Du(H.parentNodes))if(se(Rt)>=ot)be=Rt;else break;let _t=ge(H.node);for(let Rt of Du(O.parentNodes)){if(ge(Rt)<=_t)ue=Rt;else break;if(ue===be)break}return{startNode:ue,endNode:be}}function qo(O,H,se,ge,ue=[],be){let{locStart:ot,locEnd:_t}=se,Rt=ot(O),an=_t(O);if(!(H>an||H<Rt||be==="rangeEnd"&&H===Rt||be==="rangeStart"&&H===an)){for(let Gt of Ys(O,se)){let Ln=qo(Gt,H,se,ge,[O,...ue],be);if(Ln)return Ln}if(!ge||ge(O,ue[0]))return{node:O,parentNodes:ue}}}function Ya(O,H){return H!=="DeclareExportDeclaration"&&O!=="TypeParameterDeclaration"&&(O==="Directive"||O==="TypeAlias"||O==="TSExportAssignment"||O.startsWith("Declare")||O.startsWith("TSDeclare")||O.endsWith("Statement")||O.endsWith("Declaration"))}var No=new Set(["JsonRoot","ObjectExpression","ArrayExpression","StringLiteral","NumericLiteral","BooleanLiteral","NullLiteral","UnaryExpression","TemplateLiteral"]),$l=new Set(["OperationDefinition","FragmentDefinition","VariableDefinition","TypeExtensionDefinition","ObjectTypeDefinition","FieldDefinition","DirectiveDefinition","EnumTypeDefinition","EnumValueDefinition","InputValueDefinition","InputObjectTypeDefinition","SchemaDefinition","OperationTypeDefinition","InterfaceTypeDefinition","UnionTypeDefinition","ScalarTypeDefinition"]);function Eu(O,H,se){if(!H)return!1;switch(O.parser){case"flow":case"babel":case"babel-flow":case"babel-ts":case"typescript":case"acorn":case"espree":case"meriyah":case"__babel_estree":return Ya(H.type,se==null?void 0:se.type);case"json":case"json5":case"jsonc":case"json-stringify":return No.has(H.type);case"graphql":return $l.has(H.kind);case"vue":return H.tag!=="root"}return!1}function _a(O,H,se){let{rangeStart:ge,rangeEnd:ue,locStart:be,locEnd:ot}=H;aa.ok(ue>ge);let _t=O.slice(ge,ue).search(/\S/),Rt=_t===-1;if(!Rt)for(ge+=_t;ue>ge&&!/\S/.test(O[ue-1]);--ue);let an=qo(se,ge,H,(nn,An)=>Eu(H,nn,An),[],"rangeStart"),Gt=Rt?an:qo(se,ue,H,nn=>Eu(H,nn),[],"rangeEnd");if(!an||!Gt)return{rangeStart:0,rangeEnd:0};let Ln,Dn;if(ja(H)){let nn=tu(an,Gt);Ln=nn,Dn=nn}else({startNode:Ln,endNode:Dn}=wu(an,Gt,H));return{rangeStart:Math.min(be(Ln),be(Dn)),rangeEnd:Math.max(ot(Ln),ot(Dn))}}var Ga="\uFEFF",$o=Symbol("cursor");function Br(O,H,se=0){return gl(this,null,function*(){if(!O||O.trim().length===0)return{formatted:"",cursorOffset:-1,comments:[]};let{ast:ge,text:ue}=yield Ir(O,H);H.cursorOffset>=0&&(H.cursorNode=fu(ge,H));let be=yield Nr(ge,H,se);se>0&&(be=Js([Zn,be],se,H.tabWidth));let ot=To(be,H);if(se>0){let Rt=ot.formatted.trim();ot.cursorNodeStart!==void 0&&(ot.cursorNodeStart-=ot.formatted.indexOf(Rt)),ot.formatted=Rt+qs(H.endOfLine)}let _t=H[Symbol.for("comments")];if(H.cursorOffset>=0){let Rt,an,Gt,Ln,Dn;if(H.cursorNode&&ot.cursorNodeText?(Rt=H.locStart(H.cursorNode),an=ue.slice(Rt,H.locEnd(H.cursorNode)),Gt=H.cursorOffset-Rt,Ln=ot.cursorNodeStart,Dn=ot.cursorNodeText):(Rt=0,an=ue,Gt=H.cursorOffset,Ln=0,Dn=ot.formatted),an===Dn)return{formatted:ot.formatted,cursorOffset:Ln+Gt,comments:_t};let nn=an.split("");nn.splice(Gt,0,$o);let An=Dn.split(""),ni=(0,jr.diffArrays)(nn,An),er=Ln;for(let yr of ni)if(yr.removed){if(yr.value.includes($o))break}else er+=yr.count;return{formatted:ot.formatted,cursorOffset:er,comments:_t}}return{formatted:ot.formatted,cursorOffset:-1,comments:_t}})}function ls(O,H){return gl(this,null,function*(){let{ast:se,text:ge}=yield Ir(O,H),{rangeStart:ue,rangeEnd:be}=_a(ge,H,se),ot=ge.slice(ue,be),_t=Math.min(ue,ge.lastIndexOf(`
`,ue)+1),Rt=ge.slice(_t,ue).match(/^\s*/)[0],an=ds(Rt,H.tabWidth),Gt=yield Br(ot,qi(Jt({},H),{rangeStart:0,rangeEnd:Number.POSITIVE_INFINITY,cursorOffset:H.cursorOffset>ue&&H.cursorOffset<=be?H.cursorOffset-ue:-1,endOfLine:"lf"}),an),Ln=Gt.formatted.trimEnd(),{cursorOffset:Dn}=H;Dn>be?Dn+=Ln.length-ot.length:Gt.cursorOffset>=0&&(Dn=Gt.cursorOffset+ue);let nn=ge.slice(0,ue)+Ln+ge.slice(be);if(H.endOfLine!=="lf"){let An=qs(H.endOfLine);Dn>=0&&An===`\r
`&&(Dn+=Is(nn.slice(0,Dn),`
`)),nn=wr(!1,nn,`
`,An)}return{formatted:nn,cursorOffset:Dn,comments:Gt.comments}})}function Ka(O,H,se){return typeof H!="number"||Number.isNaN(H)||H<0||H>O.length?se:H}function Cl(O,H){let{cursorOffset:se,rangeStart:ge,rangeEnd:ue}=H;return se=Ka(O,se,-1),ge=Ka(O,ge,0),ue=Ka(O,ue,O.length),qi(Jt({},H),{cursorOffset:se,rangeStart:ge,rangeEnd:ue})}function Va(O,H){let{cursorOffset:se,rangeStart:ge,rangeEnd:ue,endOfLine:be}=Cl(O,H),ot=O.charAt(0)===Ga;if(ot&&(O=O.slice(1),se--,ge--,ue--),be==="auto"&&(be=vr(O)),O.includes("\r")){let _t=Rt=>Is(O.slice(0,Math.max(Rt,0)),`\r
`);se-=_t(se),ge-=_t(ge),ue-=_t(ue),O=ci(O)}return{hasBOM:ot,text:O,options:Cl(O,qi(Jt({},H),{cursorOffset:se,rangeStart:ge,rangeEnd:ue,endOfLine:be}))}}function Cs(O,H){return gl(this,null,function*(){let se=yield So(H);return!se.hasPragma||se.hasPragma(O)})}function Ji(O,H){return gl(this,null,function*(){let{hasBOM:se,text:ge,options:ue}=Va(O,yield ua(H));if(ue.rangeStart>=ue.rangeEnd&&ge!==""||ue.requirePragma&&!(yield Cs(ge,ue)))return{formatted:O,cursorOffset:H.cursorOffset,comments:[]};let be;return ue.rangeStart>0||ue.rangeEnd<ge.length?be=yield ls(ge,ue):(!ue.requirePragma&&ue.insertPragma&&ue.printer.insertPragma&&!(yield Cs(ge,ue))&&(ge=ue.printer.insertPragma(ge)),be=yield Br(ge,ue)),se&&(be.formatted=Ga+be.formatted,be.cursorOffset>=0&&be.cursorOffset++),be})}function nu(O,H,se){return gl(this,null,function*(){let{text:ge,options:ue}=Va(O,yield ua(H)),be=yield Ir(ge,ue);return se&&(se.preprocessForPrint&&(be.ast=yield Ca(be.ast,ue)),se.massage&&(be.ast=Na(be.ast,ue))),be})}function Hs(O,H){return gl(this,null,function*(){H=yield ua(H);let se=yield Nr(O,H);return To(se,H)})}function yl(O,H){return gl(this,null,function*(){let se=Pi(O),{formatted:ge}=yield Ji(se,qi(Jt({},H),{parser:"__js_expression"}));return ge})}function ra(O,H){return gl(this,null,function*(){H=yield ua(H);let{ast:se}=yield Ir(O,H);return Nr(se,H)})}function Cu(O,H){return gl(this,null,function*(){return To(O,yield ua(H))})}var iu={};Kt(iu,{builders:()=>Bu,printer:()=>ru,utils:()=>jl});var Bu={join:Wr,line:_i,softline:gr,hardline:Zn,literalline:tr,group:ar,conditionalGroup:bi,fill:Gr,lineSuffix:ms,lineSuffixBoundary:Ni,cursor:bn,breakParent:qr,ifBreak:Zi,trim:Di,indent:Wn,indentIfBreak:xr,align:xi,addAlignmentToDoc:Js,markAsRoot:Ui,dedentToRoot:di,dedent:hr,hardlineWithoutBreakParent:Sr,literallineWithoutBreakParent:Qi,label:Hr,concat:O=>O},ru={printDocToString:To},jl={willBreak:co,traverseDoc:Ut,findInDoc:ei,mapDoc:gs,removeLines:P,stripTrailingHardline:te,replaceEndOfLine:We,canBreak:jt},Ru="3.2.5",Yr={};Kt(Yr,{addDanglingComment:()=>ko,addLeadingComment:()=>Vs,addTrailingComment:()=>Uo,getAlignmentSize:()=>ds,getIndentSize:()=>at,getMaxContinuousCount:()=>Yi,getNextNonSpaceNonCommentCharacter:()=>Ls,getNextNonSpaceNonCommentCharacterIndex:()=>Su,getStringWidth:()=>dr,hasNewline:()=>ut,hasNewlineInRange:()=>ea,hasSpaces:()=>Pa,isNextLineEmpty:()=>$u,isNextLineEmptyAfterIndex:()=>qe,isPreviousLineEmpty:()=>mu,makeString:()=>Vl,skip:()=>Eo,skipEverythingButNewLine:()=>Z,skipInlineComment:()=>a,skipNewline:()=>Ne,skipSpaces:()=>Xo,skipToLineEnd:()=>Ae,skipTrailingComment:()=>S,skipWhitespace:()=>go});function d(O,H){if(H===!1)return!1;if(O.charAt(H)==="/"&&O.charAt(H+1)==="*"){for(let se=H+2;se<O.length;++se)if(O.charAt(se)==="*"&&O.charAt(se+1)==="/")return se+2}return H}var a=d;function m(O,H){return H===!1?!1:O.charAt(H)==="/"&&O.charAt(H+1)==="/"?Z(O,H):H}var S=m;function $(O,H){let se=null,ge=H;for(;ge!==se;)se=ge,ge=Xo(O,ge),ge=a(O,ge),ge=S(O,ge),ge=Ne(O,ge);return ge}var ne=$;function ve(O,H){let se=null,ge=H;for(;ge!==se;)se=ge,ge=Ae(O,ge),ge=a(O,ge),ge=Xo(O,ge);return ge=S(O,ge),ge=Ne(O,ge),ge!==!1&&ut(O,ge)}var qe=ve;function ct(O,H){let se=O.lastIndexOf(`
`);return se===-1?0:ds(O.slice(se+1).match(/^[\t ]*/)[0],H)}var at=ct;function On(O){if(typeof O!="string")throw new TypeError("Expected a string");return O.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function ui(O,H){let se=O.match(new RegExp(`(${On(H)})+`,"g"));return se===null?0:se.reduce((ge,ue)=>Math.max(ge,ue.length/H.length),0)}var Yi=ui;function ji(O,H){let se=ne(O,H);return se===!1?"":O.charAt(se)}var Ls=ji;function Zs(O,H,se){for(let ge=H;ge<se;++ge)if(O.charAt(ge)===`
`)return!0;return!1}var ea=Zs;function sa(O,H,se={}){return Xo(O,se.backwards?H-1:H,se)!==H}var Pa=sa;function Lu(O,H,se){let ge=H==='"'?"'":'"',ue=wr(!1,O,new RegExp(`\\\\(.)|(["'])`,"gs"),(be,ot,_t)=>ot===ge?ot:_t===H?"\\"+_t:_t||(se&&/^[^\n\r"'0-7\\bfnrt-vx\u2028\u2029]$/.test(ot)?ot:"\\"+ot));return H+ue+H}var Vl=Lu;function Ju(O,H,se){return ne(O,se(H))}function Su(O,H){return arguments.length===2||typeof H=="number"?ne(O,H):Ju(...arguments)}function Sc(O,H,se){return Ar(O,se(H))}function mu(O,H){return arguments.length===2||typeof H=="number"?Ar(O,H):Sc(...arguments)}function rl(O,H,se){return qe(O,se(H))}function $u(O,H){return arguments.length===2||typeof H=="number"?qe(O,H):rl(...arguments)}function Sl(O,H=1){return(...se)=>gl(this,null,function*(){var be,ot;let ge=(be=se[H])!=null?be:{},ue=(ot=ge.plugins)!=null?ot:[];return se[H]=qi(Jt({},ge),{plugins:Array.isArray(ue)?ue:Object.values(ue)}),O(...se)})}var ju=Sl(Ji);function hl(O,H){return gl(this,null,function*(){let{formatted:se}=yield ju(O,qi(Jt({},H),{cursorOffset:-1}));return se})}function lc(O,H){return gl(this,null,function*(){return(yield hl(O,H))===O})}var Za=Sl(as,0),gc={parse:Sl(nu),formatAST:Sl(Hs),formatDoc:Sl(yl),printToDoc:Sl(ra),printDocToString:Sl(Cu)},uc=null},6221:function(lo,bs,dn){"use strict";dn.d(bs,{V:function(){return Qt}});const xe="\u037C",It=typeof Symbol=="undefined"?"__"+xe:Symbol.for(xe),fn=typeof Symbol=="undefined"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),it=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:{};class Qt{constructor(Kt,In){this.rules=[];let{finish:vn}=In||{};function gn(Ii){return/^@/.test(Ii)?[Ii]:Ii.split(/,\s*/)}function Si(Ii,Un,$t,qt){let mr=[],ss=/^@(\w+)\b/.exec(Ii[0]),Dr=ss&&ss[1]=="keyframes";if(ss&&Un==null)return $t.push(Ii[0]+";");for(let zs in Un){let pi=Un[zs];if(/&/.test(zs))Si(zs.split(/,\s*/).map(vs=>Ii.map(uo=>vs.replace(/&/,uo))).reduce((vs,uo)=>vs.concat(uo)),pi,$t);else if(pi&&typeof pi=="object"){if(!ss)throw new RangeError("The value of a property ("+zs+") should be a primitive value.");Si(gn(zs),pi,mr,Dr)}else pi!=null&&mr.push(zs.replace(/_.*/,"").replace(/[A-Z]/g,vs=>"-"+vs.toLowerCase())+": "+pi+";")}(mr.length||Dr)&&$t.push((vn&&!ss&&!qt?Ii.map(vn):Ii).join(", ")+" {"+mr.join(" ")+"}")}for(let Ii in Kt)Si(gn(Ii),Kt[Ii],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let Kt=it[It]||1;return it[It]=Kt+1,xe+Kt.toString(36)}static mount(Kt,In,vn){let gn=Kt[fn],Si=vn&&vn.nonce;gn?Si&&gn.setNonce(Si):gn=new ii(Kt,Si),gn.mount(Array.isArray(In)?In:[In],Kt)}}let yn=new Map;class ii{constructor(Kt,In){let vn=Kt.ownerDocument||Kt,gn=vn.defaultView;if(!Kt.head&&Kt.adoptedStyleSheets&&gn.CSSStyleSheet){let Si=yn.get(vn);if(Si)return Kt[fn]=Si;this.sheet=new gn.CSSStyleSheet,yn.set(vn,this)}else this.styleTag=vn.createElement("style"),In&&this.styleTag.setAttribute("nonce",In);this.modules=[],Kt[fn]=this}mount(Kt,In){let vn=this.sheet,gn=0,Si=0;for(let Ii=0;Ii<Kt.length;Ii++){let Un=Kt[Ii],$t=this.modules.indexOf(Un);if($t<Si&&$t>-1&&(this.modules.splice($t,1),Si--,$t=-1),$t==-1){if(this.modules.splice(Si++,0,Un),vn)for(let qt=0;qt<Un.rules.length;qt++)vn.insertRule(Un.rules[qt],gn++)}else{for(;Si<$t;)gn+=this.modules[Si++].rules.length;gn+=Un.rules.length,Si++}}if(vn)In.adoptedStyleSheets.indexOf(this.sheet)<0&&(In.adoptedStyleSheets=[this.sheet,...In.adoptedStyleSheets]);else{let Ii="";for(let $t=0;$t<this.modules.length;$t++)Ii+=this.modules[$t].getRules()+`
`;this.styleTag.textContent=Ii;let Un=In.head||In;this.styleTag.parentNode!=Un&&Un.insertBefore(this.styleTag,Un.firstChild)}}setNonce(Kt){this.styleTag&&this.styleTag.getAttribute("nonce")!=Kt&&this.styleTag.setAttribute("nonce",Kt)}}}}]);
