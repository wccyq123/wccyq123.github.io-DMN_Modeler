(self.webpackChunk=self.webpackChunk||[]).push([[199],{43943:function(ce,_,s){var ee=s(26068).default,D=s(31759).default,B=s(46241),U=s(11333);function re(e,t){return console.log(B),new B(e,t)}function O(e,t,n){return re().fromXML(e,"dmn:Definitions",t,n)}function ne(e,t){var n={number:t+1,input:[],inputValues:[],output:[],outputValues:[]};return e.inputEntry&&e.inputEntry.forEach(function(r){var a=r.text;a===""&&(a="-");try{n.inputValues.push(a)}catch(f){throw new Error("Failed to parse input entry: ".concat(a," ").concat(f))}}),e.outputEntry.forEach(function(r){r.text?n.outputValues.push(r.text):(n.output.push(null),n.outputValues.push(null))}),n}function $(e,t){if(t.hitPolicy!=="FIRST"&&t.hitPolicy!=="UNIQUE"&&t.hitPolicy!=="COLLECT"&&t.hitPolicy!=="RULE ORDER")throw new Error("Unsupported hit policy ".concat(t.hitPolicy));var n={hitPolicy:t.hitPolicy,rules:[],inputExpressions:[],parsedInputExpressions:[],outputNames:[]};return t.rule===void 0?console.log.warn("The decision table for decision '".concat(e,"' contains no rules.")):t.rule.forEach(function(r,a){n.rules.push(ne(r,a))}),t.input&&t.input.forEach(function(r){var a;if(r.inputExpression&&r.inputExpression.text)a=r.inputExpression.text;else if(r.inputVariable)a=r.inputVariable;else throw new Error("No input variable or expression set for input '".concat(r.id,"'"));n.inputExpressions.push(a);try{}catch(f){throw new Error("Failed to parse input expression '".concat(a,"': ").concat(f))}}),t.output.forEach(function(r){if(r.name)n.outputNames.push(r.name);else throw new Error('No name set for output "'.concat(r.id,'"'))}),n}function W(e){var t=[];return e.forEach(function(n){if(n.decisionLogic){var r={decisionLogic:$(n.id,n.decisionLogic),requiredDecisions:[]};n.informationRequirement!==void 0&&n.informationRequirement.forEach(function(a){if(a.requiredDecision!==void 0){var f=a.requiredDecision.href.replace("#","");r.requiredDecisions.push(f)}}),t[n.id]=r}}),t}function te(e,t){return new Promise(function(n,r){O(e,t,function(a,f){if(a)r(a);else try{var R=W(f.drgElement);n(R)}catch(x){r(x)}})})}function ae(e,t){var n=e.split(".");return n.reduce(function(r,a){return r===void 0?void 0:r[a]},t)}function g(e,t,n){var r=e.indexOf(".");if(r<0)t[e]&&Array.isArray(t[e])?t[e].push(n):t[e]=n;else{var a=e.substr(0,r),f=e.substr(r+1);t[a]?g(f,t[a],n):t[a]=g(f,{},n)}return t}function F(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(Array.isArray(t))t.forEach(function(f){return F(e,f,!0)});else for(var r in t)if(t.hasOwnProperty(r)){var a=t[r];Array.isArray(e[r])?Array.isArray(a)?e[r]=e[r].concat(a):a!=null&&e[r].push(a):D(a)==="object"&&a!==null&&!U.isMoment(a)&&!U.isDate(a)&&!U.isDuration(a)?((e[r]===void 0||e[r]===null)&&(e[r]={}),F(e[r],a,n)):n?(e[r]=[],e[r].push(a)):e[r]=a}}function H(e,t,n,r){for(var a=0;a<e.input.length;a+=1)try{var f=t[a].inputVariableName,R=e.input[a].build(ee({_inputVariableName:f},r));if(!R(t[a].value))return{matched:!1}}catch(T){throw console.log.error(T),new Error("Failed to evaluate input condition in column ".concat(a+1,": '").concat(e.inputValues[a],"': ").concat(T))}for(var x={},i=0;i<e.output.length;i+=1)if(e.output[i]!==null){var L=e.output[i].build(r);g(n[i],x,L[0])}else g(n[i],x,void 0);return{matched:!0,output:x}}function G(e,t,n,r){r||(r=[]);var a=t[e];if(a===void 0)throw new Error('No such decision "'.concat(e,'"'));for(var f=0;f<a.requiredDecisions.length;f+=1){var R=a.requiredDecisions[f];if(!r[R]){console.log.debug("Need to evaluate required decision ".concat(R));var x=G(R,t,n,r);F(n,x),r[R]=!0}}console.log.info('Evaluating decision "'.concat(e,'"...')),console.log.debug("Context: ".concat(JSON.stringify(n)));for(var i=a.decisionLogic,L=[],T=0;T<i.parsedInputExpressions.length;T+=1){var X=i.parsedInputExpressions[T],se=i.inputExpressions[T];try{var l=X.build(n),K=void 0;X.simpleExpressions&&X.simpleExpressions[0].type==="QualifiedName"&&(K=X.simpleExpressions[0].names.map(function(I){return I.nameChars}).join(".")),L.push({value:l[0],inputVariableName:K})}catch(I){throw new Error("Failed to evaluate input expression ".concat(se," of decision ").concat(e,": ").concat(I))}}var Q=i.hitPolicy==="FIRST"||i.hitPolicy==="UNIQUE"?{}:[];i.outputNames.forEach(function(I){(i.hitPolicy==="FIRST"||i.hitPolicy==="UNIQUE")&&g(I,Q,void 0)});for(var z=!1,ie=function(){var A=i.rules[V],c;try{c=H(A,L,i.outputNames,n)}catch(o){throw new Error("Failed to evaluate rule ".concat(A.number," of decision ").concat(e,":  ").concat(o))}if(c.matched){if(z&&i.hitPolicy==="UNIQUE")throw new Error('Decision "'.concat(e,'" is not unique but hit policy is UNIQUE.'));if(z=!0,console.log.info('Result for decision "'.concat(e,'": ').concat(JSON.stringify(c.output)," (rule ").concat(V+1," matched)")),i.hitPolicy==="FIRST"||i.hitPolicy==="UNIQUE"){if(i.outputNames.forEach(function(o){var d=ae(o,c.output);(d!==void 0||i.hitPolicy==="FIRST"||i.hitPolicy==="UNIQUE")&&g(o,Q,d)}),i.hitPolicy==="FIRST")return 1}else Q.push(c.output)}},V=0;V<i.rules.length&&!ie();V+=1);return!z&&i.rules.length>0&&console.log.warn('No rule matched for decision "'.concat(e,'".')),Q}function y(e,t){if(!e){console.log.debug("undefined");return}t||(t=""),console.log.debug(t+e.type),e.not&&console.log.debug("".concat(t,"  (not)")),e.operator&&console.log.debug("".concat(t,"  ").concat(e.operator));var n="".concat(t,"  ");switch(e.type){case"ArithmeticExpression":{y(e.operand_1,n),y(e.operand_2,n);break}case"FunctionInvocation":{y(e.fnName,n),y(e.params,n);break}case"DateTimeLiteral":e.params.forEach(function(r){return y(r,n)});break;case"Interval":{y(e.startpoint,n),y(e.endpoint,n);break}case"Literal":console.log.debug("".concat(n,'"').concat(e.value,'"'));break;case"Name":console.log.debug("".concat(n,'"').concat(e.nameChars,'"'));break;case"Program":y(e.body,n);break;case"PositionalParameters":e.params.forEach(function(r){return y(r,n)});break;case"QualifiedName":e.names.forEach(function(r){return y(r,n)});break;case"SimpleExpressions":e.simpleExpressions.forEach(function(r){return y(r,n)});break;case"SimplePositiveUnaryTest":y(e.operand,n);break;case"SimpleUnaryTestsNode":e.expr.forEach(function(r){return y(r,n)});break;case"UnaryTestsNode":e.expr.forEach(function(r){return y(r,n)});break;default:console.log.debug("?")}}ce.exports={readDmnXml:O,parseDmnXml:te,parseDecisions:W,evaluateDecision:G,dumpTree:y}},80657:function(ce,_,s){"use strict";s.r(_),s.d(_,{DMNModeler:function(){return V},default:function(){return I}});var ee=s(90228),D=s.n(ee),B=s(87999),U=s.n(B),re=s(48305),O=s.n(re),ne=s(85716),$=s(54397),W=s(13310),te=s(74623),ae=s.n(te),g=s(93236),F=s(61449),H=s(13763),G=s(26574),y=s(15558),e=s.n(y),t=s(26068),n=s.n(t),r=s(95949),a=function(c,o,d,m){try{if(JSON.parse(o)instanceof Array){var p=JSON.parse(o);if(typeof p[0]=="number"){var v="".concat(m," between ").concat(p[0]," and ").concat(p[1]),b=(0,r.ku)(v,d);return b}var P="".concat(m," in ").concat(o),j=(0,r.ku)(P,d);return j}var Z=(0,r.ku)(o,d);return Z===c}catch(Y){var J="".concat(m," ").concat(o),k=(0,r.ku)(J,d);return k}},f=function(c,o){var d=c.inputExpressions.map(function(p){var v=(0,r.ku)(p,o);return v}),m=[];if(c.rules.forEach(function(p){var v=!0;p.inputValues.forEach(function(P,j){P!=="-"&&!a(d[j],P,o,c.inputExpressions[j])&&(v=!1)});var b={};v&&c.outputNames.forEach(function(P,j){p.outputValues[j]&&(b[P]=(0,r.ku)("".concat(p.outputValues[j]),o))}),Object.keys(b).length>0&&m.push(n()({},b))}),c.hitPolicy==="UNIQUE"){if(m.length>1)throw"Decision is not unique but hit policy is UNIQUE.";return m[0]}return m},R=function(c){return c.reduce(function(o,d){var m,p;return{required:[].concat(e()(o.required),e()(((m=d.required)===null||m===void 0?void 0:m.split(","))||[])),disabled:[].concat(e()(o.disabled),e()(((p=d.disabled)===null||p===void 0?void 0:p.split(","))||[]))}},{required:[],disabled:[]})},x=s(46241),i=s(43943),L=function(){var A=U()(D()().mark(function c(o){var d,m;return D()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return d=new x.default,v.next=3,d.fromXML(o,"dmn:Definitions");case 3:return m=v.sent,v.abrupt("return",(0,i.parseDecisions)(m.rootElement.drgElement));case 5:case"end":return v.stop()}},c)}));return function(o){return A.apply(this,arguments)}}(),T=s(28942),X=s(76653),se=s(64663),l=s(62086),K=function(c){var o=c.xml,d=(0,g.useState)(""),m=O()(d,2),p=m[0],v=m[1],b=(0,g.useState)(),P=O()(b,2),j=P[0],Z=P[1],J=(0,g.useState)(),k=O()(J,2),Y=k[0],q=k[1],oe=function(E,u){console.log(u),v(E),console.log(E)};(0,g.useEffect)(function(){var w=function(){var E=U()(D()().mark(function u(){var S;return D()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,L(o);case 2:S=C.sent,Z(S);case 4:case"end":return C.stop()}},u)}));return function(){return E.apply(this,arguments)}}();o&&w()},[o]);var ue=function(){var w=U()(D()().mark(function E(){var u,S,h;return D()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.prev=0,u=Object.keys(j)[0],S=f(j[u].decisionLogic,JSON.parse(p)),N.next=5,(0,se.WU)(JSON.stringify(S),{parser:"json",plugins:[T.Z,X.ZP]});case 5:h=N.sent,q(h),S instanceof Array&&console.log(R(S)),N.next=13;break;case 10:N.prev=10,N.t0=N.catch(0),q(JSON.stringify({error:N.t0.message||N.t0}));case 13:case"end":return N.stop()}},E,null,[[0,10]])}));return function(){return w.apply(this,arguments)}}();return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-evenly"},children:[(0,l.jsx)(G.Z,{title:"Input",children:(0,l.jsx)(H.ZP,{style:{width:"500px"},value:p,height:"200px",extensions:[(0,F.AV)()],onChange:oe})}),(0,l.jsx)(G.Z,{title:"Result",children:(0,l.jsx)(H.ZP,{value:Y,style:{width:"500px"},height:"200px",extensions:[(0,F.AV)()],editable:!1,readOnly:!0})})]}),(0,l.jsx)($.ZP,{onClick:ue,children:"Print Result"})]})},Q=K,z=JSON.parse('{"w":"<?xml version=\\"1.0\\" encoding=\\"UTF-8\\"?>\\n<definitions xmlns=\\"https://www.omg.org/spec/DMN/20191111/MODEL/\\" xmlns:dmndi=\\"https://www.omg.org/spec/DMN/20191111/DMNDI/\\" id=\\"definitions_1y4gzr7\\" name=\\"definitions\\" namespace=\\"http://camunda.org/schema/1.0/dmn\\" exporter=\\"Camunda Modeler\\" exporterVersion=\\"5.19.0\\">\\n  <dmndi:DMNDI>\\n    <dmndi:DMNDiagram id=\\"DMNDiagram_17965dh\\" />\\n  </dmndi:DMNDI>\\n</definitions>\\n"}'),ie=["https://unpkg.com/dmn-js@16.3.0/dist/assets/diagram-js.css","https://unpkg.com/dmn-js@16.3.0/dist/assets/dmn-js-shared.css","https://unpkg.com/dmn-js@16.3.0/dist/assets/dmn-js-drd.css","https://unpkg.com/dmn-js@16.3.0/dist/assets/dmn-js-decision-table.css","https://unpkg.com/dmn-js@16.3.0/dist/assets/dmn-js-decision-table-controls.css","https://unpkg.com/dmn-js@16.3.0/dist/assets/dmn-js-literal-expression.css","https://unpkg.com/dmn-js@16.3.0/dist/assets/dmn-font/css/dmn.css"],V=function(){var c=(0,g.useState)(""),o=O()(c,2),d=o[0],m=o[1],p=(0,g.useState)(),v=O()(p,2),b=v[0],P=v[1],j=(0,g.useState)(""),Z=O()(j,2),J=Z[0],k=Z[1];(0,g.useEffect)(function(){k(z.w)},[]);var Y=function(){var w=U()(D()().mark(function E(){var u;return D()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.prev=0,h.next=3,b.saveXML({format:!0});case 3:u=h.sent,m(u.xml),console.log("DIAGRAM",u.xml),h.next=11;break;case 8:h.prev=8,h.t0=h.catch(0),console.error("could not save DMN 1.3 diagram",h.t0);case 11:case"end":return h.stop()}},E,null,[[0,8]])}));return function(){return w.apply(this,arguments)}}(),q=function(){var w=U()(D()().mark(function E(u){var S,h,C,N;return D()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.prev=0,M.next=3,b.importXML(u);case 3:S=M.sent,h=S.warnings,h.length?console.log("import with warnings",h):console.log("import successful"),C=b.getActiveViewer(),N=C.get("canvas"),N.zoom("fit-viewport"),M.next=14;break;case 11:M.prev=11,M.t0=M.catch(0),console.error("could not import DMN 1.3 diagram",M.t0);case 14:case"end":return M.stop()}},E,null,[[0,11]])}));return function(u){return w.apply(this,arguments)}}(),oe=function(E){var u=document.createElement("link");u.rel="stylesheet",u.href=E,document.head.appendChild(u)};(0,g.useEffect)(function(){ie.forEach(function(w){return oe(w)}),P(new(ae())({container:document.getElementById("editor-container"),height:500,width:"100%",keyboard:{bindTo:window}}))},[]),(0,g.useEffect)(function(){q(J)},[b,J]);var ue=function(E){var u=new FileReader;u.readAsText(E),u.onload=function(){u.result&&k(u.result)}};return(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"test-container",children:(0,l.jsxs)("div",{className:"editor-parent",children:[(0,l.jsx)("div",{className:"editor-container",id:"editor-container"}),(0,l.jsx)("div",{className:"editor-tabs"})]})}),(0,l.jsx)($.ZP,{id:"save-button",onClick:Y,children:"Test the DMN"}),(0,l.jsx)(W.Z,{maxCount:1,beforeUpload:ue,children:(0,l.jsx)($.ZP,{icon:(0,l.jsx)(ne.Z,{}),children:"Click to Upload DMN"})}),d&&(0,l.jsx)("div",{children:(0,l.jsx)(Q,{xml:d})})]})},I=V}}]);
